const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/18798b51-qlc919g0oq16nxtp.js","assets/2340486e-n0khdanno9uzbccp.js","assets/4813494d-di0bpg5zidu9s57f.js","assets/root-jvstnck2.css","assets/a8077c3c-n3vik6lcxatdsuys.js","assets/1a7ebd5f-ihenykhpblfwilpu.js","assets/conversation-small-dnpfu486.css","assets/b18bdd4a-kenkf1hfr1kes1pk.js","assets/a600b597-dzbdvtaygvpi9lmx.js","assets/5ff05818-e7r3fm69vd2e8mby.js","assets/4b9386ba-i47pf4ceaol018kk.js","assets/b81d67c1-g85xaexv7seu9n1r.js","assets/b9ebfa06-o5t8gt8380co00ia.js","assets/2c05f96f-jzs5r5qu5ml7dypp.js","assets/05574d3d-lnkdkcw9ljm29mz0.js","assets/58ea7b30-g19apksypsab7ace.js","assets/1de975ca-opfq6f6nav5b4m2m.js"])))=>i.map(i=>d[i]);
var st=Object.defineProperty,nt=Object.defineProperties;var it=Object.getOwnPropertyDescriptors;var L=Object.getOwnPropertySymbols;var le=Object.prototype.hasOwnProperty,ce=Object.prototype.propertyIsEnumerable;var de=(a,t,n)=>t in a?st(a,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):a[t]=n,c=(a,t)=>{for(var n in t||(t={}))le.call(t,n)&&de(a,n,t[n]);if(L)for(var n of L(t))ce.call(t,n)&&de(a,n,t[n]);return a},U=(a,t)=>nt(a,it(t));var me=(a,t)=>{var n={};for(var i in a)le.call(a,i)&&t.indexOf(i)<0&&(n[i]=a[i]);if(a!=null&&L)for(var i of L(a))t.indexOf(i)<0&&ce.call(a,i)&&(n[i]=a[i]);return n};import{_ as P,c as rt,h as je,j as e,M as l,d as dt,r as _e,b as lt,a as ct,n as mt,H as ht}from"./2340486e-n0khdanno9uzbccp.js";import{bp as w,rs as ut,rt as pt,ru as gt,rv as ft,ak as Ct,rw as It,G as he,l as y,oT as vt,aQ as Y,b as A,cO as xe,t as Se,oJ as jt,fa as o,by as _t,cB as b,q as xt,lT as St,p9 as Ge,oA as Gt,hT as Mt,rx as bt,fV as Me,qo as Pt,eg as wt,pq as Tt,be as zt,hk as Et,H as kt,fd as yt,dt as At,qO as Ot,ej as Ft,ol as ue,gv as q,gx as Dt,j as Lt,gM as Ut,gK as Nt,h as pe,P as K,fk as Rt,fl as Vt,fm as Ht,fL as $,R as Q,hq as ge,en as fe,an as Bt,il as qt,dk as Kt}from"./4813494d-di0bpg5zidu9s57f.js";import{u as $t}from"./6fd89734-d6icu94x1k3basy7.js";import{H as Qt,J as be,K as Pe,L as Yt,M as Jt,N as Wt,O as Xt,Q as Zt,U as ea,W as ta,X as aa,Y as oa,Z as sa,_ as we,$ as Te,a0 as na,a1 as ia,a2 as ra,l as da,A as Ce,a3 as la,a4 as ca,a5 as ma,a6 as ha,a7 as ua,a8 as pa,a9 as Ie,aa as ga,ab as fa,ac as Ca,ad as ve,ae as Ia,af as va,ag as ja,ah as _a,ai as xa,aj as Sa,ak as Ga,al as Ma,am as ba,an as Pa,ao as wa,ap as Ta,i as za,o as Ea,aq as ka,ar as ya,as as Aa}from"./1a7ebd5f-ihenykhpblfwilpu.js";import"./b81d67c1-g85xaexv7seu9n1r.js";import"./b9ebfa06-o5t8gt8380co00ia.js";const Oa=w(()=>P(()=>import("./18798b51-qlc919g0oq16nxtp.js"),__vite__mapDeps([0,1,2,3]))),Fa=w(()=>P(()=>import("./a8077c3c-n3vik6lcxatdsuys.js"),__vite__mapDeps([4,1,2,3,5,6])).then(a=>a.GizmoKeepInSidebarMenuItem)),Da=w(()=>P(()=>import("./b18bdd4a-kenkf1hfr1kes1pk.js"),__vite__mapDeps([7,1,5,2,3,6])).then(a=>a.DeleteConversationConfirmationModalContainer)),La=w(()=>P(()=>import("./a600b597-dzbdvtaygvpi9lmx.js").then(a=>a.c),__vite__mapDeps([8,1,2,3,5,6,9,10,11,12,13])).then(a=>a.GizmoDetailsModal)),Ua=w(()=>P(()=>import("./05574d3d-lnkdkcw9ljm29mz0.js"),__vite__mapDeps([14,1,2,3,5,6])).then(a=>a.default)),Na=w(()=>P(()=>import("./58ea7b30-g19apksypsab7ace.js"),__vite__mapDeps([15,1,2,3,5,6])).then(a=>a.default)),Ra=w(()=>P(()=>import("./1a7ebd5f-ihenykhpblfwilpu.js").then(a=>a.F_),__vite__mapDeps([5,1,2,3,6])).then(a=>a.default)),Va=w(()=>P(()=>import("./1de975ca-opfq6f6nav5b4m2m.js"),__vite__mapDeps([16,1,2,3,5,6])).then(a=>a.ThreadReportConversationModal));function Xa(a){"use forget";const t=rt.c(8),{children:n,conversation:i,gizmoResource:p,showReportModal:h,showGizmoModelPicker:f}=a;let g;t[0]!==i||t[1]!==p||t[2]!==f||t[3]!==h?(g=e.jsx(Ha,{conversation:i,gizmoResource:p,showReportModal:h,showGizmoModelPicker:f}),t[0]=i,t[1]=p,t[2]=f,t[3]=h,t[4]=g):g=t[4];let u;return t[5]!==n||t[6]!==g?(u=e.jsx(e.Fragment,{children:e.jsx(Me,{size:"small",triggerButton:n,children:g})}),t[5]=n,t[6]=g,t[7]=u):u=t[7],u}function Ha({conversation:a,gizmoResource:t,showReportModal:n,showGizmoModelPicker:i}){var z,x;const{canEdit:p}=ut(t),{canCreate:h}=pt(),{canViewConfig:f}=gt(t),g=ft(t.gizmo.id),u=Ct(),j=It(t),v=t.gizmo.share_recipient===he.Marketplace||t.gizmo.share_recipient===he.Link,s=!j&&v,I=y("1825130190")&&!j&&vt(t),E=(u==null?void 0:u.includes(Y.GizmoSupportEmails))&&!j&&t.gizmo.author.will_receive_support_emails&&I,N=Qt(),k=A(a.serverId$),_=be(Y.WorkspaceShareLinks),{onShare:R}=Pe({clientThreadId:a.id,serverThreadId:k!=null?k:void 0,gizmoId:t.gizmo.id,gizmo:t}),r=_&&k&&xe(),T=je(),O=Se(),V=Yt();return e.jsxs(e.Fragment,{children:[e.jsx(Jt,{show:i,conversation:a,gizmoHasCustomActions:jt(t.tools),preferredModelId:(z=t.gizmo.default_model)!=null?z:void 0}),e.jsx(o.LinkItem,{onClick:()=>{Xt({location:"Gizmo information dropdown",gizmo_id:t.gizmo.id})},to:"/g/".concat(t.gizmo.short_url),state:V,icon:Wt,children:e.jsx(l,c({},m.newChat))}),e.jsx(o.Item,{onClick:()=>b(La,{gizmoId:t.gizmo.id,creatorId:t.gizmo.author.user_id}),icon:_t,children:e.jsx(l,c({},m.about))}),((x=t.tools)==null?void 0:x.find(S=>S.type===xt.JIT_PLUGIN))&&e.jsx(o.Item,{onClick:()=>b(Ua,{gizmo:t}),icon:Zt,children:e.jsx(l,c({},m.privacySettings))}),p&&e.jsx(o.Item,{onClick:()=>{T(g)},icon:St,children:e.jsx(l,c({},m.customize))}),!p&&f&&e.jsxs(e.Fragment,{children:[e.jsx(o.Item,{onClick:()=>{T("/g/".concat(t.gizmo.id,"/view"))},icon:Ge,children:e.jsx(l,{id:"GizmoInformation.viewGizmoLabel",defaultMessage:"View configuration"})}),h&&e.jsx(o.Item,{onClick:async()=>{const S=await Gt.copyGizmo({gizmoId:t.gizmo.id});S.gizmo.id&&T("/gpts/editor/".concat(S.gizmo.id))},icon:ea,children:e.jsx(l,{id:"GizmoInformation.copyGizmoLabel",defaultMessage:"Duplicate GPT"})})]}),e.jsx(Fa,{gizmoResource:t,location:"conversation_page"}),e.jsx(ta,{gizmoResource:t}),e.jsx(aa,{gizmoResource:t,canEdit:p}),E&&e.jsx(o.Item,{onClick:()=>b(Na,{gizmo:t}),icon:oa,children:e.jsx(l,c({},m.feedbackEmail))}),I&&e.jsx(o.Item,{onClick:()=>b(Ra,{gizmo:t}),icon:sa,children:e.jsx(l,c({},m.reviewGPT))}),s&&e.jsx(o.Item,{onClick:n,icon:we,children:e.jsx(l,c({},m.reportGPT))}),r&&e.jsx(o.Item,{onClick:R,icon:Te,children:e.jsx(l,c({},m.shareChat))}),N&&e.jsxs(e.Fragment,{children:[e.jsx(o.Separator,{}),e.jsx(o.Item,{color:"danger",onClick:()=>{b(Oa,{gpt:t,account:O,isOpen:!0})},icon:Mt,children:e.jsx(l,{defaultMessage:"Remove GPT from workspace",id:"GizmoInformation.removeGPT"})})]}),(u==null?void 0:u.includes("debug"))&&e.jsxs(e.Fragment,{children:[e.jsx(o.Separator,{}),e.jsx(o.Item,{onClick:()=>{T(bt(t))},children:"(Internal) See share page"})]})]})}const Ba=({conversation:a,isActiveConversation:t,inMainScreen:n=!1,inChatWindow:i=!1,inOrla:p=!1,shouldShowAdultSearchToggle:h=!1})=>{var se,ne,ie;const f=zt(),g=Pt(),u=A(()=>wt()),j=Se(),v=a.id,s=a.gizmo_id,C=A(()=>s?Tt(f,s).gizmo$():null),I=Et(s),E=y("3376455464"),N=kt("1030729005").get("chatgpt_conversation_reporting_disabled",!1),k=y("16480203"),_=yt(),R=y("2322626856"),r=At(v),T=be(Y.WorkspaceShareLinks),O=!xe(),V=Ot(),z="owner"in a?(se=a.owner)==null?void 0:se.user_id:null,x=z==null||z===(j==null?void 0:j.normalizedAccountUserId),[S,J,ze,Ee]=Ft(v,d=>[d==null?void 0:d.isStarred,d==null?void 0:d.continuingFromSharedProjectConversationId,ya(d==null?void 0:d.mode,s!=null?s:void 0),Aa(d)]),{onShare:ke}=Pe({clientThreadId:v,gizmoId:s,ownerUserId:z,gizmo:C,serverThreadId:r!=null?r:void 0,location:"History Item Menu"}),ye=T&&(r!=null?r:J)&&!O&&(!I||k),Ae=!!C&&ue(C),Oe=na(),W=Ae&&Oe&&!q(C),Fe=s==null&&J==null,De=g.hasAccess&&!O&&T&&r!=null&&!_&&x&&(Fe||W)&&!Ee,F=S!=null?S:!!a.is_starred,X=lt(),Z=C&&I?ue(C):!1;let G=null;const{projects:Le}=Dt();G=Le;let D=null;I&&G&&(D=(ne=G.find(({gizmo:d})=>d.gizmo.id===s))==null?void 0:ne.gizmo);const H=ia(),{mutate:Ue}=ra(),ee=ct(),Ne=y("4027353239"),{eligible:Re}=da(Ce.ArchiveConversationOnboarding),Ve=Lt(),He=je(),[,Be]=mt(),{isAdultSearchEnabled:te,handleToggleSetting:qe}=$t({conversationMode:ze}),Ke=la(),$e=A(Ut),Qe=A(Nt),[B,Ye]=ca(),Je=Ke&&$e&&!Qe,We=async()=>{Ne?await Q.safePost("/conversation/{conversation_id}/archive",{parameters:{path:{conversation_id:a.id}},requestBody:{is_archived:!0}}):await Q.safePatch("/conversation/{conversation_id}",{parameters:{path:{conversation_id:a.id}},requestBody:{is_archived:!0}}),fe(ee,a.gizmo_id),Bt.logEvent("chatgpt_conversation_archived"),K.logEvent("Conversation Archived");const d=qt()&&Kt();Re&&!d&&(Ve.info(X.formatMessage({defaultMessage:"You can view archived chats in Settings",id:"HistoryGizmoItem.archiveChatOnboarding"}),{duration:10,hasCloseButton:!0}),Ea(Ce.ArchiveConversationOnboarding)),t&&ka(He)},Xe=async()=>{r&&(await Q.safePost("/conversation/{conversation_id}/convert_temporary",{parameters:{path:{conversation_id:r}}}),Be(d=>(d.has(ge)&&d.delete(ge),d),{replace:!0}),await za(r,{skipIfExisting:!1,source:"temporary_chat_convert"}),fe(ee,a.gizmo_id))},Ze=()=>{const d=!F;Ue({conversation:a,isStarred:d}),K.logEvent(d?"Conversation Pinned":"Conversation Unpinned")},et=ma(),ae=[_&&t&&R&&e.jsx(o.Item,{disabled:!r,onClick:Xe,icon:ua,children:e.jsx(l,c({},m.saveChat))},"save-temporary-chat"),ye&&e.jsx(o.Item,{className:pe(i&&!u&&"sm:hidden"),onClick:ke,icon:Te,"data-testid":"share-chat-menu-item",children:e.jsx(l,c({},m.shareChat))},"share"),De&&e.jsx(o.Item,{onClick:()=>{if(!r||Ie==null)return;K.logStructuredEvent(Rt,{step:Ht.GROUP_CHATS_INVITE_ACTIONS_STEP_CLICK_ADD_PEOPLE_BUTTON,source:Vt.GROUP_CHATS_INVITE_ACTIONS_SOURCE_CONVERSATION_DROPDOWN_MENU,originalConversationId:r}),b(Ie,W&&s?{type:"from-shared-project",serverThreadId:r,projectId:s,source:"sidebar"}:{type:"from-conversation",serverThreadId:r,source:"sidebar"})},icon:pa,children:e.jsx(l,{id:"2lQyjA",defaultMessage:"Start a group chat"})},"start-group-chat"),!i&&!p&&x&&e.jsx(o.Item,{disabled:!r,onClick:()=>{setTimeout(()=>{r&&fa.publish({kind:n?"editTitleInMainScreen":"editTitle",serverThreadId:r})},100)},icon:ga,children:e.jsx(l,c({},m.renameChat))},"rename"),!1,V&&!_&&x&&G&&(G==null?void 0:G.length)>0&&ha(s,F)&&r&&!q(C)&&e.jsxs(ht.Fragment,{children:[I&&e.jsxs(e.Fragment,{children:[G.length>1&&e.jsxs(o.Sub,{children:[e.jsx(o.SubMenuTrigger,{icon:Ca,children:e.jsx(l,c({},$.moveConversationToProject))}),e.jsx(o.Portal,{children:e.jsx(o.SubContent,{children:e.jsx(ve,{inSidebarFlyout:!1,onUpdateConversationGizmo:d=>H({newGizmoId:d,conversation:a,previousGizmoId:s!=null?s:null}),currentGizmoId:s})})})]}),e.jsx(o.Item,{onClick:()=>{H({newGizmoId:null,conversation:a,previousGizmoId:s!=null?s:null})},icon:Ia,children:e.jsx("div",{className:"overflow-hidden text-ellipsis whitespace-nowrap",children:e.jsx(l,U(c({},$.removeConversationFromProject),{values:{projectName:(ie=D==null?void 0:D.gizmo.display.name)!=null?ie:"project"}}))})})]}),!I&&!q(C)&&e.jsxs(o.Sub,{children:[e.jsx(o.SubMenuTrigger,{icon:va,children:X.formatMessage($.moveConversationToProject)}),e.jsx(o.Portal,{children:e.jsx(o.SubContent,{children:e.jsx(ve,{inSidebarFlyout:!1,onUpdateConversationGizmo:d=>H({newGizmoId:d,conversation:a,previousGizmoId:s!=null?s:null})})})})]})]},"snorlax")].filter(Boolean),{automationId:oe,sourceMessageId:tt}=_e.useContext(ja),at=y("3018147683"),M={topItems:ae.length>0,odysseyItem:!!oe||!oe&&!!tt,pinItem:!s&&!_,tocToggleItem:Je,reportItem:E&&!N&&(i||Z),archiveItem:x&&!_,deleteItem:x&&!_,toggleAdultSearchItem:h};return Object.values(M).some(Boolean)?e.jsxs(e.Fragment,{children:[M.topItems&&e.jsxs(e.Fragment,{children:[ae,e.jsx(o.Separator,{className:pe("first:hidden last:hidden",i&&"sm:hidden")})]}),h&&e.jsx(o.Item,{onClick:()=>qe(!te),icon:_a,children:te?e.jsx(l,c({},m.hideMatureContent)):e.jsx(l,c({},m.showMatureContent))},"adult-search-toggle"),M.odysseyItem&&e.jsx(xa,{children:({openScheduleModal:d,isScheduled:re,isSchedulable:ot})=>(ot||re)&&e.jsx(o.Item,{onClick:d,disabled:!r,icon:Sa,children:e.jsx(l,c({},re?m.editSchedule:m.scheduleTask))})}),M.pinItem&&e.jsx(o.Item,{disabled:!r,onClick:Ze,icon:F?Ga:Ma,children:e.jsx(l,c({},F?m.unpinChat:m.pinChat))}),M.tocToggleItem&&e.jsx(o.Item,{onClick:()=>Ye(!B),icon:B?Ge:ba,children:B?e.jsx(l,{id:"TableOfContents.Menu.Show",defaultMessage:"Show table of contents"}):e.jsx(l,{id:"TableOfContents.Menu.Hide",defaultMessage:"Hide table of contents"})},"toc-toggle"),M.archiveItem&&e.jsx(o.Item,{disabled:!r,onClick:()=>{r&&We()},icon:Pa,children:e.jsx(l,c({},m.archiveChat))}),M.reportItem&&e.jsx(o.Item,{icon:we,onClick:()=>b(Va,U(c({clientThreadId:v,isSharedConversation:et},Z&&{projectId:s,conversationOwnerId:z}),{isStaticSharedThread:!1})),children:s?e.jsx(l,{id:"thread.reportConversation",defaultMessage:"Report conversation"}):e.jsx(l,{id:"thread.report",defaultMessage:"Report"})}),M.deleteItem&&e.jsx(o.Item,{color:"danger",disabled:!r,onClick:()=>{r&&b(Da,{conversationTitle:a.title,serverThreadId:r,isActiveConversation:t,gizmoId:s})},icon:wa,"data-testid":"delete-chat-menu-item",children:e.jsx(l,c({},m.deleteChat))}),at&&e.jsx(Ta,{conversationId:a.id,isActiveConversation:t})]}):null};function Za({clientThreadId:a,gizmoId:t,conversationTitle:n,conversationAsyncStatus:i,isDoNotRemember:p,isStarred:h,owner:f=null}){return{id:a,title:n!=null?n:"",create_time:null,update_time:null,owner:f,conversation_template_id:null,async_status:i!=null?i:null,gizmo_id:t!=null?t:null,snippet:null,is_do_not_remember:p,is_starred:h}}const eo=j=>{var v=j,{conversation:a,children:t,isActiveConversation:n,onOpenChange:i,inMainScreen:p=!1,inChatWindow:h=!1,inOrla:f=!1,shouldShowAdultSearchToggle:g=!1}=v,u=me(v,["conversation","children","isActiveConversation","onOpenChange","inMainScreen","inChatWindow","inOrla","shouldShowAdultSearchToggle"]);const[s,C]=_e.useState(!1),I=Ba({conversation:a,inMainScreen:p,isActiveConversation:n,inChatWindow:h,inOrla:f,shouldShowAdultSearchToggle:g});return e.jsx(Me,U(c({},u),{open:s,onOpenChange:E=>{C(E),i==null||i(E)},side:"bottom",contentAlign:h?"end":"start",alignOffset:h?0:-8,sideOffset:h?0:-4,triggerButton:I?t:void 0,size:"auto",children:s&&e.jsx(e.Fragment,{children:I})}))},m=dt({newChat:{defaultMessage:"New chat",id:"GizmoInformation.newChat"},about:{defaultMessage:"About",id:"GizmoInformation.about"},privacySettings:{defaultMessage:"Privacy settings",id:"GizmoInformation.privacySettings"},viewDetails:{defaultMessage:"View details",id:"GizmoInformation.viewDetails"},share:{defaultMessage:"Share",id:"GizmoInformation.share"},favorite:{defaultMessage:"Favorite",id:"GizmoInformation.favorite"},customize:{defaultMessage:"Edit GPT",id:"GizmoInformation.customize"},feedbackEmail:{defaultMessage:"Send feedback",id:"GizmoInformation.feedbackEmail"},reviewGPT:{defaultMessage:"Review GPT",id:"GizmoInformation.reviewGPT"},report:{defaultMessage:"Report",id:"GizmoInformation.report"},reportGPT:{defaultMessage:"Report GPT",id:"GizmoInformation.reportGPT"},privacy:{defaultMessage:"Privacy",id:"GizmoInformation.privacy"},deleteChat:{defaultMessage:"Delete",id:"GizmoInformation.deleteChat.0"},debugChat:{defaultMessage:"(Internal) Debug",id:"GizmoInformation.debugChat"},renameChat:{defaultMessage:"Rename",id:"GizmoInformation.renameChat"},viewFiles:{defaultMessage:"View files",id:"GizmoInformation.viewFiles"},scheduleTask:{id:"7e1pG9",defaultMessage:"Schedule"},editSchedule:{id:"qzM4nO",defaultMessage:"Edit schedule"},archiveChat:{defaultMessage:"Archive",id:"GizmoInformation.archiveChat.0"},shareChat:{defaultMessage:"Share",id:"GizmoInformation.shareChat"},shareChatLong:{defaultMessage:"Share chat",id:"GizmoInformation.shareChatLong"},saveChat:{id:"s3KGQw",defaultMessage:"Save chat"},pinChat:{defaultMessage:"Pin chat",id:"GizmoInformation.pinChat"},unpinChat:{defaultMessage:"Unpin chat",id:"GizmoInformation.unpinChat"},showMatureContent:{defaultMessage:"Show mature content",id:"GizmoInformation.showMatureContent"},hideMatureContent:{defaultMessage:"Hide mature content",id:"GizmoInformation.hideMatureContent"}});export{eo as GizmoConversationOptionsDropdown,Xa as GizmoInformationDropdown,Ha as GizmoInformationDropdownItems,Za as buildConversationResponse};
//# sourceMappingURL=0edf3897-hr7yxyvq54jqn6lw.js.map
