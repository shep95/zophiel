const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/604d4c3d-edk1z1un3e93kfkg.js","assets/2340486e-n0khdanno9uzbccp.js","assets/4813494d-di0bpg5zidu9s57f.js","assets/root-jvstnck2.css","assets/7517017f-c0ls495fz2t1hbyy.js","assets/47ed0b35-ig7nq5gldsqwv2by.js","assets/6ffe46c3-fwh6b5py55uynt3e.js","assets/83a5e40a-ckfcmsepmeig5bqz.js","assets/2b4d81ac-hgcczs5nmix22daz.js","assets/1f6a562c-hpfivm77mvvpyn6n.js","assets/f5472ced-exfoemtrplgloywm.js","assets/3589534a-kib9eo5xg735gbk9.js","assets/bceae1cc-ceyf1wwees3sw7k3.js","assets/c982bafe-mh63y4ahpni3eifx.js","assets/c09d86e5-blvmd2dajnvlo9us.js","assets/a848d420-f7hvhcxlsvg8kfb8.js","assets/85c35906-klkbhmy112vjq998.js","assets/4b9386ba-i47pf4ceaol018kk.js","assets/b81d67c1-g85xaexv7seu9n1r.js","assets/b9ebfa06-o5t8gt8380co00ia.js","assets/e04c699b-ggwtg4re0nly33aa.js","assets/089c718c-clpuzb1fnoaty06o.js","assets/84e8f385-egf9uxe7ipj6bm36.js","assets/6fd89734-otfk9dsgab664vd5.js","assets/1bc04b52-b4wr9duki6wfcq7j.js","assets/e6465fe8-b55uck95t0ahph2h.js","assets/1bc04b52-kjqi8i9f3vubqnfc.js","assets/1bc04b52-hu1bt0oauegdhua6.js","assets/1bc04b52-h1em0bjkpkjv8ykw.js","assets/1bc04b52-ejh0m4idynv2xgp8.js","assets/1bc04b52-hylmuees1tuxf0o2.js","assets/54d21dcb-lgepv93lazyd4p2y.js","assets/b4c3a217-bm4lb0thwj6lecwx.js","assets/1bc04b52-fhkffvy342us9wxq.js","assets/1bc04b52-c7rotu5a6tp3ci80.js","assets/1bc04b52-lv4tv9an6ktv3l0s.js","assets/1bc04b52-gl5z8d62n822jb7m.js","assets/d5fa12f2-ekutmjhyxqub424h.js","assets/dcadf3b0-4fxyyqva0pqqjcbm.js","assets/2af37e0b-gsnjg5f20cq8n5kl.js","assets/38e61b13-e4601ys3s98t8957.js","assets/0a717d1e-knpfezbo1hneu1jj.js","assets/af7de5ed-bmn5piozflf1bg3g.js","assets/cf64444f-myocbnegoaizgdru.js","assets/1361132d-cmaobpdpreyiep8p.js","assets/e7a416e4-hfqtgv8m3ms4dz3c.js","assets/26b47209-f67ilcmhhljx5dq3.js","assets/e8b55dd1-cxfvlfgpu4s9cerj.js","assets/0f28d127-g97evra64tca73u5.js","assets/6fda7451-k6afy5jolqrzrp23.js","assets/82d09521-fqzy3g805a5h9oz6.js","assets/5c9e1b52-bbknmi85aly2cpz0.js","assets/1951ef38-dabfkosyoi4qp5fj.js","assets/97db0fda-npfm83jupn4s58r9.js","assets/22bcb108-fdwwrv8tl3p7qrb2.js","assets/4c806318-c46pjaieg90ka3l7.js","assets/ansi-1f6vhsjh.css","assets/2c5c5d1e-bkl66xp25l8xo7oi.js","assets/04581835-gicgq7i4hdg185qf.js","assets/ab750810-ilv0rd6oce8g4q9o.js","assets/e5d54aa7-evvdat0c1kyfkyb1.js","assets/4813494d-nacayw1yfzf7s770.js","assets/373ddd65-f76gy0b8ieo4s693.js","assets/ac827dee-lbfkf9dgb8igvctn.js","assets/1bc04b52-gn6ju16nxa3wbe97.js","assets/1bc04b52-e722cq7x70uf2ela.js","assets/200313d5-m2qi64wpr94hjoj7.js","assets/1a5e078c-orjfbgbq9v2hzdjt.js","assets/1bc04b52-jbvp2k2yd8ul63oq.js","assets/1bc04b52-k3wdhrv7c928nig1.js","assets/ce52ae67-lep2wptoy14cfe2w.js","assets/bc18f706-ggmfm6vsm8xfjh2h.js","assets/1bc04b52-j8mdq0okhi6vw6kp.js","assets/45d3a556-fo1wwmlyyvy2wax0.js","assets/781797c9-e3xbbwr7ah8iicik.js","assets/31cec8d8-ce3hgmw4iyyhicud.js","assets/1bc04b52-xt98zj1xgahnmc03.js","assets/1bc04b52-k87pnixdylp2ksh8.js","assets/22724723-mq5oosbthk49i7b4.js","assets/writing-block-editor-b094x0i1.css","assets/032c3459-gfpqyhflsla4h6p6.js","assets/e65185e9-oxd1ayzxoprwf6x1.js","assets/2b85cfea-b3uvkf39le8c2xm0.js","assets/b3e7be71-cm955h0khwf4msqj.js","assets/af004db9-dmwqnmwzjibyeaoe.js","assets/679fc303-kl7c6054usfnqmd4.js","assets/378f37b1-k97n0y6ba9c9h39c.js","assets/52989639-hl6vrc4o7p5m5r9e.js","assets/04aceeae-ixbrkoumff85xlku.js","assets/e77e0292-l1vs1tdcrjfvjk6u.js","assets/72c9acea-ec5d6qkzb2vn3xuw.js","assets/7517017f-kx34yg3blv92o8xp.js","assets/map-with-entities-dzmru74c.css","assets/f4222f0c-ew6upscsf6rf7q7m.js","assets/e1d1ae28-2cvn6cxe91tjmx0p.js","assets/2478e8be-nzej33eon34w6jmn.js","assets/c50694f1-k0ucwkifl7pk6btu.js","assets/eda93c10-c2gsvcf4g6mifvl3.js","assets/6fd89734-emyp215ozqfbledr.js","assets/aa6b223c-e3obbyhvkbltocww.js","assets/dccfc4ad-jluqwb152b4qj6fu.js","assets/25e69e8b-gbkmmqarwkyhthql.js","assets/e3127a4c-msnjy7p3w5btr6rl.js","assets/09f5ffef-caxilcqwllci3pvs.js","assets/product-variants-pcfu1bfm.css","assets/17a4a3eb-kwqy8y9l1juxuewg.js","assets/5fe1e801-iaapkk0y92pqco4k.js","assets/97d4a2c4-k53nxdevhg5q7afz.js","assets/a366adf3-ec2lwcsjzq0y9kv1.js","assets/1bc04b52-gcni3hxpaqngqsab.js","assets/6ec7331b-latywf4lcqhqvf5s.js","assets/16d1c905-dr9kvinvs53n9t17.js","assets/e7cab7fd-d1aozfxh4watb0yj.js","assets/66c6e910-ol9d5wxhynx9q2is.js","assets/498cd593-e32uew1rqcah5vhj.js","assets/b7675d69-oxont9zeuaiwb679.js","assets/table-components-gjyj5koo.css","assets/9826050f-jhzpevpq8lx618ck.js","assets/d02a2ed9-jt4j531xa2mq5otq.js","assets/6b0792f1-jwm2780gzkkhdmn4.js","assets/20ecc4a3-m0xx1qx3zdm6vf89.js","assets/01899762-g5mdijmj9tumg92w.js","assets/75a144d0-f52aesbun0f1bi7d.js","assets/d9702cc2-i7rxvjoyupqo4otv.js","assets/95d09b10-cyr2jpjisoi5dawa.js","assets/19eaf2e2-ldnorme9pnbge93g.js","assets/c478c166-juekm28z2ewsu37r.js","assets/5575f88d-0ilvj77uuoo3k4o4.js","assets/f899885a-lhsfvkdoegx8vfa5.js","assets/953f16d7-by8td5zp1eum1i7c.js","assets/1819a202-k7soatiaek8m7ave.js","assets/8527de68-hclq7d1ke5ty21ud.js","assets/9c781baa-ms1pr0s11hpiffaq.js","assets/655149e0-mbaaz0l9g25p79by.js","assets/ef5c7966-lae729rhoq8do4os.js","assets/8da4ad33-npqxa2prnb4cmffl.js","assets/23042add-kthzf5hyy40n75fs.js","assets/479bdd96-i15pz5vyiqs34dhx.js","assets/af1d6752-hxpq83ph8ho6j3f9.js","assets/05d28061-ok6xmhmsc1w7txnq.js","assets/5373c7f8-l2w8wwucxovdtok0.js","assets/9bee0952-fxdbwwdrjo8v2f2i.js","assets/1bc04b52-h3moqxxwumotj8ui.js","assets/5ff05818-e7r3fm69vd2e8mby.js","assets/2c05f96f-jzs5r5qu5ml7dypp.js","assets/8a0ea239-k5nzxb1mwtc1km4s.js","assets/e21b3b3f-20f2eud26zbq9d5f.js","assets/929b8f98-bi5zibmx55zmngs7.js","assets/ac5dd3e8-pe3gotr981ye4uf4.js","assets/1bc04b52-emja6bpoehwcct3m.js","assets/d5b1a7e0-k2q5u7s3azh798pa.js","assets/52878ea3-ioe7kiws6mdf258w.js","assets/97587f90-ob9hx1q3ilf6g3xt.js","assets/db62250d-eyec17b70eqxu45z.js","assets/dbb95ee5-knopp20nqsg0pkxa.js","assets/1893e499-abqgac27ymh8ltab.js","assets/9ed9a415-dm4br15ut09gdl61.js","assets/28938d3c-ne58pdayq54airr8.js","assets/6fd89734-d6icu94x1k3basy7.js","assets/20b859e0-gwcqkajwbyf66cvp.js","assets/de6c4a91-hmoz2bxnei4jc02o.js","assets/11031636-mataoinojzjwr06u.js","assets/0ec7d136-gcmhnhy8jq7bgqho.js","assets/23f3fc89-kdbr39kvwzzxr81v.js","assets/b7727372-ih4wlhq4lv8jr5cw.js","assets/6781182a-kyrl5bw1gr47smyh.js","assets/2a7d021a-ck96psp622suyvts.js","assets/d41188c5-huhjuffvy94zco5v.js","assets/13c98494-b5tlcqkh5c83biuh.js","assets/c88750bf-fl7by4izan4c878i.js","assets/083c602a-egfg0hocv6doyfsw.js","assets/6c493904-eup4esftu7u6ut5z.js","assets/bd6338f8-gbllnqi3xu87spgw.js","assets/417c9960-cqgyythmtturvp0x.js","assets/4a765750-gbc1nyu4yd6y1pof.js","assets/d0cc4358-kb342mgd8r6x1sx9.js","assets/c461eddf-cpz0chy39ou5whuu.js","assets/0c334ca9-e4sgtqictina0bmo.js","assets/ced50a6d-o1vtb1c6pxbfxjzj.js","assets/840aa878-osvn8b3qtkqxml3e.js","assets/ce023d4a-cg5o712e6weyeejn.js","assets/76584279-oradf7i53d62c5v5.js","assets/1e4de2e8-mg9kk8lnlf28zeta.js","assets/301efb8d-ki1i3i50z4i5ju9g.js","assets/b18bdd4a-kenkf1hfr1kes1pk.js","assets/0218ed8e-doba3rjq6shnyvk6.js","assets/7018830a-jdah8y3irh8hst4z.js","assets/ca8ef9be-b3cf3jgf5o1gpckm.js","assets/cf5af22f-o10ev2x7wsumpww2.js","assets/4f4d4e37-l9cbf37j73lj8j8k.js","assets/12fda126-kmn21tp23ihuo1u9.js","assets/45f779e8-hkoko0085bfkg67s.js","assets/7271f1c9-ck1u9icgxosmytry.js","assets/0c86ddfe-m89x2zftpo6hrypr.js","assets/fdd7f07d-mmy78qw01c35bs2l.js","assets/1a1c4549-lqh97hcrfoxusel2.js","assets/aaa423a4-bb7faoyb3qd6vunb.js","assets/53a75fa3-navto8y6v49gafan.js","assets/e2a9a3b9-n5fvlgllpsn9r3s6.js","assets/e0691314-da9piuy190py7h2a.js","assets/239f44f1-mbmcx8v24u1ao1ke.js","assets/daf50f1d-wxq2hzaz64olhdw5.js","assets/94037667-n2dgidrncy8swfom.js","assets/01da2313-blx8uxwbonp9kpyf.js","assets/81b714ea-iwltot0dag9omt09.js","assets/52ac3d16-nfpv5v31btj1geos.js","assets/96bf3632-hlgul90nu3jjuqhc.js","assets/b288024a-g4xp6qpr02pwb25w.js","assets/b353a040-f7un0lfbptploan3.js","assets/99ffa85e-j884uby6ernx6rpn.js","assets/6ec0f492-bcl4pnq9myi5hvdv.js","assets/b464a63d-d6k5bcr3u2gjf6kj.js","assets/2c0ba89a-km94u7flwx6jxpjr.js","assets/e802fc66-m10udrnsvssho043.js","assets/47b5158d-ld8hkjsaxjkjern7.js","assets/ed836a35-b0tuygth4wutqabp.js","assets/38b1cb71-fnjhlozqiksn04j6.js","assets/6abf13ee-ja2tmawbp8paxf0h.js","assets/e1a66d2b-eszlj4yofr63zxcw.js","assets/073fd849-n45b5ng1gm7nxdzs.js","assets/a4ef304b-g0jy6683jseolxbd.js","assets/8d846022-ns51nblw8ziscsgd.js","assets/bc86e6a9-oavwkyi0m7ypdyrb.js","assets/4143cd04-kvb8il8rb9szgtb0.js","assets/b4b33d24-nefd7y56j824ur7j.js","assets/1bc04b52-xbhvlbel619u18s3.js","assets/4611929e-84vn1d98fl2xxvqe.js","assets/7517017f-g04sp6kl69f6qsi7.js","assets/1bc04b52-deakbbf27g8e7ba0.js","assets/ea4fa2d6-mj4u0sshk76ki3ac.js","assets/ecfbef4f-lxrfcqndvuvpdvzd.js","assets/8d846022-b2l059fz4znz94nm.js","assets/54e99289-bj1ejin6tzi0v3v8.js","assets/f0342648-jc0i0xbjrlp26v97.js","assets/68f2ca65-kzvefejeqjiqxl6y.js","assets/e4c59151-g4abc9qdbbdn44t9.js","assets/6cb574fa-ntzj2njngwyqj8iz.js","assets/1bc04b52-r2xqg1xowhrldwno.js","assets/1bc04b52-fstok3c507pom2j9.js","assets/languages-ivzj8m6u.css","assets/7c519b5c-mhck94u75vn9g11o.js","assets/code-block-editor-e9v9pecb.css","assets/87fb1aaf-kq5fkx08cp1zafgx.js","assets/93bc5d02-m54wlc89jwdyem2i.js","assets/d2e07916-dqxwmj0hvcfxkh0c.js","assets/2269c0be-m25d206jtz4d1v6p.js","assets/1bc04b52-ia54sddtrl9qa2wj.js","assets/a9fa9fda-jv0idfvobhx17h7f.js","assets/ADAVisualizationComponent-qpbxeibv.css","assets/7d5f5c33-j98k6601dwm02jlz.js","assets/15dffd5b-cjdf3agzl91geeph.js","assets/3ee1845c-ijj1xd1yew1ijlb2.js","assets/b7bb170e-mfdwg6jdtgip2o8h.js","assets/4e0528a1-4psb6xi3eqqqz3pq.js","assets/3b8e38e2-iesui4xjntww6gt9.js","assets/5b446015-ogragt3i75wdsp91.js","assets/86bfab85-i4mzkb7xi5m2mimd.js","assets/0d45f5fd-og8hygv74toct9wh.js","assets/0d45f5fd-lad8yx56mqsdspc9.js","assets/9b3e84e7-nxbbdu6xkosse21o.js","assets/d396ee8a-2hjk9ntict5w2yu8.js","assets/3fb363ee-k3g51vgb0r1snqg0.js","assets/28922843-oxb61d6400uuxlhk.js","assets/dde865c8-d0h8yqv6b3wp7ta4.js","assets/78dab443-h3brpx89k9g1vm7p.js","assets/e19d9367-hjerg984x6xr8atp.js","assets/4aabbe5f-g82hkab64h2oy6ri.js","assets/ae95bd74-o4n6we8hc7o9bvjn.js","assets/f7ad4b2f-chlkletok286hoqp.js","assets/81d33ce0-b36isibbd5va6a3w.js","assets/photo-booth-modal-l7lnvqpv.css","assets/cea1b4e7-or79j7jqobc1gmj2.js","assets/ea02080b-jtu2i5m0wcsdp4e6.js","assets/6b630373-2jzwiexvfug90jgv.js","assets/ad867923-hs74rs87uvjlgla7.js","assets/de0b88d8-ifzlxv1rkjbb15oj.js","assets/4fcb39c2-g0u87memcdtuvoyf.js","assets/76d981c7-ftef8970ba1zoykr.js","assets/00281a1b-iiok29s29bpdre61.js","assets/6ee9bd33-fiv0sobiw51j22vu.js","assets/eee4e59e-kc9702236zj2xpwe.js","assets/e07b5c46-hqf1nqa2bjrtyobe.js","assets/e8b4fa29-gv2xlg9lvsalgw3h.js","assets/dd441551-cyn7pt15x8l1divk.js","assets/67a11bc6-gqprpcs3bic1saxk.js","assets/8aa57a25-o4kwagnru8f3nwsq.js","assets/4dbd7b28-f0tdh3gv2dct9kpi.js","assets/7ae37b3b-fkf1t59mw0nfvuag.js","assets/6ab8117c-omwgalkrw4pb79xu.js","assets/1f1b50d3-es7wb8g1s10a9dx0.js","assets/f90e2400-fr4zdxt4fr9yeysi.js","assets/ba21b03a-jtweffof6rs3f582.js","assets/dbe988d8-cyo6aknnrnhaswxy.js","assets/ffa880af-cge8ei4b2o19wp22.js","assets/f6a9ca70-lw5s0huv4u3sohpp.js","assets/885bfdd1-h026pk65i0sud4j4.js","assets/36be5545-lhascghgn00tmz0g.js","assets/0b2014cd-joa8jajuiu4xqpzn.js","assets/3df9b3d9-nm0twn9ejs0h860k.js","assets/d423cc1e-f3q76x261sdzwo65.js","assets/5ba997e8-lk3tu28ka19slbvg.js","assets/c93e007a-g4y2ef294cj9d78i.js","assets/df59e297-kqhzp6exr7vq0hbe.js","assets/23795c9c-qv3q2hcwq82ey6tt.js","assets/f30cfe7d-dp5p0uy7h5rc0y5d.js","assets/e99f8e1a-mcz653ztl43i5e53.js","assets/codemirror-kfd8ygeu.css","assets/ed61b531-l4y832sfzm5kc2z2.js","assets/e74608d1-pcz5zlh7p10pxswl.js","assets/prosemirror-kdtc7ib2.css","assets/d3304073-bgzyku0swhii2zrz.js","assets/c8f38d6c-8zibg2wvcxw3wbv6.js","assets/4d271a7b-gvm79g566aint0kx.js","assets/7517017f-nbqc13l5s6dxfmri.js","assets/1bc04b52-c7llrfg6y5dqdtd7.js","assets/15dc2b23-jovceto8vc0s9c6b.js","assets/83c51868-dkyaj3i48j89gbni.js","assets/6d7c107d-iv1a8lz1flam91lo.js","assets/10eb558d-uby80mvcklfyq7ep.js","assets/b5857047-exe9fqi6peyx0193.js","assets/b129bf1f-czw8iirjo9o0ghfg.js","assets/8ce7b8d5-jq4c954fjl3dhtxg.js","assets/5fa5a869-eai3fnu5c3iwlvsm.js","assets/19cb8032-n1bgwayralwuzw2m.js","assets/41a2fdf3-jty5sqiiyd59d7kw.js","assets/a55ac3e4-mo9yl0d8rt6gwwxp.js","assets/e0921b7a-d80kbpu52j6pqerp.js","assets/85f3cacd-h8n70jj6ceahxo3e.js","assets/40838a6b-k3rycw0e5rgubjvf.js","assets/5eec0dc4-k9otd6tvpibl4qch.js","assets/9521ff6d-beia655jsefi8tdc.js","assets/5f9d2d74-ftzm6e3nh9sdf2ku.js","assets/e688bf87-b0qax31no9kpe2yv.js","assets/87d262ab-jc3tkhcjaw5pguhm.js","assets/d95bd425-cbpyjzbt77clfevu.js","assets/91a29933-ivmsbe2hd92fekit.js","assets/da745ebf-h5wh5a3iuz002lou.js","assets/431227fe-cmv63jfspg5m358b.js","assets/cc968336-ggai6r2gyci3j5cf.js","assets/52ac6121-lg8at3pcrsqxkeds.js","assets/c50e4b89-g9e16gmq72jzyzn2.js","assets/14fb043a-h0i780dqvvd9sut2.js","assets/a89794b1-io4wxbf6kglxvs6c.js","assets/0c7275db-eiea8u1jjypyccm0.js","assets/1de975ca-opfq6f6nav5b4m2m.js","assets/24da65be-ezfot4qnl5qaq7a6.js","assets/f41e2eb7-hoxsbwyb0ss5q44s.js","assets/ccdb9715-h3di4z0r3okjxkb1.js","assets/efed80bb-hszjedee1s8f9pjl.js","assets/1ff16152-ha0qjhfdhvgtw1u1.js","assets/19334654-o3xynotch0276a59.js","assets/540191af-nbz4ndwz6rznqnfw.js","assets/ImageLightbox-hvr0hynv.css","assets/1baca111-jhn06hcx8b9u14tw.js","assets/0edf3897-hr7yxyvq54jqn6lw.js","assets/a8077c3c-n3vik6lcxatdsuys.js","assets/5a741dc9-i3az58p6jwzljp2s.js","assets/46f42e08-dvy2cfyypprs4l2w.js"])))=>i.map(i=>d[i]);
var hM=Object.freeze,_M=Object.defineProperty,nK=Object.defineProperties;var sK=Object.getOwnPropertyDescriptors;var Vg=Object.getOwnPropertySymbols;var xM=Object.prototype.hasOwnProperty,yM=Object.prototype.propertyIsEnumerable;var au=(t,e)=>(e=Symbol[t])?e:Symbol.for("Symbol."+t),Jx=t=>{throw TypeError(t)};var Qx=(t,e,n)=>e in t?_M(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,N=(t,e)=>{for(var n in e||(e={}))xM.call(e,n)&&Qx(t,n,e[n]);if(Vg)for(var n of Vg(e))yM.call(e,n)&&Qx(t,n,e[n]);return t},G=(t,e)=>nK(t,sK(e));var bM=t=>typeof t=="symbol"?t:t+"",De=(t,e)=>{var n={};for(var s in t)xM.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(t!=null&&Vg)for(var s of Vg(t))e.indexOf(s)<0&&yM.call(t,s)&&(n[s]=t[s]);return n};var ye=(t,e,n)=>Qx(t,typeof e!="symbol"?e+"":e,n),Xx=(t,e,n)=>e.has(t)||Jx("Cannot "+n);var Xn=(t,e,n)=>(Xx(t,e,"read from private field"),n?n.call(t):e.get(t)),zr=(t,e,n)=>e.has(t)?Jx("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),Si=(t,e,n,s)=>(Xx(t,e,"write to private field"),s?s.call(t,n):e.set(t,n),n),Ci=(t,e,n)=>(Xx(t,e,"access private method"),n);var _t=(t,e)=>hM(_M(t,"raw",{value:hM(e||t.slice())}));var dn=function(t,e){this[0]=t,this[1]=e},po=(t,e,n)=>{var s=(a,l,c,u)=>{try{var d=n[a](l),f=(l=d.value)instanceof dn,m=d.done;Promise.resolve(f?l[0]:l).then(p=>f?s(a==="return"?a:"next",l[1]?{done:p.done,value:p.value}:p,c,u):c({value:p,done:m})).catch(p=>s("throw",p,c,u))}catch(p){u(p)}},o=a=>r[a]=l=>new Promise((c,u)=>s(a,l,c,u)),r={};return n=n.apply(t,e),r[au("asyncIterator")]=()=>r,o("next"),o("throw"),o("return"),r},Mf=t=>{var e=t[au("asyncIterator")],n=!1,s,o={};return e==null?(e=t[au("iterator")](),s=r=>o[r]=a=>e[r](a)):(e=e.call(t),s=r=>o[r]=a=>{if(n){if(n=!1,r==="throw")throw a;return a}return n=!0,{done:!1,value:new dn(new Promise(l=>{var c=e[r](a);c instanceof Object||Jx("Object expected"),l(c)}),1)}}),o[au("iterator")]=()=>o,s("next"),"throw"in e?s("throw"):o.throw=r=>{throw r},"return"in e&&s("return"),o},Ao=(t,e,n)=>(e=t[au("asyncIterator")])?e.call(t):(t=t[au("iterator")](),e={},n=(s,o)=>(o=t[s])&&(e[s]=r=>new Promise((a,l,c)=>(r=o.call(t,r),c=r.done,Promise.resolve(r.value).then(u=>a({value:u,done:c}),l)))),n("next"),n("return"),e);import{r as v,c as D,u as zt,g as oK,j as i,d as we,a as Nt,b as te,e as ut,f as ps,h as bt,i as qe,M as P,k as Xa,q as En,l as L0,m as jn,_ as Me,H as Od,n as wo,s as xC,L as ko,v as fa,o as yC,p as rK,t as jc,w as aK,x as iK,y as zg,z as lK,$ as cK,A as uK,F as dK}from"./2340486e-n0khdanno9uzbccp.js";import{c as re,s as me,g as Zn,a as aa,R as ue,u as Ld,b as X,i as DP,d as ln,e as hs,f as st,h as q,F as Tt,T as St,D as ey,j as Dt,k as br,W as ma,l as xe,m as Vn,n as D0,o as BP,A as Ot,p as Du,q as Zr,G as wu,r as FP,t as Tn,v as Et,w as sp,x as Dd,y as et,z as bC,B as fK,C as op,L as Ie,E as Or,H as Je,I as pa,P as V,M as B0,J as en,K as tt,N as UP,O as rp,Q as ap,S as vC,U as Qn,V as mK,X as Pc,Y as F0,Z as Gt,_ as pK,$ as HP,a0 as $P,a1 as U0,a2 as GP,a3 as SC,a4 as ld,a5 as H0,a6 as Am,a7 as gK,a8 as bn,a9 as hK,aa as CC,ab as wC,ac as _K,ad as li,ae as Rc,af as VP,ag as Xs,ah as eo,ai as xK,aj as zP,ak as fl,al as Ve,am as Se,an as ft,ao as As,ap as Nm,aq as ml,ar as is,as as yK,at as Qi,au as Bd,av as WP,aw as hr,ax as zi,ay as Wi,az as cd,aA as qP,aB as Ko,aC as _s,aD as Wn,aE as ty,aF as bK,aG as vK,aH as SK,aI as Fd,aJ as Ud,aK as Ts,aL as Hd,aM as bo,aN as Ft,aO as yt,aP as kC,aQ as Qs,aR as Yo,aS as Fe,aT as Ue,aU as qn,aV as Kn,aW as wt,aX as ud,aY as Te,aZ as CK,a_ as vr,a$ as wK,b0 as Xb,b1 as kK,b2 as Oc,b3 as KP,b4 as An,b5 as YP,b6 as EC,b7 as EK,b8 as TK,b9 as TC,ba as ZP,bb as $d,bc as $0,bd as QP,be as vn,bf as Is,bg as ev,bh as Ke,bi as Eo,bj as un,bk as JP,bl as ip,bm as MK,bn as ei,bo as MC,bp as je,bq as XP,br as eR,bs as tR,bt as AC,bu as Vo,bv as pm,bw as NC,bx as IC,by as kr,bz as jC,bA as tv,bB as nR,bC as ws,bD as Us,bE as Ys,bF as AK,bG as mn,bH as ks,bI as Im,bJ as G0,bK as sR,bL as V0,bM as PC,bN as oR,bO as rR,bP as aR,bQ as iR,bR as lR,bS as z0,bT as cR,bU as uR,bV as NK,bW as dR,bX as h1,bY as IK,bZ as lp,b_ as fR,b$ as mR,c0 as ta,c1 as pR,c2 as jK,c3 as PK,c4 as RK,c5 as OK,c6 as LK,c7 as DK,c8 as BK,c9 as FK,ca as Bu,cb as RC,cc as W0,cd as UK,ce as HK,cf as $K,cg as GK,ch as VK,ci as zK,cj as Rn,ck as OC,cl as WK,cm as qK,cn as KK,co as YK,cp as ZK,cq as QK,cr as JK,cs as XK,ct as ec,cu as Es,cv as jm,cw as nv,cx as eY,cy as gR,cz as hR,cA as tY,cB as rt,cC as nY,cD as sY,cE as _R,cF as $a,cG as xR,cH as oY,cI as tc,cJ as rY,cK as aY,cL as pl,cM as yR,cN as LC,cO as mt,cP as q0,cQ as bR,cR as Gd,cS as yn,cT as fn,cU as ci,cV as Jt,cW as _o,cX as bs,cY as iY,cZ as Wg,c_ as vR,c$ as uo,d0 as lY,d1 as cY,d2 as uY,d3 as dY,d4 as fY,d5 as mY,d6 as pY,d7 as vM,d8 as gY,d9 as Ri,da as tn,db as ls,dc as cp,dd as _n,de as Lc,df as hY,dg as _Y,dh as xY,di as yY,dj as SR,dk as as,dl as Vd,dm as Pt,dn as CR,dp as zd,dq as ve,dr as bY,ds as At,dt as Lt,du as Nn,dv as vY,dw as Zo,dx as DC,dy as Er,dz as wn,dA as pt,dB as wR,dC as SY,dD as CY,dE as kR,dF as up,dG as K0,dH as ER,dI as Ss,dJ as fo,dK as wY,dL as kY,dM as EY,dN as TY,dO as MY,dP as dp,dQ as TR,dR as MR,dS as AY,dT as sv,dU as NY,dV as ia,dW as dt,dX as Fu,dY as Ra,dZ as vt,d_ as IY,d$ as AR,e0 as ds,e1 as jY,e2 as BC,e3 as _1,e4 as PY,e5 as Bs,e6 as fc,e7 as Ka,e8 as Bt,e9 as Bn,ea as RY,eb as dd,ec as OY,ed as LY,ee as NR,ef as Kt,eg as Qo,eh as Sa,ei as Tr,ej as Ze,ek as na,el as FC,em as gm,en as Fo,eo as Y0,ep as Do,eq as IR,er as DY,es as BY,et as FY,eu as UY,ev as ga,ew as x1,ex as UC,ey as HY,ez as $Y,eA as GY,eB as VY,eC as zh,eD as zY,eE as fd,eF as jR,eG as Jo,eH as Wd,eI as PR,eJ as nc,eK as ur,eL as SM,eM as RR,eN as WY,eO as Z0,eP as qY,eQ as HC,eR as KY,eS as $C,eT as GC,eU as YY,eV as OR,eW as Ji,eX as mc,eY as CM,eZ as LR,e_ as fp,e$ as Dc,f0 as ZY,f1 as QY,f2 as JY,f3 as XY,f4 as Va,f5 as Uo,f6 as eZ,f7 as tZ,f8 as wM,f9 as ny,fa as ee,fb as md,fc as kM,fd as Hs,fe as qd,ff as Ca,fg as Lr,fh as VC,fi as nZ,fj as Pm,fk as ov,fl as rv,fm as av,fn as sZ,fo as oZ,fp as xr,fq as rZ,fr as DR,fs as Kd,ft as vo,fu as zC,fv as gs,fw as iv,fx as Mr,fy as BR,fz as mp,fA as Yd,fB as ha,fC as mo,fD as FR,fE as Rm,fF as aZ,fG as iZ,fH as lZ,fI as cZ,fJ as uZ,fK as dZ,fL as kn,fM as EM,fN as sm,fO as y1,fP as Q0,fQ as WC,fR as UR,fS as pp,fT as HR,fU as $s,fV as Xo,fW as fZ,fX as $R,fY as GR,fZ as VR,f_ as J0,f$ as X0,g0 as mZ,g1 as zR,g2 as qC,g3 as WR,g4 as Js,g5 as qR,g6 as KC,g7 as YC,g8 as pZ,g9 as Fn,ga as e_,gb as gZ,gc as KR,gd as ZC,ge as pc,gf as t_,gg as ku,gh as hZ,gi as Ga,gj as YR,gk as _Z,gl as xZ,gm as yZ,gn as ZR,go as Bc,gp as Un,gq as QR,gr as Yn,gs as bZ,gt as Xi,gu as vZ,gv as ui,gw as SZ,gx as QC,gy as hm,gz as CZ,gA as gc,gB as Fc,gC as n_,gD as wZ,gE as Ms,gF as kZ,gG as om,gH as EZ,gI as TZ,gJ as JR,gK as gp,gL as JC,gM as XR,gN as MZ,gO as AZ,gP as NZ,gQ as IZ,gR as jZ,gS as s_,gT as zo,gU as PZ,gV as RZ,gW as OZ,gX as LZ,gY as o_,gZ as r_,g_ as e9,g$ as DZ,h0 as dr,h1 as a_,h2 as gi,h3 as XC,h4 as qg,h5 as Ma,h6 as e3,h7 as BZ,h8 as pd,h9 as t3,ha as el,hb as FZ,hc as UZ,hd as Zd,he as TM,hf as Uc,hg as t9,hh as n3,hi as n9,hj as HZ,hk as gl,hl as $Z,hm as GZ,hn as hp,ho as Qd,hp as i_,hq as Kg,hr as VZ,hs as zZ,ht as WZ,hu as s3,hv as o3,hw as lv,hx as qZ,hy as KZ,hz as r3,hA as YZ,hB as Jd,hC as s9,hD as o9,hE as ZZ,hF as _p,hG as QZ,hH as xp,hI as gd,hJ as JZ,hK as XZ,hL as eQ,hM as Om,hN as r9,hO as l_,hP as Ho,hQ as Fs,hR as ao,hS as tQ,hT as ms,hU as nQ,hV as sQ,hW as In,hX as yp,hY as er,hZ as Gs,h_ as Hn,h$ as Xd,i0 as a9,i1 as oQ,i2 as i9,i3 as cv,i4 as Ar,i5 as ef,i6 as Vt,i7 as bp,i8 as Yg,i9 as rQ,ia as vp,ib as tf,ic as l9,id as c9,ie as u9,ig as hc,ih as a3,ii as aQ,ij as iQ,ik as b1,il as _c,im as Rs,io as MM,ip as lQ,iq as cQ,ir as uQ,is as dQ,it as fQ,iu as d9,iv as mQ,iw as pQ,ix as f9,iy as gQ,iz as hQ,iA as i3,iB as _Q,iC as xQ,iD as m9,iE as yQ,iF as bQ,iG as vQ,iH as SQ,iI as l3,iJ as Sp,iK as AM,iL as NM,iM as CQ,iN as v1,iO as Cp,iP as p9,iQ as wQ,iR as g9,iS as h9,iT as _9,iU as x9,iV as y9,iW as b9,iX as v9,iY as S9,iZ as Wh,i_ as kQ,i$ as sc,j0 as C9,j1 as uv,j2 as oc,j3 as dv,j4 as c_,j5 as wp,j6 as S1,j7 as c3,j8 as w9,j9 as k9,ja as sy,jb as _a,jc as u3,jd as EQ,je as TQ,jf as MQ,jg as di,jh as Sr,ji as ti,jj as io,jk as Lm,jl as AQ,jm as NQ,jn as kp,jo as IQ,jp as jQ,jq as PQ,jr as RQ,js as OQ,jt as Yl,ju as mr,jv as LQ,jw as d3,jx as f3,jy as DQ,jz as BQ,jA as rc,jB as E9,jC as FQ,jD as UQ,jE as T9,jF as Ep,jG as HQ,jH as Dr,jI as $Q,jJ as Vs,jK as m3,jL as Tp,jM as M9,jN as GQ,jO as tl,jP as VQ,jQ as zQ,jR as A9,jS as N9,jT as qi,jU as Ba,jV as WQ,jW as IM,jX as p3,jY as qQ,jZ as KQ,j_ as YQ,j$ as g3,k0 as I9,k1 as j9,k2 as P9,k3 as R9,k4 as O9,k5 as ZQ,k6 as hd,k7 as L9,k8 as Mp,k9 as D9,ka as QQ,kb as JQ,kc as B9,kd as C1,ke as XQ,kf as eJ,kg as tJ,kh as nJ,ki as sJ,kj as oJ,kk as oy,kl as rJ,km as aJ,kn as rm,ko as F9,kp as iJ,kq as h3,kr as _3,ks as Ut,kt as fv,ku as U9,kv as lJ,kw as x3,kx as cJ,ky as y3,kz as H9,kA as hi,kB as uJ,kC as dJ,kD as ot,kE as fJ,kF as $9,kG as w1,kH as Br,kI as Fr,kJ as G9,kK as mJ,kL as b3,kM as pJ,kN as gJ,kO as hJ,kP as _J,kQ as xJ,kR as V9,kS as z9,kT as mv,kU as yJ,kV as bJ,kW as vJ,kX as W9,kY as u_,kZ as qh,k_ as Zg,k$ as Pl,l0 as Ya,l1 as Hc,l2 as Nr,l3 as SJ,l4 as CJ,l5 as pv,l6 as wJ,l7 as xc,l8 as kJ,l9 as EJ,la as TJ,lb as MJ,lc as q9,ld as AJ,le as NJ,lf as jM,lg as IJ,lh as v3,li as S3,lj as jJ,lk as C3,ll as d_,lm as PM,ln as RM,lo as K9,lp as PJ,lq as RJ,lr as Y9,ls as ry,lt as ay,lu as OJ,lv as Z9,lw as Bo,lx as LJ,ly as DJ,lz as BJ,lA as FJ,lB as Q9,lC as qt,lD as sa,lE as _d,lF as UJ,lG as HJ,lH as $J,lI as GJ,lJ as k1,lK as J9,lL as X9,lM as e7,lN as t7,lO as VJ,lP as nf,lQ as n7,lR as zJ,lS as WJ,lT as f_,lU as qJ,lV as KJ,lW as gv,lX as YJ,lY as So,lZ as ZJ,l_ as QJ,l$ as JJ,m0 as XJ,m1 as s7,m2 as w3,m3 as E1,m4 as T1,m5 as o7,m6 as eX,m7 as tX,m8 as Ap,m9 as Np,ma as m_,mb as r7,mc as nX,md as sX,me as Oi,mf as oX,mg as Sn,mh as OM,mi as rX,mj as aX,mk as a7,ml as p_,mm as iX,mn as Ip,mo as LM,mp as i7,mq as an,mr as lX,ms as cX,mt as k3,mu as E3,mv as l7,mw as M1,mx as c7,my as uX,mz as T3,mA as dX,mB as fX,mC as DM,mD as M3,mE as mX,mF as pX,mG as gX,mH as hX,mI as g_,mJ as h_,mK as u7,mL as A3,mM as _X,mN as jp,mO as __,mP as xX,mQ as yX,mR as bX,mS as vX,mT as SX,mU as CX,mV as wX,mW as kX,mX as EX,mY as TX,mZ as d7,m_ as nl,m$ as Li,n0 as BM,n1 as x_,n2 as MX,n3 as AX,n4 as $c,n5 as f7,n6 as Pp,n7 as am,n8 as hv,n9 as m7,na as NX,nb as IX,nc as jX,nd as A1,ne as PX,nf as Ki,ng as Qr,nh as Qg,ni as RX,nj as p7,nk as Rp,nl as Op,nm as OX,nn as LX,no as DX,np as g7,nq as BX,nr as FX,ns as UX,nt as N1,nu as HX,nv as FM,nw as $X,nx as Dm,ny as za,nz as GX,nA as h7,nB as N3,nC as _7,nD as VX,nE as zX,nF as x7,nG as y7,nH as b7,nI as WX,nJ as qX,nK as UM,nL as KX,nM as YX,nN as ZX,nO as QX,nP as JX,nQ as Lp,nR as I3,nS as XX,nT as v7,nU as S7,nV as eee,nW as tee,nX as nee,nY as C7,nZ as w7,n_ as see,n$ as j3,o0 as Bm,o1 as oee,o2 as P3,o3 as k7,o4 as HM,o5 as ree,o6 as aee,o7 as E7,o8 as R3,o9 as iee,oa as lee,ob as cee,oc as uee,od as dee,oe as T7,of as M7,og as fee,oh as mee,oi as pee,oj as A7,ok as N7,ol as O3,om as $M,on as gee,oo as hee,op as GM,oq as _ee,or as xee,os as yee,ot as bee,ou as vee,ov as I7,ow as j7,ox as L3,oy as See,oz as Cee,oA as D3,oB as wee,oC as Jg,oD as kee,oE as Eee,oF as Zs,oG as Tee,oH as Mee,oI as Aee,oJ as Nee,oK as Iee,oL as jee,oM as Pee,oN as Ree,oO as Oee,oP as Rl,oQ as iy,oR as Lee,oS as P7,oT as Dee,oU as Bee,oV as Fee,oW as Uee,oX as Xg,oY as Hee,oZ as B3,o_ as or,o$ as $ee,p0 as R7,p1 as Gee,p2 as eh,p3 as F3,p4 as U3,p5 as O7,p6 as L7,p7 as th,p8 as nh,p9 as Vee,pa as zee,pb as Wee,pc as qee,pd as Kee,pe as Yee,pf as Zee,pg as Qee,ph as Jee,pi as I1,pj as VM,pk as Xee,pl as ete,pm as tte,pn as nte,po as ste,pp as ote,pq as y_,pr as rte,ps as Xt,pt as D7,pu as ate,pv as ite,pw as lte,px as cte,py as ute,pz as dte,pA as Uu,pB as B7,pC as fte,pD as mte,pE as _v,pF as F7,pG as pte,pH as U7,pI as xv,pJ as H7,pK as gte,pL as $7,pM as hte,pN as zM,pO as j1,pP as P1,pQ as yc,pR as xa,pS as bc,pT as G7,pU as _te,pV as hl,pW as _l,pX as xte,pY as yte,pZ as sh,p_ as bte,p$ as vte,q0 as Ste,q1 as Cte,q2 as H3,q3 as wte,q4 as kte,q5 as Af,q6 as WM,q7 as Ete,q8 as Tte,q9 as Mte,qa as ly,qb as Ate,qc as qM,qd as KM,qe as Nte,qf as V7,qg as Ite,qh as jte,qi as z7,qj as vs,qk as Pte,ql as Rte,qm as Ote,qn as Lte,qo as Dp,qp as yv,qq as bv,qr as Gc,qs as Dte,qt as Bte,qu as Fte,qv as W7,qw as Ute,qx as q7,qy as Hte,qz as $te,qA as Gte,qB as cy,qC as K7,qD as Y7,qE as Z7,qF as Q7,qG as Vte,qH as Jr,qI as zte,qJ as Wte,qK as qte,qL as Kte,qM as J7,qN as Yte,qO as Zte,qP as X7,qQ as $3,qR as Qte,qS as Jte,qT as Xte,qU as ene,qV as tne,qW as nne,qX as sne,qY as e8,qZ as vv,q_ as one,q$ as rne,r0 as t8,r1 as ane,r2 as ine,r3 as lne,r4 as cne,r5 as une,r6 as dne,r7 as fne,r8 as YM,r9 as Ol,ra as iu,rb as mne,rc as pne}from"./4813494d-di0bpg5zidu9s57f.js";const Bp=re(me,"3a5c87",20,20);function gne(){const t=v.useRef([]),e=v.useRef((n,s)=>{const o=setTimeout(n,s);return t.current.push(o),o});return v.useEffect(()=>{const n=t.current;return()=>{n.forEach(s=>{clearTimeout(s)})}},[]),e.current}var We=(t=>(t.Onboarding="oai/apps/hasSeenOnboarding",t.hasSeenExistingUserPersonalityOnboarding="oai/apps/hasSeenExistingUserPersonalityOnboarding",t.TeamOwnerOnboarding="oai/apps/hasSeenTeamOwnerOnboarding",t.MemoryOnboarding="oai/apps/hasSeenMemoryOnboarding",t.hasSeenDoNotRememberToggleCoachmark="oai/apps/hasSeenDoNotRememberToggleCoachmark",t.TemporaryChatOnboarding="oai/apps/hasSeenTemporaryChatOnboarding",t.ArchiveConversationOnboarding="oai/apps/hasSeenArchiveConversationOnboarding",t.NewOnboardingConvo="oai/apps/hasSeenNewUserOnboardingConvo",t.DalleEditingOnboarding="oai/apps/hasSeenDalleEditingOnboarding",t.ModelSwitcherAutoDowngrade="oai/apps/hasSeenModelSwitcherAutoDowngrade",t.hasDismissedCanvasOnboarding="oai/apps/hasDismissedCanvasOnboarding",t.HasSeenAdvancedVoiceOnMobile="oai/apps/hasSeenAdvancedVoiceOnMobile/2024-09-26",t.SidekickLauncherOnboarding="oai/apps/hasSeenSidekickLauncherOnboarding",t.UseSidekick="oai/apps/hasDismissedUseSidekick",t.UseSidetron="oai/apps/hasDismissedUseSidetron",t.hasSeenSncUsageNux="oai/apps/hasSeenSncUsageNux",t.hasSeenSncWelcomeNux="oai/apps/hasSeenSncWelcomeNux",t.hasSeenSncSourcesTooltip="oai/apps/hasSeenSncSourcesTooltip",t.hasSeenComposerSearchButtonTooltip="oai/apps/hasSeenComposerSearchButtonTooltip",t.hasSeenComposerContextualAnswerTooltip="oai/apps/hasSeenComposerContextualAnswerTooltip",t.hasSeenConnectorsNuxModal="oai/apps/hasSeenConnectorsNuxModal",t.hasSeenGoogleConnectorsNuxModal="oai/apps/hasSeenGoogleConnectorsNuxModal",t.hasSeenHubspotAppMigrationNuxModal="oai/apps/hasSeenHubspotAppMigrationNuxModal",t.hasSeenContextualAnswerGoogleSyncFinished="oai/apps/hasSeenContextualAnswerGoogleSyncFinished",t.hasSeenConnectorsSourcesPillTooltip="oai/apps/hasSeenConnectorsSourcesPillTooltip",t.hasSeenConnectorsUpgradeFileAccessModal="oai/apps/hasSeenConnectorsUpgradeFileAccessModal",t.hasSeenConnectorsReconnectModal="oai/apps/hasSeenConnectorsReconnectModal",t.hasSeenGptAppsCapabilityTooltip="oai/apps/hasSeenGptAppsCapabilityTooltip",t.hasSeenComposerSystemHintButtonTooltip="oai/apps/hasSeenComposerSystemHintButtonTooltip",t.hasSeenPioneer="oai/apps/hasSeenPioneer",t.hasSeenMaverick="oai/apps/hasSeenMaverick",t.hasSeenMaverickCapi="oai/apps/hasSeenMaverickCapi",t.hasSeenTrailBlazer="oai/apps/hasSeenTrailBlazer",t.hasSeenStratos="oai/apps/hasSeenStratos",t.hasSeenSeeker="oai/apps/hasSeenSeeker",t.hasSeenWayfinder="oai/apps/hasSeenWayfinder",t.hasSeenAdvancedVoiceNuxFullPage="oai/apps/hasSeenAdvancedVoice/2024-09-24",t.hasSeenWindowsAppOnboarding="oai/apps/hasSeenWindowsAppOnboarding",t.DesktopBrowserExtensionAnnouncement="oai/apps/hasSeenDesktopBrowserExtensionAnnouncement",t.DesktopBrowserExtensionReactiveAnnouncement="oai/apps/hasSeenDesktopBrowserExtensionReactiveAnnouncement",t.DesktopOperatorAnnouncement="oai/apps/hasSeenDesktopOperatorAnnouncement",t.DesktopClassmatesPromotionAnnouncement="oai/apps/hasSeenDesktopClassmatesPromotionAnnouncement",t.NewOnboardingFlow="oai/apps/hasSeenOnboardingFlow",t.NewStaticOnboardingFlow="oai/apps/hasSeenStaticOnboarding",t.NewPromptOnboardingFlow="oai/apps/hasSeenPromptOnboarding",t.CreateExampleChatsOnboarding="oai/apps/hasCreatedExampleChats",t.hasUsedConversationalOnboardingStarterPrompt="oai/apps/hasUsedNewUserStarterPrompt",t.hasSeenProjectsWebNuxTooltip="oai/apps/hasSeenProjectsWebNuxTooltip",t.hasSeenPotionOnboarding="oai/apps/hasSeenPotionOnboarding",t.hasDismissedPotionOnboardingCards="oai/apps/hasDismissedP072515OnboardingCards",t.hasSeenProjectsUpdateNuxTooltip="oai/apps/hasSeenProjectsUpdateNuxTooltip",t.hasSeenProjectsToFree="oai/apps/hasSeenProjectsToFree",t.hasSeenMemoryInSearch="oai/apps/hasSeenMemoryInSearch",t.hasSeenMoonshineNux="oai/apps/hasSeenMoonshineNux",t.hasSeenMoonshineNuxV2="oai/apps/hasSeenMoonshineNuxV2",t.hasSeenGoldenHourNux="oai/apps/hasSeenGoldenHourNux",t.hasSeenGoldenHourNuxV2="oai/apps/hasSeenGoldenHourNuxV2",t.hasSeenGoldenHourAnnouncement="oai/apps/hasSeenGoldenHourAnnouncement",t.hasSeenInlineFeedbackCustomInstrMessage="oai/apps/hasSeenInlineFeedbackCustomInstrMessage",t.hasDismissedPromoRedemption="oai/apps/hasDismissedPromoRedemption",t.hasSeenFilePickerNuxTooltip="oai/apps/hasSeenFilePicker",t.hasSeenMultipleGPTEditorsTooltip="oai/apps/hasSeenMultipleGPTEditorsTooltip",t.hasSeenSharedProjectsTooltip="oai/apps/hasSeenSharedProjectsTooltip",t.hasSeenGroupChatOnboardingTooltip="oai/apps/hasSeenGroupChatOnboardingTooltip",t.hasSeenPhoenixNux="oai/apps/hasSeenPhoenixNux",t.hasSeenPhoenixFreeNux="oai/apps/hasSeenPhoenixFreeNux",t.hasDismissedReferrerRedemption="oai/apps/hasDismissedReferrerRedemption",t.hasDismissedRefereeRedemption="oai/apps/hasDismissedRefereeRedemption",t.hasSeenReferralUpsellAnnouncement="oai/apps/hasSeenReferralProgramUpsell",t.hasSeenTatertotIntakeForm="oai/apps/hasSeenTatertotIntakeForm",t.hasSeenComposerBigBoxEnterHint="oai/apps/hasSeenComposerBigBoxEnterHint",t.d2dee219="oai/apps/d2dee219",t.hasSeenStudentsUpsellAnnouncement="oai/apps/hasSeenStudentsUpsellAnnouncement",t.hasSeenMemoryUpdatedTooltip="oai/apps/hasSeenMemoryUpdatedTooltip",t.hasSeenTeamSeatsPromoAnnouncement="oai/apps/hasSeenTeamSeatsPromoAnnouncement",t.hasSeenTeamsContextualAnswersUpsell="oai/apps/hasSeenTeamsContextualAnswersUpsell",t.hasSeenO3O4MiniAutomations="oai/apps/hasSeenO3O4MiniAutomations",t.hasSeenArtifactsLearnMoreModal="oai/apps/hasSeenArtifactsLearnMoreModal",t.hasSeenPulseTasksNux="oai/apps/hasSeenPulseTasksNux",t.hasSeenn7jupdNux="oai/apps/hasSeenn7jupdNux",t.hasSeenTatertotNux="oai/apps/hasSeenTatertotNux",t.hasSeenAudioParagenPrompt="oai/apps/hasSeenAudioParagenPrompt",t.hasSeenOdysseyConnectorsModal="oai/apps/hasSeenOdysseyConnectorsModal",t.hasSeenOdysseyTakeoverModal="oai/apps/hasSeenOdysseyTakeoverModal",t.hasSeenWorkspaceDiscoveryFirstLogin="oai/apps/hasSeenWorkspaceDiscoveryFirstLogin",t.hasSeenFreeTrialUpsellModal="oai/apps/hasSeenPlusOrBusinessFreeTrial",t.hasSeenGoFreeTrialUpsellModal="oai/apps/hasSeenGoTwelveMonthFreeTrial",t.hasSeenPlusFreeTrialHomepageAnnouncementBanner="oai/apps/hasSeenPlusFreeTrialHomepageAnnouncementBanner",t.hasSeenWorkSpacePolicy="oai/apps/hasSeenWorkSpacePolicy",t.hasSeenJoinWorkspaceBanner="oai/apps/hasSeenJoinWorkspaceBanner",t.hasSeenl1239dk1AlphaBanner="oai/apps/hasSeenl1239dk1AlphaBanner",t.hasSeenl1239dk1Onboarding="oai/apps/hasSeenl1239dk1Onboarding",t.hasSeenl1239dk1Bon="oai/apps/hasSeenl1239dk1Bon",t.hasSeenl1239dk1CreateFirstEnvModal="oai/apps/hasSeenl1239dk1CreateFirstEnvModal",t.hasSeenl1239dk1NewFeatures="oai/apps/hasSeenl1239dk1NewFeatures",t.hasSeenl1239dk1NewFeaturesSlack="oai/apps/hasSeenl1239dk1NewFeaturesSlack",t.hasSeenl1239dk1CodeReviewTab="oai/apps/hasSeenl1239dk1CodeReviewTab",t.hasCompletedWhamCodeReviewOnboardingFlow="oai/apps/hasCompletedWhamCodeReviewOnboardingFlow",t.hasSeenWhamCodex51ArticFox="oai/apps/wham_codex_51_articFox",t.hasSeenl1239dk1Codex51ArticFox="oai/apps/hasSeenl1239dk1Codex51ArticFox",t.hasSeenWhamCombinedSubmitButtonNux="oai/apps/hasSeenWhamCombinedSubmitButtonNux",t.hasSeenAardvarkOnboarding="oai/apps/hasSeenAardvarkOnboarding",t.hasSeenFollowupsFirstTurnOnce="oai/apps/hasSeenFollowupsFirstTurnOnce",t.hasSeenWritingInlineEditNux="oai/apps/hasSeenWritingInlineEditNux",t.hasSeenWritingInlineEditCaretNux="oai/apps/hasSeenWritingInlineEditCaretNux",t.hasSeenWritingInlineEditSelectNux="oai/apps/hasSeenWritingInlineEditSelectNux",t.hasSeenl1239dk1LaunchNux="oai/apps/hasSeenl1239dk1LaunchNux",t.hasSeenPurpleRainNux="oai/apps/hasSeenPurpleRainNux",t.hasSeenJobsOnboardingWithUpload="oai/apps/hasSeenJobsOnboardingWithUpload",t.hasSeenMfaEnrollmentNux="oai/apps/hasSeenMfaEnrollmentNux",t.AdsOnboarding="oai/apps/hasSeenBazaarOnboarding",t))(We||{});const hne=st(!1);function _ne({key:t,isAuraNewTabPageOverlay:e,isAuraSideChat:n}){return n?!0:e?t!=="oai/apps/hasSeenPotionOnboarding"&&t!=="oai/apps/hasSeenJobsOnboardingWithUpload":hs()&&!Sne(t)}function Ct(t){"use forget";var _;const e=D.c(18),{data:n,isLoading:s}=Ld();let o;e[0]!==(n==null?void 0:n.eligible_announcements)?(o=(_=n==null?void 0:n.eligible_announcements)!=null?_:[],e[0]=n==null?void 0:n.eligible_announcements,e[1]=o):o=e[1];const r=o,[a,l]=X(yne);let c;e[2]!==a||e[3]!==l||e[4]!==t?(c=_ne({key:t,isAuraNewTabPageOverlay:a,isAuraSideChat:l}),e[2]=a,e[3]=l,e[4]=t,e[5]=c):c=e[5];const u=c,{mutate:d}=bne();let f;e[6]!==t||e[7]!==d?(f=()=>d({key:t}),e[6]=t,e[7]=d,e[8]=f):f=e[8];const m=f,p=X(xne);let g;e[9]!==p||e[10]!==r||e[11]!==u||e[12]!==t?(g=!p&&r.includes(t)&&!u,e[9]=p,e[10]=r,e[11]=u,e[12]=t,e[13]=g):g=e[13];let h;return e[14]!==s||e[15]!==m||e[16]!==g?(h={eligible:g,markAsViewedDontInvalidateCache:m,isLoading:s},e[14]=s,e[15]=m,e[16]=g,e[17]=h):h=e[17],h}function xne(){return hne()}function yne(){return[DP(),ln()]}async function kt(t){var s;const e=Zn(),n=e.getQueryData(aa().queryKey);(s=n==null?void 0:n.persistent_announcements)!=null&&s.includes(t)||(e.setQueryData(aa().queryKey,o=>o&&G(N({},o),{eligible_announcements:o.eligible_announcements.filter(r=>r!==t)})),await ue.safePost("/settings/announcement_viewed",{parameters:{query:{announcement_id:t}}}),e.invalidateQueries(aa()))}function bne(){"use forget";const t=D.c(1);let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e={mutationFn:vne},t[0]=e):e=t[0],zt(e)}function vne(t){const{key:e}=t;return ue.safePost("/settings/announcement_viewed",{parameters:{query:{announcement_id:e}}})}function Sne(t){switch(t){case"oai/apps/hasSeenOnboarding":case"oai/apps/hasSeenTeamOwnerOnboarding":case"oai/apps/hasSeenMemoryOnboarding":case"oai/apps/hasSeenTemporaryChatOnboarding":case"oai/apps/hasSeenArchiveConversationOnboarding":case"oai/apps/hasSeenNewUserOnboardingConvo":case"oai/apps/hasSeenDalleEditingOnboarding":case"oai/apps/hasSeenModelSwitcherAutoDowngrade":case"oai/apps/hasDismissedCanvasOnboarding":case"oai/apps/hasSeenAdvancedVoiceOnMobile/2024-09-26":case"oai/apps/hasSeenAdvancedVoice/2024-09-24":case"oai/apps/hasSeenSidekickLauncherOnboarding":case"oai/apps/hasDismissedUseSidekick":case"oai/apps/hasDismissedUseSidetron":case"oai/apps/hasSeenSncUsageNux":case"oai/apps/hasSeenSncWelcomeNux":case"oai/apps/hasSeenSncSourcesTooltip":case"oai/apps/hasSeenComposerSearchButtonTooltip":case"oai/apps/hasSeenComposerContextualAnswerTooltip":case"oai/apps/hasSeenConnectorsNuxModal":case"oai/apps/hasSeenGoogleConnectorsNuxModal":case"oai/apps/hasSeenHubspotAppMigrationNuxModal":case"oai/apps/hasSeenContextualAnswerGoogleSyncFinished":case"oai/apps/hasSeenConnectorsSourcesPillTooltip":case"oai/apps/hasSeenConnectorsUpgradeFileAccessModal":case"oai/apps/hasSeenComposerSystemHintButtonTooltip":case"oai/apps/hasSeenPioneer":case"oai/apps/hasSeenExistingUserPersonalityOnboarding":case"oai/apps/hasSeenMaverick":case"oai/apps/hasSeenMaverickCapi":case"oai/apps/hasSeenTrailBlazer":case"oai/apps/hasSeenStratos":case"oai/apps/hasSeenSeeker":case"oai/apps/hasSeenWayfinder":case"oai/apps/hasSeenWindowsAppOnboarding":case"oai/apps/hasSeenDesktopBrowserExtensionAnnouncement":case"oai/apps/hasSeenDesktopBrowserExtensionReactiveAnnouncement":case"oai/apps/hasSeenDesktopOperatorAnnouncement":case"oai/apps/hasSeenDesktopClassmatesPromotionAnnouncement":case"oai/apps/hasSeenOnboardingFlow":case"oai/apps/hasSeenStaticOnboarding":case"oai/apps/hasSeenPromptOnboarding":case"oai/apps/hasCreatedExampleChats":case"oai/apps/hasUsedNewUserStarterPrompt":case"oai/apps/hasSeenProjectsWebNuxTooltip":case"oai/apps/hasSeenProjectsUpdateNuxTooltip":case"oai/apps/hasSeenProjectsToFree":case"oai/apps/hasSeenMemoryInSearch":case"oai/apps/hasSeenMemoryUpdatedTooltip":case"oai/apps/hasSeenMoonshineNux":case"oai/apps/hasSeenMoonshineNuxV2":case"oai/apps/hasSeenGoldenHourNux":case"oai/apps/hasSeenGoldenHourNuxV2":case"oai/apps/hasSeenGoldenHourAnnouncement":case"oai/apps/hasSeenInlineFeedbackCustomInstrMessage":case"oai/apps/hasSeenFilePicker":case"oai/apps/hasSeenMultipleGPTEditorsTooltip":case"oai/apps/hasSeenSharedProjectsTooltip":case"oai/apps/hasSeenComposerBigBoxEnterHint":case"oai/apps/hasSeenPhoenixNux":case"oai/apps/hasSeenPhoenixFreeNux":case"oai/apps/hasSeenAudioParagenPrompt":case"oai/apps/hasDismissedPromoRedemption":case"oai/apps/hasDismissedReferrerRedemption":case"oai/apps/hasDismissedRefereeRedemption":case"oai/apps/hasSeenReferralProgramUpsell":case"oai/apps/hasSeenStudentsUpsellAnnouncement":case"oai/apps/hasSeenTeamSeatsPromoAnnouncement":case"oai/apps/hasSeenTeamsContextualAnswersUpsell":case"oai/apps/hasSeenWorkspaceDiscoveryFirstLogin":case"oai/apps/hasSeenWorkSpacePolicy":case"oai/apps/hasSeenJoinWorkspaceBanner":case"oai/apps/hasSeenl1239dk1AlphaBanner":case"oai/apps/hasSeenl1239dk1Onboarding":case"oai/apps/hasSeenl1239dk1Bon":case"oai/apps/hasSeenl1239dk1CreateFirstEnvModal":case"oai/apps/hasSeenl1239dk1NewFeatures":case"oai/apps/hasSeenl1239dk1NewFeaturesSlack":case"oai/apps/hasSeenl1239dk1CodeReviewTab":case"oai/apps/hasCompletedWhamCodeReviewOnboardingFlow":case"oai/apps/wham_codex_51_articFox":case"oai/apps/hasSeenl1239dk1Codex51ArticFox":case"oai/apps/hasSeenWhamCombinedSubmitButtonNux":case"oai/apps/hasSeenAardvarkOnboarding":case"oai/apps/hasSeenTatertotIntakeForm":case"oai/apps/hasSeenO3O4MiniAutomations":case"oai/apps/hasSeenPulseTasksNux":case"oai/apps/hasSeenOdysseyConnectorsModal":case"oai/apps/hasSeenOdysseyTakeoverModal":case"oai/apps/hasSeenPlusOrBusinessFreeTrial":case"oai/apps/hasSeenGoTwelveMonthFreeTrial":case"oai/apps/hasSeenFollowupsFirstTurnOnce":case"oai/apps/hasSeenWritingInlineEditNux":case"oai/apps/hasSeenWritingInlineEditCaretNux":case"oai/apps/hasSeenWritingInlineEditSelectNux":case"oai/apps/hasSeenPlusFreeTrialHomepageAnnouncementBanner":case"oai/apps/d2dee219":case"oai/apps/hasSeenPotionOnboarding":case"oai/apps/hasSeenJobsOnboardingWithUpload":case"oai/apps/hasSeenMfaEnrollmentNux":case"oai/apps/hasSeenl1239dk1LaunchNux":case"oai/apps/hasSeenPurpleRainNux":case"oai/apps/hasSeenConnectorsReconnectModal":case"oai/apps/hasDismissedP072515OnboardingCards":return!0;case"oai/apps/hasSeenTatertotNux":case"oai/apps/hasSeenn7jupdNux":case"oai/apps/hasSeenGroupChatOnboardingTooltip":return!1;default:return!1}}const b_=We.hasSeenl1239dk1LaunchNux,Cne=We.hasSeenl1239dk1Onboarding,wne=We.hasSeenl1239dk1Bon,kne=We.hasSeenl1239dk1CreateFirstEnvModal,Ene=We.hasSeenl1239dk1NewFeatures,Tne=We.hasSeenl1239dk1NewFeaturesSlack,Mne=We.hasSeenl1239dk1AlphaBanner,Ane=We.hasSeenl1239dk1CodeReviewTab,Nne=We.hasCompletedWhamCodeReviewOnboardingFlow,Ine=We.hasSeenl1239dk1Codex51ArticFox;function jne(){return Ct(b_)}function Pne(){return Ct(Cne)}function xet(){return Ct(wne)}function yet(){return Ct(kne)}function bet(){return Ct(Ene)}function vet(){return Ct(Tne)}function Cet(){return Ct(Ane)}function wet(){return Ct(Mne)}function ket(){return Ct(Nne)}function Rne(){return Ct(Ine)}var n8=(t=>(t.Personal="chat",t.Workspace="workspace",t.Team="team",t))(n8||{});const Eet=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+$/;var Tet={};const Hu=2147483647,la=36,G3=1,Fm=26,One=38,Lne=700,s8=72,o8=128,r8="-",Dne=/^xn--/,Bne=/[^\0-\x7F]/,Fne=/[\x2E\u3002\uFF0E\uFF61]/g,Une={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},uy=la-G3,ca=Math.floor,dy=String.fromCharCode;function Ai(t){throw new RangeError(Une[t])}function Hne(t,e){const n=[];let s=t.length;for(;s--;)n[s]=e(t[s]);return n}function a8(t,e){const n=t.split("@");let s="";n.length>1&&(s=n[0]+"@",t=n[1]),t=t.replace(Fne,".");const o=t.split("."),r=Hne(o,e).join(".");return s+r}function V3(t){const e=[];let n=0;const s=t.length;for(;n<s;){const o=t.charCodeAt(n++);if(o>=55296&&o<=56319&&n<s){const r=t.charCodeAt(n++);(r&64512)==56320?e.push(((o&1023)<<10)+(r&1023)+65536):(e.push(o),n--)}else e.push(o)}return e}const i8=t=>String.fromCodePoint(...t),$ne=function(t){return t>=48&&t<58?26+(t-48):t>=65&&t<91?t-65:t>=97&&t<123?t-97:la},ZM=function(t,e){return t+22+75*(t<26)-((e!=0)<<5)},l8=function(t,e,n){let s=0;for(t=n?ca(t/Lne):t>>1,t+=ca(t/e);t>uy*Fm>>1;s+=la)t=ca(t/uy);return ca(s+(uy+1)*t/(t+One))},z3=function(t){const e=[],n=t.length;let s=0,o=o8,r=s8,a=t.lastIndexOf(r8);a<0&&(a=0);for(let l=0;l<a;++l)t.charCodeAt(l)>=128&&Ai("not-basic"),e.push(t.charCodeAt(l));for(let l=a>0?a+1:0;l<n;){const c=s;for(let d=1,f=la;;f+=la){l>=n&&Ai("invalid-input");const m=$ne(t.charCodeAt(l++));m>=la&&Ai("invalid-input"),m>ca((Hu-s)/d)&&Ai("overflow"),s+=m*d;const p=f<=r?G3:f>=r+Fm?Fm:f-r;if(m<p)break;const g=la-p;d>ca(Hu/g)&&Ai("overflow"),d*=g}const u=e.length+1;r=l8(s-c,u,c==0),ca(s/u)>Hu-o&&Ai("overflow"),o+=ca(s/u),s%=u,e.splice(s++,0,o)}return String.fromCodePoint(...e)},W3=function(t){const e=[];t=V3(t);const n=t.length;let s=o8,o=0,r=s8;for(const c of t)c<128&&e.push(dy(c));const a=e.length;let l=a;for(a&&e.push(r8);l<n;){let c=Hu;for(const d of t)d>=s&&d<c&&(c=d);const u=l+1;c-s>ca((Hu-o)/u)&&Ai("overflow"),o+=(c-s)*u,s=c;for(const d of t)if(d<s&&++o>Hu&&Ai("overflow"),d===s){let f=o;for(let m=la;;m+=la){const p=m<=r?G3:m>=r+Fm?Fm:m-r;if(f<p)break;const g=f-p,h=la-p;e.push(dy(ZM(p+g%h,0))),f=ca(g/h)}e.push(dy(ZM(f,0))),r=l8(o,u,l===a),o=0,++l}++o,++s}return e.join("")},c8=function(t){return a8(t,function(e){return Dne.test(e)?z3(e.slice(4).toLowerCase()):e})},u8=function(t){return a8(t,function(e){return Bne.test(e)?"xn--"+W3(e):e})},Gne={version:"2.3.1",ucs2:{decode:V3,encode:i8},decode:z3,encode:W3,toASCII:u8,toUnicode:c8},Vne=Object.freeze(Object.defineProperty({__proto__:null,decode:z3,default:Gne,encode:W3,toASCII:u8,toUnicode:c8,ucs2decode:V3,ucs2encode:i8},Symbol.toStringTag,{value:"Module"})),Met=oK(Vne);function Kh({id:t,label:e,checked:n,onChange:s,disabled:o,className:r,labelClassName:a,readOnly:l,containerClassName:c,labelSide:u="right",style:d,indeterminate:f}){const m=e&&i.jsx("label",{className:q("form-check-label text-token-text-primary",a),htmlFor:t,children:e}),p=v.useRef(null);v.useEffect(()=>{p.current&&(p.current.indeterminate=!!f)},[f]);const g=h=>{s==null||s(h)};return i.jsxs("div",{className:q("form-check flex items-center gap-2",c),children:[u==="left"&&m,i.jsx("input",{className:q("bg-token-bg-primary float-start h-4 w-4 appearance-none rounded-xs border border-gray-300 bg-contain bg-center bg-no-repeat align-top transition duration-200 checked:border-blue-500 checked:bg-blue-500 indeterminate:border-blue-500 indeterminate:bg-blue-500 dark:border-gray-700 dark:checked:border-blue-400 dark:checked:bg-blue-400 dark:indeterminate:border-blue-400 dark:indeterminate:bg-blue-400",o?"cursor-not-allowed":"cursor-pointer",r),type:"checkbox",disabled:o,onChange:g,checked:n,readOnly:l,id:t,"data-testid":t,style:d,ref:p}),u==="right"&&m]})}const d8=re(me,"30127c",16,16);function xd(t){"use forget";var Yt;const e=D.c(128);let n,s,o,r,a,l,c,u,d,f,m,p,g,h,_,x,b,y,S,C,w,k,E,T,M,A,I,j,R,O,L,B,U,H,$,F,z,W;e[0]!==t?(Yt=t,{name:x,placeholder:I,type:z,role:O,list:h,ariaLabel:s,displayName:d,onChange:y,onFocus:w,onBlur:b,value:W,saveOnBlur:L,onClear:S,icon:n,iconPosition:H,onInputIconClick:k,className:l,inputClassName:p,containerInputClassName:c,iconClassName:m,autoComplete:r,autoCapitalize:o,spellCheck:B,autoFocus:a,onPressEnter:M,onPaste:T,disabled:u,maxLength:_,color:$,onKeyDown:E,suppressFocus:F,ref:R,insideContainerChildren:g,style:U,displayNameLabelClassName:f,readOnly:j,onClick:C}=Yt,A=De(Yt,["name","placeholder","type","role","list","ariaLabel","displayName","onChange","onFocus","onBlur","value","saveOnBlur","onClear","icon","iconPosition","onInputIconClick","className","inputClassName","containerInputClassName","iconClassName","autoComplete","autoCapitalize","spellCheck","autoFocus","onPressEnter","onPaste","disabled","maxLength","color","onKeyDown","suppressFocus","ref","insideContainerChildren","style","displayNameLabelClassName","readOnly","onClick"]),e[0]=t,e[1]=n,e[2]=s,e[3]=o,e[4]=r,e[5]=a,e[6]=l,e[7]=c,e[8]=u,e[9]=d,e[10]=f,e[11]=m,e[12]=p,e[13]=g,e[14]=h,e[15]=_,e[16]=x,e[17]=b,e[18]=y,e[19]=S,e[20]=C,e[21]=w,e[22]=k,e[23]=E,e[24]=T,e[25]=M,e[26]=A,e[27]=I,e[28]=j,e[29]=R,e[30]=O,e[31]=L,e[32]=B,e[33]=U,e[34]=H,e[35]=$,e[36]=F,e[37]=z,e[38]=W):(n=e[1],s=e[2],o=e[3],r=e[4],a=e[5],l=e[6],c=e[7],u=e[8],d=e[9],f=e[10],m=e[11],p=e[12],g=e[13],h=e[14],_=e[15],x=e[16],b=e[17],y=e[18],S=e[19],C=e[20],w=e[21],k=e[22],E=e[23],T=e[24],M=e[25],A=e[26],I=e[27],j=e[28],R=e[29],O=e[30],L=e[31],B=e[32],U=e[33],H=e[34],$=e[35],F=e[36],z=e[37],W=e[38]);const Y=H===void 0?"right":H,K=$===void 0?"tertiary":$,Z=F===void 0?!1:F,[J,Q]=v.useState(W);let ne;e[39]!==b||e[40]!==L?(ne=nn=>{b==null||b(nn),L&&Q(nn.target.value)},e[39]=b,e[40]=L,e[41]=ne):ne=e[41];const ie=ne;let fe;e[42]!==y||e[43]!==L?(fe=nn=>{y==null||y(nn),L&&Q(nn.target.value)},e[42]=y,e[43]=L,e[44]=fe):fe=e[44];const ae=fe;let le;e[45]!==J||e[46]!==E||e[47]!==M?(le=nn=>{E==null||E(nn),!nn.nativeEvent.isComposing&&nn.key==="Enter"&&M&&(nn.preventDefault(),M(J,nn))},e[45]=J,e[46]=E,e[47]=M,e[48]=le):le=e[48];const pe=le;let _e,Ce;e[49]!==W?(_e=()=>{Q(W)},Ce=[W],e[49]=W,e[50]=_e,e[51]=Ce):(_e=e[50],Ce=e[51]),v.useEffect(_e,Ce);let ge;e[52]!==L||e[53]!==W?(ge=L?{}:{value:W},e[52]=L,e[53]=W,e[54]=ge):ge=e[54];let Re;e[55]!==J||e[56]!==L?(Re=L?{value:J}:{},e[55]=J,e[56]=L,e[57]=Re):Re=e[57];let ke;e[58]!==Re||e[59]!==ge?(ke=N(N({},ge),Re),e[58]=Re,e[59]=ge,e[60]=ke):ke=e[60];const he=ke,Ee=Y==="right",Pe=Y==="left";let Ae;e[61]!==m||e[62]!==Ee||e[63]!==Pe?(Ae=q("absolute top-1/2 -translate-y-1/2",{"end-0":Ee,"start-0":Pe},m),e[61]=m,e[62]=Ee,e[63]=Pe,e[64]=Ae):Ae=e[64];const de=Ae,oe=K==="neutral"&&(Z?"-main-surface-tertiary hover:bg-token-main-surface-tertiary border-transparent px-3 py-2":"focus-within:bg-token-main-surface-tertiary hover:bg-token-main-surface-tertiary border-transparent px-3 py-2 focus-within:border-green-500 focus-within:ring-1 focus-within:ring-transparent"),se=K==="tertiary"&&(Z?"border-token-border-medium px-3 py-2":"border-token-border-medium focus-within:border-token-border-xheavy focus-within:ring-token-text-secondary px-3 py-2 focus-within:ring-1"),Oe=K==="search"&&(Z?"border-token-border-medium bg-token-main-surface-primary dark:border-token-border-medium rounded-xl p-4":"border-token-border-medium bg-token-main-surface-primary focus-within:border-token-border-xheavy dark:border-token-border-medium dark:focus-within:border-token-border-xheavy rounded-xl p-4 focus-within:ring-0 dark:focus-within:ring-0"),Ne=K==="quaternary"&&(Z?"border-token-main-surface-quaternary text-token-text-quaternary px-3 py-2":"border-token-main-surface-quaternary text-token-text-quaternary focus-within:border-token-border-xheavy focus-within:ring-token-text-secondary px-3 py-2 focus-within:ring-1");let ze;e[65]!==l||e[66]!==oe||e[67]!==se||e[68]!==Oe||e[69]!==Ne?(ze=q("rounded-md border shadow-none",oe,se,Oe,Ne,l),e[65]=l,e[66]=oe,e[67]=se,e[68]=Oe,e[69]=Ne,e[70]=ze):ze=e[70];let Qe;e[71]!==f?(Qe=q("text-token-text-primary block text-xs font-semibold",f),e[71]=f,e[72]=Qe):Qe=e[72];let Le;e[73]!==d||e[74]!==x||e[75]!==Qe?(Le=i.jsx("label",{htmlFor:x,className:Qe,children:d}),e[73]=d,e[74]=x,e[75]=Qe,e[76]=Le):Le=e[76];const ce=d&&"mt-1";let be;e[77]!==c||e[78]!==ce?(be=q(ce,"relative",c),e[77]=c,e[78]=ce,e[79]=be):be=e[79];const He=s||void 0,Ge=n!=null&&Y==="right"&&"pe-6",nt=n!=null&&Y==="left"&&"ps-6",at=K==="neutral"||K==="search"?"bg-transparent":"bg-token-main-surface-primary text-token-text-primary",Xe=K==="quaternary"?"placeholder:text-token-text-quaternary":"placeholder-gray-500";let gt;e[80]!==p||e[81]!==Ge||e[82]!==nt||e[83]!==at||e[84]!==Xe?(gt=q("block w-full border-0 p-0 shadow-none outline-hidden focus-within:shadow-none focus-within:ring-0 focus-within:outline-hidden focus:border-none focus:ring-0 sm:text-sm",Ge,nt,at,Xe,p),e[80]=p,e[81]=Ge,e[82]=nt,e[83]=at,e[84]=Xe,e[85]=gt):gt=e[85];let ht;e[86]!==he||e[87]!==o||e[88]!==r||e[89]!==a||e[90]!==u||e[91]!==ie||e[92]!==ae||e[93]!==pe||e[94]!==h||e[95]!==_||e[96]!==x||e[97]!==C||e[98]!==w||e[99]!==T||e[100]!==A||e[101]!==I||e[102]!==j||e[103]!==R||e[104]!==O||e[105]!==B||e[106]!==U||e[107]!==He||e[108]!==gt||e[109]!==z?(ht=i.jsx("input",N(G(N({},A),{style:U,ref:R,type:z,name:x,id:x,list:h,role:O,"aria-label":He,onPaste:T,className:gt,placeholder:I,onBlur:ie,onFocus:w,onChange:ae,onKeyDown:pe,autoComplete:r,spellCheck:B,autoCapitalize:o,autoFocus:a,disabled:u,maxLength:_,readOnly:j,onClick:C}),he)),e[86]=he,e[87]=o,e[88]=r,e[89]=a,e[90]=u,e[91]=ie,e[92]=ae,e[93]=pe,e[94]=h,e[95]=_,e[96]=x,e[97]=C,e[98]=w,e[99]=T,e[100]=A,e[101]=I,e[102]=j,e[103]=R,e[104]=O,e[105]=B,e[106]=U,e[107]=He,e[108]=gt,e[109]=z,e[110]=ht):ht=e[110];let Zt;e[111]!==n||e[112]!==de||e[113]!==k?(Zt=n!=null&&(k?i.jsx("button",{className:de,onClick:k,children:i.jsx(n,{className:"icon-sm"})}):i.jsx("div",{className:de,children:i.jsx(n,{className:"icon-sm"})})),e[111]=n,e[112]=de,e[113]=k,e[114]=Zt):Zt=e[114];let It;e[115]!==J||e[116]!==S?(It=S&&J&&i.jsx("button",{type:"button",className:"text-token-text-tertiary absolute end-0 top-1/2 -translate-y-1/2",onClick:S,children:i.jsx(d8,{className:"icon-sm"})}),e[115]=J,e[116]=S,e[117]=It):It=e[117];let lt;e[118]!==g||e[119]!==be||e[120]!==ht||e[121]!==Zt||e[122]!==It?(lt=i.jsxs("div",{className:be,children:[ht,Zt,It,g]}),e[118]=g,e[119]=be,e[120]=ht,e[121]=Zt,e[122]=It,e[123]=lt):lt=e[123];let Mt;return e[124]!==ze||e[125]!==Le||e[126]!==lt?(Mt=i.jsxs("div",{className:ze,children:[Le,lt]}),e[124]=ze,e[125]=Le,e[126]=lt,e[127]=Mt):Mt=e[127],Mt}var Aj;const Aet=Tt.div(Aj||(Aj=_t(["text-base text-token-text-primary flex flex-col gap-9 my-6"])));var Nj;const zne=Tt.div(Nj||(Nj=_t(["text-base font-semibold"])));var Ij;const Net=Tt.div(Ij||(Ij=_t(["text-base font-semibold"])));var jj;const Iet=Tt.div(jj||(jj=_t(["flex flex-col divide-y divide-token-border-default border-y border-token-border-default"])));var Pj;const Wne=Tt.div(Pj||(Pj=_t(["flex flex-col w-full m-auto md:m-0"])));var Rj;const qne=Tt.div(Rj||(Rj=_t(["text-sm"])));var Oj;const jet=Tt.div(Oj||(Oj=_t(["flex justify-between py-3 gap-4"])));var Lj;const Pet=Tt.hr(Lj||(Lj=_t(["max-w-xl border-token-border-default"])));var Dj;const Ret=Tt.div(Dj||(Dj=_t(["text-token-text-secondary text-sm mt-6"]))),Oet=({icon:t,title:e,body:n,toggle:s,disabled:o=!1,disabledPill:r,disabledMessage:a,children:l,showDivider:c=!0})=>i.jsx(St,{label:a,side:"top",disabled:!o||!a,className:"max-w-xl",triggerAs:null,children:i.jsxs("div",{children:[i.jsxs(Wne,{className:q("border-token-border-default mb-3 p-6",o&&"text-token-text-tertiary"),children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[t&&i.jsx(t,{className:"icon-sm"}),i.jsxs(zne,{className:"flex items-center gap-3",children:[e,o&&r&&i.jsx("span",{className:"bg-token-main-surface-tertiary rounded-xl px-2 pb-0.5 text-sm",children:r})]})]}),i.jsx("div",{children:s})]}),i.jsx(qne,{children:n}),l&&i.jsx("div",{className:"mt-4",children:l})]}),c&&i.jsx("div",{className:"border-token-border-default mt-6 border border-t"})]})});function f8(t,e){return ut({queryKey:["workspace/identity",t],queryFn:async()=>{if(t!==void 0)return await ue.safeGet("/accounts/{account_id}/identity",{parameters:{path:{account_id:t}}})},enabled:e})}function Let(){const t=D0(),e=t?BP(t):null,n=e==null?void 0:e.pwd_auth_time;return n==null?!1:Date.now()-n<1800*1e3}function Kne(t){return ut({queryKey:["sso/workos/connections",t],queryFn:()=>{if(t!==void 0)return ue.safeGet("/accounts/{account_id}/sso/workos/connections/list",{authOption:Ot.SendIfAvailable,parameters:{path:{account_id:t}}})},enabled:t!=null,retry:(e,n)=>n instanceof Vn&&(n.status===401||n.code==="reauth_required")?!1:e<3})}function Det(){const t=br(ma.businessWorkspaceId),e=xe("4105779609"),s=br(ma.isTeamPlan)?e:!0,{data:o,isFetching:r,isPending:a}=Kne(s&&t!=null?t:void 0),l=o instanceof Vn?o:void 0;return{connection:l||o==null?void 0:o[0],error:l,enabled:s,isLoading:r||a}}function Bet(t){const e=Nt();return zt({mutationFn:()=>ue.safePost("/accounts/{account_id}/sso/connections/workos",{requestBody:{enabled_client_names:["chat"]},authOption:Ot.SendIfAvailable,parameters:{path:{account_id:t}}}),onSuccess:()=>{e.refetchQueries({queryKey:["sso/workos/connections",t]})}})}function Fet(){const t=br(ma.businessWorkspaceId),{data:e}=f8(t!=null?t:void 0,t!=null);return e==null?void 0:e.allow_external_domain_invites}function Uet(){const t=br(ma.businessWorkspaceId),{data:e}=f8(t!=null?t:void 0,t!=null);return v.useMemo(()=>(e==null?void 0:e.domains)&&(e==null?void 0:e.domains.filter(n=>n.status==="verified")),[e==null?void 0:e.domains])}function Het(t){const e=te(),n=Dt(),s=Nt();return zt({mutationFn:({shouldAutoProvision:o})=>ue.safePost("/accounts/{account_id}/settings/auto_provision",{parameters:{path:{account_id:t}},requestBody:{value:o}}).then(r=>{const a=o?ni.autoProvisionEnabledToast:ni.autoProvisionDisabledToast;return n.success(e.formatMessage(a),{duration:3}),r}).catch(r=>{throw n.danger(r.message,{toastId:"useShouldAutoProvisionMutation",loggingTitle:r.message,loggingDescription:"Auto provisioning toggle failed"}),r}),onSuccess:()=>{s.invalidateQueries({queryKey:["workspace/identity",t]})}})}function $et(t){const e=te(),n=Dt(),s=Nt();return zt({mutationFn:async({shouldAllowExternalDomainInvites:o})=>{try{const r=await ue.safePost("/accounts/{account_id}/settings/allow_external_domain_invites",{parameters:{path:{account_id:t}},requestBody:{value:o}}),a=o?ni.allowExternalDomainInvitesToast:ni.disableExternalDomainInvitesToast;return n.success(e.formatMessage(a),{duration:3}),r}catch(r){throw n.danger(r.message,{toastId:"useShouldDisableExternalDomainInvitesMutation",loggingTitle:r.message,loggingDescription:"External domain invites toggle failed"}),r}},onSuccess:()=>{s.invalidateQueries({queryKey:["workspace/identity",t]})}})}function Get(t){const e=Nt(),n=Dt();return zt({mutationFn:({hostname:s})=>ue.safePost("/accounts/{account_id}/domains",{parameters:{path:{account_id:t}},requestBody:{hostname:s}}),onSuccess:()=>{e.invalidateQueries({queryKey:["workspace/identity",t]}),e.invalidateQueries({queryKey:["builderProfile"]})},onError:s=>{n.danger(s.message,{toastId:"useAddDomainMutation",loggingTitle:s.message,loggingDescription:"Domain add failed"})}})}function Yne(t){const e=Nt();return zt({mutationFn:({domainId:n})=>ue.safeDelete("/accounts/{account_id}/domains/{domain_id}",{parameters:{path:{account_id:t,domain_id:n}}}),onSuccess:()=>{e.refetchQueries({queryKey:["workspace/identity",t]}),e.refetchQueries({queryKey:["builderProfile"]})}})}function Vet(t,e){var a;const n=Nt(),s=Dt(),o=te(),r=(a=e==null?void 0:e.suppressSuccessToast)!=null?a:!1;return zt({mutationFn:({value:l,public_display_name:c,use_workspace_name_for_discovery:u})=>ue.safePost("/accounts/{account_id}/settings/workspace_discoverable",{parameters:{path:{account_id:t}},requestBody:{value:l,public_display_name:c,use_workspace_name_for_discovery:u}}),onSuccess:(l,c)=>{if(n.invalidateQueries({queryKey:["workspace-settings",t]}),n.invalidateQueries({queryKey:["discoverable-workspaces"]}),!r){let u;c.action==="name"?u=ni.discoveryDisplayNameUpdatedToast:u=c.value?ni.discoveryEnabledToast:ni.discoveryDisabledToast,s.success(o.formatMessage(u),{duration:3})}},onError:l=>{var c;s.danger((c=l.message)!=null?c:"Failed to update discovery settings",{toastId:"workspace_discoverability",loggingTitle:l.message,loggingDescription:"Workspace discoverability update failed"})}})}function zet(t){const e=Nt(),n=Dt(),s=te();return zt({mutationFn:({autoAcceptRequests:o})=>ue.safePost("/accounts/{account_id}/settings/auto_accept_requests",{parameters:{path:{account_id:t}},requestBody:{value:o}}),onSuccess:(o,r)=>{e.invalidateQueries({queryKey:["workspace-settings",t]});const a=r.autoAcceptRequests?ni.manualApprovalDisabledToast:ni.manualApprovalEnabledToast;n.success(s.formatMessage(a),{duration:3})},onError:o=>{var r;n.danger((r=o.message)!=null?r:"Failed to update approval setting",{toastId:"workspace_manual_approval",loggingTitle:o.message,loggingDescription:"Workspace manual approval update failed"})}})}function Wet(t){const e=Nt();return zt({mutationFn:({enforcementStatus:n})=>ue.safePost("/accounts/{account_id}/sso/workos/connections/workos_enforcement",{parameters:{path:{account_id:t}},requestBody:{enforcement_status:n}}),onSuccess:()=>{e.refetchQueries({queryKey:["sso/workos/connections",t]})}})}function qet(t){const e=Nt();return zt({mutationFn:()=>ue.safePost("/accounts/{account_id}/sso/workos/connections/toggle_enabled",{parameters:{path:{account_id:t}}}),onSuccess:()=>{e.refetchQueries({queryKey:["sso/workos/connections",t]})}})}var Bj;Tt.div(Bj||(Bj=_t(["text-md mb-4 text-token-text-secondary"])));const Ket=we({[ey.VERIFIED]:{id:"i7FkyS",defaultMessage:"Verified"},[ey.PENDING]:{id:"THBv/l",defaultMessage:"Pending"},[ey.EXPIRED]:{id:"+sjWGK",defaultMessage:"Expired"}}),ni=we({autoProvisionEnabledToast:{id:"workspaceIdentity.autoProvisionEnabledToast",defaultMessage:"Auto provisioning enabled for this workspace"},autoProvisionDisabledToast:{id:"workspaceIdentity.autoProvisionDisabledToast",defaultMessage:"Auto provisioning disabled for this workspace"},allowExternalDomainInvitesToast:{id:"j0jI/4",defaultMessage:"External domain invites are allowed for this workspace"},disableExternalDomainInvitesToast:{id:"67yB97",defaultMessage:"External domain invites are disabled for this workspace"},discoveryEnabledToast:{id:"workspaceIdentity.discoveryEnabledToast",defaultMessage:"Workspace is now discoverable"},discoveryDisabledToast:{id:"workspaceIdentity.discoveryDisabledToast",defaultMessage:"Workspace is no longer discoverable"},discoveryDisplayNameUpdatedToast:{id:"workspaceIdentity.discoveryDisplayNameUpdatedToast",defaultMessage:"Workspace display name updated"},manualApprovalEnabledToast:{id:"workspaceIdentity.manualApprovalEnabledToast",defaultMessage:"Join requests now require manual approval"},manualApprovalDisabledToast:{id:"workspaceIdentity.manualApprovalDisabledToast",defaultMessage:"Join requests will be auto-accepted"}});function Zne(t,e){"use forget";const n=D.c(8),s=e===void 0?!0:e;let o;n[0]!==t?(o=["account-metadata",t],n[0]=t,n[1]=o):o=n[1];const r=s&&t!=null;let a;n[2]!==t?(a=async()=>{if(t)try{return await ue.safeGet("/accounts/{account_id}/metadata",{parameters:{path:{account_id:t}}})}catch(c){return}},n[2]=t,n[3]=a):a=n[3];let l;return n[4]!==o||n[5]!==r||n[6]!==a?(l={queryKey:o,enabled:r,queryFn:a},n[4]=o,n[5]=r,n[6]=a,n[7]=l):l=n[7],ut(l)}function Yet(t,e=!0){var s;const{data:n}=Zne(t,e);return(s=n==null?void 0:n.k12_creator_email_domain)!=null?s:null}function Zet(t){return t===Du.ADMIN||t===Du.OWNER}function Qet(t){return t===Du.OWNER}function Jet(t){return t===Du.OWNER||t===Du.ADMIN||t===Du.ANALYTICS_VIEWER}function Xet(t,e){switch(e){case Zr.BROWSER:return"Web browsing";case Zr.PYTHON:return"Code interpreter & Data Analysis";case Zr.JIT_PLUGIN:return"Custom actions";case Zr.RETRIEVAL:return"File retrieval";case Zr.DALLE:return"DALLE image generation";case Zr.IMAGE_GEN:return"4o image generation";case Zr.CANVAS:return"Canvas";case wu.Private:return"Builder only";case wu.Workspace:return t.data.name;case wu.Link:return"Anyone with link";case wu.Marketplace:return"Public";case Zr.CONNECTOR:return"Apps";default:return null}}function Qne(t){const e=te(),n=Dt();return ut({queryKey:["organization-subscription",t],queryFn:async()=>await ue.safeGet("/subscriptions",{parameters:{query:t}}).catch(s=>(n.danger(e.formatMessage(QM.subscriptionLoadError,{error:s.message}),{toastId:"subscription_data",loggingTitle:QM.subscriptionLoadError.defaultMessage,loggingDescription:"Failed to load subscription"}),null)),enabled:t.account_id!=null||t.organization_id!=null})}function q3(){var a,l;const t=Tn(),e=t==null?void 0:t.id,n=(a=t==null?void 0:t.data.organizationId)!=null?a:void 0,s=t==null?void 0:t.isEnterprisey(),r=!((l=Et())!=null&&l.hasPaidSubscription())||!!(t!=null&&t.isFreeWorkspace())?{}:s?{organization_id:n}:{account_id:e};return Qne(r)}function ett(t,e,n,s,o=!1){return ut({queryKey:["get-subscription-update-preview",e,s,n],queryFn:async()=>await ue.safeGet("/subscriptions/update/preview",{parameters:{query:{account_id:t,updated_plan:n,updated_seats:e,updated_promo_id:s}}}),enabled:!o})}function ttt(t){const e=Nt();return zt({mutationFn:async n=>ue.safePost("/subscriptions/cancel",{requestBody:{account_id:n}}),onSuccess:()=>{e.invalidateQueries({queryKey:["organization-subscription",{account_id:t}]}),e.invalidateQueries(FP())}})}function ntt(t){const e=Nt();return zt({mutationFn:async n=>ue.safePost("/subscriptions/renew",{requestBody:{account_id:n}}),onSuccess:()=>{e.invalidateQueries({queryKey:["organization-subscription",{account_id:t}]})}})}function stt(t){const e=Nt();return zt({mutationFn:({accountId:n,updatedPlan:s,updatedSeats:o,updatedPriceInterval:r,updatedPromoId:a,updatedPromoCode:l,updatedPromoCampaign:c})=>ue.safePost("/subscriptions/update",{requestBody:{account_id:n,updated_plan:s,updated_seats:o,updated_price_interval:r,updated_promo_id:a,updated_promo_code:l,updated_promo_campaign:c}}),onSuccess:()=>{e.invalidateQueries({queryKey:["organization-subscription",{account_id:t}]})}})}const QM=we({subscriptionLoadError:{id:"useSubscriptionData.subscriptionLoadError",defaultMessage:"Failed to load subscription: {error}. Contact support@openai.com if error persists."}});function m8(t,e){return new Intl.DateTimeFormat(t.locale,{year:"numeric",month:"short",day:"numeric"}).format(e)}var fy,JM;function p8(){if(JM)return fy;JM=1;function t(e,n,s){var o=-1,r=e.length;n<0&&(n=-n>r?0:r+n),s=s>r?r:s,s<0&&(s+=r),r=n>s?0:s-n>>>0,n>>>=0;for(var a=Array(r);++o<r;)a[o]=e[o+n];return a}return fy=t,fy}var my,XM;function Jne(){if(XM)return my;XM=1;var t=p8();function e(n,s,o){var r=n.length;return o=o===void 0?r:o,!s&&o>=r?n:t(n,s,o)}return my=e,my}var py,e4;function g8(){if(e4)return py;e4=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",s="\\u20d0-\\u20ff",o=e+n+s,r="\\ufe0e\\ufe0f",a="\\u200d",l=RegExp("["+a+t+o+r+"]");function c(u){return l.test(u)}return py=c,py}var gy,t4;function Xne(){if(t4)return gy;t4=1;function t(e){return e.split("")}return gy=t,gy}var hy,n4;function ese(){if(n4)return hy;n4=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",s="\\u20d0-\\u20ff",o=e+n+s,r="\\ufe0e\\ufe0f",a="["+t+"]",l="["+o+"]",c="\\ud83c[\\udffb-\\udfff]",u="(?:"+l+"|"+c+")",d="[^"+t+"]",f="(?:\\ud83c[\\udde6-\\uddff]){2}",m="[\\ud800-\\udbff][\\udc00-\\udfff]",p="\\u200d",g=u+"?",h="["+r+"]?",_="(?:"+p+"(?:"+[d,f,m].join("|")+")"+h+g+")*",x=h+g+_,b="(?:"+[d+l+"?",l,f,m,a].join("|")+")",y=RegExp(c+"(?="+c+")|"+b+x,"g");function S(C){return C.match(y)||[]}return hy=S,hy}var _y,s4;function tse(){if(s4)return _y;s4=1;var t=Xne(),e=g8(),n=ese();function s(o){return e(o)?n(o):t(o)}return _y=s,_y}var xy,o4;function nse(){if(o4)return xy;o4=1;var t=Jne(),e=g8(),n=tse(),s=sp();function o(r){return function(a){a=s(a);var l=e(a)?n(a):void 0,c=l?l[0]:a.charAt(0),u=l?t(l,1).join(""):a.slice(1);return c[r]()+u}}return xy=o,xy}var yy,r4;function h8(){if(r4)return yy;r4=1;var t=nse(),e=t("toUpperCase");return yy=e,yy}var by,a4;function sse(){if(a4)return by;a4=1;var t=sp(),e=h8();function n(s){return e(t(s).toLowerCase())}return by=n,by}var ose=sse();const rse=ps(ose),ase=7,ise=1;function _8(){"use forget";const t=D.c(7),[e,n]=op(Ie.SubscriptionFailedBanner,null,lse);let s;if(t[0]!==e){const c=e!=null?Or(e):null;s=c==null?!0:new Date>bC(c,ise),t[0]=e,t[1]=s}else s=t[1];const o=s;let r;t[2]!==n?(r=()=>{n(pa(new Date))},t[2]=n,t[3]=r):r=t[3];const a=r;let l;return t[4]!==o||t[5]!==a?(l={canBeSeen:o,markSeen:a},t[4]=o,t[5]=a,t[6]=l):l=t[6],l}function lse(t){return typeof t=="number"}function ott(){"use forget";var _;const t=Tn(),{data:e,isPending:n}=q3(),{canBeSeen:s}=_8(),o=Dd();if(!((_=Et())!=null&&_.hasPaidSubscription())||o)return"hide";if(n||!t)return"loading";if(!e)return"hide";const r=t==null?void 0:t.isStandardUserOfAccount(),a=e.plan_type===et.SELF_SERVE_BUSINESS,l=x8(e.plan_type),c=e.became_delinquent_timestamp!=null?new Date(e.became_delinquent_timestamp):null,u=a&&r?3:2,d=c!=null&&new Date>bC(c,u),f=e.grace_period_end_timestamp!=null&&new Date(e.grace_period_end_timestamp)>new Date,m=!!e.is_delinquent&&f&&e.will_renew&&d,p=m&&a,g=!!(m&&!a&&s&&(l!=null&&l.get("include_banner_notifications",!1)));return p||g?"show":"hide"}function rtt(t){"use forget";const e=D.c(53),{onClose:n}=t,s=te(),o=bt(),{data:r}=q3(),{markSeen:a}=_8(),[l,c]=v.useState(!1),u=Tn();let d;e[0]!==u?(d=u==null?void 0:u.getWorkspaceId(),e[0]=u,e[1]=d):d=e[1];const f=d;let m;e[2]!==u||e[3]!==r?(m=r&&u?cse(r,u):null,e[2]=u,e[3]=r,e[4]=m):m=e[4];const p=m;let g,h;if(e[5]!==p?(g=()=>{p==="teamMember"?V.logEventWithStatsig("Subscription Renewal Failed Banner Shown to User","chatgpt_web_subscription_renewal_failed_banner_shown_to_user"):p==="teamOwner"?V.logEventWithStatsig("Subscription Renewal Failed Banner Shown to Owner","chatgpt_web_subscription_renewal_failed_banner_shown_to_owner"):p==="personal"&&V.logEventWithStatsig("Subscription Renewal Failed Banner Shown to Personal User","chatgpt_web_subscription_renewal_failed_banner_shown_to_personal_user")},h=[p],e[5]=p,e[6]=g,e[7]=h):(g=e[6],h=e[7]),v.useEffect(g,h),!r)return null;let _,x,b;if(e[8]!==r.grace_period_end_timestamp||e[9]!==r.plan_type||e[10]!==p){const $=x8(r.plan_type);let F;e[14]!==r.grace_period_end_timestamp?(F=r.grace_period_end_timestamp!=null&&fK(new Date(r.grace_period_end_timestamp),ase)<new Date,e[14]=r.grace_period_end_timestamp,e[15]=F):F=e[15],_=F,x=Boolean,b=p==="personal"&&($==null?void 0:$.get("is_banner_notification_dismissible",!1)),e[8]=r.grace_period_end_timestamp,e[9]=r.plan_type,e[10]=p,e[11]=_,e[12]=x,e[13]=b}else _=e[11],x=e[12],b=e[13];const y=x(b);let S,C;if(e[16]!==s||e[17]!==r.grace_period_end_timestamp||e[18]!==r.plan_type){const $=r.grace_period_end_timestamp!=null?new Date(r.grace_period_end_timestamp):null;let F;e[21]!==r.plan_type?(F=rse(r.plan_type),e[21]=r.plan_type,e[22]=F):F=e[22],S=F,C=$!=null?m8(s,$):null,e[16]=s,e[17]=r.grace_period_end_timestamp,e[18]=r.plan_type,e[19]=S,e[20]=C}else S=e[19],C=e[20];const w=C;let k;e[23]!==y||e[24]!==a||e[25]!==n?(k=()=>{y&&(V.logEventWithStatsig("Subscription Renewal Failed Banner Personal Dismissed","chatgpt_web_subscription_renewal_failed_banner_personal_dismissed"),a()),n()},e[23]=y,e[24]=a,e[25]=n,e[26]=k):k=e[26];const E=k;let T;e[27]!==E||e[28]!==f?(T=async()=>{V.logEventWithStatsig("Subscription Renewal Failed Banner Owner Clicked","chatgpt_web_subscription_renewal_failed_banner_owner_clicked"),c(!0);const $=await use(f);c(!1),E(),location.href=$},e[27]=E,e[28]=f,e[29]=T):T=e[29];const M=T;let A;e[30]!==E||e[31]!==o?(A=()=>{V.logEventWithStatsig("Subscription Renewal Failed Banner Personal Manage Subscription CTA Clicked","chatgpt_web_subscription_renewal_failed_banner_personal_cta_clicked"),E(),o("/account/manage")},e[30]=E,e[31]=o,e[32]=A):A=e[32];const I=A,j=!y;let R;e[33]!==S?(R=i.jsx("span",{className:"text-black",children:i.jsx(P,{id:"SubscriptionRenewalFailedBanner.title",defaultMessage:"{planName} plan failed to renew",values:{planName:S}})}),e[33]=S,e[34]=R):R=e[34];const O=p==="teamMember"?E:p==="teamOwner"?M:I;let L;e[35]!==s||e[36]!==p?(L=s.formatMessage(p==="teamMember"?qe({id:"SubscriptionRenewalFailedBanner.continue",defaultMessage:"Continue"}):qe({id:"SubscriptionRenewalFailedBanner.updatePayment",defaultMessage:"Update payment"})),e[35]=s,e[36]=p,e[37]=L):L=e[37];let B;e[38]!==l||e[39]!==O||e[40]!==L?(B=i.jsx(B0,{color:"primary",onClick:O,loading:l,title:L}),e[38]=l,e[39]=O,e[40]=L,e[41]=B):B=e[41];let U;e[42]!==w||e[43]!==S||e[44]!==_||e[45]!==p?(U=p==="teamMember"?i.jsx(P,{id:"SubscriptionRenewalFailedBanner.userMessage",defaultMessage:"Your workspace will be deactivated on {date}. Please contact your workspace admin.",values:{date:w}}):p==="teamOwner"?i.jsx(P,{id:"SubscriptionRenewalFailedBanner.ownerMessage",defaultMessage:"Update your payment details before {date} to continue accessing your workspace.",values:{date:w}}):_?i.jsx(P,{id:"SubscriptionRenewalFailedBanner.personalDescriptionWithDate",defaultMessage:"Update your payment details before {date} to continue using ChatGPT {planName}.",values:{date:w,planName:S}}):i.jsx(P,{id:"SubscriptionRenewalFailedBanner.personalDescription",defaultMessage:"Update your payment details soon to continue using ChatGPT {planName}.",values:{planName:S}}),e[42]=w,e[43]=S,e[44]=_,e[45]=p,e[46]=U):U=e[46];let H;return e[47]!==E||e[48]!==j||e[49]!==R||e[50]!==B||e[51]!==U?(H=i.jsx(en,{testId:"modal-subscription-failure",isOpen:!0,onClose:E,showCloseButton:!0,shouldIgnoreClickOutside:j,headerClassName:"bg-yellow-300 dark:bg-yellow-500 text-black",contentClassName:"mt-2",title:R,primaryButton:B,children:U}),e[47]=E,e[48]=j,e[49]=R,e[50]=B,e[51]=U,e[52]=H):H=e[52],H}function cse(t,e){const n=t.plan_type===et.SELF_SERVE_BUSINESS,s=e.isStandardUserOfAccount();return n?s?"teamMember":"teamOwner":"personal"}async function use(t){try{return(await ue.safeGet("/payments/customer_portal",{parameters:{query:{account_id:t}}})).url}catch(e){return"https://chatgpt.com/admin/billing"}}function x8(t){switch(t){case et.PLUS:return Je("3850010910");case et.GO:return Je("1445695849");case et.PRO:return Je("2420067952");default:return null}}const dse=(t,e=10080*60*1e3)=>{if(!t)return{isFresh:!1,hasWorkspacesToJoin:null};try{const n=JSON.parse(t),s=Number(n.set_at);if(Number.isNaN(s))return{isFresh:!1,hasWorkspacesToJoin:null};const o=Date.now()-s<e,r=n.hasWorkspacesToJoin===!0||n.hasWorkspacesToJoin==="true";return{isFresh:o,hasWorkspacesToJoin:o?r:null}}catch(n){return{isFresh:!1,hasWorkspacesToJoin:null}}};function fse(t,e,n){"use forget";var h;const s=D.c(14),o=t===void 0?!0:t,r=e===void 0?!1:e,a=n===void 0?!1:n;let l;s[0]!==a||s[1]!==r?(l=["discoverable-workspaces",{useK12Lookup:r,includeFreeWorkspaces:a}],s[0]=a,s[1]=r,s[2]=l):l=s[2];const c=o;let u;s[3]!==a||s[4]!==r?(u=async()=>await ue.safeGet("/accounts/discoverable-workspaces",{parameters:{query:{use_k12_lookup:r,include_free_workspaces:a}}}),s[3]=a,s[4]=r,s[5]=u):u=s[5];let d;s[6]!==l||s[7]!==c||s[8]!==u?(d={queryKey:l,enabled:c,refetchOnMount:"always",queryFn:u},s[6]=l,s[7]=c,s[8]=u,s[9]=d):d=s[9];const f=ut(d);let m;s[10]!==f.data?(m=()=>{var _;if((_=f.data)!=null&&_.workspaces){const x=f.data.workspaces.some(mse),b=JSON.stringify({set_at:Date.now(),hasWorkspacesToJoin:x});tt.setItem(Ie.WorkspaceDiscoveryInfo,b)}},s[10]=f.data,s[11]=m):m=s[11];const p=(h=f.data)==null?void 0:h.workspaces;let g;return s[12]!==p?(g=[p],s[12]=p,s[13]=g):g=s[13],v.useEffect(m,g),f}function mse(t){return!t.requested}const pse=We.hasSeenWorkspaceDiscoveryFirstLogin,att=()=>{const{eligible:t,markAsViewedDontInvalidateCache:e,isLoading:n}=Ct(pse);return{setHasSeenWorkspaceDiscoveryFirstLoginDontInvalidateCache:e,hasSeenWorkspaceDiscoveryFirstLoginDate:n?null:!t}};var y8="AlertDialog",[gse]=Pc(y8,[UP]),_i=UP(),b8=t=>{const o=t,{__scopeAlertDialog:e}=o,n=De(o,["__scopeAlertDialog"]),s=_i(e);return i.jsx(rp,G(N(N({},s),n),{modal:!0}))};b8.displayName=y8;var hse="AlertDialogTrigger",_se=v.forwardRef((t,e)=>{const r=t,{__scopeAlertDialog:n}=r,s=De(r,["__scopeAlertDialog"]),o=_i(n);return i.jsx(GP,G(N(N({},o),s),{ref:e}))});_se.displayName=hse;var xse="AlertDialogPortal",v8=t=>{const o=t,{__scopeAlertDialog:e}=o,n=De(o,["__scopeAlertDialog"]),s=_i(e);return i.jsx(ap,N(N({},s),n))};v8.displayName=xse;var yse="AlertDialogOverlay",S8=v.forwardRef((t,e)=>{const r=t,{__scopeAlertDialog:n}=r,s=De(r,["__scopeAlertDialog"]),o=_i(n);return i.jsx(vC,G(N(N({},o),s),{ref:e}))});S8.displayName=yse;var $u="AlertDialogContent",[bse,vse]=gse($u),C8=v.forwardRef((t,e)=>{const u=t,{__scopeAlertDialog:n,children:s}=u,o=De(u,["__scopeAlertDialog","children"]),r=_i(n),a=v.useRef(null),l=Qn(e,a),c=v.useRef(null);return i.jsx(mK,{contentName:$u,titleName:w8,docsSlug:"alert-dialog",children:i.jsx(bse,{scope:n,cancelRef:c,children:i.jsxs(F0,G(N(N({role:"alertdialog"},r),o),{ref:l,onOpenAutoFocus:Gt(o.onOpenAutoFocus,d=>{var f;d.preventDefault(),(f=c.current)==null||f.focus({preventScroll:!0})}),onPointerDownOutside:d=>d.preventDefault(),onInteractOutside:d=>d.preventDefault(),children:[i.jsx(pK,{children:s}),i.jsx(Cse,{contentRef:a})]}))})})});C8.displayName=$u;var w8="AlertDialogTitle",k8=v.forwardRef((t,e)=>{const r=t,{__scopeAlertDialog:n}=r,s=De(r,["__scopeAlertDialog"]),o=_i(n);return i.jsx(HP,G(N(N({},o),s),{ref:e}))});k8.displayName=w8;var E8="AlertDialogDescription",T8=v.forwardRef((t,e)=>{const r=t,{__scopeAlertDialog:n}=r,s=De(r,["__scopeAlertDialog"]),o=_i(n);return i.jsx($P,G(N(N({},o),s),{ref:e}))});T8.displayName=E8;var Sse="AlertDialogAction",M8=v.forwardRef((t,e)=>{const r=t,{__scopeAlertDialog:n}=r,s=De(r,["__scopeAlertDialog"]),o=_i(n);return i.jsx(U0,G(N(N({},o),s),{ref:e}))});M8.displayName=Sse;var A8="AlertDialogCancel",N8=v.forwardRef((t,e)=>{const l=t,{__scopeAlertDialog:n}=l,s=De(l,["__scopeAlertDialog"]),{cancelRef:o}=vse(A8,n),r=_i(n),a=Qn(e,o);return i.jsx(U0,G(N(N({},r),s),{ref:a}))});N8.displayName=A8;var Cse=({contentRef:t})=>{const e="`".concat($u,"` requires a description for the component to be accessible for screen reader users.\n\nYou can add a description to the `").concat($u,"` by passing a `").concat(E8,"` component as a child, which also benefits sighted users by adding visible context to the dialog.\n\nAlternatively, you can use your own component as a description by assigning it an `id` and passing the same value to the `aria-describedby` prop in `").concat($u,"`. If the description is confusing or duplicative for sighted users, you can use the `@radix-ui/react-visually-hidden` primitive as a wrapper around your description component.\n\nFor more information, see https://radix-ui.com/primitives/docs/components/alert-dialog");return v.useEffect(()=>{var s;document.getElementById((s=t.current)==null?void 0:s.getAttribute("aria-describedby"))||console.warn(e)},[e,t]),null},wse=b8,kse=v8,Ese=S8,Tse=C8,Mse=M8,Ase=N8,Nse=k8,i4=T8;function I8({title:t,description:e,contentClassName:n,onClose:s,actionButton:o,cancelButton:r,moreInfoLink:a}){return i.jsx(wse,{open:!0,onOpenChange:l=>{l||s()},children:i.jsxs(kse,{children:[i.jsx(Ese,{className:"border-token-border-medium radix-state-open:animate-show fixed inset-0"}),i.jsxs(Tse,{className:q("bg-token-main-surface-primary radix-state-open:animate-alertShow fixed start-1/2 top-1/2 flex max-h-[85vh] w-[90vw] max-w-lg -translate-x-1/2 -translate-y-1/2 flex-col gap-2 rounded-2xl shadow-2xl focus:outline-hidden",n),onEscapeKeyDown:l=>l.preventDefault(),children:[i.jsx(Nse,{className:"border-token-border-default border-b p-4 text-lg font-semibold md:p-6",children:t}),i.jsxs("div",{className:"flex flex-col gap-4 p-4 md:p-6",children:[i.jsx(i4,{className:"text-base",children:e}),i.jsxs("div",{className:"flex justify-end gap-2",children:[a&&i.jsx(i4,{className:"grow",children:a}),r&&i.jsx(Ase,{asChild:!0,children:r}),i.jsx(Mse,{asChild:!0,children:o})]})]})]})]})})}var K3="ToastProvider",[Y3,Ise,jse]=SC("Toast"),[j8]=Pc("Toast",[jse]),[Pse,v_]=j8(K3),P8=t=>{const{__scopeToast:e,label:n="Notification",duration:s=5e3,swipeDirection:o="right",swipeThreshold:r=50,children:a}=t,[l,c]=v.useState(null),[u,d]=v.useState(0),f=v.useRef(!1),m=v.useRef(!1);return n.trim()||console.error("Invalid prop `label` supplied to `".concat(K3,"`. Expected non-empty `string`.")),i.jsx(Y3.Provider,{scope:e,children:i.jsx(Pse,{scope:e,label:n,duration:s,swipeDirection:o,swipeThreshold:r,toastCount:u,viewport:l,onViewportChange:c,onToastAdd:v.useCallback(()=>d(p=>p+1),[]),onToastRemove:v.useCallback(()=>d(p=>p-1),[]),isFocusedToastEscapeKeyDownRef:f,isClosePausedRef:m,children:a})})};P8.displayName=K3;var R8="ToastViewport",Rse=["F8"],Sv="toast.viewportPause",Cv="toast.viewportResume",O8=v.forwardRef((t,e)=>{const _=t,{__scopeToast:n,hotkey:s=Rse,label:o="Notifications ({hotkey})"}=_,r=De(_,["__scopeToast","hotkey","label"]),a=v_(R8,n),l=Ise(n),c=v.useRef(null),u=v.useRef(null),d=v.useRef(null),f=v.useRef(null),m=Qn(e,f,a.onViewportChange),p=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),g=a.toastCount>0;v.useEffect(()=>{const x=b=>{var S;s.length!==0&&s.every(C=>b[C]||b.code===C)&&((S=f.current)==null||S.focus())};return document.addEventListener("keydown",x),()=>document.removeEventListener("keydown",x)},[s]),v.useEffect(()=>{const x=c.current,b=f.current;if(g&&x&&b){const y=()=>{if(!a.isClosePausedRef.current){const k=new CustomEvent(Sv);b.dispatchEvent(k),a.isClosePausedRef.current=!0}},S=()=>{if(a.isClosePausedRef.current){const k=new CustomEvent(Cv);b.dispatchEvent(k),a.isClosePausedRef.current=!1}},C=k=>{!x.contains(k.relatedTarget)&&S()},w=()=>{x.contains(document.activeElement)||S()};return x.addEventListener("focusin",y),x.addEventListener("focusout",C),x.addEventListener("pointermove",y),x.addEventListener("pointerleave",w),window.addEventListener("blur",y),window.addEventListener("focus",S),()=>{x.removeEventListener("focusin",y),x.removeEventListener("focusout",C),x.removeEventListener("pointermove",y),x.removeEventListener("pointerleave",w),window.removeEventListener("blur",y),window.removeEventListener("focus",S)}}},[g,a.isClosePausedRef]);const h=v.useCallback(({tabbingDirection:x})=>{const y=l().map(S=>{const C=S.ref.current,w=[C,...Kse(C)];return x==="forwards"?w:w.reverse()});return(x==="forwards"?y.reverse():y).flat()},[l]);return v.useEffect(()=>{const x=f.current;if(x){const b=y=>{var w,k,E;const S=y.altKey||y.ctrlKey||y.metaKey;if(y.key==="Tab"&&!S){const T=document.activeElement,M=y.shiftKey;if(y.target===x&&M){(w=u.current)==null||w.focus();return}const j=h({tabbingDirection:M?"backwards":"forwards"}),R=j.findIndex(O=>O===T);vy(j.slice(R+1))?y.preventDefault():M?(k=u.current)==null||k.focus():(E=d.current)==null||E.focus()}};return x.addEventListener("keydown",b),()=>x.removeEventListener("keydown",b)}},[l,h]),i.jsxs(gK,{ref:c,role:"region","aria-label":o.replace("{hotkey}",p),tabIndex:-1,style:{pointerEvents:g?void 0:"none"},children:[g&&i.jsx(wv,{ref:u,onFocusFromOutsideViewport:()=>{const x=h({tabbingDirection:"forwards"});vy(x)}}),i.jsx(Y3.Slot,{scope:n,children:i.jsx(bn.ol,G(N({tabIndex:-1},r),{ref:m}))}),g&&i.jsx(wv,{ref:d,onFocusFromOutsideViewport:()=>{const x=h({tabbingDirection:"backwards"});vy(x)}})]})});O8.displayName=R8;var L8="ToastFocusProxy",wv=v.forwardRef((t,e)=>{const a=t,{__scopeToast:n,onFocusFromOutsideViewport:s}=a,o=De(a,["__scopeToast","onFocusFromOutsideViewport"]),r=v_(L8,n);return i.jsx(CC,G(N({"aria-hidden":!0,tabIndex:0},o),{ref:e,style:{position:"fixed"},onFocus:l=>{var d;const c=l.relatedTarget;!((d=r.viewport)!=null&&d.contains(c))&&s()}}))});wv.displayName=L8;var S_="Toast",Ose="toast.swipeStart",Lse="toast.swipeMove",Dse="toast.swipeCancel",Bse="toast.swipeEnd",D8=v.forwardRef((t,e)=>{const u=t,{forceMount:n,open:s,defaultOpen:o,onOpenChange:r}=u,a=De(u,["forceMount","open","defaultOpen","onOpenChange"]),[l=!0,c]=ld({prop:s,defaultProp:o,onChange:r});return i.jsx(H0,{present:n||l,children:i.jsx(Hse,G(N({open:l},a),{ref:e,onClose:()=>c(!1),onPause:Am(t.onPause),onResume:Am(t.onResume),onSwipeStart:Gt(t.onSwipeStart,d=>{d.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Gt(t.onSwipeMove,d=>{const{x:f,y:m}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","move"),d.currentTarget.style.setProperty("--radix-toast-swipe-move-x","".concat(f,"px")),d.currentTarget.style.setProperty("--radix-toast-swipe-move-y","".concat(m,"px"))}),onSwipeCancel:Gt(t.onSwipeCancel,d=>{d.currentTarget.setAttribute("data-swipe","cancel"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Gt(t.onSwipeEnd,d=>{const{x:f,y:m}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","end"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.setProperty("--radix-toast-swipe-end-x","".concat(f,"px")),d.currentTarget.style.setProperty("--radix-toast-swipe-end-y","".concat(m,"px")),c(!1)})}))})});D8.displayName=S_;var[Fse,Use]=j8(S_,{onClose(){}}),Hse=v.forwardRef((t,e)=>{const R=t,{__scopeToast:n,type:s="foreground",duration:o,open:r,onClose:a,onEscapeKeyDown:l,onPause:c,onResume:u,onSwipeStart:d,onSwipeMove:f,onSwipeCancel:m,onSwipeEnd:p}=R,g=De(R,["__scopeToast","type","duration","open","onClose","onEscapeKeyDown","onPause","onResume","onSwipeStart","onSwipeMove","onSwipeCancel","onSwipeEnd"]),h=v_(S_,n),[_,x]=v.useState(null),b=Qn(e,O=>x(O)),y=v.useRef(null),S=v.useRef(null),C=o||h.duration,w=v.useRef(0),k=v.useRef(C),E=v.useRef(0),{onToastAdd:T,onToastRemove:M}=h,A=Am(()=>{var L;(_==null?void 0:_.contains(document.activeElement))&&((L=h.viewport)==null||L.focus()),a()}),I=v.useCallback(O=>{!O||O===1/0||(window.clearTimeout(E.current),w.current=new Date().getTime(),E.current=window.setTimeout(A,O))},[A]);v.useEffect(()=>{const O=h.viewport;if(O){const L=()=>{I(k.current),u==null||u()},B=()=>{const U=new Date().getTime()-w.current;k.current=k.current-U,window.clearTimeout(E.current),c==null||c()};return O.addEventListener(Sv,B),O.addEventListener(Cv,L),()=>{O.removeEventListener(Sv,B),O.removeEventListener(Cv,L)}}},[h.viewport,C,c,u,I]),v.useEffect(()=>{r&&!h.isClosePausedRef.current&&I(C)},[r,C,h.isClosePausedRef,I]),v.useEffect(()=>(T(),()=>M()),[T,M]);const j=v.useMemo(()=>_?G8(_):null,[_]);return h.viewport?i.jsxs(i.Fragment,{children:[j&&i.jsx($se,{__scopeToast:n,role:"status","aria-live":s==="foreground"?"assertive":"polite","aria-atomic":!0,children:j}),i.jsx(Fse,{scope:n,onClose:A,children:Xa.createPortal(i.jsx(Y3.ItemSlot,{scope:n,children:i.jsx(hK,{asChild:!0,onEscapeKeyDown:Gt(l,()=>{h.isFocusedToastEscapeKeyDownRef.current||A(),h.isFocusedToastEscapeKeyDownRef.current=!1}),children:i.jsx(bn.li,G(N({role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":r?"open":"closed","data-swipe-direction":h.swipeDirection},g),{ref:b,style:N({userSelect:"none",touchAction:"none"},t.style),onKeyDown:Gt(t.onKeyDown,O=>{O.key==="Escape"&&(l==null||l(O.nativeEvent),O.nativeEvent.defaultPrevented||(h.isFocusedToastEscapeKeyDownRef.current=!0,A()))}),onPointerDown:Gt(t.onPointerDown,O=>{O.button===0&&(y.current={x:O.clientX,y:O.clientY})}),onPointerMove:Gt(t.onPointerMove,O=>{if(!y.current)return;const L=O.clientX-y.current.x,B=O.clientY-y.current.y,U=!!S.current,H=["left","right"].includes(h.swipeDirection),$=["left","up"].includes(h.swipeDirection)?Math.min:Math.max,F=H?$(0,L):0,z=H?0:$(0,B),W=O.pointerType==="touch"?10:2,Y={x:F,y:z},K={originalEvent:O,delta:Y};U?(S.current=Y,oh(Lse,f,K,{discrete:!1})):l4(Y,h.swipeDirection,W)?(S.current=Y,oh(Ose,d,K,{discrete:!1}),O.target.setPointerCapture(O.pointerId)):(Math.abs(L)>W||Math.abs(B)>W)&&(y.current=null)}),onPointerUp:Gt(t.onPointerUp,O=>{const L=S.current,B=O.target;if(B.hasPointerCapture(O.pointerId)&&B.releasePointerCapture(O.pointerId),S.current=null,y.current=null,L){const U=O.currentTarget,H={originalEvent:O,delta:L};l4(L,h.swipeDirection,h.swipeThreshold)?oh(Bse,p,H,{discrete:!0}):oh(Dse,m,H,{discrete:!0}),U.addEventListener("click",$=>$.preventDefault(),{once:!0})}})}))})}),h.viewport)})]}):null}),$se=t=>{const u=t,{__scopeToast:e,children:n}=u,s=De(u,["__scopeToast","children"]),o=v_(S_,e),[r,a]=v.useState(!1),[l,c]=v.useState(!1);return Wse(()=>a(!0)),v.useEffect(()=>{const d=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(d)},[]),l?null:i.jsx(wC,{asChild:!0,children:i.jsx(CC,G(N({},s),{children:r&&i.jsxs(i.Fragment,{children:[o.label," ",n]})}))})},Gse="ToastTitle",B8=v.forwardRef((t,e)=>{const o=t,{__scopeToast:n}=o,s=De(o,["__scopeToast"]);return i.jsx(bn.div,G(N({},s),{ref:e}))});B8.displayName=Gse;var Vse="ToastDescription",zse=v.forwardRef((t,e)=>{const o=t,{__scopeToast:n}=o,s=De(o,["__scopeToast"]);return i.jsx(bn.div,G(N({},s),{ref:e}))});zse.displayName=Vse;var F8="ToastAction",U8=v.forwardRef((t,e)=>{const o=t,{altText:n}=o,s=De(o,["altText"]);return n.trim()?i.jsx($8,{altText:n,asChild:!0,children:i.jsx(Z3,G(N({},s),{ref:e}))}):(console.error("Invalid prop `altText` supplied to `".concat(F8,"`. Expected non-empty `string`.")),null)});U8.displayName=F8;var H8="ToastClose",Z3=v.forwardRef((t,e)=>{const r=t,{__scopeToast:n}=r,s=De(r,["__scopeToast"]),o=Use(H8,n);return i.jsx($8,{asChild:!0,children:i.jsx(bn.button,G(N({type:"button"},s),{ref:e,onClick:Gt(t.onClick,o.onClose)}))})});Z3.displayName=H8;var $8=v.forwardRef((t,e)=>{const r=t,{__scopeToast:n,altText:s}=r,o=De(r,["__scopeToast","altText"]);return i.jsx(bn.div,G(N({"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":s||void 0},o),{ref:e}))});function G8(t){const e=[];return Array.from(t.childNodes).forEach(s=>{if(s.nodeType===s.TEXT_NODE&&s.textContent&&e.push(s.textContent),qse(s)){const o=s.ariaHidden||s.hidden||s.style.display==="none",r=s.dataset.radixToastAnnounceExclude==="";if(!o)if(r){const a=s.dataset.radixToastAnnounceAlt;a&&e.push(a)}else e.push(...G8(s))}}),e}function oh(t,e,n,{discrete:s}){const o=n.originalEvent.currentTarget,r=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&o.addEventListener(t,e,{once:!0}),s?_K(o,r):o.dispatchEvent(r)}var l4=(t,e,n=0)=>{const s=Math.abs(t.x),o=Math.abs(t.y),r=s>o;return e==="left"||e==="right"?r&&s>n:!r&&o>n};function Wse(t=()=>{}){const e=Am(t);li(()=>{let n=0,s=0;return n=window.requestAnimationFrame(()=>s=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(s)}},[e])}function qse(t){return t.nodeType===t.ELEMENT_NODE}function Kse(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const o=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||o?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function vy(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var Yse=P8,Zse=O8,Qse=D8,V8=B8,Jse=U8,z8=Z3;function W8({children:t}){return i.jsxs(Yse,{children:[i.jsx(Qse,{className:"radix-state-closed:animate-hide radix-state-open:animate-slideIn popover bg-token-main-surface-primary grid grid-cols-[auto_max-content] items-center gap-x-4 rounded-lg p-4 shadow-xs [grid-template-areas:_'title_action'_'description_action'] sm:max-w-2xl",open:!0,children:t}),i.jsx(Zse,{className:"fixed end-0 bottom-0 z-50 m-0 flex max-w-[100vw] list-none flex-col gap-4 p-6 outline-hidden"})]})}const bu="compliance",Xse=3600*24*30*6,eoe={serverPrimedAllowBrowserStorageValue:!0,showCookieConsentBanner:!1,isStorageComplianceEnabled:!1,ageVerificationDeadline:null,ageVerificationType:"none"},toe={IT:"countdown",KR:"passive"};function noe(t,e){var a,l,c,u,d,f,m,p;const n=zP(e),s=(a=t.registration_country)!=null?a:"",o=s in VP&&((l=t.age_verification)==null?void 0:l.is_required);if(!n&&!o)return eoe;const r=n&&!!t.require_cookie_consent;return{serverPrimedAllowBrowserStorageValue:r?(u=(c=t.cookie_consent)==null?void 0:c.analytics_cookies_accepted)!=null?u:!1:!0,showCookieConsentBanner:r&&!!((d=t.cookie_consent)!=null&&d.is_required),isStorageComplianceEnabled:r,ageVerificationDeadline:o&&(m=(f=t.age_verification)==null?void 0:f.remaining_seconds)!=null?m:null,ageVerificationType:o&&(p=toe[s])!=null?p:"none"}}const q8=En({queryKey:[bu],queryFn:async()=>{var e;let t;try{t=await ue.safeGet("/compliance")}catch(n){t={registration_country:null,require_cookie_consent:!1,age_verification:{is_required:!1},cookie_consent:{is_required:!1},terms_of_use:{is_required:!1}}}if((e=t.cookie_consent)!=null&&e.is_required){const n=Xs.getBooleanCookie(eo.AllowNonessential),s=t.cookie_consent.analytics_cookies_accepted;if(n===void 0&&s!=null)Xs.setBooleanCookie(eo.AllowNonessential,s,{maxAge:Xse,domain:xK});else if(n!==s&&n!=null){const o={analytics_cookies_accepted:n};return ue.safePost("/compliance/cookie_consent",{authOption:Ot.SendIfAvailable,requestBody:o}),G(N({},t),{cookie_consent:N(N({},t.cookie_consent),o)})}}return t}});function K8({enabled:t,select:e}){return ut(G(N({},q8),{enabled:t,select:e}))}function Y8(){const{country:t}=Rc(),e=t!=null&&t in VP,n=ut(G(N({},q8),{enabled:e,select:s=>noe(s,t)}));return G(N({},n),{isEnabled:e})}function soe(){const t=Nt();return zt({mutationFn:e=>ue.safePost("/compliance/cookie_consent",{requestBody:e}),onSuccess:()=>{t.refetchQueries({queryKey:[bu]})},onMutate:async e=>{await t.cancelQueries({queryKey:[bu]});const n=t.getQueryData([bu]);return t.setQueryData([bu],s=>{var r;if(s===void 0)return;const o=!!((r=s.cookie_consent)!=null&&r.is_required);return G(N({},s),{cookie_consent:N({is_required:o},e)})}),{previousValue:n}},onError:(e,n,s)=>{s!==void 0&&t.setQueryData([bu],s.previousValue)}})}function itt({serverPrimedAllowBrowserStorageValue:t,enabled:e}){const{data:n,isLoading:s}=K8({enabled:e,select:o=>{var r;return((r=o.cookie_consent)==null?void 0:r.analytics_cookies_accepted)===!0}});return s||!e?t:n!=null?n:!1}const ooe=3600*24;function ltt(t,e=!1){return fl()==null||e?"loading":!t||Xs.getCookie(eo.AgeVerification)||t.ageVerificationDeadline==null||t.ageVerificationType==="none"?"hide":"show"}function ctt({onClose:t}){const{data:{ageVerificationType:e,ageVerificationDeadline:n}={}}=Y8();return e==="passive"?i.jsx(roe,{onClose:t}):e==="countdown"&&n!=null?i.jsx(aoe,{onClose:t,ageVerificationDeadline:n}):null}const roe=({onClose:t})=>{const{country:e}=Rc();return v.useEffect(()=>{Ve.addAction("privacy_policy.show_age_verification_modal",{country:e})},[e]),i.jsx(I8,{onClose:t,title:"OpenAI      ",description:i.jsx("div",{className:"whitespace-pre-wrap",children:i.jsxs("p",{children:["ChatGPT  .     , OpenAI  OpenAI       . ChatGPT  ,  18 , 14        .",i.jsx("br",{}),i.jsx("br",{}),"OpenAI  "," ",i.jsx("a",{href:"https://privacy.openai.com/policies?action=ERASURE&modal=log-in",className:"underline",target:"_blank",rel:"noreferrer",children:"    ."})]})}),actionButton:i.jsx(Se,{color:"primary",onClick:async()=>{await ue.safePost("/compliance/age_verification"),t()},children:" OpenAI  "}),cancelButton:i.jsx(Se,{as:"link",color:"secondary",to:"/auth/logout",children:""})})},aoe=({onClose:t,ageVerificationDeadline:e})=>{const n=e!=null?Math.floor(e/60/60/24):0;v.useEffect(()=>{ft.logEvent("chatgpt_compliance_age_verification_seen"),V.logEvent("Compliance Age Verification Seen")},[]);const{country:s}=Rc();return v.useEffect(()=>{Ve.addAction("privacy_policy.show_age_verification_countdown",{country:s})},[s]),i.jsxs(W8,{children:[i.jsx(V8,{className:"text-sm font-semibold [grid-area:_title]",children:i.jsx(P,G(N({},c4.ageVerificationTitle),{values:{deadline:n,learnMoreLink:o=>i.jsx("a",{href:"https://help.openai.com/en/articles/8411987-why-am-i-being-asked-to-verify-my-age",target:"_blank",rel:"noreferrer",className:"cursor-pointer font-normal underline",children:o})}}))}),i.jsx(Jse,{altText:"Dismiss notification",asChild:!0,children:i.jsx(Se,{color:"primary",size:"small",onClick:()=>{ft.logEvent("chatgpt_compliance_age_verification_clicked"),V.logEvent("Compliance Age Verification Clicked"),Xs.setCookie(eo.AgeVerification,"true",{maxAge:ooe,path:"/"}),t(),As.openModal(Nm.AgeVerificationInterstitial)},children:i.jsx(P,N({},c4.startVerification))})}),i.jsx(z8,{})]})},c4=we({ageVerificationTitle:{id:"ageVerificationBanner.title-v1",defaultMessage:"Please verify your age in the next {deadline, plural, =0 {# days} one {# day} other {# days}}. We are required to check if you're old enough to use ChatGPT. <learnMoreLink>Learn more</learnMoreLink>."},dismiss:{id:"ageVerificationBanner.dismiss",defaultMessage:"Dismiss"},startVerification:{id:"ageVerificationBanner.startVerification",defaultMessage:"Start verification"},modalTitle:{id:"ageVerificationModal.title",defaultMessage:"Please confirm you meet our age requirements"},modalDescription:{id:"ageVerificationModal.description.1",defaultMessage:"Thank you for using ChatGPT. To comply with legal requirements in Korea, we need to confirm that youre old enough to use our service. To continue on ChatGPT, please confirm that you are 18+ or are 14+ and have your parent or guardians permission to use ChatGPT. <deleteAccountLink>If you do not meet our age requirements, please delete your account.</deleteAccountLink>"},modalLogout:{id:"ageVerificationModal.logOut",defaultMessage:"Log out"},modalAction:{id:"ageVerificationModal.actionButton",defaultMessage:"I meet OpenAI's age requirements"}}),$o=re(me,"ba3792",16,16),Z8="https://openai.com/policies/cookie-policy/",Ll=we({essentialCookies:{id:"settingsModal.privacy.cookieConsent.essentialCookiesLabel",defaultMessage:"Strictly Necessary Cookies (always active)"},marketingCookies:{id:"settingsModal.privacy.cookieConsent.marketingCookiesLabel",defaultMessage:"Marketing Performance Cookies"},analyticsCookies:{id:"settingsModal.privacy.cookieConsent.analyticsCookiesLabel",defaultMessage:"Analytics Cookies"},cookieConsent:{id:"settingsModal.privacy.cookieConsent.header",defaultMessage:"Cookie Preference Center"}});function Q3(t){const{isUserInPioneerHR:e,userCountry:n}=is();return(!(t!=null&&t.structure)||t.structure!==yK.WORKSPACE)&&zP(n)&&(e!=null?e:!1)}const R0=class R0 extends ml()(()=>({isOpen:!1})){constructor(){super(...arguments);ye(this,"openModal",()=>this.setState(n=>G(N({},n),{isOpen:!0})));ye(this,"closeModal",()=>this.setState(n=>G(N({},n),{isOpen:!1})))}};ye(R0,"useIsOpen",()=>R0.useState(n=>n.isOpen));let fi=R0;function utt(){const t=te(),e=Nt(),n=Et(),{data:s,isLoading:o}=ut(Qi),r=fi.useStore(),a=fi.useIsOpen(),l=Bd(),[c,u]=v.useState(!1),[d,f]=v.useState(!1),[m,p]=v.useState(!1),{mutate:g}=WP({onMutate:_=>{e.setQueryData(Qi.queryKey,x=>x?G(N({},x),{consent_analytics:_.consent_analytics,consent_marketing:_.consent_marketing}):{consent_analytics:_.consent_analytics,consent_marketing:_.consent_marketing,is_consent_required:!0})},onSuccess:(_,x)=>{Ve.addAction("cookie-consent.consent-modal.updated-cookie-consent-backend",{consent_analytics:x.consent_analytics,consent_marketing:x.consent_marketing}),V.logEventWithStatsig("Cookie Preferences Modal Updated Cookie Consent Backend","chatgpt_cookie_prefs_modal_updated_cookie_consent_backend",{consent_analytics:x.consent_analytics,consent_marketing:x.consent_marketing})},onError:(_,x)=>{V.logEventWithStatsig("Cookie Preferences Modal Updated Cookie Consent Backend Error","chatgpt_cookie_prefs_modal_updated_cookie_consent_backend_error",{error:_.message,consent_analytics:x.consent_analytics,consent_marketing:x.consent_marketing})}}),h=Q3(n)&&a;return v.useEffect(()=>{h&&V.logEventWithStatsig("Cookie Preferences Modal Shown","chatgpt_cookie_prefs_modal_shown")},[h]),i.jsx(en,{isOpen:h,testId:"modal-cookie-preferences",onClose:()=>{r.closeModal(),V.logEventWithStatsig("Cookie Preferences Modal Closed","chatgpt_cookie_prefs_modal_closed")},size:"custom",className:"h-[100%] md:max-h-[600px] md:min-h-[600px] md:max-w-[680px]",type:"success",showCloseButton:!0,title:t.formatMessage(Ll.cookieConsent),children:i.jsxs("div",{className:"flex max-h-[calc(100vh-150px)] w-full flex-col gap-3 overflow-y-auto md:min-h-[380px]",children:[i.jsx("p",{className:"text-token-text-secondary text-sm",children:i.jsx(P,{id:"settingsModal.privacy.cookieConsent.description.v2",defaultMessage:"Using websites and apps involves storing and retrieving information from your device, including cookies and other identifiers, which can be shared with third parties, for various activities. We provide a simple tool below allowing you to tailor your choices as you deem fit. You can change your consent at any time. <learnMore>Learn more.</learnMore>",values:{learnMore:_=>i.jsx("a",{href:Z8,target:"_blank",rel:"noreferrer",className:"underline",children:_})}})}),i.jsxs("div",{className:"mt-2 flex flex-col gap-3",children:[i.jsx(hr,{children:l?i.jsx(Wi,{label:t.formatMessage(Ll.essentialCookies),disabled:!0,enabled:!0,onChange:()=>{},description:i.jsx("p",{children:i.jsx(P,{id:"settingsModal.privacy.cookieConsent.essentialCookiesDescription",defaultMessage:"These cookies are essential for the site to function and cannot be toggled off. They assist with security, user authentication, customer support, etc."})})}):i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Kh,{id:"essential-cb",checked:!0,disabled:!0}),i.jsxs("div",{className:"flex w-full flex-col",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{children:t.formatMessage(Ll.essentialCookies)}),i.jsx("button",{onClick:()=>u(!c),children:c?i.jsx(zi,{className:"icon-sm"}):i.jsx($o,{className:"icon-sm"})})]}),c&&i.jsx("p",{className:"text-token-text-secondary text-xs",children:i.jsx(P,{id:"settingsModal.privacy.cookieConsent.essentialCookiesDescription",defaultMessage:"These cookies are essential for the site to function and cannot be toggled off. They assist with security, user authentication, customer support, etc."})})]})]})}),i.jsx(hr,{children:l?i.jsx(Wi,{label:t.formatMessage(Ll.analyticsCookies),enabled:!!(s!=null&&s.consent_analytics),disabled:o,onChange:_=>{var x;V.logEventWithStatsig("Cookie Preferences Modal Analytics Cookies Toggle Clicked","chatgpt_cookie_prefs_modal_analytics_cookies_toggle_clicked",{enabled:_}),g({consent_analytics:_,consent_marketing:(x=s==null?void 0:s.consent_marketing)!=null?x:!1})},description:i.jsx("p",{children:i.jsx(P,{id:"settingsModal.privacy.cookieConsent.analyticsCookiesDescription",defaultMessage:"These cookies help us understand how visitors interact with our site. They allow us to measure traffic and improve site performance."})})}):i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Kh,{id:"analytics-cb",checked:!!(s!=null&&s.consent_analytics),disabled:o,onChange:_=>{var b;const x=_.target.checked;V.logEventWithStatsig("Cookie Preferences Modal Analytics Cookies Toggle Clicked","chatgpt_cookie_prefs_modal_analytics_cookies_toggle_clicked",{enabled:x}),g({consent_analytics:x,consent_marketing:(b=s==null?void 0:s.consent_marketing)!=null?b:!1})}}),i.jsxs("div",{className:"flex w-full flex-col",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{children:t.formatMessage(Ll.analyticsCookies)}),i.jsx("button",{onClick:()=>f(!d),children:d?i.jsx(zi,{className:"icon-sm"}):i.jsx($o,{className:"icon-sm"})})]}),d&&i.jsx("p",{className:"text-token-text-secondary text-xs",children:i.jsx(P,{id:"settingsModal.privacy.cookieConsent.analyticsCookiesDescription",defaultMessage:"These cookies help us understand how visitors interact with our site. They allow us to measure traffic and improve site performance."})})]})]})}),i.jsx(hr,{children:l?i.jsx(Wi,{label:t.formatMessage(Ll.marketingCookies),enabled:!!(s!=null&&s.consent_marketing),disabled:o,onChange:_=>{var x;V.logEventWithStatsig("Cookie Preferences Modal Marketing Cookies Toggle Clicked","chatgpt_cookie_prefs_modal_marketing_cookies_toggle_clicked",{enabled:_}),g({consent_marketing:_,consent_analytics:(x=s==null?void 0:s.consent_analytics)!=null?x:!1})},description:i.jsx("p",{children:i.jsx(P,{id:"settingsModal.privacy.cookieConsent.marketingCookiesDescription",defaultMessage:"These cookies help us measure the effectiveness of our marketing campaigns."})})}):i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Kh,{id:"marketing-cb",checked:!!(s!=null&&s.consent_marketing),disabled:o,onChange:_=>{var b;const x=_.target.checked;V.logEventWithStatsig("Cookie Preferences Modal Marketing Cookies Toggle Clicked","chatgpt_cookie_prefs_modal_marketing_cookies_toggle_clicked",{enabled:x}),g({consent_marketing:x,consent_analytics:(b=s==null?void 0:s.consent_analytics)!=null?b:!1})}}),i.jsxs("div",{className:"flex w-full flex-col",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{children:t.formatMessage(Ll.marketingCookies)}),i.jsx("button",{onClick:()=>p(!m),children:m?i.jsx(zi,{className:"icon-sm"}):i.jsx($o,{className:"icon-sm"})})]}),m&&i.jsx("p",{className:"text-token-text-secondary text-xs",children:i.jsx(P,{id:"settingsModal.privacy.cookieConsent.marketingCookiesDescription",defaultMessage:"These cookies help us measure the effectiveness of our marketing campaigns."})})]})]})})]})]})})}function ioe(){const t=v.createContext(null);function e({children:o}){const r=v.use(t),a=v.useState(null);return i.jsx(t.Provider,{value:r!=null?r:a,children:o})}function n({children:o}){const[,r]=cd(v.use(t),"Outlet must appear within Root");return o?v.cloneElement(o,{ref:r}):i.jsx("div",{ref:r})}function s({children:o}){const[r]=cd(v.use(t),"Content must appear within Root");return r?Xa.createPortal(o,r):null}return{Root:e,Outlet:n,Content:s}}function loe(t){return Object.fromEntries(t.map(n=>{const s=({children:o})=>o;return s.displayName=n,s.slotName=n,[n,s]}))}function coe(t,e){const n={};return v.Children.forEach(e,s=>{const o=uoe(s)&&Object.prototype.hasOwnProperty.call(t,s.type.slotName)?s.type.slotName:"rest";Array.isArray(n[o])?n[o].push(s):n[o]=[s]}),n}function uoe(t){return v.isValidElement(t)&&typeof t.type=="function"&&typeof t.type.slotName=="string"}function xl(t){"use forget";const e=D.c(26),{className:n,children:s}=t;let o;e[0]!==s?(o=coe(sf,s),e[0]=s,e[1]=o):o=e[1];const{Navbar:r,LeftContentSidebar:a,ContentSidebar:l,Header:c,Heading:u,rest:d}=o;let f;e[2]!==n?(f=q("flex h-svh w-screen flex-col",n),e[2]=n,e[3]=f):f=e[3];let m;e[4]===Symbol.for("react.memo_cache_sentinel")?(m=q("@container/main relative flex min-w-0 flex-1 flex-col","-translate-y-[calc(env(safe-area-inset-bottom,0px)/2)] pt-[calc(env(safe-area-inset-bottom,0px)/2)]"),e[4]=m):m=e[4];let p;e[5]===Symbol.for("react.memo_cache_sentinel")?(p=qP()&&i.jsx("div",{className:"sticky top-0 h-px"}),e[5]=p):p=e[5];let g;e[6]===Symbol.for("react.memo_cache_sentinel")?(g=q("@w-sm/main:[scrollbar-gutter:stable_both-edges] touch:[scrollbar-width:none] relative flex min-h-0 min-w-0 flex-1 flex-col [scrollbar-gutter:stable] not-print:overflow-x-clip not-print:overflow-y-auto","scroll-pt-(--header-height)","[--sticky-padding-top:var(--header-height)]","has-data-[fixed-header=less-than-xl]:@w-xl/main:scroll-pt-0","has-data-[fixed-header=less-than-xl]:@w-xl/main:[--sticky-padding-top:0px]","has-data-[fixed-header=less-than-xxl]:@w-2xl/main:scroll-pt-0","has-data-[fixed-header=less-than-xxl]:@w-2xl/main:[--sticky-padding-top:0px]"),e[6]=g):g=e[6];let h;e[7]!==d?(h=i.jsx("main",{className:"min-h-0 flex-1",id:"main","z-index":"-1",children:d}),e[7]=d,e[8]=h):h=e[8];let _;e[9]!==c||e[10]!==h?(_=i.jsxs("div",{"data-scroll-root":!0,className:g,children:[c,h]}),e[9]=c,e[10]=h,e[11]=_):_=e[11];let x;e[12]!==u||e[13]!==_?(x=i.jsxs("div",{className:m,children:[u,p,_]}),e[12]=u,e[13]=_,e[14]=x):x=e[14];let b;e[15]!==a||e[16]!==r||e[17]!==x?(b=i.jsxs("div",{className:"relative flex min-h-0 w-full flex-1",children:[r,a,x]}),e[15]=a,e[16]=r,e[17]=x,e[18]=b):b=e[18];let y;e[19]!==l||e[20]!==b?(y=i.jsxs("div",{className:"relative z-0 flex min-h-0 w-full flex-1",children:[b,l]}),e[19]=l,e[20]=b,e[21]=y):y=e[21];let S;e[22]===Symbol.for("react.memo_cache_sentinel")?(S=i.jsx(J3.Outlet,{}),e[22]=S):S=e[22];let C;return e[23]!==y||e[24]!==f?(C=i.jsx(Q8,{children:i.jsxs("div",{className:f,suppressHydrationWarning:!0,"data-sr-block":void 0,children:[y,S]})}),e[23]=y,e[24]=f,e[25]=C):C=e[25],C}function Q8(t){"use forget";const e=D.c(2),{children:n}=t;let s;return e[0]!==n?(s=i.jsx(J3.Root,{children:n}),e[0]=n,e[1]=s):s=e[1],s}xl.Context=Q8;const sf=loe(["ContentSidebar","LeftContentSidebar","Navbar","Header","Heading"]);xl.ContentSidebar=sf.ContentSidebar;xl.LeftContentSidebar=sf.LeftContentSidebar;xl.Navbar=sf.Navbar;xl.Header=sf.Header;xl.Heading=sf.Heading;const J3=ioe();xl.FooterBanner=J3.Content;function C_(t,e){return t.map(n=>n.loaderData&&typeof n.loaderData=="object"&&"pageType"in n.loaderData&&typeof n.loaderData.pageType=="string"?n.loaderData.pageType:null).some(n=>n===e)}function Sy(t){"use forget";const e=D.c(7),{onClick:n,children:s}=t,o=Je("2118136551"),r=Ko(),a=o.get("show_cookie_banner_improvements",!1),l=a?"secondary":void 0,c=a?"text-sm":"bg-gray-950/5 text-sm text-black hover:bg-gray-800/10 dark:bg-gray-50/5 hover:dark:bg-gray-100/10",u=r?"medium":void 0,d=r?"secondary":l,f=r?"mb-2 sm:mb-3":c;let m;return e[0]!==s||e[1]!==r||e[2]!==n||e[3]!==u||e[4]!==d||e[5]!==f?(m=i.jsx(Se,{as:"button",size:u,color:d,fullWidth:r,className:f,onClick:n,children:s}),e[0]=s,e[1]=r,e[2]=n,e[3]=u,e[4]=d,e[5]=f,e[6]=m):m=e[6],m}function dtt(t){"use forget";const e=D.c(5),{onClose:n}=t,s=L0();let o;e[0]!==s?(o=C_(s,"images-app"),e[0]=s,e[1]=o):o=e[1];const r=o;let a;return e[2]!==r||e[3]!==n?(a=i.jsx(xl.FooterBanner,{children:i.jsx(J8,{onClose:n,fixed:r})}),e[2]=r,e[3]=n,e[4]=a):a=e[4],a}function ftt(t){"use forget";const e=D.c(3),{fixed:n}=t,s=n===void 0?!1:n,o=X(doe);let r;return e[0]!==s||e[1]!==o?(r=o&&i.jsx(J8,{fixed:s}),e[0]=s,e[1]=o,e[2]=r):r=e[2],r}function doe(){return bK()}function J8(t){"use forget";const e=D.c(13),{onClose:n,fixed:s}=t,{mutate:o}=WP();let r;e[0]===Symbol.for("react.memo_cache_sentinel")?(r=[],e[0]=r):r=e[0],v.useEffect(foe,r);const l=Ko()?hoe:poe;let c,u;e[1]!==n||e[2]!==o?(c=()=>{o({consent_analytics:!0,consent_marketing:!0}),ty(),n==null||n(),V.logEventWithStatsig("Cookie Consent Banner Accepted","chatgpt_cookie_consent_banner_accepted")},u=()=>{o({consent_analytics:!1,consent_marketing:!1}),ty(),n==null||n(),V.logEventWithStatsig("Cookie Consent Banner Rejected","chatgpt_cookie_consent_banner_rejected")},e[1]=n,e[2]=o,e[3]=c,e[4]=u):(c=e[3],u=e[4]);let d;e[5]!==n?(d=()=>{ty(!0),n==null||n(),V.logEventWithStatsig("Cookie Consent Banner Ignored","chatgpt_cookie_consent_banner_ignored")},e[5]=n,e[6]=d):d=e[6];let f;return e[7]!==l||e[8]!==s||e[9]!==c||e[10]!==u||e[11]!==d?(f=i.jsx(l,{fixed:s,onAccept:c,onReject:u,onIgnore:d}),e[7]=l,e[8]=s,e[9]=c,e[10]=u,e[11]=d,e[12]=f):f=e[12],f}function foe(){V.logEventWithStatsig("Cookie Consent Banner Shown","chatgpt_cookie_consent_banner_shown")}function X8(){"use forget";const t=D.c(1);let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=i.jsx(P,{id:"cookie-consent-banner.title",defaultMessage:"We use cookies"}),t[0]=e):e=t[0],e}function eO(){"use forget";const t=D.c(2),e=fi.useStore();let n;return t[0]!==e?(n=i.jsx(P,{id:"cookie-consent-banner.description.v2",defaultMessage:"We use cookies to help this site function, understand service usage, and support marketing efforts. Visit <manageCookiesLink>Manage Cookies</manageCookiesLink> to change preferences anytime. View our <cookiePolicyLink>Cookie Policy</cookiePolicyLink> for more info.",values:{cookiePolicyLink:moe,manageCookiesLink:s=>i.jsx("a",{onClick:o=>{o.preventDefault(),e.openModal()},className:"cursor-pointer underline underline-offset-2",children:s},1)}}),t[0]=e,t[1]=n):n=t[1],n}function moe(t){return i.jsx("a",{className:"underline underline-offset-2",href:Z8,target:"_blank",rel:"noreferrer",children:t},0)}function tO(){"use forget";const t=D.c(1);let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=i.jsx(P,{id:"cookie-consent-banner.reject",defaultMessage:"Reject non-essential"}),t[0]=e):e=t[0],e}function nO(){"use forget";const t=D.c(1);let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=i.jsx(P,{id:"cookie-consent-banner.accept",defaultMessage:"Accept all"}),t[0]=e):e=t[0],e}function sO(){"use forget";const t=D.c(1);let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=i.jsx(P,{id:"cookie-consent-banner.manage-cookies",defaultMessage:"Manage Cookies"}),t[0]=e):e=t[0],e}function poe(t){"use forget";const e=D.c(26),n=fi.useStore(),s=_s(goe),o=t.fixed&&"fixed inset-x-0 bottom-0";let r;e[0]!==o?(r=q(o,"z-[100] w-full max-w-full overflow-hidden","bg-token-bg-tertiary border-token-border-heavy flex flex-col gap-2 border-t p-4 pb-6"),e[0]=o,e[1]=r):r=e[1];let a;e[2]===Symbol.for("react.memo_cache_sentinel")?(a=i.jsx("h1",{className:"text-base",children:i.jsx(X8,{})}),e[2]=a):a=e[2];let l;e[3]!==t.onIgnore?(l=i.jsxs("div",{className:"flex items-center justify-between",children:[a,i.jsx(Wn,{onClick:t.onIgnore,className:"text-token-text-tertiary -m-2"})]}),e[3]=t.onIgnore,e[4]=l):l=e[4];let c;e[5]===Symbol.for("react.memo_cache_sentinel")?(c=i.jsx("p",{className:"text-token-text-secondary max-w-2xl flex-1 text-sm text-balance md:min-w-md",children:i.jsx(eO,{})}),e[5]=c):c=e[5];let u;e[6]!==n?(u=()=>n.openModal(),e[6]=n,e[7]=u):u=e[7];let d;e[8]===Symbol.for("react.memo_cache_sentinel")?(d=i.jsx(sO,{}),e[8]=d):d=e[8];let f;e[9]!==u?(f=i.jsx(Se,{as:"button",color:"secondary",onClick:u,children:d}),e[9]=u,e[10]=f):f=e[10];let m;e[11]===Symbol.for("react.memo_cache_sentinel")?(m=i.jsx(tO,{}),e[11]=m):m=e[11];let p;e[12]!==t.onReject?(p=i.jsx(Se,{as:"button",color:"secondary",onClick:t.onReject,children:m}),e[12]=t.onReject,e[13]=p):p=e[13];let g;e[14]===Symbol.for("react.memo_cache_sentinel")?(g=i.jsx(nO,{}),e[14]=g):g=e[14];let h;e[15]!==s||e[16]!==t.onAccept?(h=i.jsx(Se,{as:"button",onClick:t.onAccept,ref:s,children:g}),e[15]=s,e[16]=t.onAccept,e[17]=h):h=e[17];let _;e[18]!==h||e[19]!==f||e[20]!==p?(_=i.jsxs("div",{className:"flex flex-col flex-wrap items-start justify-between gap-4 md:flex-row md:items-center",children:[c,i.jsxs("div",{className:"flex flex-row flex-wrap justify-end gap-2",children:[f,p,h]})]}),e[18]=h,e[19]=f,e[20]=p,e[21]=_):_=e[21];let x;return e[22]!==r||e[23]!==_||e[24]!==l?(x=i.jsxs("div",{role:"dialog","aria-modal":"true","aria-live":"polite",className:r,children:[l,_]}),e[22]=r,e[23]=_,e[24]=l,e[25]=x):x=e[25],x}function goe(t){return t==null?void 0:t.focus()}function hoe(t){"use forget";var y;const e=D.c(23),n=Je("2118136551"),s=fi.useStore(),o=n.get("show_cookie_banner_improvements",!1),r=_oe,a=o&&(y=t.onIgnore)!=null?y:r;let l;e[0]!==t?(l=i.jsx("div",{className:"flex w-full justify-end",children:i.jsx(Wn,{onClick:()=>{var S;return(S=t.onIgnore)==null?void 0:S.call(t)}})}),e[0]=t,e[1]=l):l=e[1];let c;e[2]===Symbol.for("react.memo_cache_sentinel")?(c=i.jsx("p",{className:"mb-2 text-center text-xl font-semibold",children:i.jsx(X8,{})}),e[2]=c):c=e[2];let u;e[3]===Symbol.for("react.memo_cache_sentinel")?(u=i.jsx("p",{className:"text-token-text-secondary mb-6 text-center text-sm",children:i.jsx(eO,{})}),e[3]=u):u=e[3];let d;e[4]!==s?(d=()=>s.openModal(),e[4]=s,e[5]=d):d=e[5];let f;e[6]===Symbol.for("react.memo_cache_sentinel")?(f=i.jsx(sO,{}),e[6]=f):f=e[6];let m;e[7]!==d?(m=i.jsx(Sy,{onClick:d,children:f}),e[7]=d,e[8]=m):m=e[8];let p;e[9]===Symbol.for("react.memo_cache_sentinel")?(p=i.jsx(nO,{}),e[9]=p):p=e[9];let g;e[10]!==t.onAccept?(g=i.jsx(Sy,{onClick:t.onAccept,children:p}),e[10]=t.onAccept,e[11]=g):g=e[11];let h;e[12]===Symbol.for("react.memo_cache_sentinel")?(h=i.jsx(tO,{}),e[12]=h):h=e[12];let _;e[13]!==t.onReject?(_=i.jsx(Sy,{onClick:t.onReject,children:h}),e[13]=t.onReject,e[14]=_):_=e[14];let x;e[15]!==l||e[16]!==m||e[17]!==g||e[18]!==_?(x=i.jsxs("div",{className:"flex flex-col items-center justify-center px-5 pt-4 pb-8 sm:p-10",children:[l,c,u,m,g,_]}),e[15]=l,e[16]=m,e[17]=g,e[18]=_,e[19]=x):x=e[19];let b;return e[20]!==a||e[21]!==x?(b=i.jsx(en,{testId:"modal-cookie-consent-banner-mobile",isOpen:!0,onClose:a,noPadding:!0,type:"success",size:"custom",className:"max-w-[373px] sm:max-w-[400px]",position:"bottom",shouldIgnoreClickOutside:!o,children:x}),e[20]=a,e[21]=x,e[22]=b):b=e[22],b}function _oe(){}function X3(){"use forget";const t=D.c(12),{hash:e}=jn(),n=bt();let s,o;t[0]!==n?(s=(c,u)=>{n(Fd(c,u))},o=()=>{n({hash:""})},t[0]=n,t[1]=s,t[2]=o):(s=t[1],o=t[2]);let r;t[3]!==e?(r=vK(e),t[3]=e,t[4]=r):r=t[4];let a;t[5]!==e?(a=SK(e),t[5]=e,t[6]=a):a=t[6];let l;return t[7]!==s||t[8]!==o||t[9]!==r||t[10]!==a?(l={openSettings:s,closeSettings:o,isOpen:r,currentTab:a},t[7]=s,t[8]=o,t[9]=r,t[10]=a,t[11]=l):l=t[11],l}const mtt=En({queryKey:["clientApplications"],queryFn:()=>ue.safeGet("/client_applications")});function ptt(){const t=Dt();return zt({mutationFn:e=>ue.safeDelete("/client_applications/{client_id}",{parameters:{path:{client_id:e}}}),onSuccess:()=>{window.location.reload()},onError:e=>{Ve.addError("Failed to revoke client application",{error:e}),t.danger("Failed to disconnect. Please try again later.",{toastId:"revoke_client_application"})}})}function gtt({onClose:t}){const e=te(),n=Dt(),{openSettings:s}=X3(),o=soe(),{session:r}=Ud(),{data:{isStorageComplianceEnabled:a}={}}=Y8(),{data:l,isLoading:c}=K8({enabled:!!(a&&r),select:u=>{var d;return!((d=u.cookie_consent)!=null&&d.is_required)}});return v.useEffect(()=>{l===!0&&t()},[l,t]),c?null:i.jsx(xoe,{onReject:()=>{o.mutateAsync({analytics_cookies_accepted:!1},{onSuccess(){n.success(e.formatMessage(Eu.updateSuccess))},onError(){n.danger(Eu.updateFailure,{toastId:"cookie_consent_banner"})}}),t()},onAccept:()=>{o.mutateAsync({analytics_cookies_accepted:!0},{onSuccess(){n.success(e.formatMessage(Eu.updateSuccess))},onError(){n.danger(Eu.updateFailure,{toastId:"cookie_consent_banner"})}}),t()},children:i.jsx(P,{id:"CookieConsentBanner.authedDescription.0",defaultMessage:"We use cookies and similar technologies to deliver, maintain, improve our services and for security purposes. Check our <cookiePolicy>cookie policy</cookiePolicy> for details. Click 'Accept all' to let OpenAI and partners use cookies for these purposes. Click 'Reject all' to say no to cookies, except those that are strictly necessary. Choose <manageLink>manage cookies</manageLink> to change your preferences.",values:{cookiePolicy:u=>i.jsx(Hd,{href:"https://openai.com/policies/cookie-policy",openNewTab:!0,children:u}),manageLink:u=>i.jsx(yoe,{onClick:()=>{s(Ts.DataControls)},children:u})}})})}function xoe({children:t,onAccept:e,onReject:n}){return v.useEffect(()=>{Ve.addAction("privacy_policy.show_cookie_consent_banner")},[]),i.jsxs(W8,{children:[i.jsxs(V8,{className:"text-sm font-semibold [grid-area:_title]",children:[t,i.jsxs("div",{className:"mt-2 flex justify-end gap-3",children:[i.jsx(Se,{color:"secondary",size:"small",onClick:n,children:i.jsx(P,N({},Eu.reject))}),i.jsx(Se,{color:"secondary",size:"small",onClick:e,children:i.jsx(P,N({},Eu.accept))})]})]}),i.jsx(z8,{})]})}var Fj;const yoe=Tt.button(Fj||(Fj=_t(["underline font-normal text-green-600"]))),Eu=we({cookieConsentBannerTitle:{id:"CookieConsentBanner.title",defaultMessage:"We use cookies to provide, improve, and protect our services. Visit our <privacyPolicyLink>privacy policy</privacyPolicyLink> to learn more. You can manage your cookie preferences in your <settingsPanel>settings panel</settingsPanel>. <learnMoreLink>Learn more</learnMoreLink>."},reject:{id:"CookieConsentBanner.reject",defaultMessage:"Reject all"},accept:{id:"CookieConsentBanner.accept",defaultMessage:"Accept all"},updateSuccess:{id:"CookieConsentBanner.updateSuccess",defaultMessage:"Your cookie preferences were updated successfully"},updateFailure:{id:"CookieConsentBanner.updateFailure",defaultMessage:"Unable to update cookie preferences. Try again later."}}),boe=yt(()=>{var t,e;return(e=(t=kC())==null?void 0:t.includes(Qs.Sunshine))!=null?e:!1});function Fp(){"use forget";return X(boe)}function yl(){"use forget";const{data:t}=bo(Ft.Sunshine),e=Fp();return!!t&&e}function oO(){return xe("507055138")}function ew(){const t=oO(),e=xe("1946731762");return t&&e}function voe(){"use forget";const t=D.c(1);let e;t[0]===Symbol.for("react.memo_cache_sentinel")?(e=ew(),t[0]=e):e=t[0];const n=e,{data:s,isLoading:o}=bo(Ft.GoldenHour);return n&&!o&&s!==void 0}function Soe(){"use forget";const t=D.c(1);let e;t[0]===Symbol.for("react.memo_cache_sentinel")?(e=ew(),t[0]=e):e=t[0];const n=e,{data:s}=bo(Ft.GoldenHour);return!!s&&n}const Coe=yt(()=>{var t,e;return(e=(t=kC())==null?void 0:t.includes(Qs.Moonshine))!=null?e:!1});function w_(){"use forget";return X(Coe)}function htt(){"use forget";const t=w_(),{data:e}=bo(Ft.Moonshine);return t&&!!e}const woe=yt(()=>{var t,e;return(e=(t=kC())==null?void 0:t.includes(Qs.MemoryInSearch))!=null?e:!1});function koe(){"use forget";return X(woe)}function _tt(){"use forget";const t=yl(),{data:e}=bo(Ft.MemoryInSearch),n=koe();return t&&!!e&&n}function xtt(){"use forget";var o;const t=D.c(1);let e;t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(o=xe("645560164"))!=null?o:!1,t[0]=e):e=t[0];const n=e;return yl()&&n}const ytt=()=>xe("667937038");function Eoe(){var t;return(t=xe("1611573287"))!=null?t:!1}function k_(){"use forget";const t=D.c(1),e=yl();let n;return t[0]===Symbol.for("react.memo_cache_sentinel")?(n=Eoe(),t[0]=n):n=t[0],e&&n}const Toe="https://persistent.oaistatic.com/golden_hour/golden_hour_nux_light.jpg",Moe="https://persistent.oaistatic.com/golden_hour/golden_hour_nux_light.jpg";function btt(){const t=ew(),{eligible:e,isLoading:n}=Ct(We.hasSeenGoldenHourNuxV2);return X(ln)||!t?"hide":n?"loading":e?"show":"hide"}function Aoe(){const[t,e]=v.useState(!1);return v.useEffect(()=>{const n=setTimeout(()=>e(!0),1e3);return()=>clearTimeout(n)},[]),i.jsx("div",{"aria-hidden":!0,className:"relative box-content h-6 w-10 shrink-0 rounded-full p-[2px] ".concat(t?"bg-blue-400":"bg-gray-200 dark:bg-gray-600"),children:i.jsx(wt.div,{className:"absolute top-1/2 h-[21px] w-[21px] -translate-y-1/2 rounded-full bg-white shadow",animate:{x:t?17:1.5},transition:{type:"spring",stiffness:350,damping:25}})})}function vtt({onClose:t}){const n=Yo()?Moe:Toe,[s,o]=v.useState(!1);v.useEffect(()=>{const d=new Image;d.src=n,d.onload=()=>o(!0)},[n]);const[r,a]=v.useState(!1);v.useEffect(()=>{s&&(r||(kt(We.hasSeenGoldenHourNuxV2),a(!0),V.logEventWithStatsig("ChatGPT Golden Hour Nux Modal Shown","chatgpt_golden_hour_nux_modal_shown"),Fe.count(Ue.GOLDEN_HOUR,"chatgpt_golden_hour_nux_modal_shown"),V.logUpsellOrModalEvent(qn,{eventId:"golden_hour_nux_modal_shown",type:Kn.UPSELL_OR_MODAL_TYPE_CUSTOM_NUX_MODAL})))},[r,s]);const l=we({optm:{id:"GoldenHourNux.optm",defaultMessage:"Automatically manage"},title:{id:"GoldenHourNux.title",defaultMessage:'Say goodbye to "Memory full"'},subtitle:{id:"GoldenHourNux.subtitle",defaultMessage:"ChatGPT now manages saved memories automatically  so it wont fill up and stays focused on what matters."},learnMoreButton:{id:"GoldenHourNux.learnMoreButton",defaultMessage:"Learn more"},gotItButton:{id:"GoldenHourNux.gotItButton",defaultMessage:"Got it"}}),c="https://help.openai.com/en/articles/8590148-memory-faq#h_f78fa25e47",u=()=>{window.open(c,"_blank","noopener noreferrer"),V.logEventWithStatsig("ChatGPT Golden Hour Nux Modal Learn More Clicked","chatgpt_golden_hour_nux_modal_learn_more_clicked"),Fe.count(Ue.GOLDEN_HOUR,"chatgpt_golden_hour_nux_modal_learn_more_clicked")};return s?i.jsxs(en,{testId:"modal-golden-hour-nux",isOpen:!0,noPadding:!0,onClose:()=>{t(),V.logEventWithStatsig("ChatGPT Golden Hour Nux Modal Closed","chatgpt_golden_hour_nux_modal_closed"),Fe.count(Ue.GOLDEN_HOUR,"chatgpt_golden_hour_nux_modal_closed")},showCloseButton:!1,size:"custom",type:"success",className:"relative flex max-w-[480px] flex-col",children:[i.jsx("div",{className:"absolute end-4 top-4 z-50",children:i.jsx(Wn,{className:"text-token-text-secondary ring-0! outline-0! hover:bg-transparent focus:ring-0! focus:ring-offset-0! focus:outline-0! dark:hover:bg-transparent",onClick:t})}),i.jsxs("div",{className:"relative flex flex-1 overflow-x-clip",children:[i.jsx("img",{src:n,className:"h-[213px] w-full object-cover object-bottom",alt:""}),i.jsx("div",{className:"pointer-events-none absolute inset-0 flex w-full items-center justify-center",children:i.jsx("div",{className:"pointer-events-auto",children:i.jsx("div",{className:"inline-flex w-full rounded-[40px] bg-white/40 p-1 shadow-[0_0_84px_0_rgba(0,105,209,0.5)] backdrop-blur-[2px] dark:bg-black/60",children:i.jsx("div",{className:"bg-token-bg-secondary flex max-w-full items-center justify-end gap-[10px] overflow-hidden rounded-[38px] bg-white py-2.5 ps-4.5 pe-3 dark:bg-[#101010]",children:i.jsxs("div",{className:"flex w-full items-center gap-3",children:[i.jsx("div",{className:"text-token-text-primary flex min-w-0 flex-1 items-center gap-[9px] truncate text-[21px] leading-[30px] tracking-[-0.27px]",children:i.jsx(P,N({},l.optm))}),i.jsx("div",{className:"text-token-text-primary flex shrink-0 items-center gap-[18px]",children:i.jsx(Aoe,{})})]})})})})})]}),i.jsxs("div",{className:"flex flex-1 flex-col gap-2 px-8 pt-8 pb-8",children:[i.jsx("div",{className:"text-[22px] leading-7 font-medium",children:i.jsx(P,N({},l.title))}),i.jsx("div",{className:"text-token-text-secondary",children:i.jsx(P,N({},l.subtitle))}),i.jsxs("div",{className:"mt-4 flex w-full items-center justify-end gap-3",children:[i.jsx(Se,{color:"secondary",onClick:u,children:i.jsx(P,N({},l.learnMoreButton))}),i.jsx(Se,{color:"primary",onClick:t,children:i.jsx(P,N({},l.gotItButton))})]})]})]}):null}class Noe{constructor(e,n){ye(this,"store",[]);this.compare=e,this.maxSize=n}push(e){const n=this.store;n.length<this.maxSize?(n.push(e),Ioe(this.store,this.compare)):this.compare(e,n[0])>0&&(n[0]=e,u4(this.store,this.compare))}pop(){const e=this.store,n=e[0],s=e.pop();return e.length>0&&(e[0]=s,u4(this.store,this.compare)),n}toArray(e){const n=this.store.length,s=new Array(n);for(let o=n-1;o>=0;o--){const r=this.pop();s[o]=e?e(r):r}return s}}function Ioe(t,e){let n=t.length-1;for(;n>0;){const s=Math.floor((n-1)/2);if(e(t[s],t[n])<=0)break;[t[s],t[n]]=[t[n],t[s]],n=s}}function u4(t,e){let n=0;for(let s=1;s<t.length;s=n*2+1){const o=s+1,r=o<t.length&&e(t[o],t[s])<0?o:s;if(e(t[n],t[r])<=0)break;[t[n],t[r]]=[t[r],t[n]],n=r}}function Stt(t,e,n,{locale:s,maxResults:o=50}={}){const r=e.toLocaleLowerCase();if(!r)return t;const a=new Noe((l,c)=>l.score-c.score,o);for(let l=0;l<t.length;l++){const{targets:c,weight:u=1}=n(t[l]);let d=0;for(let f=0;f<c.length;f++){const m=c[f];if(m){const p=m.toLowerCase(),g=joe(p,r,s);g>d&&(d=g)}}d>0&&a.push({value:t[l],score:d*u})}return a.toArray(l=>l.value)}function joe(t,e,n){if(e.length===0||e.length>t.length||!t.includes(e[0])||e.length>1&&!t.includes(e[e.length-1]))return 0;const s=[];for(let c=0,u=0;c<t.length&&u<e.length;c++)t.charCodeAt(c)===e.charCodeAt(u)&&(s.push(c),u++);if(s.length!==e.length)return 0;for(let c=s.length-2;c>=0;c--){const u=s[c+1]-1;s[c]<u&&t.charCodeAt(u)===e.charCodeAt(c)&&(s[c]=u)}const o=s[0];let r=0,a=0,l=d4(t,s[0],n)?1:0;for(let c=1;c<s.length;c++){const u=s[c]-s[c-1];u===1?r++:(a+=u-1,l+=d4(t,s[c],n)?1:0)}return Poe*s.length+Roe*r+Ooe*(o===0?1:0)+Loe*l+Doe*a+Boe*o}const Poe=5,Roe=10,Ooe=5,Loe=15,Doe=-5,Boe=-.2;function d4(t,e,n){var s;if(typeof Intl.Segmenter=="function"){const o=new Intl.Segmenter(n,{granularity:"word"}).segment(t);if(typeof o.containing=="function"){const r=o.containing(e);if(!r)return!1;const a=(s=r.segment)==null?void 0:s[e-r.index-1];return r.isWordLike===!0&&(r.index===e||a==="_")}}return!1}const Foe=t=>t!=null,Uoe=t=>["getApp",t].filter(Foe),Hoe=async t=>await ue.safeGet("/connectors/directory/{app_id}",{parameters:{path:{app_id:t}},authOption:Ot.SendIfAvailable}),Ctt=(t,e)=>{"use forget";const n=D.c(8),s=e===void 0?!0:e;let o;n[0]!==t?(o=Uoe(t),n[0]=t,n[1]=o):o=n[1];let r;n[2]!==t?(r=async()=>t?await Hoe(t):null,n[2]=t,n[3]=r):r=n[3];const a=!!t&&s;let l;return n[4]!==o||n[5]!==r||n[6]!==a?(l={queryKey:o,queryFn:r,enabled:a},n[4]=o,n[5]=r,n[6]=a,n[7]=l):l=n[7],ut(l)},$oe=()=>{"use forget";const t=D.c(2);let e;t[0]===Symbol.for("react.memo_cache_sentinel")?(e=Oc(),t[0]=e):e=t[0];const n=e;let s;return t[1]===Symbol.for("react.memo_cache_sentinel")?(s=()=>KP(n,{fetchValidLinksOnly:!0,productSku:An.CONNECTOR_SETTING}),t[1]=s):s=t[1],X(s)},Goe=t=>["connector",t],Voe=async t=>await ue.safeGet("/aip/connectors/{connector_id}",{parameters:{path:{connector_id:t},query:{include_logo:!1,include_actions:!1}}}),zoe=t=>{"use forget";const e=D.c(8),n=t!=null?t:"";let s;e[0]!==n?(s=Goe(n),e[0]=n,e[1]=s):s=e[1];let o;e[2]!==t?(o=async()=>await Voe(t!=null?t:""),e[2]=t,e[3]=o):o=e[3];const r=!!t;let a;return e[4]!==s||e[5]!==o||e[6]!==r?(a={queryKey:s,queryFn:o,enabled:r},e[4]=s,e[5]=o,e[6]=r,e[7]=a):a=e[7],ut(a)},Woe=new Set([wK,Xb,kK]),wtt=new Set(["connector_69312da8e4dc81919370cb86fd172b6c","connector_6938a7d323f48191aeabaf579802bf45"]),ktt=new Map(Object.values(ud).map(({access:t,sync:e})=>[t,e])),qoe=new Set(Object.values(ud).map(({sync:t})=>t)),Gu=ud[Te.CLICKUP_CONNECTOR],Vu=ud[Te.ASANA_CONNECTOR],Koe=Gu==null?void 0:Gu.sync,Cy=Gu==null?void 0:Gu.access,Yoe=Vu==null?void 0:Vu.sync,wy=Vu==null?void 0:Vu.access,Zoe=(t,e)=>qoe.has(t.id)?t.id===Koe?e.has(Cy!=null?Cy:""):t.id===Yoe?e.has(wy!=null?wy:""):!0:!1,Qoe=t=>t.connector_type!=="SERVICE"||vr[t.id]!==void 0,rO=t=>{const e=new Set(t.map(n=>n.id));return t.filter(n=>Qoe(n)&&!Woe.has(n.id)&&!Zoe(n,e))},Joe=t=>({apps:rO(t.apps).sort((e,n)=>+(n.distribution_channel==="TENANT_CATALOG")-+(e.distribution_channel==="TENANT_CATALOG")||e.name.localeCompare(n.name)),next_token:t.next_token}),Xoe=t=>({apps:rO(t.apps).sort((e,n)=>+(n.distribution_channel==="TENANT_CATALOG")-+(e.distribution_channel==="TENANT_CATALOG")||e.name.localeCompare(n.name)),next_token:t.next_token}),ere=({tier:t}={})=>["listApps",t],tre=({tier:t}={})=>ue.safeGet("/connectors/directory/list",{authOption:Ot.SendIfAvailable,parameters:{query:{tier:t}}}),Ett=t=>{"use forget";const e=D.c(9);let n;e[0]!==t?(n=ere({tier:t}),e[0]=t,e[1]=n):n=e[1];let s,o;e[2]!==t?(s=async()=>await tre({tier:t}),o=a=>t==="featured"?a:Joe(a),e[2]=t,e[3]=s,e[4]=o):(s=e[3],o=e[4]);let r;return e[5]!==n||e[6]!==s||e[7]!==o?(r={queryKey:n,queryFn:s,select:o},e[5]=n,e[6]=s,e[7]=o,e[8]=r):r=e[8],ut(r)},nre=()=>["listWorkspaceApps"],sre=()=>ue.safeGet("/connectors/directory/list_workspace",{authOption:Ot.SendIfAvailable}),Ttt=()=>{"use forget";var s;const t=D.c(2);let e,n;if(t[0]===Symbol.for("react.memo_cache_sentinel")){const o=Et();e=ut,n={queryKey:nre(),queryFn:ore,select:Xoe,enabled:(s=CK(o==null?void 0:o.planType))!=null?s:!1},t[0]=e,t[1]=n}else e=t[0],n=t[1];return e(n)},Mtt=t=>{"use forget";var o;const e=D.c(3),n=$oe();let s;return e[0]!==t||e[1]!==n.data?(s=(o=n.data)==null?void 0:o.has(t!=null?t:""),e[0]=t,e[1]=n.data,e[2]=s):s=e[2],s};async function ore(){return await sre()}var tw="Radio",[rre,aO]=Pc(tw),[are,ire]=rre(tw),iO=v.forwardRef((t,e)=>{const _=t,{__scopeRadio:n,name:s,checked:o=!1,required:r,disabled:a,value:l="on",onCheck:c,form:u}=_,d=De(_,["__scopeRadio","name","checked","required","disabled","value","onCheck","form"]),[f,m]=v.useState(null),p=Qn(e,x=>m(x)),g=v.useRef(!1),h=f?u||!!f.closest("form"):!0;return i.jsxs(are,{scope:n,checked:o,disabled:a,children:[i.jsx(bn.button,G(N({type:"button",role:"radio","aria-checked":o,"data-state":uO(o),"data-disabled":a?"":void 0,disabled:a,value:l},d),{ref:p,onClick:Gt(t.onClick,x=>{o||c==null||c(),h&&(g.current=x.isPropagationStopped(),g.current||x.stopPropagation())})})),h&&i.jsx(lre,{control:f,bubbles:!g.current,name:s,value:l,checked:o,required:r,disabled:a,form:u,style:{transform:"translateX(-100%)"}})]})});iO.displayName=tw;var lO="RadioIndicator",cO=v.forwardRef((t,e)=>{const a=t,{__scopeRadio:n,forceMount:s}=a,o=De(a,["__scopeRadio","forceMount"]),r=ire(lO,n);return i.jsx(H0,{present:s||r.checked,children:i.jsx(bn.span,G(N({"data-state":uO(r.checked),"data-disabled":r.disabled?"":void 0},o),{ref:e}))})});cO.displayName=lO;var lre=t=>{const c=t,{control:e,checked:n,bubbles:s=!0}=c,o=De(c,["control","checked","bubbles"]),r=v.useRef(null),a=TC(n),l=ZP(e);return v.useEffect(()=>{const u=r.current,d=window.HTMLInputElement.prototype,m=Object.getOwnPropertyDescriptor(d,"checked").set;if(a!==n&&m){const p=new Event("click",{bubbles:s});m.call(u,n),u.dispatchEvent(p)}},[a,n,s]),i.jsx("input",G(N({type:"radio","aria-hidden":!0,defaultChecked:n},o),{tabIndex:-1,ref:r,style:G(N(N({},t.style),l),{position:"absolute",pointerEvents:"none",opacity:0,margin:0})}))};function uO(t){return t?"checked":"unchecked"}var cre=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],nw="RadioGroup",[ure]=Pc(nw,[YP,aO]),dO=YP(),fO=aO(),[dre,fre]=ure(nw),mO=v.forwardRef((t,e)=>{const x=t,{__scopeRadioGroup:n,name:s,defaultValue:o,value:r,required:a=!1,disabled:l=!1,orientation:c,dir:u,loop:d=!0,onValueChange:f}=x,m=De(x,["__scopeRadioGroup","name","defaultValue","value","required","disabled","orientation","dir","loop","onValueChange"]),p=dO(n),g=EC(u),[h,_]=ld({prop:r,defaultProp:o,onChange:f});return i.jsx(dre,{scope:n,name:s,required:a,disabled:l,value:h,onValueChange:_,children:i.jsx(EK,G(N({asChild:!0},p),{orientation:c,dir:g,loop:d,children:i.jsx(bn.div,G(N({role:"radiogroup","aria-required":a,"aria-orientation":c,"data-disabled":l?"":void 0,dir:g},m),{ref:e}))}))})});mO.displayName=nw;var pO="RadioGroupItem",gO=v.forwardRef((t,e)=>{const p=t,{__scopeRadioGroup:n,disabled:s}=p,o=De(p,["__scopeRadioGroup","disabled"]),r=fre(pO,n),a=r.disabled||s,l=dO(n),c=fO(n),u=v.useRef(null),d=Qn(e,u),f=r.value===o.value,m=v.useRef(!1);return v.useEffect(()=>{const g=_=>{cre.includes(_.key)&&(m.current=!0)},h=()=>m.current=!1;return document.addEventListener("keydown",g),document.addEventListener("keyup",h),()=>{document.removeEventListener("keydown",g),document.removeEventListener("keyup",h)}},[]),i.jsx(TK,G(N({asChild:!0},l),{focusable:!a,active:f,children:i.jsx(iO,G(N(N({disabled:a,required:r.required,checked:f},c),o),{name:r.name,ref:d,onCheck:()=>r.onValueChange(o.value),onKeyDown:Gt(g=>{g.key==="Enter"&&g.preventDefault()}),onFocus:Gt(o.onFocus,()=>{var g;m.current&&((g=u.current)==null||g.click())})}))}))});gO.displayName=pO;var mre="RadioGroupIndicator",hO=v.forwardRef((t,e)=>{const r=t,{__scopeRadioGroup:n}=r,s=De(r,["__scopeRadioGroup"]),o=fO(n);return i.jsx(cO,G(N(N({},o),s),{ref:e}))});hO.displayName=mre;var _O=mO,E_=gO,T_=hO;const sw=({defaultValue:t,onContinue:e,options:n})=>{const[s,o]=v.useState(t);return i.jsxs(i.Fragment,{children:[i.jsx(_O,{value:s,onValueChange:r=>o(r),className:"flex flex-col gap-2 pt-8 pb-6",children:n.map(({value:r,label:a,description:l,Icon:c,Badge:u,disabled:d,tooltip:f})=>{const m=i.jsxs(E_,{value:r,className:q("border-token-border-default flex items-center gap-4 rounded-2xl border p-4 text-sm",d&&"cursor-not-allowed opacity-60"),disabled:d,children:[c&&i.jsx("span",{children:i.jsx(c,{className:"h-6 w-6"})}),i.jsxs("div",{className:"flex-1 text-start",children:[i.jsxs("div",{className:"flex items-center gap-1.5 pb-0.5",children:[typeof a=="string"?a:i.jsx(P,N({},a)),u&&i.jsx(u,{})]}),i.jsx("div",{className:"text-token-text-secondary",children:typeof l=="string"?l:i.jsx(P,N({},l))})]}),s===r?i.jsx(T_,{className:"flex h-5 w-5 items-center justify-center rounded-full bg-gray-950 p-0.5 dark:bg-white",children:i.jsx("div",{className:"h-2 w-2 rounded-full bg-white dark:bg-gray-950"})}):i.jsx("div",{className:"border-token-border-default h-5 w-5 rounded-full border"})]},r);return f?i.jsx(St,{label:i.jsx("div",{className:"max-w-50",children:typeof f=="string"?f:i.jsx(P,N({},f))}),side:"right",children:m},r):m})}),i.jsx(Se,{className:"w-full",size:"large",disabled:!s,onClick:()=>{s&&e(s)},children:i.jsx(P,N({},pre.nextStepButton))})]})},pre=we({nextStepButton:{id:"addConnectorLinkModal.nextStepButton",defaultMessage:"Continue"}}),bl=re(me,"a5ec30",20,20),Ir=re(me,"e60167",20,20),xO=re(me,"61861c",12,13),vc=re(me,"ec66f0",20,20),mi=re(me,"5e6658",20,20);function ow(t){"use forget";var p;const e=D.c(7),{lightLogoUrl:n,darkLogoUrl:s,enabled:o,theme:r}=t,a=o===void 0?!0:o,c=(p=Yo()&&r!=="light"||r==="dark"?s!=null?s:n:n!=null?n:s)!=null?p:null;let u,d;e[0]!==c?(u=["connector-logo",c],d=()=>gre(c),e[0]=c,e[1]=u,e[2]=d):(u=e[1],d=e[2]);const f=a&&!!c;let m;return e[3]!==u||e[4]!==d||e[5]!==f?(m={queryKey:u,queryFn:d,enabled:f},e[3]=u,e[4]=d,e[5]=f,e[6]=m):m=e[6],ut(m)}async function gre(t){var e;if(t!=null&&t.startsWith("connectors://")){const n=new URL(t),s=n.hostname,o=(e=n.searchParams.get("theme"))!=null?e:"light",r=await ue.safeGet("/aip/connectors/{connector_id}/logo",{parameters:{path:{connector_id:s},query:{theme:o,v:"2"}},skipJsonTransform:!0});if(!r.ok)throw new Error("Failed to get connector logo: ".concat(await r.text()));const a=await r.blob();return{url:await hre(a),text:await a.text()}}return{url:t}}const hre=t=>new Promise((e,n)=>{const s=new FileReader;s.onloadend=()=>{const o=s.result;if(typeof o!="string"){n(new Error("Failed to read blob as data URL"));return}e(o)},s.onerror=n,s.readAsDataURL(t)}),yO={medium:"icon",small:"icon-sm",xsmall:"icon-xs",large:"icon-lg",xxlarge:"icon-xl"},kv={xsmall:"h-4.5 w-4.5 text-base",small:"h-6 w-6 text-xs",medium:"h-8 w-8 text-sm",large:"h-10 w-10 text-base",xxlarge:"h-20 w-20 text-base"},Vc=t=>{"use forget";var y,S,C;const e=D.c(30),{connector:n,className:s,iconClassName:o,size:r,theme:a}=t,l=Yo()&&a!=="light"||a==="dark",c=(y=n.logo_url)!=null?y:null,u=(S=n.logo_url_dark)!=null?S:null;let d;e[0]!==c||e[1]!==u||e[2]!==a?(d={lightLogoUrl:c,darkLogoUrl:u,theme:a},e[0]=c,e[1]=u,e[2]=a,e[3]=d):d=e[3];const f=ow(d);if(!((C=f.data)!=null&&C.url)){const w=kv[r],k=r==="large"||r==="xxlarge"?"rounded-xl":"rounded-md",E=l?"dark bg-token-bg-tertiary":"light bg-token-bg-secondary";let T;e[4]!==w||e[5]!==k||e[6]!==E?(T=q("text-token-text-secondary flex items-center justify-center font-semibold",w,k,E),e[4]=w,e[5]=k,e[6]=E,e[7]=T):T=e[7];const M=yO[r];let A;e[8]!==o||e[9]!==M?(A=q(M,o),e[8]=o,e[9]=M,e[10]=A):A=e[10];let I;e[11]!==A?(I=i.jsx(Ir,{className:A}),e[11]=A,e[12]=I):I=e[12];let j;e[13]!==I||e[14]!==T?(j=i.jsx("span",{className:T,children:I}),e[13]=I,e[14]=T,e[15]=j):j=e[15];let R;return e[16]!==s||e[17]!==j?(R=i.jsx("div",{className:s,children:j}),e[16]=s,e[17]=j,e[18]=R):R=e[18],R}const m=f.data.url,p=n.name,g=kv[r],h=r==="large"||r==="xxlarge"?"rounded-xl":"rounded-md";let _;e[19]!==o||e[20]!==g||e[21]!==h?(_=q(g,"object-contain",h,o),e[19]=o,e[20]=g,e[21]=h,e[22]=_):_=e[22];let x;e[23]!==n.name||e[24]!==f.data.url||e[25]!==_?(x=i.jsx("img",{src:m,alt:p,className:_}),e[23]=n.name,e[24]=f.data.url,e[25]=_,e[26]=x):x=e[26];let b;return e[27]!==s||e[28]!==x?(b=i.jsx("div",{className:s,children:x}),e[27]=s,e[28]=x,e[29]=b):b=e[29],b},Att=t=>{"use forget";var p;const e=D.c(11),{template:n,className:s,iconClassName:o,size:r}=t,a=(p=n.logo_url)!=null?p:"",l=n.name,c=kv[r],u=r==="large"?"rounded-xl":"rounded-md";let d;e[0]!==o||e[1]!==c||e[2]!==u?(d=q(c,"object-contain",u,o),e[0]=o,e[1]=c,e[2]=u,e[3]=d):d=e[3];let f;e[4]!==a||e[5]!==d||e[6]!==n.name?(f=i.jsx("img",{src:a,alt:l,className:d}),e[4]=a,e[5]=d,e[6]=n.name,e[7]=f):f=e[7];let m;return e[8]!==s||e[9]!==f?(m=i.jsx("div",{className:s,children:f}),e[8]=s,e[9]=f,e[10]=m):m=e[10],m},Ntt=t=>{"use forget";var u,d,f;const e=D.c(11),{connector:n}=t,s=Yo(),o=(u=n.logo_url)!=null?u:null,r=(d=n.logo_url_dark)!=null?d:null;let a;e[0]!==o||e[1]!==r?(a={lightLogoUrl:o,darkLogoUrl:r},e[0]=o,e[1]=r,e[2]=a):a=e[2];const l=ow(a);if(!((f=l.data)!=null&&f.url)){const m=s?"bg-token-bg-tertiary":"bg-token-bg-secondary";let p;e[3]!==m?(p=q("text-token-text-secondary m-0.5 flex h-6 w-6 items-center justify-center rounded-md text-xs font-semibold",m),e[3]=m,e[4]=p):p=e[4];let g;e[5]===Symbol.for("react.memo_cache_sentinel")?(g=i.jsx(Ir,{className:yO.small}),e[5]=g):g=e[5];let h;return e[6]!==p?(h=i.jsx("span",{className:p,children:g}),e[6]=p,e[7]=h):h=e[7],h}let c;return e[8]!==n.name||e[9]!==l.data.url?(c=i.jsx("span",{className:"m-0.5 rounded-md",children:i.jsx("img",{src:l.data.url,alt:n.name,className:"h-6 w-6 rounded-md object-contain"})}),e[8]=n.name,e[9]=l.data.url,e[10]=c):c=e[10],c},_re=t=>{"use forget";var Z,J;const e=D.c(49),{connector:n,onClose:s,onContinue:o,canAddDeepResearch:r,canAddInternalKnowledge:a,canAddOdyssey:l,messages:c}=t,u=Et(),d=$d(),f=!!(u!=null&&u.isPersonalAccount()&&d);let m;e[0]!==c.syncBadge?(m=()=>{"use forget";return i.jsxs("span",{className:"bg-token-interactive-bg-accent-default flex items-center gap-1 rounded-sm px-1.5 py-0.5 text-xs text-[#007AFF]",children:[i.jsx(xO,{}),i.jsx(P,N({},c.syncBadge))]})},e[0]=c.syncBadge,e[1]=m):m=e[1];const p=m;let g;e[2]!==c.recommendedBadge?(g=()=>{"use forget";return i.jsx("span",{className:"bg-token-interactive-bg-accent-default flex items-center gap-1 rounded-sm px-1.5 py-0.5 text-xs text-[#007AFF]",children:i.jsx(P,N({},c.recommendedBadge))})},e[2]=c.recommendedBadge,e[3]=g):g=e[3];const h=g;let _;e[4]!==p||e[5]!==c.internalKnowledgeDescription||e[6]!==c.internalKnowledgeTitle?(_={value:"internalKnowledge",label:c.internalKnowledgeTitle,description:c.internalKnowledgeDescription,Icon:bl,Badge:p},e[4]=p,e[5]=c.internalKnowledgeDescription,e[6]=c.internalKnowledgeTitle,e[7]=_):_=e[7];const x=_;let b;e[8]!==h||e[9]!==c.syncDescription||e[10]!==c.syncTitle?(b={value:"internalKnowledge",label:c.syncTitle,description:c.syncDescription,Icon:vc,Badge:h},e[8]=h,e[9]=c.syncDescription,e[10]=c.syncTitle,e[11]=b):b=e[11];const y=b;let S;e[12]!==c.deepResearchDescription||e[13]!==c.deepResearchTitle?(S={value:"deepResearch",label:c.deepResearchTitle,description:c.deepResearchDescription,Icon:mi},e[12]=c.deepResearchDescription,e[13]=c.deepResearchTitle,e[14]=S):S=e[14];const C=S;let w;e[15]!==c.deepResearchAndOdysseyDescription||e[16]!==c.deepResearchAndOdysseyTitle?(w={value:"deepResearchAndOdyssey",label:c.deepResearchAndOdysseyTitle,description:c.deepResearchAndOdysseyDescription,Icon:mi},e[15]=c.deepResearchAndOdysseyDescription,e[16]=c.deepResearchAndOdysseyTitle,e[17]=w):w=e[17];const k=w;let E;e[18]!==c.dontSyncDescription||e[19]!==c.dontSyncTitle?(E={value:"deepResearch",label:c.dontSyncTitle,description:c.dontSyncDescription,Icon:Ir},e[18]=c.dontSyncDescription,e[19]=c.dontSyncTitle,e[20]=E):E=e[20];const T=E,M=f?y:x;let A;e[21]!==a||e[22]!==c.internalKnowledgeTooltip?(A=a?{}:N({disabled:!0},c.internalKnowledgeTooltip?{tooltip:c.internalKnowledgeTooltip}:{}),e[21]=a,e[22]=c.internalKnowledgeTooltip,e[23]=A):A=e[23];let I;e[24]!==M||e[25]!==A?(I=N(N({},M),A),e[24]=M,e[25]=A,e[26]=I):I=e[26];const j=I,R=l?k:f?T:C;let O;e[27]!==r||e[28]!==R?(O=r?R:G(N({},R),{disabled:!0}),e[27]=r,e[28]=R,e[29]=O):O=e[29];const L=O;let B;e[30]!==j||e[31]!==L?(B=[j,L],e[30]=j,e[31]=L,e[32]=B):B=e[32];const U=B;let H;e[33]!==c.selectProductTitle?(H=i.jsx(P,N({},c.selectProductTitle)),e[33]=c.selectProductTitle,e[34]=H):H=e[34];let $;e[35]!==n?($=i.jsx(Vc,{connector:n,className:"rounded-xl border-[0.5px] p-2 shadow-sm",size:"medium"}),e[35]=n,e[36]=$):$=e[36];const F=(J=(Z=n.branding)==null?void 0:Z.developer)!=null?J:void 0;let z;e[37]!==s||e[38]!==H||e[39]!==$||e[40]!==F?(z=i.jsx($0,{title:H,connectorIcon:$,connectorDeveloper:F,onClose:s}),e[37]=s,e[38]=H,e[39]=$,e[40]=F,e[41]=z):z=e[41];const W=f?"internalKnowledge":void 0;let Y;e[42]!==U||e[43]!==o||e[44]!==W?(Y=i.jsx(sw,{defaultValue:W,onContinue:o,options:U}),e[42]=U,e[43]=o,e[44]=W,e[45]=Y):Y=e[45];let K;return e[46]!==z||e[47]!==Y?(K=i.jsxs(i.Fragment,{children:[z,Y]}),e[46]=z,e[47]=Y,e[48]=K):K=e[48],K},wa=({messages:t})=>n=>i.jsx(_re,G(N({},n),{messages:t})),xre=we({selectProductTitle:{id:"r2npOY",defaultMessage:"Select a connection type"},deepResearchTitle:{id:"BufFDR",defaultMessage:"Deep research"},deepResearchAndOdysseyTitle:{id:"ZQSdTY",defaultMessage:"Chat, deep research, agent"},deepResearchAndOdysseyDescription:{id:"gzPmCe",defaultMessage:"Find, analyze, and synthesize your Drive files to create comprehensive reports"},deepResearchDescription:{id:"L+S/jI",defaultMessage:"Find, analyze, and synthesize your Drive files to create comprehensive reports"},dontSyncTitle:{id:"YcPoIP",defaultMessage:"Don't sync"},dontSyncDescription:{id:"uO+gdP",defaultMessage:"ChatGPT will read your Google Drive files as needed, so replies may be slower."},internalKnowledgeTitle:{id:"t5mu4H",defaultMessage:"Chat, deep research, agent"},internalKnowledgeDescription:{id:"0xFkEA",defaultMessage:"Sync Drive files to ChatGPT for more relevant, up-to-date answers"},recommendedBadge:{id:"Wtyyql",defaultMessage:"Recommended"},syncTitle:{id:"yMY2Ng",defaultMessage:"Sync"},syncDescription:{id:"fcoBBw",defaultMessage:"Sync Google Drive files to ChatGPT for faster, more relevant answers."},syncBadge:{id:"0OM3Oh",defaultMessage:"Sync"},internalKnowledgeTooltip:{id:"AEBXx0",defaultMessage:"Contact your admin to enable Google Drive for chat"}}),yre=wa({messages:xre});function Itt(t,{target:e,referrer:n,toggleAllAfterRedirect:s}={target:"connectors"}){let o="#settings/".concat(Ts.Connectors);return t&&(o+="?connector=".concat(un[t],"&add-connector-link=true&target=").concat(e),n&&(o+="&referrer=".concat(encodeURIComponent(n))),s&&(o+="&".concat(ev))),o}function jtt(t){return"#settings/".concat(Ts.Connectors,"?connector=").concat(un[t])}function rw(){const t=vn(),e=jn(),n=X(()=>QP(t)),s=Is();return o=>{var f,m;const r=e.pathname.match(/\/c\/.+/)?e.pathname:"/",a=e.hash.includes("suggestedPromptsText="),l=e.hash.includes(ev),c=e.hash.includes("target=")?(f=e.hash.match(/target=([^&]+)/))==null?void 0:f[1]:"connectors",u="".concat(r,"?hints=").concat(c,"&sources=").concat(vr[o.id]);if(a){const p=(m=e.hash.match(/suggestedPromptsText=([^&]+)/))==null?void 0:m[1];return"".concat(u,"&prompt=").concat(p,"&redirect_source=suggested_ca_prompts")}if(l)return"".concat(u,"&").concat(ev);if((s==null||s===Ke.Slurm)&&(n==null?void 0:n.some(p=>p.id===o.id&&[Te.GDRIVE_ACTION_CONNECTOR,Te.BOX_CONNECTOR,Te.DROPBOX_CONNECTOR,Te.SHAREPOINT_CONNECTOR].includes(vr[p.id])))){const p=Eo("1204757806").get("group","control");if(p==="connector-enabled"||p==="suggestions")return"".concat(u).concat(p==="suggestions"?"&suggestions-for-connector=".concat(vr[o.id]):"")}return""}}const bO=({includeDisabledByAdmin:t}={})=>{const e=vn(),{enabled:n,availableConnectorsType:s}=JP(),o=X(()=>{if(n)return ip(e,{includeDisabledByAdmin:t,productSku:An.N7JUPD})}),r=n&&o===void 0,a=MK(),l=xe("1826175200"),c=v.useMemo(()=>o?a?o.filter(u=>s.includes(u.type)):l?o.filter(u=>s.includes(u.type)||u.type===ei.MCP_CONNECTOR&&u.status!=="ONLY_ME"):o.filter(u=>s.includes(u.type)&&u.type!==ei.MCP_CONNECTOR):[],[s,o,a,l]);return n?{enabled:!0,availableConnectors:c,isLoading:r}:{enabled:!1,availableConnectors:[],isLoading:!1}};function aw(t){tt.setItem(Ie.ConnectorOAuthFlowType,t)}function Ptt(){const t=tt.getItem(Ie.ConnectorOAuthFlowType);return t?(tt.removeItem(Ie.ConnectorOAuthFlowType),t):null}const bre=({connector:t,internalKnowledgeConfigs:e,onClose:n,onContinue:s})=>{var r,a;const o=v.useMemo(()=>e.filter(l=>l.user_connection_details.auth_status==="not_connected").map(l=>({value:l.user_connection_details.connection_instance_id,label:l.connection_display_info.display_name,description:l.connection_display_info.description})),[e]);return i.jsxs(i.Fragment,{children:[i.jsx($0,{title:i.jsx(P,N({},vre.selectConnectionTitle)),connectorIcon:i.jsx(Vc,{connector:t,className:"rounded-xl border-[0.5px] p-2 shadow-sm",size:"medium"}),connectorDeveloper:(a=(r=t.branding)==null?void 0:r.developer)!=null?a:void 0,onClose:n}),i.jsx(sw,{onContinue:s,options:o})]})},vre=we({selectConnectionTitle:{id:"2rQetR",defaultMessage:"Select a connection"}}),iw=t=>(t!=null?t:[]).map(e=>{var n,s,o,r,a;return G(N({},e),{description:(n=e.description)!=null?n:void 0,inputs:(o=(s=e.inputs)==null?void 0:s.map(l=>{var c,u;return G(N({},l),{description:(c=l.description)!=null?c:void 0,pattern:(u=l.pattern)!=null?u:void 0})}))!=null?o:void 0,i18n:(a=(r=e.i18n)==null?void 0:r.map(l=>{var c,u;return G(N({},l),{label:(c=l.label)!=null?c:void 0,description:(u=l.description)!=null?u:void 0})}))!=null?a:void 0})}),Ev=t=>typeof t=="object"&&t!==null&&!Array.isArray(t),Sre=/\{\{([^}]+)\}\}/g,f4=t=>t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),m4=t=>t.replace(/\\([.*+?^${}()|[\]\\-])/g,"$1"),Cre=t=>{const e=[];let n="",s=0;for(const o of t){if(o==="|"&&s%2===0){e.push(n),n="",s=0;continue}n+=o,o==="\\"?s+=1:s=0}return e.push(n),e},wre=(t,e)=>{const n=t.trim();if(!n)return"";if(e==="string_list"){const s=/^\(\?:([\s\S]*)\)$/.exec(n),o=s?s[1]:n;return Cre(o).map(m4).join("\n")}return m4(n)},kre=(t,e,n)=>{var c;if(!t.includes("{{"))return t===e?{}:null;let s="^",o=0;const r=[];for(const u of t.matchAll(new RegExp(Sre))){const d=(c=u.index)!=null?c:0;s+=f4(t.slice(o,d)),s+="(.+?)",r.push(u[1]),o=d+u[0].length}s+=f4(t.slice(o)),s+="$";const a=new RegExp(s).exec(e);if(!a)return null;const l={};return r.forEach((u,d)=>{var f;l[u]=wre(a[d+1],(f=n[u])==null?void 0:f.input_type)}),l},Ere=(t,e)=>{const n=N({},t);for(const[s,o]of Object.entries(e)){if(n[s]!=null&&n[s]!==o)return null;n[s]=o}return n},Tv=(t,e,n,s)=>{if(typeof t=="string"){if(typeof e!="string")return null;const o=kre(t,e,n);return o==null?null:Ere(s,o)}if(Array.isArray(t)){if(!Array.isArray(e)||e.length!==t.length)return null;let o=s;for(let r=0;r<t.length;r+=1){const a=Tv(t[r],e[r],n,o);if(!a)return null;o=a}return o}if(Ev(t)){if(!Ev(e))return null;for(const r of Object.keys(e))if(!Object.prototype.hasOwnProperty.call(t,r))return null;let o=s;for(const[r,a]of Object.entries(t)){const l=Tv(a,e[r],n,o);if(!l)return null;o=l}return o}return Object.is(t,e)?s:null},Tre=(t,e,n)=>{let s={};for(const[o,r]of Object.entries(t)){if(!(o in e))return null;const a=Tv(r,e[o],n,s);if(!a)return null;s=a}return s},Rtt=t=>{if(!t)return;const e={};for(const[n,s]of Object.entries(t)){if(Ev(s)){const o=s.allOf;if(Object.keys(s).length===1&&Array.isArray(o)&&o.length>0){e[n]=o[0];continue}}e[n]=s}return e},Ott=(t,e)=>{var r;const n=iw(t);if(!e||n.length===0)return{selectedTemplateIds:[],inputValues:{}};const s=[],o={};for(const a of n){const l=a.action_param_schemas;if(!l||Object.keys(l).length===0)continue;const c=Object.fromEntries(((r=a.inputs)!=null?r:[]).map(d=>[d.name,d])),u=Tre(l,e,c);u&&(s.push(a.id),Object.keys(u).length>0&&(o[a.id]=u))}return{selectedTemplateIds:s,inputValues:o}},Mre=t=>{if(t)return t.clamp_templates==null?t:G(N({},t),{clamp_templates:iw(t.clamp_templates)})},M_=re(me,"aba6eb",16,16);function lw(t){const e=te();return i.jsxs("div",{className:"relative w-full",children:[i.jsx(xd,G(N({},t),{className:q(t.className,t.error&&"border-red-500!")})),t.error&&t.showInlineErrorMessage!==!1&&i.jsxs("p",{className:q("mt-1 flex items-center text-xs text-red-500",t.showErrorIcon&&"gap-1"),children:[t.showErrorIcon&&i.jsx(M_,{title:e.formatMessage({id:"FormField.errorIcon",defaultMessage:"Error"})}),t.error]})]})}const p4=we({sectionTitle:{id:"QoBb/Y",defaultMessage:"Privacy settings"},tooltipLabel:{id:"LcLAFD",defaultMessage:"Info"}}),lu=we({required:{id:"EFGauU",defaultMessage:"Enter a value."},requiredList:{id:"kVUhNg",defaultMessage:"Enter at least one value."},invalid:{id:"IbivRk",defaultMessage:"Value is not in the expected format."},invalidList:{id:"+x2rj7",defaultMessage:"One or more entries are not in the expected format."},listPlaceholder:{id:"3NDa/9",defaultMessage:"Enter one value per line"},validationToast:{id:"YYCWl0",defaultMessage:"Fix the highlighted clamp inputs."}}),g4=t=>t.replace(/[.*+?^${}()|[\]\\-]/g,"\\$&"),Are=(t,e)=>{const n=s=>typeof s=="string"?Object.entries(e).reduce((o,[r,a])=>o.split("{{".concat(r,"}}")).join(a),s):Array.isArray(s)?s.map(o=>n(o)):s&&typeof s=="object"?Object.fromEntries(Object.entries(s).map(([o,r])=>[o,n(r)])):s;return n(t)},vO=({templates:t,intl:e,infoIcon:n,enabled:s=!0,initialSelectedTemplateIds:o,initialInputValues:r,resetKey:a,showSectionTitle:l=!0})=>{const c=e.formatMessage({id:"FormField.errorIcon",defaultMessage:"Error"}),u=v.useMemo(()=>s?iw(t):[],[s,t]),[d,f]=v.useState(()=>o!=null?o:[]),[m,p]=v.useState(()=>r!=null?r:{}),g=v.useRef(!1),h=v.useRef(void 0);v.useEffect(()=>{if(s){if(a!==void 0){if(h.current===a)return;h.current=a,f(o!=null?o:u.map(w=>w.id)),p(r!=null?r:{}),g.current=!0;return}!g.current&&d.length===0&&u.length>0&&(f(o!=null?o:u.map(w=>w.id)),p(r!=null?r:{}),g.current=!0)}},[u,s,o,r,a,d.length]);const _=v.useMemo(()=>u.filter(w=>d.includes(w.id)),[u,d]),x=v.useMemo(()=>{var E;const w=(E=e.locale)==null?void 0:E.toLowerCase(),k=w==null?void 0:w.split("-")[0];return T=>{var R,O,L,B;const M=(R=T.i18n)!=null?R:[];if(!w)return T;const A=M.find(U=>{var H;return((H=U.locale)==null?void 0:H.toLowerCase())===w}),I=k?M.find(U=>{var H;return((H=U.locale)==null?void 0:H.toLowerCase())===k}):void 0,j=A!=null?A:I;return j?G(N({},T),{label:(O=j.label)!=null?O:T.label,description:(B=(L=j.description)!=null?L:T.description)!=null?B:void 0}):T}},[e.locale]),b=(w,k,E)=>{p(T=>{var M;return G(N({},T),{[w]:G(N({},(M=T[w])!=null?M:{}),{[k]:E})})})},y=v.useCallback(()=>{const w={};let k=!1;const E={};return _.forEach(T=>{var j;const M={},A={};if(((j=T.inputs)!=null?j:[]).forEach(R=>{var U,H,$;const O=(U=R.input_type)!=null?U:"string",L=($=(H=m[T.id])==null?void 0:H[R.name])!=null?$:"";if(O==="string_list"){const F=L.split(/[\n,]/).map(W=>W.trim()).filter(Boolean);if(F.length===0){A[R.name]=e.formatMessage(lu.requiredList);return}if(R.pattern){const W=new RegExp(R.pattern);if(F.find(K=>!W.test(K))){A[R.name]=e.formatMessage(lu.invalidList);return}}const z=F.map(g4);M[R.name]=z.length===1?z[0]:"(?:".concat(z.join("|"),")");return}const B=L.trim();if(!B){A[R.name]=e.formatMessage(lu.required);return}if(R.pattern&&!new RegExp(R.pattern).test(B)){A[R.name]=e.formatMessage(lu.invalid);return}M[R.name]=g4(B)}),Object.keys(A).length>0){w[T.id]=A,k=!0;return}if(!T.action_param_schemas)return;const I=Object.keys(M).length>0?Are(T.action_param_schemas,M):T.action_param_schemas;Object.assign(E,I)}),{actionParamSchemas:k||Object.keys(E).length===0?void 0:E,validationErrors:w,hasErrors:k}},[_,m,e]),S=v.useMemo(()=>s?y():{actionParamSchemas:void 0,validationErrors:{},hasErrors:!1},[s,y]);return{clampTemplatesContent:s&&u.length>0?i.jsxs("div",{className:"flex flex-col gap-3",children:[l&&i.jsx("div",{className:"flex flex-col gap-1",children:i.jsx("div",{className:"text-token-text-primary text-sm font-semibold",children:i.jsx(P,N({},p4.sectionTitle))})}),i.jsx("div",{className:"divide-token-border-light border-token-border-heavy flex flex-col divide-y rounded-md border",children:u.map((w,k)=>{var R,O,L,B,U;const E=x(w),T="clamp-template-".concat(w.id||k),M=d.includes(w.id),A=(R=m[w.id])!=null?R:{},I=(O=S.validationErrors[w.id])!=null?O:{},j=((B=(L=w.inputs)==null?void 0:L.length)!=null?B:0)>0;return i.jsxs("div",{className:"flex flex-col gap-3 p-3",children:[i.jsxs("div",{className:"flex items-center justify-between gap-1",children:[i.jsxs("label",{className:"flex cursor-pointer items-center gap-1",htmlFor:T,children:[i.jsx("div",{className:"text-token-text-primary text-sm font-semibold",children:E.label}),E.description?i.jsx(St,{label:E.description,delayDuration:0,side:"top",align:"center",children:i.jsx("span",{className:"text-token-text-secondary hover:text-token-text-primary inline-flex items-center justify-center rounded-full p-1","aria-label":e.formatMessage(p4.tooltipLabel),children:i.jsx(n,{className:"icon-xs"})})}):null]}),i.jsx(MC,{id:T,checked:M,withinLabel:!0,onCheckedChange:H=>f($=>H?$.includes(w.id)?$:[...$,w.id]:$.filter(F=>F!==w.id))})]}),M&&j?i.jsx("div",{className:"flex flex-col gap-3",children:(U=w.inputs)==null?void 0:U.map(H=>{var Y,K,Z;const $=(Y=H.input_type)!=null?Y:"string",F="".concat(T,"-").concat(H.name),z=I[H.name],W=(K=A[H.name])!=null?K:"";return $==="string_list"?i.jsxs("div",{className:"flex flex-col gap-1",children:[i.jsx("label",{className:"text-token-text-primary text-xs font-semibold",htmlFor:F,children:H.label}),i.jsx("textarea",{id:F,className:"border-token-border-medium bg-token-bg-primary text-token-text-primary w-full rounded-md border px-3 py-2 text-sm focus:ring-1 focus:outline-none ".concat(z?"border-red-500 focus:border-red-500 focus:ring-red-500":"focus:border-token-border-xheavy focus:ring-token-text-secondary"),value:W,onChange:J=>b(w.id,H.name,J.target.value),placeholder:e.formatMessage(lu.listPlaceholder),rows:3,"aria-invalid":z?!0:void 0}),z?i.jsxs("div",{className:"flex items-center gap-1 text-xs text-red-500",children:[i.jsx(M_,{title:c}),z]}):null,H.description?i.jsx("div",{className:"text-token-text-secondary text-xs",children:H.description}):null]},H.name):i.jsxs("div",{className:"flex flex-col gap-1",children:[i.jsx(lw,{name:F,displayName:H.label,value:W,onChange:J=>b(w.id,H.name,J.target.value),placeholder:(Z=H.description)!=null?Z:void 0,error:z,showErrorIcon:!0}),H.description?i.jsx("div",{className:"text-token-text-secondary text-xs",children:H.description}):null]},H.name)})}):null]},w.id)})})]}):void 0,clampValidation:S,validationToastMessage:e.formatMessage(lu.validationToast)}},Nre=je(()=>Me(()=>import("./604d4c3d-edk1z1un3e93kfkg.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10])).then(t=>t.RedirectContent)),Ire=({onClose:t,connector:e,noRedirect:n,hideHeaderIcons:s=!1})=>{var He;const o=te(),r=bt(),a=Dt(),l=$d(),c=!!XP(),u=Et(),d=!!(u!=null&&u.isPersonalAccount()&&l),{isLoading:f,internalKnowledgeConfigs:m}=eR(),{mutateAsync:p}=tR(),{availableConnectors:g,isLoading:h}=AC(),{availableConnectors:_,isLoading:x}=bO(),b=v.useMemo(()=>{var Ge;return(Ge=m==null?void 0:m.filter(nt=>nt.user_connection_details.auth_status==="not_connected"))!=null?Ge:[]},[m]),y=rw(),S=b.length,{connectorLinks:C,refetch:w,isLoading:k}=Vo({productSku:An.CONNECTOR_SETTING,fetchValidLinksOnly:!0}),{refetch:E}=Vo({productSku:An.CONNECTOR_SETTING,fetchValidLinksOnly:!1,skip:!0}),T=v.useMemo(()=>{var Ge;return!!((Ge=C.get(pm))!=null&&Ge.length)},[C]),M=!T&&g.some(Ge=>Ge.type===Te.GDRIVE_ACTION_CONNECTOR),A=!T&&_.some(Ge=>Ge.type===Te.GDRIVE_ACTION_CONNECTOR),I=M||A,j=S>0||d,R=I&&j,O=A?"deepResearchAndOdyssey":M?"deepResearch":null,L=I&&j,B=NC(),U=L&&B!==An.DEEP_RESEARCH&&xe("3495630358"),H=xe("2515012530"),$=c&&j?"internalKnowledge":L?B===An.DEEP_RESEARCH?O:U?"internalKnowledge":null:j?"internalKnowledge":O,[F,z]=v.useState(!1),[W,Y]=v.useState($),[K,Z]=v.useState($==="internalKnowledge"&&!d),[J,Q]=v.useState(null),ne=v.useMemo(()=>S===1?m==null?void 0:m[0]:J?m==null?void 0:m.find(Ge=>Ge.user_connection_details.connection_instance_id===J):void 0,[S,m,J]),[ie,fe]=v.useState(!1),ae=(He=IC())!=null?He:"unknown_referrer",le=W!=null?W:R?null:j?"internalKnowledge":O,pe=le==="deepResearch"||le==="deepResearchAndOdyssey",_e=le==="internalKnowledge",Ce=d&&le==="internalKnowledge",ge=R&&W==null,Re=_e&&!Ce&&K,ke=v.useCallback(Ge=>{Y(Ge),Z(Ge==="internalKnowledge"&&!d),Ge!=="internalKnowledge"&&Q(null)},[Q,d]),he=v.useCallback(Ge=>{O&&ke(Ge?"internalKnowledge":O)},[O,ke]),Ee=v.useCallback(()=>{Z(!1)},[]),Pe=H&&!Re,{clampTemplatesContent:Ae,clampValidation:de,validationToastMessage:oe}=vO({templates:e.clamp_templates,intl:o,infoIcon:kr,enabled:Pe}),se=v.useCallback(async()=>{const{actionParamSchemas:Ge,hasErrors:nt}=de;if(nt){a.danger(oe);return}try{fe(!0),aw("popup"),V.logEventWithStatsig("Connectors - Connect Personal Google Drive","chatgpt_connectors_connect_personal_google_drive_clicked",{sync:Ce?"true":"false"});const at=await jC({connector:e,openPopup:!0,toaster:Ce?void 0:a,intl:o,productSku:An.CONNECTOR_SETTING,actionParamSchemas:Ge});if(w(),E(),(at==null?void 0:at.errorType)==="oauth_failed_scope_mismatch"){fe(!1),z(!0);return}at!=null&&at.linkId&&Ce&&p({link:{id:at.linkId,name:e.name,connector_id:un[Te.GDRIVE_ACTION_CONNECTOR]},isConnectingAndUpgrading:!0,referrer:ae}).then(()=>{tv()});const Xe=y(e);n?t():Xe?window.location.href=Xe:(t(),setTimeout(()=>{r(nR,{replace:!0})},500)),z(!1)}catch(at){fe(!1)}},[de,Ce,e,a,oe,o,w,E,y,n,p,t,r,ae]),Oe=_e&&!Ce&&!Re&&S>1&&!J,Ne=_e&&ne&&!Ce&&!Re,ze=pe||Ce||Re,Qe=de.hasErrors,Le=F||ge||ze||Oe||Ne,ce=f||h||x||k,be=!!ne;return v.useEffect(()=>{!Le&&!ce&&ws.error("GoogleDriveModalContent rendered with no content",{isAddingIK:_e,isUpgradingStraightToSync:Ce,shouldShowSyncRedirectContent:Re,numAddableIKConfigs:S,selectedIKConfig:J,currentIKConfig:be,isAddingDeepResearch:pe,shouldShowProductSelector:ge,shouldRenderInternalKnowledgeSelect:Oe,shouldRenderOAuthModal:Ne,shouldRenderRedirectContent:ze,showOAuthFailedScopeMismatch:F})},[ce,be,pe,_e,Ce,S,J,Le,Oe,Ne,ze,ge,Re,F]),ce?i.jsx("div",{className:"flex justify-center",children:i.jsx(Us,{})}):F?i.jsxs(i.Fragment,{children:[i.jsx($0,{onClose:t,connectorIcon:i.jsx("div",{className:"rounded-xl border-[0.5px] bg-white p-2 shadow-sm",children:i.jsx(Ys,{height:32,width:32})}),title:o.formatMessage({id:"LrBpzI",defaultMessage:"Permissions required"}),hideAvatarRow:s}),i.jsxs("div",{className:"border-token-border-default text-token-text-secondary mt-8 mb-6 flex items-center gap-4 rounded-xl border p-4 text-sm",children:[i.jsx(kr,{className:"icon-lg"}),i.jsx(P,{id:"googleDriveLinkingModalDescription",defaultMessage:"In the next step, make sure to check all boxes. ChatGPT requires the full list of Google permissions."})]}),i.jsx(Se,{className:"w-full",onClick:se,loading:ie,size:"large",children:i.jsx(P,{id:"reconnect",defaultMessage:"Reconnect"})})]}):i.jsxs(i.Fragment,{children:[ge&&i.jsx(yre,{onClose:t,connector:e,onContinue:ke,canAddDeepResearch:M,canAddOdyssey:A,canAddInternalKnowledge:j}),ze&&i.jsx(Nre,{connector:e,onClose:t,isConnecting:ie,onContinue:Re?Ee:se,productSku:An.CONNECTOR_SETTING,canSync:U,isRequestingSync:_e,setIsRequestingSync:U?he:void 0,hideHeaderIcons:s,additionalContent:Ae,isContinueDisabled:Qe}),Oe&&i.jsx(bre,{internalKnowledgeConfigs:m!=null?m:[],onClose:t,connector:e,onContinue:Q}),Ne&&i.jsx(AK,{immediatelyKickOffOAuth:U,isAdminFlow:!1,onClose:()=>{U||(ke(null),Q(null)),(!R||U)&&t()},connectionId:ne.user_connection_details.connection_instance_id,location:"user_settings",onSuccess:()=>{setTimeout(()=>{tv()},1e3),t()},excludeModalWrapper:!0})]})},jre=t=>{const e=t.distribution_channel==="ECOSYSTEM_DIRECTORY",s=xe("4262905012")&&t.connector_type==="MCP"&&t.status==="ONLY_ME";return e||s},Pre=t=>{var n,s;const e=mn("4204423555").get("metadata_by_connector_id",null);return ks((s=Im((n=Im(e))==null?void 0:n[t.id]))==null?void 0:s.image_url,null)},Rre=t=>!!Pre(t)&&Eo("3764093839").get("is_enabled",!1),Ore=we({selectProductTitle:{id:"EcfaIh",defaultMessage:"Select a connection type"},deepResearchTitle:{id:"BufFDR",defaultMessage:"Deep research"},deepResearchAndOdysseyTitle:{id:"y9kp7g",defaultMessage:"Deep research and agent mode"},deepResearchAndOdysseyDescription:{id:"7f5MJU",defaultMessage:"Find, analyze, and synthesize your HubSpot data to create comprehensive reports"},deepResearchDescription:{id:"52mZY5",defaultMessage:"Find, analyze, and synthesize your HubSpot data to create comprehensive reports"},dontSyncTitle:{id:"bIOtPo",defaultMessage:"Don't sync"},dontSyncDescription:{id:"R5dVLr",defaultMessage:"ChatGPT will read your HubSpot data as needed, so replies may be slower."},internalKnowledgeTitle:{id:"R09hUc",defaultMessage:"Chat"},internalKnowledgeDescription:{id:"Gf7d++",defaultMessage:"Sync HubSpot data to ChatGPT for more relevant, up-to-date answers"},internalKnowledgeTooltip:{id:"uCYMoO",defaultMessage:"Contact your admin to enable HubSpot for chat"},recommendedBadge:{id:"Wtyyql",defaultMessage:"Recommended"},syncTitle:{id:"9Au+em",defaultMessage:"Sync"},syncDescription:{id:"BYPzIj",defaultMessage:"Sync HubSpot data to ChatGPT for faster, more relevant answers."},syncBadge:{id:"0OM3Oh",defaultMessage:"Sync"}}),Lre=wa({messages:Ore}),Dre=we({selectProductTitle:{id:"bpaehG",defaultMessage:"Select a connection type"},deepResearchTitle:{id:"BufFDR",defaultMessage:"Deep research"},deepResearchAndOdysseyTitle:{id:"y9kp7g",defaultMessage:"Deep research and agent mode"},deepResearchAndOdysseyDescription:{id:"2EXqDU",defaultMessage:"Find, analyze, and synthesize your Jira issues to create comprehensive reports"},deepResearchDescription:{id:"pNQbc3",defaultMessage:"Find, analyze, and synthesize your Jira issues to create comprehensive reports"},dontSyncTitle:{id:"pFj6Xq",defaultMessage:"Don't sync"},dontSyncDescription:{id:"QX+ada",defaultMessage:"ChatGPT will read your Jira issues as needed, so replies may be slower."},internalKnowledgeTitle:{id:"iK7v/r",defaultMessage:"Chat"},internalKnowledgeDescription:{id:"RBzElS",defaultMessage:"Sync Jira issues to ChatGPT for more relevant, up-to-date answers"},recommendedBadge:{id:"Wtyyql",defaultMessage:"Recommended"},syncTitle:{id:"2NrkD8",defaultMessage:"Sync"},syncDescription:{id:"l4VShM",defaultMessage:"Sync Jira issues to ChatGPT for faster, more relevant answers."},syncBadge:{id:"0OM3Oh",defaultMessage:"Sync"},internalKnowledgeTooltip:{id:"vM2Wdq",defaultMessage:"Contact your admin to enable Jira for chat"}}),Bre=wa({messages:Dre}),Fre=we({selectProductTitle:{id:"0hzRKh",defaultMessage:"Select a connection type"},deepResearchTitle:{id:"BufFDR",defaultMessage:"Deep research"},deepResearchAndOdysseyTitle:{id:"y9kp7g",defaultMessage:"Deep research and agent mode"},deepResearchAndOdysseyDescription:{id:"hVvY37",defaultMessage:"Find, analyze, and synthesize your Jira Service Management tickets to create comprehensive reports"},deepResearchDescription:{id:"hbh71y",defaultMessage:"Find, analyze, and synthesize your Jira Service Management tickets to create comprehensive reports"},dontSyncTitle:{id:"9CKUT3",defaultMessage:"Don't sync"},dontSyncDescription:{id:"yeSkeT",defaultMessage:"ChatGPT will read your Jira Service Management tickets as needed, so replies may be slower."},internalKnowledgeTitle:{id:"jvk58G",defaultMessage:"Chat"},internalKnowledgeDescription:{id:"qv1dVO",defaultMessage:"Sync Jira Service Management tickets to ChatGPT for more relevant, up-to-date answers"},recommendedBadge:{id:"Wtyyql",defaultMessage:"Recommended"},syncTitle:{id:"dk0bHH",defaultMessage:"Sync"},syncDescription:{id:"pgpt5C",defaultMessage:"Sync Jira Service Management tickets to ChatGPT for faster, more relevant answers."},syncBadge:{id:"0OM3Oh",defaultMessage:"Sync"},internalKnowledgeTooltip:{id:"arahcS",defaultMessage:"Contact your admin to enable Jira Service Management for chat"}}),Ure=wa({messages:Fre}),Hre=()=>i.jsxs("span",{className:"bg-token-interactive-bg-accent-default flex items-center gap-1 rounded-sm px-1.5 py-0.5 text-xs text-[#007AFF]",children:[i.jsx(xO,{}),i.jsx(P,N({},Co.syncBadge))]}),$re=()=>i.jsx("span",{className:"bg-token-interactive-bg-accent-default flex items-center gap-1 rounded-sm px-1.5 py-0.5 text-xs text-[#007AFF]",children:i.jsx(P,N({},Co.recommendedBadge))}),Gre=({connector:t,onClose:e,onContinue:n,canAddDeepResearch:s,canAddInternalKnowledge:o,canAddOdyssey:r})=>{var f,m;const a=Et(),l=$d(),c=!!(a!=null&&a.isPersonalAccount()&&l),u=te(),d=v.useMemo(()=>[N(N({},c?qre:Wre),o?{}:{disabled:!0,tooltip:u.formatMessage({id:"GbkN+V",defaultMessage:"Contact your admin to enable Notion for chat"})}),...s?[r?zre:c?Kre:Vre]:[]],[c,o,u,s,r]);return i.jsxs(i.Fragment,{children:[i.jsx($0,{title:i.jsx(P,N({},Co.selectProductTitle)),connectorIcon:i.jsx(Vc,{connector:t,className:"rounded-xl border-[0.5px] p-2 shadow-sm",size:"medium"}),connectorDeveloper:(m=(f=t.branding)==null?void 0:f.developer)!=null?m:void 0,onClose:e}),i.jsx(sw,{defaultValue:c?"internalKnowledge":void 0,onContinue:n,options:d})]})},Co=we({selectProductTitle:{id:"DAwG09",defaultMessage:"Select a connection type"},deepResearchTitle:{id:"BufFDR",defaultMessage:"Deep research"},deepResearchAndOdysseyTitle:{id:"y9kp7g",defaultMessage:"Deep research and agent mode"},deepResearchAndOdysseyDescription:{id:"KXsRFb",defaultMessage:"Find, analyze, and synthesize your team's Notion pages and databases to create comprehensive reports"},deepResearchDescription:{id:"gZpO3N",defaultMessage:"Find, analyze, and synthesize Notion pages and databases for richer reports"},dontSyncTitle:{id:"GMrSDT",defaultMessage:"Don't sync"},dontSyncDescription:{id:"y/IdPs",defaultMessage:"ChatGPT will read your Notion content as needed, so replies may be slower."},internalKnowledgeTitle:{id:"QJf1Sc",defaultMessage:"Chat"},internalKnowledgeDescription:{id:"lJilfk",defaultMessage:"Sync Notion pages and databases to ChatGPT for more relevant, up-to-date answers"},recommendedBadge:{id:"Wtyyql",defaultMessage:"Recommended"},syncTitle:{id:"7Ar/Ej",defaultMessage:"Sync"},syncDescription:{id:"6WCZbJ",defaultMessage:"Sync Notion content to ChatGPT for faster, more relevant answers."},syncBadge:{id:"0OM3Oh",defaultMessage:"Sync"}}),Vre={value:"deepResearch",label:Co.deepResearchTitle,description:Co.deepResearchDescription,Icon:mi},zre={value:"deepResearchAndOdyssey",label:Co.deepResearchAndOdysseyTitle,description:Co.deepResearchAndOdysseyDescription,Icon:mi},Wre={value:"internalKnowledge",label:Co.internalKnowledgeTitle,description:Co.internalKnowledgeDescription,Icon:bl,Badge:Hre},qre={value:"internalKnowledge",label:Co.syncTitle,description:Co.syncDescription,Icon:vc,Badge:$re},Kre={value:"deepResearch",label:Co.dontSyncTitle,description:Co.dontSyncDescription,Icon:Ir},Yre=we({selectProductTitle:{id:"uecmFA",defaultMessage:"Select a connection type"},deepResearchTitle:{id:"BufFDR",defaultMessage:"Deep research"},deepResearchAndOdysseyTitle:{id:"ZQSdTY",defaultMessage:"Chat, deep research, agent"},deepResearchAndOdysseyDescription:{id:"plFxz/",defaultMessage:"Find, analyze, and synthesize your SharePoint files to create comprehensive reports"},deepResearchDescription:{id:"D9wqqk",defaultMessage:"Find, analyze, and synthesize your SharePoint files to create comprehensive reports"},dontSyncTitle:{id:"FNGsn2",defaultMessage:"Don't sync"},dontSyncDescription:{id:"ol0mde",defaultMessage:"ChatGPT will read your SharePoint files as needed, so replies may be slower."},internalKnowledgeTitle:{id:"9IqPsM",defaultMessage:"Chat, deep research, agent"},internalKnowledgeDescription:{id:"Mkivbe",defaultMessage:"Sync SharePoint files to ChatGPT for more relevant, up-to-date answers"},recommendedBadge:{id:"Wtyyql",defaultMessage:"Recommended"},syncTitle:{id:"w0EP7L",defaultMessage:"Sync"},syncDescription:{id:"WmlsRw",defaultMessage:"Sync SharePoint files to ChatGPT for faster, more relevant answers."},syncBadge:{id:"0OM3Oh",defaultMessage:"Sync"},internalKnowledgeTooltip:{id:"g8mQKA",defaultMessage:"Contact your admin to enable SharePoint for chat"}}),Zre=wa({messages:Yre});function R1(t,[e,n]){return Math.min(n,Math.max(e,t))}var Qre=[" ","Enter","ArrowUp","ArrowDown"],Jre=[" ","Enter"],Up="Select",[A_,N_,Xre]=SC(Up),[of]=Pc(Up,[Xre,G0]),I_=G0(),[eae,vl]=of(Up),[tae,nae]=of(Up),SO=t=>{const{__scopeSelect:e,children:n,open:s,defaultOpen:o,onOpenChange:r,value:a,defaultValue:l,onValueChange:c,dir:u,name:d,autoComplete:f,disabled:m,required:p,form:g}=t,h=I_(e),[_,x]=v.useState(null),[b,y]=v.useState(null),[S,C]=v.useState(!1),w=EC(u),[k=!1,E]=ld({prop:s,defaultProp:o,onChange:r}),[T,M]=ld({prop:a,defaultProp:l,onChange:c}),A=v.useRef(null),I=_?g||!!_.closest("form"):!0,[j,R]=v.useState(new Set),O=Array.from(j).map(L=>L.props.value).join(";");return i.jsx(sR,G(N({},h),{children:i.jsxs(eae,{required:p,scope:e,trigger:_,onTriggerChange:x,valueNode:b,onValueNodeChange:y,valueNodeHasChildren:S,onValueNodeHasChildrenChange:C,contentId:V0(),value:T,onValueChange:M,open:k,onOpenChange:E,dir:w,triggerPointerDownPosRef:A,disabled:m,children:[i.jsx(A_.Provider,{scope:e,children:i.jsx(tae,{scope:t.__scopeSelect,onNativeOptionAdd:v.useCallback(L=>{R(B=>new Set(B).add(L))},[]),onNativeOptionRemove:v.useCallback(L=>{R(B=>{const U=new Set(B);return U.delete(L),U})},[]),children:n})}),I?i.jsxs(WO,{"aria-hidden":!0,required:p,tabIndex:-1,name:d,autoComplete:f,value:T,onChange:L=>M(L.target.value),disabled:m,form:g,children:[T===void 0?i.jsx("option",{value:""}):null,Array.from(j)]},O):null]})}))};SO.displayName=Up;var CO="SelectTrigger",wO=v.forwardRef((t,e)=>{const h=t,{__scopeSelect:n,disabled:s=!1}=h,o=De(h,["__scopeSelect","disabled"]),r=I_(n),a=vl(CO,n),l=a.disabled||s,c=Qn(e,a.onTriggerChange),u=N_(n),d=v.useRef("touch"),[f,m,p]=qO(_=>{const x=u().filter(S=>!S.disabled),b=x.find(S=>S.value===a.value),y=KO(x,_,b);y!==void 0&&a.onValueChange(y.value)}),g=_=>{l||(a.onOpenChange(!0),p()),_&&(a.triggerPointerDownPosRef.current={x:Math.round(_.pageX),y:Math.round(_.pageY)})};return i.jsx(PC,G(N({asChild:!0},r),{children:i.jsx(bn.button,G(N({type:"button",role:"combobox","aria-controls":a.contentId,"aria-expanded":a.open,"aria-required":a.required,"aria-autocomplete":"none",dir:a.dir,"data-state":a.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":zO(a.value)?"":void 0},o),{ref:c,onClick:Gt(o.onClick,_=>{_.currentTarget.focus(),d.current!=="mouse"&&g(_)}),onPointerDown:Gt(o.onPointerDown,_=>{d.current=_.pointerType;const x=_.target;x.hasPointerCapture(_.pointerId)&&x.releasePointerCapture(_.pointerId),_.button===0&&_.ctrlKey===!1&&_.pointerType==="mouse"&&(g(_),_.preventDefault())}),onKeyDown:Gt(o.onKeyDown,_=>{const x=f.current!=="";!(_.ctrlKey||_.altKey||_.metaKey)&&_.key.length===1&&m(_.key),!(x&&_.key===" ")&&Qre.includes(_.key)&&(g(),_.preventDefault())})}))}))});wO.displayName=CO;var kO="SelectValue",EO=v.forwardRef((t,e)=>{const m=t,{__scopeSelect:n,className:s,style:o,children:r,placeholder:a=""}=m,l=De(m,["__scopeSelect","className","style","children","placeholder"]),c=vl(kO,n),{onValueNodeHasChildrenChange:u}=c,d=r!==void 0,f=Qn(e,c.onValueNodeChange);return li(()=>{u(d)},[u,d]),i.jsx(bn.span,G(N({},l),{ref:f,style:{pointerEvents:"none"},children:zO(c.value)?i.jsx(i.Fragment,{children:a}):r}))});EO.displayName=kO;var sae="SelectIcon",TO=v.forwardRef((t,e)=>{const r=t,{__scopeSelect:n,children:s}=r,o=De(r,["__scopeSelect","children"]);return i.jsx(bn.span,G(N({"aria-hidden":!0},o),{ref:e,children:s||""}))});TO.displayName=sae;var oae="SelectPortal",MO=t=>i.jsx(wC,N({asChild:!0},t));MO.displayName=oae;var Sc="SelectContent",AO=v.forwardRef((t,e)=>{const n=vl(Sc,t.__scopeSelect),[s,o]=v.useState();if(li(()=>{o(new DocumentFragment)},[]),!n.open){const r=s;return r?Xa.createPortal(i.jsx(NO,{scope:t.__scopeSelect,children:i.jsx(A_.Slot,{scope:t.__scopeSelect,children:i.jsx("div",{children:t.children})})}),r):null}return i.jsx(IO,G(N({},t),{ref:e}))});AO.displayName=Sc;var cr=10,[NO,Sl]=of(Sc),rae="SelectContentImpl",IO=v.forwardRef((t,e)=>{const J=t,{__scopeSelect:n,position:s="item-aligned",onCloseAutoFocus:o,onEscapeKeyDown:r,onPointerDownOutside:a,side:l,sideOffset:c,align:u,alignOffset:d,arrowPadding:f,collisionBoundary:m,collisionPadding:p,sticky:g,hideWhenDetached:h,avoidCollisions:_}=J,x=De(J,["__scopeSelect","position","onCloseAutoFocus","onEscapeKeyDown","onPointerDownOutside","side","sideOffset","align","alignOffset","arrowPadding","collisionBoundary","collisionPadding","sticky","hideWhenDetached","avoidCollisions"]),b=vl(Sc,n),[y,S]=v.useState(null),[C,w]=v.useState(null),k=Qn(e,Q=>S(Q)),[E,T]=v.useState(null),[M,A]=v.useState(null),I=N_(n),[j,R]=v.useState(!1),O=v.useRef(!1);v.useEffect(()=>{if(y)return oR(y)},[y]),rR();const L=v.useCallback(Q=>{const[ne,...ie]=I().map(le=>le.ref.current),[fe]=ie.slice(-1),ae=document.activeElement;for(const le of Q)if(le===ae||(le==null||le.scrollIntoView({block:"nearest"}),le===ne&&C&&(C.scrollTop=0),le===fe&&C&&(C.scrollTop=C.scrollHeight),le==null||le.focus(),document.activeElement!==ae))return},[I,C]),B=v.useCallback(()=>L([E,y]),[L,E,y]);v.useEffect(()=>{j&&B()},[j,B]);const{onOpenChange:U,triggerPointerDownPosRef:H}=b;v.useEffect(()=>{if(y){let Q={x:0,y:0};const ne=fe=>{var ae,le,pe,_e;Q={x:Math.abs(Math.round(fe.pageX)-((le=(ae=H.current)==null?void 0:ae.x)!=null?le:0)),y:Math.abs(Math.round(fe.pageY)-((_e=(pe=H.current)==null?void 0:pe.y)!=null?_e:0))}},ie=fe=>{Q.x<=10&&Q.y<=10?fe.preventDefault():y.contains(fe.target)||U(!1),document.removeEventListener("pointermove",ne),H.current=null};return H.current!==null&&(document.addEventListener("pointermove",ne),document.addEventListener("pointerup",ie,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",ne),document.removeEventListener("pointerup",ie,{capture:!0})}}},[y,U,H]),v.useEffect(()=>{const Q=()=>U(!1);return window.addEventListener("blur",Q),window.addEventListener("resize",Q),()=>{window.removeEventListener("blur",Q),window.removeEventListener("resize",Q)}},[U]);const[$,F]=qO(Q=>{const ne=I().filter(ae=>!ae.disabled),ie=ne.find(ae=>ae.ref.current===document.activeElement),fe=KO(ne,Q,ie);fe&&setTimeout(()=>fe.ref.current.focus())}),z=v.useCallback((Q,ne,ie)=>{const fe=!O.current&&!ie;(b.value!==void 0&&b.value===ne||fe)&&(T(Q),fe&&(O.current=!0))},[b.value]),W=v.useCallback(()=>y==null?void 0:y.focus(),[y]),Y=v.useCallback((Q,ne,ie)=>{const fe=!O.current&&!ie;(b.value!==void 0&&b.value===ne||fe)&&A(Q)},[b.value]),K=s==="popper"?Mv:jO,Z=K===Mv?{side:l,sideOffset:c,align:u,alignOffset:d,arrowPadding:f,collisionBoundary:m,collisionPadding:p,sticky:g,hideWhenDetached:h,avoidCollisions:_}:{};return i.jsx(NO,{scope:n,content:y,viewport:C,onViewportChange:w,itemRefCallback:z,selectedItem:E,onItemLeave:W,itemTextRefCallback:Y,focusSelectedItem:B,selectedItemText:M,position:s,isPositioned:j,searchRef:$,children:i.jsx(aR,{as:iR,allowPinchZoom:!0,children:i.jsx(lR,{asChild:!0,trapped:b.open,onMountAutoFocus:Q=>{Q.preventDefault()},onUnmountAutoFocus:Gt(o,Q=>{var ne;(ne=b.trigger)==null||ne.focus({preventScroll:!0}),Q.preventDefault()}),children:i.jsx(z0,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:r,onPointerDownOutside:a,onFocusOutside:Q=>Q.preventDefault(),onDismiss:()=>b.onOpenChange(!1),children:i.jsx(K,G(N(N({role:"listbox",id:b.contentId,"data-state":b.open?"open":"closed",dir:b.dir,onContextMenu:Q=>Q.preventDefault()},x),Z),{onPlaced:()=>R(!0),ref:k,style:N({display:"flex",flexDirection:"column",outline:"none"},x.style),onKeyDown:Gt(x.onKeyDown,Q=>{const ne=Q.ctrlKey||Q.altKey||Q.metaKey;if(Q.key==="Tab"&&Q.preventDefault(),!ne&&Q.key.length===1&&F(Q.key),["ArrowUp","ArrowDown","Home","End"].includes(Q.key)){let fe=I().filter(ae=>!ae.disabled).map(ae=>ae.ref.current);if(["ArrowUp","End"].includes(Q.key)&&(fe=fe.slice().reverse()),["ArrowUp","ArrowDown"].includes(Q.key)){const ae=Q.target,le=fe.indexOf(ae);fe=fe.slice(le+1)}setTimeout(()=>L(fe)),Q.preventDefault()}})}))})})})})});IO.displayName=rae;var aae="SelectItemAlignedPosition",jO=v.forwardRef((t,e)=>{const k=t,{__scopeSelect:n,onPlaced:s}=k,o=De(k,["__scopeSelect","onPlaced"]),r=vl(Sc,n),a=Sl(Sc,n),[l,c]=v.useState(null),[u,d]=v.useState(null),f=Qn(e,E=>d(E)),m=N_(n),p=v.useRef(!1),g=v.useRef(!0),{viewport:h,selectedItem:_,selectedItemText:x,focusSelectedItem:b}=a,y=v.useCallback(()=>{if(r.trigger&&r.valueNode&&l&&u&&h&&_&&x){const E=r.trigger.getBoundingClientRect(),T=u.getBoundingClientRect(),M=r.valueNode.getBoundingClientRect(),A=x.getBoundingClientRect();if(r.dir!=="rtl"){const ae=A.left-T.left,le=M.left-ae,pe=E.left-le,_e=E.width+pe,Ce=Math.max(_e,T.width),ge=window.innerWidth-cr,Re=R1(le,[cr,Math.max(cr,ge-Ce)]);l.style.minWidth=_e+"px",l.style.left=Re+"px"}else{const ae=T.right-A.right,le=window.innerWidth-M.right-ae,pe=window.innerWidth-E.right-le,_e=E.width+pe,Ce=Math.max(_e,T.width),ge=window.innerWidth-cr,Re=R1(le,[cr,Math.max(cr,ge-Ce)]);l.style.minWidth=_e+"px",l.style.right=Re+"px"}const I=m(),j=window.innerHeight-cr*2,R=h.scrollHeight,O=window.getComputedStyle(u),L=parseInt(O.borderTopWidth,10),B=parseInt(O.paddingTop,10),U=parseInt(O.borderBottomWidth,10),H=parseInt(O.paddingBottom,10),$=L+B+R+H+U,F=Math.min(_.offsetHeight*5,$),z=window.getComputedStyle(h),W=parseInt(z.paddingTop,10),Y=parseInt(z.paddingBottom,10),K=E.top+E.height/2-cr,Z=j-K,J=_.offsetHeight/2,Q=_.offsetTop+J,ne=L+B+Q,ie=$-ne;if(ne<=K){const ae=I.length>0&&_===I[I.length-1].ref.current;l.style.bottom="0px";const le=u.clientHeight-h.offsetTop-h.offsetHeight,pe=Math.max(Z,J+(ae?Y:0)+le+U),_e=ne+pe;l.style.height=_e+"px"}else{const ae=I.length>0&&_===I[0].ref.current;l.style.top="0px";const pe=Math.max(K,L+h.offsetTop+(ae?W:0)+J)+ie;l.style.height=pe+"px",h.scrollTop=ne-K+h.offsetTop}l.style.margin="".concat(cr,"px 0"),l.style.minHeight=F+"px",l.style.maxHeight=j+"px",s==null||s(),requestAnimationFrame(()=>p.current=!0)}},[m,r.trigger,r.valueNode,l,u,h,_,x,r.dir,s]);li(()=>y(),[y]);const[S,C]=v.useState();li(()=>{u&&C(window.getComputedStyle(u).zIndex)},[u]);const w=v.useCallback(E=>{E&&g.current===!0&&(y(),b==null||b(),g.current=!1)},[y,b]);return i.jsx(lae,{scope:n,contentWrapper:l,shouldExpandOnScrollRef:p,onScrollButtonChange:w,children:i.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:S},children:i.jsx(bn.div,G(N({},o),{ref:f,style:N({boxSizing:"border-box",maxHeight:"100%"},o.style)}))})})});jO.displayName=aae;var iae="SelectPopperPosition",Mv=v.forwardRef((t,e)=>{const l=t,{__scopeSelect:n,align:s="start",collisionPadding:o=cr}=l,r=De(l,["__scopeSelect","align","collisionPadding"]),a=I_(n);return i.jsx(cR,G(N(N({},a),r),{ref:e,align:s,collisionPadding:o,style:G(N({boxSizing:"border-box"},r.style),{"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"})}))});Mv.displayName=iae;var[lae,cw]=of(Sc,{}),Av="SelectViewport",PO=v.forwardRef((t,e)=>{const u=t,{__scopeSelect:n,nonce:s}=u,o=De(u,["__scopeSelect","nonce"]),r=Sl(Av,n),a=cw(Av,n),l=Qn(e,r.onViewportChange),c=v.useRef(0);return i.jsxs(i.Fragment,{children:[i.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),i.jsx(A_.Slot,{scope:n,children:i.jsx(bn.div,G(N({"data-radix-select-viewport":"",role:"presentation"},o),{ref:l,style:N({position:"relative",flex:1,overflow:"hidden auto"},o.style),onScroll:Gt(o.onScroll,d=>{const f=d.currentTarget,{contentWrapper:m,shouldExpandOnScrollRef:p}=a;if(p!=null&&p.current&&m){const g=Math.abs(c.current-f.scrollTop);if(g>0){const h=window.innerHeight-cr*2,_=parseFloat(m.style.minHeight),x=parseFloat(m.style.height),b=Math.max(_,x);if(b<h){const y=b+g,S=Math.min(h,y),C=y-S;m.style.height=S+"px",m.style.bottom==="0px"&&(f.scrollTop=C>0?C:0,m.style.justifyContent="flex-end")}}}c.current=f.scrollTop})}))})]})});PO.displayName=Av;var RO="SelectGroup",[cae,uae]=of(RO),OO=v.forwardRef((t,e)=>{const r=t,{__scopeSelect:n}=r,s=De(r,["__scopeSelect"]),o=V0();return i.jsx(cae,{scope:n,id:o,children:i.jsx(bn.div,G(N({role:"group","aria-labelledby":o},s),{ref:e}))})});OO.displayName=RO;var LO="SelectLabel",DO=v.forwardRef((t,e)=>{const r=t,{__scopeSelect:n}=r,s=De(r,["__scopeSelect"]),o=uae(LO,n);return i.jsx(bn.div,G(N({id:o.id},s),{ref:e}))});DO.displayName=LO;var O1="SelectItem",[dae,BO]=of(O1),FO=v.forwardRef((t,e)=>{const b=t,{__scopeSelect:n,value:s,disabled:o=!1,textValue:r}=b,a=De(b,["__scopeSelect","value","disabled","textValue"]),l=vl(O1,n),c=Sl(O1,n),u=l.value===s,[d,f]=v.useState(r!=null?r:""),[m,p]=v.useState(!1),g=Qn(e,y=>{var S;return(S=c.itemRefCallback)==null?void 0:S.call(c,y,s,o)}),h=V0(),_=v.useRef("touch"),x=()=>{o||(l.onValueChange(s),l.onOpenChange(!1))};if(s==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return i.jsx(dae,{scope:n,value:s,disabled:o,textId:h,isSelected:u,onItemTextChange:v.useCallback(y=>{f(S=>{var C;return S||((C=y==null?void 0:y.textContent)!=null?C:"").trim()})},[]),children:i.jsx(A_.ItemSlot,{scope:n,value:s,disabled:o,textValue:d,children:i.jsx(bn.div,G(N({role:"option","aria-labelledby":h,"data-highlighted":m?"":void 0,"aria-selected":u&&m,"data-state":u?"checked":"unchecked","aria-disabled":o||void 0,"data-disabled":o?"":void 0,tabIndex:o?void 0:-1},a),{ref:g,onFocus:Gt(a.onFocus,()=>p(!0)),onBlur:Gt(a.onBlur,()=>p(!1)),onClick:Gt(a.onClick,()=>{_.current!=="mouse"&&x()}),onPointerUp:Gt(a.onPointerUp,()=>{_.current==="mouse"&&x()}),onPointerDown:Gt(a.onPointerDown,y=>{_.current=y.pointerType}),onPointerMove:Gt(a.onPointerMove,y=>{var S;_.current=y.pointerType,o?(S=c.onItemLeave)==null||S.call(c):_.current==="mouse"&&y.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Gt(a.onPointerLeave,y=>{var S;y.currentTarget===document.activeElement&&((S=c.onItemLeave)==null||S.call(c))}),onKeyDown:Gt(a.onKeyDown,y=>{var C;((C=c.searchRef)==null?void 0:C.current)!==""&&y.key===" "||(Jre.includes(y.key)&&x(),y.key===" "&&y.preventDefault())})}))})})});FO.displayName=O1;var im="SelectItemText",UO=v.forwardRef((t,e)=>{const x=t,{__scopeSelect:n,className:s,style:o}=x,r=De(x,["__scopeSelect","className","style"]),a=vl(im,n),l=Sl(im,n),c=BO(im,n),u=nae(im,n),[d,f]=v.useState(null),m=Qn(e,b=>f(b),c.onItemTextChange,b=>{var y;return(y=l.itemTextRefCallback)==null?void 0:y.call(l,b,c.value,c.disabled)}),p=d==null?void 0:d.textContent,g=v.useMemo(()=>i.jsx("option",{value:c.value,disabled:c.disabled,children:p},c.value),[c.disabled,c.value,p]),{onNativeOptionAdd:h,onNativeOptionRemove:_}=u;return li(()=>(h(g),()=>_(g)),[h,_,g]),i.jsxs(i.Fragment,{children:[i.jsx(bn.span,G(N({id:c.textId},r),{ref:m})),c.isSelected&&a.valueNode&&!a.valueNodeHasChildren?Xa.createPortal(r.children,a.valueNode):null]})});UO.displayName=im;var HO="SelectItemIndicator",$O=v.forwardRef((t,e)=>{const r=t,{__scopeSelect:n}=r,s=De(r,["__scopeSelect"]);return BO(HO,n).isSelected?i.jsx(bn.span,G(N({"aria-hidden":!0},s),{ref:e})):null});$O.displayName=HO;var Nv="SelectScrollUpButton",fae=v.forwardRef((t,e)=>{const n=Sl(Nv,t.__scopeSelect),s=cw(Nv,t.__scopeSelect),[o,r]=v.useState(!1),a=Qn(e,s.onScrollButtonChange);return li(()=>{if(n.viewport&&n.isPositioned){let l=function(){const u=c.scrollTop>0;r(u)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),o?i.jsx(GO,G(N({},t),{ref:a,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}})):null});fae.displayName=Nv;var Iv="SelectScrollDownButton",mae=v.forwardRef((t,e)=>{const n=Sl(Iv,t.__scopeSelect),s=cw(Iv,t.__scopeSelect),[o,r]=v.useState(!1),a=Qn(e,s.onScrollButtonChange);return li(()=>{if(n.viewport&&n.isPositioned){let l=function(){const u=c.scrollHeight-c.clientHeight,d=Math.ceil(c.scrollTop)<u;r(d)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),o?i.jsx(GO,G(N({},t),{ref:a,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}})):null});mae.displayName=Iv;var GO=v.forwardRef((t,e)=>{const u=t,{__scopeSelect:n,onAutoScroll:s}=u,o=De(u,["__scopeSelect","onAutoScroll"]),r=Sl("SelectScrollButton",n),a=v.useRef(null),l=N_(n),c=v.useCallback(()=>{a.current!==null&&(window.clearInterval(a.current),a.current=null)},[]);return v.useEffect(()=>()=>c(),[c]),li(()=>{var f;const d=l().find(m=>m.ref.current===document.activeElement);(f=d==null?void 0:d.ref.current)==null||f.scrollIntoView({block:"nearest"})},[l]),i.jsx(bn.div,G(N({"aria-hidden":!0},o),{ref:e,style:N({flexShrink:0},o.style),onPointerDown:Gt(o.onPointerDown,()=>{a.current===null&&(a.current=window.setInterval(s,50))}),onPointerMove:Gt(o.onPointerMove,()=>{var d;(d=r.onItemLeave)==null||d.call(r),a.current===null&&(a.current=window.setInterval(s,50))}),onPointerLeave:Gt(o.onPointerLeave,()=>{c()})}))}),pae="SelectSeparator",VO=v.forwardRef((t,e)=>{const o=t,{__scopeSelect:n}=o,s=De(o,["__scopeSelect"]);return i.jsx(bn.div,G(N({"aria-hidden":!0},s),{ref:e}))});VO.displayName=pae;var jv="SelectArrow",gae=v.forwardRef((t,e)=>{const l=t,{__scopeSelect:n}=l,s=De(l,["__scopeSelect"]),o=I_(n),r=vl(jv,n),a=Sl(jv,n);return r.open&&a.position==="popper"?i.jsx(uR,G(N(N({},o),s),{ref:e})):null});gae.displayName=jv;function zO(t){return t===""||t===void 0}var WO=v.forwardRef((t,e)=>{const l=t,{value:n}=l,s=De(l,["value"]),o=v.useRef(null),r=Qn(e,o),a=TC(n);return v.useEffect(()=>{const c=o.current,u=window.HTMLSelectElement.prototype,f=Object.getOwnPropertyDescriptor(u,"value").set;if(a!==n&&f){const m=new Event("change",{bubbles:!0});f.call(c,n),c.dispatchEvent(m)}},[a,n]),i.jsx(CC,{asChild:!0,children:i.jsx("select",G(N({},s),{ref:r,defaultValue:n}))})});WO.displayName="BubbleSelect";function qO(t){const e=Am(t),n=v.useRef(""),s=v.useRef(0),o=v.useCallback(a=>{const l=n.current+a;e(l),(function c(u){n.current=u,window.clearTimeout(s.current),u!==""&&(s.current=window.setTimeout(()=>c(""),1e3))})(l)},[e]),r=v.useCallback(()=>{n.current="",window.clearTimeout(s.current)},[]);return v.useEffect(()=>()=>window.clearTimeout(s.current),[]),[n,o,r]}function KO(t,e,n){const o=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,r=n?t.indexOf(n):-1;let a=hae(t,Math.max(r,0));o.length===1&&(a=a.filter(u=>u!==n));const c=a.find(u=>u.textValue.toLowerCase().startsWith(o.toLowerCase()));return c!==n?c:void 0}function hae(t,e){return t.map((n,s)=>t[(e+s)%t.length])}var _ae=SO,xae=wO,yae=EO,bae=TO,vae=MO,Sae=AO,YO=PO,Cae=OO,wae=DO,kae=FO,Eae=UO,Tae=$O,Mae=VO;function Aae(r,o){var a=r,{children:t,iconClassName:e,className:n}=a,s=De(a,["children","iconClassName","className"]);return i.jsxs(kae,G(N({ref:o,className:q("__menu-item flex justify-between",n)},s),{children:[i.jsx(Eae,{children:t}),i.jsx(Tae,{className:"trailing",children:i.jsx(h1,{className:e!=null?e:"icon-sm"})})]}))}function Nae(t){return i.jsx(NK,N({$as:xae},t))}function Iae(s){var o=s,{children:t,className:e}=o,n=De(o,["children","className"]);return i.jsx(dR,G(N({$as:Sae,side:"bottom",sideOffset:4,alignOffset:-4,position:"popper",className:q("max-h-[60vh] min-w-[220px] overflow-auto",e)},n),{children:i.jsx(YO,{children:t})}))}function jae(){return i.jsx(bae,{children:i.jsx($o,{className:"icon-sm"})})}function Pae({className:t}){return i.jsx(Mae,{className:q("bg-token-border-default mx-5 my-2 h-px",t)})}function Rae({children:t,className:e}){return i.jsx(wae,{className:q("text-token-text-secondary mx-2 my-1 px-3 text-xs font-semibold",e),children:t})}function Ltt({options:t,value:e,onValueChange:n,disabled:s,defaultValue:o,placeholder:r,triggerClassName:a,contentClassName:l,triggerId:c}){return i.jsxs(sn.Root,{value:e,onValueChange:n,disabled:s,defaultValue:o,children:[i.jsxs(sn.Trigger,{className:a,id:c,children:[i.jsx(sn.Value,{placeholder:r}),i.jsx(sn.Icon,{})]}),i.jsx(sn.Portal,{children:i.jsx(sn.Content,{className:l,children:t.map(u=>i.jsx(sn.Item,{value:u.value,children:u.label},u.value))})})]})}const sn={Root:_ae,Trigger:Nae,Value:yae,Icon:jae,Portal:vae,Content:Iae,Item:Od.forwardRef(Aae),Separator:Pae,Label:Rae,Group:Cae,Viewport:YO};var ky,h4;function Oae(){if(h4)return ky;h4=1;var t=IK(),e=t(function(n,s,o){n[o?0:1].push(s)},function(){return[[],[]]});return ky=e,ky}var Lae=Oae();const uw=ps(Lae),Dae=we({selectProductTitle:{id:"tiiSob",defaultMessage:"Select a connection type"},deepResearchTitle:{id:"BufFDR",defaultMessage:"Deep research"},deepResearchAndOdysseyTitle:{id:"y9kp7g",defaultMessage:"Deep research and agent mode"},deepResearchAndOdysseyDescription:{id:"E2YSMq",defaultMessage:"Find, analyze, and synthesize your Box files to create comprehensive reports"},deepResearchDescription:{id:"sQ+00J",defaultMessage:"Find, analyze, and synthesize your Box files to create comprehensive reports"},dontSyncTitle:{id:"M9p5Sr",defaultMessage:"Don't sync"},dontSyncDescription:{id:"uJTHjO",defaultMessage:"ChatGPT will read your Box files as needed, so replies may be slower."},internalKnowledgeTitle:{id:"8z2iu4",defaultMessage:"Chat"},internalKnowledgeDescription:{id:"xK+380",defaultMessage:"Sync Box files to ChatGPT for more relevant, up-to-date answers"},recommendedBadge:{id:"Wtyyql",defaultMessage:"Recommended"},syncTitle:{id:"nbQOhy",defaultMessage:"Sync"},syncDescription:{id:"QVxBJI",defaultMessage:"Sync Box files to ChatGPT for faster, more relevant answers."},syncBadge:{id:"0OM3Oh",defaultMessage:"Sync"},internalKnowledgeTooltip:{id:"4Gp6+x",defaultMessage:"Contact your admin to enable Box for chat"}}),Bae=wa({messages:Dae}),Fae=we({selectProductTitle:{id:"Kc1KGe",defaultMessage:"Select a connection type"},deepResearchTitle:{id:"BufFDR",defaultMessage:"Deep research"},deepResearchAndOdysseyTitle:{id:"y9kp7g",defaultMessage:"Deep research and agent mode"},deepResearchAndOdysseyDescription:{id:"YxjjQU",defaultMessage:"Find, analyze, and synthesize your Confluence pages to create comprehensive reports"},deepResearchDescription:{id:"SmRTX8",defaultMessage:"Find, analyze, and synthesize your Confluence pages to create comprehensive reports"},dontSyncTitle:{id:"B1m/Ur",defaultMessage:"Don't sync"},dontSyncDescription:{id:"nDBuCO",defaultMessage:"ChatGPT will read your Confluence pages as needed, so replies may be slower."},internalKnowledgeTitle:{id:"8ckwHH",defaultMessage:"Chat"},internalKnowledgeDescription:{id:"CkaEi7",defaultMessage:"Sync Confluence pages to ChatGPT for more relevant, up-to-date answers"},recommendedBadge:{id:"Wtyyql",defaultMessage:"Recommended"},syncTitle:{id:"tJk3ba",defaultMessage:"Sync"},syncDescription:{id:"di8xMd",defaultMessage:"Sync Confluence pages to ChatGPT for faster, more relevant answers."},syncBadge:{id:"0OM3Oh",defaultMessage:"Sync"},internalKnowledgeTooltip:{id:"dKvJHF",defaultMessage:"Contact your admin to enable Confluence for chat"}}),Uae=wa({messages:Fae}),Hae=we({selectProductTitle:{id:"5spMkf",defaultMessage:"Select a connection type"},deepResearchTitle:{id:"BufFDR",defaultMessage:"Deep research"},deepResearchAndOdysseyTitle:{id:"y9kp7g",defaultMessage:"Deep research and agent mode"},deepResearchAndOdysseyDescription:{id:"U0acJQ",defaultMessage:"Find, analyze, and synthesize your Dropbox files to create comprehensive reports"},deepResearchDescription:{id:"jIJEzP",defaultMessage:"Find, analyze, and synthesize your Dropbox files to create comprehensive reports"},dontSyncTitle:{id:"8B2iTh",defaultMessage:"Don't sync"},dontSyncDescription:{id:"MWu53i",defaultMessage:"ChatGPT will read your Dropbox files as needed, so replies may be slower."},internalKnowledgeTitle:{id:"iUMNhW",defaultMessage:"Chat"},internalKnowledgeDescription:{id:"73blMa",defaultMessage:"Sync Dropbox files to ChatGPT for more relevant, up-to-date answers"},recommendedBadge:{id:"Wtyyql",defaultMessage:"Recommended"},syncTitle:{id:"aRVh2X",defaultMessage:"Sync"},syncDescription:{id:"uTHxb2",defaultMessage:"Sync Dropbox files to ChatGPT for faster, more relevant answers."},syncBadge:{id:"0OM3Oh",defaultMessage:"Sync"},internalKnowledgeTooltip:{id:"/uVHMl",defaultMessage:"Contact your admin to enable Dropbox for chat"}}),$ae=wa({messages:Hae}),Gae=we({selectProductTitle:{id:"vNGjSS",defaultMessage:"Select a connection type"},deepResearchTitle:{id:"BufFDR",defaultMessage:"Deep research"},deepResearchAndOdysseyTitle:{id:"y9kp7g",defaultMessage:"Deep research and agent mode"},deepResearchAndOdysseyDescription:{id:"1X1JDE",defaultMessage:"Find, analyze, and synthesize your Intercom conversations to create comprehensive reports"},deepResearchDescription:{id:"0ExpFM",defaultMessage:"Find, analyze, and synthesize your Intercom conversations to create comprehensive reports"},dontSyncTitle:{id:"4WufmE",defaultMessage:"Don't sync"},dontSyncDescription:{id:"0BFTy+",defaultMessage:"ChatGPT will read your Intercom conversations as needed, so replies may be slower."},internalKnowledgeTitle:{id:"m/G/ff",defaultMessage:"Chat"},internalKnowledgeDescription:{id:"4gC4/b",defaultMessage:"Sync Intercom conversations to ChatGPT for more relevant, up-to-date answers"},internalKnowledgeTooltip:{id:"YxCdN8",defaultMessage:"Contact your admin to enable Intercom for chat"},recommendedBadge:{id:"Wtyyql",defaultMessage:"Recommended"},syncTitle:{id:"jafwiu",defaultMessage:"Sync"},syncDescription:{id:"ISqAI/",defaultMessage:"Sync Intercom conversations to ChatGPT for faster, more relevant answers."},syncBadge:{id:"0OM3Oh",defaultMessage:"Sync"}}),Vae=wa({messages:Gae}),zae=we({selectProductTitle:{id:"kU51Yz",defaultMessage:"Select a connection type"},deepResearchTitle:{id:"BufFDR",defaultMessage:"Deep research"},deepResearchAndOdysseyTitle:{id:"y9kp7g",defaultMessage:"Deep research and agent mode"},deepResearchAndOdysseyDescription:{id:"5P9nHy",defaultMessage:"Find, analyze, and synthesize your Linear issues to create comprehensive reports"},deepResearchDescription:{id:"7qO5UY",defaultMessage:"Find, analyze, and synthesize your Linear issues to create comprehensive reports"},dontSyncTitle:{id:"s+7AVU",defaultMessage:"Don't sync"},dontSyncDescription:{id:"qQEaBe",defaultMessage:"ChatGPT will read your Linear issues as needed, so replies may be slower."},internalKnowledgeTitle:{id:"CZbTgH",defaultMessage:"Chat"},internalKnowledgeDescription:{id:"S+Hglq",defaultMessage:"Sync Linear issues to ChatGPT for more relevant, up-to-date answers"},recommendedBadge:{id:"Wtyyql",defaultMessage:"Recommended"},syncTitle:{id:"XI3bjb",defaultMessage:"Sync"},syncDescription:{id:"3e8sdS",defaultMessage:"Sync Linear issues to ChatGPT for faster, more relevant answers."},syncBadge:{id:"0OM3Oh",defaultMessage:"Sync"},internalKnowledgeTooltip:{id:"lxy6iQ",defaultMessage:"Contact your admin to enable Linear for chat"}}),Wae=wa({messages:zae}),_4=je(()=>Me(()=>import("./604d4c3d-edk1z1un3e93kfkg.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10])).then(t=>t.RedirectContent));function Jn({platformConnectorType:t,knowledgeConnectorType:e,connectorId:n,ProductSelectComponent:s,syncConnectorId:o,showProductSelectWithoutDeepResearch:r}){return function({onClose:l,connector:c,hideHeaderIcons:u}){var Le;const d=te(),f=d.formatMessage({id:"FormField.errorIcon",defaultMessage:"Error"}),m=NC(),p=!!XP(),[g,h]=v.useState(!1),_=(Le=IC())!=null?Le:"unknown_referrer",x=Et(),b=$d(),y=lp(),S=v.useMemo(()=>fR(c.link_params_schema),[c.link_params_schema]),[C,w]=v.useState({}),k=v.useMemo(()=>mR(S,C),[S,C]),[E,T]=v.useState({}),M=v.useMemo(()=>{const ce=new Set(S.map(He=>He.name)),be={};for(const[He,Ge]of Object.entries(E))ce.has(He)&&(be[He]=Ge);return be},[E,S]),A=v.useCallback((ce,be)=>{w(He=>G(N({},He),{[ce]:be})),T(He=>{if(!He[ce])return He;const Ge=N({},He);return delete Ge[ce],Ge})},[]),I=(x==null?void 0:x.planType)===et.SELF_SERVE_BUSINESS?!0:!!(x!=null&&x.isPersonalAccount()&&b),{availableConnectors:j,isLoading:R}=AC(),{availableConnectors:O,isLoading:L}=bO(),{isLoading:B,internalKnowledgeConfigs:U,internalKnowledgeEnabled:H}=hie(e),[$,F]=v.useMemo(()=>uw(U!=null?U:[],ce=>ce.user_connection_details.auth_status==="not_connected"),[U]),z=$.length,W=F.length,Y=z>0||I,{connectorLinks:K,refetch:Z,isLoading:J}=Vo({productSku:An.CONNECTOR_SETTING,fetchValidLinksOnly:!0}),{refetch:Q}=Vo({productSku:An.CONNECTOR_SETTING,fetchValidLinksOnly:!1,skip:!0}),ne=rw(),{mutateAsync:ie}=tR(),fe=v.useMemo(()=>{var ce;return!!((ce=K.get(n))!=null&&ce.length)},[K]),ae=!fe&&j.some(ce=>ce.type===t),le=!fe&&O.some(ce=>ce.type===t),pe=ae||le,_e=!!(s&&r&&Y),Ce=!!s&&m!==An.DEEP_RESEARCH&&(pe||_e)&&(Y||!(x!=null&&x.isPersonalAccount())&&H&&W<1&&!I),ge=pe?le?"deepResearchAndOdyssey":"deepResearch":null,Re=Y&&pe,ke=m!==An.DEEP_RESEARCH&&Re&&xe("3495630358"),he=o==null,[Ee,Pe]=v.useState(()=>p||Y&&!pe?"internalKnowledge":m===An.DEEP_RESEARCH?"deepResearch":ke?he?"internalKnowledge":ge:null),Ae=m===An.DEEP_RESEARCH||Ee==="deepResearch"||Ee==="deepResearchAndOdyssey"||!Ce&&pe,de=Ee==="internalKnowledge"||!Ce&&m!==An.DEEP_RESEARCH&&Y,oe=Ae?An.DEEP_RESEARCH:An.CONNECTOR_SETTING,se=de&&Y,Oe=se&&o!=null,Ne=m!==An.DEEP_RESEARCH&&(B||Ce&&(R||L))||Ce&&J,ze=S.length>0?i.jsxs("div",{className:"flex flex-col gap-3",children:[i.jsxs("div",{className:"flex flex-col gap-1",children:[i.jsx("div",{className:"text-token-text-primary text-sm font-semibold",children:i.jsx(P,N({},ta.sectionTitle))}),i.jsx("div",{className:"text-token-text-secondary text-xs",children:i.jsx(P,N({},ta.sectionDescription))})]}),i.jsx("div",{className:"flex flex-col gap-3",children:S.map(ce=>{var at,Xe,gt;const be=ce.required?d.formatMessage(ta.fieldLabelRequired,{label:ce.title}):ce.title,He=d.formatMessage(ta.fieldPlaceholder,{label:ce.title}),Ge=M[ce.name];if(ce.enumValues&&ce.enumValues.length>0){const ht="link_param_".concat(ce.name),Zt="".concat(ht,"_label"),It=Ge?"".concat(ht,"_error"):void 0,lt=(at=k[ce.name])!=null?at:"";return i.jsxs("div",{className:"flex flex-col gap-1",children:[i.jsx("label",{id:Zt,className:"text-token-text-primary text-xs font-semibold",htmlFor:ht,children:be}),i.jsxs(sn.Root,{value:lt===""?void 0:lt,onValueChange:Mt=>A(ce.name,Mt),children:[i.jsxs(sn.Trigger,{id:ht,"aria-labelledby":Zt,"aria-describedby":It,"aria-invalid":Ge?!0:void 0,className:"border-token-border-heavy bg-token-bg-primary w-full justify-between rounded-md text-start",children:[i.jsx("div",{className:"flex-1 truncate text-sm",children:i.jsx(sn.Value,{placeholder:He})}),i.jsx(sn.Icon,{})]}),i.jsx(sn.Portal,{children:i.jsx(sn.Content,{className:"border-token-border-heavy border",children:(Xe=ce.enumValues)==null?void 0:Xe.map(Mt=>i.jsx(sn.Item,{value:Mt,children:Mt},Mt))})})]}),Ge?i.jsxs("div",{id:It,className:"flex items-center gap-1 text-xs text-red-500",children:[i.jsx(M_,{title:f}),Ge]}):null,ce.description?i.jsx("div",{className:"text-token-text-secondary text-xs",children:ce.description}):null]},ce.name)}return i.jsxs("div",{className:"flex flex-col gap-1",children:[i.jsx(lw,{name:"link_param_".concat(ce.name),displayName:be,value:(gt=k[ce.name])!=null?gt:"",onChange:ht=>A(ce.name,ht.target.value),placeholder:He,error:Ge,showErrorIcon:!0}),ce.description?i.jsx("div",{className:"text-token-text-secondary text-xs",children:ce.description}):null]},ce.name)})})]}):void 0,Qe=v.useCallback(async()=>{var be;let ce;if(S.length>0){const{sanitizedLinkParams:He,errors:Ge}=pR(S,k,d);if(Object.keys(Ge).length>0){T(Ge),y.danger(d.formatMessage(ta.requiredFieldsToast));return}T({}),ce=He}try{h(!0),aw("popup");const He=ne(c),Ge=Oe&&o!=null?o:c.id,nt=await jC({connector:c,redirectAfter:He||void 0,toaster:y,openPopup:!0,intl:d,productSku:oe,connectorIdOverride:Oe?o:void 0,linkParams:ce});if(await Z(),se)try{const{data:at}=await Q(),Xe=nt&&typeof nt=="object"?nt.linkId:void 0,gt=(be=at==null?void 0:at.get(Ge))==null?void 0:be[0];let ht=null;typeof Xe=="string"?ht={id:Xe,name:c.name,connector_id:Ge}:gt&&typeof gt.id=="string"&&(ht={id:gt.id,name:c.name,connector_id:Ge}),ht&&(await ie({link:ht,isConnectingAndUpgrading:!0,referrer:_}),setTimeout(()=>{tv()},1e3))}catch(at){}l()}catch(He){h(!1)}},[c,d,S,k,ne,l,oe,Z,Q,Oe,se,y,ie,_]);return Ne?i.jsx("div",{className:"flex justify-center",children:i.jsx(Us,{})}):i.jsxs(i.Fragment,{children:[s&&Ce&&!Ee&&i.jsx(s,{onClose:l,connector:c,onContinue:Pe,canAddDeepResearch:ae,canAddOdyssey:le,canAddInternalKnowledge:Y}),(Ae||se)&&i.jsx(_4,{connector:c,onClose:l,isConnecting:g,onContinue:Qe,productSku:oe,canSync:ke,isRequestingSync:Ee==="internalKnowledge",setIsRequestingSync:ce=>Pe(ce?"internalKnowledge":ge),additionalContent:ze,hideHeaderIcons:u}),de&&!se&&i.jsx(_4,{connector:c,onClose:()=>{Pe(null),Ce||l()},isConnecting:g,onContinue:Qe,productSku:oe,canSync:ke,isRequestingSync:Ee==="internalKnowledge",setIsRequestingSync:ce=>Pe(ce?"internalKnowledge":ge),additionalContent:ze,hideHeaderIcons:u})]})}}const qae=Jn({platformConnectorType:Te.SHAREPOINT_CONNECTOR,knowledgeConnectorType:"sharepoint",connectorId:Bu,ProductSelectComponent:Zre}),Kae=Jn({platformConnectorType:Te.DROPBOX_CONNECTOR,knowledgeConnectorType:"dropbox",connectorId:FK,ProductSelectComponent:$ae}),Yae=Jn({platformConnectorType:Te.BOX_CONNECTOR,knowledgeConnectorType:"box",connectorId:BK,ProductSelectComponent:Bae}),Zae=Jn({platformConnectorType:Te.LINEAR_CONNECTOR,knowledgeConnectorType:"linear",connectorId:DK,ProductSelectComponent:Wae}),Qae=Jn({platformConnectorType:Te.JIRA_CONNECTOR,knowledgeConnectorType:"jira",connectorId:un[Te.JIRA_CONNECTOR],ProductSelectComponent:Bre}),Jae=Jn({platformConnectorType:Te.JIRA_SERVICEMANAGEMENT_CONNECTOR,knowledgeConnectorType:"jira_servicemanagement",connectorId:un[Te.JIRA_SERVICEMANAGEMENT_CONNECTOR],ProductSelectComponent:Ure}),Xae=Jn({platformConnectorType:Te.CONFLUENCE_CONNECTOR,knowledgeConnectorType:"confluence",connectorId:un[Te.CONFLUENCE_CONNECTOR],ProductSelectComponent:Uae}),eie=Jn({platformConnectorType:Te.NOTION_CONNECTOR,knowledgeConnectorType:"notion",connectorId:OK,syncConnectorId:LK,ProductSelectComponent:Gre}),tie=Jn({platformConnectorType:Te.HUBSPOT_CONNECTOR,knowledgeConnectorType:"hubspot",connectorId:PK,syncConnectorId:RK,ProductSelectComponent:Lre}),nie=Jn({platformConnectorType:Te.INTERCOM_CONNECTOR,knowledgeConnectorType:"intercom",connectorId:jK,ProductSelectComponent:Vae,showProductSelectWithoutDeepResearch:!0}),sie=Jn({platformConnectorType:Te.AHA_CONNECTOR,knowledgeConnectorType:"aha",connectorId:un[Te.AHA_CONNECTOR]}),oie=Jn({platformConnectorType:Te.ASANA_CONNECTOR,knowledgeConnectorType:"asana",connectorId:un[Te.ASANA_CONNECTOR]}),rie=Jn({platformConnectorType:Te.AZURE_DEVOPS_CONNECTOR,knowledgeConnectorType:"azure_devops",connectorId:un[Te.AZURE_DEVOPS_CONNECTOR]}),aie=Jn({platformConnectorType:Te.CLICKUP_CONNECTOR,knowledgeConnectorType:"clickup",connectorId:un[Te.CLICKUP_CONNECTOR]}),iie=Jn({platformConnectorType:Te.BASECAMP_CONNECTOR,knowledgeConnectorType:"basecamp",connectorId:un[Te.BASECAMP_CONNECTOR]}),lie=Jn({platformConnectorType:Te.GITLAB_CONNECTOR,knowledgeConnectorType:"gitlab",connectorId:un[Te.GITLAB_CONNECTOR]}),cie=Jn({platformConnectorType:Te.HELP_SCOUT_CONNECTOR,knowledgeConnectorType:"help_scout",connectorId:un[Te.HELP_SCOUT_CONNECTOR]}),uie=Jn({platformConnectorType:Te.IRONCLAD_CONNECTOR,knowledgeConnectorType:"ironclad",connectorId:un[Te.IRONCLAD_CONNECTOR]}),die=Jn({platformConnectorType:Te.TEAMWORK_CONNECTOR,knowledgeConnectorType:"teamwork",connectorId:un[Te.TEAMWORK_CONNECTOR]}),fie=Jn({platformConnectorType:Te.PIPEDRIVE_CONNECTOR,knowledgeConnectorType:"pipedrive",connectorId:un[Te.PIPEDRIVE_CONNECTOR]}),mie=Jn({platformConnectorType:Te.ZOHO_CONNECTOR,knowledgeConnectorType:"zoho",connectorId:un[Te.ZOHO_CONNECTOR]}),pie=Jn({platformConnectorType:Te.ZOHO_DESK_CONNECTOR,knowledgeConnectorType:"zoho_desk",connectorId:un[Te.ZOHO_DESK_CONNECTOR]}),gie=Jn({platformConnectorType:Te.ZENDESK_CONNECTOR,knowledgeConnectorType:"zendesk",connectorId:un[Te.ZENDESK_CONNECTOR]});function hie(t){const e=RC(),n=W0(),s=v.useMemo(()=>{var o;return(o=n.data)==null?void 0:o.connection_statuses.filter(r=>r.user_connection_details.knowledge_connector_type===t)},[n.data,t]);return{isLoading:n.isLoading,internalKnowledgeEnabled:e,internalKnowledgeConfigs:e&&(s!=null&&s.length)?s:null}}const Pv=re(me,"f0ee98",16,16),Dtt="https://help.openai.com/articles/20001036",Btt="https://help.openai.com/articles/7967234-enabling-or-disabling-multi-factor-authentication-mfa",Ftt="https://openai.com/policies/health-privacy-policy",_ie="connector_openai_medical_records",Utt="https://persistent.oaistatic.com/chatgpt/ptn/spellbook-static-background.png",Htt="https://persistent.oaistatic.com/chatgpt/ptn/spellbook-static-background.png",xie="bg-[#FCF2F3] dark:bg-[#4C3D3D]",yie=je(()=>Me(()=>import("./604d4c3d-edk1z1un3e93kfkg.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10])).then(t=>t.RedirectContent)),Yh=we({addConnectorLinkModalTitle:{id:"addConnectorLinkModal.title",defaultMessage:"Connect {connectorName}"},medicalRecordsReadyToUseToast:{id:"gLzh6F",defaultMessage:"The Medical Records app is now ready to use"},overlayPillarAtlas:{id:"cJwLsn",defaultMessage:"When is Project Atlas launching?"},overlayPillarQ4Plans:{id:"BRs36X",defaultMessage:"Summarize our Q4 plans"},overlayPillarTravelPolicy:{id:"W60X5R",defaultMessage:"What is our travel policy?"}}),ZO=({connector:t,onClose:e,productSku:n,redirectAfter:s,authTypeOverride:o,noRedirect:r=!1,onComplete:a})=>{"use no forget";var le,pe,_e,Ce;const l=te(),c=Dt(),{connectorLinks:u}=Vo({productSku:n}),d=l.formatMessage({id:"FormField.errorIcon",defaultMessage:"Error"}),[f,m]=v.useState(!1),[p,g]=v.useState(void 0),h=Nt(),_=Zn(),x=OC(),b=WK(),y=rw(),S=IC(),[C,w]=wo(),k=qK(),E=KK(),T=t.id===Xb&&k,M=vr[t.id]===Te.GITHUB_CONNECTOR,A=xe("2515012530"),I=v.useMemo(()=>fR(t.link_params_schema),[t.link_params_schema]),[j,R]=v.useState({}),O=async()=>{const ge=Re=>Re.invalidateQueries({refetchType:"all",queryKey:["fetchConnectorLinkData"]});if(h===_){await ge(h);return}await Promise.all([ge(h),ge(_)])},L=v.useMemo(()=>mR(I,j),[I,j]),[B,U]=v.useState({}),H=(le=u.get(t.id))!=null?le:[],$=(pe=H[0])==null?void 0:pe.id,F=YK((Ce=(_e=H[0])==null?void 0:_e.tool_settings)==null?void 0:Ce.personalized),z=v.useMemo(()=>{const ge=new Set(I.map(ke=>ke.name)),Re={};for(const[ke,he]of Object.entries(B))ge.has(ke)&&(Re[ke]=he);return Re},[B,I]),{clampTemplatesContent:W,clampValidation:Y,validationToastMessage:K}=vO({templates:t.clamp_templates,intl:l,infoIcon:Pv,enabled:A}),Z=(ge,Re)=>{R(ke=>G(N({},ke),{[ge]:Re})),U(ke=>{if(!ke[ge])return ke;const he=N({},ke);return delete he[ge],he})};let J=s;if(M){const ge=new URL(s!=null?s:"/",window.location.origin);x&&(ge.searchParams.append("github_onboarding","sync-repos"),J=ge.pathname+ge.search)}const Q=async(ge,Re)=>{const{actionParamSchemas:ke,hasErrors:he}=Y;if(he){c.danger(K);return}const Ee=ZK(t,o!=null?o:ge),Pe=Re===void 0?void 0:{personalized:Re?"PERSONALIZE_ALWAYS":"NO_PERSONALIZATION"};let Ae;if(Ee==="OAUTH"&&I.length>0){const{sanitizedLinkParams:de,errors:oe}=pR(I,L,l);if(Object.keys(oe).length>0){U(oe),c.danger(l.formatMessage(ta.requiredFieldsToast));return}U({}),Ae=de}try{switch(m(!0),g(Ee),Ee){case"OAUTH":{r&&aw("popup");const de=y(t);await jC({connector:t,redirectAfter:r?void 0:de||J,toaster:c,openPopup:r?!0:b,intl:l,productSku:n,slackTeamIdOverride:t.id===Xb&&E!=null?E:void 0,linkParams:Ae,toolSettings:Pe,actionParamSchemas:ke}),await O(),a==null||a(),e();break}case"NONE":{await QK(t,Pe,ke),await Promise.all([O(),JK.refetch()]),a==null||a(),e(),c.success(XK({id:t.id,name:t.name,intl:l,defaultMessageFn:de=>l.formatMessage({id:"cb/7hh",defaultMessage:"{connector} is now connected"},{connector:de}),overrideConnectorMessageFnMap:{[_ie]:()=>l.formatMessage(Yh.medicalRecordsReadyToUseToast)}})),(S===ec.JitPluginMessage||S===ec.MessageSuggestion||S===ec.SourcePills)&&w(de=>(de.set("link_success","true"),de),{replace:!0});break}}}catch(de){m(!1),g(void 0),de instanceof Error&&c.danger(l.formatMessage({id:"wham.connectorSettings.addConnectorLinkModal.error",defaultMessage:"Failed to add connector link"}))}},ne=I.length>0?i.jsxs("div",{className:"flex flex-col gap-3",children:[i.jsxs("div",{className:"flex flex-col gap-1",children:[i.jsx("div",{className:"text-token-text-primary text-sm font-semibold",children:i.jsx(P,N({},ta.sectionTitle))}),i.jsx("div",{className:"text-token-text-secondary text-xs",children:i.jsx(P,N({},ta.sectionDescription))})]}),i.jsx("div",{className:"flex flex-col gap-3",children:I.map(ge=>{var Pe,Ae,de;const Re=ge.required?l.formatMessage(ta.fieldLabelRequired,{label:ge.title}):ge.title,ke=l.formatMessage(ta.fieldPlaceholder,{label:ge.title}),he=z[ge.name];if(ge.enumValues&&ge.enumValues.length>0){const oe="link_param_".concat(ge.name),se="".concat(oe,"_label"),Oe=he?"".concat(oe,"_error"):void 0,Ne=(Pe=L[ge.name])!=null?Pe:"";return i.jsxs("div",{className:"flex flex-col gap-1",children:[i.jsx("label",{id:se,className:"text-token-text-primary text-xs font-semibold",htmlFor:oe,children:Re}),i.jsxs(sn.Root,{value:Ne===""?void 0:Ne,onValueChange:ze=>Z(ge.name,ze),children:[i.jsxs(sn.Trigger,{id:oe,"aria-labelledby":se,"aria-describedby":Oe,"aria-invalid":he?!0:void 0,className:"border-token-border-heavy bg-token-bg-primary w-full justify-between rounded-md text-start",children:[i.jsx("div",{className:"flex-1 truncate text-sm",children:i.jsx(sn.Value,{placeholder:ke})}),i.jsx(sn.Icon,{})]}),i.jsx(sn.Portal,{children:i.jsx(sn.Content,{className:"border-token-border-heavy border",children:(Ae=ge.enumValues)==null?void 0:Ae.map(ze=>i.jsx(sn.Item,{value:ze,children:ze},ze))})})]}),he?i.jsxs("div",{id:Oe,className:"flex items-center gap-1 text-xs text-red-500",children:[i.jsx(M_,{title:d}),he]}):null,ge.description?i.jsx("div",{className:"text-token-text-secondary text-xs",children:ge.description}):null]},ge.name)}return i.jsxs("div",{className:"flex flex-col gap-1",children:[i.jsx(lw,{name:"link_param_".concat(ge.name),displayName:Re,value:(de=L[ge.name])!=null?de:"",onChange:oe=>Z(ge.name,oe.target.value),placeholder:ke,error:he,showErrorIcon:!0}),ge.description?i.jsx("div",{className:"text-token-text-secondary text-xs",children:ge.description}):null]},ge.name)})})]}):void 0,ie=Y.hasErrors,fe=ne||W?i.jsxs("div",{className:"flex flex-col gap-4",children:[ne,W]}):void 0,ae=()=>{var ge;Fe.count(Ue.ECOSYSTEM,"connector_link_modal_dismissed"),V.logEventWithStatsig("Connector Link Modal Dismissed","chatgpt_web_connector_link_modal_dismissed",{referrer:S,connector_id:t.id,connector_name:t.name,connector_distribution_channel:(ge=t.distribution_channel)!=null?ge:null,product_sku:n}),e()};return i.jsx(yie,{connector:t,onClose:ae,isConnecting:f,isConnectingAuthType:p,onContinue:Q,productSku:n,showExternalIcon:!0,personalizationLinkId:$,isContinueDisabled:ie,initialPersonalizeResultsEnabled:F,additionalContent:fe,additionalMessageThatDoesNotContainLegalClaims:T?i.jsx(P,{id:"addConnectorLinkModal.slackWorkspaceReminder",defaultMessage:"In the next step, choose the {workspace} Slack workspace before approving access.",values:{workspace:i.jsx("span",{className:"font-semibold",children:k})}}):void 0})},bie=t=>{"use forget";const e=Tn(),n=!(e!=null&&e.isPersonalAccount())&&(e==null?void 0:e.planType)!==et.SELF_SERVE_BUSINESS,s=VK(),{isEnabled:o,isLoading:r}=zK(),a=n?o&&!r:!0,l=Rn("linear"),c=Rn("dropbox"),u=Rn("box"),d=Rn("notion"),f=Rn("hubspot"),m=Rn("confluence"),p=Rn("jira"),g=Rn("jira_servicemanagement"),h=Rn("intercom"),_=Rn("aha"),x=Rn("asana"),b=Rn("azure_devops"),y=Rn("basecamp"),S=Rn("clickup"),C=Rn("front"),w=Rn("gitlab"),k=Rn("help_scout"),E=Rn("ironclad"),T=Rn("pipedrive"),M=Rn("shortcut"),A=Rn("teamwork"),I=Rn("zendesk"),j=Rn("zoho"),R=Rn("zoho_desk");if(!t)return!1;switch(vr[t.id]){case Te.SHAREPOINT_CONNECTOR:return!!(s&&a);case Te.LINEAR_CONNECTOR:return l;case Te.DROPBOX_CONNECTOR:return c;case Te.BOX_CONNECTOR:return u;case Te.NOTION_CONNECTOR:return d;case Te.HUBSPOT_CONNECTOR:return f;case Te.CONFLUENCE_CONNECTOR:return m;case Te.JIRA_CONNECTOR:return p;case Te.JIRA_SERVICEMANAGEMENT_CONNECTOR:return g;case Te.INTERCOM_CONNECTOR:return h;case Te.AHA_CONNECTOR:return _;case Te.ASANA_CONNECTOR:return x;case Te.AZURE_DEVOPS_CONNECTOR:return b;case Te.BASECAMP_CONNECTOR:return y;case Te.CLICKUP_CONNECTOR:return S;case Te.FRONT_CONNECTOR:return C;case Te.GITLAB_CONNECTOR:return w;case Te.HELP_SCOUT_CONNECTOR:return k;case Te.IRONCLAD_CONNECTOR:return E;case Te.PIPEDRIVE_CONNECTOR:return T;case Te.SHORTCUT_CONNECTOR:return M;case Te.TEAMWORK_CONNECTOR:return A;case Te.ZENDESK_CONNECTOR:return I;case Te.ZOHO_CONNECTOR:return j;case Te.ZOHO_DESK_CONNECTOR:return R;default:return!1}},QO=t=>{"use forget";const e=D.c(115),{onClose:n,connectorId:s,onComplete:o,redirectAfter:r,backgroundImageUrl:a,noRedirect:l}=t,c=te(),u=UK(),d=s!=null?s:u,f=NC(),{data:m,isLoading:p}=zoe(d);let g;e[0]!==m?(g=Mre(m),e[0]=m,e[1]=g):g=e[1];const h=g,_=HK(),x=r!=null?r:_,b=$K(),y=GK(),S=l!=null?l:!!y,C=bie(h);if(p){let F;e[2]===Symbol.for("react.memo_cache_sentinel")?(F=i.jsx(Es.Overlay,{}),e[2]=F):F=e[2];let z;e[3]===Symbol.for("react.memo_cache_sentinel")?(z=i.jsx(Es.Content,{children:i.jsx(Us,{})}),e[3]=z):z=e[3];let W;return e[4]!==n?(W=i.jsxs(Es.Root,{isOpen:!0,onClose:n,testId:"modal-add-connector-link",children:[F,z]}),e[4]=n,e[5]=W):W=e[5],W}const w=(h==null?void 0:h.id)===pm;if(!h){let F;e[6]===Symbol.for("react.memo_cache_sentinel")?(F=i.jsx(Es.Overlay,{}),e[6]=F):F=e[6];let z;return e[7]!==n?(z=i.jsx(Es.Root,{isOpen:!0,onClose:n,testId:"modal-add-connector-link",children:F}),e[7]=n,e[8]=z):z=e[8],z}const k=vr[h.id];let E;e[9]!==b||e[10]!==h||e[11]!==S||e[12]!==n||e[13]!==o||e[14]!==f||e[15]!==x?(E=i.jsx(ZO,{connector:h,onClose:n,productSku:f,redirectAfter:x,authTypeOverride:b,noRedirect:S,onComplete:o}),e[9]=b,e[10]=h,e[11]=S,e[12]=n,e[13]=o,e[14]=f,e[15]=x,e[16]=E):E=e[16];const T=E;let M;e:switch(k){case Te.SHAREPOINT_CONNECTOR:{const F=!!a;let z;e[17]!==h||e[18]!==n||e[19]!==F?(z=i.jsx(qae,{onClose:n,connector:h,hideHeaderIcons:F}),e[17]=h,e[18]=n,e[19]=F,e[20]=z):z=e[20],M=z;break e}case Te.DROPBOX_CONNECTOR:{let F;e[21]!==h||e[22]!==n?(F=i.jsx(Kae,{onClose:n,connector:h}),e[21]=h,e[22]=n,e[23]=F):F=e[23],M=F;break e}case Te.BOX_CONNECTOR:{let F;e[24]!==h||e[25]!==n?(F=i.jsx(Yae,{onClose:n,connector:h}),e[24]=h,e[25]=n,e[26]=F):F=e[26],M=F;break e}case Te.LINEAR_CONNECTOR:{let F;e[27]!==h||e[28]!==n?(F=i.jsx(Zae,{onClose:n,connector:h}),e[27]=h,e[28]=n,e[29]=F):F=e[29],M=F;break e}case Te.NOTION_CONNECTOR:{let F;e[30]!==h||e[31]!==n?(F=i.jsx(eie,{onClose:n,connector:h}),e[30]=h,e[31]=n,e[32]=F):F=e[32],M=F;break e}case Te.HUBSPOT_CONNECTOR:{let F;e[33]!==h||e[34]!==n?(F=i.jsx(tie,{onClose:n,connector:h}),e[33]=h,e[34]=n,e[35]=F):F=e[35],M=F;break e}case Te.CONFLUENCE_CONNECTOR:{let F;e[36]!==h||e[37]!==n?(F=i.jsx(Xae,{onClose:n,connector:h}),e[36]=h,e[37]=n,e[38]=F):F=e[38],M=F;break e}case Te.JIRA_CONNECTOR:{let F;e[39]!==h||e[40]!==n?(F=i.jsx(Qae,{onClose:n,connector:h}),e[39]=h,e[40]=n,e[41]=F):F=e[41],M=F;break e}case Te.JIRA_SERVICEMANAGEMENT_CONNECTOR:{let F;e[42]!==h||e[43]!==n?(F=i.jsx(Jae,{onClose:n,connector:h}),e[42]=h,e[43]=n,e[44]=F):F=e[44],M=F;break e}case Te.INTERCOM_CONNECTOR:{let F;e[45]!==h||e[46]!==n?(F=i.jsx(nie,{onClose:n,connector:h}),e[45]=h,e[46]=n,e[47]=F):F=e[47],M=F;break e}case Te.AHA_CONNECTOR:{let F;e[48]!==h||e[49]!==n?(F=i.jsx(sie,{onClose:n,connector:h}),e[48]=h,e[49]=n,e[50]=F):F=e[50],M=F;break e}case Te.ASANA_CONNECTOR:{let F;e[51]!==h||e[52]!==n?(F=i.jsx(oie,{onClose:n,connector:h}),e[51]=h,e[52]=n,e[53]=F):F=e[53],M=F;break e}case Te.AZURE_DEVOPS_CONNECTOR:{let F;e[54]!==h||e[55]!==n?(F=i.jsx(rie,{onClose:n,connector:h}),e[54]=h,e[55]=n,e[56]=F):F=e[56],M=F;break e}case Te.BASECAMP_CONNECTOR:{let F;e[57]!==h||e[58]!==n?(F=i.jsx(iie,{onClose:n,connector:h}),e[57]=h,e[58]=n,e[59]=F):F=e[59],M=F;break e}case Te.CLICKUP_CONNECTOR:{let F;e[60]!==h||e[61]!==n?(F=i.jsx(aie,{onClose:n,connector:h}),e[60]=h,e[61]=n,e[62]=F):F=e[62],M=F;break e}case Te.GITLAB_CONNECTOR:{let F;e[63]!==h||e[64]!==n?(F=i.jsx(lie,{onClose:n,connector:h}),e[63]=h,e[64]=n,e[65]=F):F=e[65],M=F;break e}case Te.HELP_SCOUT_CONNECTOR:{let F;e[66]!==h||e[67]!==n?(F=i.jsx(cie,{onClose:n,connector:h}),e[66]=h,e[67]=n,e[68]=F):F=e[68],M=F;break e}case Te.IRONCLAD_CONNECTOR:{let F;e[69]!==h||e[70]!==n?(F=i.jsx(uie,{onClose:n,connector:h}),e[69]=h,e[70]=n,e[71]=F):F=e[71],M=F;break e}case Te.TEAMWORK_CONNECTOR:{let F;e[72]!==h||e[73]!==n?(F=i.jsx(die,{onClose:n,connector:h}),e[72]=h,e[73]=n,e[74]=F):F=e[74],M=F;break e}case Te.ZENDESK_CONNECTOR:{let F;e[75]!==h||e[76]!==n?(F=i.jsx(gie,{onClose:n,connector:h}),e[75]=h,e[76]=n,e[77]=F):F=e[77],M=F;break e}case Te.PIPEDRIVE_CONNECTOR:{let F;e[78]!==h||e[79]!==n?(F=i.jsx(fie,{onClose:n,connector:h}),e[78]=h,e[79]=n,e[80]=F):F=e[80],M=F;break e}case Te.ZOHO_CONNECTOR:{let F;e[81]!==h||e[82]!==n?(F=i.jsx(mie,{onClose:n,connector:h}),e[81]=h,e[82]=n,e[83]=F):F=e[83],M=F;break e}case Te.ZOHO_DESK_CONNECTOR:{let F;e[84]!==h||e[85]!==n?(F=i.jsx(pie,{onClose:n,connector:h}),e[84]=h,e[85]=n,e[86]=F):F=e[86],M=F;break e}default:M=null}const A=M,I=jre(h),j=Rre(h),R=!!a;let O;e[87]!==a||e[88]!==h.id||e[89]!==c?(O=F=>{if(!a)return F;const z=(h==null?void 0:h.id)===Bu?jm:Ys;return i.jsxs("div",{className:"flex w-full flex-col overflow-hidden rounded-2xl md:max-h-[700px] md:flex-row",children:[i.jsxs("div",{className:"relative hidden h-full md:block md:w-[430px] lg:w-[430px]",children:[i.jsx("img",{src:a,alt:"",className:"h-full w-full object-cover","aria-hidden":!0}),i.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center gap-4",children:[i.jsxs("div",{className:"flex items-center gap-2.5",children:[i.jsx("div",{className:"bg-token-bg-primary rounded-xl border-[0.5px] p-2 shadow-sm",children:i.jsx(nv,{className:"h-8 w-8","aria-hidden":!0})}),i.jsxs("div",{className:"flex gap-1",children:[i.jsx("span",{className:"h-1.5 w-1.5 rounded-full bg-black/15"}),i.jsx("span",{className:"h-1.5 w-1.5 rounded-full bg-black/30"}),i.jsx("span",{className:"h-1.5 w-1.5 rounded-full bg-black/45"})]}),i.jsx("div",{className:"bg-token-bg-primary rounded-xl border-[0.5px] p-2 shadow-sm",children:i.jsx(z,{className:"h-8 w-8","aria-hidden":!0})})]}),i.jsx("div",{className:"mt-16 flex flex-col items-start gap-3",children:[c.formatMessage(Yh.overlayPillarAtlas),c.formatMessage(Yh.overlayPillarQ4Plans),c.formatMessage(Yh.overlayPillarTravelPolicy)].map(W=>i.jsxs("div",{className:"inline-flex items-center gap-2 rounded-2xl bg-white/92 px-3 py-2 text-[14px] font-normal text-black",children:[i.jsx(z,{className:"h-5 w-5","aria-hidden":!0}),i.jsx("span",{className:"font-normal",children:W})]},W))})]})]}),i.jsx("div",{className:"flex h-full flex-1 flex-col px-10 md:w-[420px] lg:w-[440px]",children:F})]})},e[87]=a,e[88]=h.id,e[89]=c,e[90]=O):O=e[90];const L=O;if(I){const F=R?"max-w-[900px]":j?"max-w-[660px]":"max-w-[580px]";let z;e[91]!==T||e[92]!==L?(z=L(T),e[91]=T,e[92]=L,e[93]=z):z=e[93];let W;return e[94]!==n||e[95]!==F||e[96]!==z?(W=i.jsx(en,{testId:"modal-add-connector-link",type:"success",isOpen:!0,onClose:n,size:"custom",noPadding:!0,className:F,children:z}),e[94]=n,e[95]=F,e[96]=z,e[97]=W):W=e[97],W}const B=R?"max-w-[900px]":"max-w-[400px]";let U;e[98]!==a||e[99]!==h||e[100]!==T||e[101]!==w||e[102]!==C||e[103]!==A||e[104]!==S||e[105]!==n?(U=w?i.jsx(Ire,{onClose:n,connector:h,noRedirect:S,hideHeaderIcons:!!a}):C&&A!=null?A:T,e[98]=a,e[99]=h,e[100]=T,e[101]=w,e[102]=C,e[103]=A,e[104]=S,e[105]=n,e[106]=U):U=e[106];let H;e[107]!==U||e[108]!==L?(H=L(U),e[107]=U,e[108]=L,e[109]=H):H=e[109];let $;return e[110]!==R||e[111]!==n||e[112]!==B||e[113]!==H?($=i.jsx(en,{testId:"modal-add-connector-link",type:"success",isOpen:!0,onClose:n,size:"custom",noPadding:R,className:B,children:H}),e[110]=R,e[111]=n,e[112]=B,e[113]=H,e[114]=$):$=e[114],$},vie=Object.freeze(Object.defineProperty({__proto__:null,AddConnectorLinkModal:QO,PlatformConnectorModalContent:ZO},Symbol.toStringTag,{value:"Module"})),Os=we({title:{id:"connectorReconnectModal.title",defaultMessage:"Some apps were mistakenly disconnected"},descriptionLineOne:{id:"connectorReconnectModal.descriptionLineOne",defaultMessage:"We recently fixed an issue that caused some apps to silently disconnect from your ChatGPT account. <bold>Your data is safe and can be reconnected.</bold> We apologize for the inconvenience."},singleDescriptionLineOne:{id:"connectorReconnectModal.singleDescriptionLineOne",defaultMessage:"We recently fixed an issue that caused {connectorName} to silently disconnect from your ChatGPT account. <bold>Your data is safe and can be reconnected.</bold> We apologize for the inconvenience."},descriptionLineTwo:{id:"connectorReconnectModal.descriptionLineTwo",defaultMessage:"To continue using these apps with ChatGPT, please reconnect."},singleDescriptionLineTwo:{id:"connectorReconnectModal.singleDescriptionLineTwo",defaultMessage:"To continue using {connectorName} with ChatGPT, please reconnect."},connectCta:{id:"connectorReconnectModal.connectCta",defaultMessage:"Reconnect"},connectedCta:{id:"connectorReconnectModal.connectedCta",defaultMessage:"Connected"},fallbackConnectorName:{id:"connectorReconnectModal.fallbackConnectorName",defaultMessage:"App"},dismiss:{id:"connectorReconnectModal.dismiss",defaultMessage:"Dismiss"},done:{id:"connectorReconnectModal.done",defaultMessage:"Done"},allConnectedTitle:{id:"connectorReconnectModal.allConnectedTitle",defaultMessage:"Your apps have been reconnected"},allConnectedSyncingMultiple:{id:"connectorReconnectModal.allConnectedSyncingMultiple",defaultMessage:"Youve successfully reconnected your apps. Until syncing completes, some apps may be temporarily unavailable or have reduced performance and accuracy within ChatGPT."},allConnectedSyncingSingle:{id:"connectorReconnectModal.allConnectedSyncingSingle",defaultMessage:"Youve successfully reconnected your apps. Until syncing completes, {connectorName} may be temporarily unavailable or have reduced performance and accuracy within ChatGPT."},allConnectedNoSyncing:{id:"connectorReconnectModal.allConnectedNoSyncing",defaultMessage:"Youve successfully reconnected your apps to ChatGPT and can be used immediately."},singleTitle:{id:"connectorReconnectModal.singleTitle",defaultMessage:"{connectorName} was mistakenly disconnected"}});function Sie(t){"use forget";var ze,Qe;const e=D.c(79),{onClose:n,forceOpen:s}=t,o=s===void 0?!1:s,r=vn(),a=te(),l=Zn();let c;e[0]===Symbol.for("react.memo_cache_sentinel")?(c=[],e[0]=c):c=e[0];const[u,d]=v.useState(c),f=RC(),{data:m,refetch:p}=W0();let g;e[1]!==o?(g={forceOpen:o},e[1]=o,e[2]=g):g=e[2];const{connectorIds:h,connectors:_,connectorLinks:x,refetchConnectorLinks:b,dismiss:y,isLoading:S,shouldShowModal:C}=JO(r,g);let w;e[3]!==y||e[4]!==n?(w=()=>{y(),n==null||n()},e[3]=y,e[4]=n,e[5]=w):w=e[5];const k=w,E=h;let T;e[6]!==E.length?(T=()=>{V.logStructuredEvent(sY,{connectorIdsCount:String(E.length)})},e[6]=E.length,e[7]=T):T=e[7];let M;e[8]!==E?(M=[E],e[8]=E,e[9]=M):M=e[9],v.useEffect(T,M);let A;e[10]!==x||e[11]!==u?(A=Le=>x.has(Le)||u.includes(Le),e[10]=x,e[11]=u,e[12]=A):A=e[12];const I=A;let j;if(e[13]!==E||e[14]!==x||e[15]!==_||e[16]!==a||e[17]!==f||e[18]!==(m==null?void 0:m.connection_statuses)){let Le;e[20]!==x||e[21]!==_||e[22]!==a||e[23]!==f||e[24]!==(m==null?void 0:m.connection_statuses)?(Le=ce=>{var at,Xe,gt;const be=_.find(ht=>ht.id===ce),He=(at=be==null?void 0:be.name)!=null?at:a.formatMessage(Os.fallbackConnectorName),Ge=(Xe=x.get(ce))==null?void 0:Xe[0],nt=f&&Ge?(gt=m==null?void 0:m.connection_statuses)==null?void 0:gt.find(ht=>ht.user_connection_details.backing_link_id===Ge.id||(be==null?void 0:be.id)===Bu&&ht.user_connection_details.connection_type==="sharepoint_admin_sync_connector"&&ht.user_connection_details.auth_status==="admin_connected"):void 0;return{connectorId:ce,connector:be,connectorName:He,connectorLink:Ge,maybeSyncConnection:nt}},e[20]=x,e[21]=_,e[22]=a,e[23]=f,e[24]=m==null?void 0:m.connection_statuses,e[25]=Le):Le=e[25],j=E.map(Le),e[13]=E,e[14]=x,e[15]=_,e[16]=a,e[17]=f,e[18]=m==null?void 0:m.connection_statuses,e[19]=j}else j=e[19];const R=j,O=wie;let L;if(e[26]!==R||e[27]!==I){let Le;e[29]!==I?(Le=ce=>{const{connectorId:be,maybeSyncConnection:He}=ce;return I(be)&&O(He)},e[29]=I,e[30]=Le):Le=e[30],L=R.filter(Le),e[26]=R,e[27]=I,e[28]=L}else L=e[28];const B=L;let U;e[31]!==E||e[32]!==I?(U=E.length>0&&E.every(Le=>I(Le)),e[31]=E,e[32]=I,e[33]=U):U=e[33];const H=U;let $,F;e[34]!==E[0]||e[35]!==E.length||e[36]!==_||e[37]!==a?($=E.length===1?(Qe=(ze=_.find(Le=>Le.id===E[0]))==null?void 0:ze.name)!=null?Qe:a.formatMessage(Os.fallbackConnectorName):null,F=E.length===1&&$?a.formatMessage(Os.singleTitle,{connectorName:$}):a.formatMessage(Os.title),e[34]=E[0],e[35]=E.length,e[36]=_,e[37]=a,e[38]=$,e[39]=F):($=e[38],F=e[39]);const z=F,W=E.length===1&&$?Os.singleDescriptionLineOne:Os.descriptionLineOne,Y=E.length===1&&$?Os.singleDescriptionLineTwo:Os.descriptionLineTwo;let K;e[40]!==H||e[41]!==a||e[42]!==z?(K=H?a.formatMessage(Os.allConnectedTitle):z,e[40]=H,e[41]=a,e[42]=z,e[43]=K):K=e[43];const Z=K;let J;e[44]!==H||e[45]!==B?(J=H?B.length>1?i.jsx(P,N({},Os.allConnectedSyncingMultiple)):B.length===1?i.jsx(P,G(N({},Os.allConnectedSyncingSingle),{values:{connectorName:B[0].connectorName}})):i.jsx(P,N({},Os.allConnectedNoSyncing)):null,e[44]=H,e[45]=B,e[46]=J):J=e[46];const Q=J,ne=Le=>{var ce;V.logStructuredEvent(tY,{connectorId:Le,connectorName:(ce=_.find(be=>be.id===Le))==null?void 0:ce.name}),!I(Le)&&(d(be=>[...be,Le]),rt(QO,{connectorId:Le,noRedirect:!0,redirectAfter:"/",onClose:()=>{d(be=>be.filter(He=>He!==Le))},onComplete:()=>{d(be=>be.filter(He=>He!==Le)),b(),p(),l.invalidateQueries({queryKey:nY(!0,An.PROMPT_TEXT_AREA).queryKey})}}))};if(S){const Le=C!=null?C:!1;let ce;e[47]===Symbol.for("react.memo_cache_sentinel")?(ce=i.jsx("div",{className:"flex min-h-[200px] items-center justify-center py-10",children:i.jsx(Us,{})}),e[47]=ce):ce=e[47];let be;return e[48]!==k||e[49]!==Le?(be=i.jsx(en,{testId:"modal-connectors-reconnect",isOpen:Le,type:"warning",onClose:k,showCloseButton:!0,className:"w-[488px] max-w-[488px] px-4",children:ce}),e[48]=k,e[49]=Le,e[50]=be):be=e[50],be}const ie=en,fe="modal-connectors-reconnect",ae=C!=null?C:!1,le="warning",pe=!0,_e=!0,Ce="w-[488px] max-w-[488px] px-4",ge="flex flex-col items-center gap-4 px-0 pt-8 text-center";let Re;e[51]!==H?(Re=!H&&i.jsx("div",{className:"flex items-center justify-center",children:i.jsx(_R,{className:"icon-2xl text-danger","aria-hidden":!0})}),e[51]=H,e[52]=Re):Re=e[52];let ke;e[53]!==Z?(ke=i.jsx("div",{className:"text-token-text-primary text-xl leading-6 font-semibold",children:Z}),e[53]=Z,e[54]=ke):ke=e[54];let he;e[55]!==H||e[56]!==W||e[57]!==Y||e[58]!==Q||e[59]!==$?(he=i.jsx("div",{className:"flex w-full items-center justify-center text-center",children:i.jsx("div",{className:"text-token-text-secondary space-y-2 text-xs",children:H?i.jsx("p",{className:"text-token-text-secondary text-xs",children:Q}):i.jsxs(i.Fragment,{children:[i.jsx("p",{children:i.jsx(P,G(N({},W),{values:G(N({},$?{connectorName:$}:{}),{bold:Cie})}))}),i.jsx("p",{className:"text-token-text-secondary text-xs",children:i.jsx(P,G(N({},Y),{values:$?{connectorName:$}:void 0}))})]})})}),e[55]=H,e[56]=W,e[57]=Y,e[58]=Q,e[59]=$,e[60]=he):he=e[60];const Ee="border-token-border-light max-h-72 w-full space-y-2 overflow-y-auto rounded-2xl border p-3",Pe=R.map((Le,ce)=>{const{connectorId:be,connector:He,connectorName:Ge,maybeSyncConnection:nt}=Le,at=I(be);return i.jsxs("div",{className:"bg-token-bg-primary flex items-center justify-between gap-3 px-3 py-2 ".concat(ce!==0?"border-token-border-light mt-2 border-t pt-3":""),children:[i.jsxs("div",{className:"flex items-center gap-3 overflow-hidden",children:[i.jsx(Vc,{connector:He!=null?He:{name:Ge,logo_url:null},size:"small",className:"shrink-0"}),i.jsx("div",{className:"min-w-0",children:i.jsx("div",{className:"text-token-text-primary flex min-w-0 flex-shrink-0 items-center gap-4 truncate text-sm",children:Ge})})]}),at?nt&&nt.user_connection_details.activation_status!=="inactive"?i.jsx(eY,{connection:nt,location:"user_settings",isBlueButton:!0}):i.jsxs("div",{className:"text-token-text-link flex items-center gap-1",children:[i.jsx(gR,{className:"icon-sm text-blue-500"}),i.jsx("span",{className:"text-sm text-blue-500",children:i.jsx(P,N({},Os.connectedCta))})]}):i.jsx(Se,{type:"button",color:"primary",size:"small",onClick:()=>ne(be),children:i.jsx(P,N({},Os.connectCta))})]},be)});let Ae;e[61]!==Pe?(Ae=i.jsx("div",{className:Ee,children:Pe}),e[61]=Pe,e[62]=Ae):Ae=e[62];const de=H?Os.done:Os.dismiss;let oe;e[63]!==de?(oe=i.jsx(P,N({},de)),e[63]=de,e[64]=oe):oe=e[64];let se;e[65]!==k||e[66]!==oe?(se=i.jsx("div",{className:"flex justify-center pb-8",children:i.jsx(Se,{color:"ghost",type:"button",className:"text-token-text-secondary hover:text-token-text-primary border-token-border-light w-[320px] rounded-full border px-4 py-2",onClick:k,children:oe})}),e[65]=k,e[66]=oe,e[67]=se):se=e[67];let Oe;e[68]!==Re||e[69]!==ke||e[70]!==he||e[71]!==Ae||e[72]!==se?(Oe=i.jsxs("div",{className:ge,children:[Re,ke,he,Ae,se]}),e[68]=Re,e[69]=ke,e[70]=he,e[71]=Ae,e[72]=se,e[73]=Oe):Oe=e[73];let Ne;return e[74]!==ie||e[75]!==k||e[76]!==ae||e[77]!==Oe?(Ne=i.jsx(ie,{testId:fe,isOpen:ae,type:le,onClose:k,shouldIgnoreClickOutside:pe,showCloseButton:_e,className:Ce,children:Oe}),e[74]=ie,e[75]=k,e[76]=ae,e[77]=Oe,e[78]=Ne):Ne=e[78],Ne}function Cie(t){return i.jsx("span",{className:"font-semibold",children:t})}function wie(t){var n;const e=(n=t==null?void 0:t.user_connection_details)==null?void 0:n.activation_status;return e==="activating"||e==="partially_activated"}function JO(t,{forceOpen:e=!1}={}){var k,E;const[n,s]=v.useState(void 0),{data:o}=Ld(),{eligible:r,isLoading:a}=Ct(We.hasSeenConnectorsReconnectModal),l=X(ln),[c,u]=op("connectors-reconnect-modal-dismissed",!1,T=>typeof T=="boolean"),d=()=>{u(!0),kt(We.hasSeenConnectorsReconnectModal)},f=(k=o==null?void 0:o.eligible_announcements)==null?void 0:k.includes(We.hasSeenConnectorsReconnectModal),m=We.hasSeenConnectorsReconnectModal in((E=o==null?void 0:o.announcements)!=null?E:{}),p=r&&!c||!f&&!m&&!c,g=xe("1138374840"),h=e&&!l||g&&p&&!l;v.useEffect(()=>{if(!h){s([]);return}ue.safePost("/aip/connectors/needs_remediation",{requestBody:{}}).then(T=>s(T.needs_remediation.map(M=>M.connector_id))).catch(()=>s([]))},[h]);const{data:_,isLoading:x}=X(()=>hR(t,{productSku:An.CONNECTOR_SETTING,skipLogos:!1})),b=v.useMemo(()=>{var T;return(T=_==null?void 0:_.connectors)!=null?T:[]},[_]),{connectorLinks:y,isLoading:S,refetch:C}=Vo({fetchValidLinksOnly:!0,productSku:An.CONNECTOR_SETTING,skip:!h}),w=n===void 0||x||S||!e&&a;return{shouldShowModal:h&&n&&n.length>0,connectorIds:n!=null?n:[],connectors:b,connectorLinks:y,dismiss:d,refetchConnectorLinks:C,areConnectorsLoading:x,areLinksLoading:S,isLoading:w}}const $tt=Object.freeze(Object.defineProperty({__proto__:null,ConnectorsReconnectModal:Sie,useConnectorReconnectGate:JO},Symbol.toStringTag,{value:"Module"})),kie="https://persistent.oaistatic.com/chatgpt/google-connectors-nux.jpg",Gtt=()=>{const t=xe("2400167019"),{isLoading:e,eligible:n}=Ct(We.hasSeenGoogleConnectorsNuxModal);return t?e?"loading":n?"show":"hide":"hide"};function Vtt({onClose:t}){v.useEffect(()=>{V.logEventWithStatsig("Google Connectors Nux Modal Shown","chatgpt_google_connectors_nux_modal_shown"),V.logUpsellOrModalEvent(qn,{eventId:"google_connectors_nux_modal_shown",type:Kn.UPSELL_OR_MODAL_TYPE_CUSTOM_NUX_MODAL})},[]);const e=()=>{V.logEventWithStatsig("Google Connectors Nux Modal Dismissed","chatgpt_google_connectors_nux_modal_dismissed"),kt(We.hasSeenGoogleConnectorsNuxModal),t()},n=bt(),s=(a,l,c)=>{V.logEventWithStatsig("Google Connectors Nux Modal Show Me Continued","chatgpt_google_connectors_nux_modal_continued",{target:c}),kt(We.hasSeenGoogleConnectorsNuxModal),t(),n({pathname:"/",search:"q=".concat(l)})},[o,r]=v.useState(!1);return i.jsxs(en,{testId:"modal-google-connectors-nux",isOpen:!0,noPadding:!0,onClose:e,shouldIgnoreClickOutside:!0,size:"custom",type:"success",className:"flex max-w-[480px] flex-col",children:[i.jsx(Wn,{onClick:e,className:"text-token-text-secondary absolute end-0 top-0 z-10 me-2 mt-2 ring-0! outline-0! hover:bg-black/5! focus:ring-0! focus:ring-offset-0! focus:outline-0! active:bg-black/10!"}),i.jsx("div",{className:q("h-[224px] w-full transition-opacity duration-200",o?"opacity-100":"opacity-0"),children:i.jsx("img",{src:kie,draggable:!1,className:"object-cover object-center",alt:"",onLoad:()=>r(!0)})}),i.jsxs("div",{className:"flex flex-col p-8",children:[i.jsx("div",{className:"text-center text-[22px] font-medium",children:i.jsx(P,N({},wi.title))}),i.jsx("div",{className:"text-token-text-secondary mt-2 text-center",children:i.jsx(P,G(N({},wi.subtitle),{values:{link:a=>i.jsx("a",{href:wi.subtitle.link,target:"_blank",rel:"noopener noreferrer",className:"underline",children:a},"learn-more-link")}}))}),i.jsxs("div",{className:"text-token-text-tertiary mt-6 flex items-center gap-2",children:[i.jsx("div",{className:"h-px flex-1 border-t"}),i.jsx(P,N({},wi.tryItOut)),i.jsx("div",{className:"h-px flex-1 border-t"})]}),i.jsxs("div",{className:"mt-4 flex flex-col items-center gap-2",children:[i.jsx(Se,{type:"button",className:"w-fit px-4 py-2",color:"secondary",onClick:a=>s(a,wi.gmailPrompt.defaultMessage,"gmail"),children:i.jsxs("div",{className:"flex flex-row items-center gap-2",children:[i.jsx($a,{className:"icon-lg"}),i.jsx(P,N({},wi.gmailPrompt))]})}),i.jsx(Se,{type:"button",className:"w-fit px-4 py-2",color:"secondary",onClick:a=>s(a,wi.gcalPrompt.defaultMessage,"googleCalendar"),children:i.jsxs("div",{className:"flex flex-row items-center gap-2",children:[i.jsx(xR,{className:"icon-lg"}),i.jsx(P,N({},wi.gcalPrompt))]})})]})]})]})}const wi=we({title:{id:"xQB7J6",defaultMessage:"Gmail and Google Calendar, now in chat"},subtitle:{id:"bMcG4Z",defaultMessage:"ChatGPT can now reference your emails and calendar events in responses. <link>Learn more</link>",link:"https://help.openai.com/en/articles/11487775-connectors-in-chatgpt"},tryItOut:{id:"Wkoh8S",defaultMessage:"Try it out"},gmailPrompt:{id:"GoogleConnectorsNuxModal.gmailPrompt",defaultMessage:"Which emails should I reply to?"},gcalPrompt:{id:"GoogleConnectorsNuxModal.googleCalendarPrompt",defaultMessage:"Help me with tomorrow's calendar"}}),Eie="connector_2a3c0c472f6f4238b47d41acfb317307",XO=()=>mn("4037298654").get("hubspot_app_id",""),Tie=t=>"".concat(nR,"?").concat(rY,"=").concat(t,"&").concat(aY,"=true&target=connectors&referrer=").concat(encodeURIComponent(ec.ConnectorNuxModal)),ztt=()=>{var h,_;const t=vn(),e=xe("2391947555"),n=((h=Et())==null?void 0:h.normalizedAccountUserId)!=null&&oY(),{isLoading:s,eligible:o}=Ct(We.hasSeenHubspotAppMigrationNuxModal),{data:r,isLoading:a,error:l}=X(()=>KP(t,{fetchValidLinksOnly:!1,productSku:An.CONNECTOR_SETTING})),{data:c,isLoading:u}=X(()=>hR(t,{productSku:An.CONNECTOR_SETTING,skipLogos:!0}));if(!e||!n||l)return"hide";if(s||a||u||r==null)return"loading";if(!o)return"hide";const d=XO(),f=(_=c==null?void 0:c.connectors)==null?void 0:_.find(x=>x.id===d);if(!((f==null?void 0:f.status)==="ENABLED"))return"hide";const p=r.has(Eie),g=r.has(d);return p&&!g?"show":"hide"};function Wtt({onClose:t}){v.useEffect(()=>{V.logUpsellOrModalEvent(qn,{eventId:"hubspot_app_migration_nux_modal",type:Kn.UPSELL_OR_MODAL_TYPE_CUSTOM_NUX_MODAL})},[]);const e=()=>{kt(We.hasSeenHubspotAppMigrationNuxModal),t()},n=()=>{kt(We.hasSeenHubspotAppMigrationNuxModal),t(),window.location.href=Tie(XO())};return i.jsxs(en,{testId:"modal-hubspot-app-migration-nux",isOpen:!0,noPadding:!0,onClose:e,shouldIgnoreClickOutside:!0,size:"custom",type:"success",className:"flex w-[480px] max-w-[480px] flex-col",children:[i.jsx(Wn,{onClick:e,className:"text-token-text-secondary absolute end-0 top-0 z-10 me-2 mt-2 ring-0! outline-0! hover:bg-black/5! focus:ring-0! focus:ring-offset-0! focus:outline-0! active:bg-black/10!"}),i.jsxs("div",{className:"flex flex-col items-center gap-4 px-8 py-8 text-center",children:[i.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-full bg-orange-50",children:i.jsx(tc,{className:"icon-lg"})}),i.jsx(Es.Title,{title:i.jsx("span",{className:"text-[22px] font-medium",children:i.jsx(P,N({},rh.title))})}),i.jsx("div",{className:"text-token-text-secondary",children:i.jsx(P,N({},rh.subtitle))}),i.jsxs("div",{className:"mt-2 flex w-full flex-col gap-2",children:[i.jsx(Se,{type:"button",color:"primary",onClick:n,children:i.jsx(P,N({},rh.connectCta))}),i.jsx(Se,{type:"button",color:"ghost",onClick:e,children:i.jsx(P,N({},rh.dismissCta))})]})]})]})}const rh=we({title:{id:"HubspotAppMigrationNuxModal.title",defaultMessage:"Reconnect HubSpot"},subtitle:{id:"HubspotAppMigrationNuxModal.subtitle",defaultMessage:"We've updated the HubSpot app to let you get more insights from your data. Reconnect to start using it in ChatGPT."},connectCta:{id:"HubspotAppMigrationNuxModal.connectCta",defaultMessage:"Reconnect"},dismissCta:{id:"HubspotAppMigrationNuxModal.dismissCta",defaultMessage:"Not now"}});function dw(){var n;const{data:t}=Ld(),e=(n=t==null?void 0:t.settings)==null?void 0:n.amphora_locks;return typeof e=="object"&&e!=null?e:void 0}const Mie="https://persistent.oaistatic.com/moonshine/moonshine_nux_light.jpeg",Aie="https://persistent.oaistatic.com/moonshine/moonshine_nux_light.jpeg",Nie="https://help.openai.com/en/articles/8590148-memory-faq#h_f78fa25e47";function qtt(){const[t,e]=v.useState("loading"),n=X(ln),s=w_(),{eligible:o,isLoading:r}=Ct(We.hasSeenMoonshineNuxV2);return v.useEffect(()=>{if(n){t!=="hide"&&e("hide");return}t==="loading"&&!r&&e(!s||!o?"hide":"show")},[t,r,s,o,n]),t}function Ktt({onClose:t}){const n=Yo()?Aie:Mie,[s,o]=v.useState(!1);v.useEffect(()=>{s||(kt(We.hasSeenMoonshineNuxV2),o(!0),V.logEventWithStatsig("ChatGPT Moonshine Nux V2 Modal Shown","chatgpt_moonshine_nux_v2_modal_shown"),Fe.count(Ue.MOONSHINE,"chatgpt_moonshine_nux_v2_modal_shown"),V.logUpsellOrModalEvent(qn,{eventId:"moonshine_nux_v2_modal_shown",type:Kn.UPSELL_OR_MODAL_TYPE_CUSTOM_NUX_MODAL}))},[s]);const[r,a]=v.useState(!1);v.useEffect(()=>{const T=new Image;T.src=n,T.onload=()=>a(!0)},[n]);const[l,c]=v.useState(!1),[u,d]=v.useState(!1);v.useEffect(()=>{if(!r)return;const T=setTimeout(()=>{c(!0)},200),M=setTimeout(()=>{d(!0)},300);return()=>{clearTimeout(T),clearTimeout(M)}},[r]);const f=()=>{window.open(Nie,"_blank","noopener noreferrer"),V.logEventWithStatsig("ChatGPT Moonshine Nux V2 Modal Learn More Clicked","chatgpt_moonshine_nux_v2_modal_learn_more_clicked"),Fe.count(Ue.MOONSHINE,"chatgpt_moonshine_nux_v2_modal_learn_more_clicked")},m=bt(),p=xe("1542198993"),g=pl(),h=dw(),[_,x]=v.useState(!1),b=mn("3934129380"),y=Iie.describeMePrompt.defaultMessage,S=b.get("model","gpt-4o"),C=Et(),w=C==null?void 0:C.hasPlusFeatures(),k=()=>{_||(x(!0),t(),m({pathname:"/",search:"?q=".concat(y,"&model=").concat(S,"&skip_instant_query=1&hints=").concat(Ke.Moonshine)}),V.logEventWithStatsig("ChatGPT Moonshine Nux V2 Modal Show Me Clicked","chatgpt_moonshine_nux_v2_modal_show_me_clicked"),Fe.count(Ue.MOONSHINE,"chatgpt_moonshine_nux_v2_modal_show_me_clicked"))},E=()=>{g.mutate({setting:Ft.Moonshine,value:!0},{onSettled:()=>{t()}}),V.logEventWithStatsig("ChatGPT Moonshine Nux V2 Modal Enable Clicked","chatgpt_moonshine_nux_v2_modal_enable_clicked"),Fe.count(Ue.MOONSHINE,"chatgpt_moonshine_nux_v2_modal_enable_clicked")};return r?i.jsxs(en,{testId:"modal-moonshine-nux-v2",isOpen:!0,noPadding:!0,onClose:()=>{t(),V.logEventWithStatsig("ChatGPT Moonshine Nux V2 Modal Closed","chatgpt_moonshine_nux_v2_modal_closed"),Fe.count(Ue.MOONSHINE,"chatgpt_moonshine_nux_v2_modal_closed")},showCloseButton:!1,size:"custom",type:"success",className:"relative flex max-w-[480px] flex-col",children:[i.jsx("div",{className:"absolute end-4 top-4 z-50",children:i.jsx(Wn,{className:"text-token-text-secondary ring-0! outline-0! hover:bg-transparent focus:ring-0! focus:ring-offset-0! focus:outline-0! dark:hover:bg-transparent",onClick:t})}),i.jsxs("div",{className:"relative w-full flex-1",children:[i.jsx("img",{src:n,className:"h-[213px] w-full object-cover object-bottom",alt:""}),i.jsx("div",{className:"pointer-events-none absolute inset-0 flex items-center justify-center",children:i.jsxs("div",{className:"mx-auto flex max-w-full flex-col items-end gap-2 px-8",children:[i.jsx("div",{className:"relative flex w-auto rounded-3xl bg-white/80 px-5 py-2.5 text-lg backdrop-blur-[24px] transition-all duration-300 ease-in-out dark:bg-[rgba(48,48,48,0.8)] ".concat(l?"translate-y-0 opacity-100":"translate-y-2 opacity-0"),children:i.jsx(P,{id:"MoonshineNuxV2Modal.firstBubble",defaultMessage:"Hey ChatGPT!"})}),i.jsx("div",{className:"relative flex w-auto rounded-3xl bg-white/80 px-5 py-2.5 text-lg backdrop-blur-[24px] transition-all duration-300 ease-in-out dark:bg-[rgba(48,48,48,0.8)] ".concat(u?"translate-y-0 opacity-100":"translate-y-2 opacity-0"),children:i.jsx(P,{id:"MoonshineNuxV2Modal.secondBubble",defaultMessage:"Describe me based on our chats"})})]})})]}),i.jsxs("div",{className:"flex flex-1 flex-col gap-2 px-8 pt-8 pb-8",children:[i.jsx("div",{className:"text-[22px] leading-7 font-medium",children:i.jsx(P,{id:"MoonshineNuxV2Modal.title",defaultMessage:"Introducing new, improved memory"})}),i.jsx("div",{className:"text-token-text-secondary w-full",children:p?w?i.jsx(P,{id:"MoonshineNuxV2Modal.subtitleDefaultOff",defaultMessage:"ChatGPT can now remember more of your past chats to better personalize its responses. Want to change what it knows about you? Just ask."}):i.jsx(P,{id:"MoonshineNuxV2Modal.subtitleDefaultOff.freeMoonshine",defaultMessage:"ChatGPT can now remember your recent chats to better personalize its responses. Want to change what it knows about you? Just ask."}):w?i.jsx(P,{id:"MoonshineNuxV2Modal.subtitle",defaultMessage:"ChatGPT can now remember more of your past chats, so you won't need to repeat yourself as often. Want to change what it knows about you? Just ask."}):i.jsx(P,{id:"MoonshineNuxV2Modal.subtitle.freeMoonshine",defaultMessage:"ChatGPT now remembers your recent chats, so you won't need to repeat yourself as often. Want to change what it knows about you? Just ask."})}),i.jsxs("div",{className:"mt-4 flex w-full items-center justify-between",children:[i.jsx(Se,{color:"secondary",onClick:f,children:i.jsx(P,{id:"MoonshineNuxV2Modal.learnMoreButton",defaultMessage:"Learn more"})}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx(Se,{color:"secondary",onClick:t,children:i.jsx(P,{id:"MoonshineNuxV2Modal.notNowButton",defaultMessage:"Not now"})}),p?i.jsx(Se,{color:"secondary",onClick:E,disabled:(h==null?void 0:h[Ft.Moonshine])===!0,children:i.jsx(P,{id:"MoonshineNuxV2Modal.enableButton",defaultMessage:"Enable"})}):i.jsx(Se,{color:"primary",onClick:k,children:i.jsx(P,{id:"MoonshineNuxV2Modal.showMeButton",defaultMessage:"Show me"})})]})]})]})]}):null}const Iie=we({describeMePrompt:{id:"MoonshineNuxV2Modal.describeMePrompt",defaultMessage:"Describe me based on all our chats  make it catchy!"}}),jie=()=>Je("1346366956").get("signup_cta_copy","SIGN_UP"),Pie=()=>Je("1803944755").get("login_or_signup_cta_copy","LOGIN_OR_SIGNUP"),Ytt=()=>{switch(Pie()){case"LOGIN_OR_SIGNUP":return x4.loginOrSignup;case"SIGNIN":return x4.signin}},Hp=t=>{switch(jie()){case"SIGN_UP":return t;case"SIGN_UP_FOR_FREE":return Tu.signUpForFreeCta;case"CREATE_ACCOUNT":return Tu.createAccountCta;case"CREATE_NEW_ACCOUNT":return Tu.createNewAccountCta;case"CREATE_FREE_ACCOUNT":return Tu.createFreeAccountCta}},x4=we({loginOrSignup:{id:"loginOrSignupCta.loginOrSignup",defaultMessage:"Log in or sign up"},signin:{id:"loginOrSignupCta.signin",defaultMessage:"Sign in"}}),Tu=we({createAccountCta:{id:"createAccountCta",defaultMessage:"Create account"},createNewAccountCta:{id:"createNewAccountCta",defaultMessage:"Create new account"},createFreeAccountCta:{id:"createFreeAccountCta",defaultMessage:"Create free account"},signUpForFreeCta:{id:"signUpForFreeCta",defaultMessage:"Sign up for free"}});var Ey,y4;function Rie(){if(y4)return Ey;y4=1;var t=yR(),e=LC(),n="[object Boolean]";function s(o){return o===!0||o===!1||e(o)&&t(o)==n}return Ey=s,Ey}var Oie=Rie();const eL=ps(Oie),Lie="https://persistent.oaistatic.com/image-gen/nux.222e584e.mp4",tL=()=>op(Ie.HasSeenNoAuthImagegenNux,!1,eL),Ztt=()=>{const t=!mt(),e=q0(),[n]=tL(),s=bR(),o=Je("2118136551");return!t||e||n||s?"hide":o.get("should_show_imagegen_nux",!1)?"show":"hide"},Qtt=({onClose:t})=>{const n=Gd()?"center":"bottom",[s,o]=v.useState(!1),r=mn("2604379743").value,a=typeof r.nux_video_url=="string"?r.nux_video_url:Lie,l=typeof r.nux_image_url=="string"?r.nux_image_url:"",[,c]=tL(),u=()=>{c(!0),tt.setItem(Ie.HasSeenNoAuthImagegenNux,!0)},f=Je("2118136551").get("sign_up_button_has_the_word_free",!0),m=Hp(f?Tu.signUpForFreeCta:yn.signUpButtonText),p=i.jsx(Se,{as:"button",size:"large",color:"secondary",onClick:()=>{u(),fn({fallbackScreenHint:"signup",callback:_=>{ci({provider:_,location:"No Auth Imagegen Nux Modal"},Jt.ACCESS_FLOW_ENTRY_POINT_NO_AUTH_IMAGEGEN_NUX_MODAL)},skipLoginModal:!1})},fullWidth:!0,children:i.jsx(P,N({},m))}),g=i.jsx(Se,{as:"button",size:"large",color:"primary",fullWidth:!0,onClick:()=>{u(),fn({fallbackScreenHint:"login",callback:_=>{_o({provider:_,location:"No Auth Imagegen Nux Modal"},Jt.ACCESS_FLOW_ENTRY_POINT_NO_AUTH_IMAGEGEN_NUX_MODAL)},skipLoginModal:!1})},children:i.jsx(P,N({},yn.logInButtonText))}),h=()=>{t(),u(),V.logEventWithStatsig("chatgpt_no_auth_imagegen_nux_modal_dismissed","chatgpt_no_auth_imagegen_nux_modal_dismissed")};return v.useEffect(()=>{V.logEventWithStatsig("chatgpt_no_auth_imagegen_nux_modal_shown","chatgpt_no_auth_imagegen_nux_modal_shown")},[]),i.jsxs(en,{testId:"modal-no-auth-imagegen-nux",isOpen:!0,noPadding:!0,onClose:h,showCloseButton:!1,size:"custom",type:"success",className:"max-w-lg",position:n,children:[i.jsxs("div",{className:"relative aspect-3/2 w-full",children:[!s&&i.jsx("img",{src:l,alt:"",className:"absolute inset-0 h-full w-full object-cover object-bottom transition-opacity duration-300"}),i.jsx("video",{src:a,autoPlay:!0,loop:!0,muted:!0,playsInline:!0,className:"h-full w-full object-cover object-bottom",onLoadedData:()=>o(!0)}),i.jsx("div",{className:"absolute end-4 top-4",children:i.jsx(Wn,{onClick:h})})]}),i.jsxs("div",{className:"flex flex-col gap-2 px-8 pt-6 pb-8 text-center",children:[i.jsx("div",{className:"text-xl font-medium",children:i.jsx(P,{id:"OxVK72",defaultMessage:"Bring your ideas to life with images"})}),i.jsx("div",{className:"text-token-text-secondary w-full",children:i.jsx(P,{id:"bVWvdX",defaultMessage:"Create a free account to make illustrations, charts, comics, and more."})}),i.jsx("div",{className:"mt-4 mb-2 flex w-full flex-col gap-3",children:[g,p]}),i.jsx(Se,{color:"ghost",className:"text-token-text-secondary font-semibold underline hover:bg-transparent",onClick:h,children:i.jsx(P,N({},yn.stayLoggedOut))})]})]})},Die="/cdn/assets/no_auth_go_upsell_background-gp1k7btd.webp",Bie={src:Die};function Fie(t){const e=v.useRef(t);return bs(()=>{e.current=t}),e}function Uie(t){const e=Fie(t);v.useEffect(()=>{e.current()},[e])}const Hie=()=>{"use forget";const t=D.c(7),[e]=wo(),n=e.get(iY.NoAuthPlan);let s;e:switch(n){case Wg.Business:{s="Business";break e}case Wg.Go:{s="Go";break e}case Wg.Plus:{s="Plus";break e}case Wg.Pro:{s="Pro";break e}default:s=""}const o=s;let r;t[0]===Symbol.for("react.memo_cache_sentinel")?(r=mt(),t[0]=r):r=t[0];const l=!!(!r&&o);let c;t[1]!==l?(c=()=>{l&&V.logEventWithStatsig("No Auth Plan Upsell Modal Shown","chatgpt_no_auth_plan_upsell_shown")},t[1]=l,t[2]=c):c=t[2];const u=c,d=$ie;let f;return t[3]!==l||t[4]!==u||t[5]!==o?(f={isOpen:l,onClose:d,onMount:u,planType:o},t[3]=l,t[4]=u,t[5]=o,t[6]=f):f=t[6],f},Jtt=t=>{"use forget";const e=D.c(27),{onClose:n}=t,{onMount:s,onClose:o,planType:r}=Hie(),[a,l]=v.useState(!1),c=r==="Business"?"business":"personal",u="/?default_tab=".concat(c,"#pricing");Uie(s);let d;e[0]!==u?(d=function(){l(!0),fn({callbackUrl:u,fallbackScreenHint:"login",callback:E=>{_o({location:"No Auth Plan Upsell Modal",provider:E},Jt.ACCESS_FLOW_ENTRY_POINT_NO_AUTH_PLAN_UPSELL_MODAL),l(!1)},skipLoginModal:!1})},e[0]=u,e[1]=d):d=e[1];const f=d;let m;e[2]===Symbol.for("react.memo_cache_sentinel")?(m=i.jsx("img",{className:"h-[220px] w-full overflow-hidden object-cover",alt:"","aria-hidden":"true",src:Bie.src,loading:"eager",fetchPriority:"high"}),e[2]=m):m=e[2];let p;e[3]===Symbol.for("react.memo_cache_sentinel")?(p=i.jsx("h2",{className:"mb-1 text-center text-xl font-semibold",children:i.jsx(P,N({},Ty.title))}),e[3]=p):p=e[3];let g;e[4]!==r?(g=i.jsx("p",{className:"text-token-text-default-secondary text-gray-solid-500 mb-6 text-center",children:i.jsx(P,G(N({},Ty.subtitle),{values:{planType:r}}))}),e[4]=r,e[5]=g):g=e[5];let h;e[6]!==n||e[7]!==o?(h=()=>{n(),o()},e[6]=n,e[7]=o,e[8]=h):h=e[8];let _;e[9]===Symbol.for("react.memo_cache_sentinel")?(_=i.jsx(P,N({},yn.maybeLater)),e[9]=_):_=e[9];let x;e[10]!==h?(x=i.jsx(Se,{size:"large",color:"secondary",onClick:h,className:"w-full focus-visible:outline-none md:w-auto",children:_}),e[10]=h,e[11]=x):x=e[11];let b;e[12]!==a||e[13]!==r?(b=a?i.jsx(Us,{}):i.jsx(P,G(N({},Ty.primaryButton),{values:{planType:r}})),e[12]=a,e[13]=r,e[14]=b):b=e[14];let y;e[15]!==f||e[16]!==b?(y=i.jsx(Se,{size:"large",color:"primary",onClick:f,className:"w-full min-w-[130px] md:w-auto",children:b}),e[15]=f,e[16]=b,e[17]=y):y=e[17];let S;e[18]!==x||e[19]!==y?(S=i.jsxs("div",{className:"flex w-full flex-col-reverse gap-3 md:flex-row md:justify-center",children:[x,y]}),e[18]=x,e[19]=y,e[20]=S):S=e[20];let C;e[21]!==S||e[22]!==g?(C=i.jsxs("div",{className:"flex flex-col items-center justify-center self-center px-6 py-6 md:w-[464px] md:py-8",children:[p,g,S]}),e[21]=S,e[22]=g,e[23]=C):C=e[23];let w;return e[24]!==n||e[25]!==C?(w=i.jsxs(en,{testId:"modal-no-auth-go-upsell",isOpen:!0,onClose:n,type:"success",noPadding:!0,position:"center",size:"large",contentClassName:"flex flex-col",children:[m,C]}),e[24]=n,e[25]=C,e[26]=w):w=e[26],w},Ty=we({title:{id:"NoAuthGoUpsellModal.title",defaultMessage:"Unlock more of ChatGPT"},subtitle:{id:"NoAuthGoUpsellModal.subtitle",defaultMessage:"Upgrade to ChatGPT {planType} for extra messaging, uploads, and memory to keep your conversations going"},primaryButton:{id:"NoAuthGoUpsellModal.primaryButton",defaultMessage:"Upgrade to {planType}"}});function $ie(){V.logEventWithStatsig("No Auth Plan Upsell Modal Dismissed","chatgpt_no_auth_plan_upsell_dismissed")}function nL(){"use forget";const t=D.c(2),[e]=wo();let n;return t[0]!==e?(n=e.get("promoCode"),t[0]=e,t[1]=n):n=t[1],n}function sL(){"use forget";const t=D.c(2),[e]=wo();let n;return t[0]!==e?(n=e.get("referralCode"),t[0]=e,t[1]=n):n=t[1],n}const Xtt=t=>{"use forget";const e=D.c(30),{onClose:n}=t,s=Gd();let o;e[0]===Symbol.for("react.memo_cache_sentinel")?(o=Hp(yn.signUpButtonText),e[0]=o):o=e[0];const r=o,a=s?"center":"bottom",l=nL(),c=sL();let u,d;if(e[1]!==l||e[2]!==c?(u=()=>{l||c?V.logEventWithStatsig("No Auth Promo Redemption Modal Shown","chatgpt_no_auth_promo_redemption_modal_shown",{promoCode:l,referralCode:c}):console.warn("Mounted NoAuthPromoRedemptionModal without a valid promo code")},d=[l,c],e[1]=l,e[2]=c,e[3]=u,e[4]=d):(u=e[3],d=e[4]),v.useEffect(u,d),!l&&!c)return null;const f=l?"/p/".concat(l):"/rf/".concat(c);let m;e[5]===Symbol.for("react.memo_cache_sentinel")?(m=i.jsx("p",{className:"mb-6 text-center text-2xl font-semibold",children:i.jsx(P,N({},b4.title))}),e[5]=m):m=e[5];let p;e[6]!==f?(p=()=>{fn({fallbackScreenHint:"login",callback:Vie,callbackUrl:f,skipLoginModal:!1})},e[6]=f,e[7]=p):p=e[7];let g;e[8]===Symbol.for("react.memo_cache_sentinel")?(g=i.jsx(P,N({},yn.logInButtonText)),e[8]=g):g=e[8];let h;e[9]!==p?(h=i.jsx(Se,{as:"button",size:"large",color:"primary",fullWidth:!0,className:"mb-2 sm:mb-3",onClick:p,children:g}),e[9]=p,e[10]=h):h=e[10];let _;e[11]!==f?(_=()=>{fn({fallbackScreenHint:"signup",callback:zie,callbackUrl:f,skipLoginModal:!1})},e[11]=f,e[12]=_):_=e[12];let x;e[13]===Symbol.for("react.memo_cache_sentinel")?(x=i.jsx(P,N({},r)),e[13]=x):x=e[13];let b;e[14]!==_?(b=i.jsx(Se,{as:"button",size:"large",color:"secondary",fullWidth:!0,className:"mb-5",onClick:_,children:x}),e[14]=_,e[15]=b):b=e[15];let y;e[16]!==n||e[17]!==l||e[18]!==c?(y=E=>{E.preventDefault(),V.logEventWithStatsig("No Auth Promo Redemption Modal Dismissed","chatgpt_no_auth_promo_redemption_modal_dismissed",{promoCode:l,referralCode:c}),n()},e[16]=n,e[17]=l,e[18]=c,e[19]=y):y=e[19];let S;e[20]===Symbol.for("react.memo_cache_sentinel")?(S=i.jsx(P,N({},b4.stayLoggedOutLink)),e[20]=S):S=e[20];let C;e[21]!==y?(C=i.jsx("a",{href:"#",className:"text-token-text-secondary cursor-pointer font-semibold underline sm:text-sm",onClick:y,children:S}),e[21]=y,e[22]=C):C=e[22];let w;e[23]!==b||e[24]!==C||e[25]!==h?(w=i.jsxs("div",{className:"flex flex-col items-center justify-center px-6 py-8 sm:p-10",children:[m,h,b,C]}),e[23]=b,e[24]=C,e[25]=h,e[26]=w):w=e[26];let k;return e[27]!==a||e[28]!==w?(k=i.jsx(en,{testId:"modal-no-auth-promo-redemption",isOpen:!0,onClose:uo,shouldIgnoreClickOutside:!0,showCloseButton:!1,type:"success",noPadding:!0,size:"custom",className:"max-w-[373px] sm:max-w-[400px]",position:a,children:w}),e[27]=a,e[28]=w,e[29]=k):k=e[29],k},b4=we({title:{id:"NoAuthPromoRedemptionModal.title",defaultMessage:"Log in or sign up to redeem your promotion"},stayLoggedOutLink:{id:"NoAuthPromoRedemptionModal.stayLoggedOut",defaultMessage:"Stay logged out"}});function ent(){"use forget";const t=D.c(4);let e;t[0]===Symbol.for("react.memo_cache_sentinel")?(e=mt(),t[0]=e):e=t[0];const n=!e,s=nL(),o=sL();if(X(Gie)){let c;return t[1]===Symbol.for("react.memo_cache_sentinel")?(c={isOpen:!1},t[1]=c):c=t[1],c}const a=(s!=null?s:o)!=null&&n;let l;return t[2]!==a?(l={isOpen:a},t[2]=a,t[3]=l):l=t[3],l}function Gie(){return vR()}function Vie(t){_o({provider:t,location:"No Auth Promo Redemption Modal"},Jt.ACCESS_FLOW_ENTRY_POINT_NO_AUTH_PROMO_REDEMPTION_MODAL)}function zie(t){ci({provider:t,location:"No Auth Promo Redemption Modal"},Jt.ACCESS_FLOW_ENTRY_POINT_NO_AUTH_PROMO_REDEMPTION_MODAL)}const tnt=je(()=>Me(()=>import("./3589534a-kib9eo5xg735gbk9.js"),__vite__mapDeps([11,1,2,3,12,13,14,6,7,15])).then(t=>t.NoAuthWelcomeBackModal)),oL="has-dismissed-welcome-back-modal",nnt=()=>{"use forget";const t=D.c(15),[e,n]=v.useState(Wie),s=lY();let o;t[0]===Symbol.for("react.memo_cache_sentinel")?(o=mt(),t[0]=o):o=t[0];const r=!o;let a;t[1]===Symbol.for("react.memo_cache_sentinel")?(a=q0(),t[1]=a):a=t[1];const l=a,c=bR(),u=cY();let d;t[2]===Symbol.for("react.memo_cache_sentinel")?(d=()=>{n(!0),sessionStorage.setItem(oL,"true")},t[2]=d):d=t[2];const f=d;let m;t[3]!==e||t[4]!==c||t[5]!==s||t[6]!==u?(m=r&&!e&&l&&!s&&!c&&(uY()||!mY())&&(dY()||u==="not_shown"&&fY()),t[3]=e,t[4]=c,t[5]=s,t[6]=u,t[7]=m):m=t[7];const p=m,g=X(qie);let h,_;if(t[8]!==g||t[9]!==p?(h=()=>{pY.set(p),p&&vM.set(!0),g&&vM.set(!0)},_=[p,g],t[8]=g,t[9]=p,t[10]=h,t[11]=_):(h=t[10],_=t[11]),v.useEffect(h,_),g){let b;return t[12]===Symbol.for("react.memo_cache_sentinel")?(b={isOpen:!1,onClose:null},t[12]=b):b=t[12],b}let x;return t[13]!==p?(x={isOpen:p,onClose:f},t[13]=p,t[14]=x):x=t[14],x};function Wie(){return sessionStorage.getItem(oL)!=null}function qie(){return vR()}const snt=()=>{const t=v.useRef(Kie()),e=!mt(),n=q0(),s=gY(),o=e&&s&&!t.current&&!n,r=v.useCallback(()=>{o&&(Yie(),V.logEventWithStatsig("Meet ChatGPT Modal Shown","chatgpt_meet_chatgpt_modal_shown"))},[o]),a=()=>{V.logEventWithStatsig("Meet ChatGPT Modal Confirmation Button Clicked","chatgpt_meet_chatgpt_modal_confirmation_button_clicked")};return o?{onConfirmationButtonClick:a,onMount:r,state:"show"}:{onConfirmationButtonClick:a,onMount:r,state:"hide"}};function Kie(){return!!localStorage.getItem(Ie.HasSeenMeetChatGptModal)}function Yie(){return localStorage.setItem(Ie.HasSeenMeetChatGptModal,"true")}const rL={[Ri.LoggedIn]:Ie.LoggedInUserMessageCount,[Ri.LoggedOut]:Ie.NoAuthUserMessageCount},fw=tn(ls(()=>({messageCountByAuthStatus:{[Ri.LoggedIn]:v4(Ri.LoggedIn),[Ri.LoggedOut]:v4(Ri.LoggedOut)}})));function Zie(t){return t.messageCountByAuthStatus[Ri.LoggedOut]}function Qie(t){return t.messageCountByAuthStatus[Ri.LoggedIn]}const ont={incrementUserMessageCount:t=>{fw.setState(e=>{const n=e.messageCountByAuthStatus[t]+1;e.messageCountByAuthStatus[t]=n,Jie({authStatus:t,messageCount:n})})}};function v4(t){const e=localStorage.getItem(rL[t]);return e?Number(e):0}function Jie({authStatus:t,messageCount:e}){localStorage.setItem(rL[t],String(e))}const S4=5,Xie=({type:t="default"}={})=>{"use no-forget";var w;const n=Je("2382331255").get("is_soft_rate_limit_modal_enabled",!0),s=Je("2118136551"),o=s.get("soft_rate_limit_cooldown_ms",0),r=s.get("soft_rate_limit_session_cooldown_enabled",!1),[a,l]=v.useState(()=>sessionStorage.getItem(Ie.NoAuthHasDismissedSoftRateLimitModal)!=null),c=!mt(),u=q0(),d=fw(Zie),f=v.useRef(d),m=d>=S4,[p,g]=v.useState(!1),h=v.useRef(!1),_=v.useRef(null),x=v.useRef(0);if(!h.current)try{if(o>0){const k=tt.getItem(Ie.NoAuthSoftRateLimitModalLastShownAt);_.current=typeof k=="number"?k:null}if(r){const k=Number.parseInt((w=sessionStorage.getItem(Ie.NoAuthSoftRateLimitModalSessionCounter))!=null?w:"",10);if(Number.isFinite(k))x.current=k;else{const E=tt.getItem(Ie.NoAuthSoftRateLimitModalSessionCounter),T=typeof E=="number"?E+1:1;x.current=T,tt.setItem(Ie.NoAuthSoftRateLimitModalSessionCounter,T),sessionStorage.setItem(Ie.NoAuthSoftRateLimitModalSessionCounter,String(T))}}}catch(k){}finally{h.current=!0}v.useEffect(()=>{f.current<d&&(f.current=d,d===S4&&g(!0))},[d]);const b=cp(),y=c&&m&&(t==="default"||p)&&!a&&!u&&!b&&n&&(o<=0||_.current==null||Date.now()-_.current>=o)&&(!r||x.current%2===1),S=v.useCallback(()=>{if(y){V.logEvent("No Auth Soft Rate Limit Modal Shown"),ft.logEvent("chatgpt_no_auth_soft_rate_limit_modal_shown");const k=Date.now();tt.setItem(Ie.NoAuthSoftRateLimitModalLastShownAt,k)}},[y]);return{isOpen:y,onClose:()=>{l(!0),sessionStorage.setItem(Ie.NoAuthHasDismissedSoftRateLimitModal,"true")},onMount:S}},Cr=je(()=>Me(()=>import("./85c35906-klkbhmy112vjq998.js").then(t=>t.F),__vite__mapDeps([16,1,2,3,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,10,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116])).then(t=>t.FormattedText));function ele(){return v.use(Cr.prefetch()),null}const rnt=je(()=>Me(()=>import("./9826050f-jhzpevpq8lx618ck.js"),__vite__mapDeps([117,1,118,2,3,119])).then(t=>t.OpenStatusText)),ant=je(()=>Me(()=>import("./9826050f-jhzpevpq8lx618ck.js"),__vite__mapDeps([117,1,118,2,3,119])).then(t=>t.BusinessMetadataWidget)),int=je(()=>Me(()=>import("./9826050f-jhzpevpq8lx618ck.js"),__vite__mapDeps([117,1,118,2,3,119])).then(t=>t.BusinessMetadataSummaryLine));je(()=>Me(()=>import("./2c5c5d1e-bkl66xp25l8xo7oi.js").then(t=>t.w),__vite__mapDeps([57,1,2,3,58,59,60,61,62,63,64,26,27,28,36,24,25,29,30,35,65,66,33,67,32,34,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88])).then(t=>t.WritingBlockRenderer));function aL({workspaceId:t,enabled:e=!0}){return ut({queryKey:["workspace-policy",t],queryFn:t?()=>ue.safeGet("/accounts/{account_id}/workspace_policy",{parameters:{path:{account_id:t}}}):xC,enabled:!!t&&e})}function lnt(t){const e=Nt();return zt({mutationFn:n=>ue.safePost("/accounts/{account_id}/workspace_policy",{parameters:{path:{account_id:t}},requestBody:{workspace_policy:n}}),onSuccess:()=>{e.invalidateQueries({queryKey:["workspace-policy",t]}),e.invalidateQueries({queryKey:["workspace-settings"]})}})}const tle=We.hasSeenWorkSpacePolicy;function nle(t){"use forget";const e=D.c(7),{workspaceId:n,enabled:s}=t,o=s===void 0?!0:s;let r,a;e[0]!==n?(r=["workspace-policy-acknowledge",n],a=()=>n?ue.safeGet("/accounts/{account_id}/workspace_policy/acknowledge",{parameters:{path:{account_id:n}}}):Promise.resolve(null),e[0]=n,e[1]=r,e[2]=a):(r=e[1],a=e[2]);const l=!!n&&o;let c;return e[3]!==r||e[4]!==a||e[5]!==l?(c={queryKey:r,queryFn:a,enabled:l},e[3]=r,e[4]=a,e[5]=l,e[6]=c):c=e[6],ut(c)}function sle(t){"use forget";const e=D.c(9),{workspaceId:n}=t,s=Nt();let o;e[0]!==n?(o=c=>{const{policyHash:u}=c;return ue.safePost("/accounts/{account_id}/workspace_policy/acknowledge",{parameters:{path:{account_id:n}},requestBody:{policy_hash:u}})},e[0]=n,e[1]=o):o=e[1];let r,a;e[2]!==s?(r=()=>{s.setQueryData(aa().queryKey,ole)},a=()=>{s.invalidateQueries(aa())},e[2]=s,e[3]=r,e[4]=a):(r=e[3],a=e[4]);let l;return e[5]!==o||e[6]!==r||e[7]!==a?(l={mutationFn:o,onMutate:r,onSuccess:a},e[5]=o,e[6]=r,e[7]=a,e[8]=l):l=e[8],zt(l)}function ole(t){return t&&G(N({},t),{eligible_announcements:t.eligible_announcements.filter(rle)})}function rle(t){return t!==tle}function cnt(t){const e=Nt();return zt({mutationFn:({enabled:n})=>ue.safePost("/accounts/{account_id}/workspace_policy/settings",{parameters:{path:{account_id:t}},requestBody:{enabled:n}}),onSuccess:()=>{e.invalidateQueries({queryKey:["workspace-settings"]})}})}const iL=t=>{let e=0;if(!t)return"";for(let n=0;n<t.length;n++)e=(e<<5)-e+t.charCodeAt(n),e|=0;return e.toString()},lL=30,ale=lL*24*60*60*1e3,mw=st(null),ile=(t,e,n)=>{const s={hash:n,expiresAt:Date.now()+ale};tt.setItem(Ie.WorkspacePolicyViewed,JSON.stringify(s),{userId:e,workspaceId:t}),mw.set(n)},lle=(t,e,n,s)=>{if(s&&s.policy_hash&&s.last_acknowledged_at){const r=Date.parse(s.last_acknowledged_at);if(!Number.isNaN(r)){const a=n&&Number.isFinite(n)&&n>0?n:lL;if(Date.now()-a*24*60*60*1e3<r)return s.policy_hash}}const o=tt.getItem(Ie.WorkspacePolicyViewed,{userId:e,workspaceId:t});if(!o)return null;try{const r=JSON.parse(o);if(r.expiresAt>Date.now())return r.hash}catch(r){}return null},unt=()=>{"use forget";var k,E,T;const t=D.c(21),e=br(ma.businessWorkspaceId),n=(k=_n())==null?void 0:k.id,{data:s,isLoading:o}=Lc(e!=null?e:void 0),r=!!((E=s==null?void 0:s.beta_settings)!=null&&E.workspace_policy),a=e!=null?e:void 0;let l;t[0]!==r||t[1]!==a?(l={workspaceId:a,enabled:r},t[0]=r,t[1]=a,t[2]=l):l=t[2];const{data:c,isLoading:u}=aL(l),d=e!=null?e:void 0;let f;t[3]!==r||t[4]!==d?(f={workspaceId:d,enabled:r},t[3]=r,t[4]=d,t[5]=f):f=t[5];const{data:m,isLoading:p}=nle(f),g=o||u||p,h=(T=c==null?void 0:c.workspace_policy)!=null?T:"";let _;t[6]!==h?(_=iL(h),t[6]=h,t[7]=_):_=t[7];const x=_,b=X(cle);let y,S;if(t[8]!==o||t[9]!==m||t[10]!==n||t[11]!==e||t[12]!==s?(y=()=>{if(!e||!n||o||!s)return;const M=s.beta_settings_str.workspace_policy_cadence,A=Number(M),I=lle(e,n,A,m);mw.set(I)},S=[e,n,o,s,m],t[8]=o,t[9]=m,t[10]=n,t[11]=e,t[12]=s,t[13]=y,t[14]=S):(y=t[13],S=t[14]),v.useEffect(y,S),!e){let M;return t[15]===Symbol.for("react.memo_cache_sentinel")?(M={isLoading:!1,isOpen:!1},t[15]=M):M=t[15],M}if(g||!n){let M;return t[16]===Symbol.for("react.memo_cache_sentinel")?(M={isLoading:!0,isOpen:!1},t[16]=M):M=t[16],M}if(!r||!c||!h){let M;return t[17]===Symbol.for("react.memo_cache_sentinel")?(M={isLoading:!1,isOpen:!1},t[17]=M):M=t[17],M}if((s==null?void 0:s.beta_settings_str.workspace_policy_cadence)==="every_login"){let M;return t[18]===Symbol.for("react.memo_cache_sentinel")?(M={isLoading:!1,isOpen:!0},t[18]=M):M=t[18],M}const C=x!==b;let w;return t[19]!==C?(w={isLoading:!1,isOpen:C},t[19]=C,t[20]=w):w=t[20],w},dnt=({onClose:t})=>{var m,p,g;const e=te(),n=br(ma.businessWorkspaceId),s=(m=_n())==null?void 0:m.id,{mutate:o}=sle({workspaceId:n!=null?n:""}),{data:r,isLoading:a}=aL({workspaceId:n!=null?n:void 0}),l=(p=r==null?void 0:r.workspace_policy)!=null?p:"",c=br(ma.isBusinessWorkspace),u=br(h=>h.currentWorkspace),d=e.formatMessage(C4.workspaceWelcome,{workspaceName:u==null?void 0:u.name}),f=()=>{t(),V.logEvent("Workspace Policy Acknowledged",{workspaceId:n});const h=iL(l);o({policyHash:h}),n&&s&&ile(n,s,h)};return i.jsx(en,{testId:"modal-workspace-policy",isOpen:!0,onClose:f,type:"success",icon:c?i.jsx(_Y,{size:"small",src:u==null?void 0:u.profilePictureUrl}):void 0,title:d,size:"custom",shouldIgnoreClickOutside:!0,className:"h-[80vh]! min-h-[500px]! w-[80vw]!",children:a?i.jsx(hY,{lines:10,size:"xl"}):i.jsx("div",{className:"flex h-full min-h-0 flex-col",children:i.jsx("div",{className:"min-h-0 flex-1 overflow-y-auto",children:i.jsxs("div",{className:"flex min-h-full flex-col gap-6",children:[i.jsx(Cr,{size:"small",className:"px-4 md:px-6",useSafeUrls:!1,children:(g=r==null?void 0:r.workspace_policy)!=null?g:""}),i.jsx("div",{className:"mt-auto flex flex-row justify-end px-4 md:px-6",children:i.jsx(B0,{title:e.formatMessage(C4.gettingStartedButton),onClick:f,color:"primary"})})]})})})})},C4=we({workspaceWelcome:{id:"BlockingInitialModals.workspaceWelcome",defaultMessage:"Welcome to the {workspaceName} workspace"},gettingStartedButton:{id:"BlockingInitialModals.acknowledgeButton",defaultMessage:"Acknowledge"}});function cle(){return mw()}const ule="/cdn/assets/team-upsell-landscape-ee106ppw.webp",dle={src:ule},cL=["AD","AE","AF","AG","AI","AL","AM","AO","AQ","AR","AT","AU","AX","AZ","BA","BB","BD","BE","BF","BG","BH","BI","BJ","BL","BM","BN","BO","BR","BS","BT","BW","BZ","CA","CD","CF","CG","CH","CI","CK","CL","CM","CO","CR","CV","CW","CY","CZ","DE","DJ","DK","DM","DO","DZ","EC","EE","EG","ER","ES","ET","FI","FJ","FM","FO","FR","GA","GB","GD","GE","GF","GG","GH","GI","GL","GM","GN","GP","GQ","GR","GT","GW","GY","HN","HR","HT","HU","ID","IE","IL","IM","IN","IQ","IS","IT","JE","JM","JO","JP","KE","KG","KH","KI","KM","KN","KR","KW","KY","KZ","LA","LB","LC","LI","LK","LR","LS","LT","LU","LV","LY","MA","MC","MD","ME","MF","MG","MH","MK","ML","MM","MN","MQ","MR","MS","MT","MU","MV","MW","MX","MY","MZ","NA","NC","NE","NG","NI","NL","NO","NP","NR","NU","NZ","OM","PA","PE","PF","PG","PH","PK","PL","PM","PR","PS","PT","PW","PY","QA","RE","RO","RS","RW","SA","SB","SC","SD","SE","SG","SH","SI","SJ","SK","SL","SM","SN","SO","SR","SS","ST","SV","SZ","TC","TD","TF","TG","TH","TJ","TK","TL","TM","TN","TO","TR","TT","TV","TW","TZ","UA","UG","US","UY","UZ","VA","VC","VG","VN","VU","WF","WS","XK","YE","YT","ZA","ZM","ZW"],fle=new Set(["AT","BE","BG","HR","CY","CZ","DK","EE","FI","FR","DE","GF","GP","GR","HU","IS","IE","IT","LV","LI","LT","LU","MF","MQ","MT","NL","NO","PL","PT","RE","RO","SK","SI","ES","SE","YT"]),mle=new Set(["AT","BE","BG","HR","CY","CZ","DK","EE","FI","FR","DE","GR","HU","IS","IE","IT","LI","LT","LU","LV","MT","NL","NO","PL","PT","RO","SK","SI","ES","SE","GB","CH","AX","PF","RS","ME","XK","MC","SM","AD","VA"]),ple=new Set(["GF","GP","MF","MQ","RE","YT"]),L1="US",gle="IN",hle={AL:"Albania",DZ:"Algeria",AF:"Afghanistan",AD:"Andorra",AO:"Angola",AI:"Anguilla",AQ:"Antarctica",AG:"Antigua & Barbuda",AR:"Argentina",AM:"Armenia",AU:"Australia",AT:"Austria",AZ:"Azerbaijan",AX:"land Islands",BS:"Bahamas",BH:"Bahrain",BD:"Bangladesh",BB:"Barbados",BE:"Belgium",BZ:"Belize",BJ:"Benin",BM:"Bermuda",BT:"Bhutan",BO:"Bolivia",BA:"Bosnia & Herzegovina",BW:"Botswana",BR:"Brazil",VG:"British Virgin Islands",BN:"Brunei",BG:"Bulgaria",BF:"Burkina Faso",BI:"Burundi",BL:"Saint Barthlemy",CV:"Cape Verde",CW:"Curaao",KH:"Cambodia",CM:"Cameroon",CA:"Canada",KY:"Cayman Islands",CF:"Central African Republic",TD:"Chad",CL:"Chile",CO:"Colombia",KM:"Comoros",CG:"Congo - Brazzaville",CD:"Congo - Kinshasa",CR:"Costa Rica",CI:"Cte dIvoire",CK:"Cook Islands",HR:"Croatia",CY:"Cyprus",CZ:"Czechia",DK:"Denmark",DJ:"Djibouti",DM:"Dominica",DO:"Dominican Republic",EC:"Ecuador",EG:"Egypt",SV:"El Salvador",GQ:"Equatorial Guinea",ER:"Eritrea",EE:"Estonia",SZ:"Eswatini",ET:"Ethiopia",FJ:"Fiji",FI:"Finland",FO:"Faroe Islands",FR:"France",GF:"French Guiana",GG:"Guernsey",TF:"French Southern Territories",GA:"Gabon",GM:"Gambia",GE:"Georgia",DE:"Germany",GH:"Ghana",GI:"Gibraltar",GL:"Greenland",GR:"Greece",GD:"Grenada",GP:"Guadeloupe",GT:"Guatemala",GN:"Guinea",GW:"Guinea-Bissau",GY:"Guyana",HT:"Haiti",VA:"Vatican City",HN:"Honduras",HU:"Hungary",IS:"Iceland",IN:"India",ID:"Indonesia",IQ:"Iraq",IE:"Ireland",IL:"Israel",IM:"Isle of Man",IT:"Italy",JM:"Jamaica",JP:"Japan",JE:"Jersey",JO:"Jordan",KZ:"Kazakhstan",KE:"Kenya",KI:"Kiribati",KW:"Kuwait",KG:"Kyrgyzstan",LA:"Laos",LV:"Latvia",LB:"Lebanon",LS:"Lesotho",LR:"Liberia",LY:"Libya",LI:"Liechtenstein",LT:"Lithuania",LU:"Luxembourg",MG:"Madagascar",MW:"Malawi",MY:"Malaysia",MV:"Maldives",ML:"Mali",MT:"Malta",MH:"Marshall Islands",MQ:"Martinique",MR:"Mauritania",MU:"Mauritius",YT:"Mayotte",MX:"Mexico",FM:"Micronesia",MD:"Moldova",MC:"Monaco",MN:"Mongolia",ME:"Montenegro",MS:"Montserrat",MA:"Morocco",MZ:"Mozambique",NC:"New Caledonia",MM:"Myanmar (Burma)",NA:"Namibia",NR:"Nauru",NP:"Nepal",NL:"Netherlands",NZ:"New Zealand",NU:"Niue",NI:"Nicaragua",NE:"Niger",NG:"Nigeria",MK:"North Macedonia",NO:"Norway",OM:"Oman",PK:"Pakistan",PW:"Palau",PS:"Palestine",PA:"Panama",PG:"Papua New Guinea",PY:"Paraguay",PE:"Peru",PF:"French Polynesia",PH:"Philippines",PL:"Poland",PM:"St. Pierre & Miquelon",PR:"Puerto Rico",PT:"Portugal",QA:"Qatar",RE:"Runion",RO:"Romania",RW:"Rwanda",KN:"St. Kitts & Nevis",LC:"St. Lucia",VC:"St. Vincent & Grenadines",SH:"Saint Helena",MF:"Saint Martin",WS:"Samoa",SM:"San Marino",ST:"So Tom & Prncipe",SJ:"Svalbard & Jan Mayen",SA:"Saudi Arabia",SN:"Senegal",RS:"Serbia",SC:"Seychelles",SL:"Sierra Leone",SG:"Singapore",SK:"Slovakia",SI:"Slovenia",SB:"Solomon Islands",SO:"Somalia",ZA:"South Africa",KR:"South Korea",SS:"South Sudan",ES:"Spain",LK:"Sri Lanka",SR:"Suriname",SE:"Sweden",CH:"Switzerland",SD:"Sudan",TW:"Taiwan",TJ:"Tajikistan",TK:"Tokelau",TZ:"Tanzania",TH:"Thailand",TL:"Timor-Leste",TG:"Togo",TO:"Tonga",TT:"Trinidad & Tobago",TN:"Tunisia",TR:"Trkiye",TM:"Turkmenistan",TC:"Turks and Caicos Islands",TV:"Tuvalu",UG:"Uganda",UA:"Ukraine",AE:"United Arab Emirates",GB:"United Kingdom",US:"United States",UY:"Uruguay",UZ:"Uzbekistan",VU:"Vanuatu",VN:"Vietnam",WF:"Wallis & Futuna",XK:"Kosovo",YE:"Yemen",ZM:"Zambia",ZW:"Zimbabwe"};function pw(t){return cL.includes(t)}function _le({country:t,shouldUseDefaultCountryCode:e}){return t==null||!pw(t)?(Ve.addError("User country is null or unrecognized - will use ".concat(L1),{user_country:t}),L1):t}function fnt(t){if(t.includes("-")){const e=t.split("-")[1].toUpperCase();if(pw(e))return e}return null}function xle(t){try{const e=new Intl.DisplayNames([t],{type:"region"});return n=>{var s;return(s=e.of(n))!=null?s:""}}catch(e){return Ve.addError("Failed to create country display name formatter, will fallback to en_US locale display name",{cause:e}),n=>{var s;return(s=hle[n])!=null?s:""}}}function yle(){const t=is();return v.useMemo(()=>xle(t.locale),[t.locale])}function mnt(){const t=yle();return v.useMemo(()=>[...cL].sort((n,s)=>{const o=t(n),r=t(s);return o.localeCompare(r)}),[t])}function ble(t){return fle.has(t)}function vle(t){return mle.has(t)}function pnt(t){return t==null?(Ve.addError(new Error("nullish_country_for_vat_collection_exclusion_check"),{country:t}),!1):ple.has(t)}const gnt="https://help.openai.com/en/collections/3943089-billing",Sle="https://openai.com/chatgpt/enterprise",hnt="https://help.openai.com/en/articles/7905690-how-do-i-cancel-my-apple-subscription-for-chatgpt-plus-in-the-chatgpt-ios-app",_nt="https://help.openai.com/en/articles/8258076-how-to-cancel-my-plus-subscription-in-the-chatgpt-android-app",xnt="https://help.openai.com/en/articles/7864572-what-is-the-chatgpt-model-selector",ynt="https://help.openai.com/en/articles/11989085-chatgpt-go",bnt="https://help.openai.com/en/articles/20001047",D1="pricing",$p="team-pricing",vnt="plus-pricing",j_="account-payment-modal-open-from-location",Cle="account-payment-modal-storage-upsell",My="account-payment-modal-view",wle="plus_free_trial",gw="promo_campaign",Ay="gift_modal_plan",Ny={CHATGPT_IOS:"chatgpt_mobile_ios",SORA_IOS:"sora_mobile_ios",MOBILE_ANDROID:"chatgpt_mobile_android"};function Snt(){const t=!mt(),e=Eo("2210309751").get("variant","control"),n=Ko(),[s]=op(Ie.HasDismissedTeamsNoAuthUpsell,!1,eL);return!(!n&&t&&e==="front-door"&&!s)||tt.getItem(Ie.HasDismissedTeamsNoAuthUpsell)?"hide":"show"}function Cnt({onClose:t}){xe("676035580");const e=bt(),n=xY(),s=()=>{t(),tt.setItem(Ie.HasDismissedTeamsNoAuthUpsell,!0)},o=()=>{s(),e({hash:$p,search:window.location.search},{state:{[j_]:"Teams no-auth upsell announcement"}})};return i.jsx(rp,{open:!0,modal:!1,children:i.jsx(ap,{container:n==null?void 0:n.document.body,children:i.jsxs("div",{className:"bg-token-bg-primary popover border-token-border-default bg-primary fixed end-4 bottom-4 z-100 flex w-full max-w-sm flex-col gap-3 overflow-hidden rounded-2xl border shadow-xl",children:[i.jsx("img",{className:"h-[147px] object-cover",src:dle.src,alt:""}),i.jsxs("div",{className:"flex flex-col px-6 py-5",children:[i.jsx("p",{className:"text-token-text-primary mb-1 text-lg font-medium text-pretty",children:i.jsx(P,N({},ah.teamsNoAuthUpsellTitle))}),i.jsx("p",{className:"text-token-text-secondary text-sm text-pretty",children:i.jsx(P,N({},ah.teamsNoAuthUpsellDescription))}),i.jsxs("div",{className:"mt-5 flex flex-row justify-start space-x-2",children:[i.jsx(Se,{as:"button",color:"primary",onClick:o,children:i.jsx(P,N({},ah.getTeam))}),!1,i.jsx(Se,{as:"button",color:"secondary",onClick:s,children:i.jsx(P,N({},ah.notNow))})]})]})]})})})}const ah=we({teamsNoAuthUpsellTitle:{id:"TeamsNoAuthUpsell.title",defaultMessage:"A shared space for teams"},teamsNoAuthUpsellDescription:{id:"TeamsNoAuthUpsell.description",defaultMessage:"Supercharge your team's work with a shared workspace, admin controls, and connectors to your company tools."},getTeam:{id:"TeamsNoAuthUpsell.getTeam",defaultMessage:"Get Business"},notNow:{id:"TeamsNoAuthUpsell.notNow",defaultMessage:"Not now"}}),Gp=re(me,"003104",20,20),uL=re(me,"99561c",20,20),dL=We.Onboarding,kle=()=>{const{eligible:t,isLoading:e}=Ct(dL);return{hasSeenOnboardingDate:e?null:!t}},wnt=()=>{const{eligible:t,isLoading:e}=Ct(We.TeamOwnerOnboarding);return{hasSeenTeamOwnerOnboardingDate:e?null:!t}};function knt({onClose:t,scope:e}){const n=v.useCallback(()=>{t(!0),kt(dL)},[t]);return e===n8.Personal?i.jsx(Tle,{onSubmit:n}):i.jsx(Mle,{onSubmit:()=>{t(!0)}})}const zu=({icon:t,title:e,body:n})=>i.jsxs("div",{className:"flex flex-col gap-2 md:w-1/3",children:[i.jsxs("div",{className:"flex flex-row items-start gap-2",children:[i.jsx("div",{className:"mt-1",children:t}),i.jsx("div",{className:"text-token-text-primary font-semibold",children:e})]}),i.jsx("div",{className:"text-token-text-secondary text-sm",children:n})]}),Ele="https://help.openai.com/en/articles/7039943-data-usage-for-consumer-services-faq",Tle=({onSubmit:t})=>{const e=te();return i.jsxs("div",{className:"flex flex-col gap-3 p-4 md:p-6",children:[i.jsxs("div",{className:"flex flex-col gap-6 md:flex-row",children:[i.jsx(zu,{icon:i.jsx(Gp,{isSolid:!0,className:"icon text-green-600"}),title:i.jsx(P,N({},oo.askAway)),body:i.jsx(P,N({},oo.askAwayBody))}),i.jsx(zu,{icon:i.jsx(yY,{className:"icon text-brand-purple"}),title:i.jsx(P,N({},oo.warning)),body:i.jsx(P,G(N({},oo.warningBody),{values:{article:n=>i.jsx("a",{href:Ele,target:"_blank",className:"underline",rel:"noopener noreferrer",children:n})}}))}),i.jsx(zu,{icon:i.jsx(SR,{className:"icon mt-0.5 text-orange-300"}),title:i.jsx(P,N({},oo.accuracy)),body:i.jsx(P,N({},oo.accuracyBody))})]}),i.jsx("div",{className:"flex flex-row justify-end",children:i.jsx(B0,{title:e.formatMessage(oo.gettingStartedButton),onClick:t,color:"primary","data-testid":"getting-started-button"})})]})},Mle=({onSubmit:t})=>{const e=te();return i.jsxs("div",{className:"flex flex-col gap-6 p-4 md:p-6",children:[i.jsxs("div",{className:"flex flex-col gap-6 md:flex-row",children:[i.jsx(zu,{icon:i.jsx(uL,{className:"icon text-brand-purple"}),title:i.jsx(P,N({},oo.workUse)),body:i.jsx(P,N({},oo.workUseBody))}),i.jsx(zu,{icon:i.jsx(Gp,{className:"icon text-green-600"}),title:i.jsx(P,N({},oo.askAway)),body:i.jsx(P,N({},oo.askAwayBody))}),i.jsx(zu,{icon:i.jsx(SR,{className:"icon mt-0.5 text-orange-300"}),title:i.jsx(P,N({},oo.accuracy)),body:i.jsx(P,N({},oo.accuracyBody))})]}),i.jsx("div",{className:"flex flex-row justify-end",children:i.jsx(B0,{title:e.formatMessage(oo.gettingStartedButton),onClick:t,color:"primary"})})]})},oo=we({askAway:{id:"onboarding.askAway",defaultMessage:"Ask away"},askAwayBody:{id:"onboarding.askAwayBody",defaultMessage:"ChatGPT can answer questions, help you learn, write code, brainstorm together, and much more."},askAwayEducationBody:{id:"onboarding.askAwayEducationBody",defaultMessage:"Use ChatGPT to brainstorm lesson ideas, differentiate materials, create assessments, or save time on prep."},warning:{id:"onboarding.warning",defaultMessage:"Dont share sensitive info"},warningBody:{id:"onboarding.warningBody",defaultMessage:"Chat history may be reviewed or used to improve our services. Learn more about your choices in our <article>Help Center</article>."},accuracy:{id:"onboarding.accuracy",defaultMessage:"Check your facts"},accuracyBody:{id:"onboarding.accuracyBody",defaultMessage:"While we have safeguards, ChatGPT may give you inaccurate information. Its not intended to give advice."},accuracyEducation:{id:"onboarding.accuracyEducation",defaultMessage:"Check important details"},accuracyEducationBody:{id:"onboarding.accuracyEducationBody",defaultMessage:"While helpful, ChatGPT can be incorrect. Check important information."},gettingStartedButton:{id:"onboarding.gettingStartedButton",defaultMessage:"Okay, lets go"},workspaceWelcome:{id:"onboarding.workspaceWelcome",defaultMessage:"Welcome to the {workspaceName} Workspace"},workspaceWelcomeNoName:{id:"onboarding.workspaceWelcomeNoName",defaultMessage:"Welcome to the your Workspace"},workspaceWelcomeBody:{id:"onboarding.workspaceWelcomeBody",defaultMessage:"Here you can use our latest models, with more capabilities, and fewer limits."},workUse:{id:"onboarding.workUse",defaultMessage:"Made for use at work"},educationUse:{id:"onboarding.educationUse",defaultMessage:"Made for your classroom"},workUseBody:{id:"onboarding.workUseBody",defaultMessage:"Your chats arent used to train our models, including anything you share like lesson plans, student data, and planning work."}}),fL=re(me,"dace10",20,20),P_=re(me,"e717cc",20,20),mL=We.MemoryOnboarding;function Ent(){const t=Fp(),{eligible:e,isLoading:n}=Ct(mL);return{eligible:e&&t,isLoading:n}}function Iy({icon:t,title:e,description:n}){return i.jsxs("div",{className:"flex items-start",children:[i.jsx("div",{className:"text-token-text-secondary mt-1",children:t}),i.jsxs("div",{className:"ms-4",children:[i.jsx("div",{className:"text-lg font-semibold",children:e}),i.jsx("p",{className:"text-token-text-secondary mt-1 text-sm",children:n})]})]})}function Tnt({onClose:t}){const e=Ale(),n=pl(),s=voe(),o=dw(),r=(o==null?void 0:o[Ft.Sunshine])===!0,a=te(),l=v.useCallback(()=>{kt(mL),t()},[t]);return v.useEffect(()=>{V.logUpsellOrModalEvent(qn,{eventId:"memory_onboarding_modal_shown",type:Kn.UPSELL_OR_MODAL_TYPE_CUSTOM_NUX_MODAL})},[]),i.jsx(en,{testId:"modal-memory-onboarding",isOpen:!0,onClose:uo,size:"custom",className:"max-w-xl",type:"success",title:a.formatMessage(Wr.title),secondaryButton:e?i.jsx(Es.Button,{onClick:async()=>{try{await n.mutateAsync({setting:Ft.Sunshine,value:!1}),l()}catch(c){}},title:a.formatMessage(Wr.notNow),color:"secondary",disabled:r}):null,primaryButton:e?i.jsx(Es.Button,{onClick:async()=>{try{if(await n.mutateAsync({setting:Ft.Sunshine,value:!0}),s)try{await n.mutateAsync({setting:Ft.GoldenHour,value:!0})}catch(c){}l()}catch(c){}},title:a.formatMessage(Wr.enable),color:"primary",disabled:r}):i.jsx(Es.Button,{onClick:l,title:a.formatMessage(Wr.continue),color:"primary"}),children:i.jsxs("div",{className:"mb-6 flex flex-col gap-3",children:[i.jsx(Iy,{icon:i.jsx(bl,{}),title:a.formatMessage(Wr.bulletTitle1),description:a.formatMessage(Wr.bulletDescription1)}),i.jsx(Iy,{icon:i.jsx(P_,{}),title:a.formatMessage(Wr.bulletTitle2),description:i.jsx(P,N({},Wr.bulletDescription2))}),i.jsx(Iy,{icon:i.jsx(fL,{}),title:a.formatMessage(Wr.bulletTitle3),description:i.jsx(P,G(N({},Wr.bulletDescription3),{values:{link1:c=>i.jsx("a",{href:"https://help.openai.com/en/articles/8590148-memory-faq",target:"_blank",rel:"noreferrer",className:"cursor-pointer underline",children:c}),link2:c=>i.jsx(ko,{to:Fd(Ts.Personalization),className:"underline",children:c}),link3:c=>i.jsx("a",{href:"https://help.openai.com/en/articles/8590148-memory-faq#h_b8745c1ae1",target:"_blank",rel:"noreferrer",className:"cursor-pointer underline",children:c})}}))})]})})}function Ale(){return xe("1542198993")}const Wr=we({title:{id:"MemoryOnboardingModal.title.1",defaultMessage:"ChatGPT now has memory"},bulletTitle1:{id:"MemoryOnboardingModal.bulletTitle1",defaultMessage:"Keep the conversation going"},bulletDescription1:{id:"MemoryOnboardingModal.bulletDescription1.1",defaultMessage:"ChatGPT will automatically remember useful details and preferences you share in all your conversations, carrying them between chats."},bulletTitle2:{id:"MemoryOnboardingModal.bulletTitle2.1",defaultMessage:"A more personalized assistant"},bulletDescription2:{id:"MemoryOnboardingModal.bulletDescription2.2",defaultMessage:"Memories and your chat history are used to give you more relevant responses. Want to change what ChatGPT remembers? Just ask."},bulletTitle3:{id:"MemoryOnboardingModal.bulletTitle3",defaultMessage:"You're in control"},bulletDescription3:{id:"MemoryOnboardingModal.bulletDescription3.2",defaultMessage:"<link1>Learn more</link1> about how memory works. You can turn off memory at any time in <link2>settings</link2>. Memories may be used to <link3>train our models</link3> if you have model training enabled."},continue:{id:"MemoryOnboardingModal.continue",defaultMessage:"Continue"},notNow:{id:"MemoryOnboardingModal.notNow",defaultMessage:"Not now"},enable:{id:"MemoryOnboardingModal.enable",defaultMessage:"Enable"}});var xt=(t=>(t.Starter="starter",t.Reply="reply",t.Capabilities="capabilities",t.Autocomplete="autocomplete",t.Trending="trending",t.Templated="templated",t.Feature="feature",t))(xt||{}),Cn=(t=>(t.Search="Search",t.Canvas="Canvas",t.Image="Image",t.ContextualAnswers="ContextualAnswers",t.ContextualAnswersNUX="ContextualAnswersNUX",t.ChatGPTTrending="ChatGPTTrending",t.ImageGenTrending="ImageGenTrending",t.Slurm="Slurm",t.Tatertot="Tatertot",t.Glaux="Glaux",t.TemplatedPrompts="TemplatedPrompts",t))(Cn||{});function Nle(t){"use no forget";as()&&Vd().then(e=>{e.getHost().userStoppedAgentConversation(t)}).catch(()=>{})}function Mnt(t,e,n,s=!1,o=!1,r=null){"use no forget";if(!as())return;const a=n==null?void 0:n.slice(-10).map(d=>{var f=d,{metadata:c}=f,u=De(f,["metadata"]);return u}),l=JSON.stringify({messages:a});Vd().then(c=>{c.getHost().userSentMessageInAgentConversation(t,l,s,o,r,e)}).catch(()=>{})}function Ant(t,e=!1){"use no forget";as()&&Vd().then(n=>{n.getHost().agentConversationStopped(t,e)}).catch(()=>{})}function Nnt(t){"use no forget";return as()?Vd().then(e=>e.getHost().getAgentStatus(t)):Promise.resolve("stopped")}function Ile(t,e,n,s,o=!1,r=void 0,a={},l=void 0){const c=G(N({client_thread_id:String(t),client_initiated:e,reason:n,is_agent_hint_enabled:r},a),{has_stop_conduit_token:l});if(!(r||s))return;if(o&&r!==void 0&&r!==s){const d=s?"from_agent_to_non_agent":"from_non_agent_to_agent",f="conversation.transition_".concat(d);Ve.addAction(f,G(N({},c),{action_type:"abort_completion"})),V.logEventWithStatsig("Agent Conversation Transition","chatgpt_agent_conversation_transition",G(N({},c),{action_type:"abort_completion"}))}Fe.count(Ue.DEFAULT,"chatgpt_web_conversation_stop",[{key:"has_stop_conduit_token",value:l?"true":"false"},{key:"stop_reason",value:n}]),s&&(Ve.addAction("conversation.stop_attempted",G(N({},c),{is_last_turn_agent:!0})),V.logEventWithStatsig("Agent Conversation Stop","chatgpt_agent_conversation_stop",N({},c)))}function Int(t,e){try{Ve.addAction(t,e)}catch(n){}}const hw=t=>{"use forget";const e=D.c(2);let n;return e[0]!==t?(n=()=>{if(t===void 0)return null;const s=Pt(t);return zd(s)},e[0]=t,e[1]=n):n=e[1],X(n)},jle=t=>{const e=Pt(t);return zd(e)},yd=(t,e)=>{const n=Pt(t);CR(n,e)};async function Ple(t,e=ve.getRequestId(At(t)),{clientInitiated:n=!1,reason:s="other",isLastTurnAgent:o=void 0,hasAgentSystemHint:r=void 0}={}){var j,R,O,L,B,U,H;const a=bY(e),l=At(t),c=Lt(t),u=jle(t),d=(u==null?void 0:u.value)===Nn.REALTIME,f=(u==null?void 0:u.value)===Nn.REALTIME_BUSY,m=(u==null?void 0:u.value)===Nn.STREAMING,p=ve.getCurrentNode(l),g=(j=l==null?void 0:l.stopConduitToken)!=null?j:null,h=g!==null,_=(R=l==null?void 0:l.turnTraceId)!=null?R:void 0,b=(()=>{const $=p==null?void 0:p.message;return $?vY($):!1})(),y=xe("2036503533"),S=ve.getSteeringAsyncTaskId(l),C=S?Zo.getState().tasks[S]:null,w=(O=C==null?void 0:C.taskId)==null?void 0:O.startsWith("promode"),k=m&&((U=(B=(L=p==null?void 0:p.message)==null?void 0:L.metadata)==null?void 0:B.model_slug)==null?void 0:U.endsWith("-pro"))||y&&w,E=m&&n,T=xe("877631007");if(!a&&!d&&!f&&!k&&!E)return;if(C&&w){const $=C.taskId;DC.cancelTask({taskId:$}).then(()=>{Er.setTaskStatus($,wn.CANCELLED),Er.abortTaskStream($)}).catch(F=>{const z=lp(),W="An error occurred while cancelling the task.";z.danger(W,{loggingTitle:W,toastId:"caterpillar_mutations",loggingDescription:W}),ws.error("Error cancelling steering task",{error:F,taskId:$})});return}pt(t,$=>{$.interruptionInProgress=!0});const M=()=>{var W,Y,K;const F=(l?ve.getLastMessageSystemHints(l):[]).includes(Ke.Agent),z=!!((K=(Y=(W=ve.getCurrentNode(l))==null?void 0:W.message)==null?void 0:Y.metadata)!=null&&K.n7jupd_message);return F||z},A=o!=null?o:M();A&&c&&Nle(c);let I;if(c&&xe("3922476776")){const $={conversation_id:c,exclude_async_types:T?["pro_mode"]:[]},F={};g&&(F["x-conduit-token"]=g),_&&(F["x-oai-turn-trace-id"]=_);const z=N({requestBody:$,authOption:Ot.SendIfAvailable},Object.keys(F).length>0?{additionalHeaders:F}:{});I=await ue.safePost("/stop_conversation",z),g&&pt(t,W=>{W.stopConduitToken=null}),(H=wR(c))==null||H.logger.error("Client stop",{threadId:c,reason:s});try{Ile(t,n,s,A,!0,r,{},h)}catch(W){ws.error("Error logging abort completion attempt for analytics",{error:W})}}return a&&!b&&SY.abortRequest(e),pt(t,$=>{$.interruptionInProgress=!1}),I}const bd=new Set,Rle=(t,e=()=>!0)=>{const n={callback:t,shouldBlock:e};return bd.add(n),()=>bd.delete(n)},jnt=(t,e=()=>!0)=>{v.useEffect(()=>{const n={callback:t,shouldBlock:e};return bd.add(n),()=>{bd.delete(n)}},[t,e])},Pnt=()=>Array.from(bd).some(t=>t.shouldBlock()),Rnt=()=>Promise.allSettled(Array.from(bd).filter(t=>t.shouldBlock()).map(t=>t.callback())),_w=kR(t=>st(null));function Ont(t,e,n){CY()&&_w(e).set(n)}function Lnt(t){var e;as()&&((e=up())==null||e.recordConversationStreamEvent(t))}class Dnt{constructor(){ye(this,"completionStartTime",Date.now());ye(this,"completionEndTime");ye(this,"blurDuringCompletionTime");ye(this,"refocusTime");ye(this,"logFocusAfterBlurDuringCompletionEvent",()=>{ft.logEvent("chatgpt_focus_after_blur_during_completion",null,{completion_duration_ms:"".concat(this.completionEndTime-this.completionStartTime),blur_time_ms:"".concat(this.blurDuringCompletionTime-this.completionStartTime),refocus_time_ms:"".concat(this.refocusTime-this.completionStartTime)}),V.logEvent("Focus After Blur During Completion",{completion_duration_ms:"".concat(this.completionEndTime-this.completionStartTime),blur_time_ms:"".concat(this.blurDuringCompletionTime-this.completionStartTime),refocus_time_ms:"".concat(this.refocusTime-this.completionStartTime)})});ye(this,"onWindowBlur",()=>{this.blurDuringCompletionTime===void 0&&(this.blurDuringCompletionTime=Date.now(),window.addEventListener("focus",this.onWindowFocusAfterBlur))});ye(this,"onWindowFocusAfterBlur",()=>{this.refocusTime=Date.now(),this.completionEndTime!==void 0&&this.logFocusAfterBlurDuringCompletionEvent(),this.cleanupFocusAfterBlurListener()});ye(this,"cleanupFocusAfterBlurListener",()=>{window.removeEventListener("focus",this.onWindowFocusAfterBlur)});ye(this,"onMessageError",()=>{window.removeEventListener("blur",this.onWindowBlur)});ye(this,"onMessageDone",()=>{window.removeEventListener("blur",this.onWindowBlur),this.blurDuringCompletionTime!==void 0&&(this.completionEndTime=Date.now(),ft.logEvent("chatgpt_blur_during_completion",null,{completion_duration_ms:"".concat(this.completionEndTime-this.completionStartTime),blur_time_ms:"".concat(this.blurDuringCompletionTime-this.completionStartTime)}),V.logEvent("Blur During Completion",{completion_duration_ms:"".concat(this.completionEndTime-this.completionStartTime),blur_time_ms:"".concat(this.blurDuringCompletionTime-this.completionStartTime)}),this.refocusTime!==void 0&&this.logFocusAfterBlurDuringCompletionEvent())});window.addEventListener("blur",this.onWindowBlur)}}const Rv=new Set,pL=t=>{v.useEffect(()=>(Rv.add(t),()=>{Rv.delete(t)}),[t])},Bnt=t=>{for(const e of Rv)try{e({error:t})}catch(n){Ve.addError(n)}},rf=tn(()=>({messagesDevData:{},activeNodeId:void 0,ui:{focusedNodeId:void 0}})),Ole=()=>rf.getState().ui.focusedNodeId,af=()=>rf.getState().messagesDevData;function Fnt(t){const e=Object.keys(af()),n=e.indexOf(t);if(n===-1)throw new Error("Key not found in object");const s=(n+1)%e.length;return e[s]}function Unt(t){const e=Object.keys(af()),n=e.indexOf(t);if(n===-1)throw new Error("Key not found in object");const s=(n-1+e.length)%e.length;return e[s]}function Hnt(t){return Object.keys(af()).indexOf(t)}const $nt=()=>Object.keys(af()).length;var jy,w4;function Lle(){if(w4)return jy;w4=1;function t(e,n){for(var s,o=-1,r=e.length;++o<r;){var a=n(e[o]);a!==void 0&&(s=s===void 0?a:s+a)}return s}return jy=t,jy}var Py,k4;function Dle(){if(k4)return Py;k4=1;var t=Lle(),e=NaN;function n(s,o){var r=s==null?0:s.length;return r?t(s,o)/r:e}return Py=n,Py}var Ry,E4;function Ble(){if(E4)return Ry;E4=1;var t=Dle(),e=K0();function n(s){return t(s,e)}return Ry=n,Ry}var Fle=Ble();const Ule=ps(Fle);function Hle(t){return t.length===0?null:t.reduce((n,s)=>n+s,0)/t.length}function $le(t){const e=t.length;if(e===0)return 0;const n=Hle(t)||0,s=t.reduce((o,r)=>o+Math.pow(r-n,2),0)/e;return Math.sqrt(s)}function T4(t,e){const n=t.slice().sort((l,c)=>l-c),s=e*(n.length-1),o=Math.floor(s),r=Math.ceil(s);if(o===r)return n[o];const a=s-o;return(1-a)*n[o]+a*n[r]}function Gle(t){if(t.length===0)return null;const e=t.slice().sort((s,o)=>s-o),n=Math.floor(e.length/2);return e.length%2===0?(e[n-1]+e[n])/2:e[n]}var ir=(t=>(t.FirstTokenLatency="first_token_lat",t.TotalRequestTime="total_request_time",t.TokenCount="token_count",t.StdDevTokenLatency="std_dev_token_lat",t.MeanTokenLatency="mean_token_lat",t.MedianTokenLatency="median_token_lat",t.MinTokenLatency="min_token_lat",t.MaxTokenLatency="max_token_lat",t.P95TokenLatency="p95_token_lat",t.P99TokenLatency="p99_token_lat",t))(ir||{});const gL=t=>{var m;const e=t.filter(p=>p.requestCount>1);let n=0;for(let p=0;p<t.length;p++){const g=t[p];if(n=g.requestDuration,g.content!=="")break}const s=T4(e.map(p=>p.lastTokenDuration),.95),o=T4(e.map(p=>p.lastTokenDuration),.99),r=Ule(e.map(p=>p.lastTokenDuration)),a=Gle(e.map(p=>p.lastTokenDuration)),l=e.filter(p=>p.lastTokenDuration!==0).reduce((p,g)=>Math.min(p,g.lastTokenDuration),1/0),c=e.reduce((p,g)=>Math.max(p,g.lastTokenDuration),-1/0),u=$le(e.map(p=>p.lastTokenDuration)),d=(m=t[t.length-1])==null?void 0:m.requestDuration;return[{id:"first_token_lat",name:"First Token lat.",stat:n>0?"".concat(n.toFixed(2),"ms"):null,value:n>0?n:null,category:"summary"},{id:"total_request_time",name:"Total request time",stat:d?"".concat((d/1e3).toFixed(2),"s"):null,value:d||null,category:"summary"},{id:"token_count",name:"Token count",stat:"".concat(t.length),value:t.length,category:"summary"},{id:"std_dev_token_lat",name:"Std dev Token lat.",stat:"".concat(u.toFixed(2)),value:u,category:"token"},{id:"mean_token_lat",name:"Mean Token lat.",stat:r?"".concat(r.toFixed(2),"ms"):null,value:r!=null?r:null,category:"aggregate"},{id:"median_token_lat",name:"Median Token lat.",stat:a?"".concat(a.toFixed(2),"ms"):null,value:a!=null?a:null,category:"token"},{id:"min_token_lat",name:"Min Token lat.",stat:"".concat(l.toFixed(2),"ms"),value:l!=null?l:null,category:"token"},{id:"max_token_lat",name:"Max Token lat.",stat:"".concat(c.toFixed(2),"ms"),value:c!=null?c:null,category:"token"},{id:"p95_token_lat",name:"p95 Token lat.",stat:s?"".concat(s.toFixed(2),"ms"):null,value:s!=null?s:null,category:"aggregate"},{id:"p99_token_lat",name:"p99 Token lat.",stat:o?"".concat(o.toFixed(2),"ms"):null,value:o!=null?o:null,category:"aggregate"}]},Gnt=()=>{var r;const t=af(),e=Ole();if(!t||!e)return{stats:[],targetLatencyData:[]};const n=t[e],s=(r=n==null?void 0:n.data)!=null?r:[];return{stats:gL(s),targetLatencyData:s}},Vnt=(t,e,n,s)=>{rf.setState(o=>{const r={focusedNodeId:t},a={status:"active",data:[],model:e,serverRequestId:n,preflightTime:s};return G(N({},o),{activeNodeId:t,ui:r,messagesDevData:G(N({},o.messagesDevData),{[t]:a})})})},Vle=(t,e,n)=>{const s=n==null?void 0:n.search_source;rf.setState(o=>{var a;const r=o.messagesDevData[t];return G(N({},o),{activeNodeId:t,messagesDevData:G(N({},o.messagesDevData),{[t]:G(N({},r),{data:[...(a=r==null?void 0:r.data)!=null?a:[],e],searchSource:s})})})})},qr=(t,e)=>{var n;return(n=e.find(s=>s.id===t))==null?void 0:n.value},zle=t=>{var c;if(!mt())return;const n=af()[t],s=gL(n.data),{preflightTime:o,model:r,serverRequestId:a,searchSource:l}=n;return ue.safePost("/lat/r",{requestBody:{server_request_id:a,model:r,preflight_time_ms:o,search_source:l,count_tokens:(c=qr(ir.TokenCount,s))!=null?c:0,ts_first_token_ms:qr(ir.FirstTokenLatency,s),ts_max_token_time_ms:qr(ir.MaxTokenLatency,s),ts_mean_token_without_first_ms:qr(ir.MeanTokenLatency,s),ts_median_token_without_first_ms:qr(ir.MedianTokenLatency,s),ts_min_token_time_ms:qr(ir.MinTokenLatency,s),ts_p95_token_without_first_ms:qr(ir.P95TokenLatency,s),ts_p99_token_without_first_ms:qr(ir.P99TokenLatency,s),ts_std_dev_token_ms:qr(ir.StdDevTokenLatency,s),ts_total_request_ms:qr(ir.TotalRequestTime,s)}})},Wle=t=>rf.setState(e=>{const n=G(N({},e.messagesDevData[t]),{status:"finished"});return G(N({},e),{messagesDevData:G(N({},e.messagesDevData),{[t]:n})})}),znt=t=>rf.setState(e=>G(N({},e),{ui:G(N({},e.ui),{focusedNodeId:t})}));class Wnt{constructor(e,n){ye(this,"requestLastTokenTime");ye(this,"requestCount",0);ye(this,"requestTimes",[]);this.requestLatencyId=e,this.requestStartTime=n,this.requestLastTokenTime=n}onResponse(e,n,s){const o=performance.now(),r=o-this.requestLastTokenTime,a=o-this.requestStartTime;this.requestLastTokenTime=o,this.requestCount+=1;const l={requestCount:this.requestCount,requestDuration:a,lastTokenDuration:Number(JSON.stringify(r)),messageType:n.content.content_type,content:ER(n)?Ss(n):""};this.requestTimes.push(l),e.type==="message"?Vle(this.requestLatencyId,l,n.metadata):e.type==="done"&&s!=null&&(Wle(this.requestLatencyId),zle(this.requestLatencyId))}}const qnt=(t,e)=>{const{isCompletion:n,messageId:s,conversationId:o,flagged:r,blocked:a,disclaimers:l,metadata:c,shouldDisableConversation:u}=t,d=!!(l!=null&&l.length);pt(e,f=>{fo.updateTree(f,m=>{var _,x,b;const p=m.messageIdToNodeId(s);a&&m.clearNodeMessageParts(p);const g=(_=c==null?void 0:c.model_incompatibility)!=null?_:!1,h=(x=c==null?void 0:c.safety_limited)!=null?x:!1;m.updateNodeMetadata(p,G(N(N(N(N({},(b=d&&!!(l!=null&&l.length)&&TY(l,a))!=null?b:{}),r&&EY),a&&kY({isSafetyLimited:h,shouldDisableConversation:u,isModelIncompatibility:g})),u&&wY),{completionSampleFinishTime:Date.now()}))})}),V.logEvent(n?a?"Moderation: Completion Content Blocked":"Moderation: Completion Content Flagged":a?"Moderation: Prompt Content Blocked":"Moderation: Prompt Content Flagged",{threadId:o,id:s})},M4={base_config:void 0,eval_preset:void 0,sonicberry_model_ids:void 0,settings_overrides:void 0,dump_sub_conversation:void 0};function xw(){let t;try{const e=Xs.getCookie(eo.InternalSearchSettings);t=e?JSON.parse(e):M4}catch(e){t=M4}return MY(t,e=>!!e)}const hL=(t=!1)=>{var e;return mt()?((e=Et())==null?void 0:e.planType)===et.FREE?Je("3178812292",{disableExposureLog:t}):Je("3703416703",{disableExposureLog:t}):Je("2861477803",{disableExposureLog:t})},qle=()=>{const t=dp().fConversationEndpoint;return t==="convo2"?!0:t==="convo1"?!1:xe("4154476537")?!0:hL(!0).get("use_f_prepare",!1)},Kle=(t=!1)=>{const e=dp().fConversationEndpoint;return e==="convo2"?!0:e==="convo1"?!1:xe("4154476537")?!0:hL(t).get("use_f_convo",!1)},Knt=()=>{var t;return(t=xw().fast_search)!=null?t:!1};function Ynt(t,e){TR.setState(n=>{const s=n.threads[t];if(s)s.prepareRequestBlocked=e,e||(s.lastCompletionFinishedTimestamp=performance.now());else{const o=Lt(t);if(o){const r=n.threads[o];r&&(r.prepareRequestBlocked=e,e||(r.lastCompletionFinishedTimestamp=performance.now()))}}})}function Yle(t,e,n){pt(t,s=>{s.title=e,s.titleSource=n}),MR.publish({kind:"updateThreadTitle",conversationId:t}),AY(t,e)}function _L(t){window.history.pushState({},"",t)}function xL(t,e,n,s,o,r){var d;const a=At(n),l=ve.getGizmoId(a),u=(d=new URLSearchParams(window.location.search).get(sv))!=null?d:void 0;if(l!=null)NY(e,l).then(f=>{if(s){const m=f.gizmo;t(ia(n,{project:m,superWidgetTab:u}));return}_L(ia(n,{gizmo:f,superWidgetTab:u}))}).catch(f=>{Ve.addError(f),t(ia(n,{superWidgetTab:u}))});else{const f=ia(n,{superWidgetTab:u});Zle(t)?t(f,{replace:r}):t(f)}}function Zle(t){return t!==_L}const Qle=1e3,Jle=Qle*60,Xle=Jle*60;function yw(){var n;const t=(n=tt.getItem(Ie.ResumeTokenStore))!=null?n:{};return Object.fromEntries(Object.entries(t).filter(([s,o])=>o.expiresAt>Date.now()))}function yL(t){tt.setItem(Ie.ResumeTokenStore,t)}function ece(t,e,n){const s=yw();s[t]={token:e,expiresAt:Date.now()+Xle,turnTraceId:n},yL(s)}function tce(t){const n=yw()[t];return n?{token:n.token,turnTraceId:n.turnTraceId}:null}function nce(t){const e=yw();delete e[t],yL(e)}function sce(){tt.removeItem(Ie.ResumeTokenStore)}const A4={set:ece,get:tce,remove:nce,clear:sce},bL=(t,e)=>{var h,_,x,b,y,S;const n=t.find(C=>{var w;return C.author.role===dt.Tool&&[vt.Error,vt.SystemError].includes(C.content.content_type)||((w=C.metadata)==null?void 0:w.is_error)}),{imageAssetPointers:s}=IY(t),o=s.length>0,a=t.some(C=>AR(C))&&!o,l=t.some(C=>{var T,M;if((T=C.metadata)!=null&&T.image_gen_async)return!1;const w=C.author.name===ds.IMAGE_GEN_HALLUCINATED||C.author.name===Fu,k=C.content.content_type===vt.Text,E=!!((M=C.metadata)!=null&&M.is_visually_hidden_from_conversation);return w&&k&&E}),c=t.length>0&&!!((_=(h=t[t.length-1])==null?void 0:h.metadata)!=null&&_.image_gen_async),d=!t.some(C=>{var w;return[Fu,ds.IMAGE_GEN_HALLUCINATED].includes((w=C.author.name)!=null?w:"")&&C.content.content_type===vt.MultimodalText})&&t.some(C=>{var E;const w=[Fu,ds.IMAGE_GEN_HALLUCINATED].includes((E=C.author.name)!=null?E:""),k=C.recipient==="assistant";return w&&k});let f=0;for(const C of s){if((x=C.metadata)==null?void 0:x.is_no_auth_placeholder){f+=1;continue}const k=C.height,E=(S=(y=(b=C.metadata)==null?void 0:b.generation)==null?void 0:y.height)!=null?S:void 0;f+=k!==void 0&&E!==void 0?E/k:0}const m=s.length>0?f/s.length:0,p=n!==void 0,g=e?Ra.AsyncGenerating:Ra.AsyncHanging;if(a||l||d)return Ra.Empty;if(p)return Ra.Errored;if(m){if(m<1)return c?g:Ra.Generating;if(m===1)return Ra.Complete}else return c?g:Ra.Thinking;return Ra.Unavailable},Znt=t=>bL([t],!0)===Ra.Complete,oce=t=>t.author.role===dt.Assistant&&t.recipient===Fu;function rce(t){return(t.author.name===Fu||oce(t))&&jY.includes(bL([t],!0))}const ace=re(me,"d03bce",20,20),ka=re(me,"6fef0e",20,20),ice=re(me,"d6f274",24,24);function Qnt(t){"use forget";const e=D.c(29),{onClose:n,effect:s}=t,o=X(gce),r=v.useRef(!1);let a,l;e[0]===Symbol.for("react.memo_cache_sentinel")?(a=()=>{r.current||(r.current=!0,V.logEvent("SMHRK Intervention: Helpline Modal Opened",{}))},l=[],e[0]=a,e[1]=l):(a=e[0],l=e[1]),v.useEffect(a,l);const c=pce;let u;if(e[2]!==s.text){const w=s.text.split(/\n+/).map(mce);u=[];let k=null;for(const E of w){const T=E.match(/^[-]\s+(.*)$/);T?(k==null&&(k=[]),k.push(T[1])):(k&&(u.push({type:"ul",content:k}),k=null),E&&u.push({type:"p",content:[E]}))}if(k){let E;e[4]!==k?(E={type:"ul",content:k},e[4]=k,e[5]=E):E=e[5],u.push(E)}e[2]=s.text,e[3]=u}else u=e[3];const d=u;let f;e[6]!==n?(f=()=>{ue.safePost("/sentinel/modal_ack",{authOption:Ot.SendIfAvailable}).catch(fce),n()},e[6]=n,e[7]=f):f=e[7];const m=f,p=s.title;let g;e[8]!==d?(g=i.jsx("div",{className:"text-token-text-secondary space-y-3",children:d.map(uce)}),e[8]=d,e[9]=g):g=e[9];let h;if(e[10]!==s.helplines||e[11]!==o){let w;e[13]!==o?(w=(k,E)=>{var T,M;return i.jsxs("div",{className:"border-token-border-heavy rounded-lg border p-4",children:[i.jsx("div",{className:"text-base font-semibold",children:k.name}),k.description?i.jsx("div",{className:"text-token-text-secondary mt-1 text-sm",children:k.description}):null,i.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:(M=o?k.links:(T=k.links)==null?void 0:T.filter(cce))==null?void 0:M.map((A,I)=>i.jsxs(Se,{as:"a",to:hce(A.kind,A.href),openNewTab:A.kind==="url"||A.kind==="chat",color:A.kind==="call"?"secondary":"ghost",className:A.kind==="call"?void 0:"border-token-border-heavy border",size:"small",label:A.label,onClick:()=>c(k.name,A.href,A.kind),children:[_ce(A.kind),A.label]},I))})]},E)},e[13]=o,e[14]=w):w=e[14],h=s.helplines.map(w),e[10]=s.helplines,e[11]=o,e[12]=h}else h=e[12];let _;e[15]!==h?(_=i.jsx("div",{className:"flex flex-col gap-4",children:h}),e[15]=h,e[16]=_):_=e[16];let x;e[17]===Symbol.for("react.memo_cache_sentinel")?(x=i.jsx("div",{className:"text-token-text-tertiary mt-1 text-xs",children:i.jsx(P,G(N({},N4.disclaimer),{values:{link:lce}}))}),e[17]=x):x=e[17];let b;e[18]===Symbol.for("react.memo_cache_sentinel")?(b=i.jsx(P,N({},N4.close)),e[18]=b):b=e[18];let y;e[19]!==m?(y=i.jsx("div",{className:"mt-2 flex justify-end",children:i.jsx(Se,{as:"button",color:"primary-inverse",onClick:m,size:"large",children:b})}),e[19]=m,e[20]=y):y=e[20];let S;e[21]!==y||e[22]!==g||e[23]!==_?(S=i.jsxs("div",{className:"flex flex-col gap-4 px-6 ps-6 pt-4 pb-6",children:[g,_,x,y]}),e[21]=y,e[22]=g,e[23]=_,e[24]=S):S=e[24];let C;return e[25]!==s.title||e[26]!==n||e[27]!==S?(C=i.jsx(en,{testId:"modal-crisis-helpline",isOpen:!0,onClose:n,title:p,showCloseButton:!1,noPadding:!0,position:"center",size:"custom",className:"max-w-[640px]",headerClassName:"ps-6 pe-6 pt-6 pb-0",shouldIgnoreClickOutside:!0,children:S}),e[25]=s.title,e[26]=n,e[27]=S,e[28]=C):C=e[28],C}function lce(t){return i.jsx("a",{href:"https://help.openai.com/en/articles/12315645",target:"_blank",rel:"noreferrer",className:"underline",children:t})}function cce(t){return t.kind!=="call"&&t.kind!=="text"}function uce(t,e){return t.type==="p"?i.jsx("p",{className:"text-pretty",children:t.content[0]},"p-".concat(e)):i.jsx("ul",{className:"list-disc space-y-2 ps-5",children:t.content.map(dce)},"ul-".concat(e))}function dce(t,e){return i.jsx("li",{children:t},e)}function fce(){}function mce(t){return t.trim()}function pce(t,e,n){V.logEvent("SMHRK Intervention: Helpline Modal Button Clicked",{helplineName:t,linkHref:e,linkKind:n})}function gce(){return BC()}function hce(t,e){switch(t){case"call":return e.startsWith("tel:")?e:"tel:".concat(e);case"text":return e.startsWith("sms:")?e:"sms:".concat(e);default:return e}}const N4=we({close:{id:"crisisHelplineModal.close",defaultMessage:"Close"},disclaimer:{id:"crisisHelplineModal.disclaimer",defaultMessage:"Services unaffiliated with ChatGPT"}});function _ce(t){const e=t==="call"?ice:t==="text"||t==="chat"?ace:ka;return i.jsx(e,{className:"icon-sm me-1","aria-label":""})}const xce=re(me,"127a53",20,20),yce=re(me,"bd0092",20,20),bce=re(me,"1c992a",20,20),vce=re(me,"143e56",20,20),Sce=re(me,"3c5754",20,20),Cce=re(me,"407870",20,20),wce=re(me,"fec800",20,20),kce=re(me,"c9d737",20,20),Jnt="gpt-5-thinking",vL=["min","standard","extended","max"],Ece=(t,e)=>{if(e!=null&&e.thinkingEfforts){const s=e.thinkingEfforts.map(o=>o.thinking_effort).filter(o=>vL.includes(o));return s.length>0?s:[]}const n=Et();return n!=null&&n.isPro()||n!=null&&n.isEnterprise()?["min","standard","extended","max"]:["standard","extended"]},Tce=t=>{var e;return(e=t==null?void 0:t.thinkingEfforts)!=null&&e.length?t.thinkingEfforts.reduce((n,s)=>{const o=s.thinking_effort;return vL.includes(o)&&(n[o]={fullLabel:s.full_label,mobileFullLabel:s.mobile_full_label,shortLabel:s.short_label,description:s.description}),n},{}):{}},Mce=(t,e)=>{V.logEventWithStatsig("ChatGPT Composer Thinking Effort Changed","chatgpt_composer_thinking_effort_changed",{effort:e,model:t})};function SL(t,e,n){var l,c,u,d,f,m,p,g,h,_,x,b;const s=n==null?void 0:n[e],o=()=>{var y;return(y=s==null?void 0:s.fullLabel)!=null?y:s==null?void 0:s.mobileFullLabel},r=()=>{var y,S;return(S=(y=s==null?void 0:s.shortLabel)!=null?y:s==null?void 0:s.mobileFullLabel)!=null?S:s==null?void 0:s.fullLabel},a=()=>s==null?void 0:s.description;switch(e){case"min":return{filledIcon:bce,progressIcon:Cce,fullLabel:(l=o())!=null?l:t.formatMessage({id:"kogr4P",defaultMessage:"Light thinking"}),shortLabel:(c=r())!=null?c:t.formatMessage({id:"oHA6pi",defaultMessage:"Light"}),description:(u=a())!=null?u:t.formatMessage({id:"IXCwXJ",defaultMessage:"Quick, thoughtful answers"})};case"standard":return{filledIcon:kce,progressIcon:wce,fullLabel:(d=o())!=null?d:t.formatMessage({id:"SF0DXJ",defaultMessage:"Standard thinking"}),shortLabel:(f=r())!=null?f:t.formatMessage({id:"LvLUFd",defaultMessage:"Standard"}),description:(m=a())!=null?m:t.formatMessage({id:"KBwMuT",defaultMessage:"Balanced thinking and speed"})};case"extended":return{filledIcon:xce,progressIcon:vce,fullLabel:(p=o())!=null?p:t.formatMessage({id:"ZdXWiu",defaultMessage:"Extended thinking"}),shortLabel:(g=r())!=null?g:t.formatMessage({id:"8yC7rt",defaultMessage:"Extended"}),description:(h=a())!=null?h:t.formatMessage({id:"UvHF8K",defaultMessage:"Thinks longer for complex questions"})};case"max":return{filledIcon:yce,progressIcon:Sce,fullLabel:(_=o())!=null?_:t.formatMessage({id:"WQe8sQ",defaultMessage:"Heavy thinking"}),shortLabel:(x=r())!=null?x:t.formatMessage({id:"ZCryku",defaultMessage:"Heavy"}),description:(b=a())!=null?b:t.formatMessage({id:"uTE58+",defaultMessage:"Even longer analysis for harder questions"})};default:return SL(t,"standard",n)}}function Xnt(t,e){if(t.length<=e)return t;const n=t.slice(0,Math.min(t.length,e+20)),s=n.lastIndexOf("."),o=n.lastIndexOf("!"),r=n.lastIndexOf("?"),a=Math.max(s,o,r);if(a>0&&a<=e&&a>=Math.floor(e*.4))return t.slice(0,a+1).trim()+"";const l=t.lastIndexOf(" ",e);return l>Math.floor(e*.25)?t.slice(0,l).trim()+"":t.slice(0,e).trim()+""}const CL=["home-beacon"];function Ace(t){return En({enabled:t,queryKey:CL,queryFn:async()=>(await ue.safeGet("/beacons/home")).beacon_ui_response})}function Nce(){Zn().removeQueries({queryKey:CL,exact:!0})}const Ice=st(!1);function bw(){"use forget";return X(jce)}function jce(){return Ice()}const vd=tn(ls(()=>null)),Wo={updateDetails:(t,e,n)=>{["beacon_banner_info","beacon_modal_info","beacon_container_info"].includes(t.ui_info.type)&&vd.setState(()=>G(N({},t),{responseThreadId:e,responseLeafId:n}),!0)},dismiss:()=>{Nce(),vd.setState(()=>null,!0)}};function Pce(t,e){return t.responseThreadId===e}function R_(t,e,n){return t?t.responseLeafId!=null?t.responseLeafId===n:t.responseThreadId===e:!1}function Rce(t){return(t==null?void 0:t.ui_info.type)==="beacon_container_info"}function Oce(t){return(t==null?void 0:t.ui_info.type)==="beacon_banner_info"}function Lce(t){return(t==null?void 0:t.ui_info.type)==="beacon_modal_info"}function vw(t){"use forget";const e=D.c(3),{serverThreadId:n,leafId:s}=t,o=bw();let r;e[0]!==s||e[1]!==n?(r=l=>!Oce(l)||l.ui_info.dismiss_variant!==_1.PERSISTENT&&!R_(l,n,s)||l.ui_info.dismiss_variant===_1.PERSISTENT&&!Pce(l,n)?null:l,e[0]=s,e[1]=n,e[2]=r):r=e[2];const a=vd(r);return o?a:null}function Dce(t){"use forget";const e=D.c(3),{serverThreadId:n,leafId:s}=t,o=bw();let r;e[0]!==s||e[1]!==n?(r=l=>!R_(l,n,s)||!Lce(l)?null:l,e[0]=s,e[1]=n,e[2]=r):r=e[2];const a=vd(r);return o?a:null}function Sw(t){"use forget";const e=D.c(3),{serverThreadId:n,leafId:s}=t,o=bw();let r;e[0]!==s||e[1]!==n?(r=l=>!R_(l,n,s)||!Rce(l)?null:l,e[0]=s,e[1]=n,e[2]=r):r=e[2];const a=vd(r);return o?a:null}function Bce(t){"use forget";const e=D.c(3),{serverThreadId:n,leafId:s}=t;let o;return e[0]!==s||e[1]!==n?(o=r=>{var a;return R_(r,n,s)&&(a=r==null?void 0:r.ui_info)!=null?a:null},e[0]=s,e[1]=n,e[2]=o):o=e[2],vd(o)}const Cw={};function est(t,e){Cw[t]=e}function Fce(t){var e;return(e=Cw[t])!=null?e:null}function wL(t){return t in Cw}const Uce=t=>{const e=Object.entries(t.mapping).find(([n])=>n==="");if(e!==void 0){const n=PY(t),[,s]=e,o=s.children;n.mapping["client-created-root"]=G(N({},s),{id:"client-created-root"}),delete n.mapping[""];for(const r of o)n.mapping[r].parent="client-created-root";return n}return t},tst=t=>(t.parent_message_id==="client-created-root"&&delete t.parent_message_id,t);async function kL(t,e={}){const n=e.forceNetworkFetch?null:Fce(t),s={};e.projectId&&Bs(e.projectId)&&(s["chatgpt-project-id"]=e.projectId,e.ownerUserId&&(s["chatgpt-conv-owner-id"]=e.ownerUserId)),e.turnTraceId&&(s["x-oai-turn-trace-id"]=e.turnTraceId);const o=n!=null?n:await ue.safeGet("/conversation/{conversation_id}",N({parameters:{path:{conversation_id:t}},authOption:Ot.SendIfAvailable},s?{additionalHeaders:s}:{}));return n||Ve.addTiming("chatgpt.web.chatPage.loadExistingConversation"),Uce(o)}async function EL(t,e,n={}){const s=e;fc.updateThreadFromServer(t,s,{skipIfExisting:n==null?void 0:n.skipIfExisting,source:n.source,preferServerCurrentLeaf:n.preferServerCurrentLeaf}),yd(s.conversation_id,s.async_status?{source:Ka.SERVER,value:s.async_status}:null)}async function sl(t,{forceNetworkFetch:e,projectId:n,ownerUserId:s,turnTraceId:o,source:r,skipIfExisting:a,preferServerCurrentLeaf:l}={}){const c=await kL(t,{forceNetworkFetch:e,projectId:n,ownerUserId:s,turnTraceId:o});return await EL(t,c,{skipIfExisting:a,source:r,preferServerCurrentLeaf:l}),c}const O_=r=>{var a=r,{clientThreadId:t,alwaysForceUpdate:e=!1,onError:n,source:s}=a,o=De(a,["clientThreadId","alwaysForceUpdate","onError","source"]);return En({queryKey:["conversation",t],queryFn:()=>sl(t,G(N({},o),{skipIfExisting:!e,source:s})).catch(l=>{throw n==null||n(l),l})})};function nst(t){return t==null||[Bt.PrimaryAssistant,Bt.GizmoInteraction].includes(t.kind)}function TL(t){"use forget";const e=D.c(4);let n;e[0]!==t?(n=Pt(t),e[0]=t,e[1]=n):n=e[1];const s=n;let o;return e[2]!==s?(o=()=>ML(s),e[2]=s,e[3]=o):o=e[3],X(o)}const ML=Bn(t=>yt(()=>{const{ctx:e}=t,n=RY(t);if(n)switch(n.kind){case Bt.PrimaryAssistant:case Bt.FlyingCircusCustomization:return n;case Bt.GizmoInteraction:case Bt.GizmoMagicCreate:{const s=dd(t);return G(N({},n),{gizmo:s?LY(e,s).data:void 0})}case Bt.GizmoTest:{const s=dd(t);return G(N({},n),{gizmo:s?OY(e,s).data:void 0})}}}));function Hce(t){return t.kind===Bt.GizmoInteraction||t.kind===Bt.GizmoMagicCreate||t.kind===Bt.GizmoTest?t.gizmo:void 0}const $ce="gpt-4",Gce="oai/apps/capExpiresAt";function Vce(){const t=lf(o=>o.isoDate),e=Date.now(),n=t&&new Date(t).getTime(),s=t&&n&&n<=e;return v.useEffect(()=>{s&&zce()},[s]),s?null:t?$ce:null}const lf=tn()(NR(()=>({isoDate:""}),{name:Gce}));function sst(t){lf.setState({isoDate:t})}function zce(){lf.setState({isoDate:""})}const I4="atlas",Wce="side_chat",qce="new_tab_page",Kce="chatgpt.com";function Yce(){return Kt(()=>ln()?{app_name:I4,app_surface:Wce}:Qo()?{app_name:I4,app_surface:qce}:{app_name:Kce})}const Zce="https://help.openai.com/en/articles/8590148-memory-faq",Zl=80,ih=100;function Qce(t){return t==="cold"?"cold":"warm"}function Jce(t){return t==="user"?"user":"assistant"}function AL(t){const e=t.last_updated,n=s=>s?{actor:Jce(s.actor),timestamp:s.timestamp}:null;return G(N({},t),{status:Qce(t.status),last_updated:n(e)})}function B1(t){if(!(!t||t.length===0))return Array.from(t).sort()}function Xce(t,e=!1,n=!0,s,o){const r=B1(s),a=B1(o);return["memories",N(N({gizmoId:t,exclusiveToGizmo:e,includeMemoryEntries:n},r?{contextScopes:r}:{}),a?{requiredContextScopes:a}:{})]}function Vp({gizmoId:t,exclusiveToGizmo:e=!1,includeMemoryEntries:n=!0,enabled:s=!0,contextScopes:o,requiredContextScopes:r}={}){const a=B1(o),l=B1(r);return ut({queryKey:Xce(t,e,n,a,l),queryFn:async()=>{const c={gizmo_id:t,exclusive_to_gizmo:e,include_memory_entries:n},u=await ue.safeGet("/memories",{parameters:{query:c}}),d=Math.min(Math.floor(100*u.memory_num_tokens/u.memory_max_tokens),100);return G(N({},u),{memoryFullPct:d,memories:u.memories.map(f=>AL(f))})},refetchOnMount:"always",enabled:s})}function eue(t=50){return["memory_history",{limit:t}]}function ost(t=50,e=!0){return ut({queryKey:eue(t),queryFn:async()=>{const n=await ue.safeGet("/memories/history",{parameters:{query:{limit:t}}}),s=Array.isArray(n.history)?n.history:[];return G(N({},n),{history:s.map(o=>G(N({},o),{memories:o.memories.map(r=>AL(r))}))})},refetchOnMount:"always",enabled:e})}function ww(t,e=!1){var a;const n="684023316",o=(a=Je(n,{disableExposureLog:!0}).get("memory_almost_full_threshold",Zl))!=null?a:Zl;if((t!=null?t:0)<o)return"control";const r=Je(n);return e?{threshold:o,layer:r.get("upsell_variant","control")}:r.get("upsell_variant","control")}function tue(t=!0){return Je("684023316",{disableExposureLog:t}).get("upsell_variant","control")}function nue(t){let e=2166136261;for(let n=0;n<t.length;n++)e^=t.charCodeAt(n),e=Math.imul(e,16777619)>>>0;return e^=e>>>16,e=Math.imul(e,2246822507)>>>0,e^=e>>>13,e=Math.imul(e,3266489909)>>>0,e^=e>>>16,(e>>>0).toString(16).padStart(8,"0")}class sue{constructor(){ye(this,"answers",new Map);ye(this,"maxAttempts",5e5);ye(this,"requirementsSeed",oue());ye(this,"sid",fa());ye(this,"errorPrefix","wQ8Lk5FbGpA2NcR9dShT6gYjU7VxZ4D");ye(this,"_runCheck",(e,n,s,o,r)=>{o[3]=r,o[9]=Math.round(performance.now()-e);const a=lh(o);return nue(n+a).substring(0,s.length)<=s?a+"~S":null})}async initializeAndGatherData(e){this._getAnswer(e)}async startEnforcement(e){this._getAnswer(e)}getEnforcementTokenSync(e){const n=this._getAnswer(e);return typeof n=="string"?n:null}async getEnforcementToken(e,n){return this._getAnswer(e,n==null?void 0:n.forceSync)}async getRequirementsToken(){return this.answers.has(this.requirementsSeed)||this.answers.set(this.requirementsSeed,this._generateAnswerAsync(this.requirementsSeed,"0")),"gAAAAAC"+await this.answers.get(this.requirementsSeed)}getRequirementsTokenBlocking(){return"gAAAAAC"+this._generateRequirementsTokenAnswerBlocking()}_getAnswer(e,n=!1){var l;const s="gAAAAAB";if(!((l=e==null?void 0:e.proofofwork)!=null&&l.required))return null;const{seed:o,difficulty:r}=e.proofofwork;if(!(typeof o=="string"&&typeof r=="string"))return null;const a=this.answers.get(o);if(typeof a=="string")return a;if(n){const c=this._generateAnswerSync(o,r),u=s+c;return this.answers.set(o,u),u}return this.answers.has(o)||this.answers.set(o,this._generateAnswerAsync(o,r)),Promise.resolve().then(async()=>s+await this.answers.get(o)).then(c=>(this.answers.set(o,c),c))}buildGenerateFailMessage(e){return this.errorPrefix+lh(String(e!=null?e:"e"))}_generateAnswerSync(e,n){const s=performance.now();try{const o=this.getConfig();for(let r=0;r<this.maxAttempts;r++){const a=this._runCheck(s,e,n,o,r);if(a)return a}}catch(o){return this.buildGenerateFailMessage(o)}return this.buildGenerateFailMessage()}async _generateAnswerAsync(e,n){const s=performance.now();try{let o=null;const r=this.getConfig();for(let a=0;a<this.maxAttempts;a++){(!o||o.timeRemaining()<=0)&&(o=await aue());const l=this._runCheck(s,e,n,r,a);if(l)return l}}catch(o){return this.buildGenerateFailMessage(o)}return this.buildGenerateFailMessage()}_generateRequirementsTokenAnswerBlocking(){let e="e";const n=performance.now();try{const s=this.getConfig();return s[3]=1,s[9]=performance.now()-n,lh(s)}catch(s){e=lh(String(s))}return this.errorPrefix+e}getConfig(){var e,n,s,o;return[(screen==null?void 0:screen.width)+(screen==null?void 0:screen.height),""+new Date,(e=performance==null?void 0:performance.memory)==null?void 0:e.jsHeapSizeLimit,Math==null?void 0:Math.random(),navigator.userAgent,Zh(Array.from(document.scripts).map(r=>r==null?void 0:r.src).filter(r=>r)),(s=((n=Array.from(document.scripts||[]).map(r=>{var a;return(a=r==null?void 0:r.src)==null?void 0:a.match("c/[^/]*/_")}).filter(r=>r==null?void 0:r.length)[0])!=null?n:[])[0])!=null?s:document.documentElement.getAttribute("data-build"),navigator.language,(o=navigator.languages)==null?void 0:o.join(","),Math==null?void 0:Math.random(),rue(),Zh(Object.keys(document)),Zh(Object.keys(window)),performance.now(),this.sid,[...new URLSearchParams(window.location.search).keys()].join(","),navigator==null?void 0:navigator.hardwareConcurrency,performance.timeOrigin]}}function Zh(t){return t[Math.floor(Math.random()*t.length)]}function oue(){return""+Math.random()}function rue(){const t=Zh(Object.keys(Object.getPrototypeOf(navigator)));try{return"".concat(t,"").concat(navigator[t].toString())}catch(e){return"".concat(t)}}function lh(t){return t=JSON.stringify(t),window.TextEncoder?btoa(String.fromCharCode(...new TextEncoder().encode(t))):btoa(unescape(encodeURIComponent(t)))}function aue(){return new Promise(t=>{(window.requestIdleCallback||iue)(n=>{t(n)},{timeout:10})})}function iue(t){return setTimeout(()=>{t({timeRemaining:()=>1,didTimeout:!1})},0),0}const ol=new sue,NL=new WeakMap;function Oy(t,e){NL.set(t,e)}function IL(t){return NL.get(t)}const lue=0,cue=1,uue=2,jL=3,PL=4,due=5,fue=6,mue=24,pue=7,gue=8,xo=9,hue=10,_ue=11,xue=12,yue=13,bue=14,vue=15,Ov=16,Sue=17,Cue=18,wue=19,kue=23,Eue=20,Tue=21,Mue=22,Aue=25,Nue=26,Iue=27,jue=28,Pue=29,RL=30,Rue=33,Oue=34,$e=new Map;let Di=0,j4=Promise.resolve();function OL(t){const e=j4.then(t,t);return j4=e.then(()=>{},()=>{}),e}async function Um(){for(;$e.get(xo).length>0;){const[t,...e]=$e.get(xo).shift(),n=$e.get(t)(...e);n&&typeof n.then=="function"&&await n,Di++}}function Lue(t){return OL(()=>new Promise((e,n)=>{let s=!1;setTimeout(()=>{s=!0,e(""+Di)},500),$e.set(jL,o=>{s||(s=!0,e(btoa(""+o)))}),$e.set(PL,o=>{s||(s=!0,n(btoa(""+o)))}),$e.set(RL,(o,r,a,l)=>{const c=Array.isArray(l),u=c?a:[],d=(c?l:a)||[];$e.set(o,(...f)=>{if(s)return;const p=[...$e.get(xo)];if(c)for(let g=0;g<u.length;g++){const h=u[g],_=f[g];$e.set(h,_)}return $e.set(xo,[...d]),Um().then(()=>$e.get(r)).catch(g=>""+g).finally(()=>{$e.set(xo,p)})})});try{$e.set(xo,JSON.parse(kw(atob(t),""+$e.get(Ov)))),Um().catch(o=>{e(btoa(Di+": "+o))})}catch(o){e(btoa(Di+": "+o))}}))}function Due(t,e){return OL(()=>new Promise((n,s)=>{var a;const o=(a=IL(t!=null?t:{}))!=null?a:"";Bue(),Di=0,$e.set(Ov,o);let r=!1;setTimeout(()=>{r=!0,n(""+Di)},500),$e.set(jL,l=>{r||(r=!0,n(btoa(""+l)))}),$e.set(PL,l=>{r||(r=!0,s(btoa(""+l)))}),$e.set(RL,(l,c,u,d)=>{const f=Array.isArray(d),m=f?u:[],p=(f?d:u)||[];$e.set(l,(...g)=>{if(r)return;const _=[...$e.get(xo)];if(f)for(let x=0;x<m.length;x++){const b=m[x],y=g[x];$e.set(b,y)}return $e.set(xo,[...p]),Um().then(()=>$e.get(c)).catch(x=>""+x).finally(()=>{$e.set(xo,_)})})});try{$e.set(xo,JSON.parse(kw(atob(e),""+$e.get(Ov)))),Um().catch(l=>{n(btoa(Di+": "+l))})}catch(l){n(btoa(Di+": "+l))}}))}function kw(t,e){let n="";for(let s=0;s<t.length;s++)n+=String.fromCharCode(t.charCodeAt(s)^e.charCodeAt(s%e.length));return n}function Bue(){$e.clear(),$e.set(lue,Lue),$e.set(cue,(t,e)=>$e.set(t,kw(""+$e.get(t),""+$e.get(e)))),$e.set(uue,(t,e)=>$e.set(t,e)),$e.set(due,(t,e)=>{const n=$e.get(t);Array.isArray(n)?n.push($e.get(e)):$e.set(t,n+$e.get(e))}),$e.set(Iue,(t,e)=>{const n=$e.get(t);Array.isArray(n)?n.splice(n.indexOf($e.get(e)),1):$e.set(t,n-$e.get(e))}),$e.set(Pue,(t,e,n)=>$e.set(t,$e.get(e)<$e.get(n))),$e.set(Rue,(t,e,n)=>{const s=Number($e.get(e)),o=Number($e.get(n));$e.set(t,s*o)}),$e.set(fue,(t,e,n)=>$e.set(t,$e.get(e)[$e.get(n)])),$e.set(pue,(t,...e)=>$e.get(t)(...e.map(n=>$e.get(n)))),$e.set(Sue,(t,e,...n)=>{try{const s=$e.get(e)(...n.map(o=>$e.get(o)));if(s&&typeof s.then=="function")return s.then(o=>{$e.set(t,o)}).catch(o=>{$e.set(t,""+o)});$e.set(t,s)}catch(s){$e.set(t,""+s)}}),$e.set(yue,(t,e,...n)=>{try{$e.get(e)(...n)}catch(s){$e.set(t,""+s)}}),$e.set(gue,(t,e)=>$e.set(t,$e.get(e))),$e.set(hue,window),$e.set(_ue,(t,e)=>{var n,s;return $e.set(t,(s=((n=Array.from(document.scripts||[]).map(o=>{var r;return(r=o==null?void 0:o.src)==null?void 0:r.match($e.get(e))}).filter(o=>o==null?void 0:o.length)[0])!=null?n:[])[0])!=null?s:null)}),$e.set(xue,t=>$e.set(t,$e)),$e.set(bue,(t,e)=>$e.set(t,JSON.parse(""+$e.get(e)))),$e.set(vue,(t,e)=>$e.set(t,JSON.stringify($e.get(e)))),$e.set(Cue,t=>$e.set(t,atob(""+$e.get(t)))),$e.set(wue,t=>$e.set(t,btoa(""+$e.get(t)))),$e.set(Eue,(t,e,n,...s)=>$e.get(t)===$e.get(e)?$e.get(n)(...s):null),$e.set(Tue,(t,e,n,s,...o)=>Math.abs($e.get(t)-$e.get(e))>$e.get(n)?$e.get(s)(...o):null),$e.set(kue,(t,e,...n)=>$e.get(t)!==void 0?$e.get(e)(...n):null),$e.set(mue,(t,e,n)=>$e.set(t,$e.get(e)[$e.get(n)].bind($e.get(e)))),$e.set(Oue,(t,e)=>{try{const n=$e.get(e);return Promise.resolve(n).then(s=>{$e.set(t,s)})}catch(n){return}}),$e.set(Mue,(t,e)=>{const n=[...$e.get(xo)];return $e.set(xo,[...e]),Um().catch(s=>{$e.set(t,""+s)}).finally(()=>{$e.set(xo,n)})}),$e.set(jue,()=>{}),$e.set(Nue,()=>{}),$e.set(Aue,()=>{})}const Fue="https://challenges.cloudflare.com/turnstile/v0/api.js",Uue="chatgpt-paid",Hue="chatgpt-freeaccount",Lv="chatgpt-noauth",P4={[Uue]:"0x4AAAAAAASbFNinhLLnW5f1",[Hue]:"0x4AAAAAAACPe2BTwOIpYk6H",[Lv]:"0x4AAAAAAASbHVR44GU82lOI"};class F1{toString(){return JSON.stringify(this.toJSON())}}class Ly extends F1{constructor(e){super(),this.message=e,this.message=e}toJSON(){return{"Turnstile-Internal-Error":this.message}}}class $ue extends F1{constructor(e){super(),this.errorCode=e,this.errorCode=e}toJSON(){return{"Turnstile-Client-Error":this.errorCode}}}class Gue{constructor(){ye(this,"app",Lv);ye(this,"status","idle");ye(this,"turnstileInstancePromise",null);ye(this,"enforcementTokenPromise",null);ye(this,"enforcementTokenCache",new WeakMap);ye(this,"requestStartTimeMs",0);ye(this,"_onCompleted");ye(this,"_onError");ye(this,"dxPromiseCache",new Map)}async initializeAndGatherData(e){this._getOrCreateInstance(e)}cacheEnforcementToken(e,n){n&&this.enforcementTokenCache.set(e,n)}async _getOrCreateInstance(e){var n,s,o;return!((n=e.turnstile)!=null&&n.required)||(s=e.turnstile)!=null&&s.dx?null:(this.app!==e.persona&&(this.app=e.persona,this.turnstileInstancePromise=this._getTurnstileInstancePromise()),(o=this.turnstileInstancePromise)!=null?o:new Ly("Turnstile instance not initialized."))}getEnforcementTokenSync(e){const n=this.enforcementTokenCache.get(e);return n!=null?n:null}async getEnforcementToken(e){var n;if((n=e.turnstile)!=null&&n.dx){const s=e.turnstile.dx,o=IL(e),r=o?"".concat(o,"::").concat(s):s,a=this.dxPromiseCache.get(r);if(a)return a;const c=Due(e,s).then(u=>(u&&this.enforcementTokenCache.set(e,u),u)).finally(()=>{this.dxPromiseCache.delete(r)});return this.dxPromiseCache.set(r,c),c}return this.startEnforcement(e).then(s=>(this.enforcementTokenPromise=null,s?s.toString():null))}async startEnforcement(e){var n,s;return(n=e.turnstile)!=null&&n.required?(s=e.turnstile)!=null&&s.dx?this.getEnforcementToken(e):this.enforcementTokenPromise!==null?this.enforcementTokenPromise:this.enforcementTokenPromise=this._getEnforcementToken(e):null}precomputeEnforcementToken(e){var s;const n=this.enforcementTokenCache.get(e);return n?Promise.resolve(n):(s=e.turnstile)!=null&&s.dx?this.getEnforcementToken(e):this.startEnforcement(e).then(o=>{var r;return typeof o=="string"?o:(r=o==null?void 0:o.toString())!=null?r:null})}async _getEnforcementToken(e,n){const s=await this._getOrCreateInstance(e);return s instanceof F1||s===null?s:new Promise((o,r)=>{this.setOnCompleted(a=>{const l=performance.now()-this.requestStartTimeMs;Ve.addAction("turnstile_get_token_success",{app:this.app.toString(),durationMs:l}),o(a)}),this.setOnError(a=>{if(!n)this._getEnforcementToken(e,!0).then(o,r);else{const l=performance.now()-this.requestStartTimeMs;Ve.addAction("turnstile_get_token_error",{app_release:"f700ea221d7179d2ee3ed2b022f6972f77a5a7a1",error:a,app:this.app.toString(),durationMs:l}),o(new $ue(a))}}),this.setStatus("ready"),this.requestStartTimeMs=performance.now(),s.reset(),s.execute()})}setStatus(e){this.status=e}onCompleted(e){var n;(n=this._onCompleted)==null||n.call(this,e)}setOnCompleted(e){this._onCompleted=e}onError(e){var n;(n=this._onError)==null||n.call(this,e)}setOnError(e){this._onError=e}onExpired(){this.enforcementTokenPromise=null}_getTurnstileInstancePromise(e){if(this.turnstileInstancePromise!==null)if(e)this.turnstileInstancePromise.then(n=>{n instanceof F1||n.remove()}),this.turnstileInstancePromise=null;else return this.turnstileInstancePromise;return this.turnstileInstancePromise=new Promise((n,s)=>{var u,d;const o="onloadTurnstileCallback";Object.defineProperty(window,o,{value:()=>{var m;if(this.status==="ready")return;this.setStatus("script_loaded");const{turnstile:f}=window;if(f===null){this.setStatus("error"),e?(Ve.addAction("turnstile_instance_missing",{app_release:"f700ea221d7179d2ee3ed2b022f6972f77a5a7a1",app:this.app.toString()}),n(new Ly("Turnstile instance missing"))):this._getTurnstileInstancePromise(!0).then(n,s);return}f.render("#"+r,{sitekey:(m=P4[this.app])!=null?m:P4[Lv],execution:"execute",callback:this.onCompleted.bind(this),"error-callback":this.onError.bind(this),"expired-callback":this.onExpired.bind(this)}),n(f)}});const r="cf-turnstile",a="cf-turnstile-script";(u=document.getElementById(r))==null||u.remove(),(d=document.getElementById(a))==null||d.remove();const l=document.createElement("div");l.id=r,l.hidden=!0,document.body.appendChild(l),this.setStatus("loading");const c=document.createElement("script");c.id=a,c.src=Fue+"?onload=".concat(o),c.async=!0,c.defer=!0,c.onerror=()=>{this.setStatus("error"),e?(Ve.addAction("turnstile_script_load_error",{app_release:"f700ea221d7179d2ee3ed2b022f6972f77a5a7a1",app:this.app.toString()}),n(new Ly("Turnstile script failed to load"))):this._getTurnstileInstancePromise(!0).then(n,s)},document.body.appendChild(c)}),this.turnstileInstancePromise}}const _m=new Gue,Vue=1e3*60*9;var vu=(t=>(t.ChatRequirementsToken="OpenAI-Sentinel-Chat-Requirements-Token",t.ChatRequirementsPrepareToken="OpenAI-Sentinel-Chat-Requirements-Prepare-Token",t.TurnstileToken="OpenAI-Sentinel-Turnstile-Token",t.ProofToken="OpenAI-Sentinel-Proof-Token",t.Token="OpenAI-Sentinel-Token",t))(vu||{});let zue=-1,Mn=null;function Wue(t,e){const n=performance.now(),s={token:void 0,prepare_token:void 0,persona:"chatgpt-noauth",turnstile:void 0,proofofwork:void 0,force_login:void 0};s.__prefetch_source=e,s.__chatreq_created_at_ms=n,Oy(s,t);const o=Promise.resolve().then(async()=>{const a=await ue.safePost("/sentinel/chat-requirements/prepare",{requestBody:{p:t},authOption:Ot.SendIfAvailable}),l=performance.now()-n,c=a;return s.prepare_token=c.prepare_token,s.persona=c.persona,s.turnstile=c.turnstile,s.proofofwork=c.proofofwork,s.force_login=c.force_login,Oy(s,t),s.__prepare_time_ms=l,s}),r=o.then(async a=>{var _,x,b,y,S;const[l,c]=await Promise.all([ol.getEnforcementToken(a,{forceSync:!0}),_m.getEnforcementToken(a)]),u=performance.now()-n;if(a.__skip_chatreq_finalize){c&&_m.cacheEnforcementToken(a,c);const C=(_=a.__prepare_time_ms)!=null?_:void 0,w=(x=a.__chatreq_mode_at_send)!=null?x:"unknown";return Ve.addAction("chat_requirements_finalize_skipped",{prepare_time:C,token_time:u,chat_req_mode_at_send:w}),a}const d={prepare_token:(b=a.prepare_token)!=null?b:""};l&&(d.proofofwork=l),c&&(d.turnstile=c);const m=await ue.safePost("/sentinel/chat-requirements/finalize",{requestBody:d,authOption:Ot.SendIfAvailable});Object.assign(a,m),a.persona=m.persona,Oy(a,t),c&&_m.cacheEnforcementToken(a,c);const p=performance.now()-n,g=(y=a.__prepare_time_ms)!=null?y:void 0,h=(S=a.__chatreq_mode_at_send)!=null?S:"unknown";return Ve.addAction("chat_requirements_time",{prepare_time:g,token_time:u,finalize_time:p,chat_req_mode_at_send:h}),a});return r.catch(()=>{}),{chatReq:s,preparedPromise:o,finalizedPromise:r}}function R4(){if(Mn){const{finalizedChatRequirements:t,expiration:e}=Mn;if(Date.now()>=e)return LL(Mn),Mn=null,null;if(t!=null&&t.token)return Mn=null,t}return null}function que(){if(Mn){const{preparedChatRequirements:t,expiration:e}=Mn;if(Date.now()>=e)return LL(Mn),Mn=null,null;if(t!=null&&t.prepare_token)return Mn=null,t}return null}function rst(){return Mn?Date.now()>=Mn.expiration:!1}function LL(t){t.finalizedPromise.then(e=>Ve.addAction("chat_requirements_cache_expired",{app:e.persona.toString()})).catch(()=>{})}function DL(t,e,n="none"){if(Mn){const{expiration:a,preparedPromise:l,finalizedPromise:c}=Mn;if(Date.now()<a){const u=t==="prepared"?l:c;return e||(Mn=null),u}Mn=null}const s=ol.getRequirementsTokenBlocking(),o=Wue(s,n),r=++zue;return e&&(Mn={id:r,preparedChatRequirements:null,finalizedChatRequirements:null,preparedPromise:o.preparedPromise.then(a=>((Mn==null?void 0:Mn.id)===r&&(Mn.preparedChatRequirements=a),a)),finalizedPromise:o.finalizedPromise.then(a=>((Mn==null?void 0:Mn.id)===r&&(Mn.finalizedChatRequirements=a),a)),expiration:Date.now()+Vue}),t==="prepared"?o.preparedPromise:o.finalizedPromise}function Kue(t=!1,e="none"){return DL("finalized",t,e)}function BL(t=!1,e="none"){return DL("prepared",t,e)}const Yue="https://chatgpt.com/backend-api/sentinel/sdk.js",Zue="https://sentinel.openai.com/backend-api/sentinel/sdk.js";function Que(t){return new Promise((e,n)=>{const s=document.createElement("script");s.type="text/javascript",s.src=t,s.async=!0,s.defer=!0,s.onload=e,s.onerror=n,document.getElementsByTagName("head")[0].appendChild(s)})}function FL(t){let e;return()=>(e||(e=Que(t)),e)}const Jue=FL(Yue),Xue=FL(Zue);function ede(t,e){var o;return(((o=e==null?void 0:e.sdkVariant)!=null?o:"chatgpt")==="openai"?Xue:Jue)().then(()=>window.SentinelSDK.token(t))}function Ew(t,e,n,s){const o={};return t!=null&&t.token?o["OpenAI-Sentinel-Chat-Requirements-Token"]=t.token:t!=null&&t.prepare_token&&(o["OpenAI-Sentinel-Chat-Requirements-Prepare-Token"]=t.prepare_token),e&&(o["OpenAI-Sentinel-Turnstile-Token"]=e),n&&(o["OpenAI-Sentinel-Proof-Token"]=n),s&&(o["OpenAI-Sentinel-Token"]=s),o}function ast(t="none"){BL(!0,t).catch(()=>{})}let Ql=null;const tde=2e3,Tw=Sa(Ie.PendingSurveySpec,()=>null);function nde(){return tt.getItem(Ie.PendingSurveySpec)}function ist(t){Ql&&clearTimeout(Ql),Ql=setTimeout(()=>{Ql=null,Tw.set(t)},tde)}function sde(){Tw.set(null),Ql&&(clearTimeout(Ql),Ql=null)}const Mu=tn(t=>({survey:null,triggered:!1,setSurvey:e=>t({survey:e}),setTriggered:e=>t({triggered:e})}));function ode(){const{setTriggered:t}=Mu.getState();t(!0)}function rde(){const t=Mu(r=>r.survey),e=Mu(r=>r.triggered),n=Mu(r=>r.setSurvey),s=Mu(r=>r.setTriggered);return v.useEffect(()=>{if(!e||t)return;const r=nde();sde(),n(r)},[t,e,n]),{survey:t,finishSurvey:()=>{n(null),s(!1)}}}function ade(){const t=Mu(o=>o.setTriggered),e=X(()=>Tw()),n=jn(),s=v.useRef(null);v.useEffect(()=>{if(typeof document<"u"&&document.visibilityState!=="visible"){t(!1);return}if(!e){t(!1);return}n.pathname==="/"&&n.key!==s.current&&(s.current=n.key,t(!0))},[n.key,n.pathname,t,e])}function lst(t){return!(t.type==="perf_stats"||t.type==="server_ste_metadata"||t.type==="message_marker")}const ide=10,lde=15,O4=20,L4=5,cde=10;let Dy=null;const si=()=>{var t,e,n,s,o,r,a;if(Dy==null){const l=mn("3317473948").value,c={convoPollingFreshnessMaxMins:((t=l.default_max_polling_duration)!=null?t:ide*60)/60,imageGenPollingFreshnessMaxMins:((e=l.model_slug_max_polling_durations.image_gen)!=null?e:lde*60)/60,o1ProConvoPollingFreshnessMaxMins:((n=l.model_slug_max_polling_durations.o1_pro)!=null?n:O4*60)/60,o3ProConvoPollingFreshnessMaxMins:((s=l.model_slug_max_polling_durations.o3_pro)!=null?s:O4*60)/60,gpt4oConvoPollingIntervalMs:((o=l.model_slug_intervals.gpt_4o)!=null?o:L4)*1e3,defaultConvoPollingIntervalMs:((r=l.default_interval)!=null?r:L4)*1e3,imageGenPollingIntervalMs:((a=l.model_slug_intervals.image_gen)!=null?a:cde)*1e3,errorCountThreshold:30};return Dy=c,c}return Dy};var U1=(t=>(t[t.Standard=0]="Standard",t[t.ImageGen=1]="ImageGen",t))(U1||{});function ji(t){var e;return(e=t==null?void 0:t.metadata)!=null&&e.image_gen_async?1:0}function cst(t){var n,s;const e=(s=(n=t==null?void 0:t.metadata)==null?void 0:n.poll_on_websocket_inactivity_ms)!=null?s:0;return e>0?e:0}function Dv(t){var s,o,r;const e=(o=(s=t==null?void 0:t.metadata)==null?void 0:s.poll_interval_ms)!=null?o:0;return e>0?e:ji(t)===1?si().imageGenPollingIntervalMs:ude((r=t==null?void 0:t.metadata)==null?void 0:r.model_slug)?si().gpt4oConvoPollingIntervalMs:si().defaultConvoPollingIntervalMs}function Mw(t){var s,o,r;const e=(o=(s=t==null?void 0:t.metadata)==null?void 0:s.poll_freshness_max_mins)!=null?o:0;if(e>0)return e;const n=(r=t==null?void 0:t.metadata)==null?void 0:r.model_slug;return HL(n)?si().o1ProConvoPollingFreshnessMaxMins:$L(n)?si().o3ProConvoPollingFreshnessMaxMins:ji(t)===1?si().imageGenPollingFreshnessMaxMins:UL(ji(t))}function UL(t){switch(t){case 1:return si().imageGenPollingFreshnessMaxMins;case 0:return si().convoPollingFreshnessMaxMins}}function HL(t){return t?Tr(3010482349,"".concat(t,"-AAAA")):!1}function $L(t){return t?Tr(3240390095,"".concat(t,"-AAAA")):!1}function ude(t){return t?t==="gpt-4o":!1}function D4(t,e){pt(t,n=>{fo.updateTree(n,(s,o)=>{var a,l,c;if(!(((c=(l=(a=s.getNodeIfExists(o))==null?void 0:a.message)==null?void 0:l.content)==null?void 0:c.content_type)===vt.Text)){const u=IR("");return u.clientMetadata=N(N({},u.clientMetadata),e),s.addMessageNode(o,u)}s.updateNodeMetadata(o,e)})})}function Nf(t){var e;return(e=ve.getCurrentNode(At(t)))==null?void 0:e.message}function GL({threadId:t}){const e=Nt(),n=v.useRef(!1),s=v.useRef(null),o=v.useRef(0),r=v.useRef(null);return v.useEffect(()=>{let a=!1,l=0;async function c(){var g,h,_,x,b,y,S;const u=wR(t);r.current==null&&(r.current=Date.now(),u==null||u.onPollingStarted("async")),n.current=!0;const d=(_=(h=(g=At(t))==null?void 0:g.turnTraceId)!=null?h:u==null?void 0:u.turn_trace_id)!=null?_:void 0;let f=null;try{const C=Nf(t);if(ji(C)!==1&&!HL((x=C==null?void 0:C.metadata)==null?void 0:x.model_slug)&&!$L((b=C==null?void 0:C.metadata)==null?void 0:b.model_slug))try{const w=Date.now()/1e3,{status:k}=await ue.safeGet("/conversation/{conversation_id}/stream_status",N({parameters:{path:{conversation_id:t}}},d?{additionalHeaders:{"x-oai-turn-trace-id":d}}:{}));k!=="COMPLETE"&&k!=="IS_STOP_REQUESTED"&&(l++,V.logEvent("ChatGPT Convo Stream: Polling Attempted",{conversationId:t,retryCount:l}),f={async_status:Nn.STREAMING,update_time:w})}catch(w){}f==null&&(l++,V.logEventWithStatsig("ChatGPT Convo Stream: Polling Attempted","chatgpt_convo_stream_polling_attempted",{conversationId:t,retryCount:l}),u==null||u.logger.info("Polling attempted",{retryCount:l}),f=await sl(t,{skipIfExisting:!1,source:"pending_thread_poller",turnTraceId:d})),o.current=0}catch(C){o.current+=1;const w=Nf(t);if(o.current>=si().errorCountThreshold){V.logEventWithStatsig("chatgpt_web_network_error_poller_failure","chatgpt_web_network_error_poller_failure",{poll_type:ji(w)});const k={source:"pending_thread_poller",type:"error"};V.logEvent("chatgpt_web_network_error",k),ft.logEvent("chatgpt_web_network_error",null,k);const E="A network error occurred. Please check your connection and try again. ".concat(FC);D4(t,{err:E,errType:"danger",errCode:na.NetworkError}),u==null||u.logger.info("Polling failed with network error",{retryCount:l,errDisplay:E,errMsg:(y=C.message)!=null?y:"Unknown error",errType:"danger",errCode:na.NetworkError}),a||(u==null||u.onPollingFinished(!1,l),u==null||u.finalizeReloadLifecycle(gm.Error,"polling"))}else a||(s.current=window.setTimeout(c,Dv(w)));return}if(f.async_status===Nn.UNREAD){const C=Nf(t),w=r.current?Date.now()-r.current:0;V.logEventWithStatsig("chatgpt_web_network_error_poller_success","chatgpt_web_network_error_poller_success",{duration_ms:w,poll_type:ji(C)}),u==null||u.logger.info("Polling successful",{durationMs:w,pollType:ji(C)}),yd(t,{source:Ka.SERVER,value:Nn.UNREAD}),Fo(e,f.gizmo_id),fc.updateThreadFromServer(t,f),a||(u==null||u.onPollingFinished(!0,l),u==null||u.finalizeReloadLifecycle(gm.Success,"polling"));return}if(f.async_status!==Nn.STREAMING)return;const m=(S=f.update_time)!=null?S:0,p=Y0(new Date,new Date(m*1e3));if(!a){const C=Nf(t);if(p<Mw(C))s.current=window.setTimeout(c,Dv(C));else{const w=Nf(t);V.logEventWithStatsig("chatgpt_web_network_error_poller_failure","chatgpt_web_network_error_poller_failure",{poll_type:ji(w)}),u==null||u.logger.info("Polling failed with timeout",{retryCount:l,errDisplay:Do,errMsg:"Timeout",errType:"danger",errCode:na.NetworkError}),D4(t,{err:Do,errType:"danger",canRetry:!0,errCode:na.NetworkError}),ue.safePost("/conversation/{conversation_id}/async-status",{parameters:{path:{conversation_id:t}},requestBody:{status:null}}),a||(u==null||u.onPollingFinished(!1,l),u==null||u.finalizeReloadLifecycle(gm.Error,"polling"))}}V.logEventWithStatsig("ChatGPT Convo Stream: Polling Complete","chatgpt_convo_stream_polling_complete",{conversationId:t,retryCount:l})}return n.current||(V.logEvent("Conversation Polling Started"),c()),()=>{a=!0,s.current&&window.clearTimeout(s.current),n.current=!1}},[e,t]),null}function VL(t){"use forget";const e=D.c(5),n=hw(t);let s;e[0]!==n?(s=n!=null?n:{},e[0]=n,e[1]=s):s=e[1];const{value:o,source:r}=s,a=o===void 0?null:o,l=r===void 0?null:r;let c;return e[2]!==l||e[3]!==a?(c=u=>{var _,x,b;const d=(_=ve.getCurrentNode(u))==null?void 0:_.message,f=Mw(d),m=ve.getUpdateTime(u),p=Math.max(m!=null?m:0,(x=d==null?void 0:d.create_time)!=null?x:0,(b=d==null?void 0:d.update_time)!=null?b:0),g=Y0(new Date,new Date(p*1e3))<f;return xe("3922476776")&&g&&a===Nn.STREAMING&&l===Ka.SERVER},e[2]=l,e[3]=a,e[4]=c):c=e[4],Ze(t,c)}const dde=30,fde=5e3,mde=t=>new Promise(e=>setTimeout(e,t));function ch(t){var e;return(e=ve.getCurrentNode(At(t)))==null?void 0:e.message}function pde(t){return t?Tr(3010482349,"".concat(t,"-AAAA")):!1}function gde(t){return t?Tr(3240390095,"".concat(t,"-AAAA")):!1}function hde(t){var e,n,s;return(e=t==null?void 0:t.metadata)!=null&&e.image_gen_async?!1:!pde((n=t==null?void 0:t.metadata)==null?void 0:n.model_slug)&&!gde((s=t==null?void 0:t.metadata)==null?void 0:s.model_slug)}async function _de(t,e){try{const{status:n}=await ue.safeGet("/conversation/{conversation_id}/stream_status",N({parameters:{path:{conversation_id:t}}},e?{additionalHeaders:{"x-oai-turn-trace-id":e}}:{}));return n}catch(n){return n instanceof Vn&&n.status===404?"UNAVAILABLE":null}}function xde(t){var n;const e=(n=t.conversationId)!=null?n:t.conversation_id;return typeof e=="string"?e:void 0}function By(t,e){pt(t,n=>{fo.updateTree(n,(s,o)=>{var a,l,c;if(!(((c=(l=(a=s.getNodeIfExists(o))==null?void 0:a.message)==null?void 0:l.content)==null?void 0:c.content_type)===vt.Text)){const u=IR("");return u.clientMetadata=N(N({},u.clientMetadata),e),s.addMessageNode(o,u)}s.updateNodeMetadata(o,e)})})}function uh(t){var e;return(e=t==null?void 0:t.metadata)!=null&&e.image_gen_async?U1.ImageGen:U1.Standard}function zL(n){return po(this,arguments,function*(t,e={}){var r,d;let s=(r=e.threadId)!=null?r:e.clientThreadId?Lt(e.clientThreadId):void 0,o=!1;try{try{for(var a=Ao(t),l,c,u;l=!(c=yield new dn(a.next())).done;l=!1){const f=c.value;f.type==="connected"&&(o=!0);const m=xde(f);m&&(s=m),yield f}}catch(c){u=[c]}finally{try{l&&(c=a.return)&&(yield new dn(c.call(a)))}finally{if(u)throw u[0]}}}catch(f){if(DY(f)||(d=e.signal)!=null&&d.aborted||!s)throw f;o||(yield{type:"connected",serverRequestId:null,interruptConversationToken:null}),yield*Mf(yde(s,N({error:f},e)))}})}function yde(t,o){return po(this,null,function*(){var r=o,{error:e,turnTracker:n}=r,s=De(r,["error","turnTracker"]);var C,w,k,E;const a=(C=s.ctx)!=null?C:Oc(),l=Zn(a),c=Date.now();let u=0,d=0,f=null,m=null;const p=()=>{var T,M;if((T=s.signal)!=null&&T.aborted)throw(M=s.signal.reason)!=null?M:new DOMException("Aborted","AbortError")},g=T=>{V.logEvent("ChatGPT Convo Stream: Polling Attempted",{conversationId:t,retryCount:T}),n==null||n.logger.info("Polling attempted",{retryCount:u})},h=()=>{const T=t?ch(t):void 0;throw V.logEventWithStatsig("chatgpt_web_network_error_poller_failure","chatgpt_web_network_error_poller_failure",{poll_type:uh(T)}),t&&(By(t,{err:Do,errType:"danger",canRetry:!0,errCode:na.NetworkError}),ue.safePost("/conversation/{conversation_id}/async-status",{parameters:{path:{conversation_id:t}},requestBody:{status:null}})),new Error(Do)},_=()=>{const T=t?ch(t):void 0;if(V.logEventWithStatsig("chatgpt_web_network_error_poller_failure","chatgpt_web_network_error_poller_failure",{poll_type:uh(T)}),n==null||n.logger.info("Polling failed with timeout",{retryCount:u,errDisplay:Do,errMsg:"Timeout",errType:"danger",errCode:na.NetworkError}),t){const M="A network error occurred. Please check your connection and try again. ".concat(FC);By(t,{err:M,errType:"danger",errCode:na.NetworkError})}throw new Error(Do,{cause:e})},x=T=>{const M=t!=null?t:T.conversation_id;EL(M,T,{skipIfExisting:!1,source:"completion_stream_polling_fallback"}),Fo(l,T.gizmo_id);const A=ch(M);V.logEventWithStatsig("chatgpt_web_network_error_poller_success","chatgpt_web_network_error_poller_success",{duration_ms:Date.now()-c,poll_type:uh(A)}),n==null||n.logger.info("Polling successful",{durationMs:Date.now()-c,pollType:uh(A)})},b=T=>{V.logEventWithStatsig("ChatGPT Convo Stream: Polling Complete","chatgpt_convo_stream_polling_complete",{conversationId:t,retryCount:T}),n==null||n.onPollingFinished(!1,u),n==null||n.finalizeReloadLifecycle(gm.Error,"polling")},y=()=>({type:"conversation_async_status",async_status:Nn.STREAMING}),S=()=>[{type:"conversation_async_status",async_status:Nn.UNREAD},{type:"done"}];V.logEvent("Conversation Polling Started");do{p();const T=ch(t);if(u>0){const A=Dv(T);yield new dn(mde(Math.max(A,fde))),p()}Y0(new Date,new Date(c))>Mw(T)&&h(),u+=1,g(u),By(t,{err:BY,errType:"info",errCode:na.NetworkErrorWithReconnection,canRetry:!1}),yield y();try{const A=(E=(k=s.turnTraceId)!=null?k:(w=At(t))==null?void 0:w.turnTraceId)!=null?E:void 0,I=hde(T)&&(m==="IS_STREAMING"||m==null)?_de(t,A):Promise.resolve(m),j=kL(t,{turnTraceId:A});[m,f]=yield new dn(Promise.all([I,j]))}catch(A){d+=1,n==null||n.logger.info("Polling failed with network error",{retryCount:u,errDisplay:A,errMsg:A instanceof Error?A.message:String(A),errType:"danger",errCode:na.NetworkError}),d>=dde&&_(),m!=null||(m="IS_STREAMING")}}while(m==="IS_STREAMING"||f==null||f.async_status!=null&&f.async_status!==Nn.UNREAD);if(f!=null&&(f.async_status==null||f.async_status===Nn.UNREAD)){x(f);for(const T of S())yield T}b(u)})}let Vl=null;const bde="".concat(UY,".suggest_agent");async function WL(){return Vl==null&&(Vl=await FY()),Vl!=null?Vl:[]}const ust="kaur1br5.dragonfruit";function dst(t){return Vl==null?!1:Vl.includes(t)}function vde(){const t=[],e=[];let n=!1;return{push(s){var o;n||(e.length?(o=e.shift())==null||o({value:s,done:!1}):t.push(s))},close(){var s;if(!n)for(n=!0;e.length;)(s=e.shift())==null||s({done:!0})},async shift(){return t.length?{value:t.shift(),done:!1}:n?{done:!0}:await new Promise(s=>e.push(s))}}}function Sde(t,e){return po(this,null,function*(){var l;const n=vde(),s=new Set;let o=0,r=!1;const a=c=>{if(r)return;const u=c[Symbol.asyncIterator]();s.add(u),o++,(async()=>{try{for(;;){const{value:d,done:f}=await u.next();if(f)break;n.push({kind:"value",value:d});const m=e==null?void 0:e(d);m&&a(m)}}catch(d){n.push({kind:"error",error:d})}finally{s.delete(u),o--,o===0&&n.close()}})()};a(t);try{for(;;){const{value:c,done:u}=yield new dn(n.shift());if(u)return;if(c){if(c.kind==="error")throw c.error;yield c.value}}}finally{r=!0;for(const c of s)try{yield new dn((l=c.return)==null?void 0:l.call(c))}catch(u){}n.close()}})}function Cde(t){var c,u;const e=(c=xe("2197218876"))!=null?c:!1,n=!!((u=t==null?void 0:t.prefetchIds)!=null&&u.length),s=performance.now(),o=[];if(!e){const d=R4();return d==null?(o.push("chatReq"),Kue().then(l)):l(d)}const r=R4();if(r!=null&&r.token)return l(r);const a=que();if(a==null)return o.push("chatReq"),BL().then(l);return l(a);function l(d){var _,x;const f=d.token?"finalized":"prepared_only",m=(_=d.__prefetch_source)!=null?_:"none",p=(x=d.persona)!=null?x:"unknown";d.__chatreq_mode_at_send=f,e&&f==="prepared_only"&&(d.__skip_chatreq_finalize=!0),d.force_login&&fn({fallbackScreenHint:"login"});const g=_m.getEnforcementTokenSync(d);if(g==null)return o.push("turnstile"),_m.getEnforcementToken(d).then(h);return h(g);function h(b){const y=performance.now(),S=ol.getEnforcementTokenSync(d);if(S==null)return o.push("proofofwork"),ol.getEnforcementToken(d,{forceSync:n}).then(C);return C(S);function C(w){const k=String(performance.now()-y),E=o.includes("chatReq")?"false":"true",T=o.includes("turnstile")?"false":"true",M=o.includes("proofofwork")?"false":"true";Fe.hist(Ue.DEFAULT,"chat_req_time",[{key:"wasChatReqSync",value:E},{key:"wasTurnstileSync",value:T},{key:"wasProofofworkSync",value:M},{key:"chatReqMode",value:f},{key:"prefetchSource",value:m},{key:"persona",value:p}],performance.now()-s);const A=d.__chatreq_created_at_ms;return typeof A=="number"&&Fe.hist(Ue.DEFAULT,"chat_req_created_to_send_ms",[{key:"wasChatReqSync",value:E},{key:"wasTurnstileSync",value:T},{key:"wasProofofworkSync",value:M},{key:"prefetchSource",value:m},{key:"persona",value:p}],Math.max(0,s-A)),ga({eventName:"chatgpt_web_completion_integrity_checks",value:o.length===0?"true":"false",metadata:{wasChatReqSync:E,wasTurnstileSync:T,wasProofofworkSync:M,chatReqMode:f,isPrefetchInitialLoad:n?"true":"false",powTime:k}}),{chatReq:d,turnstileToken:b,proofToken:w}}}}}function Aw(){return xe("988697485")}function wde(){return xe("2939856311")}function fst(){return xe("32004461")}function mst(){return xe("320708975")}function lm(){return cf()}const qL=yt(()=>x1(Ft.Moonshine)&&x1(Ft.Sunshine)),kde=yt(()=>wde()),KL=yt(()=>Aw()&&zc()&&qL()===!0&&x1(Ft.UkdvthEntrypointVisible)===!0),Ede=yt(()=>Aw()&&qL()&&x1(Ft.UkdvthMemoryEnabled)),zc=()=>Ede()===!0;function cf(){return xe("58496621")}const Nw=yt(()=>zc()&&cf()),Tde=Sa(Ie.LastOpenedPulseId,()=>null);function pst(t){"use forget";const e=D.c(3);let n,s;e[0]!==t?(n=()=>{t&&Tde.set(t)},s=[t],e[0]=t,e[1]=n,e[2]=s):(n=e[1],s=e[2]),v.useEffect(n,s)}const zp=t=>t.content_type==="card",YL=t=>t.content_type==="card_stack",Iw=t=>t.flatMap(e=>zp(e)?[e]:YL(e)?Iw(e.items):[]),gst=t=>t.card_type==="light"?"light":"core";function Bv(t){return t.replace("..."," ")}function Mde(t,e){var o;const n=Iw(t),s=n.findIndex(r=>r.id===e);return s<0?null:(o=n.slice(s+1).find(r=>r.conversation_id!=null))!=null?o:null}function Ade(){"use forget";return yC("/pulse/*")!=null}function Nde(t){switch(t.type){case"card":return"feed/card/".concat(t.card_id,"/conversation");case"feedback-conversation":return"feed/feedback/conversation"}}function Ide(t,e){e.type==="feedback-conversation"&&(e.feedback_card_id&&t.searchParams.set("card_id",e.feedback_card_id),e.task_id&&t.searchParams.set("task_id",e.task_id))}function Hm(t){return{url:t,fallback_url:t,id:t}}function ZL(t){let e=!1;const n=[],s=[];function o(c){n.length>0?n.shift()(c):s.push(c)}function r(c){e||o({value:c,done:!1})}function a(){e||(e=!0,n.forEach(c=>c({value:void 0,done:!0})),n.length=0)}function l(c){e||(o(Promise.reject(c)),a())}try{t(r,a,l)}catch(c){l(c)}return{next(){return new Promise(c=>{s.length>0?c(s.shift()):e?c({value:void 0,done:!0}):n.push(c)})},[Symbol.asyncIterator](){return this}}}function jw(t,e){return po(this,null,function*(){let n=null;try{for(var s=Ao(t),o,r,a;o=!(r=yield new dn(s.next())).done;o=!1){const l=r.value;if("response"in l)yield l;else if(l.event==="delta_encoding"){const c=String(l.data);if(e==null||e(c),c==="v1")n=new jde;else throw new Error("[delta] unknown delta encoding: ".concat(c))}else if(l.event==="delta"){if(!n)throw new Error("[delta] delta event before delta_encoding");yield{data:n.applyDelta(l.data)}}else yield l}}catch(r){a=[r]}finally{try{o&&(r=s.return)&&(yield new dn(r.call(s)))}finally{if(a)throw a[0]}}})}var QL=(t=>(t.V1="v1",t))(QL||{});class jde{constructor(){ye(this,"prevObjByChannel",[]);ye(this,"prevDelta",{channel:0,op:"add",path:"",value:void 0})}applyDelta(e){try{const n=this.decodeDelta(e),s=n.channel,o=this.prevObjByChannel[s],r=Ode(o,n);return this.prevObjByChannel[s]=r,r}catch(n){Ve.addError("Error applying delta: ".concat(n))}}decodeDelta(e){Rde(e);const n=Pde(e,this.prevDelta),s=JL(n);return this.prevDelta=s,s}}function Pde(t,e){for(const[n,s]of XL)n!=="value"&&!(s in t)&&(t[s]=e[n]);return t}function JL(t){const e=t;for(const[n,s]of XL)s in t&&(e[n]=t[s],delete t[s]);return e.op==="patch"&&(e.value=e.value.map(JL)),e}function Rde(t){if(!t||typeof t!="object")throw new Error("Unexpected delta non-object")}const XL=[["channel","c"],["path","p"],["op","o"],["value","v"]];function Ode(t,e){return UC({__root:t},s=>eD(s,e)).__root}function eD(t,e){var o;const n=Bde((o=e.path)!=null?o:"");for(let r=0;r<n.length-1;r++)t[n[r]]===void 0&&(typeof n[r+1]=="number"?t[n[r]]=[]:t[n[r]]={}),t=t[n[r]];const s=n[n.length-1];switch(e.op){case"patch":for(const r of e.value){const a={__root:t[s]};eD(a,r),t[s]=a.__root}break;case"add":Array.isArray(t)?t.splice(s,0,e.value):t[s]=e.value;break;case"remove":Array.isArray(t)?t.splice(s,1):delete t[s];break;case"replace":t[s]=e.value;break;case"append":if(typeof t[s]=="string")t[s]+=e.value;else if(Array.isArray(t[s]))t[s].push(...Fde(e.value));else if(B4(t[s])&&B4(e.value))for(const r in e.value)t[s][r]=e.value[r];else t[s]=e.value;break;case"truncate":t[s]&&(typeof t[s]=="string"?t[s]=t[s].substring(0,e.value):Array.isArray(t[s])&&(t[s].length=e.value));break;default:throw new Error("Unknown json delta operation")}}function Lde(t){return t.replace(/~1/g,"/").replace(/~0/g,"~")}const Dde=new RegExp("^(?:0|[1-9]\\d*)$","d");function Bde(t){const e=["__root"];if(t==="")return e;t[0]==="/"&&(t=t.substring(1));for(const n of t.split("/"))Dde.test(n)?e.push(parseInt(n,10)):e.push(Lde(n));return e}function Fde(t){return Array.isArray(t)?t:[t]}function B4(t){return typeof t=="object"&&t!=null&&!Array.isArray(t)}function Fy(t){var e,n;return(n=(e=t.headers.get("x-request-id"))!=null?e:t.headers.get("cf-ray"))!=null?n:void 0}function H1(t,{accessToken:e,method:n,headers:s,body:o,signal:r,observer:a}={}){const l=e!=null?e:D0();return ZL((c,u,d)=>{let f=!1,m=!1,p=null,g=!1,h=!1;const _=(w,k,E)=>{const T={reason:w,source:k,requestUrl:t};if(typeof navigator<"u"&&(T.navigator_online=navigator.onLine),p){T.response_status=p.status;const A=Fy(p);A&&(T.response_request_id=A)}const M=HY(E);return Object.entries(M).forEach(([A,I])=>{I!==void 0&&(T[A]=I)}),T},x=(w,k,E)=>{if(g||h||w==="error")return;h=!0;const T=_(w,k,E);V.logValueEventWithStatsig({segmentEventName:"request_stream_no_events",statsigEventName:"chatgpt_request_stream_no_events",data:T})},b=void 0;function y(w,k="manual_error"){var E;if(f)return w;f=!0,b==null||b({reason:"error",source:k,error:w});try{return d(w),(E=a==null?void 0:a.onClose)==null||E.call(a,"error",w),w}finally{w instanceof Vn?($Y(w,"stream"),GY(w)):(Ve.addError(w),V.logValueEventWithStatsig({segmentEventName:"request_stream_error",statsigEventName:"chatgpt_request_stream_error",data:{error:w instanceof Error?w.message:String(w)}}))}}let S=!1;function C(w){var k,E,T;if(!S&&w==="fetch_resolved"&&!(r!=null&&r.aborted)&&t.includes("/backend-api/f/conversation"))throw y(Vn.createWithErrorMessage(t,"client",Do,void 0,new Error("No done event received")),"onerror");if(w==="done_event"&&(S=!0),!f)if(f=!0,r!=null&&r.aborted){const M=(k=r.reason)!=null?k:new DOMException("Aborted","AbortError");b==null||b({reason:"aborted",source:"abort_signal",error:M}),x("aborted","abort_signal",M),d(M),(E=a==null?void 0:a.onClose)==null||E.call(a,"aborted",M)}else b==null||b({reason:"completed",source:w}),x("completed",w),(T=a==null?void 0:a.onClose)==null||T.call(a,"completed"),u()}VY(t,{method:n,credentials:"include",headers:N(N(N({},l?fd({accessToken:l}):jR()),o?{"Content-Type":"application/json"}:null),s),body:o?JSON.stringify(o):void 0,signal:r,openWhenHidden:!0,async onopen(w){var E,T;p=w;const k=(E=w.headers.get("content-type"))!=null?E:"";if(w.ok&&k.includes("text/event-stream"))c({response:w}),(T=a==null?void 0:a.onOpen)==null||T.call(a,w);else if(k.includes("application/json")){const M=await w.json();throw y(new Vn(t,w.status,M,Fy(w),new Error(JSON.stringify(M))),"onopen_error")}else{const A=(await w.text()).substring(0,1e3);throw y(new Vn(t,w.status,{detail:{message:zY,code:"unexpected_content_type",contentType:k,text:A}},Fy(w),new Error(A)),"onopen_error")}},onmessage(w){var M;const k=new TextEncoder,E=w.data==="[DONE]";if((M=a==null?void 0:a.onEvent)==null||M.call(a,{byteLength:k.encode(w.data).length,isDoneEvent:E}),w.event==="ping"||!w.data)return;if(E){C("done_event");return}const T=JSON.parse(w.data);if(T.error){const A=typeof T.error_code=="string"?T.error_code:void 0,I=new Error(T.error);V.logValueEventWithStatsig({segmentEventName:"raw_request_stream_error",statsigEventName:"chatgpt_raw_request_stream_error",data:{errorMessage:I.message,errorCode:A,isNetworkError:zh(I),isErrorInMessageData:!0,messageData:T,transport:"sse"}}),y(Vn.createWithErrorMessage(t,"server",T.error,void 0,I,A),"onmessage_error")}else g=!0,c({event:w.event||void 0,data:T})},onerror(w){const k=w instanceof Error?w:new Error(JSON.stringify(w));throw V.logValueEventWithStatsig({segmentEventName:"raw_request_stream_error",statsigEventName:"chatgpt_raw_request_stream_error",data:{errorMessage:k.message,isNetworkError:zh(k),isErrorInMessageData:!1,transport:"sse"}}),zh(k)?y(Vn.createWithErrorMessage(t,"client",Do,void 0,k),"onerror"):k.message==="Failed to fetch"?(V.logEvent("chatgpt_web_failed_to_fetch",{source:"request_stream"}),ft.logEvent("chatgpt_web_failed_to_fetch",null,{source:"request_stream"}),y(Vn.createWithErrorMessage(t,"server","An error occurred. Either the engine you requested does not exist or there was another issue processing your request. ".concat(FC),void 0,k),"onerror")):y(k,"onerror")}}).then(()=>C("fetch_resolved"),y)})}const Ude=t=>new Promise(e=>setTimeout(e,t));function tD(t,c){return po(this,null,function*(){var u=c,{shouldRetry:e=()=>!0,retryConfig:{MIN_RETRY_INTERVAL:n,MAX_RETRY_INTERVAL:s,RETRY_FACTOR:o,MAX_RETRY_COUNT:r},onRetry:a}=u,l=De(u,["shouldRetry","retryConfig","onRetry"]);let d=!1,f=!1,m=l;const p=S=>{const C=S.observer;return G(N({},S),{observer:G(N({},C),{onClose:(w,k)=>{var E;(E=C==null?void 0:C.onClose)==null||E.call(C,w,k),w==="completed"&&(f=!0)}})})};let g=H1(t,p(m)),h=0;for(;!d&&!f;)try{try{for(var _=Ao(g),x,b,y;x=!(b=yield new dn(_.next())).done;x=!1){const S=b.value;"response"in S&&(d=!0),yield S}}catch(b){y=[b]}finally{try{x&&(b=_.return)&&(yield new dn(b.call(_)))}finally{if(y)throw y[0]}}f=!0}catch(S){if(f)return;if(d||!e(S)||h>=r)throw S;const C=Math.min(n*o**h,s);if(yield new dn(Ude(C)),h++,a){const w=yield new dn(a());Fe.count(Ue.DEFAULT,"chat_requirements.retry_refetch_token"),m=G(N(N({},m),w),{headers:w.headers!==void 0?w.headers:m.headers,body:w.body!==void 0?w.body:m.body})}g=H1(t,p(m))}})}const Au=t=>{if(t.type===xt.Starter&&t.category==="onboarding")return"";switch(t.type){case xt.Reply:return t.text;case xt.Templated:case xt.Starter:case xt.Autocomplete:case xt.Trending:case xt.Capabilities:return t.prompt}},Hde=t=>{var n;const e=(n=t.data)==null?void 0:n.hazelnut_hint;if(typeof e=="string"){const s=e.trim();return s?[s]:[]}return Array.isArray(e)?e.filter(s=>typeof s=="string").map(s=>s.trim()).filter(s=>s.length>0):[]},$de=t=>t.type===xt.Reply,Wu=t=>t.type===xt.Starter,Pw=t=>t.type===xt.Autocomplete,Bi=t=>t.type===xt.Trending,Fi=t=>Pw(t)&&!!t.theme,nD=t=>t.type===xt.Capabilities,Gde=t=>t.type===xt.Templated,Vde=t=>Bi(t)||nD(t)||Pw(t)&&!Fi(t),zde=(t,e,n,s,o)=>{var r,a,l,c,u;switch(ft.logEvent("chatgpt_prompt_use_suggestion",Vde(t)?"":Au(t),{id:(Wu(t)||Fi(t)||Bi(t))&&(r=t.id)!=null?r:"",index:"".concat(e),type:t.type,theme:Bi(t)&&t.theme?t.theme:"",category:(Wu(t)||Fi(t)||Bi(t))&&(a=t.category)!=null?a:"",source:(Wu(t)||Fi(t)||Bi(t))&&(l=t.source)!=null?l:""}),t.type){case xt.Reply:V.logEvent("Use Suggested Reply",{value:Au(t),prompt_type:xt.Reply,messageId:s});break;case xt.Capabilities:V.logEvent("Use Capabilities Suggestion",{prompt_type:xt.Capabilities,categoryId:t.categoryId,client_thread_id:n,messageId:s});break;case xt.Starter:V.logEvent(o!=null?o:"Use Starter Prompt",{value:Au(t),prompt_type:xt.Starter,title:t.title,body:t.body,id:t.id,category:t.category,client_thread_id:n,messageId:s,index:e,theme:t.theme});break;case xt.Autocomplete:{const d=Fi(t);V.logEvent("Use Autocomplete",{value:d?Au(t):"",prompt_type:xt.Autocomplete,title:d?t.title:"",body:d?t.body:"",id:d?t.id:"",category:t.category,index:e,messageId:s,client_thread_id:n,theme:(c=t.theme)!=null?c:""});break}case xt.Trending:{V.logEvent("Use Trending Prompt",{prompt_type:xt.Trending,title:t.title,index:e,messageId:s,client_thread_id:n,theme:(u=t.theme)!=null?u:""});break}}},hst=(t,e)=>{var r,a,l,c;if(t.length===0)return;const s=ve.getCurrentNode(At(e)).message.id;ft.logEvent("chatgpt_prompt_show_suggestions","count_".concat(t.length),{type:t[0].type,category:(Wu(t[0])||Fi(t[0])||Bi(t[0]))&&(r=t[0].category)!=null?r:"",source:(Wu(t[0])||Fi(t[0])||Bi(t[0]))&&(a=t[0].source)!=null?a:""});const o=u=>{var d,f;for(let m=0;m<u.length;m++){const p=u[m];V.logEventWithStatsig("Show Trending Prompt","chatgpt_prompt_show_suggestion",{type:p.type,id:p.id,index:m,client_thread_id:e,message_id:s,theme:(d=p.theme)!=null?d:"",category:(f=p.category)!=null?f:""})}};if(t.every($de))V.logEvent("Show Suggested Replies",{prompt_count:t.length,prompt_type:xt.Reply,client_thread_id:e,suggestions:t.map(u=>u.text),message_id:s});else if(t.every(Wu)){const{isAdditional:u}=t[0];V.logEvent(u?"More Starter Prompts Shown":"Show Starter Prompts",{prompt_count:t.length,prompt_type:xt.Starter,titles:t.map(d=>d.title),bodies:t.map(d=>d.body),ids:t.map(d=>d.id),client_thread_id:e,message_id:s,themes:t.map(d=>{var f;return(f=d.theme)!=null?f:""})}),u&&V.logEvent("Expand More Starter Prompts",{client_thread_id:e,message_id:s}),o(t)}else if(t.every(Pw)){const u=!!t.find(d=>Fi(d));V.logEvent("Show Autocomplete Prompts",{prompt_count:t.length,prompt_type:t[0].type,titles:t.map(d=>u?d.title:""),bodies:t.map(d=>u?d.body:""),ids:t.map(d=>u?d.id:""),category:(l=t[0].category)!=null?l:"",source:(c=t[0].source)!=null?c:"",client_thread_id:e,message_id:s,themes:t.map(d=>{var f;return(f=d.theme)!=null?f:""})})}else t.every(Bi)?(V.logEvent("Show Trending Prompts",{prompt_count:t.length,prompt_type:xt.Trending,titles:t.map(u=>u.title),client_thread_id:e,message_id:s}),o(t)):t.every(nD)?V.logEvent("Show Capabilities Suggestions",{prompt_count:t.length,prompt_type:xt.Capabilities,category_ids:t.map(u=>u.categoryId),client_thread_id:e,message_id:s}):t.every(Gde)?V.logEvent("Show Templated Suggestions",{prompt_count:t.length,prompt_type:xt.Templated,titles:t.map(u=>u.title),client_thread_id:e,message_id:s}):Ve.addError("Unhandled suggestion type",{type:t[0].type})},_st=t=>{const n=ve.getCurrentNode(At(t)).message.id;V.logEvent("Show Expand More Starter Prompts Button",{client_thread_id:t,message_id:n})},xst=t=>{const n=ve.getCurrentNode(At(t)).message.id;V.logEvent("Expand More Starter Prompts",{client_thread_id:t,message_id:n})},jo=we({searchPlaceholder:{id:"PromptTextarea.searchPlaceholder",defaultMessage:"Search the web"},internalSearchPlaceholder:{id:"PromptTextarea.internalSearchPlaceholder",defaultMessage:"Ask anything about {workspaceName}..."},thinkPlaceholder:{id:"PromptTextarea.thinkPlaceholder",defaultMessage:"Ask anything"},connectorPlaceholder:{id:"PromptTextarea.connectorPlaceholder",defaultMessage:"Search connected sources"},apiToolPlaceholder:{id:"PromptTextarea.apiToolPlaceholder",defaultMessage:"Use tools"},researchPlaceholder:{id:"PromptTextarea.researchPlaceholder",defaultMessage:"Get a detailed report"},editDeepResearchPlanPlaceholder:{id:"PromptTextarea.editDeepResearchPlanPlaceholder",defaultMessage:"Follow up with any questions or clarifications"},canvasPlaceholder:{id:"PromptTextarea.canvasPlaceholder",defaultMessage:"Write or code"},picturePlaceholder:{id:"PromptTextarea.picturePlaceholder",defaultMessage:"Describe an image"},pictureV2Placeholder:{id:"PromptTextarea.pictureV2Placeholder",defaultMessage:"Describe or edit an image"},tatertotPlaceholder:{id:"PromptTextarea.studyAndLearnPlaceholder",defaultMessage:"Learn something new"},continueGenerating:{id:"PromptTextarea.continueGenerating",defaultMessage:"Continue generating"},stopGenerating:{id:"PromptTextarea.stopGenerating",defaultMessage:"Stop generating"},disallowedByWorkspacePlaceholder:{id:"PromptTextarea.disallowedByWorkspaceReason",defaultMessage:"Your workspace owner hasnt approved this GPT."},pimBlockPlaceholder:{id:"PromptTextarea.pimBlockPlaceholder",defaultMessage:"Potentially Malicious Content Detected"},noModelsAvailablePlaceholder:{id:"PromptTextarea.noModelsAvailablePlaceholder",defaultMessage:"No models available"},requiresPluginsToBeInstalled:{id:"PromptTextarea.requiresPluginsToBeInstalled",defaultMessage:"Requires plugins to be installed"},noTestGizmoId:{id:"PromptTextarea.noTestGizmoId",defaultMessage:"Start by defining your GPT."},searchWith:{id:"PromptTextarea.searchWith",defaultMessage:"Search with {name}"},loading:{id:"PromptTextarea.loading",defaultMessage:"Loading..."},placeholder:{id:"PromptTextarea.placeholder",defaultMessage:"Send a message"},placeholderWithName:{id:"PromptTextarea.placeholderWithName",defaultMessage:"Message {name}"},placeholderAskAnythingVariant:{id:"PromptTextarea.placeholderAskAnythingVariant",defaultMessage:"Ask anything"},placeholderAsyncSteering:{id:"PromptTextarea.placeholderAsyncSteering",defaultMessage:"Follow up"},placeholderAskNameAnythingVariant:{id:"PromptTextarea.placeholderAskNameAnythingVariant",defaultMessage:"Ask {name} anything"},continueSharedConversationPlaceholder:{id:"PromptTextarea.continueSharedConversationPlaceholder",defaultMessage:"Send a message to continue the conversation."},readOnlyConversationPlaceholder:{id:"PromptTextarea.readOnlyConversationPlaceholder",defaultMessage:"This conversation is read-only."},sharedHealthConversationTooltip:{id:"PromptTextarea.sharedHealthConversationTooltip",defaultMessage:"This is a shared chat from ChatGPT Health. You cant respond or make changes."},sendMessageTooltip:{id:"PromptTextarea.sendMessageTooltip",defaultMessage:"Send message"},unsupportedFileType:{id:"PromptTextarea.unsupportedFileType",defaultMessage:'Uploads with file type "{file_type}" are not supported, please try another file.'},imagesAppPlaceholder:{id:"PromptTextarea.imagesAppPlaceholder",defaultMessage:"Describe a new image"},imagesAppEditPlaceholder:{id:"PromptTextarea.imagesAppEditPlaceholder",defaultMessage:"Describe or edit {attachmentCount, plural, one {this image} other {these images}}"},imagesAppLightboxPlaceholder:{id:"PromptTextarea.imagesAppLightboxPlaceholder",defaultMessage:"Describe edits"},recallFileViewerPlaceholder:{id:"PromptTextarea.recallFileViewerPlaceholder",defaultMessage:"Ask about this file"},gizmoKnowledgeWarning:{id:"PromptTextarea.gizmoKnowledgeWarning",defaultMessage:"Files uploaded here may be included in conversations with your GPT. Files can be downloaded if Code Interpreter is enabled."},n7jupdSystemHintPlaceholder:{id:"3pa1zs",defaultMessage:"Describe a task"},n7jupdActivePlaceholder:{id:"0qUILF",defaultMessage:"Follow up"}}),$1="prompt-textarea";function sD(){var t;(t=document.getElementById($1))==null||t.focus()}const yst={getAndReset:(t,e)=>{const n=tt.getItem(Ie.RestoreMessageAfterOauthRedirect);return tt.removeItem(Ie.RestoreMessageAfterOauthRedirect),!n||n.userId!==t||e!==n.serverThreadId||Date.now()>n.expiresAt?null:n},set:(t,e,n)=>{const s={userId:t,serverThreadId:e,inputText:n,expiresAt:Date.now()+6e4};tt.setItem(Ie.RestoreMessageAfterOauthRedirect,s)}},Cl=()=>{"use forget";const t=D.c(16),e=Jo(),n=Wd.useStore();let s;t[0]!==n?(s=g=>n.getPersistedSystemHintTrigger(g),t[0]=n,t[1]=s):s=t[1];const o=s;let r;t[2]!==e?(r=g=>e(null,{ifPrevSystemHint:g}),t[2]=e,t[3]=r):r=t[3];const a=r;let l;t[4]!==e?(l=()=>e(null),t[4]=e,t[5]=l):l=t[5];const c=l;let u;t[6]!==e?(u=(g,h,_,x)=>{h?e(g,{analyticsMetadata:_,triggerSource:x}):e(null,{ifPrevSystemHint:g,analyticsMetadata:_})},t[6]=e,t[7]=u):u=t[7];const d=u;let f;t[8]!==e?(f=(g,h)=>{e(g,{analyticsMetadata:h})},t[8]=e,t[9]=f):f=t[9];const m=f;let p;return t[10]!==c||t[11]!==a||t[12]!==o||t[13]!==d||t[14]!==m?(p={getSystemHintModeTrigger:o,clearSystemHintModeTrigger:a,setThreadSystemHintMode:d,clearAllSystemHintModeTriggers:c,updateSystemHint:m},t[10]=c,t[11]=a,t[12]=o,t[13]=d,t[14]=m,t[15]=p):p=t[15],p},bst=({promptDisabledReason:t,hasExceededFileUploadLimit:e,hasPendingFiles:n,hasTextContent:s,isTextContentTooLong:o,hasAsyncTaskPending:r,noSourceSelectedDr:a,isDeepResearchTaskStreaming:l,isThreadHardBlocked:c})=>t||(c?"rate_limit_hard_block":e?"exceeds_remaining_file_uploads":n?"file_upload_pending":r?l?void 0:"async_task_pending":s?o?"text_content_too_long":a?"no_source_selected_dr":void 0:"empty_text_content");function vst(t,e){const n=Math.ceil(e/4);return typeof(t==null?void 0:t.maxTokens)=="number"&&n>t.maxTokens}function Sst(t,e){return t?e===void 0?!0:e.includes(t):!1}const Wde=t=>{switch(t){case"readOnlyConversation":return{placeholder:jo.readOnlyConversationPlaceholder,isLastingDisabledStyle:!0};case"pimBlock":return{placeholder:jo.pimBlockPlaceholder,isLastingDisabledStyle:!0};case"workspaceDisallowsGizmo":return{placeholder:jo.disallowedByWorkspacePlaceholder,isLastingDisabledStyle:!0};case"noModelsAvailable":return{placeholder:jo.noModelsAvailablePlaceholder,isLastingDisabledStyle:!0};case"requiresPluginsToBeInstalled":return{placeholder:jo.requiresPluginsToBeInstalled,isLastingDisabledStyle:!0};case"loadingPlugins":return{placeholder:jo.loading,isLastingDisabledStyle:!0};case"noTestGizmoId":return{placeholder:jo.noTestGizmoId,isLastingDisabledStyle:!0};case"sharedHealthConversation":return{placeholder:jo.readOnlyConversationPlaceholder,isLastingDisabledStyle:!0}}return null},Cst=t=>{switch(t){case"sharedHealthConversation":return jo.sharedHealthConversationTooltip;default:return null}},qde="OAI-Echo-Logs",cu={FOCUS_IN:0,FOCUS_OUT:1,COPY:2,PASTE:3,TOUCH_START:4,TOUCH_END:5},oD=[];function uu(t){return()=>{oD.push({type:t,ts:Math.round(performance.now())})}}const Kde={focusin:uu(cu.FOCUS_IN),focusout:uu(cu.FOCUS_OUT),copy:uu(cu.COPY),paste:uu(cu.PASTE),touchstart:uu(cu.TOUCH_START),touchend:uu(cu.TOUCH_END)};function Yde(t){const e=t!=null?t:document.getElementById($1);for(const[n,s]of Object.entries(Kde))e==null||e.removeEventListener(n,s),e==null||e.addEventListener(n,s,{passive:!0})}function L_(){return{[qde]:oD.slice(0,10).map(t=>"".concat(t.type,",").concat(t.ts)).join(",")}}var Zde=typeof globalThis=="object"?globalThis:typeof self=="object"?self:typeof window=="object"?window:typeof global=="object"?global:{},Jl="1.6.0",F4=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function Qde(t){var e=new Set([t]),n=new Set,s=t.match(F4);if(!s)return function(){return!1};var o={major:+s[1],minor:+s[2],patch:+s[3],prerelease:s[4]};if(o.prerelease!=null)return function(c){return c===t};function r(l){return n.add(l),!1}function a(l){return e.add(l),!0}return function(c){if(e.has(c))return!0;if(n.has(c))return!1;var u=c.match(F4);if(!u)return r(c);var d={major:+u[1],minor:+u[2],patch:+u[3],prerelease:u[4]};return d.prerelease!=null||o.major!==d.major?r(c):o.major===0?o.minor===d.minor&&o.patch<=d.patch?a(c):r(c):o.minor<=d.minor?a(c):r(c)}}var Jde=Qde(Jl),Xde=Jl.split(".")[0],$m=Symbol.for("opentelemetry.js.api."+Xde),Gm=Zde;function Wp(t,e,n,s){var o;s===void 0&&(s=!1);var r=Gm[$m]=(o=Gm[$m])!==null&&o!==void 0?o:{version:Jl};if(!s&&r[t]){var a=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+t);return n.error(a.stack||a.message),!1}if(r.version!==Jl){var a=new Error("@opentelemetry/api: Registration of version v"+r.version+" for "+t+" does not match previously registered API v"+Jl);return n.error(a.stack||a.message),!1}return r[t]=e,n.debug("@opentelemetry/api: Registered a global for "+t+" v"+Jl+"."),!0}function Cc(t){var e,n,s=(e=Gm[$m])===null||e===void 0?void 0:e.version;if(!(!s||!Jde(s)))return(n=Gm[$m])===null||n===void 0?void 0:n[t]}function qp(t,e){e.debug("@opentelemetry/api: Unregistering a global for "+t+" v"+Jl+".");var n=Gm[$m];n&&delete n[t]}var efe=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var s=n.call(t),o,r=[],a;try{for(;(e===void 0||e-- >0)&&!(o=s.next()).done;)r.push(o.value)}catch(l){a={error:l}}finally{try{o&&!o.done&&(n=s.return)&&n.call(s)}finally{if(a)throw a.error}}return r},tfe=function(t,e,n){if(n||arguments.length===2)for(var s=0,o=e.length,r;s<o;s++)(r||!(s in e))&&(r||(r=Array.prototype.slice.call(e,0,s)),r[s]=e[s]);return t.concat(r||Array.prototype.slice.call(e))},nfe=(function(){function t(e){this._namespace=e.namespace||"DiagComponentLogger"}return t.prototype.debug=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return If("debug",this._namespace,e)},t.prototype.error=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return If("error",this._namespace,e)},t.prototype.info=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return If("info",this._namespace,e)},t.prototype.warn=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return If("warn",this._namespace,e)},t.prototype.verbose=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return If("verbose",this._namespace,e)},t})();function If(t,e,n){var s=Cc("diag");if(s)return n.unshift(e),s[t].apply(s,tfe([],efe(n),!1))}var go;(function(t){t[t.NONE=0]="NONE",t[t.ERROR=30]="ERROR",t[t.WARN=50]="WARN",t[t.INFO=60]="INFO",t[t.DEBUG=70]="DEBUG",t[t.VERBOSE=80]="VERBOSE",t[t.ALL=9999]="ALL"})(go||(go={}));function sfe(t,e){t<go.NONE?t=go.NONE:t>go.ALL&&(t=go.ALL),e=e||{};function n(s,o){var r=e[s];return typeof r=="function"&&t>=o?r.bind(e):function(){}}return{error:n("error",go.ERROR),warn:n("warn",go.WARN),info:n("info",go.INFO),debug:n("debug",go.DEBUG),verbose:n("verbose",go.VERBOSE)}}var ofe=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var s=n.call(t),o,r=[],a;try{for(;(e===void 0||e-- >0)&&!(o=s.next()).done;)r.push(o.value)}catch(l){a={error:l}}finally{try{o&&!o.done&&(n=s.return)&&n.call(s)}finally{if(a)throw a.error}}return r},rfe=function(t,e,n){if(n||arguments.length===2)for(var s=0,o=e.length,r;s<o;s++)(r||!(s in e))&&(r||(r=Array.prototype.slice.call(e,0,s)),r[s]=e[s]);return t.concat(r||Array.prototype.slice.call(e))},afe="diag",ya=(function(){function t(){function e(o){return function(){for(var r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];var l=Cc("diag");if(l)return l[o].apply(l,rfe([],ofe(r),!1))}}var n=this,s=function(o,r){var a,l,c;if(r===void 0&&(r={logLevel:go.INFO}),o===n){var u=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return n.error((a=u.stack)!==null&&a!==void 0?a:u.message),!1}typeof r=="number"&&(r={logLevel:r});var d=Cc("diag"),f=sfe((l=r.logLevel)!==null&&l!==void 0?l:go.INFO,o);if(d&&!r.suppressOverrideMessage){var m=(c=new Error().stack)!==null&&c!==void 0?c:"<failed to generate stacktrace>";d.warn("Current logger will be overwritten from "+m),f.warn("Current logger will overwrite one already registered from "+m)}return Wp("diag",f,n,!0)};n.setLogger=s,n.disable=function(){qp(afe,n)},n.createComponentLogger=function(o){return new nfe(o)},n.verbose=e("verbose"),n.debug=e("debug"),n.info=e("info"),n.warn=e("warn"),n.error=e("error")}return t.instance=function(){return this._instance||(this._instance=new t),this._instance},t})(),ife=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var s=n.call(t),o,r=[],a;try{for(;(e===void 0||e-- >0)&&!(o=s.next()).done;)r.push(o.value)}catch(l){a={error:l}}finally{try{o&&!o.done&&(n=s.return)&&n.call(s)}finally{if(a)throw a.error}}return r},lfe=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],s=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&s>=t.length&&(t=void 0),{value:t&&t[s++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},cfe=(function(){function t(e){this._entries=e?new Map(e):new Map}return t.prototype.getEntry=function(e){var n=this._entries.get(e);if(n)return Object.assign({},n)},t.prototype.getAllEntries=function(){return Array.from(this._entries.entries()).map(function(e){var n=ife(e,2),s=n[0],o=n[1];return[s,o]})},t.prototype.setEntry=function(e,n){var s=new t(this._entries);return s._entries.set(e,n),s},t.prototype.removeEntry=function(e){var n=new t(this._entries);return n._entries.delete(e),n},t.prototype.removeEntries=function(){for(var e,n,s=[],o=0;o<arguments.length;o++)s[o]=arguments[o];var r=new t(this._entries);try{for(var a=lfe(s),l=a.next();!l.done;l=a.next()){var c=l.value;r._entries.delete(c)}}catch(u){e={error:u}}finally{try{l&&!l.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}return r},t.prototype.clear=function(){return new t},t})(),ufe=Symbol("BaggageEntryMetadata"),dfe=ya.instance();function ffe(t){return t===void 0&&(t={}),new cfe(new Map(Object.entries(t)))}function wst(t){return typeof t!="string"&&(dfe.error("Cannot create baggage metadata from unknown type: "+typeof t),t=""),{__TYPE__:ufe,toString:function(){return t}}}function rD(t){return Symbol.for(t)}var mfe=(function(){function t(e){var n=this;n._currentContext=e?new Map(e):new Map,n.getValue=function(s){return n._currentContext.get(s)},n.setValue=function(s,o){var r=new t(n._currentContext);return r._currentContext.set(s,o),r},n.deleteValue=function(s){var o=new t(n._currentContext);return o._currentContext.delete(s),o}}return t})(),pfe=new mfe,uf=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,o){s.__proto__=o}||function(s,o){for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(s[r]=o[r])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function s(){this.constructor=e}e.prototype=n===null?Object.create(n):(s.prototype=n.prototype,new s)}})(),gfe=(function(){function t(){}return t.prototype.createHistogram=function(e,n){return wfe},t.prototype.createCounter=function(e,n){return Cfe},t.prototype.createUpDownCounter=function(e,n){return kfe},t.prototype.createObservableGauge=function(e,n){return Tfe},t.prototype.createObservableCounter=function(e,n){return Efe},t.prototype.createObservableUpDownCounter=function(e,n){return Mfe},t.prototype.addBatchObservableCallback=function(e,n){},t.prototype.removeBatchObservableCallback=function(e){},t})(),Rw=(function(){function t(){}return t})(),hfe=(function(t){uf(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.add=function(n,s){},e})(Rw),_fe=(function(t){uf(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.add=function(n,s){},e})(Rw),xfe=(function(t){uf(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.record=function(n,s){},e})(Rw),Ow=(function(){function t(){}return t.prototype.addCallback=function(e){},t.prototype.removeCallback=function(e){},t})(),yfe=(function(t){uf(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e})(Ow),bfe=(function(t){uf(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e})(Ow),vfe=(function(t){uf(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e})(Ow),Sfe=new gfe,Cfe=new hfe,wfe=new xfe,kfe=new _fe,Efe=new yfe,Tfe=new bfe,Mfe=new vfe,Afe={get:function(t,e){if(t!=null)return t[e]},keys:function(t){return t==null?[]:Object.keys(t)}},Nfe={set:function(t,e,n){t!=null&&(t[e]=n)}},Ife=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var s=n.call(t),o,r=[],a;try{for(;(e===void 0||e-- >0)&&!(o=s.next()).done;)r.push(o.value)}catch(l){a={error:l}}finally{try{o&&!o.done&&(n=s.return)&&n.call(s)}finally{if(a)throw a.error}}return r},jfe=function(t,e,n){if(n||arguments.length===2)for(var s=0,o=e.length,r;s<o;s++)(r||!(s in e))&&(r||(r=Array.prototype.slice.call(e,0,s)),r[s]=e[s]);return t.concat(r||Array.prototype.slice.call(e))},Pfe=(function(){function t(){}return t.prototype.active=function(){return pfe},t.prototype.with=function(e,n,s){for(var o=[],r=3;r<arguments.length;r++)o[r-3]=arguments[r];return n.call.apply(n,jfe([s],Ife(o),!1))},t.prototype.bind=function(e,n){return n},t.prototype.enable=function(){return this},t.prototype.disable=function(){return this},t})(),Rfe=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var s=n.call(t),o,r=[],a;try{for(;(e===void 0||e-- >0)&&!(o=s.next()).done;)r.push(o.value)}catch(l){a={error:l}}finally{try{o&&!o.done&&(n=s.return)&&n.call(s)}finally{if(a)throw a.error}}return r},Ofe=function(t,e,n){if(n||arguments.length===2)for(var s=0,o=e.length,r;s<o;s++)(r||!(s in e))&&(r||(r=Array.prototype.slice.call(e,0,s)),r[s]=e[s]);return t.concat(r||Array.prototype.slice.call(e))},Uy="context",Lfe=new Pfe,D_=(function(){function t(){}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.setGlobalContextManager=function(e){return Wp(Uy,e,ya.instance())},t.prototype.active=function(){return this._getContextManager().active()},t.prototype.with=function(e,n,s){for(var o,r=[],a=3;a<arguments.length;a++)r[a-3]=arguments[a];return(o=this._getContextManager()).with.apply(o,Ofe([e,n,s],Rfe(r),!1))},t.prototype.bind=function(e,n){return this._getContextManager().bind(e,n)},t.prototype._getContextManager=function(){return Cc(Uy)||Lfe},t.prototype.disable=function(){this._getContextManager().disable(),qp(Uy,ya.instance())},t})(),Fv;(function(t){t[t.NONE=0]="NONE",t[t.SAMPLED=1]="SAMPLED"})(Fv||(Fv={}));var aD="0000000000000000",iD="00000000000000000000000000000000",Dfe={traceId:iD,spanId:aD,traceFlags:Fv.NONE},xm=(function(){function t(e){e===void 0&&(e=Dfe),this._spanContext=e}return t.prototype.spanContext=function(){return this._spanContext},t.prototype.setAttribute=function(e,n){return this},t.prototype.setAttributes=function(e){return this},t.prototype.addEvent=function(e,n){return this},t.prototype.setStatus=function(e){return this},t.prototype.updateName=function(e){return this},t.prototype.end=function(e){},t.prototype.isRecording=function(){return!1},t.prototype.recordException=function(e,n){},t})(),Lw=rD("OpenTelemetry Context Key SPAN");function Dw(t){return t.getValue(Lw)||void 0}function Bfe(){return Dw(D_.getInstance().active())}function Bw(t,e){return t.setValue(Lw,e)}function Ffe(t){return t.deleteValue(Lw)}function Ufe(t,e){return Bw(t,new xm(e))}function lD(t){var e;return(e=Dw(t))===null||e===void 0?void 0:e.spanContext()}var Hfe=/^([0-9a-f]{32})$/i,$fe=/^[0-9a-f]{16}$/i;function Gfe(t){return Hfe.test(t)&&t!==iD}function Vfe(t){return $fe.test(t)&&t!==aD}function cD(t){return Gfe(t.traceId)&&Vfe(t.spanId)}function zfe(t){return new xm(t)}var Hy=D_.getInstance(),uD=(function(){function t(){}return t.prototype.startSpan=function(e,n,s){s===void 0&&(s=Hy.active());var o=!!(n!=null&&n.root);if(o)return new xm;var r=s&&lD(s);return Wfe(r)&&cD(r)?new xm(r):new xm},t.prototype.startActiveSpan=function(e,n,s,o){var r,a,l;if(!(arguments.length<2)){arguments.length===2?l=n:arguments.length===3?(r=n,l=s):(r=n,a=s,l=o);var c=a!=null?a:Hy.active(),u=this.startSpan(e,r,c),d=Bw(c,u);return Hy.with(d,l,void 0,u)}},t})();function Wfe(t){return typeof t=="object"&&typeof t.spanId=="string"&&typeof t.traceId=="string"&&typeof t.traceFlags=="number"}var qfe=new uD,Kfe=(function(){function t(e,n,s,o){this._provider=e,this.name=n,this.version=s,this.options=o}return t.prototype.startSpan=function(e,n,s){return this._getTracer().startSpan(e,n,s)},t.prototype.startActiveSpan=function(e,n,s,o){var r=this._getTracer();return Reflect.apply(r.startActiveSpan,r,arguments)},t.prototype._getTracer=function(){if(this._delegate)return this._delegate;var e=this._provider.getDelegateTracer(this.name,this.version,this.options);return e?(this._delegate=e,this._delegate):qfe},t})(),Yfe=(function(){function t(){}return t.prototype.getTracer=function(e,n,s){return new uD},t})(),Zfe=new Yfe,U4=(function(){function t(){}return t.prototype.getTracer=function(e,n,s){var o;return(o=this.getDelegateTracer(e,n,s))!==null&&o!==void 0?o:new Kfe(this,e,n,s)},t.prototype.getDelegate=function(){var e;return(e=this._delegate)!==null&&e!==void 0?e:Zfe},t.prototype.setDelegate=function(e){this._delegate=e},t.prototype.getDelegateTracer=function(e,n,s){var o;return(o=this._delegate)===null||o===void 0?void 0:o.getTracer(e,n,s)},t})(),H4;(function(t){t[t.NOT_RECORD=0]="NOT_RECORD",t[t.RECORD=1]="RECORD",t[t.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"})(H4||(H4={}));var $4;(function(t){t[t.INTERNAL=0]="INTERNAL",t[t.SERVER=1]="SERVER",t[t.CLIENT=2]="CLIENT",t[t.PRODUCER=3]="PRODUCER",t[t.CONSUMER=4]="CONSUMER"})($4||($4={}));var ym;(function(t){t[t.UNSET=0]="UNSET",t[t.OK=1]="OK",t[t.ERROR=2]="ERROR"})(ym||(ym={}));var kst=D_.getInstance(),Est=ya.instance(),Qfe=(function(){function t(){}return t.prototype.getMeter=function(e,n,s){return Sfe},t})(),Jfe=new Qfe,$y="metrics",Xfe=(function(){function t(){}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.setGlobalMeterProvider=function(e){return Wp($y,e,ya.instance())},t.prototype.getMeterProvider=function(){return Cc($y)||Jfe},t.prototype.getMeter=function(e,n,s){return this.getMeterProvider().getMeter(e,n,s)},t.prototype.disable=function(){qp($y,ya.instance())},t})(),Tst=Xfe.getInstance(),eme=(function(){function t(){}return t.prototype.inject=function(e,n){},t.prototype.extract=function(e,n){return e},t.prototype.fields=function(){return[]},t})(),Fw=rD("OpenTelemetry Baggage Key");function dD(t){return t.getValue(Fw)||void 0}function tme(){return dD(D_.getInstance().active())}function nme(t,e){return t.setValue(Fw,e)}function sme(t){return t.deleteValue(Fw)}var Gy="propagation",ome=new eme,rme=(function(){function t(){this.createBaggage=ffe,this.getBaggage=dD,this.getActiveBaggage=tme,this.setBaggage=nme,this.deleteBaggage=sme}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.setGlobalPropagator=function(e){return Wp(Gy,e,ya.instance())},t.prototype.inject=function(e,n,s){return s===void 0&&(s=Nfe),this._getGlobalPropagator().inject(e,n,s)},t.prototype.extract=function(e,n,s){return s===void 0&&(s=Afe),this._getGlobalPropagator().extract(e,n,s)},t.prototype.fields=function(){return this._getGlobalPropagator().fields()},t.prototype.disable=function(){qp(Gy,ya.instance())},t.prototype._getGlobalPropagator=function(){return Cc(Gy)||ome},t})(),Mst=rme.getInstance(),Vy="trace",ame=(function(){function t(){this._proxyTracerProvider=new U4,this.wrapSpanContext=zfe,this.isSpanContextValid=cD,this.deleteSpan=Ffe,this.getSpan=Dw,this.getActiveSpan=Bfe,this.getSpanContext=lD,this.setSpan=Bw,this.setSpanContext=Ufe}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.setGlobalTracerProvider=function(e){var n=Wp(Vy,this._proxyTracerProvider,ya.instance());return n&&this._proxyTracerProvider.setDelegate(e),n},t.prototype.getTracerProvider=function(){return Cc(Vy)||this._proxyTracerProvider},t.prototype.getTracer=function(e,n){return this.getTracerProvider().getTracer(e,n)},t.prototype.disable=function(){qp(Vy,ya.instance()),this._proxyTracerProvider=new U4},t})(),fD=ame.getInstance();function Ast(t,e,n,s,o){const r=Oc(),a=cme(t,e,s,o),l=mD(e,n,a);return xe("1377659296")?zL(l,{ctx:r,turnTracker:e,threadId:"threadId"in t?t.threadId:void 0,clientThreadId:o,signal:s,turnTraceId:e.turn_trace_id}):l}function Nst(t,e,n,s,o){const r=Oc(),{conversationId:a,resumeToken:l,model:c}=t;let u=gD({conversationId:a,resumeToken:l,model:c,turnTracker:e,offset:0,signal:s!=null?s:null});u=Hw(u,{model:c,turnTracker:e,signal:s!=null?s:null}),u=hD(u,{turnTracker:e,prepareState:null,signal:s!=null?s:null,f_completion:!0});const m=jw(u,g=>{e.stream_encoding=g}),p=mD(e,n,pD(m));return xe("1377659296")?zL(p,{ctx:r,turnTracker:e,threadId:Lt(a),signal:s}):p}const ime=1e3*30,lme=1e3*30,jf=fD.getTracer("completion");function zy(t,e){Fe.count(Ue.DEFAULT,t,[{key:"prepare_sent",value:e&&e!=="none"?"true":"false"},{key:"prepare_succeeded",value:e==="success"?"true":"false"},{key:"prepare_failed",value:e==="failure"?"true":"false"}])}function mD(t,e,n){return po(this,null,function*(){var h;let s=!1,o=!1,r=!1,a=!1,l,c,u,d,f;jf.startActiveSpan("completion.response",S=>{l=jf.startSpan("completion.first_response"),c=jf.startSpan("completion.first_token_including_tool_calls"),u=jf.startSpan("completion.first_token_including_visible_content"),d=jf.startSpan("completion.first_token"),f=S});const m=Date.now();let p=!1,g=setTimeout(()=>{V.logEvent("SSE Response Took Too Long to Come Back",{}),t.logCompletion({type:gm.Error,error:{reason:"timeout",message:"SSE Response Took Too Long to Come Back"}}),p=!0},ime);try{e==null||e.logTimingOnce("prompt_submitted");try{for(var _=Ao(n),x,b,y;x=!(b=yield new dn(_.next())).done;x=!1){const S=b.value;if(yield S,S.type==="message"&&S.message.id){const C={id:S.message.id,status:S.message.status,role:S.message.author.role,contentType:S.message.content.content_type,recipient:S.message.recipient,channel:S.message.channel};t.messages[S.message.id]=C}S.type!=="connected"&&g&&(clearTimeout(g),g=null),S.type!=="connected"&&p&&(p=!1,t.logger.info("Late message received after ".concat(Date.now()-m,"ms"),t.createLogPayload()),Fe.count(Ue.DEFAULT,"conversation.stream.late_message_received",[{key:"trigger",value:(h=t.trigger)!=null?h:"null"}])),S.type==="message"&&(t.onMessageUpdate(S.message),s||(s=!0,l==null||l.end(),e==null||e.logTimingOnce("first_response")),!o&&S.message.author.role===dt.Assistant&&(o=!0,c==null||c.end(),e==null||e.logTimingOnce("first_assistant_token")),!r&&S.message.author.role===dt.Assistant&&ER(S.message)&&(r=!0,u==null||u.end(),e==null||e.logTimingOnce("first_visible_content_token")),!a&&S.message.author.role===dt.Assistant&&PR(S.message)&&(a=!0,d==null||d.end(),e==null||e.logTimingOnce("first_message_token"))),S.type==="perf_stats"&&t.addServerPerfStats(S),S.type==="server_ste_metadata"&&t.addServerSteMetadata(S),S.type==="message_marker"&&t.onMessageMarker(S),S.type==="done"&&t.onStreamClose()}}catch(b){y=[b]}finally{try{x&&(b=_.return)&&(yield new dn(b.call(_)))}finally{if(y)throw y[0]}}}catch(S){throw g&&(clearTimeout(g),g=null),S}finally{f==null||f.end()}})}function cme(t,e,n,s){return po(this,null,function*(){var w;const{conduitToken:o,prepareState:r,model:a,f_completion:l,f_search:c,asyncTaskId:u}=t,d=Tr(3010482349,"".concat(a,"-AAAA"))||Tr(3240390095,"".concat(a,"-AAAA")),f=mt()?d?"https://chatgpt.com/backend-alt":"https://chatgpt.com/backend-api":"https://chatgpt.com/backend-anon";let m="".concat(f,"/conversation");if(l&&(m="".concat(f,"/f/conversation")),t.pulseCompletionParams&&(m="".concat(f,"/").concat(Nde(t.pulseCompletionParams))),u&&u.startsWith("thinking"))return yield new dn(ume(f,t,e.turn_trace_id));const p=_me(m);if(t.pulseCompletionParams&&Ide(p,t.pulseCompletionParams),xe("212625335")&&p.searchParams.set("debug","true"),e.onSentUserMessage(),s){const k=At(s),E=(w=k==null?void 0:k.lastPrepareParentMessageId)!=null?w:null;if(E!=null){if(t.f_completion&&E!==t.parentMessageId){const T=ve.getBranch(k,t.parentMessageId).length;Ve.addAction("fast_conversation.parent_message_id_mismatch",{client_thread_id:String(s),model:a,prepare_parent_message_id:E,request_parent_message_id:t.parentMessageId,completion_type:String(t.completionType),has_conduit_token:t.conduitToken!=null,branch_length:T})}pt(s,T=>{T.lastPrepareParentMessageId=null})}}const g=as()?yield new dn(WL()):void 0,h=()=>N(N(N(N({},L_()),Ew(t.chatReq,t.turnstileToken,t.proofToken,null)),o?{"x-conduit-token":o}:{}),e.turn_trace_id?{"x-oai-turn-trace-id":e.turn_trace_id}:{}),_=()=>Uw(t,g),x=async()=>{const k=await Cde(t.completionMetadata);if(t.chatReq=k.chatReq,t.turnstileToken=k.turnstileToken,t.proofToken=k.proofToken,k.chatReq.force_login)throw new Error("force_login during retry");return{headers:h(),body:_()}};let b=tD(p.toString(),{method:"POST",headers:h(),body:_(),signal:n,observer:{onEvent:k=>{e.onStreamEvent(k.byteLength,k.isDoneEvent)}},shouldRetry:k=>(Vm(k)||k instanceof Vn&&$w(k.status))&&Je("603105008").get("retry_stream_requests",!1),retryConfig:Gw(),onRetry:x});b=Hw(b,{model:a,turnTracker:e,signal:n!=null?n:null}),b=pme(b,{model:a,turnTracker:e,signal:n!=null?n:null}),b=hD(b,{turnTracker:e,prepareState:r,signal:n!=null?n:null,f_completion:l!=null?l:null}),l&&s&&pt(s,k=>{k.stopConduitToken=o!=null?o:null,k.prepareState=null,k.lastPrepareTimestamp=null});const C=jw(b,k=>{e.stream_encoding=k});yield*Mf(pD(C,{onPrematureTermination:()=>{e.onPrematureStreamTermination()}}))})}const ume=async(t,e,n)=>{const s=N(N(N({},L_()),Ew(e.chatReq,e.turnstileToken,e.proofToken,null)),n?{"x-oai-turn-trace-id":n}:{}),o=Uw(e);try{await nc.post("".concat(t,"/f/steer_turn"),o,{additionalHeaders:s,authOption:Ot.SendIfAvailable})}catch(r){}},dme=t=>{let e=null;const n=new TextEncoder,s=WY(()=>{},()=>{},a=>{a.data!==""&&(e=a)}),r=t.replace(/\r\n/g,"\n").split("\n");for(const a of r){const l=a.indexOf(":");s(n.encode(a),l)}return r[r.length-1]!==""&&s(n.encode(""),-1),e};function fme(t,e){return ZL((n,s,o)=>{const r=SM(),a=RR(t),l=r.onConnect(U=>{e.logger.info("websocket.connection.connected",U),Ve.addAction("websocket.connection.connected",U)}),c=r.onDisconnect(U=>{e.logger.info("websocket.connection.disconnected",U),Ve.addAction("websocket.connection.disconnected",U)}),u=a.onSubscribe(U=>{e.logger.info("websocket.topic.subscribe",U),Ve.addAction("websocket.topic.subscribe",U)});a.subscribe({includeAllHistory:!0});const d=mn("339548201",{}),f=d.get("log_every_n_events",0),m=d.get("log_every_ms",0),p=d.get("lag_log_threshold_ms",2e3),g=d.get("lag_log_interval_ms",1e4),h=d.get("ignore_parent_id_mismatch",!1);let _=0,x=null;const b=new Set,y=[];let S=!1,C=!1,w=null;const k=U=>{y.length===10&&(y.shift(),S=!0),y.push(U!=null?U:"n/a")},E=()=>S?["<omitted>",...y]:[...y],T=(U,H)=>{e.logWsStreamSummary(t,_,U,H,E())};let M=null;m>0&&(M=setInterval(()=>{T("periodic_time")},m));const A=()=>{C||(C=!0,Fe.hist(Ue.DEFAULT,"conversation.turn_topic.stream_item_count",[],_),M&&clearInterval(M),w&&clearTimeout(w),l==null||l(),c==null||c(),u==null||u(),B==null||B(),R==null||R(),L==null||L(),O==null||O(),a.unsubscribe())},I=()=>{A(),o(new Vn("ws://"+t,0,{error:Do},void 0,new Error("Missed messages on ws topic")))},j=()=>{w&&clearTimeout(w),w=setTimeout(()=>{C||(T("idle_timeout"),Fe.count(Ue.DEFAULT,"conversation.turn_topic.idle_timeout"),I())},lme)};j();const R=a.onPotentialMissedMessages(()=>{T("recovery_failed"),Fe.count(Ue.DEFAULT,"conversation.turn_topic.recovery_failed"),I()}),O=a.onReconnect(()=>{T("ws_reconnect")}),L=a.onDisconnect(()=>{T("ws_disconnect")}),B=a.onMessage(U=>{var H,$;if(j(),U.type==="conversation-turn-stream"&&U.payload.type==="stream-item"){const{stream_item_id:F,parent_stream_item_id:z,encoded_item:W,server_timestamp_ms:Y}=U.payload;if(k(F),typeof F=="string"&&b.has(F))T("stream_item_id_duplicate"),Fe.count(Ue.DEFAULT,"conversation.turn_topic.stream_item_id_duplicate");else if(z&&!b.has(z)){if(T("stream_item_parent_mismatch"),Fe.count(Ue.DEFAULT,"conversation.turn_topic.stream_item_parent_mismatch"),!h){I();return}}else z&&x&&z!==x&&Fe.count(Ue.DEFAULT,"conversation.turn_topic.stream_item_parent_interleaved");F&&(b.add(F),x=F),_++;const Z=typeof Y=="number"&&Number.isFinite(Y)?Y:null;e.onWsSample({topicId:t,streamItemId:F,parentStreamItemId:z,streamItemIndex:_,serverTimestampMs:Z,lagLogThresholdMs:p,lagLogIntervalMs:g}),f>0&&_%f===0&&T("periodic_count"),e.onStreamEvent(W.length,!1);const J=dme(W);if(!(J!=null&&J.data)||J.data==="[DONE]")return;const ne=JSON.parse(J==null?void 0:J.data);if(ne.error){const ie=typeof ne.error_code=="string"?ne.error_code:void 0,fe=new Error(ne.error);V.logValueEventWithStatsig({segmentEventName:"raw_request_stream_error",statsigEventName:"chatgpt_raw_request_stream_error",data:{errorMessage:fe.message,errorCode:ie,isNetworkError:Vm(fe),isErrorInMessageData:!0,messageData:ne,transport:"ws"}}),T("payload_error",fe.message),o(Vn.createWithErrorMessage((H=SM().ws.url)!=null?H:"ws","server",ne.error,void 0,fe,ie)),A();return}if(ne.type==="message_stream_complete"){e.onStreamEvent(0,!0),T("done"),s(),A();return}n({event:($=J.event)!=null?$:void 0,data:ne})}})})}const mme=t=>{if(!t||typeof t!="object")return!1;const e=t;return e.type==="stream_handoff"&&Array.isArray(e.options)&&e.options.every(n=>typeof n=="object"&&typeof n.type=="string")};function pme(t,e){let n=!1;return Sde(t,s=>{if("data"in s&&mme(s.data)&&!n){for(const o of s.data.options)if(o.type==="subscribe_ws_topic")return e.turnTracker.stream_protocol="ws",n=!0,Hw(fme(o.topic_id,e.turnTracker),{model:e.model,turnTracker:e.turnTracker,signal:e.signal})}return null})}function pD(n){return po(this,arguments,function*(t,e={}){var o,r,a,l,m;let s=!1;try{for(var c=Ao(t),u,d,f;u=!(d=yield new dn(c.next())).done;u=!1){const p=d.value;if("response"in p){const g=p.response,h=(r=(o=g==null?void 0:g.headers)==null?void 0:o.get("Cf-Ray"))!=null?r:null,_=(l=(a=g==null?void 0:g.headers)==null?void 0:a.get("X-Conduit-Token"))!=null?l:null;yield{type:"connected",serverRequestId:h,interruptConversationToken:_}}else{const g=gme(p.data);g&&(g.type==="done"&&(s=!0),yield g)}}}catch(d){f=[d]}finally{try{u&&(d=c.return)&&(yield new dn(d.call(c)))}finally{if(f)throw f[0]}}s||((m=e.onPrematureTermination)==null||m.call(e),yield{type:"done"})})}function Uw(t,e){var s,o,r,a,l,c,u,d;const n="threadId"in t?t.threadId:void 0;return G(N({action:t.completionType,messages:t.messages.length>0?t.messages.map(Uv):void 0,continue_from_shared_conversation_id:"continueFromSharedConversationId"in t&&n==null?t.continueFromSharedConversationId:void 0,branching_from_conversation_id:"branchingFromConversationId"in t&&n==null?t.branchingFromConversationId:void 0,branching_from_message_id:"branchingFromMessageId"in t&&n==null?t.branchingFromMessageId:void 0,continue_from_shared_post_id:"continueFromSharedPostId"in t?t.continueFromSharedPostId:void 0,fork_from_shared_post:"forkFromSharedPost"in t?t.forkFromSharedPost:void 0},"sharedProjectConversationOwnerId"in t&&"sharedProjectConversationId"in t&&t.sharedProjectConversationId&&t.sharedProjectConversationOwnerId?{continue_from_shared_project_conversation_id:t.sharedProjectConversationId,shared_project_conversation_owner_id:t.sharedProjectConversationOwnerId}:{conversation_id:n}),{parent_message_id:t.parentMessageId,model:t.model,timezone_offset_min:new Date().getTimezoneOffset(),timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,variant_purpose:(s=t.completionMetadata)==null?void 0:s.variantPurpose,suggestions:(o=t.completionMetadata)!=null&&o.suggestions?t.completionMetadata.suggestions.map(f=>Au(f)):void 0,chosen_suggestion:(r=t.completionMetadata)!=null&&r.suggestion?{type:t.completionMetadata.suggestion.type,index:t.completionMetadata.suggestionIndex,source:t.completionMetadata.suggestion.type===xt.Autocomplete?t.completionMetadata.suggestion.source:void 0,user_input:t.completionMetadata.suggestion.type===xt.Autocomplete?t.completionMetadata.suggestion.userInput:void 0}:void 0,history_and_training_disabled:No(t.historyDisabled),is_do_not_remember:No(t.isDoNotRemember),conversation_mode:ur((a=t.completionMetadata)==null?void 0:a.conversationMode),force_paragen:No(t.forceParagen),force_paragen_model_slug:t.forceParagenModel,force_indepth_feedback:No(t.forceIndepthFeedback),force_rate_limit:No(t.forceRateLimit),reset_rate_limits:No(t.resetRateLimits),record_rendering:No(t.recordRendering),record_transformed_convo_json:No(t.recordTransformedConvoJson),disable_system_content_toggling:No(t.disableSystemContentToggling),enable_message_followups:t.enableMessageFollowups,source:(l=t.completionMetadata)==null?void 0:l.source,system_hints:(c=t.completionMetadata)==null?void 0:c.systemHints,prefetch_ids:(u=t.completionMetadata)==null?void 0:u.prefetchIds,attachment_mime_types:es(t.attachmentMimeTypes),partial_query:t.partialQuery?Uv(t.partialQuery):void 0,supports_buffering:!0,supported_encodings:[QL.V1],conversation_origin:es(t.conversationOrigin),atlas_conversation_surface:es(t.atlasConversationSurface),force_use_search:es(t.forceUseSearch),force_disable_features:es(t.forceDisableFeatures),client_reported_search_source:(d=t.completionMetadata)==null?void 0:d.searchSource,client_contextual_info:t.contextualInfo,paragen_stream_type_override:es(t.paragenStreamType==="none"?null:t.paragenStreamType),paragen_cot_summary_display_override:es(t.paragenCotSummaryDisplay==="none"?null:t.paragenCotSummaryDisplay),is_onboarding_conversation:No(t.isOnboardingConversation),is_visible:es(t.isVisible),override_infer_treatment:es(t.overrideInferTreatment),model_slug_stats_override:es(t.modelSlugStatsOverride),is_reasoning_skipped:No(t.isReasoningSkipped),async_task_id:es(t.asyncTaskId),force_parallel_switch:es(t.forceParallelSwitch),thinking_effort:es(t.thinkingEffort),juice_score:es(t.juiceScore),multimodal_juice_score:es(t.multimodalJuiceScore),show_all_answers:No(t.showAllAnswers),pre_retrieval_settings:es(t.preRetrievalSettings),map_search_params:es(t.mapSearchParams),nc_override:es(t.ncOverride),cpr_override:es(t.cprOverride),cm_override_slug:es(t.cmOverride),local_function_names:as()&&e?[...e]:void 0,r2xg7vml:es(t.r2xg7vml),zafn3kp8:es(t.zafn3kp8)})}function Uv(t){let e=t;return t.clientMetadata&&(e=N({},t),delete e.clientMetadata),e}function No(t){if(t===!0)return t}function es(t){if(t!=null)return t}function gme(t){var e,n,s,o,r,a;if("type"in t){switch(t.type){case"gizmo_inline_review":return{type:"gizmo_inline_review",gizmoId:t.gizmo_id};case"title_generation":return{type:"title_generation",title:t.title,conversation_id:t.conversation_id};case"moderation":return{type:"moderation",conversationId:t.conversation_id,messageId:t.message_id,isCompletion:t.is_completion,flagged:(e=t.moderation_response.flagged)!=null?e:!1,blocked:(n=t.moderation_response.blocked)!=null?n:!1,shouldDisableConversation:!!t.moderation_response.should_disable_conversation,disclaimers:ur((s=t.moderation_response.disclaimers)!=null?s:void 0),metadata:(o=t.moderation_response.metadata)!=null?o:void 0};case"url_moderation":return{type:"url_moderation",conversationId:t.conversation_id,messageId:t.message_id,url:t.url_moderation_result.full_url,isSafe:t.url_moderation_result.is_safe};case"num_variants_in_stream":return{type:"num_variants_in_stream",num_variants_in_stream:t.num_variants_in_stream,display_treatment:(r=t.display_treatment)!=null?r:void 0};case"input_message":return{type:"input_message",message:t.input_message,conversationId:t.conversation_id};case"display_crisis_helpline_message":return{type:"display_crisis_helpline_message",text:t.text,links:ur((a=t.links)!=null?a:[]),conversationId:t.conversation_id,messageId:t.message_id};case"toast":case"perf_stats":case"conversation_detail_metadata":case"beacon_ui_response":case"resume_conversation_token":case"conversation_async_status":case"server_ste_metadata":case"message_marker":case"survey_campaign_effect":case"display_crisis_helpline_modal":case"ads":return t;case"message_stream_complete":return{type:"done"}}return}if("message"in t)return{type:"message",message:t.message,conversationId:t.conversation_id}}async function Ist(t,e,n=[],s,o){var O,L,B,U,H,$,F,z;if(!Kle(!0)||!qle()||Je("1925940714").get("disable-convo-2",!1))return;const a=Lt(t),l=At(t),c=Pt(t);if(l!=null&&l.prepareRequestBlocked)return;const u=3e3;if(o.delayAfterCompletion&&(l!=null&&l.lastCompletionFinishedTimestamp)){const W=performance.now()-l.lastCompletionFinishedTimestamp,Y=u-W;Y>0&&await new Promise(K=>setTimeout(K,Y))}const d=(O=l==null?void 0:l.conversationOrigin)!=null?O:null,f=(l==null?void 0:l.is_do_not_remember)===!0||c.startDoNotRemember===!0;let m;if(o.isRegen){const W=ve.getParentPromptNode(l);m=(L=W==null?void 0:W.id)!=null?L:""}else m=ve.getCurrentNode(l).message.id;const p=dp(),[g,h,_,x]=Kt(()=>[Z0(),qY(),HC(),KY()]),b=hs(),y=Je("1279001932").get("safe-search-default",!1),S=(B=l==null?void 0:l.conduitToken)!=null?B:null,C=(U=l==null?void 0:l.turnTraceId)!=null?U:null,w=C!=null?C:fa();C||pt(t,W=>{W.turnTraceId=w});const k=(H=l==null?void 0:l.prepareState)!=null?H:"none",E={threadId:a,prepareState:k,conduitToken:S,continueFromSharedPostId:l==null?void 0:l.continuingFromSharedPostId,forkFromSharedPost:!!(l!=null&&l.continuingFromSharedPostId),continueFromSharedConversationId:l==null?void 0:l.continuingFromSharedConversationId,branchingFromMessageId:l==null?void 0:l.branchingFromMessageId,branchingFromConversationId:l==null?void 0:l.branchingFromConversationId,sharedProjectConversationId:l==null?void 0:l.continuingFromSharedProjectConversationId,sharedProjectConversationOwnerId:($=l==null?void 0:l.sharedProjectConversationOwner)==null?void 0:$.id,isOnboardingConversation:o.isOnboardingConversation,conversationOrigin:d,atlasConversationSurface:x,isDoNotRemember:f,model:e,completionType:$C.Next,completionMetadata:{systemHints:n,conversationMode:(F=l==null?void 0:l.mode)!=null?F:{kind:Bt.PrimaryAssistant}},partialQuery:o.partialQuery,messages:[],attachmentMimeTypes:o.attachmentMimeTypes,parentMessageId:m,thinkingEffort:o.thinkingEffort,recordRendering:p.recordRendering,recordTransformedConvoJson:p.recordTransformedConvoJson,historyDisabled:g,asyncTaskId:(z=l==null?void 0:l.steeringAsyncTaskId)!=null?z:void 0,contextualInfo:Yce(),mapSearchParams:o.mapSearchParams,r2xg7vml:b?h!=null?h:y:void 0,zafn3kp8:b?_!=null?_:y:void 0},T=as()?await WL():void 0,M=Uw(E,T),A=N({"x-conduit-token":S!=null?S:"no-token"},w?{"x-oai-turn-trace-id":w}:{}),I=Tr(3010482349,"".concat(e,"-AAAA"))||Tr(3240390095,"".concat(e,"-AAAA"));if(I){pt(t,W=>{W.conduitToken=null,W.prepareState=null});return}const j=mt()?I?"https://chatgpt.com/backend-alt":"https://chatgpt.com/backend-api":"https://chatgpt.com/backend-anon";let R="".concat(j,"/f/conversation/prepare");try{pt(t,K=>{K.prepareState="sent",K.lastPrepareTimestamp=performance.now(),K.lastPrepareParentMessageId=m});const W=await nc.post(R,M,{additionalHeaders:A,authOption:Ot.SendIfAvailable}),{conduit_token:Y}=W;s(Y)}catch(W){Fe.count(Ue.DEFAULT,"conduit_f_conversation_prepare_api_error"),Ve.addError(W)}}const hme=t=>new Promise(e=>setTimeout(e,t));function Hw(t,e){return po(this,null,function*(){const{MIN_RETRY_INTERVAL:n,MAX_RETRY_INTERVAL:s,RETRY_FACTOR:o,MAX_RETRY_COUNT:r}=Gw(),{signal:a,turnTracker:l}=e;let c=!1;const u={onClose:(y,S)=>{y==="completed"&&(c=!0)}};let d,f,m=t,p=0,g;for(;m!=null;)try{try{for(var h=Ao(m),_,x,b;_=!(x=yield new dn(h.next())).done;_=!1){const y=x.value;const S="response"in y;!S&&y.data!=null&&typeof y.data=="object"&&"type"in y.data&&y.data.type==="resume_conversation_token"&&"token"in y.data&&"conversation_id"in y.data?(f=String(y.data.token),d=String(y.data.conversation_id),A4.set(d,f,l.turn_trace_id)):yield y,l.onResumeSuccessful(p,g),g=void 0,S||p++}}catch(x){b=[x]}finally{try{_&&(x=h.return)&&(yield new dn(x.call(h)))}finally{if(b)throw b[0]}}m=null,c=!0}catch(y){if(c)return;g={error:y,rawError:y instanceof Error&&"rawError"in y?y.rawError:void 0};const S=Vm(y);l.onStreamNetworkError(p,y,S);const C=y instanceof Vn&&$w(y.status);if(l.resume.currentAttemptCount<r&&!(a!=null&&a.aborted)&&f!=null&&d!=null&&(Vm(y)||C)&&Je("2489999880").get("is_resume_enabled",!1)){l.onResumeAttempted(p,g);const k=Math.min(n*o**l.resume.currentAttemptCount,s)*(.5+Math.random()*.5);l.logger.info("resume stream retry",{resume_attempt_number:l.resume.currentAttemptCount,resume_status_code:y instanceof Vn?y.status:void 0,resume_offset:p,resume_is_network_error:S,resume_is_retryable_http:C}),yield new dn(hme(k)),m=gD(G(N({},e),{observer:u,resumeToken:f,conversationId:d,offset:p}))}else{const w=y instanceof Vn&&y.status===404;throw(l.resume.currentAttemptCount>=r||w&&l.resume.currentAttemptCount>0)&&l.onResumeFailed(p,w,S,g),m=null,l.logger.info("resume stream retry failed - breaking out of loop",{resume_attempt_number:l.resume.currentAttemptCount,resume_status_code:y instanceof Vn?y.status:void 0,resume_offset:p,resume_is_network_error:S,resume_is_retryable_http:C}),y instanceof Vn&&y.status===404&&l.resume.currentAttemptCount>0?(d!=null&&A4.remove(d),Vn.createWithErrorMessage(y.url,"client",Do,void 0,y)):y}}})}function Vm(t){return t instanceof Error&&t.message===Do||typeof t=="string"&&t===Do}function $w(t){return t===408||t===409||t===425||t===429||t===502||t===504}function gD({conversationId:t,resumeToken:e,model:n,turnTracker:s,offset:o,signal:r,observer:a={}}){const l=Tr(3010482349,"".concat(n,"-AAAA"))||Tr(3240390095,"".concat(n,"-AAAA")),c=mt()?l?"https://chatgpt.com/backend-alt":"https://chatgpt.com/backend-api":"https://chatgpt.com/backend-anon",u=N({"x-conduit-token":e!=null?e:"no-token"},s.turn_trace_id?{"x-oai-turn-trace-id":s.turn_trace_id}:{}),d="".concat(c,"/f/conversation/resume"),f=D0(),m={conversation_id:t,offset:o};return tD(d,{method:"POST",headers:G(N(N(N({},L_()),f?fd({accessToken:f}):jR()),u),{"Content-Type":"application/json"}),body:m,signal:r!=null?r:void 0,observer:G(N({},a),{onEvent:g=>{var h;(h=a.onEvent)==null||h.call(a,g),s.onStreamEvent(g.byteLength,g.isDoneEvent)}}),retryConfig:Gw(),shouldRetry:g=>(Vm(g)||g instanceof Vn&&$w(g.status))&&Je("603105008").get("retry_stream_requests",!1)})}function hD(r,a){return po(this,arguments,function*(t,{turnTracker:e,prepareState:n,f_completion:s,signal:o}){try{try{for(var l=Ao(t),c,u,d;c=!(u=yield new dn(l.next())).done;c=!1){const f=u.value;yield f}}catch(u){d=[u]}finally{try{c&&(u=l.return)&&(yield new dn(u.call(l)))}finally{if(d)throw d[0]}}e.onStreamClose(),s&&zy("conduit_f_conversation_api.success",n)}catch(f){throw Fe.count(Ue.DEFAULT,"conversation_api.client_request_error"),o!=null&&o.aborted?(e.handleAbort(f),s&&zy("conduit_f_conversation_api.aborted",n)):(e.handleRawError(f instanceof Error||typeof f=="string"?f:JSON.stringify(f)),s&&zy("conduit_f_conversation_api.error",n)),f}})}function Gw(){const t=mn("3165814200");return{MIN_RETRY_INTERVAL:t.get("MIN_RETRY_INTERVAL",300),MAX_RETRY_INTERVAL:t.get("MAX_RETRY_INTERVAL",5e3),RETRY_FACTOR:t.get("RETRY_FACTOR",1.5),MAX_RETRY_COUNT:t.get("MAX_RETRY_COUNT",12)}}function _me(t){try{return new URL(t)}catch(e){return new URL(t,window.location.origin)}}const jst=Bn(()=>st(!1));function _D(t){return GC(t)&&!YY(t)}const dh=50,xme=95;function yme(t,e){if(t<=e)return t/e*dh;{const n=dh,s=xme-dh,o=t-e,a=-(dh/e)/s;return n+s*(1-Math.exp(a*o))}}class bme{constructor(){ye(this,"mostRecentCompletionRequest");ye(this,"loggedRequests",new Set)}onCompletionRequestStarted(e){this.mostRecentCompletionRequest={requestId:e,timestamp:Date.now()},this.loggedRequests.clear()}logEvent(e,n,s,o,r){var l;const a=this.mostRecentCompletionRequest;a!=null&&!this.loggedRequests.has(e)&&((l=ve.getNode(At(n),s).message.clientMetadata)==null?void 0:l.requestId)===a.requestId&&(V.logEvent(e,N({messageId:s,timeMs:Date.now()-a.timestamp},o)),r==null||r(),this.loggedRequests.add(e))}}const vme=new bme;function Sme(t){var o,r;const e=t.find(a=>{var l;return((l=a.metadata)==null?void 0:l.image_search_results)!==void 0});return((r=(o=e==null?void 0:e.metadata)==null?void 0:o.image_search_results)!=null?r:[]).slice(0,5)}function Pst(t){return{event:"attributes",data:{attributes:{isForceHide:t}}}}function Wy(t,e){return{event:"fetch.status",data:{useCases:{[t]:{started:Date.now(),status:e}}}}}function xD(t,e){switch(e){case"navlinks":return t.navlinks.length>0;case"images":return t.images.length>0;case"videos":return t.videos.length>0;case"news":return t.news.length>0}return!1}const Cme=new Set(["utm_source","utm_medium","utm_campaign","utm_term","utm_content","utm_id","utm_name","utm_creative","gclid","fbclid","igshid","msclkid","vero_id","oly_enc_id","oly_anon_id","mc_eid","mc_cid","ref","ref_src","trk","spm"]);function wme(t){if(t.hostname=t.hostname.toLowerCase().replace(/^www\./,""),/(^|\.)youtube\.com$/.test(t.hostname)||t.hostname==="youtu.be"){if(t.hostname==="youtu.be"){const s=t.pathname.replace(/^\/+/,"");t.hostname="youtube.com",t.pathname="/watch",t.searchParams.set("v",s)}const e=t.pathname.match(/^\/shorts\/([^/]+)\/?$/i);e&&(t.pathname="/watch",t.searchParams.set("v",e[1])),t.hostname!=="youtube.com"&&(t.hostname="youtube.com");const n=new Set(["t","time_continue","start","feature","si","pp","ab_channel","index","redir_token"]);for(const s of[...t.searchParams.keys()])n.has(s.toLowerCase())&&t.searchParams.delete(s)}if(t.hostname==="x.com"||t.hostname==="twitter.com"||t.hostname==="mobile.twitter.com"||t.hostname==="m.twitter.com"){t.hostname="twitter.com";const e=new Set(["s","t","ref_src"]);for(const n of[...t.searchParams.keys()])e.has(n.toLowerCase())&&t.searchParams.delete(n)}if(t.hostname==="instagram.com"||t.hostname==="m.instagram.com"){t.hostname="instagram.com";const e=new Set(["hl"]);for(const n of[...t.searchParams.keys()])e.has(n.toLowerCase())&&t.searchParams.delete(n)}}function G1(t){const e=(t!=null?t:"").trim();if(!e)return"";try{const n=/^[a-zA-Z][a-zA-Z\d+\-.]*:/.test(e),s=new URL(n?e:"http://".concat(e));s.protocol=s.protocol.toLowerCase(),s.username="",s.password="",s.hostname=s.hostname.replace(/\.$/,""),(s.protocol==="http:"&&s.port==="80"||s.protocol==="https:"&&s.port==="443")&&(s.port=""),s.hash="",s.pathname=s.pathname.replace(/\/{2,}/g,"/"),s.pathname!=="/"&&s.pathname.endsWith("/")&&(s.pathname=s.pathname.slice(0,-1)),wme(s);const o=s.searchParams,r=[],a=new Set;for(const u of o.keys()){const d=u.toLowerCase();d.startsWith("utm_")||Cme.has(d)||a.has(u)||(a.add(u),r.push([u,o.getAll(u).sort((f,m)=>f.localeCompare(m))]))}r.sort((u,d)=>u[0].localeCompare(d[0]));const l=new URLSearchParams;for(const[u,d]of r)for(const f of d)l.append(u,f);return"".concat(s.hostname.toLowerCase()).concat(s.pathname).concat(l.toString()?"?".concat(l.toString()):"").toLowerCase()}catch(n){return e.replace(/^https?:\/\//i,"").replace(/^www\./i,"").replace(/\/{2,}/g,"/").replace(/\/+$/g,"").toLowerCase()}}function cm(t,e,n){var r,a,l;if(!(e!=null&&e.length))return t;const s=[...t],o=new Map;for(let c=0;c<s.length;c++)o.set(G1(s[c].url),c);for(const c of e){const u=G1(c.url);if(!o.has(u)){const h=c.sources===void 0&&c.source!==void 0?G(N({},c),{sources:[c.source]}):c;o.set(u,s.push(h)-1);continue}const d=o.get(u);if(d===void 0)continue;let f=!0;if(c.domain!==void 0){const h=s[d].domain;(h===void 0||n&&c.domain!==h)&&(s[d]=G(N({},s[d]),{domain:c.domain}),f=!1)}c.snippet!==void 0&&c.snippet!==s[d].snippet&&(f?(s[d]=G(N({},s[d]),{snippet:c.snippet}),f=!1):s[d].snippet=c.snippet);let m=s[d];const p=m.source;p&&(m.sources===void 0||!m.sources.includes(p))&&(f&&(s[d]=N({},s[d]),m=s[d],f=!1),m.sources=(r=m.sources)!=null?r:[],m.sources.push(p));const g=[...c.source?[c.source]:[],...(a=c.sources)!=null?a:[]];if(g.length)for(const h of g)h&&(m.sources===void 0||!m.sources.includes(h))&&(f&&(s[d]=N({},s[d]),m=s[d],f=!1),m.sources=(l=m.sources)!=null?l:[],m.sources.push(h))}return s}function qy(t,e=[]){if(!t.length||!e.length)return t;const n=new Map;for(const r of e){const a=G1(r.url);a&&n.set(a,r.attribution)}let s=!1;const o=t.map(r=>{const a=G1(r.url),l=a?n.get(a):void 0;return l&&r.domain!==l?(s=!0,G(N({},r),{domain:l})):r});return s?o:t}var ac=(t=>(t[t.IN_PROGRESS=0]="IN_PROGRESS",t[t.DONE=1]="DONE",t[t.ERROR=2]="ERROR",t))(ac||{}),ua=(t=>(t[t.NOT_RUN=0]="NOT_RUN",t[t.SAFE=1]="SAFE",t[t.ADULT=2]="ADULT",t[t.FLAGGED=3]="FLAGGED",t))(ua||{});const qu={navlinks:[],images:[],videos:[],news:[],isSearchLikely:void 0,analytics:{},safeSearchOff:!1},kme=t=>({entries:{},updateFromEvent:(e,n)=>t(s=>{var a,l,c,u,d,f,m,p,g,h,_,x,b;const o=(a=s.entries[e])!=null?a:qu;let r=o;switch(n.event){case"navlinks":r=G(N({},o),{navlinks:cm(o.navlinks,(l=n.data.navlinks)!=null?l:[],!1),images:cm(o.images,(c=n.data.images)!=null?c:[],!1),videos:cm(o.videos,(u=n.data.videos)!=null?u:[],!1),news:cm(o.news,(d=n.data.news)!=null?d:[],!1)}),o.analytics.firstNavlinkFetched===void 0&&((f=n.data.navlinks)!=null?f:[]).length>0&&(r.analytics=G(N({},o.analytics),{firstNavlinkFetched:n.processTime,firstNavlinksFetchedTS:n.timestampMs}));break;case"search.classifier":r=G(N({},o),{isSearchLikely:n.data.is_search_likely}),o.analytics.firstClassifierFetched===void 0&&n.data.is_search_likely&&(r.analytics=G(N({},o.analytics),{firstClassifierFetched:n.processTime,firstClassifierFetchedTS:n.timestampMs}));break;case"attributions":r=G(N({},o),{navlinks:qy(o.navlinks,(m=n.data.attributions)!=null?m:[]),videos:qy(o.videos,(p=n.data.attributions)!=null?p:[]),news:qy(o.news,(g=n.data.attributions)!=null?g:[])});break;case"attributes":{const y=(h=n.data.attributes)!=null?h:{};r=G(N({},o),{isNoForceSearch:y.shortQueryNoOptimize!==void 0?!!y.shortQueryNoOptimize:o.isNoForceSearch,isNavlinkIntent:y.isNavlinkIntent!==void 0?!!y.isNavlinkIntent:o.isNavlinkIntent,isForceHide:y.isForceHide!==void 0?!!y.isForceHide:o.isForceHide,truncateFastNavlinks:y.truncateFastNavlinks!==void 0?Number(y.truncateFastNavlinks):o.truncateFastNavlinks});break}case"fetch.status":r=G(N({},o),{fetchingStatus:N(N({},(_=o.fetchingStatus)!=null?_:{}),(x=n.data.useCases)!=null?x:{})});break;case"log":switch(n.data.event){case"fetchSonicNavLinks.start":r=G(N({},o),{analytics:G(N({},o.analytics),{lastStartFetch:n.processTime,lastStartFetchTS:n.timestampMs,firstStartFetch:o.analytics.firstStartFetch!==void 0?o.analytics.firstStartFetch:n.processTime})});break;case"fetchBENavlinks.start":o.analytics.firstRoundtripTime===void 0&&(r=G(N({},o),{analytics:G(N({},o.analytics),{firstRoundtripTime:n.processTime})}));break;case"fetchNavlinks.finished":r=G(N({},o),{fetchingStatus:G(N({},(b=o.fetchingStatus)!=null?b:{}),{navlinks:{started:0,status:1}})});break;case"navlinkRequested":r=G(N({},o),{analytics:G(N({},o.analytics),{requestedTimeUnixEpochMs:n.timestampMs})});break;case"search_safety_safe":r=G(N({},o),{safety:1});break;case"search_safety_adult":r=G(N({},o),{safety:2});break;case"search_safety_flagged":r=G(N({},o),{safety:3});break;case"search_safety_not_run":r=G(N({},o),{safety:0});break;case"shortQueryNoOptimize":r=G(N({},o),{isNoForceSearch:!0});break;case"isNavlinkIntent":r=G(N({},o),{isNavlinkIntent:!0});break;case"safe_search_off":r=G(N({},o),{safeSearchOff:!0});break}break}return{entries:G(N({},s.entries),{[e]:r})}})}),Za=OR()(kme,Ji);function Rst(t,e){return Za(n=>{var o,r,a;if(t==null)return qu;const s=(r=(o=n.entries[t])==null?void 0:o.safeSearchOff)!=null?r:!1;return e!==void 0&&s!==e?qu:(a=n.entries[t])!=null?a:qu})}function Eme(t){Za.setState(e=>{const o=e.entries,{[t]:n}=o;return{entries:De(o,[bM(t)])}})}const Tme=8e3;async function um(t,e,n){var _,x;if(t.length===0)return;const s=Za.getState();let o=s.entries[t];if(o){if(o.safety===ua.ADULT&&n!==void 0&&n!==!!o.safeSearchOff)Eme(t),o=qu;else if(xD(o,e))return}if(((x=(_=o==null?void 0:o.fetchingStatus)==null?void 0:_[e])==null?void 0:x.started)!==void 0)return;Za.getState().updateFromEvent(t,Wy(e,ac.IN_PROGRESS));const a={query:t,classifier:!1,attributions:e!=="images",[e]:!0,is_strict:!n};let l=null,c=!1;const d=mn("3205212221").get("retry",{}),f=typeof d[e]=="number"?Math.max(Math.min(d[e],10),0):0,m=typeof d.timeoutMs=="number"?Math.max(d.timeoutMs,500):6e3;let g=typeof d.retryDelayMs=="number"?d.retryDelayMs:0;const h=async()=>{var b;try{const k="".concat(mc,"/navlinks");try{for(var y=Ao(H1(k,{method:"POST",headers:N({},L_()),body:a})),S,C,w;S=!(C=await y.next()).done;S=!1){const E=C.value;if("response"in E)continue;const T=(b=E.event)!=null?b:void 0;if(T===void 0)continue;const M=E.data;s.updateFromEvent(t,{event:T,data:M,timestampMs:Date.now()})}}catch(C){w=[C]}finally{try{S&&(C=y.return)&&await C.call(y)}finally{if(w)throw w[0]}}c=!0,Za.getState().updateFromEvent(t,Wy(e,ac.DONE))}catch(k){l=k}};for(let b=0;b<=f;b++){b>0&&(await G4(g),g=g*2+Math.random()*10);const y=h(),S=G4(m);if(await Promise.race([y,S]),c)break}!c&&l!=null&&(Za.getState().updateFromEvent(t,Wy(e,ac.ERROR)),Ve.addError(new Error("Failed to fetch navlinks",{cause:l})))}function Vw(t,e){var a,l,c,u,d,f;const n=(l=(a=t.fetchingStatus)==null?void 0:a[e])==null?void 0:l.started;if(!n)return!1;const o=Date.now()-n>Tme;return!(xD(t,e)||o||((u=(c=t.fetchingStatus)==null?void 0:c[e])==null?void 0:u.status)===ac.DONE||((f=(d=t.fetchingStatus)==null?void 0:d[e])==null?void 0:f.status)===ac.ERROR)}function fh(t,e){var s;if(!t)return!1;const n=(s=Za.getState().entries[t])!=null?s:qu;return Vw(n,e)}function G4(t){return new Promise(e=>setTimeout(e,t))}const Mme=(t,e=!1)=>{var n;return t==="web"?CM.Web:t==="cloud"?CM.Cloud:(n=LR[t])!=null?n:e?t:void 0},V1=(t,e=!1)=>Array.from(t.values()).map(n=>Mme(n,e)).filter(Boolean),V4=we({takeoverEndedMessage:{id:"DeTO2T",defaultMessage:"I took control of the virtual browser. If you're unsure what changed, ask for more context. If the task is complete, just acknowledge and wrap it up. Otherwise, please proceed."}}),Ame=t=>t?t.formatMessage(V4.takeoverEndedMessage):V4.takeoverEndedMessage.defaultMessage,yD=tn(()=>({token:null,clientThreadId:null,isOpen:!1,isResuming:!1,isTakeoverInProgress:!1,parentMessageId:null,vmId:null,abortPromise:null})),Ost=(t,e)=>{yD.setState(n=>G(N({},n),{clientThreadId:t,token:e}))},Lst=t=>{var n;const e=Nme();((n=e.clientMetadata)!=null?n:e.clientMetadata={}).isPlaceholder=!0,pt(t,s=>{fo.appendMessage(s,e)})},Dst=t=>{pt(t,e=>{fo.updateTree(e,n=>{const s=n.nodes.filter(o=>{var l,c,u;const r=(l=o.message)==null?void 0:l.metadata,a=(c=o.message)==null?void 0:c.clientMetadata;return(a==null?void 0:a.isPlaceholder)&&(r==null?void 0:r.is_takeover_ended_message)&&((u=r==null?void 0:r.system_hints)==null?void 0:u.includes(fp))});for(const o of s)n.updateNodeMetadata(o.id,{isPlaceholder:!1})})})},Nme=(t,e)=>Dc(Ame(),N(N({is_takeover_ended_message:!0,system_hints:[fp]},t&&{selected_sources:V1(t)}),e!=null?e:{})),Bst=()=>{yD.setState({token:null,clientThreadId:null,isOpen:!1,isTakeoverInProgress:!1})};function Fst(t){return t instanceof KeyboardEvent||"key"in t||"detail"in t&&t.detail===0?"keyboard":"mouse"}function Ust(t){return t!=null&&typeof t=="object"&&"then"in t&&typeof t.then=="function"}function Hst(t){return t.hash.split("#")[1]===D1}function $st(t){return t.hash.split("#")[1]===$p}function xs(t,e,n=D1,s,o,r){const a=new URL(window.location.href);r!=null&&r.ctaTab?a.searchParams.set("cta_tab",r.ctaTab):a.searchParams.delete("cta_tab"),s&&a.searchParams.set(gw,s),o?a.searchParams.set(My,o):a.searchParams.delete(My),r!=null&&r.giftModalPlan?a.searchParams.set(Ay,r.giftModalPlan):a.searchParams.delete(Ay),t({hash:n,search:a.search},{state:N(N({[j_]:e,[My]:o},r!=null&&r.isStorageUpsellActive?{[Cle]:!0}:{}),r!=null&&r.giftModalPlan?{[Ay]:r.giftModalPlan}:{})})}function Gst(t){t({hash:""})}function B_(){switch(Je("2788179050").get("plus_upsell_cta_copy","get_plus")){case"upgrade_to_plan":return yn.upgradeToPlus;case"upgrade_your_plan":return yn.upgradeYourPlan;case"upgrade":return yn.upgrade;case"get_plus":default:return yn.getPlus}}function Ime(){switch(Je("2788179050").get("pro_upsell_cta_copy","get_pro")){case"upgrade_to_plan":return yn.upgradeToPro;case"upgrade_your_plan":return yn.upgradeYourPlan;case"upgrade":return yn.upgrade;case"get_pro":default:return yn.getPro}}function Hv(){return xe("3600660324")}const jme=3600*24*30*12;function Vst(){var l;const{isLoading:t,data:e}=ut(ZY),n=v.useRef(Pme()),s=(l=e==null?void 0:e.email)!=null?l:null,o=v.useCallback(()=>{n.current&&e?V.logEventWithStatsig("Punch Out Anon To Authed Modal Shown","chatgpt_punch_out_anon_to_authed_modal_shown"):console.warn("PunchOutAnonToAuthedModal is being mounted without a user and a token")},[e]),r=c=>{V.logEventWithStatsig("Punch Out Anon To Authed Modal Continue Button Clicked","chatgpt_punch_out_anon_to_authed_modal_continue_button_clicked"),z4(),Rme(),window.location.href="/continue_from_api?token=".concat(c)},a=()=>{z4(),V.logEventWithStatsig("Punch Out Anon To Authed Modal Cancel Button Clicked","chatgpt_punch_out_anon_to_authed_modal_cancel_button_clicked")};return t?{email:null,onCancelButtonClick:a,onContinueButtonClick:r,onMount:o,state:"loading",token:null}:n.current&&s?{email:s,onCancelButtonClick:a,onContinueButtonClick:r,onMount:o,state:"show",token:n.current}:{email:null,onCancelButtonClick:a,onContinueButtonClick:r,onMount:o,state:"hide",token:null}}function Pme(){var t;return(t=Xs.getCookie(eo.PunchOutRequireAnonToAuthedToken))!=null?t:null}function z4(){return Xs.deleteCookie(eo.PunchOutRequireAnonToAuthedToken)}function Rme(){Xs.setCookie(eo.PunchOutAnonToAuthedEnabled,"true",{maxAge:jme})}function zst(){const t=v.useRef(Ome()),e=v.useCallback(()=>{t.current?V.logEventWithStatsig("No Auth Punch Out Sign In As Modal Shown","chatgpt_no_auth_punch_out_sign_in_as_modal_shown"):console.warn("PunchOutSignInAsModal is being mounted without punchOutRequireLoginInfo")},[]);return{onCancelButtonClick:()=>{V.logEventWithStatsig("No Auth Punch Out Sign In As Modal Cancel Button Clicked","chatgpt_no_auth_punch_out_sign_in_as_modal_cancel_button_clicked"),$v()},onContinueButtonClick:({token:o})=>{V.logEventWithStatsig("No Auth Punch Out Sign In As Modal Continue Button Clicked","chatgpt_no_auth_punch_out_sign_in_as_modal_continue_button_clicked"),$v(),fn({fallbackScreenHint:"login",callback:r=>{_o({location:"No Auth Punch Out Sign In As Modal",provider:r},Jt.ACCESS_FLOW_ENTRY_POINT_NO_AUTH_PUNCH_OUT_SIGN_IN_AS_MODAL)},callbackUrl:"/continue_from_api?token=".concat(o),skipLoginModal:!Va()})},onMount:e,punchOutRequireLoginInfo:t.current}}function Ome(){if(typeof window>"u")return null;const t=Xs.getCookie(eo.PunchOutRequireLoginInfo);if(!t)return null;try{const e=JSON.parse(t);return QY(e,JY),e}catch(e){$v(),e instanceof XY?console.warn("Invalid struct for punch out require login info",e):Ve.addError("Failed to parse punch out require login info",{error:e})}return null}function $v(){Xs.deleteCookie(eo.PunchOutRequireLoginInfo)}var Lme=(t=>(t.unsupported_app_version="unsupported_app_version",t))(Lme||{});const Wst=()=>{const t=xe("2335877601");return Uo?t?{isLoading:!1,isOpen:!0,modalType:"unsupported_app_version",onClose:()=>{}}:{isLoading:!1,isOpen:!1,modalType:null,onClose:null}:{isLoading:!1,isOpen:!1,modalType:null,onClose:null}},bD=We.hasSeenWindowsAppOnboarding,qst=()=>{"use forget";const t=D.c(4),{eligible:e,isLoading:n}=Ct(bD);if(!Uo||eZ()){let o;return t[0]===Symbol.for("react.memo_cache_sentinel")?(o={isLoading:!1,isOpen:!1,onClose:null},t[0]=o):o=t[0],o}if(n){let o;return t[1]===Symbol.for("react.memo_cache_sentinel")?(o={isLoading:!0,isOpen:null,onClose:null},t[1]=o):o=t[1],o}let s;return t[2]!==e?(s={isLoading:!1,isOpen:e,onClose:Dme},t[2]=e,t[3]=s):s=t[3],s};function Dme(){return kt(bD)}const Kp="default",ic=new Map,F_=new Set([Kp]),Bme="sidebar",Fme="composer";let Gv=0,Vv=0,z1=0,bm=null;typeof PerformanceObserver<"u"&&PerformanceObserver.supportedEntryTypes&&PerformanceObserver.supportedEntryTypes.includes("longtask")&&(bm=new PerformanceObserver(t=>{t.getEntries().forEach(e=>{if(e.entryType==="longtask"&&(Gv+=e.duration),e.entryType==="layout-shift"){if(e.hadRecentInput)return;Vv+=1,performance.timeOrigin&&(z1=Math.max(performance.timeOrigin+e.startTime,z1))}})}),bm.observe({entryTypes:["longtask","layout-shift"]}));const Ume=(t,e=Kp)=>{if(Sd)return;ic.has(e)||ic.set(e,new Map);const n=ic.get(e);n.has(t)||(U_(),n.set(t,{start:Date.now()}))},Hme=(t,e=Kp,n)=>{var o;if(Sd)return;const s=(o=ic.get(e))==null?void 0:o.get(t);if(s&&s.end===void 0){s.end=Date.now();const r=F_.has(e)?"visible":"hidden";Ve.addTiming("render.".concat(t,".").concat(r),{time:s.end,serialTimingGroup:n}),U_()}},$me=(t,e=Kp)=>{if(Sd)return;const n=ic.get(e);!n||!n.get(t)||(n.delete(t),U_())};let Sd=!1;const W4=()=>{if(!Sd){Sd=!0;for(const[t,e]of ic.entries()){const n=F_.has(t)?"visible":"hidden";for(const[s,o]of e.entries())o.end||Ve.addFirstTiming("render.".concat(s,".").concat(n,".timeout"))}}},Gme=3e4;let Ky;const U_=()=>{Ky&&clearTimeout(Ky),Ky=setTimeout(Vme,1e3)},Vme=()=>{if(Sd)return;let t=0,e;for(const[o,r]of ic.entries())if(F_.has(o)){if(![...r.values()].every(a=>a.end)){if(performance.now()<Gme){U_();return}Ve.addFirstTiming("render.StablePage.timeout"),W4();return}for(const[a,l]of r.entries())l.end!==void 0&&l.end>t&&(t=l.end,e=a)}Ve.addFirstTiming("render.StablePage.complete",{time:t});const n=t-performance.timeOrigin,s=tZ(n);ft.logEvent("chatgpt_web_stable_page_complete_time",void 0,{raw_duration_ms:String(n),trimmed_duration_ms:String(s)}),e!==void 0&&Ve.addAction("render.stablePage.lastComponent",{componentName:e}),Gv>0&&Ve.addFirstDurationVital("render.StablePage.longTaskDuration",Date.now(),Gv),Vv>0&&Ve.addFirstDurationVital("render.StablePage.layoutShifts",Date.now(),Vv),z1>0&&Ve.addFirstTiming("render.StablePage.lastLayoutShift",{time:z1}),bm==null||bm.disconnect(),W4(),typeof window<"u"&&window.dispatchEvent(new Event("allComponentsRendered"))},zme=t=>{F_.add(t)},da={markStart:Ume,markRendered:Hme,cancelRender:$me,trackNamespace:zme,NS_DEFAULT:Kp,NS_COMPOSER:Fme,NS_SIDEBAR:Bme};function Wme(t){const e=v.useRef(!1);return()=>{e.current||(t(),e.current=!0)}}function Kst(t=30){"use no forget";const{session:e}=Ud();return v.useMemo(()=>{const n=e==null?void 0:e.accessToken;if(!n)return!1;let s;try{const c=BP(n);s=c==null?void 0:c.pwd_auth_time}catch(c){return!1}if(s==null)return!1;const o=s<1e12?s*1e3:s,a=Date.now()-o;return a>=0&&a<=t*1e3},[e==null?void 0:e.accessToken,t])}function Yst(){"use forget";const{eligible:t,isLoading:e}=Rne();return e?"loading":t?"show":"hide"}function Zst(){const{eligible:t,isLoading:e}=Pne();return e?"loading":t?"show":"hide"}const q4=re(me,"6be2f1",20,20,!0),zw=re(me,"5ed5de",24,24);function qme(){const t=Et(),{data:e,isLoading:n,isError:s}=Lc(t==null?void 0:t.getWorkspaceId()),o=xe("616577762");return!(t!=null&&t.isEnterprisey())||o?"ENABLED":n&&e==null?"LOADING":s?"ERROR":e!=null&&e.beta_settings.wham_access?"ENABLED":"DISABLED"}var K4=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function Kme(t,e){return!!(t===e||K4(t)&&K4(e))}function Yme(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!Kme(t[n],e[n]))return!1;return!0}function Wc(t,e){e===void 0&&(e=Yme);var n=null;function s(){for(var o=[],r=0;r<arguments.length;r++)o[r]=arguments[r];if(n&&n.lastThis===this&&e(o,n.lastArgs))return n.lastResult;var a=t.apply(this,o);return n={lastResult:a,lastArgs:o,lastThis:this},a}return s.clear=function(){n=null},s}const Zme=re(me,"10ff38",20,20),Qme=/#/g,Jme=/&/g,Xme=/\//g,epe=/=/g,Ww=/\+/g,tpe=/%5e/gi,npe=/%60/gi,spe=/%7c/gi,ope=/%20/gi;function rpe(t){return encodeURI(""+t).replace(spe,"|")}function zv(t){return rpe(typeof t=="string"?t:JSON.stringify(t)).replace(Ww,"%2B").replace(ope,"+").replace(Qme,"%23").replace(Jme,"%26").replace(npe,"`").replace(tpe,"^").replace(Xme,"%2F")}function Yy(t){return zv(t).replace(epe,"%3D")}function vD(t=""){try{return decodeURIComponent(""+t)}catch(e){return""+t}}function ape(t){return vD(t.replace(Ww," "))}function ipe(t){return vD(t.replace(Ww," "))}function lpe(t=""){const e=Object.create(null);t[0]==="?"&&(t=t.slice(1));for(const n of t.split("&")){const s=n.match(/([^=]+)=?(.*)/)||[];if(s.length<2)continue;const o=ape(s[1]);if(o==="__proto__"||o==="constructor")continue;const r=ipe(s[2]||"");e[o]===void 0?e[o]=r:Array.isArray(e[o])?e[o].push(r):e[o]=[e[o],r]}return e}function cpe(t,e){return(typeof e=="number"||typeof e=="boolean")&&(e=String(e)),e?Array.isArray(e)?e.map(n=>"".concat(Yy(t),"=").concat(zv(n))).join("&"):"".concat(Yy(t),"=").concat(zv(e)):Yy(t)}function upe(t){return Object.keys(t).filter(e=>t[e]!==void 0).map(e=>cpe(e,t[e])).filter(Boolean).join("&")}const dpe=/^[\s\w\0+.-]{2,}:([/\\]{1,2})/,fpe=/^[\s\w\0+.-]{2,}:([/\\]{2})?/,mpe=/^([/\\]\s*){2,}[^/\\]/;function ppe(t,e={}){return typeof e=="boolean"&&(e={acceptRelative:e}),e.strict?dpe.test(t):fpe.test(t)||(e.acceptRelative?mpe.test(t):!1)}function gpe(t,e){const n=hpe(t),s=N(N({},lpe(n.search)),e);return n.search=upe(s),_pe(n)}const SD=Symbol.for("ufo:protocolRelative");function hpe(t="",e){const n=t.match(/^[\s\0]*(blob:|data:|javascript:|vbscript:)(.*)/i);if(n){const[,f,m=""]=n;return{protocol:f.toLowerCase(),pathname:m,href:f+m,auth:"",host:"",search:"",hash:""}}if(!ppe(t,{acceptRelative:!0}))return Y4(t);const[,s="",o,r=""]=t.replace(/\\/g,"/").match(/^[\s\0]*([\w+.-]{2,}:)?\/\/([^/@]+@)?(.*)/)||[];let[,a="",l=""]=r.match(/([^#/?]*)(.*)?/)||[];s==="file:"&&(l=l.replace(/\/(?=[A-Za-z]:)/,""));const{pathname:c,search:u,hash:d}=Y4(l);return{protocol:s.toLowerCase(),auth:o?o.slice(0,Math.max(0,o.length-1)):"",host:a,pathname:c,search:u,hash:d,[SD]:!s}}function Y4(t=""){const[e="",n="",s=""]=(t.match(/([^#?]*)(\?[^#]*)?(#.*)?/)||[]).splice(1);return{pathname:e,search:n,hash:s}}function _pe(t){const e=t.pathname||"",n=t.search?(t.search.startsWith("?")?"":"?")+t.search:"",s=t.hash||"",o=t.auth?t.auth+"@":"",r=t.host||"";return(t.protocol||t[SD]?(t.protocol||"")+"//":"")+o+r+e+n+s}var mh={exports:{}},ph={exports:{}},Z4;function qw(){return Z4||(Z4=1,(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=n;function n(s){if(s==null)throw new TypeError("Expected a string but received a ".concat(s));if(s.constructor.name!=="String")throw new TypeError("Expected a string but received a ".concat(s.constructor.name))}t.exports=e.default,t.exports.default=e.default})(ph,ph.exports)),ph.exports}var gh={exports:{}},Q4;function xpe(){return Q4||(Q4=1,(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=s;function n(o){return Object.prototype.toString.call(o)==="[object RegExp]"}function s(o,r){for(var a=0;a<r.length;a++){var l=r[a];if(o===l||n(l)&&l.test(o))return!0}return!1}t.exports=e.default,t.exports.default=e.default})(gh,gh.exports)),gh.exports}var hh={exports:{}},J4;function ype(){return J4||(J4=1,(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=function(o,r){return o.indexOf(r)!==-1};e.default=n,t.exports=e.default,t.exports.default=e.default})(hh,hh.exports)),hh.exports}var _h={exports:{}},xh={exports:{}},X4;function CD(){return X4||(X4=1,(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=n;function n(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=arguments.length>1?arguments[1]:void 0;for(var r in o)typeof s[r]>"u"&&(s[r]=o[r]);return s}t.exports=e.default,t.exports.default=e.default})(xh,xh.exports)),xh.exports}var eA;function bpe(){return eA||(eA=1,(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=a;var n=o(qw()),s=o(CD());function o(l){return l&&l.__esModule?l:{default:l}}var r={require_tld:!0,allow_underscores:!1,allow_trailing_dot:!1,allow_numeric_tld:!1,allow_wildcard:!1,ignore_max_length:!1};function a(l,c){(0,n.default)(l),c=(0,s.default)(c,r),c.allow_trailing_dot&&l[l.length-1]==="."&&(l=l.substring(0,l.length-1)),c.allow_wildcard===!0&&l.indexOf("*.")===0&&(l=l.substring(2));var u=l.split("."),d=u[u.length-1];return c.require_tld&&(u.length<2||!c.allow_numeric_tld&&!/^([a-z\u00A1-\u00A8\u00AA-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}|xn[a-z0-9-]{2,})$/i.test(d)||/\s/.test(d))||!c.allow_numeric_tld&&/^\d+$/.test(d)?!1:u.every(function(f){return!(f.length>63&&!c.ignore_max_length||!/^[a-z_\u00a1-\uffff0-9-]+$/i.test(f)||/[\uff01-\uff5e]/.test(f)||/^-|-$/.test(f)||!c.allow_underscores&&/_/.test(f))})}t.exports=e.default,t.exports.default=e.default})(_h,_h.exports)),_h.exports}var yh={exports:{}},tA;function vpe(){return tA||(tA=1,(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=d;var n=s(qw());function s(f){return f&&f.__esModule?f:{default:f}}function o(f){"@babel/helpers - typeof";return o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m},o(f)}var r="(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])",a="(".concat(r,"[.]){3}").concat(r),l=new RegExp("^".concat(a,"$")),c="(?:[0-9a-fA-F]{1,4})",u=new RegExp("^("+"(?:".concat(c,":){7}(?:").concat(c,"|:)|")+"(?:".concat(c,":){6}(?:").concat(a,"|:").concat(c,"|:)|")+"(?:".concat(c,":){5}(?::").concat(a,"|(:").concat(c,"){1,2}|:)|")+"(?:".concat(c,":){4}(?:(:").concat(c,"){0,1}:").concat(a,"|(:").concat(c,"){1,3}|:)|")+"(?:".concat(c,":){3}(?:(:").concat(c,"){0,2}:").concat(a,"|(:").concat(c,"){1,4}|:)|")+"(?:".concat(c,":){2}(?:(:").concat(c,"){0,3}:").concat(a,"|(:").concat(c,"){1,5}|:)|")+"(?:".concat(c,":){1}(?:(:").concat(c,"){0,4}:").concat(a,"|(:").concat(c,"){1,6}|:)|")+"(?::((?::".concat(c,"){0,5}:").concat(a,"|(?::").concat(c,"){1,7}|:))")+")(%[0-9a-zA-Z.]{1,})?$");function d(f){var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};(0,n.default)(f);var p=(o(m)==="object"?m.version:arguments[1])||"";return p?p.toString()==="4"?l.test(f):p.toString()==="6"?u.test(f):!1:d(f,{version:4})||d(f,{version:6})}t.exports=e.default,t.exports.default=e.default})(yh,yh.exports)),yh.exports}var nA;function Spe(){return nA||(nA=1,(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=x;var n=c(qw()),s=c(xpe()),o=c(ype()),r=c(bpe()),a=c(vpe()),l=c(CD());function c(b){return b&&b.__esModule?b:{default:b}}function u(b,y){return g(b)||p(b,y)||f(b,y)||d()}function d(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function f(b,y){if(b){if(typeof b=="string")return m(b,y);var S={}.toString.call(b).slice(8,-1);return S==="Object"&&b.constructor&&(S=b.constructor.name),S==="Map"||S==="Set"?Array.from(b):S==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(S)?m(b,y):void 0}}function m(b,y){(y==null||y>b.length)&&(y=b.length);for(var S=0,C=Array(y);S<y;S++)C[S]=b[S];return C}function p(b,y){var S=b==null?null:typeof Symbol<"u"&&b[Symbol.iterator]||b["@@iterator"];if(S!=null){var C,w,k,E,T=[],M=!0,A=!1;try{if(k=(S=S.call(b)).next,y!==0)for(;!(M=(C=k.call(S)).done)&&(T.push(C.value),T.length!==y);M=!0);}catch(I){A=!0,w=I}finally{try{if(!M&&S.return!=null&&(E=S.return(),Object(E)!==E))return}finally{if(A)throw w}}return T}}function g(b){if(Array.isArray(b))return b}var h={protocols:["http","https","ftp"],require_tld:!0,require_protocol:!1,require_host:!0,require_port:!1,require_valid_protocol:!0,allow_underscores:!1,allow_trailing_dot:!1,allow_protocol_relative_urls:!1,allow_fragments:!0,allow_query_components:!0,validate_length:!0,max_allowed_length:2084},_=/^\[([^\]]+)\](?::([0-9]+))?$/;function x(b,y){if((0,n.default)(b),!b||/[\s<>]/.test(b)||b.indexOf("mailto:")===0||(y=(0,l.default)(y,h),y.validate_length&&b.length>y.max_allowed_length)||!y.allow_fragments&&(0,o.default)(b,"#")||!y.allow_query_components&&((0,o.default)(b,"?")||(0,o.default)(b,"&")))return!1;var S,C,w,k,E,T,M,A;if(M=b.split("#"),b=M.shift(),M=b.split("?"),b=M.shift(),M=b.split("://"),M.length>1){if(S=M.shift().toLowerCase(),y.require_valid_protocol&&y.protocols.indexOf(S)===-1)return!1}else{if(y.require_protocol)return!1;if(b.slice(0,2)==="//"){if(!y.allow_protocol_relative_urls)return!1;M[0]=b.slice(2)}}if(b=M.join("://"),b==="")return!1;if(M=b.split("/"),b=M.shift(),b===""&&!y.require_host)return!0;if(M=b.split("@"),M.length>1){if(y.disallow_auth||M[0]===""||(C=M.shift(),C.indexOf(":")>=0&&C.split(":").length>2))return!1;var I=C.split(":"),j=u(I,2),R=j[0],O=j[1];if(R===""&&O==="")return!1}k=M.join("@"),T=null,A=null;var L=k.match(_);if(L?(w="",A=L[1],T=L[2]||null):(M=k.split(":"),w=M.shift(),M.length&&(T=M.join(":"))),T!==null&&T.length>0){if(E=parseInt(T,10),!/^[0-9]+$/.test(T)||E<=0||E>65535)return!1}else if(y.require_port)return!1;return y.host_whitelist?(0,s.default)(w,y.host_whitelist):w===""&&!y.require_host?!0:!(!(0,a.default)(w)&&!(0,r.default)(w,y)&&(!A||!(0,a.default)(A,6))||(w=w||A,y.host_blacklist&&(0,s.default)(w,y.host_blacklist)))}t.exports=e.default,t.exports.default=e.default})(mh,mh.exports)),mh.exports}var Cpe=Spe();const wpe=ps(Cpe);function kpe(t){return(t.type==="containerDirective"||t.type==="textDirective"||t.type==="leafDirective")&&"name"in t}function Qst(t){return t.type==="containerDirective"}function Jst(t){if(t!=null)return new Date(t*1e3).toISOString()}const Epe=t=>{let e=5381;for(let n=0;n<t.length;n++)e=(e<<5)+e^t.charCodeAt(n);return(e>>>0).toString(36)},Xst=t=>{try{return"".concat(t?Epe(t):"")}catch(e){return""}},Tpe="chatgpt.com",Mpe=(t,e={})=>{const n=Object.keys(e).length?e:{utm_source:Tpe};try{const s=t.trim();return wpe(s,{protocols:["http","https"]})?gpe(s,n):t}catch(s){return t}},eot=(t,e={},n=[])=>{const s=wM(t);return n.some(r=>r&&wM(r)===s)?Mpe(t,e):t},tot=t=>{try{return ve.getConversationSearchEntryUrls(t&&At(t))}catch(e){return[]}},not=(t,e)=>{try{return t&&e?ve.getNode(At(t),e).message:void 0}catch(n){return}},wD=(function(t){if(t==null)return jpe;if(typeof t=="function")return H_(t);if(typeof t=="object")return Array.isArray(t)?Ape(t):Npe(t);if(typeof t=="string")return Ipe(t);throw new Error("Expected function, string, or object as test")});function Ape(t){const e=[];let n=-1;for(;++n<t.length;)e[n]=wD(t[n]);return H_(s);function s(...o){let r=-1;for(;++r<e.length;)if(e[r].apply(this,o))return!0;return!1}}function Npe(t){const e=t;return H_(n);function n(s){const o=s;let r;for(r in t)if(o[r]!==e[r])return!1;return!0}}function Ipe(t){return H_(e);function e(n){return n&&n.type===t}}function H_(t){return e;function e(n,s,o){return!!(Ppe(n)&&t.call(this,n,typeof s=="number"?s:void 0,o||void 0))}}function jpe(){return!0}function Ppe(t){return t!==null&&typeof t=="object"&&"type"in t}const kD=[],Rpe=!0,sA=!1,Ope="skip";function Lpe(t,e,n,s){let o;typeof e=="function"&&typeof n!="function"?(s=n,n=e):o=e;const r=wD(o),a=s?-1:1;l(t,void 0,[])();function l(c,u,d){const f=c&&typeof c=="object"?c:{};if(typeof f.type=="string"){const p=typeof f.tagName=="string"?f.tagName:typeof f.name=="string"?f.name:void 0;Object.defineProperty(m,"name",{value:"node ("+(c.type+(p?"<"+p+">":""))+")"})}return m;function m(){let p=kD,g,h,_;if((!e||r(c,u,d[d.length-1]||void 0))&&(p=Dpe(n(c,d)),p[0]===sA))return p;if("children"in c&&c.children){const x=c;if(x.children&&p[0]!==Ope)for(h=(s?x.children.length:-1)+a,_=d.concat(x);h>-1&&h<x.children.length;){const b=x.children[h];if(g=l(b,h,_)(),g[0]===sA)return g;h=typeof g[1]=="number"?g[1]:h+a}}return p}}}function Dpe(t){return Array.isArray(t)?t:typeof t=="number"?[Rpe,t]:t==null?kD:[t]}function ED(t,e,n,s){let o,r,a;typeof e=="function"&&typeof n!="function"?(r=void 0,a=e,o=n):(r=e,a=n,o=s),Lpe(t,r,l,o);function l(c,u){const d=u[u.length-1],f=d?d.children.indexOf(c):void 0;return a(c,f,d)}}const Bpe={red:"bg-red-500",yellow:"bg-yellow-500",blue:"bg-blue-500"},Fpe={sm:"h-2 w-2",md:"h-3 w-3",lg:"h-4 w-4"},TD=({color:t,size:e="sm",className:n})=>i.jsx("div",{className:q("rounded-full",t?Bpe[t]:void 0,Fpe[e],n)}),MD=re(me,"06188d",20,20,!0),AD=re(me,"2e54eb",20,20),sot=re(me,"25e330",20,20);function oot(){return xe("2067628123")}const xi=re(me,"6b0d8c",20,20),Upe=Object.freeze(Object.defineProperty({__proto__:null,default:xi},Symbol.toStringTag,{value:"Module"})),Zy="oai-chat-backend",rot=()=>{var o;const[t,e]=v.useState(!1),[n,s]=v.useState(((o=ny.getCookie(Zy))==null?void 0:o.toString())==="preview");return i.jsxs(i.Fragment,{children:[i.jsxs(ee.CheckboxItem,{icon:xi,checked:t,onCheckedChange:r=>{e(r),requestAnimationFrame(()=>{window.location.href=r?"/preview":"/public"})},children:["Preview",i.jsx(md,{children:"web"})]}),i.jsxs(ee.CheckboxItem,{icon:fL,checked:n,onCheckedChange:r=>{r?(s(!0),ny.setCookie(Zy,"preview")):ny.deleteCookie(Zy),window.location.reload()},children:["Preview",i.jsx(md,{children:"sa-server"})]})]})},Hpe=720*60*60*1e3;class Kw extends ml()(()=>{var n,s;const e=tt.getItem(Ie.MessageFollowupsStoreState);return e?{disabledGlobally:(n=e.disabledGlobally)!=null?n:!1,disabledConversations:new Map((s=e.disabledConversations)!=null?s:[])}:{disabledGlobally:!1,disabledConversations:new Map}}){persistState(){const e=this.getState(),n=Date.now(),s=new Map(Array.from(e.disabledConversations.entries()).filter(([,r])=>r.disabledAt===null||n-r.disabledAt<Hpe)),o={disabledGlobally:e.disabledGlobally,disabledConversations:Array.from(s.entries())};tt.setItem(Ie.MessageFollowupsStoreState,o)}setDisabledGlobally(e){this.setState({disabledGlobally:e}),this.persistState()}setDisabledConversation(e,n){this.setState(s=>{var o;return{disabledConversations:(o=s.disabledConversations)==null?void 0:o.set(e,{disabled:n,disabledAt:n?Date.now():null})}}),this.persistState()}static useDisabledGlobally(){return this.useState(e=>e.disabledGlobally)}static useIsDisabledConversation(e){return this.useState(n=>{var s,o,r;return(r=(o=(s=n.disabledConversations)==null?void 0:s.get(e))==null?void 0:o.disabled)!=null?r:!1})}static useIsEnabled(e){return this.useState(n=>{var o,r;const s=(o=n.disabledConversations)==null?void 0:o.get(e);return!((r=s==null?void 0:s.disabled)!=null?r:n.disabledGlobally)})}}function Yw({systemHint:t,modelConfig:e,conversationMode:n,isTemporaryChat:s,isDeveloperMode:o,isWorkspaceTenant:r,startedWithByoMcp:a}){return $pe(t,s)&&Gpe(t,e)&&Vpe(t,e)&&zpe(t,n)&&Wpe(t,o)&&qpe(t,r,a)}function $pe(t,e){return!e||t.allowInTemporaryChat===!0}function Gpe(t,e){const n=e==null?void 0:e.enabledTools;return n===void 0?!0:t.requiredFeatures.every(s=>n.includes(s))}function Vpe(t,e){if(t.systemHint===Ke.Think){const n=e==null?void 0:e.reasoningType;return n==null||n===kM.OFF||n===kM.AUTO}return t.requiredModels.length===0||t.requiredModels.some(n=>n===(e==null?void 0:e.id))}function zpe(t,e){return t.requiredConversationModes.length===0||t.requiredConversationModes.some(n=>n===(e==null?void 0:e.kind))}function Wpe(t,e){return e?!0:!t.isDangerous}function qpe(t,e,n){return e?!0:!(t.category==="tool"&&(t.isDangerous&&n===!1||!t.isDangerous&&n===!0))}const Kpe=v.createContext(()=>Promise.resolve()),Yp=v.createContext(null),ND=()=>v.useContext(Yp)!=null,aot=()=>{const t=v.useContext(Yp);return t==null?void 0:t.serverSharedThreadId};v.createContext({onDismount:()=>{}});function Zw(t,e={}){var n;return{systemHints:t.filter(s=>s!==Ke.Search),extraStreamParams:G(N({},e),{forceUseSearch:(n=e.forceUseSearch)!=null?n:t.includes(Ke.Search)?!0:void 0})}}function Zp(t){"use forget";const e=D.c(8),{clientThreadId:n,conversationMode:s,onRequestCompletion:o}=t,r=Hs(),a=v.useContext(Kpe),l=o!=null?o:a,c=Kw.useIsEnabled(n!=null?n:""),u=X(Zpe);let d;e[0]===Symbol.for("react.memo_cache_sentinel")?(d=Et(),e[0]=d):d=e[0];const f=d;let m;return e[1]!==n||e[2]!==s||e[3]!==l||e[4]!==u||e[5]!==c||e[6]!==r?(m=p=>{var B,U,H;let{nodeId:g,sourceEvent:h,requestedModelId:_,appendMessages:x,extraStreamParams:b,isReasoningSkipped:y}=p;if(!n)throw new Error("Regeneration must have clientThreadId");const S=At(n),C=ve.getVariantIds(S,g),w=ve.getParentPromptNode(S,g);if(!w)throw new Error("Regeneration must have parent prompt");const k=(B=Ca())!=null?B:[],E=(C==null?void 0:C.length)===1&&(b==null?void 0:b.forceUseSearch)===void 0&&(b==null?void 0:b.forceDisableFeatures)===void 0,T=Lr(Pt(n)),M=VC(T,_),A=nZ(S,g),I=(U=w.message.metadata)==null?void 0:U.system_hints,j=_&&I?I.filter($=>{var z;const F=k.find(W=>W.systemHint===$);return F&&Yw({systemHint:F,modelConfig:M,isTemporaryChat:r,conversationMode:s,isDeveloperMode:u,isWorkspaceTenant:(z=f==null?void 0:f.isWorkspaceAccount())!=null?z:!1,startedWithByoMcp:S==null?void 0:S.startedWithByoMcp})}):I!=null?I:[];c&&(b=G(N({},b!=null?b:{}),{enableMessageFollowups:!0}));const{systemHints:R,extraStreamParams:O}=Zw(j,b);let L=R;(b==null?void 0:b.forceUseReason)!==void 0&&(b.forceUseReason?L.push(Ke.Think):L=L.filter(Ype)),l({completionType:$C.Variant,requestedModelId:_,sourceEvent:h,completionMetadata:{variantPurpose:E?"comparison_implicit":"none",conversationMode:s!=null?s:(H=At(n))==null?void 0:H.mode,systemHints:L,searchSource:(b==null?void 0:b.forceUseSearch)===!0?Pm.CONVERSATION_REGENERATE_WITH_SEARCH:(b==null?void 0:b.forceUseSearch)===!1?Pm.CONVERSATION_REGENERATE_WITHOUT_SEARCH:void 0},parentMessageId:w.id,appendMessages:x,extraStreamParams:O,isReasoningSkipped:y,thinkingEffort:A}),y&&pt(n,$=>{let F=g,z=$.tree.getNodeByIdOrMessageId(F);for(;z.message.author.role!==dt.User;)$.tree.deleteNode(F),F=z.parentId,z=$.tree.getNodeByIdOrMessageId(F)})},e[1]=n,e[2]=s,e[3]=l,e[4]=u,e[5]=c,e[6]=r,e[7]=m):m=e[7],m}function Ype(t){return t!==Ke.Think}function Zpe(){return qd()}const iot=re(me,"d80cb7",16,17),lot=je(()=>Me(()=>import("./20ecc4a3-m0xx1qx3zdm6vf89.js"),__vite__mapDeps([120,1,2,3])).then(t=>t.CalpicoCustomizeChatGPTModalContainer)),cot=je(()=>Me(()=>import("./01899762-g5mdijmj9tumg92w.js"),__vite__mapDeps([121,1,2,3])).then(t=>t.CalpicoChatMembersModalContainer)),uot=je(()=>Me(()=>import("./75a144d0-f52aesbun0f1bi7d.js"),__vite__mapDeps([122,1,2,3])).then(t=>t.CalpicoDeleteMessageConfirmationModal)),Qpe=je(()=>Me(()=>import("./d9702cc2-i7rxvjoyupqo4otv.js"),__vite__mapDeps([123,1,2,3])).then(t=>t.CalpicoEditProfileModal)),dot=je(()=>Me(()=>import("./95d09b10-cyr2jpjisoi5dawa.js"),__vite__mapDeps([124,1,125,2,3])).then(t=>t.CalpicoEmojiPickerModal)),Jpe=je(()=>Me(()=>import("./c478c166-juekm28z2ewsu37r.js"),__vite__mapDeps([126,1,2,3])).then(t=>t.CalpicoLeaveChatConfirmationModalContainer)),Xpe=je(()=>Me(()=>import("./5575f88d-0ilvj77uuoo3k4o4.js"),__vite__mapDeps([127,1,2,3])).then(t=>t.CalpicoDeleteChatConfirmationModalContainer)),ege=je(()=>Me(()=>import("./f899885a-lhsfvkdoegx8vfa5.js"),__vite__mapDeps([128,1,2,3])).then(t=>t.CalpicoManageGroupLinkModalContainer)),tge=je(()=>Me(()=>import("./953f16d7-by8td5zp1eum1i7c.js"),__vite__mapDeps([129,1,2,3])).then(t=>t.CalpicoRenameChatModalContainer)),fot=je(()=>Me(()=>import("./1819a202-k7soatiaek8m7ave.js"),__vite__mapDeps([130,1,2,3])).then(t=>t.CalpicoReportModalContainer)),oA=je(()=>Me(()=>import("./8527de68-hclq7d1ke5ty21ud.js"),__vite__mapDeps([131,1,2,3])).then(t=>t.CalpicoStartChatModalContainer)),mot=je(()=>Me(()=>import("./9c781baa-ms1pr0s11hpiffaq.js"),__vite__mapDeps([132,1,2,3])).then(t=>t.CalpicoUserProfileModal)),pot=je(()=>Me(()=>import("./655149e0-mbaaz0l9g25p79by.js"),__vite__mapDeps([133,1,2,3])).then(t=>t.CalpicoNoAccessYetModalContainer)),got=je(()=>Me(()=>import("./ef5c7966-lae729rhoq8do4os.js"),__vite__mapDeps([134,1,135,136,2,3])).then(t=>t.CalpicoAppMightNeedUpdateModalContainer)),hot=je(()=>Me(()=>import("./479bdd96-i15pz5vyiqs34dhx.js"),__vite__mapDeps([137,1,2,3,138,139,140,17,18,19,141,142,22,143,144,145,146,147,148,149,150,151,152,21,153,154,155,156,157,158,159,160])).then(t=>t.CalpicoSharedModalContainer)),Qy=re(me,"427dd9",20,20);function $_(t){"use forget";const e=D.c(14);let n;if(e[0]!==t){n=Symbol.for("react.early_return_sentinel");e:{const s=t,{icon:r,mobileIcon:a,color:l,iconClassName:c,children:u,as:d,ref:f}=s,m=De(s,["icon","mobileIcon","color","iconClassName","children","as","ref"]),p=l===void 0?"primary":l;let g=u;if(r){const h=c!=null?c:"icon",_=a!=null&&"max-md:hidden";let x;e[2]!==h||e[3]!==_?(x=q(h,_),e[2]=h,e[3]=_,e[4]=x):x=e[4];let b;e[5]!==r||e[6]!==x?(b=i.jsx(r,{className:x}),e[5]=r,e[6]=x,e[7]=b):b=e[7];let y;e[8]!==a||e[9]!==c?(y=a?i.jsx(a,{className:q(c!=null?c:"icon","md:hidden")}):null,e[8]=a,e[9]=c,e[10]=y):y=e[10];let S;e[11]!==b||e[12]!==y?(S=i.jsxs(i.Fragment,{children:[b,y]}),e[11]=b,e[12]=y,e[13]=S):S=e[13],g=S}switch(d){case"link":case"a":{const o=m,{linkProps:h}=o,_=De(o,["linkProps"]),{to:x,state:b}=h;n=i.jsx(ko,G(N({},_),{className:q(p==="primary"?"text-token-text-primary":p==="tertiary"?"text-token-text-tertiary":"text-token-text-secondary","no-draggable hover:bg-token-surface-hover keyboard-focused:bg-token-surface-hover touch:h-10 touch:w-10 flex h-9 w-9 items-center justify-center rounded-lg focus:outline-none disabled:opacity-50",m.className),ref:f,to:x,state:b,children:g}));break e}case"button":default:{const h=m;n=i.jsx("button",G(N({},h),{className:q(p==="primary"?"text-token-text-primary":p==="tertiary"?"text-token-text-tertiary":"text-token-text-secondary","no-draggable hover:bg-token-surface-hover keyboard-focused:bg-token-surface-hover touch:h-10 touch:w-10 flex h-9 w-9 items-center justify-center rounded-lg focus:outline-none disabled:opacity-50",m.className),ref:f,children:g}));break e}}}e[0]=t,e[1]=n}else n=e[1];if(n!==Symbol.for("react.early_return_sentinel"))return n}function _ot(t){"use no forget";const e=te(),n=e.formatMessage({id:"yKEGRx",defaultMessage:"Start a group chat"});if(t.type==="from-conversation"||t.type==="from-shared-project"){const o=e.formatMessage({id:"dX9+Fz",defaultMessage:"Add people"});return i.jsx(St,{triggerAs:null,label:n,children:i.jsx(Se,{onClick:()=>{V.logStructuredEvent(ov,{step:av.GROUP_CHATS_INVITE_ACTIONS_STEP_CLICK_ADD_PEOPLE_BUTTON,source:rv.GROUP_CHATS_INVITE_ACTIONS_SOURCE_CONVERSATION_DROPDOWN_MENU,originalConversationId:t.serverThreadId});const r=t.type==="from-shared-project"?{type:"from-shared-project",serverThreadId:t.serverThreadId,projectId:t.projectId,source:"top-nav"}:{type:"from-conversation",serverThreadId:t.serverThreadId,source:"top-nav"};rt(oA,r)},icon:Qy,label:n,"data-testid":"start-group-chat-from-conversation-button",color:"ghost",className:"text-token-text-primary hover:bg-token-surface-hover keyboard-focused:bg-token-surface-hover rounded-lg whitespace-nowrap",style:{viewTransitionName:"var(--vt_share_chat_wide_button)"},children:i.jsx("span",{className:"max-md:hidden",children:o})})})}const s=async()=>{V.logStructuredEvent(ov,{step:av.GROUP_CHATS_INVITE_ACTIONS_STEP_CLICK_ADD_PEOPLE_BUTTON,source:rv.GROUP_CHATS_INVITE_ACTIONS_SOURCE_CONVERSATION_TOP_BAR_BUTTON}),rt(oA,{type:"new-chat",source:"top-nav"})};return i.jsx(St,{triggerAs:null,label:n,children:t.variant==="default"?i.jsx($_,{className:"me-1 rounded-full!","aria-label":n,onClick:s,icon:Qy}):i.jsx(Se,{className:"text-token-text-secondary me-1 rounded-lg",color:"ghost",icon:Qy,onClick:s,label:n})})}const nge=1024*1024,Jy=5;function xot(){return xe("4123826335")}function yot(){var s;const e=(s=mn("216497991").get("max_file_size_mb",Jy))!=null?s:Jy;return(Number.isFinite(e)?Math.max(e,1):Jy)*nge}function bot(){return xe("4105134853")}const W1=tn(()=>({focusedObject:null}));function sge(){return W1(t=>t.focusedObject)}var lc=(t=>(t[t.Textdoc=0]="Textdoc",t[t.ADAVisualization=1]="ADAVisualization",t))(lc||{});const rl=tn(()=>({focusedObject:null,fromMessageId:null})),vot=(t,e)=>{const n=rl.getState();e!==n.fromMessageId&&rl.setState({focusedObject:t,fromMessageId:e})},cc=t=>{rl.setState({focusedObject:t,fromMessageId:null})},al=t=>{W1.setState({focusedObject:null});const e=rl.getState(),{focusedObject:n}=e;(!n||n.type!==0||n.textdocId!==t)&&ID(t)},ID=t=>{cc({type:0,textdocId:t})},oge=(t,e,n)=>{cc({type:0,textdocId:t,history:e,showChangesAtVersion:n})},Sot=(t,e,n)=>{cc({type:0,textdocId:t,showChangesAtVersion:e,history:n!=null?n:void 0})},Qw=()=>{rl.setState({focusedObject:null})},rge=()=>{rl.setState({focusedObject:null,fromMessageId:null})};var Xy,rA;function age(){if(rA)return Xy;rA=1;var t=sZ();function e(n,s,o,r){return t(n,function(a,l,c){s(r,o(a),l,c)}),r}return Xy=e,Xy}var e2,aA;function ige(){if(aA)return e2;aA=1;var t=age();function e(n,s){return function(o,r){return t(o,n,s(r),{})}}return e2=e,e2}var t2,iA;function lge(){if(iA)return t2;iA=1;var t=oZ(),e=ige(),n=K0(),s=Object.prototype,o=s.toString,r=e(function(a,l,c){l!=null&&typeof l.toString!="function"&&(l=o.call(l)),a[l]=c},t(n));return t2=r,t2}var cge=lge();const uge=ps(cge);function Jw(t,e){var r,a,l,c;if(!t||e==null)return null;const{resolveTempTextdocId:n}=t,s=(r=n==null?void 0:n[e])!=null?r:e;let o=(l=(a=t.textdocById[s])!=null?a:t.textdocById[e])!=null?l:null;if(!o&&n){const u=uge(n);o=(c=t.textdocById[u[s]])!=null?c:null}return o}var n2=rK();const q1=Symbol(),dge=Symbol(),fge=typeof window>"u"||/ServerSideRendering/.test(window.navigator&&window.navigator.userAgent),jD=fge?v.useEffect:v.useLayoutEffect,mge=n2.unstable_runWithPriority?t=>{try{n2.unstable_runWithPriority(n2.unstable_NormalPriority,t)}catch(e){if(e.message==="Not implemented.")t();else throw e}}:t=>t(),pge=t=>({value:n,children:s})=>{const o=v.useRef(n),r=v.useRef(0),[a,l]=v.useState(null);a&&(a(n),l(null));const c=v.useRef();if(!c.current){const u=new Set,d=(f,m)=>{r.current+=1;const p={n:r.current};m!=null&&m.suspense&&(p.n*=-1,p.p=new Promise(g=>{l(()=>h=>{p.v=h,delete p.p,g(h)})})),u.forEach(g=>g(p)),f()};c.current={[q1]:{v:o,n:r,l:u,u:d}}}return jD(()=>{o.current=n,r.current+=1,mge(()=>{c.current[q1].l.forEach(u=>{u({n:r.current,v:n})})})},[n]),v.createElement(t,{value:c.current},s)};function gge(t){const e=v.createContext({[q1]:{v:{current:t},n:{current:-1},l:new Set,u:n=>n()}});return e[dge]=e.Provider,e.Provider=pge(e.Provider),delete e.Consumer,e}function hge(t,e){const n=v.useContext(t)[q1],{v:{current:s},n:{current:o},l:r}=n,a=e(s),[l,c]=v.useReducer((u,d)=>{if(!d)return[s,a];if("p"in d)throw d.p;if(d.n===o)return Object.is(u[1],a)?u:[s,a];try{if("v"in d){if(Object.is(u[0],d.v))return u;const f=e(d.v);return Object.is(u[1],f)?u:[d.v,f]}}catch(f){}return[...u]},[s,a]);return Object.is(l[1],a)||c(),jD(()=>(r.add(c),()=>{r.delete(c)}),[r]),l[1]}var Wv=(t=>(t.NATIVE="native",t.LAST_TURN="last_turn",t))(Wv||{});const PD=gge(null);function _ge(){return{lastCanvasAssistantMessageById:{},resolveTempCommentId:{},resolveTempTextdocId:{},latestTextdocId:null}}function RD(t){return N({fetchError:null,isFetchingFromPersistence:!1,textdocById:{},allTextdocIdSet:{},streamingSource:null},t!=null?t:_ge())}function Ui(t,e){return UC(t,e)}function vm(t,e,n=!0){var o,r,a,l,c,u;const s=t.textdocById[e.textdocId];if(s)t.textdocById[e.textdocId]=s,s.metadata.type=e.type,s.metadata.title=e.title,s.metadata.updatedAt=e.createdAt,s.metadata.contentReferences=(l=e.metadata)==null?void 0:l.content_references,s.metadata.hiveId=(c=e.metadata)==null?void 0:c.hive_id,s.metadata.recordMeetingId=(u=e.metadata)==null?void 0:u.record_meeting_id,n?s.versions.push(e):s.versions[s.versions.length-1]=e;else{const d={metadata:{textdocId:e.textdocId,type:e.type,title:e.title,createdAt:e.createdAt,updatedAt:e.createdAt,contentReferences:(o=e.metadata)==null?void 0:o.content_references,hiveId:(r=e.metadata)==null?void 0:r.hive_id,recordMeetingId:(a=e.metadata)==null?void 0:a.record_meeting_id},versions:[e]};t.allTextdocIdSet[e.textdocId]=e.textdocId,t.textdocById[e.textdocId]=d}}var xge=K0();const yge=ps(xge);function qo(t=yge){return hge(PD,t)}function bge(){return qo(t=>t==null?void 0:t.isFetchingFromPersistence)}function Cot(){return qo(t=>t==null?void 0:t.resolveTempCommentId)}function vge(){return qo(t=>{var e;return(e=t==null?void 0:t.latestTextdocId)!=null?e:null})}function wot(){return qo(t=>{var e;return(e=t==null?void 0:t.streamingSource)!=null?e:null})}function kot(t){return qo(e=>Jw(e,t))}function G_(t){return qo(e=>{var n,s;return(s=(n=Jw(e,t))==null?void 0:n.metadata)!=null?s:null})}function OD(){const t=qo(e=>e==null?void 0:e.allTextdocIdSet);return t?Object.keys(t):null}function Sge(){return qo(t=>t?Object.keys(t.allTextdocIdSet).length>1:!1)}function Cge({textdocId:t,assistantMessageId:e}){return qo(n=>{const s=n==null?void 0:n.lastCanvasAssistantMessageById;return s==null||t==null?!0:s[t]==null||s[t]===e})}function LD(){return rl(t=>t.focusedObject)}function Eot(){const t=rl(e=>e.focusedObject);return(t==null?void 0:t.type)!==lc.Textdoc?null:t}function Qp(){return LD()!=null}function Xw(t){const e=LD();return qo(n=>{var a,l,c;if(!t||(e==null?void 0:e.type)!==lc.Textdoc)return!1;const s=(a=n==null?void 0:n.resolveTempTextdocId)!=null?a:{},o=(l=s[e.textdocId])!=null?l:e.textdocId,r=(c=s[t])!=null?c:t;return o===r})}var V_=(t=>(t.ACCELERATOR="accelerator",t.BLOCK_COMMENT_LAUNCHER="block_comment_launcher",t.CLOSE_TEXTDOC="close_textdoc",t.COLLAPSED_COMMENT="collapsed_comment",t.COMMENT_ACCEPT="comment_accept",t.COMMENT_DISMISS="comment_dismiss",t.COPY="copy",t.DOWNLOAD="download",t.EXPANDED_COMMENT="expanded_comment",t.FILE_DRAWER_ITEM="file_drawer_item",t.HISTORY_NEXT="history_next",t.HISTORY_PREVIOUS="history_previous",t.MESSAGE_ATTACHMENT="message_attachment",t.OPEN_SHARE_MENU="open_share_menu",t.CREATE_SHARE_LINK="create_share_link",t.UPDATE_SHARE_LINK_TO_LATEST="update_share_link_to_latest",t.COPY_SHARE_LINK="copy_share_link",t.UPDATE_SHARE_LINK_PRIVATE="update_share_link_private",t.UPDATE_SHARE_LINK_PUBLIC="update_share_link_public",t.SHOW_CHANGES="show_changes",t.TOOLBAR_FORMAT_BOLD="toolbar_format_bold",t.TOOLBAR_FORMAT_HEADER1="toolbar_format_header1",t.TOOLBAR_FORMAT_HEADER2="toolbar_format_header2",t.TOOLBAR_FORMAT_HEADER3="toolbar_format_header3",t.TOOLBAR_FORMAT_ITALIC="toolbar_format_italic",t.TOOLBAR_FORMAT_PARAGRAPH="toolbar_format_paragraph",t.TOOLBAR_FORMAT_STYLE="toolbar_format_style",t.TOOLBAR_ASK_CHATGPT="toolbar_ask_chatgpt",t.EDIT_IN_CANVAS_MESSAGE="edit_in_canvas_message",t.EDIT_IN_CANVAS_CODE_SNIPPET="edit_in_canvas_code_snippet",t.OPEN_IN_CANVAS_WRITING_BLOCK="open_in_canvas_writing_block",t.SAVE_TO_CHAT_ON_EDITOR_CLOSE="save_to_chat_on_editor_close",t.CLOSE_WITHOUT_SAVING="close_without_saving",t.LEARN_MODE_ABOUT_NETWORK_REQUESTS="learn_more_about_network_requests",t))(V_||{}),K1=(t=>(t.Unknown="unknown",t.ShowToast="show_toast",t.CanvasMessage="canvas_message",t.TurnComplete="turn_complete",t))(K1||{});const wge={canvas_message:xr({message:Im}),turn_complete:xr({}),unknown:xr({}),show_toast:xr({text:ks})},lA=rZ(Object.values(K1));function kge(t){const{type:e}=DR(t,{type:lA}),n=lA(e);return N({type:n},wge[n](t))}function cA(t,e){Tge(n=>{n.type===t&&e(n)})}function Ege(t){const e=atob(t),n=new Uint8Array(e.length);for(let s=0;s<e.length;s++)n[s]=e.charCodeAt(s);return new TextDecoder("utf-8").decode(n)}function Tge(t){v.useEffect(()=>Kd(window,{message:n=>{const s=n.data;if(!(typeof s!="object"||(s==null?void 0:s.type)!=="canmore_native"))try{const o=Ege(s.msg),r=kge(JSON.parse(o));t(r)}catch(o){console.warn("Unknown message from native app: ".concat(s.msg))}}}),[t])}function DD(){var n;let t;const e=Mge();switch(e){case"android":t=window.CanmoreNative;break;case"ios":t=(n=window.webkit)==null?void 0:n.messageHandlers.canmoreNative;break;case"web":t=void 0;break}return{platform:e,isNative:e!=="web",bridge:t,sendMessage:s=>t==null?void 0:t.postMessage(btoa(JSON.stringify(s)))}}function Mge(){return typeof window.CanmoreNative<"u"?"android":typeof window.webkit<"u"&&typeof window.webkit.messageHandlers.canmoreNative<"u"?"ios":"web"}function z_(t,e){V.logEvent(t,N({platform:DD().platform},e!=null?e:{}))}function Age(t,e,n){V.logEventWithStatsig(t,e,N({platform:DD().platform},n))}function Nge(t,e,n){z_(t,N({distributionValue:e},n!=null?n:{}))}function Ige(t,e){z_("Canvas Button Clicked",N({buttonName:t},e!=null?e:{}))}function jge(t){if(t instanceof Error){const{name:e,message:n,stack:s,cause:o}=t;return{name:e,message:n,stack:s,cause:o}}return t}function Pge(t,e,n){z_("Canvas Client Error",{message:t,error:e==null?t:jge(e),attributes:n}),Ve.addError(e)}const qc={logButtonClick:Ige,logEvent:z_,logEventWithStatsig:Age,logError:Pge,logDistribution:Nge},Rge=({children:t})=>{const e=OD(),n=Ko();return!(e!=null&&e.length)||n?null:i.jsxs(ee.Root,{children:[i.jsx(ee.BasicTrigger,{children:t}),i.jsx(ee.Portal,{children:i.jsx(ee.Content,{align:"end",onCloseAutoFocus:s=>s.preventDefault(),children:e.map(s=>i.jsx(Oge,{textdocId:s},s))})})]})},Oge=({textdocId:t})=>{const e=cd(G_(t));return i.jsx(ee.Item,{icon:vo,onClick:()=>{qc.logButtonClick(V_.FILE_DRAWER_ITEM),al(e.textdocId)},children:i.jsx("span",{className:"block max-w-[200px] truncate",children:e.title})})},Tot=()=>{const t=OD(),e=Qp();return!t||e?null:t.length===1?i.jsx(Lge,{textdocId:t[0]}):i.jsx(Rge,{children:i.jsx(BD,{})})},Lge=({textdocId:t})=>{const e=cd(G_(t));return i.jsx(BD,{onClick:()=>al(e.textdocId)})},BD=({onClick:t})=>{const e=te();return i.jsx(St,{label:e.formatMessage({id:"xX2Zyt",defaultMessage:"Open canvas"}),children:i.jsx($_,{onClick:t,icon:vo,style:{viewTransitionName:"var(--vt-thread-header-open-canvas)"}})})},Yi="canmore";var rs=(t=>(t.CreateTextdoc="".concat(Yi,".create_textdoc"),t.UpdateTextdoc="".concat(Yi,".update_textdoc"),t.CommentTextdoc="".concat(Yi,".comment_textdoc"),t))(rs||{});function FD(t){return t===rs.CreateTextdoc||t===rs.UpdateTextdoc||t===rs.CommentTextdoc}var jt=(t=>(t[t.STREAMING=0]="STREAMING",t[t.WAITING=1]="WAITING",t[t.COMPLETE=2]="COMPLETE",t[t.FAILED=3]="FAILED",t[t.CANCELED=4]="CANCELED",t[t.REDACTED=5]="REDACTED",t))(jt||{});function Dge({thread:t,leafId:e}){return t?ve.findNode(t,n=>{var s,o;return((s=n.message.author.name)==null?void 0:s.startsWith("".concat(Yi,".")))===!0||((o=n.message.recipient)==null?void 0:o.startsWith("".concat(Yi,".")))===!0},e!=null?e:ve.getCurrentLeafId(t))!=null:!1}function UD(t,e){return Dge({thread:t,leafId:e})}function HD(t){const e=Nt();return v.useCallback(async()=>{if(!t)return;const n=await sl(t);Fo(e,n.gizmo_id)},[e,t])}function $D(t){var o,r;const e=zC(t),n={[gs.UNKNOWN]:{inProgress:{id:"task.inProgress",defaultMessage:"In progress"},completed:{id:"task.completed",defaultMessage:"Completed"},failed:{id:"task.failed",defaultMessage:"Failed"},cancelled:{id:"task.cancelled",defaultMessage:"Cancelled"},skipped:{id:"task.skipped",defaultMessage:"Skipped"}},[gs.RESEARCH]:{inProgress:{id:"task.research.inProgress",defaultMessage:"Research in progress"},completed:{id:"task.research.completed",defaultMessage:"Research completed"},failed:{id:"task.research.failed",defaultMessage:"Research failed"},cancelled:{id:"task.research.cancelled",defaultMessage:"Research cancelled"},skipped:{id:"task.research.skipped",defaultMessage:"Research skipped"}},[gs.PRO_MODE]:{inProgress:{id:"task.pro.inProgress",defaultMessage:"Pro thinking in progress"},completed:{id:"task.pro.completed",defaultMessage:"Pro thinking completed"},failed:{id:"task.pro.failed",defaultMessage:"Pro thinking failed"},cancelled:{id:"task.pro.cancelled",defaultMessage:"Pro thinking cancelled"},skipped:{id:"task.pro.skipped",defaultMessage:"Pro thinking skipped"}},[gs.THINKING]:{inProgress:{id:"task.thinking.inProgress",defaultMessage:"Thinking"},completed:{id:"task.thinking.completed",defaultMessage:"Thinking completed"},failed:{id:"task.thinking.failed",defaultMessage:"Thinking failed"},cancelled:{id:"task.thinking.cancelled",defaultMessage:"Thinking cancelled"},skipped:{id:"task.thinking.skipped",defaultMessage:"Thinking skipped"}},[gs.IMAGE_GEN]:{inProgress:{id:"task.image.inProgress",defaultMessage:"Creating image"},completed:{id:"task.image.completed",defaultMessage:"Image created"},failed:{id:"task.image.failed",defaultMessage:"Image failed"},cancelled:{id:"task.image.cancelled",defaultMessage:"Image creation cancelled"},skipped:{id:"task.image.skipped",defaultMessage:"Image creation skipped"}},[gs.FRONTEND_ARTIFACT]:{inProgress:{id:"task.artifact.inProgress",defaultMessage:"Artifact in progress"},completed:{id:"task.artifact.completed",defaultMessage:"Artifact created"},failed:{id:"task.artifact.failed",defaultMessage:"Artifact failed"},cancelled:{id:"task.artifact.cancelled",defaultMessage:"Artifact creation cancelled"},skipped:{id:"task.artifact.skipped",defaultMessage:"Artifact creation skipped"}}},s=(()=>{switch(t.status){case wn.CREATED:case wn.RUNNING:case wn.UNDETERMINED:case wn.FINALIZING:return"inProgress";case wn.COMPLETED:return"completed";case wn.FAILED:return"failed";case wn.CANCELLED:return"cancelled";case wn.SKIPPING:return"skipped";default:return}})();if(s)return(r=(o=n[e])==null?void 0:o[s])!=null?r:n[gs.UNKNOWN][s]}function Bge(t,e,n){var r;const s=t.originalConversationId,o=$D(t);iv({clientThreadId:s,title:(r=t.title)!=null?r:e.formatMessage({id:"qi9HQV",defaultMessage:"Task complete"}),subtitle:o?e.formatMessage(o):void 0,thumbnail:n})}const jr=re(me,"554074",20,20),Fge="https://cdn.openai.com/";class Uge{async fetch(e,n){const r=this.makeQueryOptions(n,e),{enabled:s}=r,o=De(r,["enabled"]);return await e.fetchQuery(o)}makeQueryOptions(e,n){var a;const s=Mr(e.asset.asset_pointer),o=G(N({},e),{id:s}),r=["getFileDownloadLink",s,e.gizmoId,e.conversationId,e.sharedThreadId,e.postId];return e.force&&(n==null||n.invalidateQueries({queryKey:r})),{queryKey:r,queryFn:async()=>s.startsWith(mc)||s.startsWith(Fge)?G(N({},e.asset),{url:s}):await Hge(o),staleTime:BR,enabled:(a=e.getServerUrl)!=null?a:!0}}}const wl=new Uge;async function Hge(t){const{asset:e,gizmoId:n,id:s,isUnauthenticated:o,conversationId:r,postId:a}=t,l=await mp(s,{gizmoId:n,isUnauthenticated:o,conversationId:r,showInline:!1,postId:a}).catch(c=>{throw c instanceof Vn||Ve.addError(new Error("Could not fetch file with ID ".concat(s," from file service"),{cause:c})),c});if(l.status!==Yd.Success)throw Ve.addError("Could not fetch file with ID ".concat(s," from file service"),l),new Error("Could not fetch file with ID ".concat(s," from file service"));return G(N({},e),{url:l.download_url})}const bh=({Icon:t,size:e="lg"})=>i.jsx("div",{className:q("bg-token-bg-tertiary group-hover:bg-token-bg-secondary group-hover/task-row:bg-token-bg-secondary flex items-center justify-center",e==="lg"?"h-12 w-12 rounded-lg":"h-10 w-10 rounded-md"),children:t&&i.jsx(t,{className:q("text-token-text-secondary",e==="lg"?"h-5 w-5":"h-4 w-4")})}),GD=({task:t,conversationId:e,size:n="lg"})=>{const s=t.imageGenMessage,o=Nt(),[r,a]=v.useState(void 0);return v.useEffect(()=>{if(!s)return;const c=ha.getImageAssetPointers(s)[0];c&&wl.fetch(o,{asset:c,conversationId:e}).then(u=>{a(u)})},[s,o,e]),v.useMemo(()=>{switch(zC(t)){case gs.IMAGE_GEN:return r?i.jsx("img",{src:r.url,alt:t.title,className:q("shrink-0 rounded-md object-cover",n==="lg"?"h-12 w-12":"h-10 w-10")}):i.jsx(bh,{size:n});case gs.RESEARCH:return i.jsx(bh,{Icon:mi,size:n});case gs.FRONTEND_ARTIFACT:return i.jsx(bh,{Icon:jr,size:n});case gs.PRO_MODE:case gs.THINKING:case gs.UNKNOWN:return i.jsx(bh,{Icon:P_,size:n})}},[r,t,n])},$ge=t=>{"use forget";var w;const e=D.c(10),{isOdysseyTurn:n,hasConduitToken:s,isProTurn:o,isDeepResearchTurn:r,isImageGenAsync:a,metadataNode:l,isImageGenSync:c,isInterruptionBlocked:u}=Ze(t,Gge),d=(w=l==null?void 0:l.message.metadata)==null?void 0:w.async_task_id;let f;e[0]!==d?(f=k=>d?k.tasks[d]:null,e[0]=d,e[1]=f):f=e[1];const m=Zo(f);let p;e[2]===Symbol.for("react.memo_cache_sentinel")?(p=xe("1439437954"),e[2]=p):p=e[2];const g=p;let h;e[3]!==(m==null?void 0:m.interruptionsDisabled)||e[4]!==(m==null?void 0:m.status)?(h=(m==null?void 0:m.status)===wn.RUNNING&&!(m!=null&&m.interruptionsDisabled)&&xe("877631007"),e[3]=m==null?void 0:m.interruptionsDisabled,e[4]=m==null?void 0:m.status,e[5]=h):h=e[5];const _=h;let x;e[6]!==(m==null?void 0:m.interruptionsDisabled)||e[7]!==(m==null?void 0:m.status)?(x=((m==null?void 0:m.status)===wn.RUNNING||(m==null?void 0:m.status)===wn.FINALIZING)&&!(m!=null&&m.interruptionsDisabled)&&xe("1927459101"),e[6]=m==null?void 0:m.interruptionsDisabled,e[7]=m==null?void 0:m.status,e[8]=x):x=e[8];const b=x;let y;e[9]===Symbol.for("react.memo_cache_sentinel")?(y=Je("3396794266").get("enable_interruption",!1),e[9]=y):y=e[9];const C=y&&s&&!o&&!r&&!a&&!c;return u?!1:g||n||C||_||b},df=()=>xe("1927459101"),Mot=()=>xe("877631007");function Gge(t){var e,n,s,o,r,a,l,c,u,d,f,m,p,g,h;return{isOdysseyTurn:!!((n=(e=ve.getCurrentNode(t))==null?void 0:e.message.metadata)!=null&&n.n7jupd_message),hasConduitToken:(t==null?void 0:t.conduitToken)!=null,isProTurn:!!(((s=ve.getCurrentNode(t))==null?void 0:s.message.author.name)===ds.A8KM123||(a=(r=(o=ve.getCurrentNode(t))==null?void 0:o.message.metadata)==null?void 0:r.model_slug)!=null&&a.endsWith("-pro")),isDeepResearchTurn:!!((c=(l=ve.getCurrentNode(t))==null?void 0:l.message.metadata)!=null&&c.deep_research_version),isImageGenAsync:!!((d=(u=ve.getCurrentNode(t))==null?void 0:u.message.metadata)!=null&&d.image_gen_async),isImageGenSync:((m=(f=ve.getCurrentNode(t))==null?void 0:f.message.author)==null?void 0:m.role)===dt.Assistant&&((p=ve.getCurrentNode(t))==null?void 0:p.message.recipient)===Fu,metadataNode:ve.findAsyncTaskMetadataNode(t),isInterruptionBlocked:!!((h=(g=ve.getCurrentNode(t))==null?void 0:g.message.metadata)!=null&&h.block_interruption)}}const Vge=()=>!1;function zge({task:t}){const e=te(),n=t.originalConversationId,s=mo(),o=X(()=>s==null?void 0:s.serverId$()),r=Vge(t.originalConversationId),a=HD(n),l=df(),c=o===n,{clearSystemHintModeTrigger:u}=Cl();return v.useEffect(()=>{var d,f;if((d=t.notificationStatus)!=null&&d.recentlyCompleted&&!((f=t.notificationStatus)!=null&&f.notificationSent)&&!r)if(l&&FR())pt(n,m=>{fo.setShouldRefetchConvoOnFinalize(m,!0)});else{if(!c){const m=i.jsx(GD,{task:t,conversationId:n});a(),Bge(t,e,m)}u(Ke.Research),Er.setTaskNotificationSent(t.taskId)}},[t,e,a,r,u,l,c,n]),i.jsx(Od.Fragment,{})}function Aot(){const t=Zo(Rm.getAllTasksOrdered);return aZ(),t.length?i.jsx(i.Fragment,{children:t.map(e=>i.jsx(zge,{task:e},e.taskId))}):null}function Cd({percentage:t,thickness:e=1/12,className:n,sizeOverride:s,backgroundStrokeClassName:o="stroke-gray-400",transitionDuration:r,transitionTimingFunction:a,onTransitionEnd:l}){const c=s!=null?s:120,u=c*e,d=(c-u)/2,f=2*Math.PI*d,m=f-t/100*f;return i.jsxs("svg",{width:c,height:c,viewBox:"0 0 ".concat(c," ").concat(c),className:n,children:[i.jsx("circle",{className:q("origin-[50%_50%] -rotate-90",o),strokeWidth:u,fill:"transparent",r:d,cx:c/2,cy:c/2}),i.jsx("circle",{className:"origin-[50%_50%] -rotate-90 transition-[stroke-dashoffset]",stroke:"currentColor",strokeWidth:u,strokeDashoffset:m,strokeDasharray:"".concat(f," ").concat(f),fill:"transparent",r:d,cx:c/2,cy:c/2,style:{strokeLinecap:"round",transitionDuration:r,transitionTimingFunction:a},onTransitionEnd:l})]})}const Wge=({size:t=40,className:e="text-blue-400",backgroundStrokeClassName:n="stroke-gray-400"})=>{const s=t,o=1/12,r=s*o,a=(s-r)/2,l=2*Math.PI*a,u=l-60/100*l;return i.jsxs("svg",{width:s,height:s,viewBox:"0 0 ".concat(s," ").concat(s),className:q("animate-spin",e),children:[i.jsx("circle",{className:q("origin-[50%_50%] -rotate-90",n),strokeWidth:r,fill:"transparent",r:a,cx:s/2,cy:s/2}),i.jsx("circle",{className:"origin-[50%_50%] -rotate-90",stroke:"currentColor",strokeWidth:r,strokeDashoffset:u,strokeDasharray:"".concat(l," ").concat(l),fill:"transparent",r:a,cx:s/2,cy:s/2,style:{strokeLinecap:"round"}})]})};function Ea(t,e){t({pathname:"/",search:(e==null?void 0:e.params)&&"?".concat(e.params)},{replace:e==null?void 0:e.replace,state:zD(e==null?void 0:e.config)})}function VD(){"use no forget";const t=jn(),e=Kge(t),n=v.useRef(e!=null?e:{});return e?n.current=e:n.current}function ek(){"use forget";const t=D.c(2),e=VD();let n;return t[0]!==e?(n=qge(),t[0]=e,t[1]=n):n=t[1],n}function qge(t){return zD()}function zD(t){return{newConversationConfig:N({},t)}}function Kge(t){var e;return(e=t.state)==null?void 0:e.newConversationConfig}const wd=re(me,"28a8a0",20,20),Sm=re(me,"c31c21",20,20,!0),WD="personalization:open-memories-modal";function vh({label:t,tooltip:e,Icon:n,tooltipInteractive:s=!1}){return i.jsx(St,{label:e,interactive:s,children:i.jsxs("div",{className:"flex items-center gap-1 text-sm font-semibold opacity-70",children:[n&&i.jsx(n,{className:"icon-sm"}),i.jsx("div",{children:t})]})})}function Not({clientThreadId:t,gizmoId:e}){const n=te(),s=bt(),{openSettings:o}=X3(),r=Fp(),a=yl(),l=k_(),{data:c}=Vp({gizmoId:e,includeMemoryEntries:!1,enabled:l}),u=!!e,d=Soe(),f=ww(c==null?void 0:c.memoryFullPct),m=f!=="control",p=Hs(),g=Ze(t,ve.getIsNewConversation),h=X(()=>qd());if(!l)return null;const _=()=>{var x;if(typeof window<"u")try{(x=window.sessionStorage)==null||x.setItem(WD,"true")}catch(b){}};if(p&&(!g||u))return i.jsx(vh,{label:n.formatMessage(Aa.temporaryChat),tooltip:n.formatMessage(Aa.temporaryChatTooltip),Icon:wd});if(h&&!g)return i.jsx(vh,{label:n.formatMessage(Aa.memoryOff),tooltip:n.formatMessage(Aa.developerModeTooltip),Icon:Sm});if(r&&!a&&!p)return i.jsx(vh,{label:n.formatMessage(Aa.memoryOff),tooltip:n.formatMessage(Aa.memoryOffTooltip),Icon:Sm});if(c&&(c==null?void 0:c.memoryFullPct)>=100&&!p&&!d){const x=()=>{V.logEventWithStatsig("Memory Indicator Upgrade Clicked","chatgpt_memory_indicator_upgrade_clicked",{memoryFullButtonVariant:f}),xs(s,"Memory Indicator")},b=()=>{V.logEventWithStatsig("Memory Indicator Manage Clicked","chatgpt_memory_indicator_manage_clicked",{memoryFullButtonVariant:f}),_(),o(Ts.Personalization)};return i.jsx(vh,{label:n.formatMessage(Aa.memoryFull),tooltip:i.jsx("div",{className:"whitespace-normal",children:i.jsx(P,G(N({},m?Aa.memoryFullTooltipGoldenHour:Aa.memoryFullTooltip),{values:{upgrade:y=>i.jsx("button",{onClick:x,className:"text-token-text-link underline",children:y}),manage:y=>i.jsx("button",{onClick:b,className:"text-token-text-link underline",children:y}),link:y=>i.jsx(ko,{to:Fd(Ts.Personalization),className:"underline",children:y})}}))}),Icon:Sm,tooltipInteractive:!0})}else return null}const Aa=we({temporaryChat:{id:"ConversationPrivacyIndicator.temporaryChat",defaultMessage:"Temporary Chat"},temporaryChatTooltip:{id:"ConversationPrivacyIndicator.temporaryChatTooltip",defaultMessage:"This chat won't appear in your chat history."},memoryOff:{id:"ConversationPrivacyIndicator.memoryOff",defaultMessage:"Memory Off"},memoryOffTooltip:{id:"ConversationPrivacyIndicator.memoryOffTooltip",defaultMessage:"ChatGPT won't remember anything you talk about in this conversation."},developerModeTooltip:{id:"ConversationPrivacyIndicator.developerModeTooltip",defaultMessage:"ChatGPT won't reference past memories, or create new memories from this chat."},memoryFull:{id:"Z4zW/R",defaultMessage:"Memory full"},memoryFullTooltip:{id:"7IKefd",defaultMessage:"ChatGPT's out of space for saved memories. <link>Manage saved memories</link> to create more space."},memoryFullTooltipGoldenHour:{id:"mc0vkm",defaultMessage:"New memories can't be saved. <upgrade>Upgrade</upgrade> for more memory or <manage>manage</manage> saved memories."}}),Iot=re(me,"1bf527",20,20),Kc=re(me,"630ca2",20,20),qD=re(me,"edbcb1",20,20);let s2="",uA="",Pf;const Qt={logProductEvent(t,e){const n=N(N({referrals_session_id:s2,program_name:uA},Pf?{is_referrer:Pf}:{}),e!=null?e:{});V.logEvent(t,n)},logAnnouncementProductEvent(t,e){V.logEvent(t,e)},createNewSession(t,e=void 0){s2=fa(),uA=t,Pf=e},logShowReferralDiscount(t,e){Qt.createNewSession(t,e),Fe.count(Ue.REFERRALS,"referrals.web.showReferralDiscount"),Qt.logProductEvent("Referrals: Show Referral Discount")},logShowReferralLinkGenerationModal(t){Qt.createNewSession(t,!0),Fe.count(Ue.REFERRALS,"referrals.web.showReferralLinkGenerationModal"),Qt.logProductEvent("Referrals: Show Referral Link Generation Modal")},logClickReferralGetLinkButton(){Fe.count(Ue.REFERRALS,"referrals.web.clickReferralGetLinkButton"),Qt.logProductEvent("Referrals: Click Referral Get Link Button")},logCopyReferralLink(){Fe.count(Ue.REFERRALS,"referrals.web.copyReferralLinkSuccess"),Qt.logProductEvent("Referrals: Copy Referral Link")},logClickReferrerIntroNotNowButton(){Fe.count(Ue.REFERRALS,"referrals.web.clickReferrerIntroNotNowButton"),Qt.logProductEvent("Referrals: Click Referrer Intro Not Now Button")},logShowReferrerConclusion(){Fe.count(Ue.REFERRALS,"referrals.web.showReferrerConclusion"),Qt.logProductEvent("Referrals: Show Referrer Conclusion")},logClickUpgradeButton(t){const e=[{key:"is_paying_user",value:t?"true":"false"}];Pf!==void 0&&e.push({key:"is_referrer",value:Pf?"true":"false"}),Fe.count(Ue.REFERRALS,"referrals.web.clickUpgradeButton",e),Qt.logProductEvent("Referrals: Click Upgrade Button",{is_paying_user:t})},logReferralDiscountContinue(){Fe.count(Ue.REFERRALS,"referrals.web.referralDiscountContinue"),Qt.logProductEvent("Referrals: Referral Discount Continue")},logClose(t){Fe.count(Ue.REFERRALS,"referrals.web.close",[{key:"source",value:t}]),V.logEvent("Referrals: Close",{referrals_session_id:s2,source:t})},logClickValidateEmail(){Fe.count(Ue.REFERRALS,"referrals.web.clickValidateEmail"),Qt.logProductEvent("Referrals: Click Validate Email")},logValidateEmailSuccess(){Fe.count(Ue.REFERRALS,"referrals.web.validateEmailSuccess")},logValidateEmailFailure(){Fe.count(Ue.REFERRALS,"referrals.web.validateEmailFailure")},logSendVerificationCode(){Fe.count(Ue.REFERRALS,"referrals.web.sendVerificationCode"),Qt.logProductEvent("Referrals: Send Verification Code")},logClickResendVerificationCodeButton(){Fe.count(Ue.REFERRALS,"referrals.web.resendVerificationCode"),Qt.logProductEvent("Referrals: Click Resend Verification Code Button")},logClickChangeEmailButton(){Fe.count(Ue.REFERRALS,"referrals.web.changeEmail"),Qt.logProductEvent("Referrals: Click Change Email Button")},logClickValidateVerificationCode(){Fe.count(Ue.REFERRALS,"referrals.web.validateVerificationCode"),Qt.logProductEvent("Referrals: Click Validate Verification Code")},logValidateVerificationCodeSuccess(){Fe.count(Ue.REFERRALS,"referrals.web.validateVerificationCodeSuccess")},logValidateVerificationCodeFailure(){Fe.count(Ue.REFERRALS,"referrals.web.validateVerificationCodeFailure")},logApplyDiscount(){Fe.count(Ue.REFERRALS,"referrals.web.applyDiscount"),Qt.logProductEvent("Referrals: Apply Discount")},logMobileSubscriptionTooltipOpen(){Fe.count(Ue.REFERRALS,"referrals.web.mobileSubscriptionTooltipOpen"),Qt.logProductEvent("Referrals: Show Mobile Subscription Tooltip")},logShowReferralUpsellAnnouncementBanner(){Fe.count(Ue.REFERRALS,"referrals.web.showReferralUpsellAnnouncementBanner"),Qt.logAnnouncementProductEvent("Referrals: Show Referral Upsell Announcement Banner")},logShowReferrerRedemptionBanner(){Fe.count(Ue.REFERRALS,"referrals.web.showReferrerRedemptionBanner"),Qt.logAnnouncementProductEvent("Referrals: Show Referrer Redemption Banner")},logShowRefereeRedemptionBanner(t){Fe.count(Ue.REFERRALS,"referrals.web.showRefereeRedemptionBanner"),Qt.logAnnouncementProductEvent("Referrals: Show Referee Redemption Banner",{referral_code:t})},logClickReferralUpsellButton(){Fe.count(Ue.REFERRALS,"referrals.web.clickReferralUpsellButton"),Qt.logProductEvent("Referrals: Click Referral Upsell Button")},logClickReferrerRedeemButton(){Fe.count(Ue.REFERRALS,"referrals.web.clickReferrerRedeemButton"),Qt.logProductEvent("Referrals: Click Referrer Redeem Button")},logClickRefereeRedeemButton(t){Fe.count(Ue.REFERRALS,"referrals.web.clickRefereeRedeemButton"),Qt.logProductEvent("Referrals: Click Referee Redeem Button",{referral_code:t})},logCloseReferralUpsellAnnouncementBanner(){Fe.count(Ue.REFERRALS,"referrals.web.closeReferralUpsellAnnouncementBanner"),Qt.logAnnouncementProductEvent("Referrals: Close Referral Upsell Announcement Banner")},logCloseReferrerRedemptionBanner(){Fe.count(Ue.REFERRALS,"referrals.web.closeReferrerRedemptionBanner"),Qt.logAnnouncementProductEvent("Referrals: Close Referrer Redemption Banner")},logCloseRefereeRedemptionBanner(t){Fe.count(Ue.REFERRALS,"referrals.web.closeRefereeRedemptionBanner"),Qt.logAnnouncementProductEvent("Referrals: Close Referee Redemption Banner",{referral_code:t})},logShowReferralUpsellHomepageButton(){Fe.count(Ue.REFERRALS,"referrals.web.showReferralUpsellHomepageButton"),Qt.logProductEvent("Referrals: Show Referral Upsell Homepage Button")},logClickReferralUpsellHomepageButton(){Fe.count(Ue.REFERRALS,"referrals.web.clickReferralUpsellHomepageButton"),Qt.logProductEvent("Referrals: Click Referral Upsell Homepage Button")}};function KD(t=!0){return ut({queryKey:["referral-upsell-announcement"],queryFn:async()=>await Jp.getUpsellAnnouncementBannerInfo(),enabled:t})}class Jp{static async getReferralProgramMetadata(e){return ue.safeGet("/referrals/{program_name}",{parameters:{path:{program_name:e}},authOption:Ot.SendIfAvailable})}static async getReferralCodeMetadata(e){return ue.safeGet("/referrals/{referral_code}/metadata",{parameters:{path:{referral_code:e}},authOption:Ot.SendIfAvailable})}static async createReferralCode(e){return ue.safePost("/referrals/create_referral_code",{requestBody:{transaction_id:e}})}static async getEnrollmentDetails(){return ue.safeGet("/referrals/enrollment_details")}static async validateEmail(e,n){return ue.safePost("/referrals/validate_email",{requestBody:{email:e,program_name:n}})}static async sendVerificationCode(e){return ue.safePost("/referrals/send_verification_code",{requestBody:{transaction_id:e}})}static async validateVerificationCode(e,n){return ue.safePost("/referrals/validate_verification_code",{requestBody:{transaction_id:e,verification_code:n}})}static async redeemReferral(e,n){return ue.safePost("/referrals/{referral_code}/redeem",{parameters:{path:{referral_code:e}},requestBody:{transaction_id:n}})}static async getReferralDiscount(){return ue.safeGet("/referrals/available_referral_discount")}static async getUpsellAnnouncementBannerInfo(){return ue.safeGet("/referrals/upsell_announcement_banner_info")}static async getIsEligibleForReferrals(){return ue.safeGet("/referrals/is_eligible_for_referrals")}static async trackReferralSignup(e){return ue.safePost("/referrals/track_referral_signup",{parameters:{query:{referral_code:e}},authOption:Ot.SendIfAvailable})}}function jot(){const t=bt(),{data:e}=ut({queryKey:["is-eligible-for-referrals"],queryFn:xe("550432558")?()=>Jp.getIsEligibleForReferrals():xC}),n=e==null?void 0:e.eligible_program_name;if(v.useEffect(()=>{n&&Qt.logShowReferralUpsellHomepageButton()},[n,e]),!n)return null;const s="Refer";return i.jsx(St,{side:"bottom",label:s,children:i.jsx(Se,{color:"secondary",className:q("text-token-text-primary relative"),icon:qD,onClick:()=>{Qt.logClickReferralUpsellHomepageButton(),t("/refer/".concat(n))},label:s,children:s})})}const Yge=iZ(t=>({gizmo_id:t,kind:Bt.GizmoInteraction}),{limit:16});function Pot(t,e){return e&&((t==null?void 0:t.kind)===Bt.GizmoInteraction||(t==null?void 0:t.kind)===Bt.PrimaryAssistant)?Yge(e):t}function Zge(t){var o;const e=fl(),n=Et();return!(n==null?void 0:n.isWorkspaceAccount())||((o=e==null?void 0:e.includes(t))!=null?o:!1)}const Qge=re(me,"f7f872",20,20),ff=re(me,"823ad8",20,20,!0),wc=re(me,"974afd",20,20),Rot=re(me,"30e002",20,20),tk=re(me,"ce3544",20,20),nk=re(me,"b81341",20,20),W_=re(me,"ee1f3e",20,20),Oot=re(me,"80b059",20,20),Lot=re(me,"db3b6c",20,20),q_=re(me,"61ee0c",20,20),Jge=Object.freeze(Object.defineProperty({__proto__:null,default:q_},Symbol.toStringTag,{value:"Module"})),tr=re(me,"6d87e1",20,20),Xge=Object.freeze(Object.defineProperty({__proto__:null,default:tr},Symbol.toStringTag,{value:"Module"})),Dot=re(me,"23d2ff",20,20),YD=re(me,"7c5315",44,44),yi=re(me,"3ee541",20,20),Bot=re(me,"13322a",20,20);class qv{constructor(e){ye(this,"conversationId");this.conversationId=e}}function sk(){const t=Nt(),e=Dt();return v.useCallback(async({newGizmoId:s,conversation:o,previousGizmoId:r,optimistic:a=!0,contextScopes:l})=>{const c=o instanceof qv?o.conversationId:o.id,u=a&&!(o instanceof qv);let d=()=>{};const f=()=>{r&&Bs(r)&&t.invalidateQueries({queryKey:[EM,{gizmoId:r}]}),s&&Bs(s)&&t.invalidateQueries({queryKey:[EM,{gizmoId:s}]}),(!s||!r||!Bs(s)||!Bs(r))&&t.invalidateQueries({queryKey:sm()}),r&&t.invalidateQueries({queryKey:y1(t,r,!1).queryKey}),s&&t.invalidateQueries({queryKey:y1(t,s,!1).queryKey})};let m=!1;u&&(lZ({conversation:o,previousGizmoId:r,newGizmoId:s}),m=!0,d=cZ({queryClient:t,newGizmoId:s,conversation:o,previousGizmoId:r}));try{const p={gizmo_id:s==null?"":s};l&&l.length>0&&(p.context_scopes=l),await ue.safePatch("/conversation/{conversation_id}",{parameters:{path:{conversation_id:c}},requestBody:p}),m&&uZ(c)}catch(p){m&&dZ(c),a&&(d(),f()),e.danger(kn.moveConversationToProjectError,{toastId:"move_conversation_to_snorlax_error",hasCloseButton:!0})}a||f()},[t,e])}const ehe="3553340571";function ok(){return mn(ehe)}function rk(){var e;const t=ok();return(e=t==null?void 0:t.get("enable_api",!1))!=null?e:!1}function the(){var e;const t=ok();return(e=t==null?void 0:t.get("enable_gizmo_conversion",!1))!=null?e:!1}const nhe=({gizmoResource:t})=>{const e=Dt(),n=te(),[s,o]=v.useState(!1),r=bt(),a=the();return{isConverting:s,handleConvertToSkill:async()=>{var c,u;if(!s)try{o(!0);const d=await ue.safePost("/hazelnuts/gpts/{gizmo_id}/convert",{parameters:{path:{gizmo_id:t.gizmo.id}}}),f=(u=(c=d==null?void 0:d.name)!=null?c:t.gizmo.display.name)!=null?u:"skill";e.success(n.formatMessage(dA.convertToSkillSuccess,{skillName:f})),d!=null&&d.id&&r("/skills/editor/".concat(d.id))}catch(d){const f=Q0(d);e.danger(f!=null?f:n.formatMessage(dA.convertToSkillFailure))}finally{o(!1)}},isHazelnutsEnabled:a}},Fot=({gizmoResource:t,canEdit:e})=>(nhe({gizmoResource:t}),null),dA=we({convertToSkill:{defaultMessage:"Convert to skill",id:"GizmoInformation.convertToSkill"},convertingToSkill:{defaultMessage:"Converting...",id:"GizmoInformation.convertingToSkill"},convertToSkillSuccess:{defaultMessage:"Converted {skillName} to a skill",id:"GizmoInformation.convertToSkillSuccess"},convertToSkillFailure:{defaultMessage:"Couldn't convert this GPT. Please try again.",id:"GizmoInformation.convertToSkillFailure"}}),ak=re(me,"787580",20,20);function ik({title:t,description:e,confirmText:n,cancelText:s,isOpen:o=!1,onClose:r,onConfirm:a,primaryButtonColor:l="primary",textCenter:c=!1,loading:u=!1,children:d}){const f=te();return i.jsx(en,{testId:"modal-confirm",isOpen:o,onClose:r,title:t,description:e,textCenter:c,primaryButton:i.jsx(Es.Button,{title:n!=null?n:f.formatMessage(fA.confirmLabel),color:l,onClick:a,loading:u}),secondaryButton:i.jsx(Es.Button,{title:s!=null?s:f.formatMessage(fA.cancelLabel),color:"secondary",onClick:r}),children:d})}const fA=we({confirmLabel:{id:"ConfirmModal.confirmLabel",defaultMessage:"Confirm"},cancelLabel:{id:"ConfirmModal.cancelLabel",defaultMessage:"Cancel"}}),oa={messages:we({delete:{id:"jawbone.delete",defaultMessage:"Delete"},pause:{id:"jawbone.pause",defaultMessage:"Pause"},pauseFailure:{id:"jawbone.pauseAutomationFailure",defaultMessage:"Failed to pause the automation"},resume:{id:"jawbone.resume",defaultMessage:"Resume"},enableFailure:{id:"jawbone.resumeFailure",defaultMessage:"Failed to resume the automation"},notificationsTitle:{id:"jawbone.notificationsTitle",defaultMessage:"Notifications"},notificationsDesktopAndMobile:{id:"jawbone.notificationsDesktopAndMobile",defaultMessage:"Desktop & mobile"},notificationsEmail:{id:"jawbone.notificationsEmail",defaultMessage:"Email"}})};class il{static async getAutomations(e=null,n=null){return ue.safeGet("/automations",{parameters:{query:{cursor:e,filter:n}}})}static getAutomationQueryKey(e){return["automation",e]}static async getAutomation(e){return ue.safeGet("/automation/{automation_id}",{parameters:{path:{automation_id:e}}})}static async setAutomationStatus(e,n){return ue.safePost("/automations/set_status",{requestBody:{jawbone_id:e,is_enabled:n}})}static async removeAutomation(e){return ue.safePost("/automations/remove",{requestBody:{automation_id:e}})}static async saveAutomation(e,n,s,o,r,a,l,c){return ue.safePost("/automations/save",{requestBody:{jawbone_id:e,title:n,schedule:s,is_enabled:o,prompt:r,default_timezone:a,notifications_enabled:!1,email_enabled:!1,schedule_components:l,last_run_time:c}})}static async getAutomationNextRunTimes(e,n=null,s=5){return ue.safeGet("/automation/{automation_id}/next_run_times",{parameters:{path:{automation_id:e},query:{last_run_time:n,page_size:s}}})}}const Ht=we({pageTitle:{id:"CHk10n",defaultMessage:"Tasks"},emptyStateTitle:{id:"WZwnBu",defaultMessage:"Start creating tasks"},emptyStateDescription:{id:"VGFt6n",defaultMessage:"Ask ChatGPT to do things in the future."},emptyStateTryYourOwn:{id:"ARS7Xs",defaultMessage:"Try your own"},makingAutomation:{id:"nngZkS",defaultMessage:"Creating task..."},updatingAutomation:{id:"TtVqbi",defaultMessage:"Updating task..."},cancelModalDescription:{id:"ovdvFi",defaultMessage:"Are you sure you want to cancel? Your changes will not be saved."},pauseBanner:{id:"Shy3x+",defaultMessage:"This task is paused."},editModalTitle:{id:"TATVBL",defaultMessage:"Task"},editModalName:{id:"6yXwm0",defaultMessage:"Name"},editModalInstructions:{id:"6m8uZT",defaultMessage:"Instructions"},editModalSchedule:{id:"huULIs",defaultMessage:"When"},editModalDelete:{id:"jmdwEu",defaultMessage:"Delete"},editModalCancel:{id:"CkqFyL",defaultMessage:"Cancel"},editModalSave:{id:"tw230z",defaultMessage:"Save"},editModalSaveSuccess:{id:"2bPf6t",defaultMessage:"Task saved"},editModalSaveFailure:{id:"s9XRUo",defaultMessage:"Failed to save task"},editModalMissingTaskName:{id:"Gvl61x",defaultMessage:"A task name is required."},editModalMissingInstructions:{id:"50eJR5",defaultMessage:"Instructions are required."},editModalTooFarInFuture:{id:"pRMB4Q",defaultMessage:"Tasks cant be scheduled more than 2 years in the future."},editModalInPast:{id:"og7U6X",defaultMessage:"Please choose a date in the future."},newScheduleTitle:{id:"T+KLUF",defaultMessage:"New schedule"},editScheduleTitle:{id:"foaSfJ",defaultMessage:"Edit schedule"},seeMore:{id:"e818FO",defaultMessage:"See more"},scheduleFrequencyOnce:{id:"ubLvlf",defaultMessage:"Doesn't repeat"},scheduleFrequencyDaily:{id:"fCPVKk",defaultMessage:"Daily"},scheduleFrequencyWeekly:{id:"LBJNa8",defaultMessage:"Weekly"},scheduleFrequencyMonthly:{id:"KtDbq5",defaultMessage:"Monthly"},scheduleFrequencyYearly:{id:"jPb1ga",defaultMessage:"Annually"},scheduleFrequencyCustom:{id:"aW+M+B",defaultMessage:"Custom"},scheduleNextThreeTimes:{id:"jHrFIq",defaultMessage:"Next three times"},scheduleCustomScheduleTitle:{id:"S55b0f",defaultMessage:"To update this custom schedule, just ask ChatGPT"},scheduleCustomScheduleContent:{id:"HzgAWq",defaultMessage:'For example, "do this every 3 weeks on Tuesday"'},scheduleCustomScheduleOpenChat:{id:"QIZwlV",defaultMessage:"Open chat"},pausedPill:{id:"H45WpI",defaultMessage:"Paused"},customSchedule:{id:"xBDjE1",defaultMessage:"Custom schedule"},deleteModalConfirmation:{id:"VvP/mR",defaultMessage:"Are you sure you want to delete this task? This cannot be undone."},deleteModalSuccess:{id:"yOFuly",defaultMessage:"Task deleted"},deleteScheduleModalSuccess:{id:"o9VBGa",defaultMessage:"Scheduled task deleted"},deleteModalFailure:{id:"/sJV6Y",defaultMessage:"Failed to delete task"},deleteModalTitle:{id:"ghUY4y",defaultMessage:"Delete task"},lastRunToday:{id:"32N654",defaultMessage:"Today"},lastRunYesterday:{id:"0J3FW6",defaultMessage:"Yesterday"},notificationsBannerAllow:{id:"cw4hGs",defaultMessage:"Allow"},notificationsBannerNotNow:{id:"zwEnmc",defaultMessage:"Not now"},notificationsBannerTitle:{id:"aZg1Bl",defaultMessage:"Turn on desktop notifications"},notificationsBannerContent:{id:"I6r+8F",defaultMessage:"Get notified when theres an update on your tasks."},notificationsDisabledBannerTitle:{id:"mVWjpz",defaultMessage:"Notifications are disabled in your browser."},notificationsDisabledBannerContent:{id:"wAahVE",defaultMessage:"You'll need to visit your browser preferences to allow them."},attachmentEdit:{id:"/KHfm0",defaultMessage:"Edit"},attachmentManageAll:{id:"hlEgKT",defaultMessage:"Schedules"},localizedRuntimeTomorrow:{id:"yK7y4m",defaultMessage:"Tomorrow"},scheduled:{id:"Vor1nS",defaultMessage:"Scheduled"},paused:{id:"ATWDeu",defaultMessage:"Paused"},completed:{id:"Ur4kmZ",defaultMessage:"Completed"}}),_r={nextRunTime:t=>i.jsx(P,{id:"/OfbaB",defaultMessage:"Next run {nextRunTime}",values:{nextRunTime:t}}),runtimeDaily:t=>i.jsx(P,{id:"jawbone.runtime.daily",defaultMessage:"Daily at {localizedTime}",values:{localizedTime:t}}),runtimeWeeklyShort:t=>i.jsx(P,{id:"iTSfMl",defaultMessage:"Weekly on {localizedDayOfWeek}",values:{localizedDayOfWeek:t}}),runtimeWeekly:(t,e)=>i.jsx(P,{id:"jawbone.runtime.weekly",defaultMessage:"Weekly on {localizedDayOfWeek} at {localizedTime}",values:{localizedDayOfWeek:t,localizedTime:e}}),runtimeMonthly:t=>i.jsx(P,{id:"jawbone.runtime.monthly",defaultMessage:"Monthly on the {monthDay, selectordinal, one {#st} two {#nd} few {#rd} other {#th}}",values:{monthDay:t}}),runtimeYearly:(t,e)=>i.jsx(P,{id:"jawbone.runtime.yearly",defaultMessage:"Annually on {localizedMonth} {day}",values:{localizedMonth:t,day:e}}),runtimeToday:t=>i.jsx(P,{id:"hStcUW",defaultMessage:"Today at {localizedTime}",values:{localizedTime:t}}),runtimeTomorrow:t=>i.jsx(P,{id:"BF9QGd",defaultMessage:"Tomorrow at {localizedTime}",values:{localizedTime:t}}),runtimeNextFiveDays:(t,e)=>i.jsx(P,{id:"UdC7R6",defaultMessage:"{localizedDayOfWeek} at {localizedTime}",values:{localizedDayOfWeek:t,localizedTime:e}}),runtimeThisYear:(t,e)=>i.jsx(P,{id:"L9Pqre",defaultMessage:"{localizedMonthDay} at {localizedTime}",values:{localizedMonthDay:t,localizedTime:e}}),runtimeOutsideThisYear:(t,e)=>i.jsx(P,{id:"XOR8K9",defaultMessage:"{localizedDate} at {localizedTime}",values:{localizedDate:t,localizedTime:e}})},Xp=tn(ls(()=>({jawboneById:{},cursorsByFilter:{scheduled:null,paused:null,finished:null},maxBannerClientThreadId:void 0}))),Dl=Xp.getState,du=Xp.setState,eg={initJawbonesFromServerData:(t,e,n)=>{du(s=>{t.forEach(o=>{s.jawboneById[o.id]=o}),s.cursorsByFilter[n]=e})},removeAutomation:t=>{du(e=>{delete e.jawboneById[t]})},setAutomation:(t,e)=>{du(n=>{const s=n.jawboneById[t];if(!s){n.jawboneById[t]=e;return}const o=new Date(s.updated_at),r=new Date(e.updated_at);(isNaN(o.getTime())||isNaN(r.getTime())||o<r)&&(n.jawboneById[t]=e)})},setAutomationStatus:(t,e)=>{du(n=>{n.jawboneById[t].is_enabled=e})},clearMaxBannerClientThreadId:()=>{du(t=>{t.maxBannerClientThreadId=void 0})},setMaxBannerClientThreadId:t=>{du(e=>{e.maxBannerClientThreadId=t})}},tg={getAllJawbonesGrouped:(t=Dl())=>rhe(Object.values(t.jawboneById)),getAutomation:(t,e=Dl())=>e.jawboneById[t],getCursor:(t,e=Dl())=>e.cursorsByFilter[t],getHasJawbones:(t=Dl())=>Object.values(t.jawboneById).length>0,getTargetTimeUTC:(t,e=Dl())=>{var n;return(n=e.jawboneById[t])==null?void 0:n.target_time_utc},hasJawbones:(t=Dl())=>Object.keys(t.jawboneById).length>0,getMaxBannerClientThreadId:(t=Dl())=>t.maxBannerClientThreadId};function o2(t){const{isLoading:e}=jc({queryKey:["automations",t],queryFn:async({pageParam:n})=>{const s=await il.getAutomations(n,t);return eg.initJawbonesFromServerData(s.items,s.cursor,t),s},initialPageParam:tg.getCursor(t),getNextPageParam:n=>{var s;return(s=n.cursor)!=null?s:void 0}});return{isLoading:e}}function she(){const{isLoading:t}=o2("scheduled"),{isLoading:e}=o2("paused"),{isLoading:n}=o2("finished");return{isLoadingScheduled:t,isLoadingPaused:e,isLoadingFinished:n}}function ZD({automation_id:t,onSuccess:e,onError:n}){return zt({mutationFn:({is_enabled:s})=>il.setAutomationStatus(t,s),onSuccess:s=>{eg.setAutomation(s.id,s),e&&e()},onError:(s,o)=>{n&&n(o.is_enabled)}})}function ohe({automation_id:t,onSuccess:e,onError:n}){return zt({mutationFn:()=>il.removeAutomation(t),onSuccess:()=>{eg.removeAutomation(t),e&&e()},onError:()=>{n&&n()}})}function rhe(t){return t.reduce((e,n)=>(n.next_run_times.length===0?e.completed.automations.push(n):n.is_enabled?e.scheduled.automations.push(n):e.paused.automations.push(n),e),{scheduled:{label:Ht.scheduled,filter:"scheduled",automations:[]},paused:{label:Ht.paused,filter:"paused",automations:[]},completed:{label:Ht.completed,filter:"finished",automations:[]}})}function lk({item:t,onClose:e,onConfirm:n}){const s=te(),o=Dt(),r=xe("733205176");let a;r?a=Ht.deleteScheduleModalSuccess:a=Ht.deleteModalSuccess;const{mutate:l,isPending:c}=ohe({automation_id:t.id,onSuccess:()=>{o.success(s.formatMessage(a),{hasCloseButton:!0}),n==null||n(),e()},onError:()=>{o.danger(Ht.deleteModalFailure,{hasCloseButton:!0,toastId:"jawbone_delete_modal"})}});return i.jsx(ik,{isOpen:!0,title:s.formatMessage(Ht.deleteModalTitle),primaryButtonColor:"danger",onClose:e,confirmText:s.formatMessage(oa.messages.delete),onConfirm:()=>{l()},loading:c,children:i.jsx("div",{className:"text-sm",children:i.jsx(P,N({},Ht.deleteModalConfirmation))})})}const ahe=Object.freeze(Object.defineProperty({__proto__:null,JawboneDeleteModal:lk},Symbol.toStringTag,{value:"Module"})),ng=re(me,"d0e761",20,20),K_=re(me,"6eb6ca",16,16,!0),To=v.createContext({scheduleComponents:{frequency:"custom"},setFrequency:()=>{},setStartDate:()=>{},setByDay:()=>{},setByMonthDay:()=>{},setByYearDay:()=>{},setByMonth:()=>{},setTime:()=>{},startDate:void 0,nextRunTimes:[],scheduleErrors:void 0,validFrequencies:void 0,setValidFrequencies:()=>{}});function zm({initialScheduleComponents:t,initialValidFrequencies:e,nextRunTimes:n,children:s}){const[o,r]=v.useState(t),[a,l]=v.useState(void 0),[c,u]=v.useState(void 0),[d,f]=v.useState(e);return i.jsx(To.Provider,{value:{scheduleComponents:o,setFrequency:m=>{r(G(N({},o),{frequency:m}))},setStartDate:m=>{l(m),u(ihe(m)),r(G(N({},o),{start_time:m.toISOString()}))},setByDay:m=>{r(G(N({},o),{by_day:m}))},setByMonthDay:m=>{r(G(N({},o),{by_month_day:m}))},setByYearDay:m=>{r(G(N({},o),{by_year_day:m}))},setByMonth:m=>{r(G(N({},o),{by_month:m}))},setTime:(m,p)=>{r(G(N({},o),{by_hour:m,by_minute:p,by_second:0}))},startDate:a,scheduleErrors:o.frequency!=="once"?void 0:c,nextRunTimes:n,setValidFrequencies:f,validFrequencies:d},children:s})}function ihe(t){let e=!1;const n=new Date;n.setFullYear(n.getFullYear()+2),t.getTime()>=n.getTime()&&(e=!0);let s=!1;const o=new Date;if(o.setSeconds(0,0),t.getTime()<o.getTime()&&(s=!0),e||s)return{tooFarInFuture:e,inPast:s}}function QD(t){switch(t.frequency){case"once":return t.start_time?new Date(t.start_time):void 0;case"daily":case"weekly":case"monthly":case"yearly":return t.by_hour==null||t.by_minute==null?void 0:new Date(0,0,0,t.by_hour,t.by_minute);case"custom":return}}function lhe(t,e){const n=e.scheduleComponents.start_time?new Date(e.scheduleComponents.start_time):new Date;n.setHours(t.getHours(),t.getMinutes()),e.setStartDate(n)}function che(t,e){var o,r;const n=QD(e.scheduleComponents),s=new Date(t);s.setHours((o=n==null?void 0:n.getHours())!=null?o:0,(r=n==null?void 0:n.getMinutes())!=null?r:0),e.setStartDate(s)}function uhe(t,e){const n=e.scheduleComponents.start_time?new Date(e.scheduleComponents.start_time):new Date;n.setDate(t),e.setStartDate(n)}function dhe({initialDate:t,onClick:e}){const n=te(),{scheduleComponents:s}=v.useContext(To),o=v.useMemo(()=>fhe(s),[s]),[r,a]=v.useState(t),c=new Intl.DateTimeFormat(n.locale,{month:"short",year:"numeric"}).format(r);return i.jsxs("div",{className:"mx-5 my-2 flex flex-col gap-0.5",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"grow text-lg font-semibold",children:c}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(mA,{onClick:()=>a(new Date(r.getFullYear(),r.getMonth()-1,1)),children:i.jsx(K_,{className:"icon-sm"})}),i.jsx(mA,{onClick:()=>{a(new Date(r.getFullYear(),r.getMonth()+1,1))},children:i.jsx(zi,{className:"icon-sm"})})]})]}),i.jsx(phe,{visibleDate:r,selectedDate:o,onClick:e})]})}function mA(t){const s=t,{children:e}=s,n=De(s,["children"]);return i.jsx("button",G(N({},n),{className:"flex h-10 w-10 items-center justify-center",children:e}))}function fhe(t){return t.start_time?new Date(t.start_time):void 0}function pA(t,e){return new Date(t,e+1,0).getDate()}function mhe(t,e){return new Date(t,e,1).getDay()}function phe({visibleDate:t,selectedDate:e,onClick:n}){const s=te(),o=v.useContext(To),r=6,a=v.useMemo(()=>{const u=t.getFullYear(),d=t.getMonth(),f=pA(u,d),m=mhe(u,d),p=[];for(let h=m-1;h>=0;h--)p.push(new Date(u,d-1,pA(u,d-1)-h));for(let h=1;h<=f;h++)p.push(new Date(u,d,h));const g=r*7-p.length;for(let h=1;h<=g;h++)p.push(new Date(u,d+1,h));return p},[t]),l=v.useMemo(()=>{const u=new Intl.DateTimeFormat(s.locale,{weekday:"narrow"});return Array.from({length:7},(d,f)=>u.format(new Date(1970,0,f+4)))},[s.locale]),c=new Date;return c.setHours(0,0,0,0),i.jsxs("div",{children:[i.jsx("div",{className:"flex",children:l.map((u,d)=>i.jsx("div",{className:"flex h-10 w-10 items-center justify-center text-sm font-medium",children:u},d))}),Array.from({length:r}).map((u,d)=>i.jsx("div",{className:"flex",children:a.slice(d*7,(d+1)*7).map(f=>{const m=f>=c;return i.jsx("button",{className:"h-10 w-10",onClick:()=>{m&&(che(f,o),n())},children:i.jsx(JD,{dayNumber:f.getDate(),isSelected:!!e&&e.toDateString()===f.toDateString(),isSelectable:m})},f.getDay())})},d))]})}function JD({dayNumber:t,isSelected:e,isSelectable:n}){return i.jsx("div",{className:"h-full w-full p-1",children:i.jsx("div",{className:q("flex h-full w-full items-center justify-center rounded-full text-sm",!n&&"text-token-text-tertiary",!e&&n&&"hover:bg-token-main-surface-secondary",e&&"bg-black font-semibold text-white dark:bg-white dark:text-black"),children:t})})}function ghe({onClick:t,selectedDay:e}){const n=v.useContext(To),s=v.useMemo(()=>{const o=[];let r=1;for(let a=0;a<5;a++){const l=[];for(let c=0;c<7&&r<=31;c++){const u=r;l.push(i.jsx("button",{className:"h-10 w-10 text-sm",onClick:()=>{uhe(u,n),t(u)},children:i.jsx(JD,{dayNumber:u,isSelectable:!0,isSelected:r===e},r)},r)),r++}o.push(i.jsx("div",{className:"flex",children:l},a))}return i.jsxs("div",{children:[i.jsx("p",{className:"ms-2 mb-2 text-sm font-semibold",children:i.jsx(P,{id:"WOVV2Z",defaultMessage:"Repeat every month on the"})}),i.jsx("div",{children:o})]})},[e,t,n]);return i.jsx("div",{children:s})}const hhe="flex-1",_he="max-h-96 overflow-y-auto";function sg({rootClassName:t,contentClassName:e,trigger:n,children:s,open:o,onOpenChange:r,onCloseAutoFocus:a}){return i.jsx("div",{className:q(t!=null?t:hhe),children:i.jsxs(ee.Root,{open:o,onOpenChange:r,children:[n,i.jsx(ee.Portal,{children:i.jsx(ee.Content,{className:e!=null?e:_he,side:"bottom",onCloseAutoFocus:a,children:s})})]})})}const xhe="w-full justify-start rounded-lg border-token-border-medium";function og({className:t,showError:e=!1,children:n}){return i.jsx(ee.Trigger,{className:q(xhe,t),style:{borderColor:e?"var(--text-error)":void 0},children:i.jsxs("div",{className:"flex w-full items-center gap-1",children:[i.jsx("div",{className:"grow text-start",children:n}),i.jsx(ng,{className:"icon-sm text-token-text-tertiary"})]})})}function ck({options:t,initialOption:e,showError:n=!1,onClick:s}){var o;return i.jsx(sg,{trigger:i.jsx(og,{showError:n,children:(o=e==null?void 0:e.label)!=null?o:t[0].label}),children:i.jsx(uk,{options:t,onClick:s})})}function uk({options:t,onClick:e}){return i.jsx(i.Fragment,{children:t.map((n,s)=>i.jsx(ee.Item,{onClick:()=>e==null?void 0:e(n),children:n.label},s))})}function XD({targetTimeUTC:t,useShortForm:e=!1}){return i.jsx(WC,{fallback:void 0,name:"JawboneLocalizedRuntime",children:i.jsx(yhe,{targetTimeUTC:t,useShortForm:e})})}function yhe({targetTimeUTC:t,useShortForm:e=!1}){const n=te(),{localDate:s,today:o,tomorrow:r,dayAfterTomorrow:a,newWeek:l,localizedTime:c}=bhe(t,n.locale);if(s.toDateString()===o.toDateString())return _r.runtimeToday(c);if(s.toDateString()===r.toDateString())return _r.runtimeTomorrow(c);if(s>=a&&s<l){const u=new Intl.DateTimeFormat(n.locale,{weekday:"long"}).format(s);return _r.runtimeNextFiveDays(u,c)}else if(s.getFullYear()===o.getFullYear()){const u=new Intl.DateTimeFormat(n.locale,{month:"long",day:"numeric"}).format(s);return e?u:_r.runtimeThisYear(u,c)}else{const u=new Intl.DateTimeFormat(n.locale,{year:"numeric",month:"short",day:"numeric"}).format(s);return e?u:_r.runtimeOutsideThisYear(u,c)}}function bhe(t,e){const n=new Date(t);if(isNaN(n.getTime()))throw new Error("Invalid targetTimeUTC provided: ".concat(t));const s=n,o=new Date;o.setHours(0,0,0,0);const r=new Date(o);r.setDate(r.getDate()+1);const a=new Date(o);a.setDate(a.getDate()+2);const l=new Date(o);l.setDate(o.getDate()+7);const c=new Intl.DateTimeFormat(e,{hour:"numeric",minute:s.getMinutes()===0?void 0:"numeric",hour12:!0}).format(s);return{localDate:s,today:o,tomorrow:r,dayAfterTomorrow:a,newWeek:l,localizedTime:c}}function eB(t){const e=new Date,n=e.getFullYear(),s=e.getMonth(),o=e.getDate();let r;if(r=t.match(/^(\d{1,2}):(\d{2})\s?([ap]m)$/i),r){let a=parseInt(r[1],10);const l=parseInt(r[2],10),c=r[3].toLowerCase();if(a>=1&&a<=12&&l>=0&&l<=59)return c==="pm"&&a!==12&&(a+=12),c==="am"&&a===12&&(a=0),new Date(n,s,o,a,l)}if(r=t.match(/^([ap]m)\s?(\d{1,2}):(\d{2})$/i),r){let a=parseInt(r[2],10);const l=parseInt(r[3],10),c=r[1].toLowerCase();if(a>=1&&a<=12&&l>=0&&l<=59)return c==="pm"&&a!==12&&(a+=12),c==="am"&&a===12&&(a=0),new Date(n,s,o,a,l)}if(r=t.match(/^(\d{1,2})\s?([ap]m)$/i),r){let a=parseInt(r[1],10);const l=r[2].toLowerCase();if(a===12&&l==="am")return a=0,new Date(n,s,o,a,0);if(a>=1&&a<=11&&l==="pm")return a+=12,new Date(n,s,o,a,0);if(a>=1&&a<=12)return new Date(n,s,o,a,0)}if(r=t.match(/^(\d{1,2}):(\d{2})$/),r){const a=parseInt(r[1],10),l=parseInt(r[2],10);if(a>=0&&a<=23&&l>=0&&l<=59)return new Date(n,s,o,a,l)}if(r=t.match(/^(\d{1,2})(\d{2})$/),r){const a=parseInt(r[1],10),l=parseInt(r[2],10);if(a>=0&&a<=23&&l>=0&&l<=59)return new Date(n,s,o,a,l)}if(r=t.match(/^(\d{1,2})$/),r){const a=parseInt(r[1],10);if(a>=0&&a<=23)return new Date(n,s,o,a,0)}if(r=t.match(/^(\d{1,2}):$/),r){const a=parseInt(r[1],10);if(a>=0&&a<=23)return new Date(n,s,o,a,0)}}function vhe(t){return eB(t)}function tB(t){return t?t.toLocaleTimeString([],{hour:"numeric",minute:"2-digit",hour12:!(new Intl.DateTimeFormat().resolvedOptions().hourCycle==="h23"||new Intl.DateTimeFormat().resolvedOptions().hourCycle==="h24")}):""}function nB(t){if(!t)return"";const e=String(t.getHours()).padStart(2,"0"),n=String(t.getMinutes()).padStart(2,"0");return"".concat(e,":").concat(n)}function sB(t,e){const n=new Date(0,0,0,t,e);return tB(n)}function She(t,e){return"".concat(String(t).padStart(2,"0"),":").concat(String(e).padStart(2,"0"))}function gA(t){const[e,n]=t.split(":"),s=Number.parseInt(e!=null?e:"",10),o=Number.parseInt(n!=null?n:"",10);return Number.isNaN(s)||Number.isNaN(o)?"":sB(s,o)}function hA(t){const e=eB(t);if(e)return nB(e)}function rg(){const t=v.useContext(To),[e,n]=v.useState(!1),[s,o]=v.useState(!0),r=v.useRef(null),a=v.useRef(null),l=v.useMemo(()=>Che(),[]),c=QD(t.scheduleComponents),u=v.useMemo(()=>c!=null?c:new Date(new Date().setHours(14,0,0,0)),[c]);v.useEffect(()=>{c||oB(u,t)},[c,u,t]);const d=tB(u),f=nB(u),[m,p]=v.useState(!0),g=v.useRef(f),h=v.useRef(d),_=v.useRef(h.current);v.useEffect(()=>{const y=setTimeout(()=>{e&&r.current&&r.current.select()},0);return()=>clearTimeout(y)},[e]),v.useEffect(()=>{const y=setTimeout(()=>{if(e&&a.current){const S=UR(l,C=>C.value===g.current||C.value===whe(g.current));if(S!==-1&&a.current){const C=a.current.children[S];C&&C.scrollIntoView({block:"center"})}}},0);return()=>clearTimeout(y)},[e,g,l]);const x=y=>{_.current=y;const S=hA(y),C=S!==void 0;p(C),C&&S&&(g.current=S,h.current=gA(S))},b=()=>{const y=hA(_.current);y?(g.current=y,h.current=gA(y),_.current=h.current,r2(y,t)):(_.current=h.current,r2(g.current,t)),p(!0),r.current&&(r.current.value=h.current)};return i.jsx(sg,{trigger:i.jsx(og,{showError:!m||!!t.scheduleErrors,children:i.jsx("div",{className:"flex w-full items-center",children:i.jsx("textarea",{className:"m-0 w-full resize-none border-none bg-transparent p-0 text-sm",defaultValue:h.current,ref:r,rows:1,wrap:"off",onBlur:()=>{b()},onChange:y=>{const S=y.target.value;x(S)},onKeyDown:y=>{y.key===" "&&y.stopPropagation()}})})}),open:e,onOpenChange:y=>{n(y),y?o(!0):b()},onCloseAutoFocus:y=>{y.preventDefault(),r.current&&r.current.select()},children:i.jsx("ul",{ref:a,children:i.jsx(uk,{options:l,onClick:y=>{g.current=y.value,h.current=y.label,_.current=y.label,r2(y.value,t),p(!0),n(!1),r.current&&(r.current.value=y.label,r.current.select())}})})})}function Che(){return Array.from({length:96},(e,n)=>{const s=Math.floor(n/4),o=n%4*15,r=She(s,o);return{label:sB(s,o),value:r}})}function whe(t){if(!t)return t;const[e]=t.split(":");return e?"".concat(e.padStart(2,"0"),":00"):t}function oB(t,e){if(t)switch(e.scheduleComponents.frequency){case"once":{lhe(t,e);break}case"daily":case"weekly":case"monthly":case"yearly":{e.setTime(t.getHours(),t.getMinutes());break}}}function r2(t,e){const n=vhe(t);oB(n,e)}function mf(){const t=te(),{scheduleComponents:e,scheduleErrors:n,setFrequency:s,validFrequencies:o}=v.useContext(To),r=v.useMemo(()=>[{label:t.formatMessage(Ht.scheduleFrequencyOnce),value:"once"},{label:t.formatMessage(Ht.scheduleFrequencyDaily),value:"daily"},{label:t.formatMessage(Ht.scheduleFrequencyWeekly),value:"weekly"},{label:t.formatMessage(Ht.scheduleFrequencyMonthly),value:"monthly"},{label:t.formatMessage(Ht.scheduleFrequencyYearly),value:"yearly"},{label:t.formatMessage(Ht.scheduleFrequencyCustom),value:"custom"}].filter(c=>o===void 0||(o==null?void 0:o.includes(c.value))),[t,o]),a=r.find(l=>l.value===e.frequency);return v.useEffect(()=>{a||s(r[0].value)},[a,r,s]),i.jsx(ck,{options:r,initialOption:a,onClick:l=>s(l.value),showError:!!n})}function khe(){const t=te(),{scheduleComponents:e,scheduleErrors:n,setByDay:s}=v.useContext(To),o=Array.from({length:7},(c,u)=>new Intl.DateTimeFormat(t.locale,{weekday:"long",timeZone:"UTC"}).format(new Date(Date.UTC(2021,2,u+1)))),r=["MO","TU","WE","TH","FR","SA","SU"],a=o.map((c,u)=>({label:c,value:r[u]})),l=a.find(c=>c.value===e.by_day);return v.useEffect(()=>{l||s(a[0].value)},[l,a,s]),i.jsx(ck,{options:a,initialOption:l,onClick:c=>s(c.value),showError:!!n})}function Ehe({useShortForm:t=!1}){var c;const{scheduleComponents:e,scheduleErrors:n,setByMonthDay:s}=v.useContext(To),o=Array.from({length:31},(u,d)=>({label:(d+1).toString(),value:d+1})),r=(u,d=new Date().getFullYear())=>new Date(d,u,0).getDate(),a=o.slice(0,r((c=e.by_month)!=null?c:1)),l=a.find(u=>u.value===e.by_month_day);return v.useEffect(()=>{l||s(a[0].value)},[l,a,s]),i.jsx(sg,{rootClassName:t?"flex-none":void 0,trigger:i.jsx(og,{className:t?"w-[75px]":void 0,showError:!!n,children:l==null?void 0:l.label}),children:i.jsx(uk,{options:a,onClick:u=>s(u.value)})})}function The({useShortForm:t=!1}){var l;const{scheduleComponents:e,scheduleErrors:n,setByMonthDay:s}=v.useContext(To),o=te(),r=(l=e.by_month_day)!=null?l:1,a=o.formatMessage(Fhe[r-1]);return i.jsx(sg,{rootClassName:t?"flex-none":void 0,trigger:i.jsx(og,{className:t?"w-[75px]":void 0,showError:!!n,children:a}),children:i.jsx("div",{className:"m-4",children:i.jsx(ghe,{onClick:s,selectedDay:r})})})}function Mhe(){const t=te(),{scheduleComponents:e,scheduleErrors:n,setByMonth:s}=v.useContext(To),o=new Intl.DateTimeFormat(t.locale,{month:"long"}),r=Array.from({length:12},(l,c)=>({label:o.format(new Date(0,c)),value:c+1})),a=r.find(l=>l.value===e.by_month);return v.useEffect(()=>{a||s(r[0].value)},[a,r,s]),i.jsx(ck,{options:r,initialOption:a,onClick:l=>s(l.value),showError:!!n})}function Ahe(){const t=te(),{scheduleComponents:e,scheduleErrors:n,setStartDate:s}=v.useContext(To),[o,r]=v.useState(!1);v.useEffect(()=>{e.start_time||s(new Date)},[e.start_time,s]);const a=e.start_time?new Date(e.start_time):new Date,l=new Intl.DateTimeFormat(t.locale,{year:"numeric",month:"long",day:"numeric"});return i.jsx(sg,{trigger:i.jsx(og,{showError:!!n,children:l.format(a)}),contentClassName:"min-w-[224px]",open:o,onOpenChange:r,children:i.jsx(dhe,{initialDate:a,onClick:()=>r(!1)})})}function Nhe(){return i.jsxs("div",{className:"flex gap-2",children:[i.jsx(mf,{}),i.jsx(Ahe,{}),i.jsx(rg,{})]})}function Ihe(){return i.jsxs("div",{className:"flex gap-2",children:[i.jsx(mf,{}),i.jsx(rg,{})]})}function jhe(){return i.jsxs("div",{className:"flex gap-2",children:[i.jsx(mf,{}),i.jsx(khe,{}),i.jsx(rg,{})]})}function Phe(){return i.jsxs("div",{className:"flex gap-2",children:[i.jsx(mf,{}),i.jsx(The,{}),i.jsx(rg,{})]})}function Rhe(){return i.jsxs("div",{className:"flex gap-2",children:[i.jsx(mf,{}),i.jsx(Mhe,{}),i.jsx(Ehe,{useShortForm:!0}),i.jsx(rg,{})]})}function Ohe({automationId:t,conversationId:e,onModalClose:n}){return i.jsxs("div",{className:"flex flex-col gap-3",children:[i.jsx(mf,{}),i.jsx(Lhe,{automationId:t}),i.jsx(Dhe,{conversationId:e,onModalClose:n})]})}function Lhe({automationId:t}){var a;const{data:e,fetchNextPage:n,hasNextPage:s,isFetchingNextPage:o}=jc({queryKey:["automation-next-run-times",t],queryFn:({pageParam:l})=>il.getAutomationNextRunTimes(t,l),getNextPageParam:l=>l.has_more?l.next_run_times[l.next_run_times.length-1]:void 0,initialPageParam:null}),r=v.useRef(null);return v.useEffect(()=>{r.current&&(r.current.scrollTop=r.current.scrollHeight)},[e]),i.jsx("div",{className:"bg-token-main-surface-secondary rounded-lg p-3",children:i.jsxs("div",{ref:r,className:"flex h-full max-h-52 flex-col gap-3 overflow-y-auto text-sm",children:[(a=e==null?void 0:e.pages)==null?void 0:a.flatMap(l=>l.next_run_times).map((l,c)=>i.jsx("div",{children:i.jsx(XD,{targetTimeUTC:l})},c)),s&&i.jsx("button",{onClick:()=>n(),disabled:o,children:i.jsxs("div",{className:"flex items-center gap-1 text-sm font-medium",children:[i.jsx(P,{id:"qL17GV",defaultMessage:"See more"}),i.jsx(ng,{className:"icon"})]})})]})})}function Dhe({conversationId:t,onModalClose:e}){const n=bt();return t?i.jsxs("div",{className:"border-token-border-medium flex gap-3 rounded-lg border p-4",children:[i.jsx(kr,{}),i.jsxs("div",{className:"flex grow flex-col",children:[i.jsx("span",{className:"text-sm font-medium",children:i.jsx(P,N({},Ht.scheduleCustomScheduleTitle))}),i.jsx("span",{className:"text-token-text-secondary text-sm",children:i.jsx(P,N({},Ht.scheduleCustomScheduleContent))})]}),i.jsx(Se,{onClick:()=>{e(),n(ia(t))},children:i.jsx(P,N({},Ht.scheduleCustomScheduleOpenChat))})]}):null}function Bhe({automationId:t,conversationId:e,onModalClose:n}){const{scheduleComponents:s}=v.useContext(To);switch(s.frequency){case"once":return i.jsx(Nhe,{});case"daily":return i.jsx(Ihe,{});case"weekly":return i.jsx(jhe,{});case"monthly":return i.jsx(Phe,{});case"yearly":return i.jsx(Rhe,{});case"custom":return t?i.jsx(Ohe,{automationId:t,conversationId:e,onModalClose:n}):null}}const Fhe=new Array(31).fill(0).map((t,e)=>e+1).map(t=>{const e=t%10===1&&t!==11?"".concat(t,"st"):t===2||t===22?"".concat(t,"nd"):t===3||t===23?"".concat(t,"rd"):"".concat(t,"th");return{id:"date-ordinal-".concat(t),description:"Brief translation of a number's ordinal abbreviation, i.e. #1 = 1st (the 'st'), #2 = 2nd (the 'nd')",defaultMessage:e}});function Uhe(t){return!!t.id}function Hhe({onClose:t,onConfirm:e}){const n=te();return i.jsx(ik,{isOpen:!0,title:n.formatMessage(Ht.editModalCancel),primaryButtonColor:"danger",onClose:()=>{t()},onConfirm:()=>{e()},children:i.jsx("div",{className:"text-sm",children:i.jsx(P,N({},Ht.cancelModalDescription))})})}function $he({onClick:t}){return i.jsxs("div",{className:"border-token-border-medium flex items-center justify-between rounded-2xl border p-4",children:[i.jsxs("div",{className:"flex items-center gap-3 text-sm font-medium",children:[i.jsx(ak,{className:"icon-lg"}),i.jsx(P,N({},Ht.pauseBanner))]}),i.jsx("div",{children:i.jsx(Se,{onClick:t,children:i.jsx(P,N({},oa.messages.resume))})})]})}function dk({item:t,source:e,onClose:n,onSave:s=il.saveAutomation}){const o=te(),r=Dt();v.useEffect(()=>{Fe.count(Ue.JAWBONE,"jawbone_edit_modal.open")},[]);const{scheduleComponents:a,scheduleErrors:l}=v.useContext(To),[c,u]=v.useState(!0),[d,f]=v.useState(!1),[m,p]=v.useState(!1),[g,h]=v.useState(t.title),[_,x]=v.useState(t.prompt),[b,y]=v.useState(t.is_enabled),S=v.useRef(null);v.useEffect(()=>{const I=S.current;if(!I)return;I.style.height="auto";const j=300;I.style.height="".concat(Math.min(I.scrollHeight,j),"px")},[_]);const C=!!t.id;v.useEffect(()=>{l!=null&&l.tooFarInFuture||l!=null&&l.inPast?u(!1):u(g.length>0&&_.length>0);const I=g!==t.title||_!==t.prompt||b!==t.is_enabled||!pp(a,t.schedule_components);f(I)},[l==null?void 0:l.tooFarInFuture,l==null?void 0:l.inPast,g,_,b,t,a]);const{mutate:w}=zt({mutationFn:()=>{var I;return s((I=t.id)!=null?I:null,g,t.schedule,b,_,t.schedule_components.start_time!==a.start_time?Intl.DateTimeFormat().resolvedOptions().timeZone:t.default_timezone,a,t.last_run_time)},onSuccess:I=>{I&&eg.setAutomation(I.id,I),n(o.formatMessage(Ht.editModalSaveSuccess))},onError:()=>{r.danger(Ht.editModalSaveFailure,{hasCloseButton:!0,toastId:"jawbone_edit_modal"}),u(!0),p(!1)}}),[k,E]=v.useState(!1),[T,M]=v.useState(!1);xe("156153730");const A=bt();return i.jsxs(i.Fragment,{children:[i.jsx(en,{testId:"modal-jawbone-edit",className:"min-w-[680px] text-sm",isOpen:!0,onClose:()=>{if(d){M(!0);return}n()},showCloseButton:!0,title:C?i.jsx(P,N({},Ht.editScheduleTitle)):i.jsx(P,N({},Ht.newScheduleTitle)),headerAccessory:e==="tasks"&&i.jsx(Se,{icon:bl,color:"secondary",onClick:()=>{A(ia(t.conversation_id))},children:i.jsx(P,{id:"KkyshF",defaultMessage:"View chat"})}),type:"success",children:i.jsxs("div",{className:"flex flex-col gap-6",children:[!b&&i.jsx($he,{onClick:()=>{y(!0)}}),i.jsxs("div",{className:"flex flex-col gap-2",children:[i.jsx("div",{className:"text-sm font-medium",children:i.jsx(P,N({},Ht.editModalName))}),i.jsx("textarea",{className:q("border-token-border-medium bg-token-main-surface-primary w-full resize-none rounded-lg text-sm",g.length===0&&"border-token-text-error focus:border-token-text-error"),rows:1,value:g,onChange:I=>h(I.target.value),placeholder:o.formatMessage({id:"GB3SVK",defaultMessage:"Summarize AI news"})}),g.length===0&&i.jsx(Sh,{children:i.jsx(P,N({},Ht.editModalMissingTaskName))})]}),i.jsxs("div",{className:"flex flex-col gap-2",children:[i.jsx("div",{className:"text-sm font-medium",children:i.jsx(P,N({},Ht.editModalInstructions))}),i.jsx("textarea",{ref:S,className:q("border-token-border-medium bg-token-main-surface-primary w-full resize-none overflow-y-auto rounded-lg text-sm",_.length===0&&"border-token-text-error focus:border-token-text-error"),rows:3,value:_,onChange:I=>x(I.target.value),placeholder:o.formatMessage({id:"XDXPIp",defaultMessage:"Send a summary of the latest news in AI, focusing on especially surprising stories."})}),_.length===0&&i.jsx(Sh,{children:i.jsx(P,N({},Ht.editModalMissingInstructions))})]}),i.jsxs("div",{className:"flex flex-col gap-2",children:[i.jsx("div",{className:"text-sm font-medium",children:i.jsx(P,N({},Ht.editModalSchedule))}),i.jsx("div",{children:i.jsx(Bhe,{automationId:t.id,conversationId:t.conversation_id,onModalClose:n})}),i.jsxs("div",{children:[(l==null?void 0:l.tooFarInFuture)&&i.jsx(Sh,{children:i.jsx(P,N({},Ht.editModalTooFarInFuture))}),(l==null?void 0:l.inPast)&&i.jsx(Sh,{children:i.jsx(P,N({},Ht.editModalInPast))})]}),!1]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsxs("div",{className:"flex gap-2",children:[b&&C&&i.jsx(Se,{color:"secondary",onClick:()=>{y(!1)},children:i.jsx(P,N({},oa.messages.pause))}),C&&i.jsx(Se,{color:"danger-outline",onClick:()=>{E(!0)},children:i.jsx(P,N({},Ht.editModalDelete))})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(Se,{color:"secondary",onClick:()=>{if(d){M(!0);return}n()},children:i.jsx(P,N({},Ht.editModalCancel))}),i.jsx(Se,{disabled:!c,loading:m,color:"primary",onClick:()=>{p(!0),w()},children:i.jsx(P,N({},Ht.editModalSave))})]})]})]})}),T&&i.jsx(Hhe,{onClose:()=>M(!1),onConfirm:()=>n()}),k&&Uhe(t)&&i.jsx(lk,{item:t,onClose:()=>E(!1),onConfirm:()=>{E(!1),n()}})]})}function Sh({children:t}){return i.jsx("div",{className:"text-token-text-error text-sm font-medium",children:t})}const fk=re(me,"402281",20,20);function Ghe({dateString:t}){switch(Vhe(t)){case"today":return i.jsx(P,N({},Ht.lastRunToday));case"yesterday":return i.jsx(P,N({},Ht.lastRunYesterday));case"weekday":return new Date(t).toLocaleDateString(void 0,{weekday:"long"});case"full":return new Date(t).toLocaleDateString(void 0,{month:"short",day:"numeric",year:"numeric"})}}function Vhe(t){const e=new Date(t),s=HR(new Date,e);return s===0?"today":s===1?"yesterday":s<=7?"weekday":"full"}function _A(t){"use forget";const e=D.c(2),{children:n}=t;let s;return e[0]!==n?(s=i.jsx("span",{className:"bg-token-main-surface-tertiary text-token-text-secondary rounded-[0.25rem] px-1 py-[1px] text-xs font-medium",children:n}),e[0]=n,e[1]=s):s=e[1],s}function zhe(t){"use forget";const e=D.c(2),{item:n}=t,{is_enabled:s,target_time_utc:o}=n;if(!s){let r;return e[0]===Symbol.for("react.memo_cache_sentinel")?(r=i.jsx(_A,{children:i.jsx(P,N({},Ht.pausedPill))}),e[0]=r):r=e[0],r}if(o){const r=new Date,a=new Date(o);if(r.getTime()-a.getTime()>=6e4){let l;return e[1]===Symbol.for("react.memo_cache_sentinel")?(l=i.jsx(_A,{children:i.jsx(P,{id:"ppsH3r",defaultMessage:"Delayed"})}),e[1]=l):l=e[1],l}}return null}function Whe(t){"use forget";const e=D.c(19),{item:n,useShortForm:s}=t,o=s===void 0?!1:s;if(n.next_run_times.length===0&&n.last_run_time){let a;return e[0]!==n.last_run_time?(a=i.jsx(Ghe,{dateString:n.last_run_time}),e[0]=n.last_run_time,e[1]=a):a=e[1],a}const r=n.schedule_components;switch(r.frequency){case"once":{let a;return e[2]!==n.id||e[3]!==o?(a=i.jsx(qhe,{automationId:n.id,useShortForm:o}),e[2]=n.id,e[3]=o,e[4]=a):a=e[4],a}case"daily":{let a;return e[5]!==r?(a=i.jsx(Khe,{scheduleComponents:r,useShortForm:!1}),e[5]=r,e[6]=a):a=e[6],a}case"weekly":{let a;return e[7]!==r||e[8]!==o?(a=i.jsx(Yhe,{scheduleComponents:r,useShortForm:o}),e[7]=r,e[8]=o,e[9]=a):a=e[9],a}case"monthly":{let a;return e[10]!==r?(a=i.jsx(Zhe,{scheduleComponents:r}),e[10]=r,e[11]=a):a=e[11],a}case"yearly":{let a;return e[12]!==r?(a=i.jsx(Qhe,{scheduleComponents:r}),e[12]=r,e[13]=a):a=e[13],a}case"custom":{if(n.next_run_times.length===0){let c;return e[14]===Symbol.for("react.memo_cache_sentinel")?(c=i.jsx("div",{children:i.jsx(P,N({},Ht.customSchedule))}),e[14]=c):c=e[14],c}let a;if(e[15]!==n.next_run_times[0]){const u=new Date(n.next_run_times[0]).toLocaleDateString(void 0,{month:"short",day:"numeric",year:"numeric"});a=_r.nextRunTime(u),e[15]=n.next_run_times[0],e[16]=a}else a=e[16];let l;return e[17]!==a?(l=i.jsx("div",{children:a}),e[17]=a,e[18]=l):l=e[18],l}}}function rB(t){"use forget";const e=D.c(2),{item:n}=t;let s;return e[0]!==n?(s=i.jsxs("div",{className:"flex items-center gap-1.5",children:[i.jsx(Whe,{item:n}),i.jsx(zhe,{item:n})]}),e[0]=n,e[1]=s):s=e[1],s}function qhe(t){"use forget";const e=D.c(5),{automationId:n,useShortForm:s}=t,o=s===void 0?!1:s;let r;e[0]!==n?(r=tg.getTargetTimeUTC(n),e[0]=n,e[1]=r):r=e[1];const a=r;if(!a)return null;let l;return e[2]!==a||e[3]!==o?(l=i.jsx(XD,{targetTimeUTC:a,useShortForm:o}),e[2]=a,e[3]=o,e[4]=l):l=e[4],l}function Khe(t){"use forget";var c,u;const e=D.c(3),{scheduleComponents:n,useShortForm:s}=t,o=s===void 0?!1:s,r=te(),a=aB((c=n.by_hour)!=null?c:0,(u=n.by_minute)!=null?u:0,r.locale);if(o){let d;return e[0]===Symbol.for("react.memo_cache_sentinel")?(d=i.jsx(P,N({},Ht.scheduleFrequencyDaily)),e[0]=d):d=e[0],d}let l;return e[1]!==a?(l=_r.runtimeDaily(a),e[1]=a,e[2]=l):l=e[2],l}function Yhe(t){"use forget";var d,f,m;const e=D.c(8),{scheduleComponents:n,useShortForm:s}=t,o=s===void 0?!1:s,r=te();let a;if(e[0]!==r.locale||e[1]!==n.by_day){const p=new Date,g=Jhe((d=n.by_day)!=null?d:"")-p.getDay();p.setDate(p.getDate()+(g>=0?g:g+7)),a=new Intl.DateTimeFormat(r.locale,{weekday:"long"}).format(p),e[0]=r.locale,e[1]=n.by_day,e[2]=a}else a=e[2];const l=a,c=aB((f=n.by_hour)!=null?f:0,(m=n.by_minute)!=null?m:0,r.locale);if(o){let p;return e[3]!==l?(p=_r.runtimeWeeklyShort(l),e[3]=l,e[4]=p):p=e[4],p}let u;return e[5]!==l||e[6]!==c?(u=_r.runtimeWeekly(l,c),e[5]=l,e[6]=c,e[7]=u):u=e[7],u}function Zhe({scheduleComponents:t}){var e;return _r.runtimeMonthly(String((e=t.by_month_day)!=null?e:1))}function Qhe({scheduleComponents:t}){var s;const e=te(),n=v.useMemo(()=>{var r;const o=new Date;return o.setMonth(((r=t.by_month)!=null?r:1)-1),new Intl.DateTimeFormat(e.locale,{month:"long"}).format(o)},[t.by_month,e.locale]);return _r.runtimeYearly(n,(s=t.by_month_day)!=null?s:1)}function aB(t,e,n){"use forget";const s=D.c(4);let o;if(s[0]!==t||s[1]!==n||s[2]!==e){const a=new Date;a.setHours(t),a.setMinutes(e),o=new Intl.DateTimeFormat(n,{hour:"numeric",minute:e===0?void 0:"numeric",hour12:!0}).format(a),s[0]=t,s[1]=n,s[2]=e,s[3]=o}else o=s[3];return o}function Jhe(t){switch(t){case"SU":return 0;case"MO":return 1;case"TU":return 2;case"WE":return 3;case"TH":return 4;case"FR":return 5;case"SA":return 6;default:return-1}}const mk="view",iB="curate",lB="taskId";function cB(t){const e=new URLSearchParams(t);return e.set(mk,iB),e.toString()}function Xhe(t,e){const n=new URLSearchParams(t);return n.set(mk,iB),n.set(lB,e),n.toString()}function Uot(t,e){const n=new URLSearchParams(e);n.delete(mk),n.delete(lB),t({search:n.toString()},{replace:!0})}function uB(t){return Kt(()=>Nw())===!0?t?"/pulse?".concat(Xhe(window.location.search,t)):"/pulse?".concat(cB(window.location.search)):"/tasks"}const e1e=je(()=>Me(()=>Promise.resolve().then(()=>ahe),void 0).then(t=>t.JawboneDeleteModal)),t1e=je(()=>Me(()=>Promise.resolve().then(()=>mW),void 0).then(t=>t.SugarboneMessageAttachmentInner)),n1e=je(()=>Me(()=>Promise.resolve().then(()=>mW),void 0).then(t=>t.ViewPulseAutomationDropdownItem));function Hot(){"use forget";const t=D.c(1);let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=i.jsx(pk,{children:i.jsxs("div",{className:"flex h-full w-full flex-col justify-center py-4 ps-5 pe-3",children:[i.jsx("div",{className:"loading-results-shimmer bg-token-text-tertiary h-4 w-1/2 rounded-sm"}),i.jsx("div",{className:"loading-results-shimmer bg-token-text-tertiary mt-2.5 h-4 w-2/5 rounded-sm"})]})}),t[0]=e):e=t[0],e}function pk(t){"use forget";const e=D.c(6),{children:n,className:s,fullWidth:o}=t,r=o?"w-full":"inline-block max-w-[360px] min-w-[320px]";let a;e[0]!==s||e[1]!==r?(a=q("border-token-border-default relative my-2 overflow-hidden rounded-xl border",r,s),e[0]=s,e[1]=r,e[2]=a):a=e[2];let l;return e[3]!==n||e[4]!==a?(l=i.jsx("div",{className:a,children:n}),e[3]=n,e[4]=a,e[5]=l):l=e[5],l}function s1e(t){"use forget";const e=D.c(8),{automation:n,onSave:s,overrideManageAllAction:o,fullWidth:r}=t,a=r===void 0?!1:r,l=X(o1e);if(!n)return null;if(l&&n.content_type==="sugar"){let c;return e[0]!==n||e[1]!==a?(c=i.jsx(t1e,{item:n,overrideManageAllAction:!1,fullWidth:a}),e[0]=n,e[1]=a,e[2]=c):c=e[2],c}else{let c;return e[3]!==n||e[4]!==a||e[5]!==s||e[6]!==o?(c=i.jsx(r1e,{item:n,onSave:s,overrideManageAllAction:o,fullWidth:a}),e[3]=n,e[4]=a,e[5]=s,e[6]=o,e[7]=c):c=e[7],c}}function o1e(){return Nw()}function r1e(t){"use forget";const e=D.c(40),{item:n,onSave:s,overrideManageAllAction:o,fullWidth:r}=t,a=Dt();let l;e[0]===Symbol.for("react.memo_cache_sentinel")?(l=[],e[0]=l):l=e[0],v.useEffect(a1e,l);const{id:c,is_enabled:u,title:d}=n,[f,m]=v.useState(!1),p=v.useRef(null);let g;e[1]===Symbol.for("react.memo_cache_sentinel")?(g=()=>{if(p.current){const L=p.current.clientHeight,B=parseFloat(getComputedStyle(p.current).lineHeight);m(L>B)}},e[1]=g):g=e[1];let h;e[2]!==d?(h=[d],e[2]=d,e[3]=h):h=e[3],v.useEffect(g,h);const _=n.next_run_times.length===0,[x,b]=v.useState(!1);let y;e[4]===Symbol.for("react.memo_cache_sentinel")?(y=()=>b(!0),e[4]=y):y=e[4];const S=f?"items-start":"items-center";let C;e[5]!==S?(C=q("flex h-full w-full cursor-pointer justify-between py-4 ps-5 pe-3",S),e[5]=S,e[6]=C):C=e[6];let w;e[7]!==d?(w=i.jsx("div",{ref:p,className:"line-clamp-2 text-start font-medium",children:d}),e[7]=d,e[8]=w):w=e[8];let k;e[9]!==n?(k=i.jsx(rB,{item:n}),e[9]=n,e[10]=k):k=e[10];let E;e[11]!==n.next_run_times||e[12]!==n.schedule_components||e[13]!==k?(E=i.jsx("div",{className:"text-token-text-secondary text-start",children:i.jsx(zm,{initialScheduleComponents:n.schedule_components,nextRunTimes:n.next_run_times,children:k})}),e[11]=n.next_run_times,e[12]=n.schedule_components,e[13]=k,e[14]=E):E=e[14];let T;e[15]!==w||e[16]!==E?(T=i.jsxs("div",{className:"flex flex-col gap-0.5 pe-8 text-sm",children:[w,E]}),e[15]=w,e[16]=E,e[17]=T):T=e[17];let M;e[18]!==T||e[19]!==C?(M=i.jsx("button",{className:"hover:bg-token-main-surface-secondary h-full w-full",onClick:y,children:i.jsx("div",{className:C,children:T})}),e[18]=T,e[19]=C,e[20]=M):M=e[20];let A;e[21]===Symbol.for("react.memo_cache_sentinel")?(A=()=>b(!0),e[21]=A):A=e[21];let I;e[22]!==c||e[23]!==_||e[24]!==u||e[25]!==n||e[26]!==o?(I=i.jsx("div",{className:"absolute end-3 top-1/2 -translate-y-1/2 transform",children:i.jsx("div",{className:"ms-4 flex",children:i.jsx(dB,{className:"h-9 w-9",automation_id:c,is_enabled:u,item:n,isFinished:_,onEditModalOpen:A,overrideManageAllAction:o})})}),e[22]=c,e[23]=_,e[24]=u,e[25]=n,e[26]=o,e[27]=I):I=e[27];let j;e[28]!==r||e[29]!==M||e[30]!==I?(j=i.jsxs(pk,{fullWidth:r,children:[M,I]}),e[28]=r,e[29]=M,e[30]=I,e[31]=j):j=e[31];let R;e[32]!==x||e[33]!==n||e[34]!==s||e[35]!==a?(R=x&&i.jsx(zm,{initialScheduleComponents:n.schedule_components,nextRunTimes:n.next_run_times,children:i.jsx(dk,{item:n,source:"chat",onSave:s,onClose:L=>{L&&a.success(L,{hasCloseButton:!0}),b(!1)}})}),e[32]=x,e[33]=n,e[34]=s,e[35]=a,e[36]=R):R=e[36];let O;return e[37]!==j||e[38]!==R?(O=i.jsxs(i.Fragment,{children:[j,R]}),e[37]=j,e[38]=R,e[39]=O):O=e[39],O}function a1e(){Fe.count(Ue.JAWBONE,"jawbone_message_attachment.open")}function dB(t){"use forget";const e=D.c(42),{automation_id:n,is_enabled:s,item:o,isFinished:r,onEditModalOpen:a,overrideManageAllAction:l,className:c}=t,u=X(i1e),d=te(),f=bt(),m=Dt(),[p,g]=v.useState(s);let h,_;e[0]!==s?(h=()=>g(s),_=[s],e[0]=s,e[1]=h,e[2]=_):(h=e[1],_=e[2]),v.useEffect(h,_);let x;e[3]!==m?(x=B=>{m.danger(B?oa.messages.enableFailure:oa.messages.pauseFailure,{hasCloseButton:!0,toastId:"toggle_automation_status"}),g(!B)},e[3]=m,e[4]=x):x=e[4];let b;e[5]!==n||e[6]!==x?(b={automation_id:n,onError:x},e[5]=n,e[6]=x,e[7]=b):b=e[7];const{mutate:y,isPending:S}=ZD(b);let C;e[8]!==d||e[9]!==f||e[10]!==l?(C=function(){return l===null?null:i.jsxs(i.Fragment,{children:[i.jsx(ee.Separator,{}),l!=null?l:i.jsx(ee.Item,{icon:wc,label:d.formatMessage(Ht.attachmentManageAll),onClick:()=>{f(uB())}})]})},e[8]=d,e[9]=f,e[10]=l,e[11]=C):C=e[11];const w=C;let k;e[12]!==c?(k=q("hover:bg-token-surface-hover focus-visible:bg-token-surface-hover radix-state-open:bg-token-surface-hover flex items-center justify-center rounded-lg focus-visible:outline-0",c),e[12]=c,e[13]=k):k=e[13];let E;e[14]===Symbol.for("react.memo_cache_sentinel")?(E=i.jsx($s,{className:"icon"}),e[14]=E):E=e[14];let T;e[15]!==k?(T=i.jsx("button",{className:k,children:E}),e[15]=k,e[16]=T):T=e[16];let M;e[17]!==p||e[18]!==d||e[19]!==r||e[20]!==S||e[21]!==a||e[22]!==y?(M=!r&&i.jsxs(i.Fragment,{children:[i.jsx(ee.Item,{icon:Bp,label:d.formatMessage(Ht.attachmentEdit),onClick:a}),i.jsx(ee.Item,{icon:p?ak:fk,label:d.formatMessage(p?oa.messages.pause:oa.messages.resume),onClick:()=>{const B=!p;g(B),y({is_enabled:B})},disabled:S})]}),e[17]=p,e[18]=d,e[19]=r,e[20]=S,e[21]=a,e[22]=y,e[23]=M):M=e[23];let A;e[24]!==d?(A=d.formatMessage(oa.messages.delete),e[24]=d,e[25]=A):A=e[25];let I;e[26]!==o?(I=()=>{rt(e1e,{item:o})},e[26]=o,e[27]=I):I=e[27];let j;e[28]!==A||e[29]!==I?(j=i.jsx(ee.Item,{icon:yi,color:"danger",label:A,onClick:I}),e[28]=A,e[29]=I,e[30]=j):j=e[30];let R;e[31]!==w?(R=w(),e[31]=w,e[32]=R):R=e[32];let O;e[33]!==o||e[34]!==u?(O=u&&o.content_type==="sugar"&&i.jsx(n1e,{taskId:o.id}),e[33]=o,e[34]=u,e[35]=O):O=e[35];let L;return e[36]!==j||e[37]!==R||e[38]!==O||e[39]!==T||e[40]!==M?(L=i.jsxs(Xo,{size:"auto",alignOffset:-8,sideOffset:4,triggerButton:T,children:[M,j,R,O]}),e[36]=j,e[37]=R,e[38]=O,e[39]=T,e[40]=M,e[41]=L):L=e[41],L}function i1e(){return Nw()}function l1e(t){return["odyssey_aut",t!=null?t:""]}function Y_(t){const{data:e}=ut({queryKey:l1e(t),queryFn:()=>ue.safeGet("/agent_automation/{automation_id}",{parameters:{path:{automation_id:t!=null?t:""}}}),enabled:!!t});return e!=null?e:null}function fB(){return["odyssey_aut"]}function mB(t){const{isLoading:e,data:n}=c1e(t),s=v.useMemo(()=>{var d;return(d=n==null?void 0:n.items.reduce((f,m)=>(f[m.id]=m,f),{}))!=null?d:void 0},[n]),o=v.useCallback(d=>d.map(f=>{const m=s==null?void 0:s[f.id];return m?N(N({},m),f):null}).filter(Boolean),[s]),{isLoadingScheduled:r,isLoadingPaused:a,isLoadingFinished:l}=she(),c=Xp(tg.getAllJawbonesGrouped),u=e||r||a||l;return v.useMemo(()=>{var d,f,m;return{isLoading:u,scheduledAutomations:o((d=c.scheduled.automations)!=null?d:[]),pausedAutomations:o((f=c.paused.automations)!=null?f:[]),completedAutomations:o((m=c.completed.automations)!=null?m:[])}},[u,c,o])}function c1e({enabled:t,staleTimeMs:e=1e3*5*60}){return ut({enabled:t,queryKey:fB(),queryFn:()=>ue.safeGet("/agent_automations"),refetchOnMount:"always",refetchOnWindowFocus:"always",staleTime:e})}function $ot(t,e=null){const n=v.useRef({}),[s,o]=v.useState({});return v.useEffect(()=>{async function r(l){const c=await ue.safeGet("/agent_automation/{automation_id}/conversations",{parameters:{path:{automation_id:l}}});o(u=>G(N({},u),{[l]:c.items}))}async function a(l,c){const u=await ue.safePost("/conversations/batch",{requestBody:{conversation_ids:[c]}});o(d=>G(N({},d),{[l]:u}))}for(const l of t)l.id in n.current||(l.job_type==="agent"||l.source_conversation_id&&l.source_message_id?n.current[l.id]=r(l.id):l.conversation_id&&(n.current[l.id]=a(l.id,l.conversation_id)))},[t]),v.useMemo(()=>{let r=[];return t.forEach(a=>{const l=s[a.id];if(l)for(const c of l)r.push({automation:a,conversation:c})}),e&&(r=r.filter(a=>{var c;return new Date((c=a.conversation.update_time)!=null?c:0).getTime()>e.getTime()})),r.sort((a,l)=>{var d,f;const c=new Date((d=a.conversation.update_time)!=null?d:0).getTime();return new Date((f=l.conversation.update_time)!=null?f:0).getTime()-c})},[s,t,e])}const Z_="github-global",u1e=async t=>(await ue.safePost("/aip/connectors/github/has_installations",{requestBody:{link_id:t}})).has_installations,Got=({linkId:t})=>ut({queryKey:["github-has-installations",t],enabled:!!t,queryFn:async()=>await u1e(t),retry:1});function gk({enabled:t=!0,connectionInstanceId:e}){return ut({queryKey:["user_connection_sync_configuration",e],queryFn:async()=>{try{return await fZ.user_connection_sync_configuration(e)}catch(n){return null}},enabled:!!(t&&e),retry:1})}function Vot(){return mn("1001765573").get("ca_github_sync_max_repos",5)}const pB="v1.0",Y1=Ie.SelectedGithubRepos,Rf=({selectedReposMap:t,scope:e})=>{if(!t){tt.removeItem(Y1,e);return}const n={selected_github_repos:[...t].map(([o,r])=>[o,r])},s={version:pB,data:n};tt.setItem(Y1,JSON.stringify(s),e)},xA=t=>{const e=tt.getItem(Y1,t);if(e)try{const{version:n,data:s}=JSON.parse(e);if(n!==pB){tt.removeItem(Y1,t);return}return new Map(s.selected_github_repos)}catch(n){return}},d1e=t=>{var n;if(!t)return;const e=t.tree.getBranchFromLeaf(t.currentLeafId);for(const s of[...e].reverse()){const o=s.message;if(o.author.role!==dt.User)continue;const r=(n=o.metadata)!=null?n:{},a=r.selected_github_repos,l=r.selected_all_github_repos;if(a||l)return{selectedRepos:a!=null?a:[],selectedAllRepos:l!=null?l:!1}}},f1e=$R(t=>d1e(t),{equals:pp}),hk=()=>{var n,s;const t=Is(),e=X0();if(t===Ke.Slurm){const o=(n=e==null?void 0:e.connectorConfig)==null?void 0:n[Te.GITHUB_CONNECTOR];return{maxRepos:(s=o==null?void 0:o.max_repos)!=null?s:3}}return t===Ke.Glaux?{maxRepos:mZ()}:{maxRepos:void 0}};function m1e(t,e){return t==null?void 0:t.get(e)}function _k(t,e=Z_){var k,E,T,M;const{session:n}=Ud(),s=OC(),o=GR(),r=X(o),a=v.useMemo(()=>{var A;return(A=e!=null?e:r)!=null?A:null},[e,r]),{maxRepos:l}=hk(),c=X(()=>{if(s)return VR().data}),u=(E=(k=c==null?void 0:c.connection_statuses.find(A=>A.user_connection_details.knowledge_connector_type==="github"&&["partially_activated","activated"].includes(A.user_connection_details.activation_status)&&!!A.user_connection_details.connection_instance_id&&!!A.user_connection_details.backing_link_id))==null?void 0:k.user_connection_details.connection_instance_id)!=null?E:"",{data:d}=gk({connectionInstanceId:u!=null?u:"",enabled:!!(u&&s)}),f=v.useMemo(()=>{var A,I;return{userId:(A=n==null?void 0:n.user)==null?void 0:A.id,workspaceId:(I=n==null?void 0:n.account)==null?void 0:I.id}},[(T=n==null?void 0:n.user)==null?void 0:T.id,(M=n==null?void 0:n.account)==null?void 0:M.id]),m=Pt(t),p=X(()=>f1e(m)),[g,h]=Ze(t,A=>[A==null?void 0:A.hasModifiedGithubRepos,A==null?void 0:A.selectedGithubRepos]),_=v.useMemo(()=>d!=null&&d.sync_enabled_objects?{selectedRepos:d.sync_enabled_objects.filter(I=>I.object_type==="repository").map(I=>I.object_name).filter(I=>I!=null),selectedAllRepos:!1}:void 0,[d==null?void 0:d.sync_enabled_objects]);v.useEffect(()=>{var R,O,L,B;if((h==null?void 0:h.get(a))||g)return;if(p&&xk(p)){if(l&&((O=(R=p.selectedRepos)==null?void 0:R.length)!=null?O:0)>l)return;pt(t,U=>{var H;(H=U.selectedGithubRepos)!=null||(U.selectedGithubRepos=new Map),U.selectedGithubRepos.set(a,ur(p))});return}const I=xA(f);let j=I==null?void 0:I.get(a);if(!j&&I&&r!==a&&(j=I.get(r!=null?r:null)),j){if(l&&((B=(L=j.selectedRepos)==null?void 0:L.length)!=null?B:0)>l)return;pt(t,U=>{var H;(H=U.selectedGithubRepos)!=null||(U.selectedGithubRepos=new Map),U.selectedGithubRepos.set(a,ur(j))})}J0(n==null?void 0:n.user)&&pt(t,U=>{var H;(H=U.selectedGithubRepos)!=null||(U.selectedGithubRepos=new Map),U.selectedGithubRepos.set(a,ur({selectedRepos:["openai/openai"],selectedAllRepos:!1}))})},[t,g,h,a,p,f,r,d==null?void 0:d.sync_enabled_objects,l,n==null?void 0:n.user]);const x=v.useMemo(()=>{var j,R,O,L;const A=m1e(h,a);if(A)return A;if(a==null&&_||_)return _;if(p&&(((R=(j=p.selectedRepos)==null?void 0:j.length)!=null?R:0)>0||p.selectedAllRepos)&&(l==null||((L=(O=p.selectedRepos)==null?void 0:O.length)!=null?L:0)<=l))return p;const I=xA(f);if(I){const B=I.get(a);if(B)return B}return yk()},[a,h,p,f,l,_]),b=v.useCallback(A=>{t&&pt(t,I=>{var j;I.hasModifiedGithubRepos=!0,(j=I.selectedGithubRepos)!=null||(I.selectedGithubRepos=new Map),I.selectedGithubRepos.set(a,ur(A)),Rf({selectedReposMap:I.selectedGithubRepos,scope:f})})},[t,a,f]),y=v.useCallback(A=>{t&&pt(t,I=>{var R,O;I.hasModifiedGithubRepos=!0,(R=I.selectedGithubRepos)!=null||(I.selectedGithubRepos=new Map);const j=(O=I.selectedGithubRepos.get(a))!=null?O:{selectedRepos:[],selectedAllRepos:!1};Array.isArray(j.selectedRepos)&&!j.selectedRepos.includes(A)&&(j.selectedRepos=[...j.selectedRepos,A]),I.selectedGithubRepos.set(a,ur(j)),Rf({selectedReposMap:I.selectedGithubRepos,scope:f})})},[t,a,f]),S=v.useCallback(A=>{t&&pt(t,I=>{var R,O;I.hasModifiedGithubRepos=!0,(R=I.selectedGithubRepos)!=null||(I.selectedGithubRepos=new Map);const j=(O=I.selectedGithubRepos.get(a))!=null?O:{selectedRepos:[],selectedAllRepos:!1};Array.isArray(j.selectedRepos)&&(j.selectedRepos=j.selectedRepos.filter(L=>L!==A)),I.selectedGithubRepos.set(a,ur(j)),Rf({selectedReposMap:I.selectedGithubRepos,scope:f})})},[t,a,f]),C=v.useCallback(A=>{t&&pt(t,I=>{var R,O;I.hasModifiedGithubRepos=!0,(R=I.selectedGithubRepos)!=null||(I.selectedGithubRepos=new Map);const j=(O=I.selectedGithubRepos.get(a))!=null?O:{selectedRepos:[],selectedAllRepos:!1};Array.isArray(j.selectedRepos)&&(j.selectedRepos.includes(A)?j.selectedRepos=j.selectedRepos.filter(L=>L!==A):j.selectedRepos=[...j.selectedRepos,A]),I.selectedGithubRepos.set(a,ur(j)),Rf({selectedReposMap:I.selectedGithubRepos,scope:f})})},[t,a,f]),w=v.useCallback(A=>{t&&pt(t,I=>{var R,O;I.hasModifiedGithubRepos=!0,(R=I.selectedGithubRepos)!=null||(I.selectedGithubRepos=new Map);const j=(O=I.selectedGithubRepos.get(a))!=null?O:{selectedRepos:[],selectedAllRepos:!1};j.selectedAllRepos=A,I.selectedGithubRepos.set(a,ur(j)),Rf({selectedReposMap:I.selectedGithubRepos,scope:f})})},[t,a,f]);return{selectedRepos:x,setSelectedRepos:b,addRepo:y,removeRepo:S,toggleRepo:C,setAllRepos:w}}function zot(t,e=Z_){var s,o;const n=(s=t==null?void 0:t.selectedGithubRepos)==null?void 0:s.get(e);return(o=n!=null?n:g1e(e))!=null?o:yk()}function xk(t){return t.selectedAllRepos||t.selectedRepos!=null&&t.selectedRepos.length>0}function yk(){return{selectedRepos:[],selectedAllRepos:!1}}function p1e(t,e){var n;try{const s=JSON.parse(t);if("selectedRepos"in s&&"selectedAllRepos"in s)return s;const o=e==null?"__null__":e;return(n=s[o])!=null?n:void 0}catch(s){return}}function g1e(t){const e=Xs.getCookie(eo.LastSelectedGithubRepo);return e?p1e(e,t):yk()}const h1e={disabledAutoConnectors:[],isLoading:!1},_1e=t=>{"use forget";var Z,J,Q;const e=D.c(57),{clientThreadId:n,includeAutoConnectors:s}=t,o=s===void 0?!1:s,r=X(y1e);let a;e[0]!==(r==null?void 0:r.size)?(a=zR()||((Z=r==null?void 0:r.size)!=null?Z:0)>0,e[0]=r==null?void 0:r.size,e[1]=a):a=e[1];const l=a,c=$d(),u=X(b1e);let d;e[2]!==u||e[3]!==c?(d=(u==null?void 0:u.isPersonalAccount())&&c,e[2]=u,e[3]=c,e[4]=d):d=e[4];const f=!!d;let m;e[5]!==o?(m={includeAutoConnectors:o},e[5]=o,e[6]=m):m=e[6];const{connectedTypes:p,isLoading:g,linkIdToConnectedType:h}=qC(m);let _;e[7]!==o?(_=()=>o?pZ():h1e,e[7]=o,e[8]=_):_=e[8];const{isLoading:x,disabledAutoConnectors:b}=X(_);let y;e[9]!==n?(y={clientThreadId:n},e[9]=n,e[10]=y):y=e[10];const{connectorConfigMap:S}=x1e(y),C=X(v1e),w=!C,{connectedTypes:k,isLoading:E}=WR(),{data:T,isLoading:M}=W0();let A;e[11]===Symbol.for("react.memo_cache_sentinel")?(A=as(),e[11]=A):A=e[11];const I=A,j=g||E||M||x||w;T==null||T.connection_statuses;let R,O,L,B,U,H,$;if(e[12]!==l||e[13]!==k||e[14]!==C||e[15]!==p||e[16]!==b||e[17]!==o||e[18]!==S||e[19]!==h||e[20]!==(T==null?void 0:T.connection_statuses)||e[21]!==f){const ne=(J=T==null?void 0:T.connection_statuses.filter(S1e).map(C1e))!=null?J:[],ie=(Q=T==null?void 0:T.connection_statuses.reduce((Ce,ge)=>{if(["activated","partially_activated"].includes(ge.user_connection_details.activation_status)&&ge.user_connection_details.backing_link_id){const Re=h.get(ge.user_connection_details.backing_link_id);Re&&Ce.add(Re)}return Ce},new Set))!=null?Q:new Set,fe=[...p].filter(Ce=>{var ge;if(Ce===Te.GDRIVE_ACTION_CONNECTOR&&f){if(ne.includes("gdrive_sync_connector"))return!1}else{if(ie.has(Ce))return!1;if(Ce===Te.SHAREPOINT_CONNECTOR&&ne.includes("sharepoint_admin_sync_connector"))return!1}return o&&b.includes(Ce)?!1:Ce!==ei.MCP_CONNECTOR&&(!S.has(Ce)||!((ge=S.get(Ce))!=null&&ge.disabled))});let ae;e[29]!==k?(ae=[...k].filter(w1e),e[29]=k,e[30]=ae):ae=e[30];let le;e[31]!==ae?(le=[...ae,"web"],e[31]=ae,e[32]=le):le=e[32],R=le;const pe=[...[...C!=null?C:[]].filter(Ce=>l&&Ce===ei.MCP_CONNECTOR||Ce!==ei.MCP_CONNECTOR)];U=Map;let _e;e[33]!==R?(_e=new Set(R),e[33]=R,e[34]=_e):_e=e[34],e[35]!==_e?(O=[Ke.Research,_e],e[35]=_e,e[36]=O):O=e[36],L=[Ke.Slurm,new Set([...fe,...ne])],B=[Ke.Glaux,new Set([...pe,...ne])],H=null,$=new Set(ne),e[12]=l,e[13]=k,e[14]=C,e[15]=p,e[16]=b,e[17]=o,e[18]=S,e[19]=h,e[20]=T==null?void 0:T.connection_statuses,e[21]=f,e[22]=R,e[23]=O,e[24]=L,e[25]=B,e[26]=U,e[27]=H,e[28]=$}else R=e[22],O=e[23],L=e[24],B=e[25],U=e[26],H=e[27],$=e[28];let F;e[37]!==H||e[38]!==$?(F=[H,$],e[37]=H,e[38]=$,e[39]=F):F=e[39];let z;e[40]!==O||e[41]!==L||e[42]!==B||e[43]!==F?(z=[O,L,B,F],e[40]=O,e[41]=L,e[42]=B,e[43]=F,e[44]=z):z=e[44];let W;if(e[45]!==R||e[46]!==U||e[47]!==z){W=new U(z);let ne;e[49]===Symbol.for("react.memo_cache_sentinel")?(ne=I?["cloud"]:[],e[49]=ne):ne=e[49];let ie;if(e[50]!==R?(ie=new Set([...R,"web",...ne]),e[50]=R,e[51]=ie):ie=e[51],W.set(fp,ie),Js){let fe;e[52]!==R?(fe=new Set([...R,"web"]),e[52]=R,e[53]=fe):fe=e[53],W.set(Js,fe)}e[45]=R,e[46]=U,e[47]=z,e[48]=W}else W=e[48];const Y=W;let K;return e[54]!==Y||e[55]!==j?(K={availableConnectorTypes:Y,isLoading:j},e[54]=Y,e[55]=j,e[56]=K):K=e[56],K},x1e=t=>{"use forget";const e=D.c(11),{clientThreadId:n}=t;let s;e[0]!==n?(s=()=>Fn(Pt(n)),e[0]=n,e[1]=s):s=e[1];const o=X(s),r=te(),a=X0();a==null||a.connectorConfig;let l;if(e[2]!==o||e[3]!==r||e[4]!==(a==null?void 0:a.connectorConfig)){const d=(a==null?void 0:a.connectorConfig)||{};let f;e[6]!==o||e[7]!==r?(f=(m,p)=>{const[g,h]=p,_=g,x=h.enabledModels&&o?!h.enabledModels.includes(o.id):!1;return m.set(_,{disabled:x,disabledText:x?r.formatMessage({id:"1MD3y6",defaultMessage:"Switch to {model} model to use connectors"},{model:h.enabledModels.join(", ")}):void 0,hasBetaTag:h.beta}),m},e[6]=o,e[7]=r,e[8]=f):f=e[8],l=Object.entries(d).reduce(f,new Map),e[2]=o,e[3]=r,e[4]=a==null?void 0:a.connectorConfig,e[5]=l}else l=e[5];const c=l;let u;return e[9]!==c?(u={connectorConfigMap:c},e[9]=c,e[10]=u):u=e[10],u};function y1e(){return qR()}function b1e(){return KC()}function v1e(){return YC()}function S1e(t){return["partially_activated","activated"].includes(t.user_connection_details.activation_status)}function C1e(t){return t.user_connection_details.connection_type}function w1e(t){return t!==ei.MCP_CONNECTOR}const k1e=(t,e)=>{var s,o,r,a;if(!t)return{};const n=t.tree.getBranchFromLeaf(t.currentLeafId);for(const l of[...n].reverse()){const c=l.message;if(c.author.role!==dt.User)continue;const u=(s=c.metadata)!=null?s:{};let d=[];e===Ke.Research?d=(o=u.caterpillar_selected_sources)!=null?o:[]:d=(r=u.selected_sources)!=null?r:[];const f=(a=u==null?void 0:u.selected_mcp_sources)!=null?a:[],m=d.map(p=>{if(p==="web"||p==="cloud")return p;const g=Object.entries(LR);for(const[h,_]of g)if(_===p)return h;return p});if(d.length||f.length){const p=new Set(m),g=new Set(f.map(_=>_.id)),h=new Set(f.filter(_=>_.status==="ONLY_ME").map(_=>_.id));return{selectedSources:p,selectedMCPSources:g,selectedByoMCPSources:h}}}return{}},E1e=t=>{var n,s,o,r,a,l,c,u;if(!t)return;const e=t.tree.getBranchFromLeaf(t.currentLeafId);for(const d of e){const f=d.message;if(f.author.role!==dt.User&&((n=f.metadata)==null?void 0:n.invoked_resource)===void 0||f.content.content_type==="user_editable_context")continue;const m=(o=(s=f.metadata)==null?void 0:s.selected_sources)!=null?o:[],p=(a=(r=f.metadata)==null?void 0:r.selected_mcp_sources)!=null?a:[];if(((l=f.metadata)==null?void 0:l.invoked_resource)!==void 0||m.length>0||p.length>0)return p.some(g=>g.status==="ONLY_ME")||((u=(c=f.metadata)==null?void 0:c.invoked_resource)==null?void 0:u.publish_status)==="private"}},T1e=()=>{var t;return xe("3544641259")||!!((t=xZ())!=null&&t.enabled)},M1e=(t,e,n)=>[...t].filter(s=>e.includes(s)||n&&Ga(s)),Of=t=>{V.logEventWithStatsig("chatgpt_connectors_toggled_sources","chatgpt_connectors_toggled_sources",t)};function Yc(t,e=!1){var Pe,Ae,de;const n=vn(),{session:s}=Ud(),o=T1e(),r=GR(),a=X(r),l=X(()=>Fn(Pt(t))),c=a!=null?a:e_(l!=null?l:null)?Ke.Glaux:null,u=gZ(),d=X(u),f=v.useMemo(()=>$R(oe=>k1e(oe,c),{equals:pp}),[c]),m=Pt(t),p=X(()=>f(m)),g=X(()=>KR()),h=X(()=>YC()),_=g===void 0||h===void 0,x=zR(),b=X(()=>qR()),y=x||((Pe=b==null?void 0:b.size)!=null?Pe:0)>0,S=X(()=>ZC(n)),C=S===void 0,w=v.useMemo(()=>(S!=null?S:[]).filter(oe=>["admin_connected","user_connected"].includes(oe.user_connection_details.auth_status)),[S]),{data:k}=bo(Ft.EnableRemoteBrowserData),{availableConnectorTypes:E,isLoading:T}=_1e({clientThreadId:t,includeAutoConnectors:e}),M=!k&&pc(c),[A,I,j,R,O,L]=Ze(t,oe=>[E1e(oe),oe==null?void 0:oe.startedWithByoMcp,oe==null?void 0:oe.selectedSources,oe==null?void 0:oe.selectedMCPSources,oe==null?void 0:oe.hasModifiedSources,oe==null?void 0:oe.mentionedSources]),{platformConnectors:B,isLoading:U}=t_(),H=c===Ke.Research||pc(c),{connectorLinks:$,isLoading:F,isFetching:z}=Vo({skip:!o||!H,fetchValidLinksOnly:!0}),W=X(()=>qd()),Y=Tn(),K=(Y==null?void 0:Y.isWorkspacePlan())&&W,Z=v.useMemo(()=>y?(g!=null?g:[]).filter(oe=>oe.type===ei.MCP_CONNECTOR&&($==null?void 0:$.has(oe.id))).map(oe=>String(oe.id)):[],[y,g,$]);v.useEffect(()=>{if(!t||!c||typeof window>"u")return;const oe=new URL(window.location.href),se=oe.searchParams.get("select_connector_id");if(!se)return;const Oe=vr[se],Ne=ku(c);if(!Ne||Ne&&(_||C))return;const ze=Ne?new Set([...Array.from(g!=null?g:[]).map(Le=>Le.type).filter(Le=>typeof Le=="string"&&Le!==ei.MCP_CONNECTOR),...(w!=null?w:[]).map(Le=>Le.user_connection_details.connection_type)]):void 0;pt(t,Le=>{var ce,be,He,Ge,nt,at;if((ce=Le.selectedSources)!=null||(Le.selectedSources=new Map),(be=Le.selectedMCPSources)!=null||(Le.selectedMCPSources=new Map),Oe){const Xe=(He=Le.selectedSources.get(c))!=null?He:new Set;Xe.add(Oe),Ne&&ze&&ze.forEach(gt=>Xe.add(gt)),Le.selectedSources.set(c,Xe)}else{const Xe=(Ge=Le.selectedMCPSources.get(c))!=null?Ge:new Set;Xe.add(se),Ne&&y&&Z.forEach(gt=>Xe.add(gt)),Le.selectedMCPSources.set(c,Xe)}if(Ne&&ze){const Xe=(nt=Le.selectedSources.get(c))!=null?nt:new Set;ze.forEach(gt=>Xe.add(gt)),Le.selectedSources.set(c,Xe)}if(Ne&&y){const Xe=(at=Le.selectedMCPSources.get(c))!=null?at:new Set;Z.forEach(gt=>Xe.add(gt)),Le.selectedMCPSources.set(c,Xe)}}),oe.searchParams.delete("select_connector_id");const Qe=oe.pathname+(oe.searchParams.toString()?"?".concat(oe.searchParams.toString()):"")+oe.hash;window.history.replaceState({},"",Qe)},[t,c,g,w,y,Z,_,C]),v.useEffect(()=>{t&&I===void 0&&A!==void 0&&pt(t,oe=>{oe.startedWithByoMcp=A})},[t,I,A]),v.useEffect(()=>{if(!t||I===void 0||U||K)return;const oe=j==null?void 0:j.get(c),se=R==null?void 0:R.get(c),Oe=new Set([...se!=null?se:[]].filter(ze=>{const Qe=B.get(ze);return(Qe==null?void 0:Qe.status)==="ONLY_ME"})),Ne=new Set([...se!=null?se:[]].filter(ze=>{const Qe=B.get(ze);return(Qe==null?void 0:Qe.status)!=="ONLY_ME"}));I?(oe&&oe.size>0||Ne.size>0)&&pt(t,ze=>{var Qe,Le,ce,be;(Le=(Qe=ze.selectedSources)==null?void 0:Qe.get(c))==null||Le.clear();for(const He of Ne)(be=(ce=ze.selectedMCPSources)==null?void 0:ce.get(c))==null||be.delete(He)}):Oe.size>0&&pt(t,ze=>{var Qe,Le;for(const ce of Oe)(Le=(Qe=ze.selectedMCPSources)==null?void 0:Qe.get(c))==null||Le.delete(ce)})},[t,I,j,R,c,B,U,K]),v.useEffect(()=>{var He,Ge,nt,at;if(!t||O)return;const oe=(He=j==null?void 0:j.get(c))!=null?He:new Set,se=(Ge=R==null?void 0:R.get(c))!=null?Ge:new Set,Oe=oe.size>0,Ne=se.size>0,ze=new Set([...Array.from(h!=null?h:[]).filter(Xe=>Xe!==ei.MCP_CONNECTOR),...(w!=null?w:[]).map(Xe=>Xe.user_connection_details.connection_type)]),Qe=ku(c)&&!_&&!C&&Array.from(ze).some(Xe=>!oe.has(Xe)),Le=ku(c)&&y&&Z.length>0&&Z.some(Xe=>!se.has(Xe));if(Qe||Le){pt(t,Xe=>{var gt,ht,Zt,It;if(Qe){const lt=(gt=Xe.selectedSources)==null?void 0:gt.get(c);(ht=Xe.selectedSources)!=null||(Xe.selectedSources=new Map),Xe.selectedSources.set(c,new Set([...lt!=null?lt:[],...ze]))}if(Le){const lt=(Zt=Xe.selectedMCPSources)==null?void 0:Zt.get(c);(It=Xe.selectedMCPSources)!=null||(Xe.selectedMCPSources=new Map),Xe.selectedMCPSources.set(c,new Set([...lt!=null?lt:[],...Z]))}});return}if(Oe||Ne)return;const ce=p.selectedSources,be=p.selectedMCPSources;((nt=ce==null?void 0:ce.size)!=null?nt:0)===0&&((at=be==null?void 0:be.size)!=null?at:0)===0||pt(t,Xe=>{var gt,ht;ce&&ce.size>0&&((gt=Xe.selectedSources)!=null||(Xe.selectedSources=new Map),Xe.selectedSources.set(c,new Set(ce))),be&&be.size>0&&((ht=Xe.selectedMCPSources)!=null||(Xe.selectedMCPSources=new Map),Xe.selectedMCPSources.set(c,new Set(be)))})},[t,j,R,O,c,p.selectedSources,p.selectedMCPSources,h,y,Z,w,_,C]);const J=v.useMemo(()=>{var Oe;const oe=(Oe=j==null?void 0:j.get(c))!=null?Oe:new Set;if(O)return[...oe];const se=p.selectedSources;return se&&se.size>0?[...se]:M?oe.has("cloud")?["web","cloud"]:["web"]:[...oe]},[j,c,O,p.selectedSources,M]),Q=v.useMemo(()=>new Set(L!=null?L:[]),[L]),ne=v.useMemo(()=>{var oe;return c===hZ&&Js&&(d!=null&&d.has(Js))?Array.from((oe=E.get(Js))!=null?oe:[]):[]},[d,c,E]),ie=v.useMemo(()=>{var oe;return T?new Set([...J,...L!=null?L:[]]):new Set([...M1e([...J],[...(oe=E.get(c))!=null?oe:[],...ne],y&&c===Ke.Glaux),...L!=null?L:[]])},[E,T,L,c,J,y,ne]),fe=v.useMemo(()=>{var Oe;const oe=(Oe=R==null?void 0:R.get(c))!=null?Oe:new Set;if(O)return oe;const se=p.selectedMCPSources;if(se&&se.size>0)return se;if(M)return new Set;if(ku(c)&&y){const Ne=new Set(oe);for(const ze of Z)Ne.add(ze);return Ne}return oe},[R,O,c,p.selectedMCPSources,M,y,Z]),ae=v.useMemo(()=>new Set(fe),[fe]),le=v.useMemo(()=>{if(!o||!H||F||z)return ie;const oe=new Set;return ie.forEach(se=>{if(se==="web"||se==="cloud"){oe.add(se);return}if(se in un){const Oe=un[se];$.has(Oe)&&oe.add(se);return}if(Ga(se)){$.has(se)&&oe.add(se);return}}),oe},[ie,$,o,H,F,z]),pe=v.useCallback(oe=>{var se,Oe,Ne;YR({selectedSourcesMap:_Z((se=oe.selectedSources)!=null?se:new Map),selectedMCPSourcesMap:oe.selectedMCPSources,scope:{userId:(Oe=s==null?void 0:s.user)==null?void 0:Oe.id,workspaceId:(Ne=s==null?void 0:s.account)==null?void 0:Ne.id}})},[(Ae=s==null?void 0:s.user)==null?void 0:Ae.id,(de=s==null?void 0:s.account)==null?void 0:de.id]),_e=v.useCallback(oe=>{const se=B.get(oe);return(se==null?void 0:se.status)==="ONLY_ME"},[B]),Ce=v.useCallback(oe=>{t&&pt(t,se=>{var nt,at,Xe,gt,ht,Zt,It,lt;const Oe=(at=(nt=se.selectedSources)==null?void 0:nt.get(c))!=null?at:new Set,Ne=(gt=(Xe=se.selectedMCPSources)==null?void 0:Xe.get(c))!=null?gt:new Set,ze=new Set([...Ne].filter(_e)),Qe=new Set([...Ne].filter(Mt=>!_e(Mt))),Le=new Set([...Oe,...Ne,...(ht=se.mentionedSources)!=null?ht:[]]),ce=(Zt=se.mentionedSources)!=null?Zt:new Set;let be,He;const Ge=se.startedWithByoMcp!==void 0;if(Ga(oe))if(_e(oe))if(He="mcp-byo",Ne.has(oe))be="remove",Ne.delete(oe);else{if(Ge&&se.startedWithByoMcp===!1&&!K)return;if(be="add",!Ge&&!K){Oe.clear();for(const Yt of Qe)Ne.delete(Yt)}Ne.add(oe)}else if(He="mcp-workspace",Le.has(oe))be="remove",Ne.delete(oe);else{if(Ge&&se.startedWithByoMcp&&!K)return;if(be="add",!Ge&&ze.size>0&&!K)for(const Mt of ze)Ne.delete(Mt);Ne.add(oe)}else if(He="platform",oe==="sharepoint_admin_sync_connector"&&(Oe.delete("sharepoint_sync_connector"),ce.delete("sharepoint_sync_connector"),Oe.delete(Te.SHAREPOINT_CONNECTOR),ce.delete(Te.SHAREPOINT_CONNECTOR)),Le.has(oe))be="remove",Oe.delete(oe),ce.has(oe)&&ce.delete(oe);else{if(Ge&&se.startedWithByoMcp&&!K)return;if(be="add",Oe.add(oe),!Ge&&ze.size>0&&!K)for(const Mt of ze)Ne.delete(Mt)}(It=se.selectedSources)!=null||(se.selectedSources=new Map),se.selectedSources.set(c,Oe),(lt=se.selectedMCPSources)!=null||(se.selectedMCPSources=new Map),se.selectedMCPSources.set(c,Ne),se.mentionedSources=ce,se.hasModifiedSources=!0,Of({source:"toggle",action:be,type:He,systemHint:c,selectedSource:oe}),pe(se)})},[t,c,pe,_e,K]),ge=v.useCallback(oe=>{t&&pt(t,se=>{var be,He,Ge,nt,at,Xe,gt,ht,Zt;let Oe;const Ne=se.startedWithByoMcp!==void 0,ze=(He=(be=se.selectedSources)==null?void 0:be.get(c))!=null?He:new Set,Qe=(nt=(Ge=se.selectedMCPSources)==null?void 0:Ge.get(c))!=null?nt:new Set,Le=new Set([...Qe].filter(_e)),ce=new Set([...Qe].filter(It=>!_e(It)));if(_e(oe)){if(Oe="mcp-byo",Ne&&se.startedWithByoMcp===!1&&!K)return;if(!Ne&&!K){((gt=(Xe=se.selectedSources)==null?void 0:Xe.get(c))!=null?gt:new Set).clear();for(const lt of ce)Qe.delete(lt)}Qe.add(oe)}else{if(Oe=Ga(oe)?"mcp-workspace":"platform",Ne&&se.startedWithByoMcp&&!K)return;if((Ga(oe)?Qe:ze).add(oe),!Ne&&!K){const It=(at=se.selectedMCPSources)==null?void 0:at.get(c);for(const lt of Le)It==null||It.delete(lt)}}(ht=se.selectedSources)!=null||(se.selectedSources=new Map),se.selectedSources.set(c,ze),(Zt=se.selectedMCPSources)!=null||(se.selectedMCPSources=new Map),se.selectedMCPSources.set(c,Qe),Of({source:"toggle",action:"add",type:Oe,systemHint:c,selectedSource:oe}),pe(se),se.hasModifiedSources=!0})},[t,c,pe,_e,K]),Re=v.useCallback(oe=>{t&&pt(t,se=>{var ze,Qe,Le,ce;const Oe=(ze=se.mentionedSources)!=null?ze:new Set;Oe.add(oe),se.mentionedSources=Oe;const Ne=(Le=(Qe=se.selectedSources)==null?void 0:Qe.get(c))!=null?Le:new Set;Ne.add(oe),(ce=se.selectedSources)!=null||(se.selectedSources=new Map),se.selectedSources.set(c,Ne),Of({source:"mentions",action:"add",type:"platform",systemHint:c,selectedSource:oe}),pe(se)})},[t,c,pe]),ke=v.useCallback(oe=>{t&&pt(t,se=>{var Ne;const Oe=(Ne=se.mentionedSources)!=null?Ne:new Set;Oe.delete(oe),se.mentionedSources=Oe,Of({source:"mentions",action:"remove",type:"platform",systemHint:c,selectedSource:oe})})},[t,c]),he=v.useCallback(oe=>{t&&pt(t,se=>{var Le,ce,be,He,Ge,nt,at,Xe,gt;const Oe=(ce=(Le=se.selectedSources)==null?void 0:Le.get(c))!=null?ce:new Set,Ne=(He=(be=se.selectedMCPSources)==null?void 0:be.get(c))!=null?He:new Set,ze=(Ge=se.mentionedSources)!=null?Ge:new Set;let Qe;_e(oe)?(Qe="mcp-byo",((at=(nt=se.selectedMCPSources)==null?void 0:nt.get(c))!=null?at:new Set).delete(oe)):(Qe=Ga(oe)?"mcp-workspace":"platform",Oe.delete(oe),Ne.delete(oe),ze.has(oe)&&ze.delete(oe)),(Xe=se.selectedSources)!=null||(se.selectedSources=new Map),se.selectedSources.set(c,Oe),(gt=se.selectedMCPSources)!=null||(se.selectedMCPSources=new Map),se.selectedMCPSources.set(c,Ne),se.mentionedSources=ze,Of({source:"toggle",action:"remove",type:Qe,systemHint:c,selectedSource:oe}),pe(se),se.hasModifiedSources=!0})},[t,c,pe,_e]),Ee=v.useRef(!1);return v.useEffect(()=>{if(Ee.current||!H||F||z)return;const oe=[...ie].filter(se=>!le.has(se)&&se!=="web"&&se!=="cloud");oe.length!==0&&(Ee.current=!0,t&&(pt(t,se=>{var ze,Qe,Le,ce;const Oe=(Qe=(ze=se.selectedSources)==null?void 0:ze.get(c))!=null?Qe:new Set,Ne=(Le=se.mentionedSources)!=null?Le:new Set;oe.forEach(be=>{var He,Ge,nt;if(!Ga(be))Oe.delete(be),Ne.delete(be);else{const at=(Ge=(He=se.selectedMCPSources)==null?void 0:He.get(c))!=null?Ge:new Set;at.delete(be),(nt=se.selectedMCPSources)!=null||(se.selectedMCPSources=new Map),se.selectedMCPSources.set(c,at)}}),(ce=se.selectedSources)!=null||(se.selectedSources=new Map),se.selectedSources.set(c,Oe),se.mentionedSources=Ne,pe(se)}),ga("chatgpt_connectors_toggled_sources",oe.length,{action:"expired_auto_removed",sources:oe.join(","),systemHint:String(c!=null?c:"")})))},[ie,le,H,t,c,pe,F,z]),o?{selectedSources:le,selectedMCPSources:ae,mentionedSources:Q,toggleSource:Ce,addSource:ge,deleteSource:he,addMentionedSource:Re,deleteMentionedSource:ke}:{selectedSources:void 0,selectedMCPSources:void 0,mentionedSources:void 0,toggleSource:()=>{},addSource:()=>{},deleteSource:()=>{},addMentionedSource:()=>{},deleteMentionedSource:()=>{}}}function gB(t,e="<unknown>"){if(!t)throw yZ(new Error("".concat(e,": unexpected non-truthy condition: ").concat(JSON.stringify(t))),gB)}const Q_=v.createContext({sourceConversationId:null,sourceMessageId:null,automationId:null,isScheduledRun:!1,modalOpen:!1,openModal:()=>{},closeModal:()=>{}});function Wot({clientThreadId:t,children:e}){var m,p,g,h,_,x,b,y,S;const n=_B(t),s=O1e(t),o=((m=s==null?void 0:s.metadata)==null?void 0:m.real_author_type)==="automation";let r=null;o?r=(g=(p=s==null?void 0:s.metadata)==null?void 0:p.real_author_id)!=null?g:null:n&&(r=(_=(h=n==null?void 0:n.metadata)==null?void 0:h.n7jupd_scheduled_id)!=null?_:null);const a=Y_(r);let l=null,c=null;o?(l=(x=a==null?void 0:a.source_conversation_id)!=null?x:null,c=(b=a==null?void 0:a.source_message_id)!=null?b:null):n&&(l=(y=Lt(t))!=null?y:null,c=(S=n==null?void 0:n.id)!=null?S:null);const[u,d]=v.useState(!1),f=v.useMemo(()=>({sourceConversationId:l,sourceMessageId:c,automationId:r,isScheduledRun:o,modalOpen:u,openModal:()=>d(!0),closeModal:()=>d(!1)}),[r,u,l,c,o]);return i.jsxs(Q_.Provider,{value:f,children:[e,i.jsx(N1e,{clientThreadId:t})]})}const hB=["daily","weekly","monthly"],A1e=Object.freeze({frequency:"monthly",by_hour:14,by_minute:0,by_month_day:1,by_second:0});function N1e({clientThreadId:t}){const{sourceConversationId:e,sourceMessageId:n,modalOpen:s,closeModal:o,automationId:r}=v.useContext(Q_),a=_B(t),l=Y_(r);return e?l&&n?i.jsx(j1e,{automation:l,sourceConversationId:e,sourceMessageId:n,sourceClientThreadId:t,modalOpen:s,closeModal:o}):a?i.jsx(I1e,{sourceClientThreadId:t,sourceConversationId:e,sourceMessage:a,modalOpen:s,closeModal:o}):null:null}function I1e({sourceClientThreadId:t,sourceConversationId:e,sourceMessage:n,modalOpen:s,closeModal:o}){const r=D1e(t,n),{selectedSources:a}=Yc(t),{selectedRepos:l}=_k(t,Z_),c=Intl.DateTimeFormat().resolvedOptions().timeZone,u=v.useMemo(()=>{var f;return N(N(N({system_hints:[fp]},a&&{selected_sources:V1(a)}),l&&{selected_github_repos:[...(f=l.selectedRepos)!=null?f:[]],selected_all_github_repos:l.selectedAllRepos}),c&&{user_timezone:c})},[a,l,c]),d=bk(e,t,n.id,u,null);return r?i.jsx(i.Fragment,{children:i.jsx(zm,{initialScheduleComponents:r.schedule_components,nextRunTimes:r.next_run_times,initialValidFrequencies:hB,children:s&&i.jsx(dk,{source:"chat",item:r,onSave:d,onClose:o})},r.id)}):null}function j1e({automation:t,sourceConversationId:e,sourceMessageId:n,sourceClientThreadId:s,modalOpen:o,closeModal:r}){var l;const a=bk(e,s,n,(l=t.user_message)==null?void 0:l.metadata,t.id);return i.jsx(i.Fragment,{children:i.jsx(zm,{initialScheduleComponents:t.schedule_components,nextRunTimes:t.next_run_times,initialValidFrequencies:hB,children:o&&i.jsx(dk,{source:"chat",item:t,onSave:a,onClose:r})},t.id)})}function P1e({children:t}){const{openModal:e,automationId:n,sourceMessageId:s,isScheduledRun:o}=v.useContext(Q_);return t({openScheduleModal:e,isScheduled:!!n,isSchedulable:!n&&!!s,isScheduledRun:o})}function qot(){const{automationId:t,sourceConversationId:e,sourceMessageId:n}=v.useContext(Q_),s=Y_(t);if(!s||!e||!n)return null;const o=ZR(e);return i.jsx(R1e,{automation:s,sourceClientThreadId:o,sourceConversationId:e,sourceMessageId:n})}function R1e({sourceConversationId:t,sourceClientThreadId:e,sourceMessageId:n,automation:s}){var l;const o=te(),r=bt(),a=bk(t,e,n,(l=s.user_message)==null?void 0:l.metadata,s.id);return i.jsx(s1e,{automation:s,onSave:a,overrideManageAllAction:i.jsx(ee.Item,{icon:wc,label:o.formatMessage({id:"uPBjIE",defaultMessage:"Schedules"}),onClick:()=>r(B1e())})})}function _B(t){return Ze(t,e=>{if(!e)return null;function n(){const s=e==null?void 0:e.tree.getBranchFromLeaf(e.currentLeafId);if(!s)return null;for(let o=s.length-1;o>=0;o--)if(L1e(s[o].message))return s[o].message;return null}return n()})}function O1e(t){return Ze(t,e=>{if(!e)return null;function n(){var o;const s=e==null?void 0:e.tree.getBranchFromLeaf(e.currentLeafId);if(!s)return null;for(let r=0;r<s.length;r++){const a=s[r].message;if(a.author.role===dt.User&&((o=a.metadata)==null?void 0:o.real_author_type)==="automation")return a}return null}return n()})}function L1e(t){var e,n;return((e=t.metadata)==null?void 0:e.n7jupd_schedulable)||((n=t.metadata)==null?void 0:n.n7jupd_schedulable_score)!==void 0}function D1e(t,e){const n=te(),s=Lt(t),o=Ze(t,l=>{const c=l==null?void 0:l.tree.getBranchFromLeaf(e.id);return Bc(c,u=>u.message.author.role===dt.User)}),r=Ze(t,l=>{var c;return(c=l==null?void 0:l.title)!=null?c:n.formatMessage({id:"4lMgsa",defaultMessage:"New Task"})}),a=v.useMemo(()=>{var c,u;if((c=e.metadata)!=null&&c.n7jupd_summary)return(u=e.metadata)==null?void 0:u.n7jupd_summary;if(!o)return null;const l=o.message.content;return l.content_type==="text"?l.parts.join(""):null},[e,o]);return v.useMemo(()=>!o||!a||!s?null:{id:null,title:r,prompt:a,conversation_id:s,schedule:"",is_enabled:!0,notifications_enabled:!0,email_enabled:!0,target_time_utc:null,schedule_components:A1e,default_timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,last_run_time:null,next_run_times:[]},[o,r,a,s])}function bk(t,e,n,s,o){const r=Nt(),a=Y_(o);return v.useCallback(async(c,u,d,f,m,p,g,h)=>{var x,b;gB(t,"Need server thread ID");const _=await ue.safePost("/conversation/{conversation_id}/agent_automation",{parameters:{path:{conversation_id:t}},requestBody:{jawbone_id:c,title:u,schedule:d,is_enabled:f,prompt:m,default_timezone:p,schedule_components:g,last_run_time:h,email_enabled:(x=a==null?void 0:a.email_enabled)!=null?x:!0,notifications_enabled:(b=a==null?void 0:a.notifications_enabled)!=null?b:!0,message_id:n,user_message:s&&Uv(Dc(m,s))}});return r.invalidateQueries({queryKey:fB()}),e&&pt(e,y=>{fo.updateTree(y,S=>{S.updateNodeMessageMetadata(n,{n7jupd_scheduled_id:_.id})})}),_},[r,n,t,e,a,s])}function B1e(){return"/schedules"}const Kv=je(()=>Me(()=>import("./11031636-mataoinojzjwr06u.js"),__vite__mapDeps([161,1,2,3])).then(t=>t.ShareProjectChatConfirmationModal)),xB=je(()=>Me(()=>import("./0ec7d136-gcmhnhy8jq7bgqho.js"),__vite__mapDeps([162,1,2,3,163])).then(t=>t.ShareProjectChatModal));function J_(t){"use forget";var L,B,U,H,$,F,z,W;const e=D.c(19),{clientThreadId:n,gizmoId:s,ownerUserId:o,gizmo:r,serverThreadId:a,location:l}=t,c=Et(),u=Un(n),[d,f,m]=Ze(n,H1e),p=c==null?void 0:c.normalizedAccountUserId,g=(B=(L=m!=null?m:s)!=null?L:r==null?void 0:r.gizmo.id)!=null?B:void 0,h=(H=(U=d==null?void 0:d.id)!=null?U:o)!=null?H:p,_=($=a!=null?a:u)!=null?$:f;let x;e[0]!==g?(x=Bs(g)?g:void 0,e[0]=g,e[1]=x):x=e[1];const{data:b}=QR(x),y=(F=b!=null?b:r)!=null?F:null,S=y==null?void 0:y.gizmo.share_recipient,C=(z=y==null?void 0:y.gizmo.sharing)==null?void 0:z.subjects,w=y!=null&&(S!=null?S!==wu.Private:((W=C==null?void 0:C.length)!=null?W:0)>0),k=h&&_&&Bs(g)&&w&&!(c!=null&&c.isWorkspaceAccount()),E=_&&Bs(g)&&w&&(c==null?void 0:c.isWorkspaceAccount());let T;e[2]!==y||e[3]!==h||e[4]!==_?(T=()=>{!y||!_||rt(xB,{gizmo:y,serverThreadId:_,ownerUserId:h!=null?h:"",onClose:U1e})},e[2]=y,e[3]=h,e[4]=_,e[5]=T):T=e[5];const M=T;let A;e[6]!==(y==null?void 0:y.gizmo.display.name)||e[7]!==l||e[8]!==_?(A=()=>{_&&rt(Kv,{projectName:y==null?void 0:y.gizmo.display.name,onConfirm:()=>{Yn(Kv),As.openSharingModal(_,l)},onClose:F1e})},e[6]=y==null?void 0:y.gizmo.display.name,e[7]=l,e[8]=_,e[9]=A):A=e[9],y==null||y.gizmo.display.name;const I=A;let j;e[10]!==l||e[11]!==M||e[12]!==I||e[13]!==_||e[14]!==k||e[15]!==E?(j=()=>{if(_){if(k){M();return}if(E){I();return}As.openSharingModal(_,l)}},e[10]=l,e[11]=M,e[12]=I,e[13]=_,e[14]=k,e[15]=E,e[16]=j):j=e[16];const R=j;let O;return e[17]!==R?(O={onShare:R},e[17]=R,e[18]=O):O=e[18],O}function F1e(){return Yn(Kv)}function U1e(){return Yn(xB)}function H1e(t){return[t==null?void 0:t.sharedProjectConversationOwner,t==null?void 0:t.continuingFromSharedProjectConversationId,ve.getGizmoId(t)]}const yB=re(me,"608c49",20,20),$1e=re(me,"c93ee6",20,20),ho={gray:{solid:{50:"#f9f9f9",400:"#8f8f8f"}},green:{400:"#04b84c"},purple:{400:"#924ff7"},blue:{400:"#0285ff"},orange:{400:"#fb6a22"},red:{400:"#fa423e"},pink:{400:"#ff66ad"},yellow:{400:"#ffc300"}},cn=new Set;function Kot(){return Promise.allSettled(Array.from(cn).map(t=>t()))}const bB=je(()=>Me(()=>import("./b7727372-ih4wlhq4lv8jr5cw.js"),__vite__mapDeps([164,2,1,3])));cn.add(bB.prefetch);const vB=je(()=>Me(()=>import("./4813494d-di0bpg5zidu9s57f.js").then(t=>t.F3),__vite__mapDeps([2,1,3])));cn.add(vB.prefetch);const SB=je(()=>Me(()=>import("./6781182a-kyrl5bw1gr47smyh.js"),__vite__mapDeps([165,2,1,3])));cn.add(SB.prefetch);const CB=je(()=>Me(()=>import("./4813494d-di0bpg5zidu9s57f.js").then(t=>t.F4),__vite__mapDeps([2,1,3])));cn.add(CB.prefetch);const wB=je(()=>Me(()=>import("./d5fa12f2-ekutmjhyxqub424h.js"),__vite__mapDeps([37,2,1,3])));cn.add(wB.prefetch);const kB=je(()=>Me(()=>import("./2a7d021a-ck96psp622suyvts.js"),__vite__mapDeps([166,2,1,3])));cn.add(kB.prefetch);const EB=je(()=>Me(()=>import("./d41188c5-huhjuffvy94zco5v.js"),__vite__mapDeps([167,2,1,3])));cn.add(EB.prefetch);const TB=je(()=>Me(()=>Promise.resolve().then(()=>zOe),void 0));cn.add(TB.prefetch);const MB=je(()=>Me(()=>import("./13c98494-b5tlcqkh5c83biuh.js"),__vite__mapDeps([168,2,1,3])));cn.add(MB.prefetch);const AB=je(()=>Me(()=>import("./c88750bf-fl7by4izan4c878i.js"),__vite__mapDeps([169,2,1,3])));cn.add(AB.prefetch);const NB=je(()=>Me(()=>import("./083c602a-egfg0hocv6doyfsw.js"),__vite__mapDeps([170,2,1,3])));cn.add(NB.prefetch);const IB=je(()=>Me(()=>Promise.resolve().then(()=>u6e),void 0));cn.add(IB.prefetch);const jB=je(()=>Me(()=>Promise.resolve().then(()=>B0e),void 0));cn.add(jB.prefetch);const PB=je(()=>Me(()=>Promise.resolve().then(()=>Jge),void 0));cn.add(PB.prefetch);const RB=je(()=>Me(()=>import("./6c493904-eup4esftu7u6ut5z.js"),__vite__mapDeps([171,2,1,3])));cn.add(RB.prefetch);const OB=je(()=>Me(()=>Promise.resolve().then(()=>Upe),void 0));cn.add(OB.prefetch);const LB=je(()=>Me(()=>import("./4813494d-di0bpg5zidu9s57f.js").then(t=>t.F5),__vite__mapDeps([2,1,3])));cn.add(LB.prefetch);const DB=je(()=>Me(()=>import("./4813494d-di0bpg5zidu9s57f.js").then(t=>t.F1),__vite__mapDeps([2,1,3])));cn.add(DB.prefetch);const BB=je(()=>Me(()=>Promise.resolve().then(()=>HZe),void 0));cn.add(BB.prefetch);const FB=je(()=>Me(()=>import("./bd6338f8-gbllnqi3xu87spgw.js"),__vite__mapDeps([172,2,1,3])));cn.add(FB.prefetch);const UB=je(()=>Me(()=>import("./417c9960-cqgyythmtturvp0x.js"),__vite__mapDeps([173,2,1,3])));cn.add(UB.prefetch);const HB=je(()=>Me(()=>import("./4a765750-gbc1nyu4yd6y1pof.js"),__vite__mapDeps([174,2,1,3])));cn.add(HB.prefetch);const $B=je(()=>Me(()=>import("./d0cc4358-kb342mgd8r6x1sx9.js"),__vite__mapDeps([175,2,1,3])));cn.add($B.prefetch);const GB=je(()=>Me(()=>Promise.resolve().then(()=>Xge),void 0));cn.add(GB.prefetch);const VB=je(()=>Me(()=>import("./c461eddf-cpz0chy39ou5whuu.js"),__vite__mapDeps([176,2,1,3])));cn.add(VB.prefetch);const zB=je(()=>Me(()=>import("./0c334ca9-e4sgtqictina0bmo.js"),__vite__mapDeps([177,2,1,3])));cn.add(zB.prefetch);const WB=je(()=>Me(()=>import("./ced50a6d-o1vtb1c6pxbfxjzj.js"),__vite__mapDeps([178,2,1,3])));cn.add(WB.prefetch);const qB=je(()=>Me(()=>import("./840aa878-osvn8b3qtkqxml3e.js"),__vite__mapDeps([179,2,1,3])));cn.add(qB.prefetch);const KB=je(()=>Me(()=>import("./ce023d4a-cg5o712e6weyeejn.js"),__vite__mapDeps([180,2,1,3])));cn.add(KB.prefetch);const YB=je(()=>Me(()=>Promise.resolve().then(()=>Hxe),void 0));cn.add(YB.prefetch);const ZB=je(()=>Me(()=>import("./4813494d-di0bpg5zidu9s57f.js").then(t=>t.F6),__vite__mapDeps([2,1,3])));cn.add(ZB.prefetch);const QB=je(()=>Me(()=>import("./76584279-oradf7i53d62c5v5.js"),__vite__mapDeps([181,2,1,3])));cn.add(QB.prefetch);const Dn={red:ho.red[400],orange:ho.orange[400],yellow:ho.yellow[400],green:ho.green[400],blue:ho.blue[400],purple:ho.purple[400],pink:ho.pink[400]},G1e=new Map([["pencil","edit"],["code-brackets","function"],["balancing-scale","scale"],["globe-spin","desk-globe"],["lite","lotus"],["pens","customize"]]),V1e=t=>{var n;const e=(n=G1e.get(t))!=null?n:t;return JB[e]},Yot={[Dn.red]:{color:Dn.red,label:qe({defaultMessage:"Red",id:"project-color-red"})},[Dn.orange]:{color:Dn.orange,label:qe({defaultMessage:"Orange",id:"project-color-orange"})},[Dn.yellow]:{color:Dn.yellow,label:qe({defaultMessage:"Yellow",id:"project-color-yellow"})},[Dn.green]:{color:Dn.green,label:qe({defaultMessage:"Green",id:"project-color-green"})},[Dn.blue]:{color:Dn.blue,label:qe({defaultMessage:"Blue",id:"project-color-blue"})},[Dn.purple]:{color:Dn.purple,label:qe({defaultMessage:"Purple",id:"project-color-purple"})},[Dn.pink]:{color:Dn.pink,label:qe({defaultMessage:"Pink",id:"project-color-pink"})}},JB={folder:{id:"folder",icon:PB,label:qe({id:"U1Ed2E",defaultMessage:"Folder"})},"currency-dollar":{id:"currency-dollar",icon:EB,label:qe({id:"O1L2ji",defaultMessage:"Currency Dollar"})},book:{id:"book",icon:SB,label:qe({id:"Ikd2nV",defaultMessage:"Book"})},"graduation-cap":{id:"graduation-cap",icon:LB,label:qe({id:"XyOlu9",defaultMessage:"Graduation Cap"})},edit:{id:"edit",icon:GB,label:qe({id:"e+bON4",defaultMessage:"Pencil"})},writing:{id:"writing",icon:QB,label:qe({id:"Xsx76J",defaultMessage:"Writing"})},function:{id:"function",icon:wB,label:qe({id:"1dLIWL",defaultMessage:"Code Brackets"})},terminal:{id:"terminal",icon:ZB,label:qe({id:"A7r7WM",defaultMessage:"Terminal"})},music:{id:"music",icon:HB,label:qe({id:"vhV09/",defaultMessage:"Music"})},popcorn:{id:"popcorn",icon:WB,label:qe({id:"IBA2my",defaultMessage:"Popcorn"})},customize:{id:"customize",icon:TB,label:qe({id:"NoBDe3",defaultMessage:"Customize"})},palette:{id:"palette",icon:kB,label:qe({id:"1NjHcj",defaultMessage:"Palette"})},stethoscope:{id:"stethoscope",icon:KB,label:qe({id:"m/9B0l",defaultMessage:"Stethoscope"})},health:{id:"health",icon:DB,label:qe({id:"uyQlnK",defaultMessage:"Health"})},lotus:{id:"lotus",icon:UB,label:qe({id:"XVtU4x",defaultMessage:"Lotus"})},suitcase:{id:"suitcase",icon:YB,label:qe({id:"Q7L6wE",defaultMessage:"Suitcase"})},"bar-chart":{id:"bar-chart",icon:vB,label:qe({id:"clYNPV",defaultMessage:"Bar Chart"})},kettlebell:{id:"kettlebell",icon:FB,label:qe({id:"d8EgqT",defaultMessage:"Kettlebell"})},dumbbell:{id:"dumbbell",icon:MB,label:qe({id:"4f2kWJ",defaultMessage:"Dumbbell"})},logs:{id:"logs",icon:IB,label:qe({id:"Uo10ll",defaultMessage:"Logs"})},scale:{id:"scale",icon:bB,label:qe({id:"Duq21q",defaultMessage:"Balancing Scale"})},"desk-globe":{id:"desk-globe",icon:RB,label:qe({id:"2oKfXd",defaultMessage:"Globe Spin"})},plane:{id:"plane",icon:VB,label:qe({id:"Mp7VbF",defaultMessage:"Plane"})},globe:{id:"globe",icon:OB,label:qe({id:"7Gk2Au",defaultMessage:"Globe"})},wrench:{id:"wrench",icon:qB,label:qe({id:"cVZEQn",defaultMessage:"Wrench"})},paw:{id:"paw",icon:$B,label:qe({id:"SwLz4n",defaultMessage:"Paw"})},flask:{id:"flask",icon:jB,label:qe({id:"YRGg1h",defaultMessage:"Flask"})},brain:{id:"brain",icon:CB,label:qe({id:"xDBu5X",defaultMessage:"Brain"})},heart:{id:"heart",icon:BB,label:qe({id:"7bZxVY",defaultMessage:"Heart"})},plant:{id:"plant",icon:zB,label:qe({id:"h4prM6",defaultMessage:"Plant"})}};function pr(t){return t==null?null:V1e(t)}function z1e(){return W1e}const W1e={icon:NB,label:qe({id:"i39yRC",defaultMessage:"Emoji"}),id:"default",hoverIcon:AB},q1e=[{label:qe({id:"cvNQv+",defaultMessage:"Investing"}),icon:pr("currency-dollar"),color:Dn.green,emoji:"currency-dollar"},{label:qe({id:"fxIuzw",defaultMessage:"Homework"}),icon:pr("graduation-cap"),color:Dn.blue,emoji:"graduation-cap"},{label:qe({id:"x1ggA9",defaultMessage:"Writing"}),icon:pr("writing"),color:Dn.purple,emoji:"writing"},{label:qe({id:"ftkSeM",defaultMessage:"Travel"}),icon:pr("plane"),color:Dn.yellow,emoji:"plane"}],K1e=[{label:qe({id:"dNjvRY",defaultMessage:"Research"}),icon:pr("desk-globe"),color:Dn.blue,emoji:"desk-globe"},{label:qe({id:"lPMK20",defaultMessage:"Planning"}),icon:pr("book"),color:Dn.green,emoji:"book"},{label:qe({id:"LM4RDS",defaultMessage:"Code"}),icon:pr("function"),color:Dn.orange,emoji:"function"},{label:qe({id:"umKvY2",defaultMessage:"Meetings"}),icon:pr("logs"),color:Dn.purple,emoji:"logs"},{label:qe({id:"NXAQZ1",defaultMessage:"Onboarding"}),icon:pr("suitcase"),color:Dn.yellow,emoji:"suitcase"},{label:qe({id:"4tnZcg",defaultMessage:"Brainstorms"}),icon:pr("brain"),color:Dn.pink,emoji:"brain"}];function Zot(t){return bZ(t)?K1e:q1e}function Qot(){return Object.values(JB)}function ag(t){"use forget";const e=D.c(23),{color:n,emoji:s,className:o,isSharedProject:r,size:a,strict:l}=t,c=s===void 0?null:s,u=te();let d;if(e[0]!==o||e[1]!==n||e[2]!==c||e[3]!==u||e[4]!==r||e[5]!==a||e[6]!==l){const f=q("icon",a==="lg"&&"h-8 w-8 max-md:h-6 max-md:w-[28px] max-md:h-[28px]",o);let m,p,g,h,_,x;if(e[8]!==n||e[9]!==c||e[10]!==u||e[11]!==r||e[12]!==l){const b=pr(c),y=!!b;g=!y&&!l;const S=z1e();let C;m=null;let w=null;y?(C=b.icon,w=b):g?(C=S.icon,m=S.hoverIcon,w=S):C=r?$1e:q_;const k=g&&"relative";e[19]!==k?(_=q(k),e[19]=k,e[20]=_):_=e[20];const E=n!=null?n:void 0;e[21]!==E?(x={color:E},e[21]=E,e[22]=x):x=e[22],p=C,h=w?u.formatMessage(w.label):void 0,e[8]=n,e[9]=c,e[10]=u,e[11]=r,e[12]=l,e[13]=m,e[14]=p,e[15]=g,e[16]=h,e[17]=_,e[18]=x}else m=e[13],p=e[14],g=e[15],h=e[16],_=e[17],x=e[18];d=i.jsxs("div",{className:_,style:x,children:[i.jsx(p,{"aria-label":h,className:q(f,g&&"group-hover:invisible group-data-[state=open]:invisible")}),g&&m&&i.jsx(m,{"aria-hidden":!0,inert:!0,className:q(f,"invisible absolute inset-0 place-self-center justify-self-center group-hover:visible group-data-[state=open]:visible")})]}),e[0]=o,e[1]=n,e[2]=c,e[3]=u,e[4]=r,e[5]=a,e[6]=l,e[7]=d}else d=e[7];return d}const Y1e=je(()=>Me(()=>import("./1e4de2e8-mg9kk8lnlf28zeta.js"),__vite__mapDeps([182,1,2,3,183])).then(t=>t.ProjectFolderAnimation),{loading:({color:t,isSharedProject:e,strict:n})=>i.jsx(ag,{color:t,isSharedProject:e,strict:n})}),vk=t=>{"use forget";var m,p;const e=D.c(9),n=Tn();let s;e[0]!==n?(s=n==null?void 0:n.getWorkspaceId(),e[0]=n,e[1]=s):s=e[1];const o=s,r=vZ(),{data:a,isLoading:l}=Lc(o);if(!(n!=null&&n.isWorkspaceAccount())){let g;return e[2]===Symbol.for("react.memo_cache_sentinel")?(g={hasWorkspacePermission:!0,isLoading:!1},e[2]=g):g=e[2],g}let c;e[3]!==t||e[4]!==(a==null?void 0:a.permissions)?(c=(p=(m=a==null?void 0:a.permissions)==null?void 0:m.includes(t))!=null?p:!1,e[3]=t,e[4]=a==null?void 0:a.permissions,e[5]=c):c=e[5];const d=r?c:!0;let f;return e[6]!==l||e[7]!==d?(f={hasWorkspacePermission:d,isLoading:l},e[6]=l,e[7]=d,e[8]=f):f=e[8],f},XB=()=>{"use forget";const t=D.c(3),{hasWorkspacePermission:e,isLoading:n}=vk(Xi.CrudProject);let s;return t[0]!==e||t[1]!==n?(s={canCreate:e,isLoading:n},t[0]=e,t[1]=n,t[2]=s):s=t[2],s},Jot=t=>{"use forget";var a,l;const e=D.c(3),{hasWorkspacePermission:n,isLoading:s}=vk(Xi.CrudProject),o=(l=n&&((a=t==null?void 0:t.gizmo.current_user_permission)==null?void 0:a.can_write))!=null?l:!1;let r;return e[0]!==o||e[1]!==s?(r={canEdit:o,isLoading:s},e[0]=o,e[1]=s,e[2]=r):r=e[2],r},Z1e=t=>{"use forget";var a,l;const e=D.c(4),{hasWorkspacePermission:n,isLoading:s}=vk(Xi.CrudProject);if(ui(t)){let c;return e[0]===Symbol.for("react.memo_cache_sentinel")?(c={canDelete:!1,isLoading:!1},e[0]=c):c=e[0],c}const o=(l=n&&((a=t==null?void 0:t.gizmo.current_user_permission)==null?void 0:a.can_delete))!=null?l:!1;let r;return e[1]!==o||e[2]!==s?(r={canDelete:o,isLoading:s},e[1]=o,e[2]=s,e[3]=r):r=e[3],r};function Q1e({gizmo:t,user_id:e}){return t.gizmo.author.user_id===e?!0:t.gizmo.sharing.subjects.some(n=>n.type===SZ.USER&&n.user_id===e)}const Yv=je(()=>Me(()=>Promise.resolve().then(()=>Bxe),void 0).then(t=>t.CreateOrEditProjectModal));function J1e(t){"use forget";var z,W;const e=D.c(40),n=te(),s=Nt(),o=!t.inSidebarFlyout,{canCreate:r}=XB(),a=bt(),[l,c]=v.useState(!1),{projects:u,data:d,hasNextPage:f,fetchNextPage:m,isLoading:p,isFetchingNextPage:g,isError:h}=QC(),_=t.inSidebarFlyout?u.slice(hm):u;let x;e[0]!==t.currentGizmoId?(x=Y=>{const{gizmo:K}=Y;return K.gizmo.id!==t.currentGizmoId},e[0]=t.currentGizmoId,e[1]=x):x=e[1];const b=_.filter(x),y=b.length===0;let S;e[2]===Symbol.for("react.memo_cache_sentinel")?(S=new Set,e[2]=S):S=e[2];const C=v.useRef(S);let w;e[3]!==(d==null?void 0:d.pages)?(w=(W=(z=d==null?void 0:d.pages.at(-1))==null?void 0:z.cursor)!=null?W:null,e[3]=d==null?void 0:d.pages,e[4]=w):w=e[4];const k=w;let E,T;e[5]!==h||e[6]!==k?(E=()=>{h&&k!=null&&C.current.delete(k)},T=[h,k],e[5]=h,e[6]=k,e[7]=E,e[8]=T):(E=e[7],T=e[8]),v.useEffect(E,T);let M,A;e[9]!==f?(M=()=>{f||C.current.clear()},A=[f],e[9]=f,e[10]=M,e[11]=A):(M=e[10],A=e[11]),v.useEffect(M,A);let I;e[12]!==f||e[13]!==g||e[14]!==p||e[15]!==k||e[16]!==m?(I=Y=>{if(p||Y==null)return;const K=new IntersectionObserver(Z=>{if(Z[0].isIntersecting&&!(!f||g)){if(k!=null){if(C.current.has(k))return;C.current.add(k)}m()}});return K.observe(Y),()=>{K.disconnect()}},e[12]=f,e[13]=g,e[14]=p,e[15]=k,e[16]=m,e[17]=I):I=e[17];const j=I,R=o&&r,O=y&&!h?j:void 0;let L;e[18]!==y||e[19]!==p?(L=y&&p&&i.jsxs(Fc,{children:[i.jsx(ee.Shimmer,{}),i.jsx(ee.Shimmer,{})]}),e[18]=y,e[19]=p,e[20]=L):L=e[20];let B;e[21]!==l||e[22]!==n||e[23]!==y||e[24]!==h||e[25]!==s?(B=y&&h&&i.jsxs("div",{className:"text-token-text-tertiary p-3 text-center italic",children:[n.formatMessage(kn.unableToLoadHistory),!l&&i.jsx("div",{className:"mt-1",children:i.jsx(Se,{as:"button",color:"primary",size:"small",className:"m-auto mt-2",onClick:()=>{c(!0),CZ(s)},children:n.formatMessage(kn.retryLoadingHistory)})})]}),e[21]=l,e[22]=n,e[23]=y,e[24]=h,e[25]=s,e[26]=B):B=e[26];let U;e[27]!==a||e[28]!==t||e[29]!==R?(U=R&&i.jsx(i.Fragment,{children:i.jsx(ee.Item,{icon:yB,label:i.jsx(P,N({},kn.newProjectButton)),onSelect:()=>{rt(Yv,{onClose:X1e,onSuccess:async Y=>{Y&&(await t.onUpdateConversationGizmo(Y),a("/g/".concat(Y,"/project")),Yn(Yv))}})}})}),e[27]=a,e[28]=t,e[29]=R,e[30]=U):U=e[30];const H=!p&&!y&&b.map((Y,K)=>{const{gizmo:Z}=Y,J=K===b.length-1?j:void 0;return i.jsxs(i.Fragment,{children:[R&&K===0&&i.jsx(ee.Separator,{},"new-project-separator"),i.jsx(ee.LinkItem,{to:Z!=null?gc(Z):"/",icon:i.jsx(ag,{color:Z.gizmo.display.theme,emoji:Z.gizmo.display.emoji,strict:!0}),label:Z.gizmo.display.name,onClick:Q=>{if(t.inSidebarFlyout)return;Q.preventDefault();const ne=Z!=null?gc(Z):"/";t.onUpdateConversationGizmo(Z.gizmo.id),a(ne)},ref:J},Z.gizmo.id)]})});let $;e[31]!==g?($=g&&i.jsxs(i.Fragment,{children:[i.jsx(ee.Shimmer,{}),i.jsx(ee.Shimmer,{})]}),e[31]=g,e[32]=$):$=e[32];let F;return e[33]!==B||e[34]!==U||e[35]!==H||e[36]!==$||e[37]!==O||e[38]!==L?(F=i.jsxs("div",{ref:O,children:[L,B,U,H,$]}),e[33]=B,e[34]=U,e[35]=H,e[36]=$,e[37]=O,e[38]=L,e[39]=F):F=e[39],F}function X1e(){return Yn(Yv)}function yA(t,e){return!n_(t)&&!e}var Oa=(t=>(t.Card="card",t.Feedback="feedback",t))(Oa||{}),zn=(t=>(t.OnCard="on-card",t.Conversation="conversation",t.Preview="preview",t.TaskEdit="sugarbone-edit",t))(zn||{});const e0e={type:"preview"},pi=Bn(t=>{const e=st(null),n=e.set;return e.set=s=>{const o=Kt(e);n(s);const r=Kt(e);o&&!Z1(r,o)&&r0e(t,o),r&&!Z1(r,o)&&o0e(t,r)},e}),t0e=Bn(t=>yt(()=>pi(t)!=null));function kd(t,e){pi.set(t,e)}function Ku(t){pi.set(t,null)}function eF(t,e,n){const s=Kt(()=>pi(t));s&&Z1(e,s)?Wt(e,"searchSources")&&Wt(s,"searchSources")&&s.scrollToHeader!==e.scrollToHeader?pi.set(t,G(N({},e),{shouldAnimateScroll:!0})):Ku(t):(n==null||n(),kd(t,e))}function Z1(t,e){return t===e?!0:!t||!e?!1:Wt(t,"searchSources")&&Wt(e,"searchSources")?e.messageId===t.messageId:Wt(t,"caterpillar")&&Wt(e,"caterpillar")?e.caterpillarId===t.caterpillarId&&e.initialTab===t.initialTab:Wt(t,"summarizer")&&Wt(e,"summarizer")?e.turnIndex===t.turnIndex:Wt(t,"cot")&&Wt(e,"cot")?t.turnExchangeId||e.turnExchangeId?e.turnExchangeId===t.turnExchangeId:e.turnIndex===t.turnIndex&&e.reasoningGroupIndex===t.reasoningGroupIndex:Wt(t,"retrievalResults")&&Wt(e,"retrievalResults")?e.turnIndex===t.turnIndex&&e.messageId===t.messageId:Wt(t,"n7jupdSources")&&Wt(e,"n7jupdSources")||Wt(t,"n7jupdTabs")&&Wt(e,"n7jupdTabs")?e.messageId===t.messageId:Wt(t,"codingCitations")&&Wt(e,"codingCitations")?e.messageId===t.messageId&&e.matchedText===t.matchedText:Wt(t,"conversationFiles")&&Wt(e,"conversationFiles")?!0:Wt(t,"product")&&Wt(e,"product")?e.messageId===t.messageId&&e.turnIndex===t.turnIndex&&e.contentReferenceStartIndex===t.contentReferenceStartIndex&&e.productIndex===t.productIndex:Wt(t,"product_agent")&&Wt(e,"product_agent")?e.product.id===t.product.id:Wt(t,"entity")&&Wt(e,"entity")?e.messageId===t.messageId&&e.contentReferenceStartIndex===t.contentReferenceStartIndex&&e.query===t.query&&e.category===t.category:Wt(t,"strix")&&Wt(e,"strix")?e.entityId===t.entityId:Wt(t,"pulse")&&Wt(e,"pulse")?!(t.feedbackViewType===zn.Preview&&(e.feedbackViewType===zn.TaskEdit||e.feedbackViewType===zn.Conversation)):!1}function bi(t){"use forget";const e=D.c(2),n=mo(),s=t!=null?t:n;wZ();let o;return e[0]!==s?(o={openThreadSidebar:r=>{s&&kd(s,r)},closeThreadSidebar:()=>{s&&Ku(s)},toggleThreadSidebar:(r,a)=>{s&&eF(s,r,a)}},e[0]=s,e[1]=o):o=e[1],o}function Wt(t,e){return(t==null?void 0:t.type)===e}function n0e(){"use forget";const t=D.c(2),e=mo();let n;return t[0]!==e?(n=()=>e!=null&&t0e(e),t[0]=e,t[1]=n):n=t[1],X(n)}function s0e(){"use forget";const t=D.c(2),e=mo();let n;return t[0]!==e?(n=()=>e!=null?pi(e):null,t[0]=e,t[1]=n):n=t[1],X(n)}function bA(t){"use forget";const e=D.c(3),n=mo();let s;return e[0]!==n||e[1]!==t?(s=()=>{const o=n!=null?pi(n):null;if(o&&Wt(o,t))return o},e[0]=n,e[1]=t,e[2]=s):s=e[2],X(s)}const o0e=(t,e)=>{if(Wt(e,"searchSources")){const{turnIndex:n,messageId:s}=e;V.logEventWithStatsig("Search Links Sidebar Shown","search_links_sidebar_shown",Ms({turnIndex:n,clientThreadId:t.id,messageId:s}))}else if(Wt(e,"product")){const{turnIndex:n,messageId:s,contentReferenceStartIndex:o,productId:r,productIndex:a,productUrl:l,interactionSource:c}=e;V.logEventWithStatsig("Product Sidebar Shown","product_sidebar_shown",G(N({},Ms({turnIndex:n,clientThreadId:t.id,messageId:s})),{content_reference_start_index:o,product_index:(a+1).toString(),product_url:l,product_id:r,interaction_source:c}))}else if(Wt(e,"retrievalResults")){const{turnIndex:n}=e;V.logEventWithStatsig("File Sources Sidebar Shown","file_sources_sidebar_shown",N({},Ms({turnIndex:n,clientThreadId:t.id})))}},r0e=(t,e)=>{if(Wt(e,"searchSources")){const{messageId:n,turnIndex:s}=e;V.logEventWithStatsig("Search Links Sidebar Closed","search_links_sidebar_closed",Ms({clientThreadId:t.id,messageId:n,turnIndex:s}))}else if(Wt(e,"product")){const{messageId:n,turnIndex:s,contentReferenceStartIndex:o,productIndex:r,productId:a}=e;V.logEventWithStatsig("Product Sidebar Closed","product_sidebar_closed",G(N({},Ms({turnIndex:s,clientThreadId:t.id,messageId:n})),{content_reference_start_index:o,product_index:(r+1).toString(),product_id:a}))}else if(Wt(e,"retrievalResults")){const{turnIndex:n}=e;V.logEvent("File Sources Sidebar Closed",Ms({clientThreadId:t.id,turnIndex:n}))}};function kl({location:t,gizmo_id:e}){V.logEvent("New Chat Button Clicked",{location:t,gizmo_id:e}),ft.logEvent("chatgpt_new_chat_button_clicked",null,{location:t})}function Sk(t,{location:e}){if(kl({location:e}),"button"in t&&(t.metaKey||t.ctrlKey)){V.logEventWithStatsig("New Chat Opened In New Tab","chatgpt_new_chat_opened_in_new_tab");return}ft.logEvent("chatgpt_web_thread_tap_new_thread"),mt()?ode():tt.getItem(Ie.HasSeenNewChatModal)!==!0&&(tt.setItem(Ie.HasSeenNewChatModal,!0),As.openModal(Nm.NoAuthNewChat),t.preventDefault())}function Xot(){"use forget";var a;const t=D.c(5),e=Tn();let n;t[0]!==e?(n=e==null?void 0:e.getWorkspaceId(),t[0]=e,t[1]=n):n=t[1];const s=Lc(n),o=s.isLoading?null:((a=s.data)==null?void 0:a.allow_third_party_gpts)==="allow_specific";let r;return t[2]!==e||t[3]!==o?(r=(e==null?void 0:e.isOwnerOfAccount())&&o,t[2]=e,t[3]=o,t[4]=r):r=t[4],r}function a0e(){"use forget";var l;const t=D.c(5),e=Tn();let n;t[0]!==e?(n=e==null?void 0:e.getWorkspaceId(),t[0]=e,t[1]=n):n=t[1];const{data:s,isLoading:o}=Lc(n);let r;return t[2]!==o||t[3]!==(s==null?void 0:s.permissions)?(r=o?null:((l=s==null?void 0:s.permissions)==null?void 0:l.includes("chatgpt.workspace.feature.enhanced-citations.access"))===!0,t[2]=o,t[3]=s==null?void 0:s.permissions,t[4]=r):r=t[4],r}function tF(t){const e=JSON.stringify(t.map(s=>[s.id,s.title,s.update_time]));return v.useMemo(()=>t,[e])}const nF=3,i0e="starred-conversations",l0e=1;function c0e(t){return e=>e?[...e.filter(s=>s.item.id!==t.item.id),t]:[t]}function u0e(t){return e=>e&&e.filter(n=>n.item.id!==t)}function d0e(t){var e;return((e=t==null?void 0:t.length)!=null?e:0)<nF}function vA(){return En({queryKey:[om],queryFn:async()=>await ue.safeGet("/pins",{parameters:{query:{limit:nF}},authOption:Ot.SendIfAvailable})})}function sF(){"use forget";var p;const t=D.c(11);let e;t[0]===Symbol.for("react.memo_cache_sentinel")?(e=vA(),t[0]=e):e=t[0];const n=kZ(i0e,l0e,e.queryKey);let s;t[1]===Symbol.for("react.memo_cache_sentinel")?(s=Et(),t[1]=s):s=t[1];const o=!!s;let r;t[2]===Symbol.for("react.memo_cache_sentinel")?(r=vA(),t[2]=r):r=t[2];const a=o?n:void 0;let l;t[3]!==a?(l=G(N({},r),{placeholderData:a,enabled:o}),t[3]=a,t[4]=l):l=t[4];const{data:c,isLoading:u}=ut(l);let d;t[5]!==c?(d=(p=c==null?void 0:c.map(f0e))!=null?p:[],t[5]=c,t[6]=d):d=t[6];const f=tF(d);let m;return t[7]!==f||t[8]!==c||t[9]!==u?(m={conversations:f,data:c,isLoading:u},t[7]=f,t[8]=c,t[9]=u,t[10]=m):m=t[10],m}function f0e(t){return t.item}function ert(){"use forget";const t=D.c(11),e=Nt(),n=Dt();let s;t[0]!==e?(s=l=>{const{isStarred:c,conversation:u}=l,d=e.getQueryData([om]),f=e.getQueryData(sm());if(c&&!d0e(d))return{previousStarredConversationsData:d,previousGeneralConversationsData:f};c?(e.setQueryData([om],c0e({item_type:"conversation",item:u})),e.setQueryData(sm(),EZ(u.id))):(e.setQueryData([om],u0e(u.id)),e.setQueryData(sm(),TZ(u,{items:[u],total:1,limit:JR,offset:0})));const m=Lt(u.id);return m&&pt(m,p=>{p.isStarred=c}),{previousStarredConversationsData:d,previousGeneralConversationsData:f}},t[0]=e,t[1]=s):s=t[1];let o;t[2]!==e||t[3]!==n?(o=(l,c,u)=>{if(u!=null&&u.previousStarredConversationsData&&e.setQueryData([om],u.previousStarredConversationsData),u!=null&&u.previousGeneralConversationsData&&e.setQueryData(sm(),u.previousGeneralConversationsData),c){const f=Lt(c.conversation.id);f&&pt(f,m=>{m.isStarred=!c.isStarred})}const d=Q0(l);n.warning(d!=null?d:"Error",{duration:2})},t[2]=e,t[3]=n,t[4]=o):o=t[4];let r;t[5]!==e?(r=()=>{Fo(e)},t[5]=e,t[6]=r):r=t[6];let a;return t[7]!==s||t[8]!==o||t[9]!==r?(a={mutationFn:m0e,onMutate:s,onError:o,onSettled:r},t[7]=s,t[8]=o,t[9]=r,t[10]=a):a=t[10],zt(a)}async function m0e(t){const{isStarred:e,conversation:n}=t;return await ue.safePatch("/conversation/{conversation_id}",{parameters:{path:{conversation_id:n.id}},requestBody:{is_starred:e}}),{conversation:n,isStarred:e}}const trt=()=>{"use forget";return X(p0e)};function p0e(){return(gp()&&JC()||XR())&&Eo("43324078").get("enabled",!1)}const Zv="chatgpt_toc_sidebar_dismissed",Qv="chatgpt-toc-visibility-change",Ck=()=>typeof window<"u",SA=()=>{if(!Ck())return!1;try{return window.sessionStorage.getItem(Zv)==="1"}catch(t){return!1}},g0e=t=>{if(Ck()){try{t?window.sessionStorage.setItem(Zv,"1"):window.sessionStorage.removeItem(Zv)}catch(e){}window.dispatchEvent(new Event(Qv))}},nrt=()=>{const[t,e]=v.useState(SA);v.useEffect(()=>{if(!Ck())return;const s=()=>e(SA());return window.addEventListener(Qv,s),()=>{window.removeEventListener(Qv,s)}},[]);const n=v.useCallback(s=>{e(s),g0e(s)},[]);return[t,n]};function wk(){const t=Je("3436367576"),e=t.get("enable_local_indexing",!1),n=t.get("enable_ux",!1),s=Et(),o=!!(s!=null&&s.hasPlusFeatures());return{isFannyPackEnabled:n||o,isFannyPackInitializerEnabled:e||o}}var a2={},CA;function h0e(){return CA||(CA=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),(function(e){e.Unidentified="Unidentified",e.Alt="Alt",e.AltGraph="AltGraph",e.CapsLock="CapsLock",e.Control="Control",e.Fn="Fn",e.FnLock="FnLock",e.Hyper="Hyper",e.Meta="Meta",e.NumLock="NumLock",e.ScrollLock="ScrollLock",e.Shift="Shift",e.Super="Super",e.Symbol="Symbol",e.SymbolLock="SymbolLock",e.Enter="Enter",e.Tab="Tab",e.ArrowDown="ArrowDown",e.ArrowLeft="ArrowLeft",e.ArrowRight="ArrowRight",e.ArrowUp="ArrowUp",e.End="End",e.Home="Home",e.PageDown="PageDown",e.PageUp="PageUp",e.Backspace="Backspace",e.Clear="Clear",e.Copy="Copy",e.CrSel="CrSel",e.Cut="Cut",e.Delete="Delete",e.EraseEof="EraseEof",e.ExSel="ExSel",e.Insert="Insert",e.Paste="Paste",e.Redo="Redo",e.Undo="Undo",e.Accept="Accept",e.Again="Again",e.Attn="Attn",e.Cancel="Cancel",e.ContextMenu="ContextMenu",e.Escape="Escape",e.Execute="Execute",e.Find="Find",e.Finish="Finish",e.Help="Help",e.Pause="Pause",e.Play="Play",e.Props="Props",e.Select="Select",e.ZoomIn="ZoomIn",e.ZoomOut="ZoomOut",e.BrightnessDown="BrightnessDown",e.BrightnessUp="BrightnessUp",e.Eject="Eject",e.LogOff="LogOff",e.Power="Power",e.PowerOff="PowerOff",e.PrintScreen="PrintScreen",e.Hibernate="Hibernate",e.Standby="Standby",e.WakeUp="WakeUp",e.AllCandidates="AllCandidates",e.Alphanumeric="Alphanumeric",e.CodeInput="CodeInput",e.Compose="Compose",e.Convert="Convert",e.Dead="Dead",e.FinalMode="FinalMode",e.GroupFirst="GroupFirst",e.GroupLast="GroupLast",e.GroupNext="GroupNext",e.GroupPrevious="GroupPrevious",e.ModeChange="ModeChange",e.NextCandidate="NextCandidate",e.NonConvert="NonConvert",e.PreviousCandidate="PreviousCandidate",e.Process="Process",e.SingleCandidate="SingleCandidate",e.HangulMode="HangulMode",e.HanjaMode="HanjaMode",e.JunjaMode="JunjaMode",e.Eisu="Eisu",e.Hankaku="Hankaku",e.Hiragana="Hiragana",e.HiraganaKatakana="HiraganaKatakana",e.KanaMode="KanaMode",e.KanjiMode="KanjiMode",e.Katakana="Katakana",e.Romaji="Romaji",e.Zenkaku="Zenkaku",e.ZenkakuHanaku="ZenkakuHanaku",e.F1="F1",e.F2="F2",e.F3="F3",e.F4="F4",e.F5="F5",e.F6="F6",e.F7="F7",e.F8="F8",e.F9="F9",e.F10="F10",e.F11="F11",e.F12="F12",e.F13="F13",e.F14="F14",e.F15="F15",e.F16="F16",e.F17="F17",e.F18="F18",e.F19="F19",e.F20="F20",e.Soft1="Soft1",e.Soft2="Soft2",e.Soft3="Soft3",e.Soft4="Soft4",e.AppSwitch="AppSwitch",e.Call="Call",e.Camera="Camera",e.CameraFocus="CameraFocus",e.EndCall="EndCall",e.GoBack="GoBack",e.GoHome="GoHome",e.HeadsetHook="HeadsetHook",e.LastNumberRedial="LastNumberRedial",e.Notification="Notification",e.MannerMode="MannerMode",e.VoiceDial="VoiceDial",e.ChannelDown="ChannelDown",e.ChannelUp="ChannelUp",e.MediaFastForward="MediaFastForward",e.MediaPause="MediaPause",e.MediaPlay="MediaPlay",e.MediaPlayPause="MediaPlayPause",e.MediaRecord="MediaRecord",e.MediaRewind="MediaRewind",e.MediaStop="MediaStop",e.MediaTrackNext="MediaTrackNext",e.MediaTrackPrevious="MediaTrackPrevious",e.AudioBalanceLeft="AudioBalanceLeft",e.AudioBalanceRight="AudioBalanceRight",e.AudioBassDown="AudioBassDown",e.AudioBassBoostDown="AudioBassBoostDown",e.AudioBassBoostToggle="AudioBassBoostToggle",e.AudioBassBoostUp="AudioBassBoostUp",e.AudioBassUp="AudioBassUp",e.AudioFaderFront="AudioFaderFront",e.AudioFaderRear="AudioFaderRear",e.AudioSurroundModeNext="AudioSurroundModeNext",e.AudioTrebleDown="AudioTrebleDown",e.AudioTrebleUp="AudioTrebleUp",e.AudioVolumeDown="AudioVolumeDown",e.AudioVolumeMute="AudioVolumeMute",e.AudioVolumeUp="AudioVolumeUp",e.MicrophoneToggle="MicrophoneToggle",e.MicrophoneVolumeDown="MicrophoneVolumeDown",e.MicrophoneVolumeMute="MicrophoneVolumeMute",e.MicrophoneVolumeUp="MicrophoneVolumeUp",e.TV="TV",e.TV3DMode="TV3DMode",e.TVAntennaCable="TVAntennaCable",e.TVAudioDescription="TVAudioDescription",e.TVAudioDescriptionMixDown="TVAudioDescriptionMixDown",e.TVAudioDescriptionMixUp="TVAudioDescriptionMixUp",e.TVContentsMenu="TVContentsMenu",e.TVDataService="TVDataService",e.TVInput="TVInput",e.TVInputComponent1="TVInputComponent1",e.TVInputComponent2="TVInputComponent2",e.TVInputComposite1="TVInputComposite1",e.TVInputComposite2="TVInputComposite2",e.TVInputHDMI1="TVInputHDMI1",e.TVInputHDMI2="TVInputHDMI2",e.TVInputHDMI3="TVInputHDMI3",e.TVInputHDMI4="TVInputHDMI4",e.TVInputVGA1="TVInputVGA1",e.TVMediaContext="TVMediaContext",e.TVNetwork="TVNetwork",e.TVNumberEntry="TVNumberEntry",e.TVPower="TVPower",e.TVRadioService="TVRadioService",e.TVSatellite="TVSatellite",e.TVSatelliteBS="TVSatelliteBS",e.TVSatelliteCS="TVSatelliteCS",e.TVSatelliteToggle="TVSatelliteToggle",e.TVTerrestrialAnalog="TVTerrestrialAnalog",e.TVTerrestrialDigital="TVTerrestrialDigital",e.TVTimer="TVTimer",e.AVRInput="AVRInput",e.AVRPower="AVRPower",e.ColorF0Red="ColorF0Red",e.ColorF1Green="ColorF1Green",e.ColorF2Yellow="ColorF2Yellow",e.ColorF3Blue="ColorF3Blue",e.ColorF4Grey="ColorF4Grey",e.ColorF5Brown="ColorF5Brown",e.ClosedCaptionToggle="ClosedCaptionToggle",e.Dimmer="Dimmer",e.DisplaySwap="DisplaySwap",e.DVR="DVR",e.Exit="Exit",e.FavoriteClear0="FavoriteClear0",e.FavoriteClear1="FavoriteClear1",e.FavoriteClear2="FavoriteClear2",e.FavoriteClear3="FavoriteClear3",e.FavoriteRecall0="FavoriteRecall0",e.FavoriteRecall1="FavoriteRecall1",e.FavoriteRecall2="FavoriteRecall2",e.FavoriteRecall3="FavoriteRecall3",e.FavoriteStore0="FavoriteStore0",e.FavoriteStore1="FavoriteStore1",e.FavoriteStore2="FavoriteStore2",e.FavoriteStore3="FavoriteStore3",e.Guide="Guide",e.GuideNextDay="GuideNextDay",e.GuidePreviousDay="GuidePreviousDay",e.Info="Info",e.InstantReplay="InstantReplay",e.Link="Link",e.ListProgram="ListProgram",e.LiveContent="LiveContent",e.Lock="Lock",e.MediaApps="MediaApps",e.MediaAudioTrack="MediaAudioTrack",e.MediaLast="MediaLast",e.MediaSkipBackward="MediaSkipBackward",e.MediaSkipForward="MediaSkipForward",e.MediaStepBackward="MediaStepBackward",e.MediaStepForward="MediaStepForward",e.MediaTopMenu="MediaTopMenu",e.NavigateIn="NavigateIn",e.NavigateNext="NavigateNext",e.NavigateOut="NavigateOut",e.NavigatePrevious="NavigatePrevious",e.NextFavoriteChannel="NextFavoriteChannel",e.NextUserProfile="NextUserProfile",e.OnDemand="OnDemand",e.Pairing="Pairing",e.PinPDown="PinPDown",e.PinPMove="PinPMove",e.PinPToggle="PinPToggle",e.PinPUp="PinPUp",e.PlaySpeedDown="PlaySpeedDown",e.PlaySpeedReset="PlaySpeedReset",e.PlaySpeedUp="PlaySpeedUp",e.RandomToggle="RandomToggle",e.RcLowBattery="RcLowBattery",e.RecordSpeedNext="RecordSpeedNext",e.RfBypass="RfBypass",e.ScanChannelsToggle="ScanChannelsToggle",e.ScreenModeNext="ScreenModeNext",e.Settings="Settings",e.SplitScreenToggle="SplitScreenToggle",e.STBInput="STBInput",e.STBPower="STBPower",e.Subtitle="Subtitle",e.Teletext="Teletext",e.VideoModeNext="VideoModeNext",e.Wink="Wink",e.ZoomToggle="ZoomToggle",e.SpeechCorrectionList="SpeechCorrectionList",e.SpeechInputToggle="SpeechInputToggle",e.Close="Close",e.New="New",e.Open="Open",e.Print="Print",e.Save="Save",e.SpellCheck="SpellCheck",e.MailForward="MailForward",e.MailReply="MailReply",e.MailSend="MailSend",e.LaunchCalculator="LaunchCalculator",e.LaunchCalendar="LaunchCalendar",e.LaunchContacts="LaunchContacts",e.LaunchMail="LaunchMail",e.LaunchMediaPlayer="LaunchMediaPlayer",e.LaunchMusicPlayer="LaunchMusicPlayer",e.LaunchMyComputer="LaunchMyComputer",e.LaunchPhone="LaunchPhone",e.LaunchScreenSaver="LaunchScreenSaver",e.LaunchSpreadsheet="LaunchSpreadsheet",e.LaunchWebBrowser="LaunchWebBrowser",e.LaunchWebCam="LaunchWebCam",e.LaunchWordProcessor="LaunchWordProcessor",e.LaunchApplication1="LaunchApplication1",e.LaunchApplication2="LaunchApplication2",e.LaunchApplication3="LaunchApplication3",e.LaunchApplication4="LaunchApplication4",e.LaunchApplication5="LaunchApplication5",e.LaunchApplication6="LaunchApplication6",e.LaunchApplication7="LaunchApplication7",e.LaunchApplication8="LaunchApplication8",e.LaunchApplication9="LaunchApplication9",e.LaunchApplication10="LaunchApplication10",e.LaunchApplication11="LaunchApplication11",e.LaunchApplication12="LaunchApplication12",e.LaunchApplication13="LaunchApplication13",e.LaunchApplication14="LaunchApplication14",e.LaunchApplication15="LaunchApplication15",e.LaunchApplication16="LaunchApplication16",e.BrowserBack="BrowserBack",e.BrowserFavorites="BrowserFavorites",e.BrowserForward="BrowserForward",e.BrowserHome="BrowserHome",e.BrowserRefresh="BrowserRefresh",e.BrowserSearch="BrowserSearch",e.BrowserStop="BrowserStop",e.Decimal="Decimal",e.Key11="Key11",e.Key12="Key12",e.Multiply="Multiply",e.Add="Add",e.Divide="Divide",e.Subtract="Subtract",e.Separator="Separator"})(t.Key||(t.Key={}))})(a2)),a2}var _0e=h0e(),Gn=(t=>(t.Core="Core",t.Chat="Chat",t.Settings="Settings",t.Internal="Internal",t))(Gn||{});const Ye=N({Mod:"mod",Comma:",",Space:"Space"," ":"Space","":"Space"},_0e.Key),x0e=new RegExp("```.*?\\n([\\s\\S]+?)\\n?```[^`]*$","gms");function wA(){return AZ()||NZ()}const y0e={[Ye.Comma]:",",[Ye.Enter]:"",[Ye.Escape]:"Esc",[Ye.ArrowUp]:"",[Ye.ArrowDown]:"",[Ye.ArrowLeft]:"",[Ye.ArrowRight]:"",[Ye.Backspace]:"",[Ye.Delete]:"",[Ye.Tab]:"",[Ye.Control]:"Ctrl",[Ye.Shift]:"Shift"};function b0e(t){switch(t){case Ye.Mod:return wA()?"":"Ctrl";case Ye.Meta:return wA()?"":"Win";default:return y0e[t]}}const srt=t=>t.map(e=>{var n;return(n=b0e(e))!=null?n:e}),lr=we({newChat:{id:"keyboardActions.newChat",defaultMessage:"Open new chat"},doNotRememberChat:{id:"keyboardActions.doNotRememberChat",defaultMessage:"Open new chat (do not remember)"},focusPromptTextarea:{id:"keyboardActions.focusPromptTextarea",defaultMessage:"Focus chat input"},copyLastCodeBlock:{id:"keyboardActions.copyLastCodeBlock",defaultMessage:"Copy last code block"},toggleCustomInstructions:{id:"keyboardActions.toggleCustomInstructions",defaultMessage:"Set custom instructions"},toggleDevMode:{id:"keyboardActions.toggleDevMode",defaultMessage:"Toggle dev mode"},navigationToggle:{id:"keyboardActions.navigationToggle",defaultMessage:"Toggle sidebar"},deleteChat:{id:"keyboardActions.deleteChat",defaultMessage:"Delete chat"},zoomIn:{id:"keyboardActions.zoomIn",defaultMessage:"Zoom in"},zoomOut:{id:"keyboardActions.zoomOut",defaultMessage:"Zoom out"},resetZoom:{id:"keyboardActions.resetZoom",defaultMessage:"Reset zoom"},cycleReasoningLevel:{id:"keyboardActions.cycleReasoningLevel",defaultMessage:"Cycle reasoning level"},toggleKeyboardActions:{id:"keyboardActions.toggleKeyboardActions",defaultMessage:"Show shortcuts"}});function v0e({isDevModeEnabled:t,updateDeveloperMode:e,toaster:n,intl:s}){return{key:"toggleDevMode",action:()=>{e.mutate({setting:Ft.DeveloperMode,value:!t}),n.success(s.formatMessage({id:"ANH+8L",defaultMessage:"Developer mode toggled"}))},actionMessageDescriptor:lr.toggleDevMode,group:Gn.Settings,keyboardBinding:[Ye.Mod,"."]}}const S0e=new MZ,oF=[Ye.Mod,Ye.Shift,"o"],C0e=[Ye.Mod,Ye.Shift,"k"],w0e=[Ye.Mod,"k"],k0e=je(()=>Me(()=>import("./b18bdd4a-kenkf1hfr1kes1pk.js"),__vite__mapDeps([184,1,2,3])).then(t=>t.DeleteConversationConfirmationModalContainer)),ort=t=>{"use forget";const e=D.c(17),{newChatAction:n,doNotRememberChatAction:s,clientThreadId:o,focusPromptTextareaAction:r}=t,a=Dt();let l;e[0]===Symbol.for("react.memo_cache_sentinel")?(l=wk(),e[0]=l):l=e[0];const{isFannyPackEnabled:c}=l,u=X(E0e),d=X(T0e),f=pl(),m=X(M0e),p=Dd(),[g,h]=X(A0e),_=bt(),x=te();let b,y;e[1]!==d||e[2]!==m||e[3]!==o||e[4]!==s||e[5]!==r||e[6]!==x||e[7]!==g||e[8]!==h||e[9]!==u||e[10]!==p||e[11]!==_||e[12]!==n||e[13]!==a||e[14]!==f?(b=()=>{const S=p?[[Ye.Mod,"n"]]:[],C=xe("1829305865"),w={key:"navigationToggle",action:N0e,actionMessageDescriptor:lr.navigationToggle,group:Gn.Core,keyboardBinding:[Ye.Mod,Ye.Shift,"s"]},k=v0e({isDevModeEnabled:u,updateDeveloperMode:f,toaster:a,intl:x});return s_().addAction({key:"newChat",action:n||uo,actionMessageDescriptor:lr.newChat,group:Gn.Core,keyboardBinding:oF,altKeyboardBindings:c?[...S]:[...S,[Ye.Mod,"k"]]},...C?[{key:"doNotRememberChat",action:s!=null?s:uo,actionMessageDescriptor:lr.doNotRememberChat,group:Gn.Core,keyboardBinding:C0e}]:[],{key:"focusPromptTextarea",action:r!=null?r:sD,actionMessageDescriptor:lr.focusPromptTextarea,group:Gn.Chat,keyboardBinding:[Ye.Shift,Ye.Escape]},{key:"copyLastCodeBlock",action:E=>{if(o!=null){const T=ve.getConversationTurns(At(o));for(let M=T.length-1;M>=0;M--){const{messages:A}=T[M],j=[...A.reduce(I0e,"").matchAll(x0e)],R=j.length?j[j.length-1][1]:null;if(R!=null){zo(R,a,E).then(()=>{a.success("Copied code block to clipboard")});break}}}},actionMessageDescriptor:lr.copyLastCodeBlock,group:Gn.Chat,keyboardBinding:[Ye.Mod,Ye.Shift,";"],altKeyboardBindings:[[Ye.Mod,Ye.Shift,":"]]},{key:"toggleCustomInstructions",action:()=>{_("#settings/".concat(Ts.Personalization))},actionMessageDescriptor:lr.toggleCustomInstructions,group:Gn.Settings,keyboardBinding:[Ye.Mod,Ye.Shift,"i"]},...d&&m&&!h?[k]:[],...g?[]:[w],{key:"deleteChat",action:()=>{if(o){const E=Lt(o);E&&rt(k0e,{serverThreadId:E,isActiveConversation:!0})}},actionMessageDescriptor:lr.deleteChat,group:Gn.Chat,keyboardBinding:[Ye.Mod,Ye.Shift,Ye.Backspace],altKeyboardBindings:[[Ye.Mod,Ye.Shift,Ye.Delete]]},{key:"zoomIn",enabled:Uo,action:j0e,actionMessageDescriptor:lr.zoomIn,group:Gn.Chat,keyboardBinding:[Ye.Mod,"+"],altKeyboardBindings:[[Ye.Mod,"="]]},{key:"zoomOut",enabled:Uo,action:P0e,actionMessageDescriptor:lr.zoomOut,group:Gn.Chat,keyboardBinding:[Ye.Mod,"-"]},{key:"resetZoom",enabled:Uo,action:R0e,actionMessageDescriptor:lr.resetZoom,group:Gn.Chat,keyboardBinding:[Ye.Mod,"0"]})},y=[o,r,g,p,h,c,n,s,a,_,u,f,d,m,x],e[1]=d,e[2]=m,e[3]=o,e[4]=s,e[5]=r,e[6]=x,e[7]=g,e[8]=h,e[9]=u,e[10]=p,e[11]=_,e[12]=n,e[13]=a,e[14]=f,e[15]=b,e[16]=y):(b=e[15],y=e[16]),v.useEffect(b,y)},rrt=t=>{"use forget";const e=D.c(5),{setSelectedVoiceIndex:n,prevVoiceIndex:s,nextVoiceIndex:o}=t;let r,a;e[0]!==o||e[1]!==s||e[2]!==n?(r=()=>s_().addAction({key:"selectPrevVoice",action:()=>{n(s)},actionMessageDescriptor:{defaultMessage:"Select previous voice"},group:Gn.Core,keyboardBinding:[Ye.ArrowLeft]},{key:"selectNextVoice",action:()=>{n(o)},actionMessageDescriptor:{defaultMessage:"Select next voice"},group:Gn.Chat,keyboardBinding:[Ye.ArrowRight]}),a=[n,s,o],e[0]=o,e[1]=s,e[2]=n,e[3]=r,e[4]=a):(r=e[3],a=e[4]),v.useEffect(r,a)};function E0e(){return qd()}function T0e(){return IZ()}function M0e(){return jZ()}function A0e(){return[ln(),hs()]}function N0e(){As.setSidebarOpen(void 0)}function I0e(t,e){var n;return((n=e.clientMetadata)==null?void 0:n.err)==null&&e.author.role===dt.Assistant&&e.recipient==="all"?t+(t?"\n\n":"")+Ss(e):t}function j0e(){return PZ()}function P0e(){return RZ()}function R0e(){return OZ()}const kk=re(me,"eee0f5",20,20);function art({gizmoResource:t}){const e=Dt(),[n,s]=v.useState(!1);return t.gizmo.share_recipient===wu.Private?null:i.jsx(ee.Item,{onClick:async o=>{o.stopPropagation(),o.preventDefault();try{const r=t.gizmo.short_url?LZ(t.gizmo.short_url):"https://chatgpt.com".concat(gc(t));await zo(r,e,o),s(!0),setTimeout(()=>{s(!1)},2e3)}catch(r){Ve.addError(r);return}},icon:kk,children:n?i.jsx(P,N({},kA.copiedURL)):i.jsx(P,N({},kA.copyLink))})}const kA=we({copyLink:{defaultMessage:"Copy link",id:"GizmoInformation.copyLink"},copiedURL:{defaultMessage:"Copied URL",id:"GizmoInformation.copiedURL"}});function rF(t){"use forget";const e=D.c(22),{className:n,inputClassName:s,value:o,onChange:r,onKeyDown:a,onFocus:l,onBlur:c,placeholder:u,id:d,autoFocus:f,iconClassName:m}=t;let p;e[0]!==n?(p=q("relative",n),e[0]=n,e[1]=p):p=e[1];let g;e[2]!==m?(g=q("icon-sm text-token-text-tertiary absolute start-2 top-1/2 -translate-y-1/2 transform",m),e[2]=m,e[3]=g):g=e[3];let h;e[4]!==g?(h=i.jsx(o_,{className:g}),e[4]=g,e[5]=h):h=e[5];let _;e[6]!==s?(_=q("rounded-lg border border-gray-200 ps-8 placeholder:text-gray-500 dark:border-gray-600 dark:bg-gray-700",s),e[6]=s,e[7]=_):_=e[7];let x;e[8]!==f||e[9]!==d||e[10]!==c||e[11]!==r||e[12]!==l||e[13]!==a||e[14]!==u||e[15]!==_||e[16]!==o?(x=i.jsx("input",{id:d,type:"text",value:o,onKeyDown:a,onChange:r,onFocus:l,onBlur:c,placeholder:u,autoFocus:f,className:_,autoComplete:"off"}),e[8]=f,e[9]=d,e[10]=c,e[11]=r,e[12]=l,e[13]=a,e[14]=u,e[15]=_,e[16]=o,e[17]=x):x=e[17];let b;return e[18]!==p||e[19]!==h||e[20]!==x?(b=i.jsxs("div",{className:p,children:[h,x]}),e[18]=p,e[19]=h,e[20]=x,e[21]=b):b=e[21],b}const O0e=re(me,"1b87bb",20,20),L0e=re(me,"c24a00",24,24),EA=re(me,"6335c3",24,24),D0e=re(me,"29679e",24,24),Ek=re(me,"4e1864",20,20),B0e=Object.freeze(Object.defineProperty({__proto__:null,default:Ek},Symbol.toStringTag,{value:"Module"}));function aF({modelSwitcherDeny:t}){const e=Et(),n=e==null?void 0:e.isPro();switch(t.reason){case dr.UNSUPPORTED_TOOL_USE:case dr.UNSUPPORTED_AUDIO:case dr.UNSUPPORTED_IMAGE:case dr.UNSUPPORTED_GIZMO:case dr.UNSUPPORTED_ATTACHMENT:case dr.UNSUPPORTED_CUSTOM_INSTRUCTIONS:case dr.UNSUPPORTED_CANVAS:case dr.UNSUPPORTED_TEMPORARY_CHAT:return i.jsx(i.Fragment,{children:t.description});case r_.RATE_LIMIT:{const{resetsAfter:o,description:r}=t,a=new Date(o),l=new Date(o).toLocaleTimeString([],{hour:"numeric",minute:"2-digit"});if(n)return i.jsx("div",{children:i.jsx(P,{id:"CwSQn9",defaultMessage:"Temporarily limited. Contact <supportEmail>support@openai.com</supportEmail> for help.",values:{supportEmail:c=>i.jsx(ko,{to:"mailto:support@openai.com",className:"underline",children:c})}})});if(r)return i.jsx(P,{id:"GyE23K",defaultMessage:"{description}",values:{description:r}});if(e9(a))return i.jsx(P,{id:"HUybjA",defaultMessage:"Your limit will reset at {time}",values:{time:l}});if(DZ(a))return i.jsx(P,{id:"TvYw9K",defaultMessage:"Your limit will reset at {time} tomorrow",values:{time:l}});{const c=a.toLocaleDateString([],{month:"short",day:"numeric"});return i.jsx(P,{id:"60ZcZL",defaultMessage:"Your limit will reset on {date}",values:{date:c}})}}}const s=t.description;if(s)return i.jsx(i.Fragment,{children:s})}function Tk({clientThreadId:t}){var f;const e=Pt(t),n=a_(),[s,o]=Ze(t,m=>{var p,g;return[(g=(p=ve.getCurrentNode(m))==null?void 0:p.message.metadata)==null?void 0:g.model_switcher_deny,ve.getGizmoId(m)]}),r=o!=null?o:n,{data:a}=gi(r),l=X(()=>Lr(e)),c=te(),u={},d=XC();for(const{resets_after:m,model_slug:p,description:g}of d)[qg.CONVERSATION,qg.REGENERATE].forEach(h=>{var y,S;const _=(y=u[p])!=null?y:{},x=(S=_[h])!=null?S:[],b={reason:r_.RATE_LIMIT,resetsAfter:m,description:g,isAvailable:!1};x.push(b),_[h]=x,u[p]=_});if(s==null||s.forEach(m=>{var y,S;const{slug:p,context:g,reason:h,description:_}=m,x=(y=u[p])!=null?y:{},b=(S=x[g])!=null?S:[];b.push({reason:h,description:_}),x[g]=b,u[p]=x}),r&&Bs(r)){const m=[Ma.GIZMO_PROJECT];(f=a==null?void 0:a.files)!=null&&f.length&&m.push(Ma.ATTACHMENT),a!=null&&a.gizmo.instructions.length&&m.push(Ma.CUSTOM_INSTRUCTIONS),l.categories.forEach(p=>{var b;const{defaultModel:g,supportedFeatures:h}=p,_=h||[],x=[];if(m.includes(Ma.GIZMO_PROJECT)&&!_.includes(Ma.GIZMO_PROJECT)&&x.push({reason:dr.UNSUPPORTED_GIZMO,description:c.formatMessage({id:"6w0z4F",defaultMessage:"This model doesn't support projects."}),isAvailable:!1}),m.includes(Ma.ATTACHMENT)&&!_.includes(Ma.ATTACHMENT)&&x.push({reason:dr.UNSUPPORTED_ATTACHMENT,description:c.formatMessage({id:"ZKjdak",defaultMessage:"This model doesn't support file attachments."}),isAvailable:!1}),m.includes(Ma.CUSTOM_INSTRUCTIONS)&&!_.includes(Ma.CUSTOM_INSTRUCTIONS)&&x.push({reason:dr.UNSUPPORTED_CUSTOM_INSTRUCTIONS,description:c.formatMessage({id:"zaubcf",defaultMessage:"This model doesn't support custom instructions."}),isAvailable:!1}),x.length){const y=(b=u[g])!=null?b:{};[qg.CONVERSATION,qg.REGENERATE].forEach(S=>{var w;const C=(w=y[S])!=null?w:[];C.push(...x),y[S]=C,u[g]=y})}})}return u}function iF({modelSlug:t,modelSwitcherDenialsBySlug:e}){var s;const n=t?(s=e[t])==null?void 0:s.conversation:null;return n?n.every(o=>o.isAvailable===!0):!0}function F0e(t){"use forget";var A;const e=D.c(41),{conversation:n,currentModel:s,categoryOptions:o,className:r,modelSwitcherDenialsBySlug:a,displayInFull_INTERNAL_USE_ONLY:l,onModelItemClick:c,preferredModelId:u}=t,d=l===void 0?!1:l,f=te(),m=(A=s==null?void 0:s.id)!=null?A:null,[p,g]=v.useState("");let h;e:{if(!p){h=o;break e}let I;if(e[0]!==o||e[1]!==p){let j;e[3]!==p?(j=R=>R.name.toLowerCase().includes(p.toLowerCase()),e[3]=p,e[4]=j):j=e[4],I=o.filter(j),e[0]=o,e[1]=p,e[2]=I}else I=e[2];h=I}const _=h;let x;e[5]!==r?(x=q("flex flex-col pt-0",r),e[5]=r,e[6]=x):x=e[6];let b;e[7]===Symbol.for("react.memo_cache_sentinel")?(b={borderRadius:"inherit"},e[7]=b):b=e[7];let y;e[8]===Symbol.for("react.memo_cache_sentinel")?(y=I=>{g(I.target.value)},e[8]=y):y=e[8];let S;e[9]!==p?(S=i.jsx("div",{className:"p-2",children:i.jsx(rF,{inputClassName:"w-full",value:p,onKeyDown:U0e,onChange:y})}),e[9]=p,e[10]=S):S=e[10];let C;e[11]===Symbol.for("react.memo_cache_sentinel")?(C=i.jsx("hr",{}),e[11]=C):C=e[11];let w;e[12]!==S?(w=i.jsxs("div",{style:b,className:"sticky top-0 z-1 bg-white",children:[S,C]}),e[12]=S,e[13]=w):w=e[13];let k;e[14]!==_.length||e[15]!==f?(k=_.length===0&&i.jsx(ee.Item,{children:f.formatMessage({id:"model-switcher.no-results",defaultMessage:"No results found"})}),e[14]=_.length,e[15]=f,e[16]=k):k=e[16];let E;if(e[17]!==n||e[18]!==s||e[19]!==m||e[20]!==d||e[21]!==_||e[22]!==a||e[23]!==c||e[24]!==u){let I;e[26]!==n||e[27]!==s||e[28]!==m||e[29]!==d||e[30]!==a||e[31]!==c||e[32]!==u?(I=j=>{const{value:R}=j;return"options"in j?i.jsx(Su,{conversation:n,currentModel:s,isSelected:m==null?void 0:m.startsWith(R),option:j,modelSwitcherDenialsBySlug:a,displayInFull_INTERNAL_USE_ONLY:d,onModelItemClick:c,preferredModelId:u},R):i.jsx(Ni,{conversation:n,currentModelId:m,isSelected:m===R,value:R,modelSwitcherDenialsBySlug:a,displayInFull_INTERNAL_USE_ONLY:d,onClick:c,preferredModelId:u,children:j.name},R)},e[26]=n,e[27]=s,e[28]=m,e[29]=d,e[30]=a,e[31]=c,e[32]=u,e[33]=I):I=e[33],E=_.map(I),e[17]=n,e[18]=s,e[19]=m,e[20]=d,e[21]=_,e[22]=a,e[23]=c,e[24]=u,e[25]=E}else E=e[25];let T;e[34]!==E||e[35]!==k?(T=i.jsxs("div",{className:"scrollbar-gutter-stable w-[min(320px,95vw)] flex-grow overflow-auto",children:[k,E]}),e[34]=E,e[35]=k,e[36]=T):T=e[36];let M;return e[37]!==T||e[38]!==x||e[39]!==w?(M=i.jsx(ee.Portal,{children:i.jsxs(ee.SubContent,{className:x,children:[w,T]})}),e[37]=T,e[38]=x,e[39]=w,e[40]=M):M=e[40],M}function U0e(t){t.stopPropagation()}function Su({conversation:t,currentModel:e,option:n,isSelected:s=!1,modelSwitcherDenialsBySlug:o,displayInFull_INTERNAL_USE_ONLY:r=!1,onModelItemClick:a,preferredModelId:l}){var g;const{name:c,options:u,categoryId:d}=n,f="".concat(c," Models"),m=()=>i.jsx("div",{className:"flex shrink-0 grow justify-between gap-2",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(Ek,{className:"icon"}),f]})});let p;return r&&s&&(p=(g=n.options.find(h=>h.value===(e==null?void 0:e.id)))==null?void 0:g.name),i.jsxs(ee.Sub,{children:[i.jsx(ee.SubMenuTrigger,{children:i.jsxs("div",{className:q("flex grow justify-between gap-2 overflow-hidden",r?"items-center break-all":""),children:[d?m():c,s&&i.jsx("div",{className:"text-token-text-tertiary truncate",children:p!=null?p:e==null?void 0:e.title})]})}),i.jsx(F0e,{conversation:t,currentModel:e,categoryOptions:u,modelSwitcherDenialsBySlug:o,displayInFull_INTERNAL_USE_ONLY:r,onModelItemClick:a,preferredModelId:l})]})}function Ni({value:t,children:e,icon:n,secondary:s,currentModelId:o,isSelected:r,onClick:a,modelSwitcherDenialsBySlug:l,isUpgradeUpsell:c=!1,testId:u,displayInFull_INTERNAL_USE_ONLY:d=!1,deprecated:f,preferredModelId:m,disabledByAdmin:p,conversation:g}){var k,E;const h=t?(E=(k=l[t])==null?void 0:k.conversation)==null?void 0:E[0]:null,_=Is(),x=Jo(),b=iF({modelSlug:t,modelSwitcherDenialsBySlug:l}),y=p||!b,S=Je("1846737571"),C=()=>{if(_===Ke.Glaux&&x(null,{ifPrevSystemHint:Ke.Glaux}),a)a(t);else if(t){V.logEvent("Model Switcher Model Changed",{from:o,to:t}),ft.logEvent("chatgpt_model_switcher_model_changed",t,{from:o!=null?o:"",to:t});const T=t;e3(T)||BZ().mutate({modelSlug:T}),pd(g,T)}},w=i.jsx(ee.Item,{onClick:C,disabled:y,className:q(d&&"break-all"),icon:n,secondary:s,trailingColor:"primary",trailing:c?i.jsx(Se,{color:"secondary",size:"small",className:S.get("is_upgrade_button_blue",!1)?"border-none bg-blue-600 text-white hover:bg-blue-800":"",children:i.jsx(P,{id:"oKo8wt",defaultMessage:"Upgrade"})}):r?i.jsx(h1,{className:"icon-sm"}):i.jsx("span",{className:"icon"}),"data-testid":u,children:i.jsxs("span",{className:"flex items-center gap-1",children:[e,t&&t===m&&!r&&!c&&!f&&i.jsx("span",{className:"inline-flex items-center rounded-full bg-blue-100 px-2 py-0.5 text-xs font-medium text-blue-700",children:i.jsx(P,{id:"model-switcher.preferred",defaultMessage:"GPT creator recommended"})})]})},t);return h?i.jsx(St,{withArrow:!0,side:"right",sideOffset:-10,label:i.jsx(aF,{modelSwitcherDeny:h}),children:w}):w}var Qh=(t=>(t.GPT4o="AG8PqS2q",t.AUTO="auto",t))(Qh||{});const H0e=t=>{const{categoryId:e}=t;return e==="auto"},$0e=(t,e,n)=>{const s=xe("2861925050"),o=e==null?void 0:e.some(({model_slug:r})=>n==null?void 0:n.models.get(r));return!(!s||!o||!t||!t.isSelfServeBusiness())},lF=()=>{const t=tt.getItem(Ie.FinchAdminNotified);return new Date(t!=null?t:0)},G0e=()=>{const t=new Date;t.setDate(t.getDate()+1),tt.setItem(Ie.FinchAdminNotified,t.toISOString())},V0e=()=>{const t=lF();return tt.getItem(Ie.FinchAdminNotified)!=null&&new Date<=t},z0e=()=>{const t=lF();return new Date>t},W0e=t=>{switch(t){case"wham":return"wham";case"deep_research":return"deep_research";case"image_gen":return"image_gen";case"gpt-4-5":return"gpt-4-5";default:return null}},q0e=tn(t=>({hasRequestedCredits:V0e(),setHasRequestedCredits:e=>t(()=>({hasRequestedCredits:e}))})),K0e=je(()=>Me(()=>import("./0218ed8e-doba3rjq6shnyvk6.js"),__vite__mapDeps([185,1,2,3,186,187])).then(t=>t.CreditPurchaseModal)),Y0e=()=>{const t=Dt(),e=te(),{hasRequestedCredits:n,setHasRequestedCredits:s}=q0e(),{mutate:o,isPending:r}=zt({mutationFn:a=>ue.safePost("/credits/pleas",{requestBody:{product:a}}),onError:a=>{Ve.addError(new Error("Error occurred while submitting credit plea request",{cause:a})),t.danger(Yu.errorRequestCredits,{toastId:"teams_credit_plea_button"})},onSuccess:()=>{s(!0),t.success(e.formatMessage(Yu.successRequestCredits)),G0e(),As.setThreadModelPickerAlertDot(!1)}});return{submitCreditPleaRequest:o,hasRequestedCredits:n,isPending:r}},cF=n=>{var s=n,{trigger:t}=s,e=De(s,["trigger"]);v.useEffect(()=>{V.logEventWithStatsig("ChatGPT Credits: Add Credits Button Shown","chatgpt_credits_add_credits_button_shown",{trigger:t})},[t]);const o=()=>{V.logEventWithStatsig("ChatGPT Credits: Add Credits Clicked","chatgpt_credits_add_credits_clicked"),rt(K0e)};return i.jsx(Se,G(N({color:"primary",onClick:o},e),{children:i.jsx(P,N({},Yu.addCredits))}))},uF=s=>{var o=s,{creditConsumingProduct:t,trigger:e}=o,n=De(o,["creditConsumingProduct","trigger"]);const r=te(),{submitCreditPleaRequest:a,isPending:l,hasRequestedCredits:c}=Y0e();v.useEffect(()=>{V.logEventWithStatsig("ChatGPT Credits: Notify Admin Button Shown","chatgpt_credits_notify_admin_button_shown",{trigger:e,creditConsumingProduct:t})},[t,e]);const u=()=>{c||(a(t),V.logEventWithStatsig("ChatGPT Credits: Notify Admin Clicked","chatgpt_credits_notify_admin_clicked"))},d=i.jsx(Se,G(N({loading:l,color:c?"secondary":"primary",disabled:c,onClick:u},n),{children:c?r.formatMessage(Yu.requested):r.formatMessage(Yu.notifyAdmin)}));return c?i.jsx(St,{className:"w-auto whitespace-nowrap",withArrow:!0,labelTextAlign:"left",contentClassName:"w-[180px]",side:"right",label:r.formatMessage(Yu.alreadyRequested),children:d}):d},Yu=we({notifyAdmin:{id:"prompt-textarea.teamsCreditRequestBanner.notifyAdmin",defaultMessage:"Notify admin"},addCredits:{id:"prompt-textarea.teamsCreditRequestBanner.addCredits",defaultMessage:"Add credits"},requested:{id:"prompt-textarea.teamsCreditRequestBanner.requested",defaultMessage:"Requested"},errorRequestCredits:{id:"prompt-textarea.teamsCreditRequestBanner.error",defaultMessage:"Error occurred while submitting credit request"},successRequestCredits:{id:"prompt-textarea.teamsCreditRequestBanner.success",defaultMessage:"Request sent to your admin"},alreadyRequested:{id:"prompt-textarea.teamsCreditRequestBanner.alreadyRequested",defaultMessage:"Youve already notified your admin"}}),TA="needsCreditsSection",Z0e=()=>{const t=Tn(),e=t==null?void 0:t.isOwnerOfAccount();return i.jsxs(ee.Item,{className:"pointer-events-none pe-2.5! hover:bg-transparent hover:text-inherit",onSelect:n=>n.preventDefault(),disabled:!0,children:[i.jsx("div",{className:"text-token-text-tertiary text-xs",children:i.jsx(P,N({},e?MA.ownerDescription:MA.description))}),e?i.jsx(cF,{size:"small",trigger:"thread-header-dropdown-credits-section"}):i.jsx(uF,{size:"small",creditConsumingProduct:"gpt-4-5",trigger:"thread-header-dropdown-credits-section"})]})},MA=we({description:{id:"prompt-textarea.teamsCreditRequestBanner.label",defaultMessage:"Limits reached. Send a request to your admin to get access"},ownerDescription:{id:"prompt-textarea.teamsCreditRequestBanner.ownerLabel",defaultMessage:"Limits reached. Add credits to your account"}}),Q0e="/cdn/assets/no-auth-upsell-m8ypcpwf.webp",J0e={src:Q0e};function X0e({statsig_login_event:t,statsig_signup_event:e,location:n}){const s=Hp(AA.signUpCta),o="no-auth-".concat(n),r=bt(),a=p=>{switch(p){case"attach":return Jt.ACCESS_FLOW_ENTRY_POINT_NO_AUTH_UPSELL_ATTACH;case"model-switcher":return Jt.ACCESS_FLOW_ENTRY_POINT_NO_AUTH_UPSELL_MODEL_SWITCHER;default:return Jt.ACCESS_FLOW_ENTRY_POINT_NO_AUTH_UPSELL}},l=Eo("2210309751").get("variant","control"),c=()=>{r({hash:$p,search:window.location.search},{state:{[j_]:"NoAuth Model Picker Upsell"}})},u=()=>{fn({fallbackScreenHint:"login",callback:p=>{_o({location:o,provider:p},a(n)),ft.logEvent(t)},skipLoginModal:!1})},d=()=>{fn({fallbackScreenHint:"signup",callback:p=>{ci({location:o,provider:p},a(n)),ft.logEvent(e)},skipLoginModal:!1})},f=i.jsx(Se,{as:"button",size:"medium",color:"primary",onClick:u,children:i.jsx(P,{id:"NavigationContent.unauthLoginCta",defaultMessage:"Log in"})},"login-button"),m=i.jsx(Se,{as:"button",size:"medium",color:"secondary",onClick:d,children:i.jsx(P,N({},s))},"signup-button");return i.jsxs("div",{className:"-mt-4 flex max-w-[calc(100vw-2rem)] flex-col",children:[i.jsx("img",{className:"max-xs:hidden h-[132px] object-fill",src:J0e.src,alt:""}),i.jsxs("div",{className:"flex flex-col px-4 pt-5 pb-2",children:[i.jsx("p",{className:"text-token-text-primary mb-1 text-lg font-medium text-pretty",children:i.jsx(P,{id:"rwmTbn",defaultMessage:"Try advanced features for free"})}),i.jsx("p",{className:"text-token-text-secondary text-sm text-pretty",children:i.jsx(P,{id:"unOBJo",defaultMessage:"Get smarter responses, upload files, create images, and more by logging in."})}),i.jsx("div",{className:"mt-5 flex flex-row flex-wrap justify-start gap-2",children:[f,m]}),l==="model-picker"&&i.jsx("p",{className:"text-token-text-secondary mt-5 text-xs",children:i.jsx(P,G(N({},AA.createWorkspaceTeamOrBusiness),{values:{createWorkspaceLink:p=>i.jsx("span",{onClick:c,className:"text-token-text-secondary decoration-token-text-primary cursor-pointer underline",children:p})}}))})]})]})}const AA=we({signUpCta:{id:"NavigationContent.unauthSignupCta",defaultMessage:"Sign up"},createWorkspaceTeamOrBusiness:{id:"components.noAuthUpsell.createWorkspaceTeamOrBusiness",defaultMessage:"<createWorkspaceLink>Create a workspace</createWorkspaceLink> for a team or business"}}),e_e=({isUnauthenticated:t,enabled:e=!0})=>En({queryKey:["modelMessageCap",t],queryFn:()=>t3.safeGet("/conversation_limit",{authOption:Ot.SendIfAvailable}),enabled:e});function Q1(t){return t.map(e=>typeof e=="string"?e:"").join("")}function irt(t){return t.map(e=>e.type==="text"?e.text:"").join("\n")}function dF(t,e){const n=[];let s=0;for(let o=0;o<t.length;o++){const r=t[o];if(typeof r=="string")if(e!=null&&e<s+r.length){n.push({type:"text",text:r.slice(0,e-s)});break}else n.push({type:"text",text:r}),s+=r.length;else if(r.content_type===el.ImageAssetPointer){const a=o>0?n[o-1]:null;(a==null?void 0:a.type)==="images"?a.imageAssets.push(r):n.push({type:"images",imageAssets:[r]})}else r.content_type===el.AudioTranscription&&n.push({type:"transcription",text:r.text})}return n}function lrt({isUserTurn:t,parts:e}){if(!t)return dF(e);const n={text:[],images:[]};for(let o=0;o<e.length;o++){const r=e[o];typeof r=="string"?r.trim().length>0&&n.text.push({type:"text",text:r}):r.content_type===el.AudioTranscription?n.text.push({type:"transcription",text:r.text}):r.content_type===el.ImageAssetPointer&&n.images.push(r)}const s=[];return n.images.length>0&&s.unshift({type:"images",imageAssets:n.images}),s.push(...n.text.map(o=>({type:o.type,text:o.text}))),s}function fF(t){const e=t&&new Date(t),n=e&&new Date(e);return n?"after ".concat(n.getHours()%12||12,":").concat(n.getMinutes()<10?"0":"").concat(n.getMinutes()," ").concat(n.getHours()>=12?"PM":"AM"):"later"}function t_e(t){if(t<60)return{type:"minute",value:t,text:t<2?"minute":"".concat(t," minutes")};const e=Math.floor(t/60);if(e<24)return{type:"hour",value:e,text:e<2?"hour":"".concat(e," hours")};const n=Math.floor(e/24);return n<7?{type:"day",value:n,text:n<2?"day":"".concat(n," days")}:{type:"minute",value:t,text:t<2?"minute":"".concat(t," minutes")}}const i2={textarea:"","model-switcher":""};function n_e(){const t=lf(a=>a.isoDate),e=fF(t),n=te(),s=br(ma.isEnterpriseyPlan),o=!mt(),{data:r}=ut(e_e({isUnauthenticated:o}));return v.useMemo(()=>{var p,g,h;const a=(p=r==null?void 0:r.message_cap)!=null?p:0,l=(g=r==null?void 0:r.message_cap_window)!=null?g:1,{text:c,type:u,value:d}=t_e(l),f=(h=r==null?void 0:r.message_disclaimer)!=null?h:i2;if(!c||s)return{textareaDisclaimer:f.textarea,modelSwitcherDisclaimer:f["model-switcher"],modelSwitcherLimitShort:""};if(!r||!l||!a)return{textareaDisclaimer:i2.textarea,modelSwitcherDisclaimer:i2["model-switcher"],modelSwitcherLimitShort:""};let m=n.formatMessage(l2.shortLimitMinutes,{numerator:a,denominator:d});switch(u){case"hour":m=n.formatMessage(l2.shortLimitHours,{numerator:a,denominator:d});break;case"day":m=n.formatMessage(l2.shortLimitDays,{numerator:a,denominator:d});break}return{textareaDisclaimer:f.textarea.replaceAll("%FORMATTED_TIME%",e).replaceAll("%NUMERATOR%","".concat(a)).replaceAll("%DENOMINATOR%",c),modelSwitcherDisclaimer:f["model-switcher"].replaceAll("%FORMATTED_TIME%",e).replaceAll("%NUMERATOR%","".concat(a)).replaceAll("%DENOMINATOR%",c),modelSwitcherLimitShort:m}},[r,e,n,s])}const l2=we({shortLimitMinutes:{id:"modelCapMessaging.shortLimitMinutes",defaultMessage:"Limit {numerator, plural, =0 {# message} one {# message} other {# messages}} / {denominator, plural, =0 {# minute} one {# minute} other {# minutes}}"},shortLimitHours:{id:"modelCapMessaging.shortLimitHours",defaultMessage:"Limit {numerator, plural, =0 {# message} one {# message} other {# messages}} / {denominator, plural, =0 {# hour} one {# hour} other {# hours}}"},shortLimitDays:{id:"modelCapMessaging.shortLimitDays",defaultMessage:"Limit {numerator, plural, =0 {# message} one {# message} other {# messages}} / {denominator, plural, =0 {# day} one {# day} other {# days}}"}});var La=(t=>(t.ALPHA="alpha",t.DATA_CAMPAIGNS="data_campaigns",t.EXPERIMENTS="experiments",t.MAINLINE="mainline",t))(La||{});const s_e=t=>Zd(t,({id:e})=>e.split(":").slice(0,1).join(":"));function Mk(){const t=a_(),e=X(()=>FZ({isGizmo:!!t})),n=Vce(),{modelSwitcherDisclaimer:s}=n_e();return v.useMemo(()=>{const o=[],{categories:r,groups:a,models:l}=e;for(const c of r){const{defaultModel:u,categoryId:d,label:f}=c,m=l.get(u);if(m){const p=n===u;o.push({categoryId:d,value:u,name:f,description:p?s:m.description,options:[c2(m,{name:"Default"})]})}}for(const c of a){const{group:u,label:d,modelIds:f}=c,m=f[0],p=[];for(const g of f){const h=l.get(g);h&&!h.tags.includes(UZ.HIDDEN)&&p.push(h)}if(u==="experiments"){const g=s_e(p),h=Object.entries(g).map(([_,x])=>{const b=_.split(":").slice(-1)[0];return{key:_,value:b,name:b,options:x.map(y=>{const{title:S}=y;return c2(G(N({},y),{title:S.replace(b,"")}))})}});o.push({categoryId:u,value:m,name:d,options:h})}else o.push({categoryId:u,value:m,name:d,options:p.map(g=>c2(g))})}return o},[e,n,s])}function c2(t,e={}){return N({value:t.id,name:t.title},e)}const mF="top_level_secondary_models";function J1(t,e){let n=t;if(t===TM.AUTO){const r=e.categories.filter(({defaultModel:a})=>a!==TM.AUTO);(r==null?void 0:r.length)===1&&(n=r[0].defaultModel)}const s=e.categories.find(({defaultModel:r,supportedModels:a})=>r===n||n&&(a==null?void 0:a.includes(n)));if(s){const{categoryId:r}=s;return{selectedCategory:r,modelLabel:s.shortLabel,fullModelLabel:s.label}}const o=e.groups.find(({modelIds:r})=>n&&r.includes(n));if(o){const{group:r,shortLabel:a,label:l}=o;return{selectedCategory:r,modelLabel:a,fullModelLabel:l}}return{selectedCategory:null,modelLabel:null,fullModelLabel:null}}function o_e(t,e,n,s){const o=e?t.formatMessage(Jv.beta):n?t.formatMessage(Jv.alpha):s;if(o)return i.jsx(md,{children:o})}function r_e({category:t,modelSwitcherDenialsBySlug:e,conversation:n,currentGizmoId:s,currentModelId:o,testId:r,preferredModelId:a,disabledByAdmin:l=!1,disableSelectionHighlight:c=!1}){const u=te(),{defaultModel:d,label:f,description:m,isBeta:p,isAlpha:g,modelBadge:h,subcategory:_}=t,x=Bs(s!=null?s:""),b=e3(d),y=_!==void 0&&_!==mF,S=i.jsxs(Ni,{value:d,conversation:n,currentModelId:o,modelSwitcherDenialsBySlug:e,secondary:y?void 0:m,deprecated:b,disabledByAdmin:l,isSelected:!c&&(!s||x)&&o===d,testId:r,preferredModelId:a,children:[f,o_e(u,p,g,h)]},d);return l?i.jsx(St,{label:u.formatMessage(Jv.disabledByAdmin),children:S}):S}function Ak({sections:t}){return i.jsx(i.Fragment,{children:t.map((e,n)=>{var s;return i.jsxs(Od.Fragment,{children:[n!==0&&((s=t[n-1])==null?void 0:s.id)!=="model-picker-title"?i.jsx(ee.Separator,{}):null,e.content]},e.id)})})}function Nk(t,e,n,s,o){var pe,_e,Ce,ge,Re,ke,he,Ee,Pe,Ae;const r=te(),a=!mt(),{data:l}=Uc(),c=_n(),u=!a&&!!c&&t9(c)&&l&&(!n3(l)||((pe=l.currentAccount)==null?void 0:pe.isFreeWorkspace())),{session:d}=Ud(),f=d==null?void 0:d.user,m=f&&J0(f),p=X(()=>Fn(t)),g=p.id,h=X(()=>dd(t)),_=Is(),x=ku(_),b=x?null:g;let y=X(()=>Lr(t));const S=n9(),C=Un(t.id),w=Tk({clientThreadId:t.id}),k=y.modelPickerVersion===2,{data:E}=X(()=>h&&!gl(h)?HZ():{data:void 0}),T=!C,M=e.find(({categoryId:de})=>de===La.ALPHA),A=e.find(({categoryId:de})=>de===La.DATA_CAMPAIGNS),I=e.find(({categoryId:de})=>de===La.EXPERIMENTS),j=e.find(({categoryId:de})=>de===La.MAINLINE),[R,O]=v.useState(""),L=X(()=>!0),B=[M,A,I,j].reduce((de,oe)=>oe?[...de,...oe.options.map(se=>G(N({},se),{badge:oe.categoryId}))]:de,[]),U=v.useMemo(()=>R?B.filter(de=>de.name.toLowerCase().includes(R.toLowerCase())):B,[B,R]);if(s&&h&&E){const de=JSON.parse(JSON.stringify(y));de.categories=de.categories.filter(({defaultModel:oe})=>E.editor.models_list_with_custom_actions.includes(oe)),y=de}y=v.useMemo(()=>y,[y]);const H=!!(M!=null&&M.options.length),$=!!(A!=null&&A.options.length),F=!!(I!=null&&I.options.length),z=!!(j!=null&&j.options.length),W=bt(),Y=v.useCallback(de=>{V.logEvent("Account Pay: Open Payment from Model Picker",{content:"gizmo-button"}),xs(W,"Thread header dropdown",de)},[W]),K=()=>{ft.logEvent("chatgpt_model_switcher_plus_upgrade_button_clicked"),V.logEvent("Model Switcher Plus Upgrade Button Clicked"),a?fn({shouldOpenPaymentModalOnAuth:!0,callback:de=>{ci({location:"Model switcher GPT-4 upsell",provider:de},Jt.ACCESS_FLOW_ENTRY_POINT_MODEL_SWITCHER_GPT4_UPSELL)},skipLoginModal:!1}):Y()},Z=()=>{V.logEventWithStatsig("Model Switcher Go Upgrade Button Clicked","chatgpt_model_switcher_go_upgrade_button_clicked"),a?fn({shouldOpenPaymentModalOnAuth:!0,callback:de=>{ci({location:"Model switcher Go upsell",provider:de},Jt.ACCESS_FLOW_ENTRY_POINT_MODEL_SWITCHER_GO_UPSELL)},skipLoginModal:!1}):Y()},J=()=>{V.logEventWithStatsig("Model Switcher Team Upgrade Button Clicked","chatgpt_model_switcher_team_upgrade_button_clicked"),Y($p)},Q=[],ne=xe("3315017149"),ie=!!(y.secondaryTitle&&y.secondaryTitle!==""&&ne);y.title&&ne&&Q.push({id:"model-picker-title",content:[i.jsx(ee.Label,{className:"mb-0",children:y.title},"model-picker-title")]});const fe=i.jsxs(ee.Label,{className:"flex items-center",children:[i.jsx(P,{id:"coNCb7",defaultMessage:"Models"}),i.jsx(St,{side:"right",className:"ms-1.5",delayDuration:120,label:i.jsx(P,{id:"/vFWz/",defaultMessage:"Learn more"}),children:i.jsx("a",{href:"https://help.openai.com/en/articles/7864572-what-is-the-chatgpt-model-selector",target:"_blank",rel:"noreferrer",children:i.jsx(Pv,{className:"h-3.5 w-3.5 shrink-0"})})})]},"models-section-header");if(a){const de={id:"modelSection",content:[]};de.content.push(i.jsx(X0e,{location:"model-switcher",statsig_login_event:"chatgpt_modelswitcher_login_button_clicked",statsig_signup_event:"chatgpt_modelswitcher_signup_button_clicked"},"noAuthUpsell")),Q.push(de)}else if(!S&&!h){const de={id:"modelSection",content:[]};Hv()?de.content.push(i.jsx(Ni,{value:"",conversation:t,currentModelId:g,onClick:Z,modelSwitcherDenialsBySlug:w,isUpgradeUpsell:!0,icon:L0e,secondary:i.jsx(P,{id:"vm2Wqf",defaultMessage:"Our smartest model & more"}),isSelected:!1,children:i.jsx(P,{id:"/d/+gD",defaultMessage:"ChatGPT Go"})},"goUpgrade")):u?de.content.push(i.jsx(Ni,{value:"",conversation:t,currentModelId:g,onClick:J,modelSwitcherDenialsBySlug:w,isUpgradeUpsell:!0,icon:O0e,secondary:i.jsx(P,{id:"001Ixi",defaultMessage:"Advanced AI for your work"}),isSelected:!1,children:i.jsx(P,{id:"K94mcH",defaultMessage:"ChatGPT Business"})},"teamUpgrade")):de.content.push(i.jsx(Ni,{value:"",conversation:t,currentModelId:g,onClick:K,modelSwitcherDenialsBySlug:w,isUpgradeUpsell:!0,icon:EA,secondary:i.jsx(P,{id:"bqTHri",defaultMessage:"Our smartest model & more"}),isSelected:!1,children:i.jsx(P,{id:"mzDzkX",defaultMessage:"ChatGPT Plus"})},"plusUpgrade")),de.content.push(i.jsx(Ni,{value:Qh.AUTO,conversation:t,currentModelId:g,modelSwitcherDenialsBySlug:w,icon:D0e,secondary:u?i.jsx(P,{id:"R8fHfF",defaultMessage:"For quick tasks & answers"}):i.jsx(P,{id:"n96qML",defaultMessage:"Great for everyday tasks"}),isSelected:!x&&!h&&b===Qh.AUTO,children:i.jsx(P,{id:"U9E7Rx",defaultMessage:"ChatGPT"})},Qh.AUTO)),Q.push(de)}else{const de={id:"modelSection",content:[]};y.categories.length&&!k&&de.content.push(fe),(_e=Et())!=null&&_e.isGo()&&de.content.push(i.jsx(Ni,{value:"",conversation:t,currentModelId:g,onClick:K,modelSwitcherDenialsBySlug:w,isUpgradeUpsell:!0,icon:EA,secondary:i.jsx(P,{id:"bqTHri",defaultMessage:"Our smartest model & more"}),isSelected:!1,children:i.jsx(P,{id:"mzDzkX",defaultMessage:"ChatGPT Plus"})},"plusUpgrade"));const oe=new Map,se=[];y.categories.forEach(ce=>{var He;const be=i.jsx(r_e,{category:ce,conversation:t,currentGizmoId:h,currentModelId:g,modelSwitcherDenialsBySlug:w,preferredModelId:o,testId:"model-switcher-".concat(ce.defaultModel),disabledByAdmin:ce.disabledByAdmin,disableSelectionHighlight:x},ce.categoryId);if(ce.subcategory===mF){se.push(be);return}ce.subcategory?(oe.has(ce.subcategory)||oe.set(ce.subcategory,[]),(He=oe.get(ce.subcategory))==null||He.push(be)):de.content.push(be)}),ie&&se.length&&de.content.push(i.jsx(ee.Label,{className:"mb-0",children:y.secondaryTitle},"secondary-model-picker-title")),se.length&&de.content.push(...se);const Oe=(Ce=y.categories.some(ce=>ce.defaultModel==="gpt-5"))!=null?Ce:!1,Ne=(ge=y.categories.some(ce=>ce.defaultModel==="gpt-5-pro"))!=null?ge:!1;if(Oe&&!Ne&&!((Re=Et())!=null&&Re.isPro())&&xe("3309244414")){const ce=i.jsx(a_e,{}),be=(ke=y.categories.find(He=>He.defaultModel==="gpt-5-thinking"))==null?void 0:ke.subcategory;be?(he=oe.get(be))==null||he.push(ce):de.content.push(ce)}k?oe.forEach((ce,be)=>{var nt;be&&de.content.push(i.jsx(ee.Separator,{},"".concat(be,"-divider")));const He=y.categories.find(at=>at.subcategory===be&&at.defaultModel===(p==null?void 0:p.id)),{fullModelLabel:Ge}=J1((nt=He==null?void 0:He.defaultModel)!=null?nt:"",y);de.content.push(i.jsxs(ee.Sub,{children:[i.jsx(ee.SubMenuTrigger,{"data-testid":be+"-submenu",trailing:i.jsx("div",{className:"truncate",children:Ge}),children:be}),i.jsx(ee.Portal,{children:i.jsx(ee.SubContent,{children:ce})})]},be))}):oe.forEach((ce,be)=>{const He=y.categories.find(Ge=>Ge.subcategory===be&&Ge.defaultModel===(p==null?void 0:p.id));de.content.push(i.jsxs(ee.Sub,{children:[i.jsx(ee.SubMenuTrigger,{"data-testid":be?"".concat(be,"-submenu"):void 0,trailing:He&&i.jsx("div",{className:"truncate",children:He.label}),children:be}),i.jsx(ee.Portal,{children:i.jsx(ee.SubContent,{children:ce})})]},be))});const ze=(Ee=y.categories.some(ce=>ce.defaultModel==="gpt-5-2"))!=null?Ee:!1,Qe=(Pe=y.categories.some(ce=>ce.defaultModel==="gpt-5-1"))!=null?Pe:!1,Le=(Ae=y.categories.some(ce=>ce.defaultModel==="gpt-4o"||ce.defaultModel==="gpt-4.1"))!=null?Ae:!1;s&&h&&de.content.push(i.jsx(ee.Label,{className:"flex flex-col items-start gap-1",children:i.jsxs("span",{className:"flex items-center",children:[i.jsx(P,{id:"Y96ci5",defaultMessage:"Limited models for Custom Action GPTs"}),i.jsx(St,{side:"right",className:"ms-1.5 cursor-pointer",delayDuration:0,label:ze?i.jsx(P,{id:"vyOVss",defaultMessage:"GPTs with custom web actions can currently only use GPT-5 Instant, GPT-4o, and GPT-4.1."}):Qe?i.jsx(P,{id:"vyOVss",defaultMessage:"GPTs with custom web actions can currently only use GPT-5 Instant, GPT-4o, and GPT-4.1."}):Oe&&Le?i.jsx(P,{id:"vyOVss",defaultMessage:"GPTs with custom web actions can currently only use GPT-5 Instant, GPT-4o, and GPT-4.1."}):Oe?i.jsx(P,{id:"0CtjLX",defaultMessage:"GPTs with custom web actions can currently only use GPT-5 Instant."}):i.jsx(P,{id:"wDE3HX",defaultMessage:"GPTs with custom web actions can currently only use GPT-4o and GPT-4.1. If your GPT has no custom actions it can use any model."}),children:i.jsx(Pv,{className:"h-4 w-4 shrink-0"})})]})})),Q.push(de)}const ae={id:"otherOptionsSection",content:[]},{selectedCategory:le}=J1(b,y);return T&&(H||$||F||z?ae.content.push(i.jsx("div",{className:"px-4 py-2",children:i.jsx(rF,{inputClassName:"w-full",onKeyDown:de=>{de.stopPropagation()},onChange:de=>{O(de.target.value)},value:R})})):m&&ae.content.push(i.jsxs(i.Fragment,{children:[i.jsx(ee.Shimmer,{size:"long"}),i.jsx(ee.Shimmer,{size:"long"}),i.jsx(ee.Shimmer,{size:"long"}),i.jsx(ee.Shimmer,{size:"long"})]})),R?ae.content.push(i.jsxs("div",{className:"scrollbar-gutter-stable max-h-64 w-[min(320px,95vw)] overflow-y-scroll",children:[U.length===0&&i.jsx(ee.Item,{className:"w-full",children:r.formatMessage({id:"model-switcher.no-results",defaultMessage:"No results found"})}),U.map(de=>{const{value:oe}=de;return"options"in de?i.jsx(Su,{conversation:t,currentModel:p,isSelected:!x&&(g==null?void 0:g.startsWith(oe)),option:de,modelSwitcherDenialsBySlug:w,displayInFull_INTERNAL_USE_ONLY:!0,preferredModelId:o},oe):i.jsxs(Ni,{conversation:t,currentModelId:g,isSelected:!x&&g===oe,value:oe,modelSwitcherDenialsBySlug:w,displayInFull_INTERNAL_USE_ONLY:!0,preferredModelId:o,children:[de.name,de.badge&&i.jsx(md,{children:de.badge})]},oe)})]})):(H&&ae.content.push(i.jsx(Su,{isSelected:!x&&le===La.ALPHA,conversation:t,currentModel:p,option:M,modelSwitcherDenialsBySlug:w,displayInFull_INTERNAL_USE_ONLY:!0,preferredModelId:o},M.value)),$&&ae.content.push(i.jsx(Su,{isSelected:!x&&le===La.DATA_CAMPAIGNS,conversation:t,currentModel:p,option:A,modelSwitcherDenialsBySlug:w,displayInFull_INTERNAL_USE_ONLY:!0,preferredModelId:o},A.value)),F&&ae.content.push(i.jsx(Su,{conversation:t,currentModel:p,isSelected:!x&&le===La.EXPERIMENTS,option:I,modelSwitcherDenialsBySlug:w,displayInFull_INTERNAL_USE_ONLY:!0,preferredModelId:o},I.value)),z&&ae.content.push(i.jsx(Su,{isSelected:!x&&le===La.MAINLINE,conversation:t,currentModel:p,option:j,modelSwitcherDenialsBySlug:w,displayInFull_INTERNAL_USE_ONLY:!0,preferredModelId:o},j.value)))),ae.content.length&&L&&Q.push(ae),n&&Q.push({id:TA,content:[i.jsx(Z0e,{},TA)]}),Q}const a_e=()=>{const t=bt(),e=xe("3315017149");let n=i.jsx(P,{id:"4myKt+",defaultMessage:"GPT-5 Pro"});return e&&(n=i.jsx(P,{id:"fCVj6z",defaultMessage:"Pro"})),i.jsx(ee.Item,{disabled:!0,label:n,secondary:i.jsx(P,{id:"BsApen",defaultMessage:"Research-grade intelligence"}),trailing:i.jsx(Se,{color:"secondary",size:"small",onClick:()=>{V.logEventWithStatsig("Model Switcher Pro Upgrade Button Clicked","chatgpt_model_switcher_pro_upgrade_button_clicked"),V.logEvent("Account Pay: Open Payment from Model Picker",{content:"gizmo-button"}),xs(t,"Thread header dropdown")},children:i.jsx(P,{id:"aJndhk",defaultMessage:"Upgrade"})})})},Jv=we({alpha:{id:"o5FsPB",defaultMessage:"Alpha"},beta:{id:"XZwFET",defaultMessage:"Beta"},gpt35ShortExplainer:{defaultMessage:"Great for everyday tasks",id:"ModelSwitcher.gpt35ShortExplainer"},modelTunerSmartSelectionTitle:{id:"czjW8I",defaultMessage:"Dynamic"},modelTunerSmartSelectionExplainer:{id:"gp/YH1",defaultMessage:"Optimized for speed and intelligence"},gpt4ShortExplainer:{defaultMessage:"With DALLE, browsing and analysis",id:"ModelSwitcher.gpt4ShortExplainer"},gpt4ShortExplainerWithoutBrowse:{defaultMessage:"With DALLE and analysis",id:"ModelSwitcher.gpt4ShortExplainerWithoutBrowse"},gpt4UpsellExplainer:{id:"ModelSwitcher.gpt4Upsell",defaultMessage:"Our smartest and most capable model. Includes DALLE, browsing and more."},userUpgrade:{id:"ModelSwithcer.upgradeButton",defaultMessage:"Upgrade to Plus"},userUpgradeSignup:{id:"ModelSwitcher.signupUpgradeButton",defaultMessage:"Sign up for ChatGPT Plus"},temporaryChat:{id:"ModelSwitcher.temporaryChat",defaultMessage:"Temporary chat"},shareChat:{id:"ModelSwitcher.shareChat",defaultMessage:"Share chat"},disabledByAdmin:{id:"XoQ6cH",defaultMessage:"Disabled by Admin"}});function i_e(t,e,n){const s=X(()=>J1(Fn(t).id,Lr(t)).modelLabel),o=Mk(),r=Nk(t,o,void 0,e,n);return{modelLabel:s,dropdownSections:r}}function crt({show:t,conversation:e,gizmoHasCustomActions:n,preferredModelId:s}){const{modelLabel:o,dropdownSections:r}=i_e(e,n,s);return t?i.jsxs(ee.Sub,{onOpenChange:a=>{a&&V.logEvent("GPTs: Breadcrumb Picker Model Picker Open")},children:[i.jsx(ee.SubMenuTrigger,{children:i.jsxs("div",{className:"flex w-full items-center justify-between gap-1",children:[i.jsx(P,{id:"ilkdMh",defaultMessage:"Model"}),i.jsx("span",{className:"text-token-text-secondary text-xs font-medium",children:o})]})}),i.jsx(ee.Portal,{children:i.jsx(ee.SubContent,{onClick:()=>{V.logEvent("GPTs: Breadcrumb Picker Model Picker Select")},children:i.jsx(Ak,{sections:r})})})]}):null}function NA(t,e){const o=300/t,r=35/o;let a;if(e<=r)a=o*e;else{const l=t-r,u=-4*((e-r)/l);a=35+(99.9-35)*(1-Math.exp(u))}return Math.min(a,99.9)}const Xv=(t,e)=>{const n=+new Date-t,[s,o]=v.useState(NA(e,n));return v.useEffect(()=>{const r=setInterval(()=>{const a=+new Date-t,l=NA(e,a);if(o(l),l>=100||a>=e)return clearInterval(r),o(100),100},100);return()=>{clearInterval(r)}},[t,e]),s},l_e={[gs.RESEARCH]:30,[gs.PRO_MODE]:15,[gs.THINKING]:2,[gs.IMAGE_GEN]:2,[gs.UNKNOWN]:15,[gs.FRONTEND_ARTIFACT]:12},pF=t=>{var o,r;const e=((r=(o=t.expectedDurationMinutes)!=null?o:l_e[zC(t)])!=null?r:15)*60*1e3,n=t.createdAt?+new Date(t.createdAt):Date.now();return Xv(n,e)},c_e="",u_e=({thumbnail:t,title:e,description:n,progress:s,link:o,onClick:r})=>{const a=te(),l=i.jsxs("div",{className:"flex items-center gap-2",children:[t,i.jsxs("div",{className:"flex flex-col gap-0.5",children:[i.jsx("div",{children:e}),i.jsxs("div",{className:"text-token-text-tertiary flex items-center gap-1 text-xs",children:[n&&i.jsx("span",{children:n}),s!=null&&i.jsxs(i.Fragment,{children:[c_e,i.jsx("span",{className:"w-[40px]",children:a.formatMessage({id:"task.progressOnly",defaultMessage:"{progress}%"},{progress:Math.round(s)})})]})]})]})]});return o!=null?i.jsx(ee.LinkItem,{to:o,children:l}):i.jsx(ee.Item,{onClick:r,children:l})},gF=t=>{"use forget";const e=D.c(23),{task:n,conversationId:s,isActiveConversation:o}=t,r=te();let a;e[0]!==n?(a=$D(n),e[0]=n,e[1]=a):a=e[1];const l=a,c=pF(n);let u;e[2]!==c||e[3]!==n?(u=hp(n)?Math.min(c,99):void 0,e[2]=c,e[3]=n,e[4]=u):u=e[4];const d=u,f=n.scrollToMessageIdOverride,m=f!=null?f:n.status===wn.COMPLETED?n.responseMessageId:n.originalConversationUserMessageId,p=o?void 0:"/c/".concat(n.originalConversationId,"?messageId=").concat(m);let g;e[5]!==s||e[6]!==o||e[7]!==m?(g=o?()=>{pt(s,f_e),requestAnimationFrame(()=>{pt(s,y=>{y.scrollToMessageId=m,y.scrollToMessageIsAssistant=!0})})}:void 0,e[5]=s,e[6]=o,e[7]=m,e[8]=g):g=e[8];const h=g;let _;e[9]!==s||e[10]!==n?(_=i.jsx(GD,{task:n,conversationId:s,size:"md"}),e[9]=s,e[10]=n,e[11]=_):_=e[11];let x;e[12]!==l||e[13]!==r?(x=l?r.formatMessage(l):void 0,e[12]=l,e[13]=r,e[14]=x):x=e[14];let b;return e[15]!==p||e[16]!==h||e[17]!==d||e[18]!==_||e[19]!==x||e[20]!==n.taskId||e[21]!==n.title?(b=i.jsx(u_e,{thumbnail:_,title:n.title,description:x,progress:d,link:p,onClick:h},n.taskId),e[15]=p,e[16]=h,e[17]=d,e[18]=_,e[19]=x,e[20]=n.taskId,e[21]=n.title,e[22]=b):b=e[22],b},d_e=t=>{"use forget";const e=D.c(21),{task:n,conversationId:s,isActiveConversation:o}=t,r=te();let a;e[0]!==r||e[1]!==n.title?(a=n.title&&n.title.trim().length>0?n.title:r.formatMessage({id:"artifactTask.defaultTitle",defaultMessage:"Creating artifact"}),e[0]=r,e[1]=n.title,e[2]=a):a=e[2];const l=a,c=n.id;let u;e[3]!==n.startedAt?(u=new Date(n.startedAt).toISOString(),e[3]=n.startedAt,e[4]=u):u=e[4];let d;e[5]!==n.startedAt?(d=new Date(n.startedAt).toISOString(),e[5]=n.startedAt,e[6]=d):d=e[6];const f=n.isTurnEnded?wn.COMPLETED:wn.RUNNING;let m,p;e[7]===Symbol.for("react.memo_cache_sentinel")?(m=[],p=[],e[7]=m,e[8]=p):(m=e[7],p=e[8]);let g;e[9]!==s||e[10]!==u||e[11]!==d||e[12]!==f||e[13]!==n.id||e[14]!==n.scrollToMessageId||e[15]!==l?(g={taskId:c,title:l,prompt:"",createdAt:u,updatedAt:d,status:f,originalConversationId:s,conversationId:s,rows:m,messages:p,finalMessage:void 0,collapsed:!1,scrollToMessageIdOverride:n.scrollToMessageId,responseMessageId:void 0,responseCanvasTextdocId:void 0,notificationStatus:void 0,originalConversationUserMessageId:void 0,imageGenMessage:void 0},e[9]=s,e[10]=u,e[11]=d,e[12]=f,e[13]=n.id,e[14]=n.scrollToMessageId,e[15]=l,e[16]=g):g=e[16];const h=g;let _;return e[17]!==s||e[18]!==o||e[19]!==h?(_=i.jsx(gF,{task:h,conversationId:s,isActiveConversation:o},h.taskId),e[17]=s,e[18]=o,e[19]=h,e[20]=_):_=e[20],_},urt=t=>{"use forget";const e=D.c(18),{conversationId:n,isActiveConversation:s}=t,o=Ze(n,m_e),r=$Z(n);let a;e[0]===Symbol.for("react.memo_cache_sentinel")?(a=i.jsx(ee.Separator,{className:"first:hidden last:hidden"}),e[0]=a):a=e[0];let l;if(e[1]!==n||e[2]!==o||e[3]!==s){let d;e[5]!==n||e[6]!==s?(d=f=>i.jsx(d_e,{task:f,conversationId:n,isActiveConversation:s},f.id),e[5]=n,e[6]=s,e[7]=d):d=e[7],l=o.map(d),e[1]=n,e[2]=o,e[3]=s,e[4]=l}else l=e[4];let c;if(e[8]!==n||e[9]!==s||e[10]!==r){let d;e[12]!==n||e[13]!==s?(d=f=>i.jsx(gF,{task:f,conversationId:n,isActiveConversation:s},f.taskId),e[12]=n,e[13]=s,e[14]=d):d=e[14],c=r.filter(p_e).map(d),e[8]=n,e[9]=s,e[10]=r,e[11]=c}else c=e[11];let u;return e[15]!==l||e[16]!==c?(u=i.jsxs(i.Fragment,{children:[a,l,c]}),e[15]=l,e[16]=c,e[17]=u):u=e[17],u};function f_e(t){t.scrollToMessageId=void 0,t.scrollToMessageIsAssistant=void 0}function m_e(t){var e;return GZ(ve.getConversationTurns(t),{title:(e=t==null?void 0:t.title)!=null?e:null,threadUpdateTimeMs:(t==null?void 0:t.update_time)!=null?t.update_time*1e3:void 0})}function p_e(t){return t.title!=null&&t.title!==""}const g_e=re(me,"306b75",20,20);function drt(t){"use no forget";const e=te(),n=e.formatMessage({id:"ljSkwg",defaultMessage:"Personalize"}),s=e.formatMessage({id:"XF6dTC",defaultMessage:"Personalize ChatGPT"});return i.jsx(St,{triggerAs:null,label:s,children:i.jsx(Se,{onClick:()=>{ga("chatgpt_personalization_settings_button_clicked",void 0,{variant:t.variant}),Qd("#settings/Personalization")},icon:g_e,label:n,"data-testid":"open-personalization-settings-button",color:"ghost",className:q("max-sm:hidden",t.variant==="default"?"text-token-text-primary rounded-lg whitespace-nowrap":"text-token-text-primary whitespace-nowrap"),style:{viewTransitionName:"var(--vt_share_chat_wide_button)"},children:t.variant==="default"?n:null})})}const h_e=re(me,"6eabdf",20,20);function frt({clientThreadId:t,variant:e="default"}){const n=Ze(t,ve.getIsNewConversation),s=X(()=>i_()),o=bt(),[,r]=wo(),a=()=>{V.logEvent("Temporary Chat Move: Temporary Chat Button Clicked"),n?r(d=>(d.has(Kg)?d.delete(Kg):d.set(Kg,"true"),d),{replace:!0}):Ea(o,{params:s?void 0:new URLSearchParams({[Kg]:"true"})})},l=te(),c=s?l.formatMessage({id:"0emak7",defaultMessage:"Turn off temporary chat"}):l.formatMessage({id:"x2lslS",defaultMessage:"Turn on temporary chat"}),u=s?h_e:wd;return i.jsx(St,{label:c,children:e==="default"?i.jsx($_,{className:"rounded-full!","aria-label":c,onClick:a,icon:u}):i.jsx(Se,{className:"text-token-text-secondary rounded-lg",color:"ghost",icon:u,onClick:a,label:c})})}function mrt(t){return i.jsx($_,G(N({},t),{icon:$s}))}const Lf={enableProfileUpgradePill:!1,enableUpgradeMenuSparkleIcon:!1,enableTinybarUpgradeBtn:!1,enableThreadHeaderUpgradePill:!0};function __e(){"use forget";const t=D.c(1);if(!X(VZ))return Lf;let n;if(t[0]===Symbol.for("react.memo_cache_sentinel")){const s=Je("772164167");n={enableProfileUpgradePill:s.get("enable_profile_upgrade_pill",Lf.enableProfileUpgradePill),enableUpgradeMenuSparkleIcon:s.get("enable_upgrade_menu_sparkle_icon",Lf.enableUpgradeMenuSparkleIcon),enableTinybarUpgradeBtn:s.get("enable_tinybar_upgrade_btn",Lf.enableTinybarUpgradeBtn),enableThreadHeaderUpgradePill:s.get("enable_thread_header_upgrade_pill",Lf.enableThreadHeaderUpgradePill)},t[0]=n}else n=t[0];return n}const prt=(t,e)=>{"use forget";const n=D.c(10),s=bt();let o;n[0]===Symbol.for("react.memo_cache_sentinel")?(o=Et(),n[0]=o):o=n[0];const r=o,{data:a}=Uc(),l=r==null?void 0:r.planType;let c;n[1]!==a?(c=a&&!zZ(a),n[1]=a,n[2]=c):c=n[2];const u=c;let d;n[3]!==s||n[4]!==e||n[5]!==t?(d=p=>{ga(t,void 0,{current_plan_type:l!=null?l:"unknown"}),V.logEvent(e,{planType:l!=null?l:"unknown"}),xs(s,p)},n[3]=s,n[4]=e,n[5]=t,n[6]=d):d=n[6];const f=d;let m;return n[7]!==f||n[8]!==u?(m={showUpgradePlan:u,onUpgradeClick:f},n[7]=f,n[8]=u,n[9]=m):m=n[9],m};function grt(t){"use forget";var p,g;const e=D.c(13),{currentAccount:n}=t,s=n==null?void 0:n.normalizedAccountUserId,o=WZ(s!=null?s:"");if(!s)return null;const r=(g=(p=o==null?void 0:o.name)!=null?p:n==null?void 0:n.name)!=null?g:"",a=(o==null?void 0:o.username)!=null&&o.username.length>0?"@".concat(o.username):void 0;let l;e[0]!==o?(l=o!=null?{name:o.name,picture:o.avatarUrl}:void 0,e[0]=o,e[1]=l):l=e[1];const c=l;let u;e[2]!==c?(u=i.jsx(s3,{size:"small",user:c}),e[2]=c,e[3]=u):u=e[3];let d;e[4]!==s?(d=()=>{rt(Qpe,{accountUserId:s})},e[4]=s,e[5]=d):d=e[5];let f;e[6]!==r?(f=r||i.jsx(P,{id:"TNVQQS",defaultMessage:"Edit profile"}),e[6]=r,e[7]=f):f=e[7];let m;return e[8]!==u||e[9]!==d||e[10]!==f||e[11]!==a?(m=i.jsx(ee.Item,{"data-testid":"calpico-edit-profile-menu-item",icon:u,secondary:a,onSelect:d,children:f}),e[8]=u,e[9]=d,e[10]=f,e[11]=a,e[12]=m):m=e[12],m}const hrt=re(me,"b834c9",20,20),_rt=re(me,"d13764",20,20),hF=re(me,"9efea5",20,20),xrt=re(me,"ab0e8b",20,20),yrt=re(me,"54bf3e",20,20),pf=re(me,"6be74c",20,20),_F=re(me,"975ff3",20,20),x_e=re(me,"7ad2ce",20,20),brt=re(me,"ac4202",20,20),y_e=re(me,"810f2c",20,20),xF=t=>{"use forget";var u;const e=D.c(7);let n;e[0]===Symbol.for("react.memo_cache_sentinel")?(n=o3(),e[0]=n):n=e[0];const s=n;let o;e[1]!==t?(o=()=>lv(t,s),e[1]=t,e[2]=o):o=e[2];const r=X(o);if((u=ok())!=null&&u.get("enabled_workspace_rbac",!1)){let d;return e[3]===Symbol.for("react.memo_cache_sentinel")?(d={hasPermission:!0,isLoading:!1},e[3]=d):d=e[3],d}const a=r!=null?r:!1,l=r==null;let c;return e[4]!==a||e[5]!==l?(c={hasPermission:a,isLoading:l},e[4]=a,e[5]=l,e[6]=c):c=e[6],c},vrt=()=>{"use forget";const t=D.c(8);let e;t[0]===Symbol.for("react.memo_cache_sentinel")?(e=o3(),t[0]=e):e=t[0];const n=e;let s;t[1]===Symbol.for("react.memo_cache_sentinel")?(s=()=>lv(Xi.SkillsShareWorkspace,n),t[1]=s):s=t[1];const o=X(s);let r;t[2]===Symbol.for("react.memo_cache_sentinel")?(r=()=>lv(Xi.SkillsEnableShareWorkspace,n),t[2]=r):r=t[2];const a=X(r);if(!n){let f;return t[3]===Symbol.for("react.memo_cache_sentinel")?(f={canShare:!0,canEnableShare:!0,isLoading:!1},t[3]=f):f=t[3],f}const l=o!=null?o:!1,c=a!=null?a:!1,u=o==null||a==null;let d;return t[4]!==l||t[5]!==c||t[6]!==u?(d={canShare:l,canEnableShare:c,isLoading:u},t[4]=l,t[5]=c,t[6]=u,t[7]=d):d=t[7],d},b_e=v.createContext("none"),Ik=()=>v.useContext(b_e),Srt=()=>{"use forget";const t=D.c(5),e=Ik(),{hasPermission:n,isLoading:s}=xF(Xi.SkillsAccess);if(s||!n)return null;let o;t[0]!==e?(o=()=>{V.logEvent("Hazelnuts: Profile dropdown clicked",{location:e})},t[0]=e,t[1]=o):o=t[1];let r;t[2]===Symbol.for("react.memo_cache_sentinel")?(r=i.jsx(P,{id:"workspacePopoverNavigation.hazelnutsMenuItem",defaultMessage:"Skills"}),t[2]=r):r=t[2];let a;return t[3]!==o?(a=i.jsx(ee.LinkItem,{to:"/skills",icon:y_e,onClick:o,children:r}),t[3]=o,t[4]=a):a=t[4],a};function IA(t,e){const n=t.indexOf(e);return n===-1?Number.POSITIVE_INFINITY:n}const yF=t=>{"use forget";const e=D.c(14),{binding:n,className:s}=t,o=te();let r;e[0]===Symbol.for("react.memo_cache_sentinel")?(r=qZ(),e[0]=r):r=e[0];const a=r;let l,c;if(e[1]!==n||e[2]!==s||e[3]!==o){let d;e[6]===Symbol.for("react.memo_cache_sentinel")?(d=(p,g)=>{const h=a?k_e:E_e,_=IA(h,p),x=IA(h,g);return _-x},e[6]=d):d=e[6];const f=[...n].sort(d);e[7]!==s?(l=q("inline-flex whitespace-pre *:inline-flex *:font-sans",!a&&"*:not-last:after:px-0.5 *:not-last:after:content-['+']",s),e[7]=s,e[8]=l):l=e[8];let m;e[9]!==o?(m=p=>{var _,x,b;const g=(x=(_=a?C_e[p]:null)!=null?_:w_e[p])!=null?x:p.toLocaleUpperCase(),h=(b=a?v_e[p]:null)!=null?b:S_e[p];return i.jsx("kbd",{"aria-label":h&&o.formatMessage(h),children:i.jsx("span",{className:"min-w-[1em]",children:g})},p)},e[9]=o,e[10]=m):m=e[10],c=f.map(m),e[1]=n,e[2]=s,e[3]=o,e[4]=l,e[5]=c}else l=e[4],c=e[5];let u;return e[11]!==l||e[12]!==c?(u=i.jsx("div",{className:l,children:c}),e[11]=l,e[12]=c,e[13]=u):u=e[13],u},fr=we({commandKey:{id:"keyboard.key.command",defaultMessage:"Command"},optionKey:{id:"keyboard.key.option",defaultMessage:"Option"},shiftKey:{id:"keyboard.key.shift",defaultMessage:"Shift"},controlKey:{id:"keyboard.key.control",defaultMessage:"Control"},altKey:{id:"keyboard.key.alt",defaultMessage:"Alt"},winKey:{id:"keyboard.key.win",defaultMessage:"Windows"},escapeKey:{id:"keyboard.key.esc",defaultMessage:"Escape"},deleteKey:{id:"keyboard.key.delete",defaultMessage:"Delete"},backspaceKey:{id:"keyboard.key.bksp",defaultMessage:"Backspace"}}),v_e={[Ye.Mod]:fr.commandKey,[Ye.Meta]:fr.commandKey,[Ye.Alt]:fr.optionKey,[Ye.Backspace]:fr.deleteKey},S_e={[Ye.Mod]:fr.controlKey,[Ye.Meta]:fr.winKey,[Ye.Alt]:fr.altKey,[Ye.Shift]:fr.shiftKey,[Ye.Control]:fr.controlKey,[Ye.Escape]:fr.escapeKey,[Ye.Backspace]:fr.backspaceKey},C_e={[Ye.Mod]:"",[Ye.Meta]:"",[Ye.Alt]:"",[Ye.Shift]:"",[Ye.Control]:"",[Ye.Escape]:""},w_e={[Ye.Mod]:"Ctrl",[Ye.Meta]:"Win",[Ye.Alt]:"Alt",[Ye.Shift]:"Shift",[Ye.Control]:"Ctrl",[Ye.Comma]:",",[Ye.Enter]:"",[Ye.Escape]:"Esc",[Ye.ArrowUp]:"",[Ye.ArrowDown]:"",[Ye.ArrowLeft]:"",[Ye.ArrowRight]:"",[Ye.Backspace]:"",[Ye.Delete]:"",[Ye.Tab]:""},k_e=[Ye.Control,Ye.Alt,Ye.Shift,Ye.Meta,Ye.Mod],E_e=[Ye.Meta,Ye.Mod,Ye.Control,Ye.Alt,Ye.Shift],X_=st(!1),Crt=()=>{"use forget";const t=D.c(12);let e;t[0]===Symbol.for("react.memo_cache_sentinel")?(e=s_(),t[0]=e):e=t[0];const{actions$:n,addAction:s}=e,o=X(X_),r=X(n);let a;t[1]!==r?(a=M_e(r),t[1]=r,t[2]=a):a=t[2];const l=a;let c,u;if(t[3]===Symbol.for("react.memo_cache_sentinel")?(c=()=>s({key:"toggleKeyboardActions",action:j_e,actionMessageDescriptor:qe({id:"keyboardActions.toggleKeyboardActions",defaultMessage:"Show shortcuts"}),group:Gn.Settings,keyboardBinding:[Ye.Mod,"/"]}),u=[s],t[3]=c,t[4]=u):(c=t[3],u=t[4]),v.useEffect(c,u),l.length===0)return null;let d;t[5]===Symbol.for("react.memo_cache_sentinel")?(d=i.jsx(Es.Overlay,{}),t[5]=d):d=t[5];let f;t[6]!==l||t[7]!==o?(f=i.jsxs(ap,{children:[d,i.jsx(F0,{asChild:!0,children:i.jsx(A_e,{groups:l,showAsModal:o,onClose:R_e})})]}),t[6]=l,t[7]=o,t[8]=f):f=t[8];let m;return t[9]!==o||t[10]!==f?(m=i.jsx(rp,{open:o,onOpenChange:P_e,modal:o,children:f}),t[9]=o,t[10]=f,t[11]=m):m=t[11],m};function T_e(t){return t.toReversed?t.toReversed():t.slice().reverse()}function M_e(t){const e=Object.entries(Zd(KZ(r3(t,n=>n.key),n=>T_e(n.keyboardBinding).join("")),n=>n.group));return e.sort(([n],[s])=>Object.keys(Gn).indexOf(n)-Object.keys(Gn).indexOf(s)),e}const A_e=t=>{"use forget";const e=D.c(16),{groups:n,showAsModal:s,onClose:o}=t,r=!s&&"transition-opacity starting:opacity-0";let a;e[0]!==r?(a=q("shadow-long fixed start-3 bottom-3 min-w-(--sidebar-width) px-1.5 text-sm",r),e[0]=r,e[1]=a):a=e[1];let l;e[2]===Symbol.for("react.memo_cache_sentinel")?(l=i.jsx("h2",{className:"text-sm",children:i.jsx(P,{id:"hotkeyModal.title",defaultMessage:"Keyboard shortcuts"})}),e[2]=l):l=e[2];let c;e[3]!==o||e[4]!==s?(c=s&&i.jsx(U0,{asChild:!0,children:i.jsx(Wn,{onClick:o})}),e[3]=o,e[4]=s,e[5]=c):c=e[5];let u;e[6]!==c?(u=i.jsxs("div",{className:"ms-2.5 mb-3 flex h-9 items-center justify-between font-semibold",children:[l,c]}),e[6]=c,e[7]=u):u=e[7];let d;e[8]!==n?(d=n.map(L_e),e[8]=n,e[9]=d):d=e[9];let f;e[10]!==d?(f=i.jsx("dl",{className:"grid [grid-template-columns:minmax(0,1fr)_max-content] gap-x-6 gap-y-3 px-2.5 pb-2",children:d}),e[10]=d,e[11]=f):f=e[11];let m;return e[12]!==a||e[13]!==u||e[14]!==f?(m=i.jsxs(dR,{className:a,children:[u,f]}),e[12]=a,e[13]=u,e[14]=f,e[15]=m):m=e[15],m};function N_e(t){switch(t){case Gn.Core:return null;case Gn.Chat:return i.jsx(P,{id:"keyboardActionGroup.label.Chat",defaultMessage:"Chat"});case Gn.Settings:return i.jsx(P,{id:"keyboardActionGroup.label.Settings",defaultMessage:"Settings"});case Gn.Internal:return"Internal"}}function I_e(t){return!t}function j_e(){X_.set(I_e)}function P_e(t){t||X_.set(!1)}function R_e(){return X_.set(!1)}function O_e(t){return i.jsxs(v.Fragment,{children:[i.jsx("dt",{children:typeof t.actionMessageDescriptor=="string"?t.actionMessageDescriptor:i.jsx(P,N({},t.actionMessageDescriptor))}),i.jsx("dd",{className:"text-token-text-secondary justify-self-end",children:i.jsx(yF,{binding:t.keyboardBinding})})]},t.key)}function L_e(t){const[e,n]=t;return i.jsxs(v.Fragment,{children:[i.jsx("dt",{className:"text-token-text-tertiary col-span-2 mt-2 empty:hidden",children:N_e(e)}),n.map(O_e)]},e)}const D_e=25;function B_e(t,e=0,n="",s=D_e,o=void 0,r=void 0){const a=v.useMemo(()=>r?[...r].sort().join(","):void 0,[r]);return ut({queryKey:["workspace",t,e,n,s,a],queryFn:async()=>{const l=typeof window<"u"?window.location.href:void 0;return await ue.safeGet("/accounts/{account_id}/users",{parameters:{path:{account_id:t},query:{offset:e,limit:s,query:n,role:a}},referrer:l,referrerPolicy:l?"unsafe-url":void 0})},placeholderData:o,enabled:!!t})}function wrt(t,e,n=20,s=0){"use no forget";return ut({queryKey:["workspace",t,"groups",e,s,n],queryFn:async()=>await ue.safeGet("/accounts/{account_id}/groups",{parameters:{path:{account_id:t!=null?t:""},query:{query:e,offset:s,orderby:"@score",limit:n}}}),enabled:!!t&&e.trim()!==""})}function krt(t){var s;const{data:e,isLoading:n}=B_e(t);return{count:(s=e==null?void 0:e.total)!=null?s:0,isLoading:n}}const Pr=re(me,"fa1dbd",20,20),F_e=re(me,"0f510f",20,20);var Uj;Tt.ol(Uj||(Uj=_t(["ms-5 list-decimal"])));var Hj;const U_e=Tt.ul(Hj||(Hj=_t(["ms-3 list-disc"])));var $j;const H_e=Tt.li($j||($j=_t(["marker:text-token-text-tertiary text-token-text-primary mb-2"])));var u2,jA;function $_e(){if(jA)return u2;jA=1;function t(e,n,s){return e===e&&(s!==void 0&&(e=e<=s?e:s),n!==void 0&&(e=e>=n?e:n)),e}return u2=t,u2}var d2,PA;function G_e(){if(PA)return d2;PA=1;var t=$_e(),e=YZ();function n(s,o,r){return r===void 0&&(r=o,o=void 0),r!==void 0&&(r=e(r),r=r===r?r:0),o!==void 0&&(o=e(o),o=o===o?o:0),t(e(s),o,r)}return d2=n,d2}var V_e=G_e();const jk=ps(V_e);var X1=(t=>(t.Month="month",t.Year="year",t.Once="once",t))(X1||{}),z_e=(t=>(t.Inclusive="inclusive",t.Exclusive="exclusive",t))(z_e||{});const W_e="/checkout_pricing_config/countries",q_e="/checkout_pricing_config/configs/{country_code}",K_e="go",Y_e="plus",Ert="pro",RA="business",bF=["AT","BE","BG","HR","CY","CZ","DK","EE","FI","FR","DE","GR","HU","IS","ID","IE","IT","LV","LI","LT","LU","MT","NL","NO","PL","PT","RO","SK","SI","ES","SE","CH","GB","IN","PK","TH","MY","VN","PH","NG","ZA","KZ","TZ","EG","BR"];function Z_e(t){return bF.includes(t)}const vF={AT:20,BE:21,BG:20,HR:25,CY:19,CZ:21,DK:25,EE:24,FI:25.5,FR:20,DE:19,GR:24,HU:27,IS:24,ID:11,IE:23,IT:22,LV:21,LI:8.1,LT:21,LU:17,MT:18,NL:21,NO:25,PL:23,PT:23,RO:21,SK:23,SI:22,ES:21,SE:25,CH:8.1,GB:20,IN:18,PK:0,TH:7,MY:8,VN:10,PH:12,NG:8,ZA:15,KZ:12,TZ:18,EG:14,BR:0};function Q_e({amount:t,roundToPrecision:e=2}){const n=Math.pow(10,e);return Math.round(t*n)/n}function J_e({amount:t,taxPercent:e,inclusive:n,roundToPrecision:s=2}){const o=e*t/((n?e:0)+100),r=Math.pow(10,s);return Math.round(o*r)/r}function Trt(t,e){return e==null?(Ve.addError(new Error("nullish_country_for_vat_calculation"),{country:e}),0):Z_e(e)?J_e({amount:t,taxPercent:vF[e],inclusive:!0}):(Ve.addError(new Error("unrecognized_country_for_vat_calculation"),{country:e}),0)}function Mrt(t,e){let n=null,s=null;return t===e.countryCode?(n=e.currencyConfig.tax_percent,s=e.currencyConfig.tax_type):bF.includes(t)&&(n=vF[t],s=t===gle?"gst":"vat"),n==null||s==null?null:{taxCountry:t,taxRatePercent:n,taxName:s,reverseChargeEligible:!0}}const Art={at_vat:{type:"at_vat",country:"AT",region:"EEA-GB-CH",country_label:"Austria",format:"ATU[0-9]{8}",placeholder:"ATU12345678",stripe_type:"eu_vat",verifiable:!0,description:"European VAT number",reverse_charge:!0,supported:!0},be_vat:{type:"be_vat",country:"BE",region:"EEA-GB-CH",country_label:"Belgium",format:"BE(0|1)[0-9]{9}",placeholder:"BE0123456789",stripe_type:"eu_vat",verifiable:!0,description:"European VAT number",reverse_charge:!0,supported:!0},bg_vat:{type:"bg_vat",country:"BG",region:"EEA-GB-CH",country_label:"Bulgaria",format:"BG[0-9]{9,10}",placeholder:"BG0123456789",stripe_type:"eu_vat",verifiable:!0,description:"European VAT number",reverse_charge:!0,supported:!0},br_cnpj:{type:"br_cnpj",country:"BR",region:"BR",country_label:"Brazil",format:"([0-9]{2})\\.?([0-9]{3})\\.?([0-9]{3})[\\/\\\\]?([0-9]{4})\\-?([0-9]{2})",placeholder:"01.234.456/5432-10",stripe_type:"br_cnpj",verifiable:!1,replacement_string:"\\1.\\2.\\3/\\4-\\5",description:"Brazilian CNPJ number",reverse_charge:!1,supported:!0},br_cpf:{type:"br_cpf",country:"BR",region:"BR",country_label:"Brazil",format:"([0-9]{3})\\.?([0-9]{3})\\.?([0-9]{3})\\-?([0-9]{2})",placeholder:"123.456.789-87",stripe_type:"br_cpf",verifiable:!1,replacement_string:"\\1.\\2.\\3-\\4",description:"Brazilian CPF number",reverse_charge:!1,supported:!0},cy_vat:{type:"cy_vat",country:"CY",region:"EEA-GB-CH",country_label:"Cyprus",format:"CY[0-9]{8}[A-Z]",placeholder:"CY12345678Z",stripe_type:"eu_vat",verifiable:!0,description:"European VAT number",reverse_charge:!0,supported:!0},cz_vat:{type:"cz_vat",country:"CZ",region:"EEA-GB-CH",country_label:"Czech Republic",format:"CZ[0-9]{8,10}",placeholder:"CZ1234567890",stripe_type:"eu_vat",verifiable:!0,description:"European VAT number",reverse_charge:!0,supported:!0},de_vat:{type:"de_vat",country:"DE",region:"EEA-GB-CH",country_label:"Germany",format:"DE[0-9]{9}",placeholder:"DE123456789",stripe_type:"eu_vat",verifiable:!0,description:"European VAT number",reverse_charge:!0,supported:!0},dk_vat:{type:"dk_vat",country:"DK",region:"EEA-GB-CH",country_label:"Denmark",format:"DK[0-9]{8}",placeholder:"DK12345678",stripe_type:"eu_vat",verifiable:!0,description:"European VAT number",reverse_charge:!0,supported:!0},ee_vat:{type:"ee_vat",country:"EE",region:"EEA-GB-CH",country_label:"Estonia",format:"EE[0-9]{9}",placeholder:"EE123456789",stripe_type:"eu_vat",verifiable:!0,description:"European VAT number",reverse_charge:!0,supported:!0},es_vat:{type:"es_vat",country:"ES",region:"EEA-GB-CH",country_label:"Spain",format:"ES([A-Z][0-9]{8}|[0-9]{8}[A-Z]|[A-Z][0-9]{7}[A-Z])",placeholder:"ESA1234567Z",stripe_type:"eu_vat",verifiable:!0,description:"European VAT number",reverse_charge:!0,supported:!0},fi_vat:{type:"fi_vat",country:"FI",region:"EEA-GB-CH",country_label:"Finland",format:"FI[0-9]{8}",placeholder:"FI12345678",stripe_type:"eu_vat",verifiable:!0,description:"European VAT number",reverse_charge:!0,supported:!0},fr_vat:{type:"fr_vat",country:"FR",region:"EEA-GB-CH",country_label:"France",format:"FR[A-Z0-9]{2}[0-9]{9}",placeholder:"FRAB123456789",stripe_type:"eu_vat",verifiable:!0,description:"European VAT number",reverse_charge:!0,supported:!0},gr_vat:{type:"gr_vat",country:"GR",region:"EEA-GB-CH",country_label:"Greece",format:"EL[0-9]{9}",placeholder:"EL123456789",stripe_type:"eu_vat",verifiable:!0,description:"European VAT number",reverse_charge:!0,supported:!0},hr_vat:{type:"hr_vat",country:"HR",region:"EEA-GB-CH",country_label:"Croatia",format:"HR[0-9]{11}",placeholder:"HR12345678912",stripe_type:"eu_vat",verifiable:!0,description:"European VAT number",reverse_charge:!0,supported:!0},hu_vat:{type:"hu_vat",country:"HU",region:"EEA-GB-CH",country_label:"Hungary",format:"(HU)?[0-9]{8}((-)?[0-9]{1}(-)?[0-9]{2})?",placeholder:"HU12345678912",stripe_type:"eu_vat",verifiable:!0,description:"European VAT number",reverse_charge:!0,supported:!0},ie_vat:{type:"ie_vat",country:"IE",region:"EEA-GB-CH",country_label:"Ireland",format:"IE([0-9]{7}[A-Z]{1,2}|[0-9][A-Z][0-9]{5}[A-Z])",placeholder:"IE1234567AB",stripe_type:"eu_vat",verifiable:!0,description:"European VAT number",reverse_charge:!0,supported:!0},it_vat:{type:"it_vat",country:"IT",region:"EEA-GB-CH",country_label:"Italy",format:"IT[0-9]{11}",placeholder:"IT12345678912",stripe_type:"eu_vat",verifiable:!0,description:"European VAT number",reverse_charge:!0,supported:!0},lt_vat:{type:"lt_vat",country:"LT",region:"EEA-GB-CH",country_label:"Lithuania",format:"LT([0-9]{9}|[0-9]{12})",placeholder:"LT123456789123",stripe_type:"eu_vat",verifiable:!0,description:"European VAT number",reverse_charge:!0,supported:!0},lu_vat:{type:"lu_vat",country:"LU",region:"EEA-GB-CH",country_label:"Luxembourg",format:"LU[0-9]{8}",placeholder:"LU12345678",stripe_type:"eu_vat",verifiable:!0,description:"European VAT number",reverse_charge:!0,supported:!0},lv_vat:{type:"lv_vat",country:"LV",region:"EEA-GB-CH",country_label:"Latvia",format:"LV[0-9]{11}",placeholder:"LV12345678912",stripe_type:"eu_vat",verifiable:!0,description:"European VAT number",reverse_charge:!0,supported:!0},mt_vat:{type:"mt_vat",country:"MT",region:"EEA-GB-CH",country_label:"Malta",format:"MT[0-9]{8}",placeholder:"MT12345678",stripe_type:"eu_vat",verifiable:!0,description:"European VAT number",reverse_charge:!0,supported:!0},nl_vat:{type:"nl_vat",country:"NL",region:"EEA-GB-CH",country_label:"Netherlands",format:"NL[0-9]{9}B[0-9]{2}",placeholder:"NL123456789B12",stripe_type:"eu_vat",verifiable:!0,description:"European VAT number",reverse_charge:!0,supported:!0},pl_vat:{type:"pl_vat",country:"PL",region:"EEA-GB-CH",country_label:"Poland",format:"PL[0-9]{10}",placeholder:"PL1234567890",stripe_type:"eu_vat",verifiable:!0,description:"European VAT number",reverse_charge:!0,supported:!0},pt_vat:{type:"pt_vat",country:"PT",region:"EEA-GB-CH",country_label:"Portugal",format:"PT[0-9]{9}",placeholder:"PT123456789",stripe_type:"eu_vat",verifiable:!0,description:"European VAT number",reverse_charge:!0,supported:!0},ro_vat:{type:"ro_vat",country:"RO",region:"EEA-GB-CH",country_label:"Romania",format:"RO[0-9]{2,10}",placeholder:"RO1234567891",stripe_type:"eu_vat",verifiable:!0,description:"European VAT number",reverse_charge:!0,supported:!0},se_vat:{type:"se_vat",country:"SE",region:"EEA-GB-CH",country_label:"Sweden",format:"SE[0-9]{12}",placeholder:"SE123456789123",stripe_type:"eu_vat",verifiable:!0,description:"European VAT number",reverse_charge:!0,supported:!0},si_vat:{type:"si_vat",country:"SI",region:"EEA-GB-CH",country_label:"Slovenia",format:"SI[0-9]{8}",placeholder:"SI12345678",stripe_type:"eu_vat",verifiable:!0,description:"European VAT number",reverse_charge:!0,supported:!0},sk_vat:{type:"sk_vat",country:"SK",region:"EEA-GB-CH",country_label:"Slovakia",format:"SK[0-9]{10}",placeholder:"SK1234567891",stripe_type:"eu_vat",verifiable:!0,description:"European VAT number",reverse_charge:!0,supported:!0},xi_vat:{type:"xi_vat",country:"GB",region:"EEA-GB-CH",country_label:"United Kingdom",format:"(XI)([0-9]{9}|[0-9]{12}|(HA|GD)[0-9]{3})",placeholder:"XI123456789",stripe_type:"eu_vat",verifiable:!0,description:"Northern Ireland VAT number",reverse_charge:!0,supported:!0},gb_vat:{type:"gb_vat",country:"GB",region:"EEA-GB-CH",country_label:"United Kingdom",format:"GB([0-9]{9}|[0-9]{12}|(HA|GD)[0-9]{3})",placeholder:"GB123456789",stripe_type:"gb_vat",verifiable:!0,description:"United Kingdom VAT number",reverse_charge:!0,supported:!0},nz_gst:{type:"nz_gst",country:"NZ",region:"NZ",country_label:"New Zealand",format:"[0-9]{8,9}",placeholder:"123456789",stripe_type:"nz_gst",description:"New Zealand GST number",reverse_charge:!0,supported:!0,verifiable:!1},au_abn:{type:"au_abn",country:"AU",region:"AU",country_label:"Australia",format:"[0-9]{11}",placeholder:"12345678912",stripe_type:"au_abn",verifiable:!0,description:"Australian Business Number (AU ABN)",reverse_charge:!0,supported:!0},au_arn:{type:"au_arn",country:"AU",region:"AU",country_label:"Australia",format:"[0-9]{12}",placeholder:"123456789123",stripe_type:"au_arn",verifiable:!1,description:"Australian Taxation Office Reference Number",reverse_charge:!0,supported:!0},in_gst:{type:"in_gst",country:"IN",region:"IN",country_label:"India",format:"[0-9]{2}[A-Z]{5}[0-9]{4}[A-Z][1-9A-Z]Z[0-9A-Z]",placeholder:"12ABCDE3456FGZH",stripe_type:"in_gst",description:"Indian GST number",reverse_charge:!0,supported:!0,verifiable:!1},no_vat:{type:"no_vat",country:"NO",region:"EEA-GB-CH",country_label:"Norway",format:"[0-9]{9}MVA",placeholder:"123456789MVA",stripe_type:"no_vat",verifiable:!1,description:"Norwegian VAT number",reverse_charge:!0,supported:!0},za_vat:{type:"za_vat",country:"ZA",region:"ZA",country_label:"South Africa",format:"4[0-9]{9}",placeholder:"4123456789",stripe_type:"za_vat",verifiable:!1,description:"South African VAT number",reverse_charge:!1,supported:!0},ch_vat:{type:"ch_vat",country:"CH",region:"EEA-GB-CH",country_label:"Switzerland",placeholder:"CHE-123.456.789 MWST",format:"([Cc][Hh][Ee])[\\. \\-]?(\\d{3})[\\. \\-]?(\\d{3})[\\. \\-]?(\\d{3}) ?([Mm][Ww][Ss][Tt]|[Tt][Vv][Aa]|[Ii][Vv][Aa])",stripe_type:"ch_vat",verifiable:!1,replacement_string:"\\1-\\2.\\3.\\4 \\5",description:"Switzerland VAT number",reverse_charge:!0,supported:!0},mx_rfc:{type:"mx_rfc",country:"MX",region:"MX",country_label:"Mexico",format:"([A-Za-z&]{3,4})-?([0-9]{2})(0[1-9]|1[0-2])(0[1-9]|[12][0-9]|3[01])-?([A-Za-z0-9])-?([A-Za-z0-9][0-9A])",placeholder:"ABC010203AB9",stripe_type:"mx_rfc",verifiable:!1,replacement_string:"\\1\\2\\3\\4\\5\\6",description:"Mexican RFC number",reverse_charge:!0,supported:!0},sg_uen:{type:"sg_uen",country:"SG",region:"SG",country_label:"Singapore",format:"([0-9]{8}[A-Z]|[0-9]{4}[0-9]{5}[A-Z]|F(000|   )[0-9]{5}[A-Z]|[ST][0-9]{2}[A-Z]{2}[0-9]{4}[A-Z])",placeholder:"123456789F",stripe_type:"sg_uen",verifiable:!1,description:"Singaporean UEN",reverse_charge:!0,supported:!0},ru_inn:{type:"ru_inn",country:"RU",region:"RU",country_label:"Russia",format:"[0-9]{10}",placeholder:"1234567891",stripe_type:"ru_inn",verifiable:!1,description:"Russian INN",reverse_charge:!0,supported:!1},ru_kpp:{type:"ru_kpp",country:"RU",region:"RU",country_label:"Russia",format:"[0-9]{9}",placeholder:"123456789",stripe_type:"ru_kpp",verifiable:!1,description:"Russian KPP",reverse_charge:!0,supported:!1},ca_bn:{type:"ca_bn",country:"CA",region:"CA",country_label:"Canada",format:"[0-9]{9}",placeholder:"123456789",stripe_type:"ca_bn",verifiable:!1,description:"Canadian BN",reverse_charge:!1,supported:!0},hk_br:{type:"hk_br",country:"HK",region:"HK",country_label:"Hong Kong",format:"[0-9]{8}",placeholder:"12345678",stripe_type:"hk_br",description:"Hong Kong BR number",reverse_charge:!1,supported:!1,verifiable:!1},es_cif:{type:"es_cif",country:"ES",region:"EEA-GB-CH",country_label:"Spain",format:"[0-9A-Z][0-9]{7}[0-9A-Z]",placeholder:"A12345678",stripe_type:"es_cif",description:"Spanish CIF number",reverse_charge:!0,supported:!0,verifiable:!1},tw_vat:{type:"tw_vat",country:"TW",region:"TW",country_label:"Taiwan",format:"[0-9]{8}",placeholder:"12345678",stripe_type:"tw_vat",description:"Taiwanese VAT",reverse_charge:!0,supported:!0,verifiable:!1},th_vat:{type:"th_vat",country:"TH",region:"TH",country_label:"Thailand",format:"[0-9]{13}",placeholder:"1234567891234",stripe_type:"th_vat",description:"Thai VAT",reverse_charge:!0,supported:!0,verifiable:!1},jp_cn:{type:"jp_cn",country:"JP",region:"JP",country_label:"Japan",format:"[0-9]{13}",placeholder:"1234567891234",stripe_type:"jp_cn",description:"Japanese Corporate Number",reverse_charge:!0,supported:!0,verifiable:!1},jp_rn:{type:"jp_rn",country:"JP",region:"JP",country_label:"Japan",format:"[0-9]{5}",placeholder:"12345",stripe_type:"jp_rn",description:"Japanese Registered Foreign Businesses Number",reverse_charge:!0,supported:!0,verifiable:!1},li_uid:{type:"li_uid",country:"LI",region:"EEA-GB-CH",country_label:"Liechtenstein",format:"CHE[0-9]{9}",placeholder:"CHE123456789",stripe_type:"li_uid",description:"Liechtensteinian UID number",reverse_charge:!0,supported:!0,verifiable:!1},my_itn:{type:"my_itn",country:"MY",region:"MY",country_label:"Malaysia",format:"([A-Z]{1,2}) ?([0-9]{10})",placeholder:"C 1234567890",stripe_type:"my_itn",description:"Malaysian ITN",reverse_charge:!0,supported:!0,verifiable:!1,replacement_string:"\\1 \\2"},us_ein:{type:"us_ein",country:"US",region:"US",country_label:"United States",format:"([0-9]{2})-?([0-9]{7})",placeholder:"12-3456789",stripe_type:"us_ein",verifiable:!1,replacement_string:"\\1-\\2",description:"United States EIN",reverse_charge:!1,supported:!1},kr_brn:{type:"kr_brn",country:"KR",region:"KR",country_label:"South Korea",format:"([0-9]{3})-?([0-9]{2})-?([0-9]{5})",placeholder:"123-45-67890",stripe_type:"kr_brn",description:"Korean BRN",reverse_charge:!0,supported:!0,verifiable:!1,replacement_string:"\\1-\\2-\\3"},ca_qst:{type:"ca_qst",country:"CA",region:"CA",country_label:"Canada",format:"([0-9]{10}TQ[0-9]{4}|[0-9]{9}[A-Z]{2}[0-9]{4}|[0-9]{9,10}|NR[0-9]{8})",placeholder:"1234567890TQ1234",stripe_type:"ca_qst",verifiable:!1,description:"Canadian QST number (Qubec)",reverse_charge:!1,supported:!0},ca_gst_hst:{type:"ca_gst_hst",country:"CA",region:"CA",country_label:"Canada",format:"([0-9]{9}) ?RT ?([0-9]{4})",placeholder:"123456789RT0002",stripe_type:"ca_gst_hst",verifiable:!1,replacement_string:"\\1RT\\2",description:"Canadian GST/HST number",reverse_charge:!1,supported:!0},ca_pst_bc:{type:"ca_pst_bc",country:"CA",region:"CA",country_label:"Canada",format:"PST-?([0-9]{4})-?([0-9]{4})",placeholder:"PST-1234-5678",stripe_type:"ca_pst_bc",verifiable:!1,replacement_string:"PST-\\1-\\2",description:"Canadian PST number (British Columbia)",reverse_charge:!1,supported:!0},ca_pst_mb:{type:"ca_pst_mb",country:"CA",region:"CA",country_label:"Canada",format:"([0-9]{6})-?([0-9])",placeholder:"123456-7",stripe_type:"ca_pst_mb",verifiable:!1,replacement_string:"\\1-\\2",description:"Canadian PST number (Manitoba)",reverse_charge:!1,supported:!0},ca_pst_sk:{type:"ca_pst_sk",country:"CA",region:"CA",country_label:"Canada",format:"([0-9]{7})",placeholder:"1234567",stripe_type:"ca_pst_sk",verifiable:!1,description:"Canadian PST number (Saskatchewan)",reverse_charge:!1,supported:!0},my_sst:{type:"my_sst",country:"MY",region:"MY",country_label:"Malaysia",format:"(([A-Z][0-9]{2})-?([0-9]{4})-?([0-9]{8})|[0-9]{8})",placeholder:"A12-3456-78912345",stripe_type:"my_sst",description:"Malaysian SST number",reverse_charge:!0,supported:!0,verifiable:!1,replacement_string:"\\2-\\3-\\4",only_replace_if_group_captured:2},sg_gst:{type:"sg_gst",country:"SG",region:"SG",country_label:"Singapore",format:"([0-9]{8}[A-Z]|[0-9]{4}[0-9]{5}[A-Z]|F(000|   )[0-9]{5}[A-Z]|[ST][0-9]{2}[A-Z]{2}[0-9]{4}[A-Z]|M[0-9A-Z][0-9]{7}[0-9A-Z]|F[0-9]{8}[A-Z])",placeholder:"M12345678X",stripe_type:"sg_gst",description:"Singaporean GST",reverse_charge:!0,supported:!0,verifiable:!1},ae_trn:{type:"ae_trn",country:"AE",region:"AE",country_label:"United Arab Emirates",format:"[0-9]{15}",placeholder:"123456789012345",stripe_type:"ae_trn",verifiable:!1,description:"United Arab Emirates TRN",reverse_charge:!0,supported:!0},cl_tin:{type:"cl_tin",country:"CL",region:"CL",country_label:"Chile",format:"([0-9]{2})\\.?([0-9]{3})\\.?([0-9]{3})-?([K0-9])",placeholder:"12.345.678-K",stripe_type:"cl_tin",verifiable:!1,replacement_string:"\\1.\\2.\\3-\\4",description:"Chilean TIN",reverse_charge:!0,supported:!1},sa_vat:{type:"sa_vat",country:"SA",region:"SA",country_label:"Saudi Arabia",format:"[0-9]{15}",placeholder:"123456789012345",stripe_type:"sa_vat",description:"Saudi Arabia VAT",reverse_charge:!0,supported:!0,verifiable:!1},id_npwp:{type:"id_npwp",country:"ID",region:"ID",country_label:"Indonesia",format:"([0-9]{2})\\.?([0-9]{3})\\.?([0-9]{3})\\.?([0-9])-?([0-9]{3})\\.?([0-9]{3})",placeholder:"12.345.678.9-012.345",verifiable:!1,stripe_type:"id_npwp",description:"Indonesian NPWP number",reverse_charge:!0,supported:!0,replacement_string:"\\1.\\2.\\3.\\4-\\5.\\6"},my_frp:{type:"my_frp",country:"MY",region:"MY",country_label:"Malaysia",format:"[0-9]{8}",placeholder:"12345678",verifiable:!1,stripe_type:"my_frp",description:"Malaysian FRP number",reverse_charge:!0,supported:!0},il_vat:{type:"il_vat",country:"IL",region:"IL",country_label:"Israel",format:"[0-9]{9}",placeholder:"000012345",verifiable:!1,stripe_type:"il_vat",description:"Israel VAT",reverse_charge:!0,supported:!0},ge_vat:{type:"ge_vat",country:"GE",region:"GE",country_label:"Georgia",format:"([0-9]{9}|[0-9]{11})",placeholder:"123456789",verifiable:!1,stripe_type:"ge_vat",description:"Georgian VAT",reverse_charge:!0,supported:!0},ua_vat:{type:"ua_vat",country:"UA",region:"UA",country_label:"Ukraine",format:"([0-9]{8,10}|[0-9]{12})",placeholder:"123456789",verifiable:!1,stripe_type:"ua_vat",description:"Ukrainian VAT",reverse_charge:!0,supported:!1},is_vat:{type:"is_vat",country:"IS",region:"EEA-GB-CH",country_label:"Iceland",format:"[0-9]{6}",placeholder:"123456",verifiable:!1,stripe_type:"is_vat",description:"Icelandic VAT",reverse_charge:!0,supported:!0},tr_tin:{country:"TR",region:"TR",format:"[0-9]{10,11}",placeholder:"0123456789",verifiable:!1,type:"tr_tin",stripe_type:"tr_tin",description:"Turkish Tax Identification Number",country_label:"Trkiye",reverse_charge:!0,supported:!0}};function eS(t){return t.trim().toUpperCase()}function X_e(t){return Je("3768341700").get(t,!1)}async function exe(){return(await(await ue.safeGet(W_e,{skipJsonTransform:!0,authOption:Ot.SendIfAvailable})).json()).countries.map(eS)}async function fu(t){const e=eS(t);if(!e){const o=new Error("Country code is required to fetch checkout pricing config");throw Ve.addError(o,{countryCode:t}),o}const n=await ue.safeGet(q_e,{parameters:{path:{country_code:e}},skipJsonTransform:!0,authOption:Ot.SendIfAvailable});if(!n.ok){let o;try{const a=await n.json();typeof(a==null?void 0:a.detail)=="string"&&(o=a.detail)}catch(a){}const r=n.status===404&&o==="Country config not found"?"Checkout pricing config not found for this country":"Failed to fetch checkout pricing config";throw Ve.addError(new Error(r),{countryCode:e,status:n.status,detail:o}),new Error(r)}const s=await n.json();return{countryCode:eS(s.country_code),currencyConfig:s.currency_config}}async function txe(t,e){const n=t!==void 0&&(ble(t)||vle(t))?"EU":L1;let s=null;const o=await exe();if(e?(t&&o.includes(t)&&(s=await fu(t),s.currencyConfig.symbol_code!==e&&(s=null)),s||(s=await fu(e))):t&&(o.includes(t)?s=await fu(t):s=await fu(n)),!s)return fu(n);const r=s.currencyConfig.pricing_rollout_gate;return!r||X_e(r)?s:fu(n)}function tS(t,e,n){const s=t.currencyConfig[e];if(!s){const r=new Error("Plan is not available for given country's pricing");throw Ve.addError(r,{countryCode:t.countryCode,planType:e,interval:n}),r}const o=s[n];if(!o){const r=new Error("Price for interval is not available for given country's pricing");throw Ve.addError(r,{countryCode:t.countryCode,planType:e,interval:n}),r}return{amount:o.amount,taxBehavior:o.tax}}function SF({countryCode:t,currency:e,enabled:n=!0}){return ut({queryKey:["checkout-pricing-config",t!=null?t:null,e!=null?e:null],queryFn:()=>txe(t,e),enabled:n})}function Nrt(t){return t===et.SELF_SERVE_BUSINESS?"business":t}function Irt(t,e,n){return{id:"pricingPlan.".concat(e,".costAmount"),defaultMessage:nxe(t),description:"Cost for ".concat(e," plan in ").concat(n)}}function nxe(t){const e=Q_e({amount:t,roundToPrecision:2});return e%1===0?e.toFixed(0):e.toFixed(2)}var Gj;const sxe=Tt.div(Gj||(Gj=_t(["flex flex-col gap-3 text-token-text-secondary text-sm mt-3"])));var Vj;const oxe=Tt.p(Vj||(Vj=_t(["text-token-text-primary"])));var zj;const rxe=Tt(E_)(zj||(zj=_t(["relative flex cursor-pointer flex-col rounded-xl border-token-border-default p-5 text-start align-top transition-[border-color] duration-100 hover:border-token-border-heavy data-[state=unchecked]:m-[1px] data-[state=checked]:border-2 data-[state=unchecked]:border data-[state=checked]:border-black dark:data-[state=checked]:border-white md:min-h-[300px]"])));var Wj;const axe=Tt(T_)(Wj||(Wj=_t(["flex h-5 w-5 items-center justify-center rounded-full border-2 border-token-border-heavy bg-token-bg-primary outline-hidden data-[state=checked]:bg-black dark:data-[state=checked]:bg-white"])));var qj;const OA=Tt.s(qj||(qj=_t(["text-token-text-tertiary"]))),f2=999,ixe=2,lxe=5,jrt="team-pricing-seat-selection",Prt="team-pricing-seat-selection-direct",Rrt="numSeats",Ort="selectedPlan",Lrt="promo_campaign",cxe=()=>ixe,Drt=()=>lxe;function Brt({billingType:t,name:e,billingFeatures:n,cost:s,currencySign:o,currencyCode:r,monthlyCost:a,discountedMonthlyCost:l,costStructure:c,selectedValue:u,hideDetails:d=!1,showWelcomeOfferLabel:f=!1,promoDisclaimer:m=null,hideSavingsMessage:p=!1}){const g=te(),h=cxe(),_=Math.round(100-l/a*100);return i.jsxs(rxe,{value:t,id:t,className:q(d&&"min-h-0!"),children:[f&&i.jsx("div",{className:"absolute start-3 top-0 -translate-y-1/2 rounded-xl bg-[#10A37F] px-2 py-1 text-xs font-medium text-white",children:i.jsx(P,N({},on.welcomeOfferLabel))}),!p&&l<a&&i.jsx("div",{className:q("absolute start-3 top-0 -translate-y-1/2 px-2 py-1 text-xs font-medium",u===t?"bg-token-bg-primary text-[#10A37F]":"rounded-xl bg-[#10A37F] text-white"),children:i.jsx(P,G(N({},u===t?on.discountSelectedLabel:on.discountUnselectedLabel),{values:{discountedRate:_}}))}),i.jsxs("div",{className:"flex w-full items-center justify-between",children:[i.jsx("div",{className:q(d?"text-base":"text-xl","font-medium"),children:i.jsx(P,N({},e))}),i.jsx(axe,{forceMount:!0,children:i.jsx(Pr,{className:q("mt-0.25 h-[14px] w-[14px] stroke-3 text-white dark:text-black",u!==t&&"hidden")})})]}),i.jsxs(sxe,{children:[i.jsxs("div",{children:[i.jsx(oxe,{children:i.jsx(P,G(N({},s),{values:{monthlyCost:a,discountedMonthlyCost:l,currencyCode:g.formatMessage(r),currencySign:g.formatMessage(o),s:(...x)=>i.jsx(OA,{children:x})}}))}),i.jsx("p",{children:i.jsx(P,N({},c))})]}),!d&&i.jsx(U_e,{children:n.map(x=>i.jsx(H_e,{className:"text-token-text-secondary",children:i.jsx(P,G(N({},x),{values:{minSeats:h,monthlyCost:a,minimumMonthlyCost:l*2,currencyCode:g.formatMessage(r),currencySign:g.formatMessage(o),s:(...b)=>i.jsx(OA,{children:b})}}))},x.id))}),m&&i.jsx("div",{className:"text-token-text-secondary mt-2 text-xs",children:m})]})]})}var Kj;const LA=Tt.button(Kj||(Kj=_t(["h-12 w-12 rounded-lg flex items-center justify-center border border-token-border-default px-1.5 py-1.5 hover:bg-token-main-surface-secondary disabled:pointer-events-none disabled:text-token-text-tertiary"])));function Frt({numSeats:t,minSeats:e,setNumSeats:n,label:s,maxSeats:o,disabled:r,classNames:a}){const l=!!r,c=o!=null?o:f2,[u,d]=v.useState(!1),f=Tn(),m=v.useMemo(()=>f==null?void 0:f.subscriptionAnalyticsParams,[f]),p=v.useCallback(C=>{V.logEvent("Account Pay: Team Plan Seat Count Clicked",N(N({},m),C))},[m]),g=v.useRef(null);v.useEffect(()=>{var C;(C=g.current)==null||C.focus()},[g]);const h=v.useRef(null),_=v.useRef(0),x=v.useCallback(C=>{n(w=>{const k=jk(w+C,e,c);return p({prevSeats:w,currentSeats:k}),k})},[c,e,n,p]),b=v.useCallback(C=>{const T=300-C*50;return T>25?T:25},[]),y=v.useCallback(C=>{x(C),_.current=0;const w=()=>{_.current+=1,x(C);const k=b(_.current);h.current=setTimeout(w,k)};h.current=setTimeout(w,b(_.current))},[x,b]),S=v.useCallback(()=>{h.current&&(clearTimeout(h.current),h.current=null)},[]);return v.useEffect(()=>{u||c===f2&&t>c&&d(!0)},[u,c,t]),i.jsxs("div",{className:q("mb-3 flex w-full flex-col",l&&"cursor-not-allowed opacity-60"),children:[i.jsx("label",{className:q(a==null?void 0:a.label,"mb-1 flex text-base font-medium"),htmlFor:"seats",children:s!=null?s:i.jsx(P,N({},on.usersTitle))}),i.jsxs("div",{className:"relative flex items-center gap-3",children:[i.jsx("input",{ref:g,type:"number",min:e,max:c,name:"seats",value:t,disabled:l,onChange:C=>{const w=parseInt(C.target.value);n(w),p({prevSeats:t,currentSeats:w})},onBlur:()=>{let C=t;t<e&&(C=e),t>c&&(C=c),t||(C=e),C!==t&&(p({prevSeats:t,currentSeats:C}),n(C))},autoFocus:!0,tabIndex:0,className:q(a==null?void 0:a.input,"bg-token-bg-primary text-token-text-primary relative m-0 h-12 w-full appearance-none rounded-lg border border-gray-200 px-2 py-0 ps-5 text-start text-sm shadow-none ring-transparent outline-hidden focus:border-black focus:ring-black dark:border-gray-700 dark:focus:border-white dark:focus:ring-white","disabled:bg-token-main-surface-secondary disabled:text-token-text-tertiary disabled:cursor-not-allowed disabled:focus:border-gray-200 disabled:focus:ring-transparent")}),i.jsxs("div",{className:q(a==null?void 0:a.buttons,"flex gap-1.5"),children:[i.jsx(LA,{disabled:l||t<=e,onMouseDown:()=>y(-1),onMouseUp:S,onMouseLeave:S,className:a==null?void 0:a.button,type:"button",children:i.jsx(F_e,{className:q("icon-sm",t<=e&&"text-token-text-tertiary")})}),i.jsx(LA,{type:"button",disabled:l||t>=c,onMouseDown:()=>y(1),onMouseUp:S,onMouseLeave:S,className:a==null?void 0:a.button,children:i.jsx(pf,{className:"icon-sm"})})]})]}),c===f2&&u&&i.jsx("div",{className:"text-token-text-secondary mt-2 text-xs",children:i.jsx(P,G(N({},on.seatSelectorTooltipMaxLimit),{values:{maxSeats:c,link:C=>i.jsx(ko,{to:Sle,target:"_blank",className:"underline",children:C})}}))})]})}const on=we({flexiblePlanCost:{id:"teamBilling.flexiblePlan.cost",defaultMessage:"{currencyCode} {currencySign}{monthlyCost}"},summaryTitle:{id:"teamBilling.summaryTitle",defaultMessage:"Summary"},annualPlanCost:{id:"teamBilling.annualPlan.cost",defaultMessage:"{currencyCode} {currencySign}{discountedMonthlyCost} <s>{currencySign}{monthlyCost}</s>"},nameWorkspace:{id:"nameWorkspace.title",defaultMessage:"Name your workspace"},cancel:{id:"createWorkspace.cancel",defaultMessage:"Cancel"},selectTeamPlan:{id:"createWorkspace.selectTeamPlan",defaultMessage:"Select Business Plan"},selectTeamPlanModalTitle:{id:"createWorkspace.selectTeamPlanModalTitle",defaultMessage:"Select your Business plan"},continueToBillingButton:{id:"createWorkspace.continueToBillingButton",defaultMessage:"Continue to billing"},paymentErrorWarning:{id:"createWorkspace.paymentErrorWarning",defaultMessage:"The payments page encountered an error. Please try again. If the problem continues, please visit help.openai.com."},continueToPricePreview:{id:"teamBilling.continueToPricePreview",defaultMessage:"Continue"},changeEffectDate:{id:"teamBilling.changeEffectDate",defaultMessage:"This change will take effect at your next renewal on {date}"},confirmPageChangeEffectDate:{id:"teamBilling.confirmPageChangeEffectDate",defaultMessage:"Your billing schedule will change from {current_plan} to {new_plan} starting at your next renewal on {date}"},confirmChange:{id:"teamBilling.confirmChange",defaultMessage:"Confirm"},teamsCostStructure:{id:"teamBilling.teamsCostStructureNew",defaultMessage:"per user/month"},businessCostStructure:{id:"teamBilling.businessCostStructure",defaultMessage:"seat/mo"},businessAnnualPlanName:{id:"teamBilling.businessAnnualPlanName",defaultMessage:"Annual billing"},businessFlexiblePlanName:{id:"teamBilling.businessFlexiblePlanName",defaultMessage:"Monthly billing"},businessAnnualPlanCost:{id:"teamBilling.businessAnnualPlanCost",defaultMessage:"{currencyCode} {currencySign}{discountedMonthlyCost}"},businessAnnualPlanSavingsAmount:{id:"teamBilling.businessAnnualPlanSavingsAmount.v2",defaultMessage:"Youre saving {savingsAmountMonthly}/month by choosing an annual plan. Thats {savingsAmountYearly}/year."},seatsTitle:{id:"teamBilling.seatsTitle",defaultMessage:"Seats"},usersTitle:{id:"teamBilling.usersTitle",defaultMessage:"Users"},chatGptTeam:{id:"teamBilling.chatGptTeam",defaultMessage:"ChatGPT Business"},annualPlanName:{id:"teamBilling.annualPlan.nameNew",defaultMessage:"Annual"},annualPlanSavingsLabel:{id:"teamBilling.annualPlan.savingsLabel",defaultMessage:"({percent}% off)"},annualBilledAnnually:{id:"teamBilling.annualPlan.billedAnnuallyNew",defaultMessage:"Billed annually"},annualAddUsersWithRenewal:{id:"teamBilling.annualPlan.addUsersWithRenewalNew",defaultMessage:"Add and reassign users as needed"},annualMinBill:{id:"teamBilling.annualPlan.minBillNew",defaultMessage:"Minimum {minSeats} {minSeats, plural, one {user} other {users}}"},flexiblePlanName:{id:"teamBilling.flexiblePlan.nameNew",defaultMessage:"Monthly"},flexibleBilledMonthly:{id:"teamBilling.flexiblePlan.billedMonthlyNew",defaultMessage:"Billed monthly"},flexibleAddRemoveUsers:{id:"teamBilling.flexiblePlan.addRemoveUsersNew",defaultMessage:"Add or remove users as needed"},flexibleMinBill:{id:"teamBilling.flexiblePlan.minBillNew",defaultMessage:"Minimum {minSeats} {minSeats, plural, one {user} other {users}}"},allPlansTotal:{id:"teamBilling.allPlansTotal",defaultMessage:"Plan Total"},allPlansTodayTotal:{id:"teamBilling.allPlansTodayTotal",defaultMessage:"Today's total"},flexiblePlanAmountBreakdown:{id:"teamBilling.flexiblePlanAmountBreakdown",defaultMessage:"{numSeats} {numSeats, plural, one {user} other {users}}"},annualPlanAmountBreakdown:{id:"teamBilling.annualPlanAmountBreakdown",defaultMessage:"{numSeats} {numSeats, plural, one {user} other {users}} x 12 months"},breakdownAmount:{id:"teamBilling.breakdownAmount",defaultMessage:"{currencySign}{amount}/seat"},allPlansPreDiscountTotal:{id:"teamBilling.allPlansPreDiscountTotal",defaultMessage:"{currencySign}{preDiscountTotalAmount}"},planDiscountLabel:{id:"teamBilling.planDiscountLabel",defaultMessage:"Discount"},annualPlanDiscountDescription:{id:"teamBilling.annualPlanDiscountDescription",defaultMessage:"Annual (-{discountPercentage}%)"},annualPlanDiscountAmount:{id:"teamBilling.annualPlanDiscountAmount",defaultMessage:"-{currencySign}{discountAmount}"},flexiblePlanDiscountAmount:{id:"teamBilling.flexiblePlanDiscountAmount",defaultMessage:"-{currencySign}{discountAmount}"},flexiblePlanBilledMonthly:{id:"teamBilling.flexiblePlanBilledMonthly",defaultMessage:"Billed monthly starting {billDate}"},flexiblePlanBilledMonthlyToday:{id:"teamBilling.flexiblePlanBilledMonthlyToday",defaultMessage:"Billed monthly starting today"},annualPlanBilledAnnually:{id:"teamBilling.annualPlanBilledAnnually",defaultMessage:"Billed annually starting {billDate}"},annualPlanBilledAnnuallyToday:{id:"teamBilling.annualPlanBilledAnnuallyToday",defaultMessage:"Billed annually starting today"},allPlansTotalAmount:{id:"teamBilling.allPlansTotalAmount",defaultMessage:"{currencyCode} {currencySign}{totalAmount}"},discountSelectedLabel:{id:"teamBilling.discountSelectedLabel",defaultMessage:"You're saving {discountedRate}%"},discountUnselectedLabel:{id:"teamBilling.discountUnselectedLabel",defaultMessage:"Save {discountedRate}%"},welcomeOfferLabel:{id:"teamBilling.welcomeOfferLabel",defaultMessage:"Welcome Offer"},seatSelectorTooltipMaxLimit:{id:"teamBilling.seatSelectorTooltipMaxLimit",defaultMessage:"For more than {maxSeats} users, upgrade to our <link>Enterprise plan</link>."}});var uxe=(t=>(t.FLEXIBLE="month",t.ANNUAL="year",t))(uxe||{});function Urt(t,e,n){const s=tS(e,RA,X1.Month),o=tS(e,RA,X1.Year),r=Jd(t),a={type:"month",name:n?on.businessFlexiblePlanName:on.flexiblePlanName,cost:on.flexiblePlanCost,monthlyCost:s.amount,discountedMonthlyCost:s.amount,unitCost:s.amount,currencySign:r.sign,currencyCode:r.code,costStructure:n?on.businessCostStructure:on.teamsCostStructure,billingFeatures:[on.flexibleBilledMonthly,on.flexibleMinBill,on.flexibleAddRemoveUsers]},l={type:"year",name:n?on.businessAnnualPlanName:on.annualPlanName,cost:n?on.businessAnnualPlanCost:on.annualPlanCost,monthlyCost:s.amount,discountedMonthlyCost:o.amount,unitCost:o.amount*12,currencySign:r.sign,currencyCode:r.code,costStructure:n?on.businessCostStructure:on.teamsCostStructure,billingFeatures:[on.annualBilledAnnually,on.annualMinBill,on.annualAddUsersWithRenewal]};return{flexibleBillingPlan:a,annualBillingPlan:l}}const Hrt={month:{name:on.chatGptTeam,breakdown:on.flexiblePlanAmountBreakdown,discountAmount:on.flexiblePlanDiscountAmount,discountDescription:void 0,billedOnDate:on.flexiblePlanBilledMonthly,billedToday:on.flexiblePlanBilledMonthlyToday,total:on.allPlansTotalAmount},year:{name:on.chatGptTeam,breakdown:on.annualPlanAmountBreakdown,discountAmount:on.annualPlanDiscountAmount,discountDescription:on.annualPlanDiscountDescription,billedOnDate:on.annualPlanBilledAnnually,billedToday:on.annualPlanBilledAnnuallyToday,total:on.allPlansTotalAmount}},$rt=(t,e)=>Math.floor((1-e/t)*100);function Grt(){return{queryKey:["personalityTypeList"],queryFn:()=>ue.safeGet("/personality_types")}}const CF={key:"default",label:"Default",description:"Preset style and tone",footer_text:null,example_messages:null,deprecated:!1,icon_src:null,badge:"Popular"};function dxe(t,e){const n=t!=null?t:[];let s=n==null?void 0:n.find(o=>o.key===e);return(!s||!e)&&(s=n==null?void 0:n.find(o=>o.key==="default")),s||CF}const fxe=[CF],Vrt=t=>{"use forget";const e=D.c(43),{enabled:n,personalitiesList:s,onSelect:o,selectedPersonality:r}=t,[a,l]=v.useState(!1),c=s!=null?s:fxe,u=te();let d;e[0]!==s||e[1]!==r?(d=dxe(s,r),e[0]=s,e[1]=r,e[2]=d):d=e[2];const f=d.key;let m;e[3]===Symbol.for("react.memo_cache_sentinel")?(m=A=>{l(A),A&&V.logEventWithStatsig("User Context: View Personalities","chatgpt_user_context_view_personalities")},e[3]=m):m=e[3];let p;e[4]!==c.length?(p=c.length===0&&i.jsx("span",{className:"invisible col-span-full row-span-full",children:i.jsx(P,{defaultMessage:"Professional",id:"user-context-modal.personality.professional_placeholder"})}),e[4]=c.length,e[5]=p):p=e[5];let g;e[6]!==c?(g=c.map(mxe),e[6]=c,e[7]=g):g=e[7];let h;e[8]!==p||e[9]!==g?(h=i.jsxs("div",{"aria-hidden":!0,className:"invisible grid w-fit px-5 [&>*]:col-start-1 [&>*]:row-start-1",children:[p,g]}),e[8]=p,e[9]=g,e[10]=h):h=e[10];let _;e[11]!==u?(_=u.formatMessage({id:"user-context-modal.personality.select",defaultMessage:"Select personality"}),e[11]=u,e[12]=_):_=e[12];const x=!n;let b;if(e[13]!==c||e[14]!==f){let A;e[16]!==f?(A=I=>i.jsx("span",{"aria-hidden":I.key!==f,className:q("col-span-full row-span-full",I.key===f?"":"hidden"),children:I.label},I.key),e[16]=f,e[17]=A):A=e[17],b=c.map(A),e[13]=c,e[14]=f,e[15]=b}else b=e[15];let y;e[18]!==b?(y=i.jsx("div",{className:"grid [&>*]:col-start-1 [&>*]:row-start-1",children:b}),e[18]=b,e[19]=y):y=e[19];let S;e[20]===Symbol.for("react.memo_cache_sentinel")?(S=i.jsx("svg",{className:"text-muted ms-2 h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})}),e[20]=S):S=e[20];let C;e[21]!==_||e[22]!==x||e[23]!==y?(C=i.jsxs(ee.Trigger,{className:"data-[state=open]:bg-token-bg-tertiary flex h-min w-fit items-center justify-between gap-0! justify-self-end rounded-lg border px-3 py-2 text-start",id:"personality-select-trigger","aria-label":_,disabled:x,children:[y,S]}),e[21]=_,e[22]=x,e[23]=y,e[24]=C):C=e[24];let w;e[25]!==C||e[26]!==h?(w=i.jsxs("div",{className:"grid w-fit [&>*]:col-start-1 [&>*]:row-start-1",children:[h,C]}),e[25]=C,e[26]=h,e[27]=w):w=e[27];let k;e[28]!==o?(k=A=>{v.startTransition(()=>{o(A),l(!1)})},e[28]=o,e[29]=k):k=e[29];let E;if(e[30]!==c||e[31]!==f){let A;e[33]!==f?(A=I=>i.jsx(ee.RadioItem,{color:f===I.key?"selected":"default",value:I.key,label:I.label,secondary:I.description},I.key),e[33]=f,e[34]=A):A=e[34],E=c.map(A),e[30]=c,e[31]=f,e[32]=E}else E=e[32];let T;e[35]!==f||e[36]!==k||e[37]!==E?(T=i.jsx(ee.Portal,{children:i.jsx(ee.Content,{size:"auto",alignOffset:-7,align:"end",children:i.jsx(ee.RadioGroup,{value:f,onValueChange:k,children:E})})}),e[35]=f,e[36]=k,e[37]=E,e[38]=T):T=e[38];let M;return e[39]!==a||e[40]!==w||e[41]!==T?(M=i.jsxs(ee.Root,{open:a,onOpenChange:m,children:[w,T]}),e[39]=a,e[40]=w,e[41]=T,e[42]=M):M=e[42],M};function mxe(t){return i.jsx("span",{className:"invisible col-span-full row-span-full",children:t.label},t.key)}const zrt=we({free:{id:"pricingPlanConstants.free.name",defaultMessage:"Free"},plus:{id:"pricingPlanConstants.plus.name",defaultMessage:"Plus"},go:{id:"pricingPlanConstants.go.name",defaultMessage:"Go"},team:{id:"pricingPlanConstants.teams.teamPlanName",defaultMessage:"Business"},pro:{id:"pricingPlanConstants.pro.name",defaultMessage:"Pro"}});function gf(t){const{data:e}=Uc(),n=s9(e);v.useEffect(()=>{!e||n||ws.warn("Unable to resolve current account for promo eligibility",{planType:t,currentAccountId:e.currentAccountId,availableAccountIds:e.accountItems.map(({id:o})=>o)})},[e,n,t]);const s=n==null?void 0:n.getEligiblePromoCampaignId(t);return t===et.PLUS&&((n==null?void 0:n.planType)==null||n.planType!==et.FREE)?{eligible:!1}:s?{eligible:!0,campaignId:s}:{eligible:!1}}function Wrt(){return gf(et.GO).eligible}function qrt(){return gf(et.PLUS).eligible}function pxe(){return gf(et.SELF_SERVE_BUSINESS).eligible}function wF(){return gf(et.PLUS)}function gxe(){return gf(et.SELF_SERVE_BUSINESS)}function Krt(){return gf(et.PLUS)}const hxe=t=>{"use forget";var p;const e=D.c(18);let n,s,o,r,a;e[0]!==t?(p=t,{label:r,first:o,children:n,className:s}=p,a=De(p,["label","first","children","className"]),e[0]=t,e[1]=n,e[2]=s,e[3]=o,e[4]=r,e[5]=a):(n=e[1],s=e[2],o=e[3],r=e[4],a=e[5]);const l=v.useId(),c=o?"pt-(--sidebar-section-first-margin-top)":"pt-(--sidebar-section-margin-top)";let u;e[6]!==s||e[7]!==c?(u=q(c,"last:mb-5",s),e[6]=s,e[7]=c,e[8]=u):u=e[8];const d=r?l:void 0;let f;e[9]!==l||e[10]!==r?(f=r&&i.jsx(Pk,{id:l,children:r}),e[9]=l,e[10]=r,e[11]=f):f=e[11];let m;return e[12]!==n||e[13]!==a||e[14]!==u||e[15]!==d||e[16]!==f?(m=i.jsxs("aside",G(N({className:u,"aria-labelledby":d},a),{children:[f,n]})),e[12]=n,e[13]=a,e[14]=u,e[15]=d,e[16]=f,e[17]=m):m=e[17],m},Pk=t=>i.jsx(QZ,N({as:"h2"},t)),kF=t=>{"use forget";var k;const e=D.c(40);let n,s,o,r,a,l,c,u,d,f;e[0]!==t?(k=t,{children:s,label:c,badge:n,secondary:d,trailing:f,highlightTrailing:r,keyBinding:l,external:o,iconOnly:a}=k,u=De(k,["children","label","badge","secondary","trailing","highlightTrailing","keyBinding","external","iconOnly"]),e[0]=t,e[1]=n,e[2]=s,e[3]=o,e[4]=r,e[5]=a,e[6]=l,e[7]=c,e[8]=u,e[9]=d,e[10]=f):(n=e[1],s=e[2],o=e[3],r=e[4],a=e[5],l=e[6],c=e[7],u=e[8],d=e[9],f=e[10]);let m;e[11]!==l?(m=()=>l!=null&&ZZ(),e[11]=l,e[12]=m):m=e[12];const p=X(m);let g;e[13]!==o||e[14]!==l?(g=l?i.jsx(yF,{binding:l,className:"touch:hidden"}):o?i.jsx(_p,{className:"icon-sm"}):null,e[13]=o,e[14]=l,e[15]=g):g=e[15];const h=g,_="to"in u?ko:"div",x=u.size==="large"&&a&&"p-2";let b;e[16]!==x?(b=q(x),e[16]=x,e[17]=b):b=e[17];let y;e[18]!==o?(y=o?{target:"_blank",rel:"noopener noreferrer"}:null,e[18]=o,e[19]=y):y=e[19];let S;e[20]!==n||e[21]!==s||e[22]!==p||e[23]!==r||e[24]!==a||e[25]!==c||e[26]!==d||e[27]!==f||e[28]!==h?(S=a?null:{children:s,label:c,badge:n,secondary:d,trailing:f,highlightTrailing:r!=null?r:h,showHighlightTrailing:p},e[20]=n,e[21]=s,e[22]=p,e[23]=r,e[24]=a,e[25]=c,e[26]=d,e[27]=f,e[28]=h,e[29]=S):S=e[29];let C;e[30]!==u||e[31]!==_||e[32]!==b||e[33]!==y||e[34]!==S?(C=i.jsx(o9,N(N(N({as:_,className:b,"data-sidebar-item":!0,fillContainer:!0},y),S),u)),e[30]=u,e[31]=_,e[32]=b,e[33]=y,e[34]=S,e[35]=C):C=e[35];const w=C;if(a){const E=c!=null?c:s;let T;return e[36]!==w||e[37]!==E||e[38]!==h?(T=i.jsx(St,{label:E,secondaryLabel:h,side:"right",labelOrientation:"horizontal",triggerAs:"div",children:w}),e[36]=w,e[37]=E,e[38]=h,e[39]=T):T=e[39],T}return w},zs=kF,kc=kF,_xe=re(me,"8ed617",20,20),EF=je(()=>Me(()=>import("./cf5af22f-o10ev2x7wsumpww2.js"),__vite__mapDeps([188,1,2,3])).then(t=>t.default));function Yrt(){"use forget";const t=D.c(7),e=Je("2888142241").get("is_feedback_tool_shown",!1),n=mo();let s;t[0]!==n?(s=()=>n==null?void 0:n.serverId$(),t[0]=n,t[1]=s):s=t[1];const o=X(s),r=Et();if(!r)return null;const l=r.isEnterprise()||r.isEdu();if(!e||l)return null;let c;t[2]!==o?(c=()=>{V.logEventWithStatsig("Feedback: Report Bug Button Clicked","chatgpt_feedback_report_bug_click",{location:"help-menu"}),Fe.count(Ue.DEFAULT,"chatgpt_feedback_report_bug_click",{location:"help-menu"}),requestAnimationFrame(()=>{rt(EF,{entryPointElementId:"report-bug-menu-item",conversationId:o})})},t[2]=o,t[3]=c):c=t[3];let u;t[4]===Symbol.for("react.memo_cache_sentinel")?(u=i.jsx(P,{id:"feedback.reportBug",defaultMessage:"Report Bug"}),t[4]=u):u=t[4];let d;return t[5]!==c?(d=i.jsx(ee.Item,{id:"report-bug-menu-item",icon:_xe,onPointerOver:xxe,onClick:c,children:u}),t[5]=c,t[6]=d):d=t[6],d}function xxe(){return EF.prefetch()}const Rk=re(me,"4a920d",20,20),yxe=re(me,"c6a95f",20,20),bxe="https://help.openai.com/en/collections/3742473-chatgpt",vxe="https://help.openai.com/en/articles/9982051",Sxe="https://help.openai.com/en/articles/6825453-chatgpt-release-notes",Cxe="https://help.openai.com/en/articles/10003026-windows-app-release-notes";function wxe(){return Uo?vxe:bxe}function kxe(){return Uo?Cxe:Sxe}function Zrt(){return i.jsxs(i.Fragment,{children:[i.jsx(ee.LinkItem,{icon:_F,external:!0,to:wxe(),onClick:()=>{V.logEvent("Click FAQ")},children:i.jsx(P,{id:"thread.helpCenter",defaultMessage:"Help center"})}),i.jsx(ee.LinkItem,{icon:Rk,external:!0,to:kxe(),children:i.jsx(P,{id:"thread.releaseNotes",defaultMessage:"Release notes"})}),i.jsx(ee.LinkItem,{icon:yxe,external:!0,to:"https://openai.com/policies",children:i.jsx(P,{id:"thread.termsAndPolicies",defaultMessage:"Terms & policies"})})]})}const Exe=re(me,"715504",20,20);var TF=(t=>(t.Header="Header",t.HeaderTop="HeaderTop",t.HeaderBottom="HeaderBottom",t))(TF||{}),Txe=(t=>(t.Box="Box",t.PromptTextareaAction="PromptTextareaAction",t.BannerTermsDisclaimer="BannerTermsDisclaimer",t.NewUserBannerTermsDisclaimer="NewUserBannerTermsDisclaimer",t.BannerSignup="BannerSignup",t.BannersRateLimit="BannersRateLimit",t.EnablePreciseLocation="EnablePreciseLocation",t.BannersBeaconUI="BannersBeaconUI",t.BannerSidekickAnnouncement="BannerSidekickAnnouncement",t.BannerMemoryFull="BannerMemoryFull",t.BannerMemoryAlmostFull="BannerMemoryAlmostFull",t.ParagenControls="ParagenControls",t.AdvancedVoiceOnMobileAnnouncement="AdvancedVoiceOnMobileAnnouncement",t.SearchBrowserExtensionAnnouncement="SearchBrowserExtensionAnnouncement",t.SearchBrowserExtensionReactiveAnnouncement="SearchBrowserExtensionReactiveAnnouncement",t.MoonshineAnnouncement="MoonshineAnnouncement",t.CustomizeChatGPTAnnouncement="CustomizeChatGPTAnnouncement",t.ProjectConversationTaskNoFileAccess="ProjectConversationTaskNoFileAccess",t.JawboneAnnouncement="JawboneAnnouncement",t.JawboneMaxActiveAnnouncement="JawboneMaxActiveAnnouncement",t.PromoRedemptionAnnouncement="PromoRedemptionAnnouncement",t.OperatorAnnouncement="OperatorAnnouncement",t.BannerPlusUpsell="BannerPlusUpsell",t.PlusFreeTrialHomepageAnnouncementBanner="PlusFreeTrialHomepageAnnouncementBanner",t.ContextualAnswersAdminUpsell="ContextualAnswersAdminUpsell",t.ContextualAnswersUserUpsell="ContextualAnswersUserUpsell",t.ReferrerRedemptionAvailableAnnouncement="ReferrerRedemptionAvailableAnnouncement",t.RefereeRedemptionAvailableAnnouncement="RefereeRedemptionAvailableAnnouncement",t.ReferralProgramUpsellAnnouncement="ReferralProgramUpsellAnnouncement",t.TatertotIntakeFormAnnouncement="TatertotIntakeFormAnnouncement",t.StudentsUpsellAnnouncement="StudentsUpsellAnnouncement",t.TeamSeatsPromoAnnouncement="TeamSeatsPromoAnnouncement",t.ModelDeprecationBanner="ModelDeprecationBanner",t.TeamsContextualAnswersUpsell="TeamsContextualAnswersUpsell",t.LanguageUpsellBanner="LanguageUpsellBanner",t.GoldenHourAnnouncementBanner="GoldenHourAnnouncementBanner",t.StarterPrompts="StarterPrompts",t.IntegratedVoiceModeNuxBanner="IntegratedVoiceModeNuxBanner",t.ImageGenV2Banner="ImageGenV2Banner",t.PulseAnnouncementBanner="PulseAnnouncementBanner",t.PulseTasksAnnouncementBanner="PulseTasksAnnouncementBanner",t.CocoonAnnouncementBanner="CocoonAnnouncementBanner",t))(Txe||{}),Mxe=(t=>(t.DallePromptControls="DallePromptControls",t.ShoppingPromptControls="ShoppingPromptControls",t))(Mxe||{});const DA={contentAreas:{Header:{dimensions:null,contentId:null},HeaderTop:{dimensions:null,contentId:null},HeaderBottom:{dimensions:null,contentId:null}},sharedProps:null};function Axe(){const t=tn(xp(ls(()=>DA)));function e(n,s){t.setState(o=>{o.contentAreas[n].dimensions=s})}return{reset:()=>t.setState(DA),useContentAreaId(n){return t(s=>s.contentAreas[n].contentId)},useHasAnnouncementInHeader(){const n=t(s=>s.contentAreas.HeaderTop.contentId);return n==="AdvancedVoiceOnMobileAnnouncement"||n==="BannerSidekickAnnouncement"},useContentAreaApi(n){const s=v.useCallback(r=>(r&&Fe.count(Ue.DEFAULT,"prompt_textarea.content_area_set_header",{content_id:r}),t.setState(a=>{a.contentAreas[n].contentId=r})),[n]),o=v.useCallback(()=>{t.setState(r=>{r.contentAreas[n].contentId=null})},[n]);return{set:s,remove:o}},useContentAreaDimensions(n,s){return t(o=>s(o.contentAreas[n].dimensions))},useContentAreaResizeObserver(n,s){v.useEffect(()=>{if(s.current){e(n,s.current.getBoundingClientRect());const o=new ResizeObserver(r=>{for(const a of r)e(n,a.contentRect)});return o.observe(s.current),()=>{o.disconnect(),e(n,null)}}},[s,n])},useIsHeaderContentAreaPopulated(){return t(n=>!!n.contentAreas.HeaderTop.contentId||!!n.contentAreas.HeaderBottom.contentId)},useSharedProps(n){return t(s=>n?n(s.sharedProps):s.sharedProps)},getSharedProps(){return t.getState().sharedProps},useSetSharedProps(){return v.useCallback(n=>{t.setState(s=>{s.sharedProps=n})},[])}}}const MF=v.createContext(null);function Qrt(t){"use forget";const e=D.c(3),{children:n}=t;let s;e[0]===Symbol.for("react.memo_cache_sentinel")?(s={store:Axe()},e[0]=s):s=e[0];let o;return e[1]!==n?(o=i.jsx(MF.Provider,{value:s,children:n}),e[1]=n,e[2]=o):o=e[2],o}function Ok(t){"use forget";const e=t===void 0?!0:t,n=v.useContext(MF);if(!n&&e)throw new Error("usePromptTextareaContext must be used within a PromptTextareaProvider");return n}var Lk="Popover",[AF,Nxe]=Pc(Lk,[G0]),ig=G0(),[Ixe,El]=AF(Lk),Dk=t=>{const{__scopePopover:e,children:n,open:s,defaultOpen:o,onOpenChange:r,modal:a=!1}=t,l=ig(e),c=v.useRef(null),[u,d]=v.useState(!1),[f=!1,m]=ld({prop:s,defaultProp:o,onChange:r});return i.jsx(sR,G(N({},l),{children:i.jsx(Ixe,{scope:e,contentId:V0(),triggerRef:c,open:f,onOpenChange:m,onOpenToggle:v.useCallback(()=>m(p=>!p),[m]),hasCustomAnchor:u,onCustomAnchorAdd:v.useCallback(()=>d(!0),[]),onCustomAnchorRemove:v.useCallback(()=>d(!1),[]),modal:a,children:n})}))};Dk.displayName=Lk;var NF="PopoverAnchor",Bk=v.forwardRef((t,e)=>{const c=t,{__scopePopover:n}=c,s=De(c,["__scopePopover"]),o=El(NF,n),r=ig(n),{onCustomAnchorAdd:a,onCustomAnchorRemove:l}=o;return v.useEffect(()=>(a(),()=>l()),[a,l]),i.jsx(PC,G(N(N({},r),s),{ref:e}))});Bk.displayName=NF;var IF="PopoverTrigger",Fk=v.forwardRef((t,e)=>{const c=t,{__scopePopover:n}=c,s=De(c,["__scopePopover"]),o=El(IF,n),r=ig(n),a=Qn(e,o.triggerRef),l=i.jsx(bn.button,G(N({type:"button","aria-haspopup":"dialog","aria-expanded":o.open,"aria-controls":o.contentId,"data-state":RF(o.open)},s),{ref:a,onClick:Gt(t.onClick,o.onOpenToggle)}));return o.hasCustomAnchor?l:i.jsx(PC,G(N({asChild:!0},r),{children:l}))});Fk.displayName=IF;var Uk="PopoverPortal",[jxe,Pxe]=AF(Uk,{forceMount:void 0}),Hk=t=>{const{__scopePopover:e,forceMount:n,children:s,container:o}=t,r=El(Uk,e);return i.jsx(jxe,{scope:e,forceMount:n,children:i.jsx(H0,{present:n||r.open,children:i.jsx(wC,{asChild:!0,container:o,children:s})})})};Hk.displayName=Uk;var Ed="PopoverContent",$k=v.forwardRef((t,e)=>{const n=Pxe(Ed,t.__scopePopover),a=t,{forceMount:s=n.forceMount}=a,o=De(a,["forceMount"]),r=El(Ed,t.__scopePopover);return i.jsx(H0,{present:s||r.open,children:r.modal?i.jsx(Rxe,G(N({},o),{ref:e})):i.jsx(Oxe,G(N({},o),{ref:e}))})});$k.displayName=Ed;var Rxe=v.forwardRef((t,e)=>{const n=El(Ed,t.__scopePopover),s=v.useRef(null),o=Qn(e,s),r=v.useRef(!1);return v.useEffect(()=>{const a=s.current;if(a)return oR(a)},[]),i.jsx(aR,{as:iR,allowPinchZoom:!0,children:i.jsx(jF,G(N({},t),{ref:o,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Gt(t.onCloseAutoFocus,a=>{var l;a.preventDefault(),r.current||(l=n.triggerRef.current)==null||l.focus()}),onPointerDownOutside:Gt(t.onPointerDownOutside,a=>{const l=a.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,u=l.button===2||c;r.current=u},{checkForDefaultPrevented:!1}),onFocusOutside:Gt(t.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1})}))})}),Oxe=v.forwardRef((t,e)=>{const n=El(Ed,t.__scopePopover),s=v.useRef(!1),o=v.useRef(!1);return i.jsx(jF,G(N({},t),{ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:r=>{var a,l;(a=t.onCloseAutoFocus)==null||a.call(t,r),r.defaultPrevented||(s.current||(l=n.triggerRef.current)==null||l.focus(),r.preventDefault()),s.current=!1,o.current=!1},onInteractOutside:r=>{var c,u;(c=t.onInteractOutside)==null||c.call(t,r),r.defaultPrevented||(s.current=!0,r.detail.originalEvent.type==="pointerdown"&&(o.current=!0));const a=r.target;((u=n.triggerRef.current)==null?void 0:u.contains(a))&&r.preventDefault(),r.detail.originalEvent.type==="focusin"&&o.current&&r.preventDefault()}}))}),jF=v.forwardRef((t,e)=>{const g=t,{__scopePopover:n,trapFocus:s,onOpenAutoFocus:o,onCloseAutoFocus:r,disableOutsidePointerEvents:a,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:u,onInteractOutside:d}=g,f=De(g,["__scopePopover","trapFocus","onOpenAutoFocus","onCloseAutoFocus","disableOutsidePointerEvents","onEscapeKeyDown","onPointerDownOutside","onFocusOutside","onInteractOutside"]),m=El(Ed,n),p=ig(n);return rR(),i.jsx(lR,{asChild:!0,loop:!0,trapped:s,onMountAutoFocus:o,onUnmountAutoFocus:r,children:i.jsx(z0,{asChild:!0,disableOutsidePointerEvents:a,onInteractOutside:d,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:u,onDismiss:()=>m.onOpenChange(!1),children:i.jsx(cR,G(N(N({"data-state":RF(m.open),role:"dialog",id:m.contentId},p),f),{ref:e,style:G(N({},f.style),{"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"})}))})})}),PF="PopoverClose",Gk=v.forwardRef((t,e)=>{const r=t,{__scopePopover:n}=r,s=De(r,["__scopePopover"]),o=El(PF,n);return i.jsx(bn.button,G(N({type:"button"},s),{ref:e,onClick:Gt(t.onClick,()=>o.onOpenChange(!1))}))});Gk.displayName=PF;var Lxe="PopoverArrow",Vk=v.forwardRef((t,e)=>{const r=t,{__scopePopover:n}=r,s=De(r,["__scopePopover"]),o=ig(n);return i.jsx(uR,G(N(N({},o),s),{ref:e}))});Vk.displayName=Lxe;function RF(t){return t?"open":"closed"}var Tl=Dk,OF=Bk,ba=Fk,Ml=Hk,Al=$k,LF=Gk,DF=Vk;const Jrt=Object.freeze(Object.defineProperty({__proto__:null,Anchor:OF,Arrow:DF,Close:LF,Content:Al,Popover:Dk,PopoverAnchor:Bk,PopoverArrow:Vk,PopoverClose:Gk,PopoverContent:$k,PopoverPortal:Hk,PopoverTrigger:Fk,Portal:Ml,Root:Tl,Trigger:ba,createPopoverScope:Nxe},Symbol.toStringTag,{value:"Module"}));function hf(t){var k;const[e,n]=v.useState(!1),w=t,{announcementKey:s,onDismiss:o,children:r,childrenWrapperClassName:a}=w,l=De(w,["announcementKey","onDismiss","children","childrenWrapperClassName"]),{show:c}=l,d=Je("717266490").get("one_announcement_tooltip_per_session",!1),f=gd(E=>!!E.displayAnnouncementTooltip),m=gd(E=>!d||E.displayAnnouncementTooltip===s),p=te(),g=JZ(),h=XZ();let _=!1;const x=Ok(!1);_=((k=x==null?void 0:x.store.useContentAreaId(TF.HeaderTop))!=null?k:null)!==null;const S=c&&!(g||_||h);if(v.useEffect(()=>{d&&S&&e&&As.showAnnouncementTooltipExclusively(s)},[e,d,s,S]),v.useEffect(()=>{S&&(!d||m)&&(ft.logEvent("announcement_tooltip_shown",null,{announcement_key:s}),V.logEvent("Announcement Tooltip Shown",{announcement_key:s}),V.logUpsellOrModalEvent(qn,{eventId:"".concat(s,"_tooltip_shown"),type:Kn.UPSELL_OR_MODAL_TYPE_NUX_TOOLTIP}))},[S,m,s,d]),f&&!m)return r;const C=()=>{(!d||m)&&(o(),ft.logEvent("announcement_tooltip_dismissed",null,{announcement_key:s}),V.logEvent("Announcement Tooltip Dismissed",{announcement_key:s}))};return i.jsx(Dxe,G(N({},l),{show:S,onDismiss:C,renderAsInvisible:d&&!f,onTooltipChildrenBecomeVisible:()=>{d&&n(!0)},children:i.jsx("div",{"aria-label":p.formatMessage({id:"announcementTooltip.ariaLabel",defaultMessage:"Announcements"}),className:q("w-fit",a),children:r})}))}function Dxe({align:t,arrowPadding:e,alignOffset:n,show:s,onDismiss:o,children:r,title:a,side:l,sideOffset:c,theme:u="default",badge:d="new",contentAlign:f="start",description:m,className:p,collisionPadding:g,onTooltipChildrenBecomeVisible:h,renderAsInvisible:_=!1,dismissOnOutsideClick:x=!1,dismissOnTriggerClick:b=!0,contentClassName:y}){var E;const S=v.useRef(null),[C,w]=v.useState(!1);v.useEffect(()=>{if(!s)return;const T=S.current;if(!T)return;const M=new IntersectionObserver(A=>{w(A[A.length-1].intersectionRatio===1)},{threshold:1});return M.observe(T),()=>{M.unobserve(T)}},[s]);const k=T=>{s&&T&&T.getBoundingClientRect().width>0&&T.getBoundingClientRect().height>0&&(h==null||h()),S.current=T};return i.jsxs(Tl,{open:s&&C,onOpenChange:T=>{T||o()},children:[i.jsx(ba,{asChild:!0,onPointerDown:()=>{b&&o()},ref:k,children:r}),i.jsx(Ml,{container:(E=S.current)==null?void 0:E.ownerDocument.body,children:i.jsx(eQ,{children:i.jsxs(Al,{arrowPadding:e,alignOffset:n,align:t,collisionPadding:g,side:l,sideOffset:c,onOpenAutoFocus:T=>{T.preventDefault()},onCloseAutoFocus:T=>{T.preventDefault()},onInteractOutside:T=>{var A;T.target instanceof Element&&((A=S.current)==null?void 0:A.contains(T.target))||T.type==="dismissableLayer.focusOutside"?T.preventDefault():x?o():T.preventDefault()},updatePositionStrategy:"always",className:q("animate-slideLeftAndFade relative z-30 rounded-xl p-4 text-sm shadow-sm select-none",u==="default"?"bg-gray-900 text-white dark:bg-gray-50 dark:text-gray-700":"bg-blue-400 text-white",_&&"invisible",y),children:[i.jsxs("div",{className:q("flex max-w-xs flex-col gap-1",p),children:[i.jsxs("div",{className:"mb-0.5 flex gap-2",children:[d==="new"?i.jsx("span",{className:q("self-center rounded-sm px-1.5 py-0.5 text-[10px] leading-normal font-semibold uppercase",u==="default"?"bg-token-main-surface-primary text-token-main-surface-primary-inverse":"bg-white text-blue-400"),children:i.jsx(P,N({},BA.new))}):d==="beta"&&i.jsx("span",{className:"rounded-full bg-blue-100 px-1.5 text-[10px] font-semibold text-blue-600",children:i.jsx(P,N({},BA.beta))}),i.jsx("div",{className:q("grow font-semibold",f&&"text-".concat(f)),children:a}),i.jsx(LF,{className:"-m-1 p-1 leading-[0] opacity-70 transition hover:opacity-100","data-testid":"announcement-tooltip-close-btn",children:i.jsx(Om,{className:"icon-sm"})})]}),m!==void 0&&i.jsx("div",{className:q(f&&"text-".concat(f)),children:m})]}),i.jsx(DF,{asChild:!0,children:i.jsx("div",{className:q("relative top-[-6px] h-3 w-3 rotate-45 transform rounded-ee-sm",u==="default"?"bg-gray-900 dark:bg-gray-50":"bg-blue-400")})})]})})})]})}const BA=we({new:{id:"announcementTooltip.new",defaultMessage:"New"},beta:{id:"announcementTooltip.beta",defaultMessage:"Beta"}}),Ec=je(()=>Me(()=>import("./4f4d4e37-l9cbf37j73lj8j8k.js"),__vite__mapDeps([189,1,2,3,190,141,142,22,18,19,191,192,193,194])).then(t=>t.CreateOrEditProjectModal)),Bxe=Object.freeze(Object.defineProperty({__proto__:null,CreateOrEditProjectModal:Ec},Symbol.toStringTag,{value:"Module"})),BF=je(()=>Me(()=>import("./1a1c4549-lqh97hcrfoxusel2.js"),__vite__mapDeps([195,1,2,3,196,163,197,198,199,113,200,201,78,202])).then(t=>t.ShareProjectModal));function Xrt(t){"use forget";const e=D.c(4),n=X(r9);let s;e[0]===Symbol.for("react.memo_cache_sentinel")?(s=Rc(),e[0]=s):s=e[0];const{country:o}=s,r=o===L1,a=(n==null?void 0:n.is_adult)===!0;let l;e[1]!==t?(l=l_(t),e[1]=t,e[2]=l):l=e[2];const c=l;let u;return e[3]===Symbol.for("react.memo_cache_sentinel")?(u=xe("3932596954"),e[3]=u):u=e[3],c&&r&&a&&u}const Fxe=re(me,"0623c1",20,20),Uxe=re(me,"caa797",20,20),Hxe=Object.freeze(Object.defineProperty({__proto__:null,default:Uxe},Symbol.toStringTag,{value:"Module"})),eat=t=>v.createElement("svg",N({width:20,height:20,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),v.createElement("path",{d:"M7.64235 3.33301C6.34367 3.33301 5.69434 3.33301 5.19099 3.56839C4.66027 3.81657 4.23356 4.24327 3.98538 4.774C3.75 5.27735 3.75 5.92668 3.75 7.22536V13.083C3.75 14.4831 3.75 15.1832 4.02248 15.718C4.26217 16.1884 4.64462 16.5708 5.11502 16.8105C5.6498 17.083 6.34987 17.083 7.75 17.083H12.25C13.6501 17.083 14.3502 17.083 14.885 16.8105C15.3554 16.5708 15.7378 16.1884 15.9775 15.718C16.25 15.1832 16.25 14.4831 16.25 13.083V7.22517C16.25 5.92667 16.25 5.27742 16.0147 4.77413C15.7665 4.2433 15.3397 3.81652 14.8089 3.56833C14.3056 3.33301 13.6563 3.33301 12.3578 3.33301",stroke:"currentColor",strokeWidth:1.33,strokeLinejoin:"round"}),v.createElement("path",{d:"M7.91374 9.16699H12.0853M7.91211 12.5003H10.0003",stroke:"currentColor",strokeWidth:1.33,strokeLinecap:"round"}),v.createElement("path",{d:"M7.08398 3.91699C7.08398 2.67435 8.09134 1.66699 9.33398 1.66699H10.6673C11.91 1.66699 12.9173 2.67435 12.9173 3.91699C12.9173 4.74542 12.2457 5.41699 11.4173 5.41699H8.58399C7.75556 5.41699 7.08398 4.74542 7.08398 3.91699Z",stroke:"currentColor",strokeWidth:1.33})),tat=t=>v.createElement("svg",N({width:20,height:20,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),v.createElement("path",{d:"M7.4974 17.0832H6.66406C5.28335 17.0832 4.16406 15.9639 4.16406 14.5832V5.41651C4.16406 4.03579 5.28335 2.9165 6.66406 2.9165H14.7474C15.3457 2.9165 15.8307 3.40153 15.8307 3.99984V8.33317",stroke:"currentColor",strokeWidth:1.33,strokeLinecap:"round",strokeLinejoin:"round"}),v.createElement("path",{d:"M8.33008 3.3335V9.16683",stroke:"currentColor",strokeWidth:1.33,strokeLinecap:"round",strokeLinejoin:"round"}),v.createElement("path",{d:"M13.4922 17.6256C16.3271 16.0826 17.0375 14.2382 16.498 12.9318C16.2368 12.2993 15.6904 11.8499 15.0507 11.7114C14.4875 11.5894 13.8704 11.712 13.3314 12.1284C12.7923 11.712 12.1753 11.5894 11.612 11.7114C10.9724 11.8499 10.426 12.2993 10.1648 12.9318C9.62526 14.2382 10.3357 16.0826 13.1706 17.6256C13.2708 17.6801 13.392 17.6801 13.4922 17.6256Z",stroke:"currentColor",strokeWidth:1.33,strokeLinejoin:"round"})),nat=we({connectTitle:{id:"potion.onboardingCards.medicalRecordsConnectTitle",defaultMessage:"Connect your medical records"},connectPrompt:{id:"potion.onboardingCards.medicalRecordsConnectPrompt",defaultMessage:"Connect my medical records"},connectDropdownLabel:{id:"snorlax.header.actions.connect-medical-records",defaultMessage:"Connect medical records"}}),$xe=je(()=>Me(()=>import("./01da2313-blx8uxwbonp9kpyf.js"),__vite__mapDeps([203,1,2,3])).then(t=>t.ProjectLeaveModal)),sat=je(()=>Me(()=>import("./81b714ea-iwltot0dag9omt09.js"),__vite__mapDeps([204,1,2,3])).then(t=>t.ProjectReportModal));function oat(){const t=jn();return FF(t.pathname)}function Gxe(t){const n=new URL("http://example.com".concat(t)).pathname.match(/\/g\/(g-p-[\w\d-]+)/);if(n)return n[1]}function Vxe(t){const e=t.split("-");return e.length>1&&e[0]==="g"?(e==null?void 0:e[1])==="p"?"g-p-".concat(e[2]):"g-".concat(e[1]):e[0]}function FF(t){const e=Gxe(t);if(e)return Vxe(e)}const rat=re(me,"984817",20,20,!0),aat=re(me,"38e54b",20,20,!0),iat=re(me,"92c0d7",20,20),zxe=re(me,"dcac0b",20,20);function Wxe(t){"use forget";const e=D.c(4),{date:n,short:s}=t,o=te();let r;if(e[0]!==n||e[1]!==o||e[2]!==s){r=Symbol.for("react.early_return_sentinel");e:{const a=n instanceof Date?n:new Date(typeof n=="number"?n*1e3:n),l=Ho(a,new Date);if(l<4&&l>-4){const c=o.formatRelativeTime(l,"day",{numeric:"auto"});r=c.charAt(0).toUpperCase()+c.slice(1);break e}else{r=o.formatDate(a,{year:"numeric",month:s?"short":"long",day:"numeric"});break e}}e[0]=n,e[1]=o,e[2]=s,e[3]=r}else r=e[3];if(r!==Symbol.for("react.early_return_sentinel"))return r}const qxe="OeMrba_disabled",Kxe="OeMrba_label",Yxe="OeMrba_wrapper",m2={disabled:qxe,label:Kxe,wrapper:Yxe};function Zxe(u){var d=u,{className:t,icon:e,label:n,onClick:s,style:o,tabIndex:r=0,ref:a,disabled:l}=d,c=De(d,["className","icon","label","onClick","style","tabIndex","ref","disabled"]);return i.jsx("label",{"aria-label":n,className:q(t,m2.wrapper,l&&m2.disabled),style:o,tabIndex:-1,children:i.jsx("button",G(N({className:q(m2.label,l&&"opacity-50"),onClick:s,tabIndex:r,ref:a,type:"button",disabled:l},c),{children:e}))})}const Qxe={type:"spring",bounce:.1,duration:.3},lat={type:"spring",bounce:.1,duration:.24},UF={duration:1e-14},HF=je(()=>Me(()=>import("./52ac3d16-nfpv5v31btj1geos.js"),__vite__mapDeps([205,1,2,3,148,149,206,111,197,198,199,113,200,207,208])).then(t=>t.AdminInviteModal)),$F=Object.freeze(Object.defineProperty({__proto__:null,AdminInviteModal:HF},Symbol.toStringTag,{value:"Module"}));function Jxe(){const{data:t}=Uc();return mt()&&!!t&&!n3(t)}const cat=re(me,"836f7a",20,20,!0),lg=re(me,"00b19a",20,20),Jh=we({allowH17180rActivity:{id:"G79Ih9",defaultMessage:"Allow proactive activity"},allowH17180rGmailDesc:{id:"HzRL3y",defaultMessage:"Let ChatGPT proactively read Gmail and give you helpful insights. <link>Learn more</link>"},allowH17180rGoogleCalendarDesc:{id:"ziIyKz",defaultMessage:"Let ChatGPT proactively read Google Calendar and give you helpful insights. <link>Learn more</link>"},allowH17180rGoogleContactsDesc:{id:"1hp0Yi",defaultMessage:"Let ChatGPT proactively read Google Contacts and give you helpful insights. <link>Learn more</link>"}}),e0={[un[Te.GMAIL_CONNECTOR]]:Ft.H17180rGmail,[un[Te.GCAL_CONNECTOR]]:Ft.H17180rGoogleCalendar,[un[Te.GOOGLE_CONTACTS_CONNECTOR]]:Ft.H17180rGoogleContacts},Xxe=new Set(Object.keys(e0));function eye(t){return!!(xe("3304830717")&&t&&Xxe.has(t))}function tye(t){switch(t){case un[Te.GMAIL_CONNECTOR]:return Jh.allowH17180rGmailDesc;case un[Te.GCAL_CONNECTOR]:return Jh.allowH17180rGoogleCalendarDesc;case un[Te.GOOGLE_CONTACTS_CONNECTOR]:return Jh.allowH17180rGoogleContactsDesc;default:return}}function uat({connectorId:t,connectorName:e}){var p,g;const n=te(),s=eye(t),o=t!=null?e0[t]:void 0,{data:r,isLoading:a}=Ld(),l=o&&(g=(p=r==null?void 0:r.settings)==null?void 0:p[o])!=null?g:void 0,{mutate:c,isPending:u}=pl(!0),d=l!=null?l:!0,f=v.useCallback(()=>{o&&c({setting:o,value:!d})},[c,o,d]);if(!s||!o)return null;const m=tye(t);return m?i.jsx(hr,{children:i.jsx(Wi,{label:n.formatMessage(Jh.allowH17180rActivity,{connectorName:e}),description:i.jsx(P,G(N({},m),{values:{connectorName:e,link:h=>i.jsx(Fs,{href:"https://help.openai.com/en/articles/11487775-connectors-in-chatgpt",className:"underline",children:h})}})),enabled:!!d,isLoading:a||u,onChange:f})}):null}function lo(t,e){V.logStructuredEvent(tQ,N({type:t},e?{connectorInfo:e}:{}))}function nye(t){if(t==="hero"){lo(ao.CHATGPT_PULSE_ONBOARDING_EVENT_TYPE_HERO_SCREEN_SHOWN);return}if(t==="interests"){lo(ao.CHATGPT_PULSE_ONBOARDING_EVENT_TYPE_INTEREST_SCREEN_SHOWN);return}lo(ao.CHATGPT_PULSE_ONBOARDING_EVENT_TYPE_CONNECTOR_SCREEN_SHOWN)}function FA(t){lo(t==="hero"?ao.CHATGPT_PULSE_ONBOARDING_EVENT_TYPE_HERO_SCREEN_CLOSED:t==="interests"?ao.CHATGPT_PULSE_ONBOARDING_EVENT_TYPE_INTEREST_SCREEN_CLOSED:ao.CHATGPT_PULSE_ONBOARDING_EVENT_TYPE_CONNECTOR_SCREEN_CLOSED)}function sye(){lo(ao.CHATGPT_PULSE_ONBOARDING_EVENT_TYPE_HERO_SCREEN_GET_STARTED_CLICKED)}function oye(){lo(ao.CHATGPT_PULSE_ONBOARDING_EVENT_TYPE_INTEREST_SCREEN_NEXT_CLICKED)}function rye(){lo(ao.CHATGPT_PULSE_ONBOARDING_EVENT_TYPE_INTEREST_SCREEN_DONE_CLICKED)}function aye(){lo(ao.CHATGPT_PULSE_ONBOARDING_EVENT_TYPE_INTEREST_SCREEN_ITEM_TAPPED)}function iye(){lo(ao.CHATGPT_PULSE_ONBOARDING_EVENT_TYPE_CONNECTOR_SCREEN_SKIP_CLICKED)}function lye(){lo(ao.CHATGPT_PULSE_ONBOARDING_EVENT_TYPE_CONNECTOR_SCREEN_CONNECT_CLICKED)}function UA(t){lo(ao.CHATGPT_PULSE_ONBOARDING_EVENT_TYPE_CONNECTOR_SCREEN_CONNECT_SUCCESS,t)}function dat(){lo(ao.CHATGPT_PULSE_ONBOARDING_EVENT_TYPE_LOADING_SCREEN_NOTIFICATION_SETTINGS_CLICKED)}function cye(t){"use forget";const e=D.c(3),{onClose:n,onBack:s,backAriaLabel:o,closeAriaLabel:r,showBack:a,showClose:l,buttonBackgroundClassName:c}=t,u=a===void 0?!1:a,d=l===void 0?!0:l,f=c===void 0?"!bg-white":c;let m;Yo()?m=q("pointer-events-auto flex h-8 w-8 items-center justify-center rounded-full transition focus:outline-hidden","text-token-text-inverted"):m=q("pointer-events-auto flex h-8 w-8 items-center justify-center rounded-full transition focus:outline-hidden","text-token-text-primary");const g="pointer-events-none absolute inset-x-0 top-0 z-20 flex items-start justify-between px-9 pt-9",h=u?i.jsx("button",{type:"button",onClick:()=>s==null?void 0:s(),"aria-label":o,className:q(m,f),disabled:!s,children:i.jsx(K_,{"aria-hidden":!0})}):i.jsx("span",{className:"h-8 w-8"}),_=d?i.jsx("button",{type:"button",onClick:n,"aria-label":r,className:q(m,f),children:i.jsx(ms,{"aria-hidden":!0})}):i.jsx("span",{className:"h-8 w-8"});let x;return e[0]!==h||e[1]!==_?(x=i.jsxs("div",{className:g,children:[h,_]}),e[0]=h,e[1]=_,e[2]=x):x=e[2],x}const uye=re(me,"304883",20,20,!0),dye=3e3,fye=[{opacity:1,scale:1,translateY:0,zIndex:30},{opacity:1,scale:.94,translateY:18,zIndex:20}];function GF(t){"use forget";const e=D.c(12),{cards:n}=t,s=n.length,[o,r]=v.useState(0);let a;e[0]===Symbol.for("react.memo_cache_sentinel")?(a=()=>{r(0)},e[0]=a):a=e[0];let l;e[1]!==s?(l=[s],e[1]=s,e[2]=l):l=e[2],v.useEffect(a,l);let c,u;if(e[3]!==s?(c=()=>{if(s<=1)return;const p=window.setInterval(()=>{r(g=>(g+1)%s)},dye);return()=>{window.clearInterval(p)}},u=[s],e[3]=s,e[4]=c,e[5]=u):(c=e[4],u=e[5]),v.useEffect(c,u),!s)return null;let d;e[6]!==o||e[7]!==s?(d=s===1?[o]:[o,(o+1)%s],e[6]=o,e[7]=s,e[8]=d):d=e[8];const f=d;let m;return e[9]!==n||e[10]!==f?(m=i.jsx("div",{className:"flex flex-col items-center justify-center gap-12",children:i.jsx("div",{className:"relative h-[160px] w-[393px]",children:f.map((p,g)=>{const h=fye[g],_=n[p];return i.jsx("div",{className:"absolute inset-0",style:{opacity:h.opacity,transform:"translateY(".concat(h.translateY,"px) scale(").concat(h.scale,")"),transformOrigin:"center",transition:"transform 800ms ease, opacity 800ms ease",zIndex:h.zIndex,pointerEvents:g===0?"auto":"none"},"aria-hidden":g!==0,children:i.jsx("div",{className:"h-full w-full",children:_})},p)})})}),e[9]=n,e[10]=f,e[11]=m):m=e[11],m}const Cm=we({stepIndicator:{id:"pulse.onboarding.modal.connector.stepIndicator",defaultMessage:"Step {current} of {total}"},connectorsTitle:{id:"pulse.onboarding.modal.connector.title",defaultMessage:"Give Pulse even more to work with"},connectorsBody:{id:"pulse.onboarding.modal.connector.body",defaultMessage:"Connecting your calendar and email helps ChatGPT craft more accurate updates."},connectorsDataTitle:{id:"pulse.onboarding.modal.connector.dataTitle",defaultMessage:"Youre in control of your data"},connectorsDataDescription:{id:"pulse.onboarding.modal.connector.dataDescription",defaultMessage:"You can delete your conversations, which will also delete any Gmail data used in those conversations. <link>Learn more</link>"},connectorsPrivacyTitle:{id:"pulse.onboarding.modal.connector.privacyTitle",defaultMessage:"Private and secure"},connectorsPrivacyDescription:{id:"pulse.onboarding.modal.connector.privacyDescription",defaultMessage:"Data accessed from Gmail may be used to reply to prompts. We do not train generalized models on this data or derivations of it, unless you choose to submit it as feedback. <link>Learn more</link>"},connectorsSkipCta:{id:"pulse.onboarding.modal.connector.skipCta",defaultMessage:"Skip for now"},connectorsConnectCta:{id:"pulse.onboarding.modal.connector.connectCta",defaultMessage:"Connect with Google"}});function mye(t){"use forget";var j,R;const e=D.c(33),{config:n,headingId:s,descriptionId:o,onSkip:r,onConnect:a,stepIndex:l,totalSteps:c,isSkipLoading:u,isConnectLoading:d,disableSkip:f,disableConnect:m,connectorCards:p,connectCta:g}=t,h=te();let _;e[0]!==h?(_=(j=h.formatMessage(Cm.connectorsSkipCta))!=null?j:"Skip for now",e[0]=h,e[1]=_):_=e[1];const x=_;let b;e[2]!==g||e[3]!==h?(b=(R=g!=null?g:h.formatMessage(Cm.connectorsConnectCta))!=null?R:"Connect with Google",e[2]=g,e[3]=h,e[4]=b):b=e[4];const y=b;if(!n)return null;let S;e[5]!==l||e[6]!==c?(S=i.jsx("p",{className:"text-token-text-secondary",children:i.jsx(P,G(N({},Cm.stepIndicator),{values:{current:l,total:c}}))}),e[5]=l,e[6]=c,e[7]=S):S=e[7];const C=S;let w;e[8]!==n||e[9]!==p||e[10]!==o||e[11]!==s?(w=i.jsx(pye,{config:n,headingId:s,descriptionId:o,cards:p}),e[8]=n,e[9]=p,e[10]=o,e[11]=s,e[12]=w):w=e[12];let k;e[13]!==y?(k=i.jsx("p",{children:y}),e[13]=y,e[14]=k):k=e[14];let E;e[15]===Symbol.for("react.memo_cache_sentinel")?(E=i.jsx(uye,{className:"icon ms-1"}),e[15]=E):E=e[15];let T;e[16]!==m||e[17]!==d||e[18]!==a||e[19]!==k?(T=i.jsxs(Se,{color:"primary",size:"large",className:"rounded-full px-6",onClick:a,loading:d,disabled:m,children:[k,E]},"connectors-google-button-key"),e[16]=m,e[17]=d,e[18]=a,e[19]=k,e[20]=T):T=e[20];let M;e[21]!==x?(M=i.jsx("p",{children:x}),e[21]=x,e[22]=M):M=e[22];let A;e[23]!==f||e[24]!==u||e[25]!==r||e[26]!==M?(A=i.jsx(Se,{color:"secondary",size:"large",className:"rounded-full border-none px-6",onClick:r,loading:u,disabled:f,children:M},"connectors-skip-button-key"),e[23]=f,e[24]=u,e[25]=r,e[26]=M,e[27]=A):A=e[27];let I;return e[28]!==C||e[29]!==w||e[30]!==T||e[31]!==A?(I={content:w,footerContent:C,primaryButton:T,secondaryButton:A},e[28]=C,e[29]=w,e[30]=T,e[31]=A,e[32]=I):I=e[32],I}function pye(t){"use forget";var h,_;const e=D.c(21),{config:n,headingId:s,descriptionId:o,cards:r}=t;let a;e[0]!==r?(a=i.jsx("div",{className:"relative flex h-full min-h-[364px] flex-1 overflow-x-clip bg-[#4285F4]",children:i.jsx("div",{className:"pointer-events-none absolute inset-0 flex w-full items-center justify-center",children:i.jsx("div",{className:"pointer-events-auto",children:i.jsx(GF,{cards:r})})})}),e[0]=r,e[1]=a):a=e[1];let l;e[2]!==n.title?(l=(h=n.title)!=null?h:i.jsx(P,N({},Cm.connectorsTitle)),e[2]=n.title,e[3]=l):l=e[3];let c;e[4]!==s||e[5]!==l?(c=i.jsx("p",{id:s,className:"text-token-text-primary text-[28px] font-normal",children:l}),e[4]=s,e[5]=l,e[6]=c):c=e[6];let u;e[7]!==n.body?(u=(_=n.body)!=null?_:i.jsx(P,N({},Cm.connectorsBody)),e[7]=n.body,e[8]=u):u=e[8];let d;e[9]!==o||e[10]!==u?(d=i.jsx("p",{id:o,className:"text-token-text-primary mt-4 text-base",children:u}),e[9]=o,e[10]=u,e[11]=d):d=e[11];let f;e[12]!==c||e[13]!==d?(f=i.jsxs("div",{className:"text-start",children:[c,d]}),e[12]=c,e[13]=d,e[14]=f):f=e[14];let m;e[15]===Symbol.for("react.memo_cache_sentinel")?(m=i.jsx("div",{className:"mt-18 flex w-full","aria-hidden":"true"}),e[15]=m):m=e[15];let p;e[16]!==f?(p=i.jsxs("div",{className:"flex grow flex-col px-9 pt-9 pb-12",children:[f,m]}),e[16]=f,e[17]=p):p=e[17];let g;return e[18]!==a||e[19]!==p?(g=i.jsxs("div",{className:"bg-token-interactive-bg-tertiary-hover no-scrollbar flex h-full flex-col overflow-y-auto pb-6",children:[a,p]}),e[18]=a,e[19]=p,e[20]=g):g=e[20],g}const Tc=t=>{"use forget";var w;const e=D.c(31);let n,s,o,r;e[0]!==t?(w=t,{className:o,fallbackSrc:n,shadow:r}=w,s=De(w,["className","fallbackSrc","shadow"]),e[0]=t,e[1]=n,e[2]=s,e[3]=o,e[4]=r):(n=e[1],s=e[2],o=e[3],r=e[4]);const a=o===void 0?"":o,l=r===void 0?!1:r,c=te();let u;e[5]!==n||e[6]!==s.src?(u=()=>s.src?"primary":n?"fallback":"error",e[5]=n,e[6]=s.src,e[7]=u):u=e[7];const[d,f]=v.useState(u);let m,p;e[8]!==n||e[9]!==s.src?(m=()=>{const k=s.src?"primary":n?"fallback":"error";f(E=>E===k?E:k)},p=[s.src,n],e[8]=n,e[9]=s.src,e[10]=m,e[11]=p):(m=e[10],p=e[11]),v.useEffect(m,p);const g=d==="primary"?s.src:n!=null?n:void 0,h=l&&"shadow-[0_8px_30px_0_rgba(0,0,0,0.05)]";let _;e[12]!==a||e[13]!==h?(_=q("rounded-2xl object-cover aspect-square",h,a),e[12]=a,e[13]=h,e[14]=_):_=e[14];const x=_;if(!g||d==="error"){let k;return e[15]!==x||e[16]!==s.onClick||e[17]!==l?(k=i.jsx(gye,{onClick:s.onClick,className:x,shadow:l}),e[15]=x,e[16]=s.onClick,e[17]=l,e[18]=k):k=e[18],k}let b;e[19]!==c?(b=c.formatMessage({id:"syAyIZ",defaultMessage:"Image attachment"}),e[19]=c,e[20]=b):b=e[20];let y;e[21]===Symbol.for("react.memo_cache_sentinel")?(y=k=>{const{currentTarget:E}=k;(E.naturalWidth<30||E.naturalHeight<30)&&f("error")},e[21]=y):y=e[21];let S;e[22]!==n||e[23]!==d?(S=k=>{const{currentTarget:E}=k;d==="primary"&&n&&E.src!==n?f("fallback"):f("error")},e[22]=n,e[23]=d,e[24]=S):S=e[24];let C;return e[25]!==x||e[26]!==s||e[27]!==g||e[28]!==S||e[29]!==b?(C=i.jsx("img",G(N({},s),{alt:b,loading:"eager",src:g,className:x,onLoad:y,onError:S})),e[25]=x,e[26]=s,e[27]=g,e[28]=S,e[29]=b,e[30]=C):C=e[30],C},gye=t=>{"use forget";const e=D.c(7),{className:n,shadow:s,onClick:o}=t,r=s&&"shadow-[0_8px_30px_0_rgba(0,0,0,0.05)]";let a;e[0]!==n||e[1]!==r?(a=q("border-token-[#0285FF17] flex items-center justify-center rounded-2xl border bg-[#DFEFFF] object-cover p-2",r,n),e[0]=n,e[1]=r,e[2]=a):a=e[2];let l;e[3]===Symbol.for("react.memo_cache_sentinel")?(l=i.jsx(lg,{className:"text-token-text-accent aspect-square h-1/3 w-1/3"}),e[3]=l):l=e[3];let c;return e[4]!==o||e[5]!==a?(c=i.jsx("div",{onClick:o,className:a,children:l}),e[4]=o,e[5]=a,e[6]=c):c=e[6],c};function VF({title:t,imageUrl:e,fallbackImageUrl:n}){return i.jsxs("div",{className:"flex h-[160px] w-[393px] flex-row items-center gap-4 rounded-[24px] border border-black/10 bg-white p-4",style:{boxShadow:"0px 4px 16px 0px rgba(0,0,0,0.05)"},children:[i.jsx(Tc,{className:"h-[128px] w-[128px] flex-shrink-0 rounded-[16px]",fallbackSrc:n,src:e!=null?e:void 0,shadow:!0}),i.jsx("p",{className:"text-xl leading-[25px] font-medium text-black",children:t})]})}const hye="https://persistent.oaistatic.com/chatgpt/pulse/hero-banner.webp",_ye="https://persistent.oaistatic.com/chatgpt/pulse/hero-banner.webp",mu=we({title:{id:"pulse.onboarding.modal.hero.title",defaultMessage:"Pulse can help you stay on top of anything."},body:{id:"pulse.onboarding.modal.hero.body",defaultMessage:"Each day, it curates research and reminders based on your goals, plans, and ongoing tasks."},cta:{id:"pulse.onboarding.modal.hero.cta",defaultMessage:"Get started"},heroCardRunning:{id:"pulse.onboarding.modal.hero.cardRunning",defaultMessage:"Hudson Valley trails for your running goals"},heroCardDinner:{id:"pulse.onboarding.modal.hero.cardDinner",defaultMessage:"Easy weeknight vegetarian dinners"},heroCardTravel:{id:"pulse.onboarding.modal.hero.cardTravel",defaultMessage:"Travel ideas for your London trip"}});function xye(t){"use forget";const e=D.c(5),{headingId:n,descriptionId:s,onGetStarted:o,previewItems:r}=t;let a;return e[0]!==s||e[1]!==n||e[2]!==o||e[3]!==r?(a={content:i.jsx(yye,{headingId:n,descriptionId:s,onGetStarted:o,previewItems:r}),footerContent:null},e[0]=s,e[1]=n,e[2]=o,e[3]=r,e[4]=a):a=e[4],a}function yye(t){"use forget";var w;const e=D.c(26),{headingId:n,descriptionId:s,onGetStarted:o,previewItems:r}=t,l=Yo()?_ye:hye,c=te();let u;if(e[0]!==c||e[1]!==r){const k=(w=r==null?void 0:r.filter(vye))!=null?w:[],E=[{id:"hero-fallback-running",title:c.formatMessage(mu.heroCardRunning),image_url:""},{id:"hero-fallback-dinner",title:c.formatMessage(mu.heroCardDinner),image_url:""},{id:"hero-fallback-travel",title:c.formatMessage(mu.heroCardTravel),image_url:""}];u=(k.length?k:E).map(bye),e[0]=c,e[1]=r,e[2]=u}else u=e[2];const d=u;let f;e[3]!==l?(f=i.jsx("img",{src:l,className:"w-full object-cover object-bottom",alt:""}),e[3]=l,e[4]=f):f=e[4];let m;e[5]!==d?(m=i.jsx("div",{className:"pointer-events-none absolute inset-0 flex w-full items-center justify-center",children:i.jsx("div",{className:"pointer-events-auto",children:i.jsx(GF,{cards:d})})}),e[5]=d,e[6]=m):m=e[6];let p;e[7]!==f||e[8]!==m?(p=i.jsxs("div",{className:"relative flex h-full min-h-[364px] flex-1 overflow-x-clip",children:[f,m]}),e[7]=f,e[8]=m,e[9]=p):p=e[9];let g;e[10]===Symbol.for("react.memo_cache_sentinel")?(g=i.jsx(P,N({},mu.title)),e[10]=g):g=e[10];let h;e[11]!==n?(h=i.jsx("p",{id:n,className:"text-token-text-primary text-[28px] font-normal",children:g}),e[11]=n,e[12]=h):h=e[12];let _;e[13]===Symbol.for("react.memo_cache_sentinel")?(_=i.jsx(P,N({},mu.body)),e[13]=_):_=e[13];let x;e[14]!==s?(x=i.jsx("p",{id:s,className:"text-token-text-primary mt-4 text-base",children:_}),e[14]=s,e[15]=x):x=e[15];let b;e[16]===Symbol.for("react.memo_cache_sentinel")?(b=i.jsx(P,N({},mu.cta)),e[16]=b):b=e[16];let y;e[17]!==o?(y=i.jsx(Se,{className:"mt-9 h-12 rounded-full",color:"primary",fullWidth:!0,size:"large",onClick:o,children:b}),e[17]=o,e[18]=y):y=e[18];let S;e[19]!==y||e[20]!==h||e[21]!==x?(S=i.jsx("div",{className:"flex w-full flex-1 flex-col items-start justify-start p-9 text-start",children:i.jsxs("div",{children:[h,x,y]})}),e[19]=y,e[20]=h,e[21]=x,e[22]=S):S=e[22];let C;return e[23]!==S||e[24]!==p?(C=i.jsxs(i.Fragment,{children:[p,S]}),e[23]=S,e[24]=p,e[25]=C):C=e[25],C}function bye(t,e){var s,o,r;let n=(o=(s=t.preview)!=null?s:t.title)!=null?o:"";return n.endsWith(".")&&(n=n.slice(0,-1)),i.jsx(VF,{title:n,imageUrl:t.image_url},(r=t.id)!=null?r:"".concat(t.title,"-").concat(e))}function vye(t){return!!(t!=null&&t.title)}var Sye=v.useLayoutEffect,Cye=function(e){var n=v.useRef(e);return Sye(function(){n.current=e}),n},HA=function(e,n){if(typeof e=="function"){e(n);return}e.current=n},wye=function(e,n){var s=v.useRef();return v.useCallback(function(o){e.current=o,s.current&&HA(s.current,null),s.current=n,n&&HA(n,o)},[n])},$A={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},kye=function(e){Object.keys($A).forEach(function(n){e.style.setProperty(n,$A[n],"important")})},GA=kye,Ks=null,VA=function(e,n){var s=e.scrollHeight;return n.sizingStyle.boxSizing==="border-box"?s+n.borderSize:s-n.paddingSize};function Eye(t,e,n,s){n===void 0&&(n=1),s===void 0&&(s=1/0),Ks||(Ks=document.createElement("textarea"),Ks.setAttribute("tabindex","-1"),Ks.setAttribute("aria-hidden","true"),GA(Ks)),Ks.parentNode===null&&document.body.appendChild(Ks);var o=t.paddingSize,r=t.borderSize,a=t.sizingStyle,l=a.boxSizing;Object.keys(a).forEach(function(m){var p=m;Ks.style[p]=a[p]}),GA(Ks),Ks.value=e;var c=VA(Ks,t);Ks.value=e,c=VA(Ks,t),Ks.value="x";var u=Ks.scrollHeight-o,d=u*n;l==="border-box"&&(d=d+o+r),c=Math.max(d,c);var f=u*s;return l==="border-box"&&(f=f+o+r),c=Math.min(f,c),[c,u]}var zA=function(){},Tye=function(e,n){return e.reduce(function(s,o){return s[o]=n[o],s},{})},Mye=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak"],Aye=!!document.documentElement.currentStyle,Nye=function(e){var n=window.getComputedStyle(e);if(n===null)return null;var s=Tye(Mye,n),o=s.boxSizing;if(o==="")return null;Aye&&o==="border-box"&&(s.width=parseFloat(s.width)+parseFloat(s.borderRightWidth)+parseFloat(s.borderLeftWidth)+parseFloat(s.paddingRight)+parseFloat(s.paddingLeft)+"px");var r=parseFloat(s.paddingBottom)+parseFloat(s.paddingTop),a=parseFloat(s.borderBottomWidth)+parseFloat(s.borderTopWidth);return{sizingStyle:s,paddingSize:r,borderSize:a}},Iye=Nye;function zF(t,e,n){var s=Cye(n);v.useLayoutEffect(function(){var o=function(a){return s.current(a)};if(t)return t.addEventListener(e,o),function(){return t.removeEventListener(e,o)}},[])}var jye=function(e){zF(window,"resize",e)},Pye=function(e){zF(document.fonts,"loadingdone",e)},Rye=["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"],Oye=function(e,n){var s=e.cacheMeasurements,o=e.maxRows,r=e.minRows,a=e.onChange,l=a===void 0?zA:a,c=e.onHeightChange,u=c===void 0?zA:c,d=nQ(e,Rye),f=d.value!==void 0,m=v.useRef(null),p=wye(m,n),g=v.useRef(0),h=v.useRef(),_=function(){var y=m.current,S=s&&h.current?h.current:Iye(y);if(S){h.current=S;var C=Eye(S,y.value||y.placeholder||"x",r,o),w=C[0],k=C[1];g.current!==w&&(g.current=w,y.style.setProperty("height",w+"px","important"),u(w,{rowHeight:k}))}},x=function(y){f||_(),l(y)};return v.useLayoutEffect(_),jye(_),Pye(_),v.createElement("textarea",sQ({},d,{onChange:x,ref:p}))},Lye=v.forwardRef(Oye);const Dye=wt.create(Lye);function Bye(t){"use forget";var M;const e=D.c(40),{suggestion:n,selected:s,promptValue:o,promptPlaceholder:r,onToggle:a,onPromptChange:l}=t,c=Yo(),u=c?"bg-black":"bg-white";let d;e[0]===Symbol.for("react.memo_cache_sentinel")?(d={layout:{type:"spring",stiffness:500,damping:40}},e[0]=d):d=e[0];const f=s?"".concat(u," shadow-[0px_6px_24px_rgba(0,0,0,0.12)]"):"".concat(u,"/90 shadow-[0px_4px_16px_rgba(0,0,0,0.05)]");let m;e[1]!==f?(m=q("border-token-border-default rounded-[24px] border px-5 text-start transition-shadow",f),e[1]=f,e[2]=m):m=e[2];let p;e[3]!==a||e[4]!==n.id?(p=()=>a(n.id),e[3]=a,e[4]=n.id,e[5]=p):p=e[5];let g;e[6]!==n.emoji?(g=n.emoji&&i.jsx("span",{className:"text-xl",children:n.emoji}),e[6]=n.emoji,e[7]=g):g=e[7];let h;e[8]!==n.title?(h=i.jsx("span",{className:"text-token-text-primary text-base font-medium",children:n.title}),e[8]=n.title,e[9]=h):h=e[9];let _;e[10]!==g||e[11]!==h?(_=i.jsxs("div",{className:"flex min-h-7 items-center gap-3 text-start",children:[g,h]}),e[10]=g,e[11]=h,e[12]=_):_=e[12];const x=s?c?"white":"black":"var(--token-bg-primary)";let b;e[13]!==x?(b={backgroundColor:x},e[13]=x,e[14]=b):b=e[14];let y;e[15]===Symbol.for("react.memo_cache_sentinel")?(y={type:"spring",stiffness:400,damping:35},e[15]=y):y=e[15];let S;e[16]!==c||e[17]!==s?(S=i.jsx(In,{mode:"wait",initial:!1,children:s?i.jsx(wt.span,{initial:{rotate:-90,scale:.5,opacity:0},animate:{rotate:0,scale:1,opacity:1},exit:{rotate:90,scale:.5,opacity:0},transition:{duration:.2,ease:"easeOut"},children:i.jsx(Pr,{className:q("icon-sm",c?"text-black":"text-white")})},"check"):i.jsx(wt.span,{initial:{rotate:90,scale:.5,opacity:0},animate:{rotate:0,scale:1,opacity:1},exit:{rotate:-90,scale:.5,opacity:0},transition:{duration:.2,ease:"easeOut"},className:"text-token-text-tertiary",children:i.jsx(pf,{className:"icon-sm"})},"plus")}),e[16]=c,e[17]=s,e[18]=S):S=e[18];let C;e[19]!==S||e[20]!==b?(C=i.jsx(wt.div,{layout:"position",className:"flex h-6 w-6 items-center justify-center rounded-full",animate:b,transition:y,children:S}),e[19]=S,e[20]=b,e[21]=C):C=e[21];let w;e[22]!==s||e[23]!==C||e[24]!==p||e[25]!==_?(w=i.jsxs("button",{type:"button",className:"flex w-full items-center justify-between gap-3 py-3 text-start",onClick:p,"aria-pressed":s,children:[_,C]}),e[22]=s,e[23]=C,e[24]=p,e[25]=_,e[26]=w):w=e[26];let k;e[27]!==l||e[28]!==r||e[29]!==o||e[30]!==s||e[31]!==n.id||e[32]!==n.prompt?(k=s&&i.jsx(wt.div,{layout:!0,initial:{height:0,opacity:0,marginTop:0},animate:{height:"auto",opacity:1,marginTop:6},exit:{height:0,opacity:0,marginTop:0},transition:{duration:.2,ease:"easeInOut"},className:"overflow-hidden pb-3",children:i.jsx(Dye,{layout:!0,initial:{opacity:0,y:0},animate:{opacity:1,y:0},exit:{opacity:0,y:0},transition:{duration:.2},className:"text-token-text-primary placeholder:text-token-text-tertiary bg-token-bg-elevated-secondary w-full rounded-[20px] border-none px-5 py-3 text-base focus:ring-0 focus:outline-none focus-visible:ring-0 focus-visible:outline-none",placeholder:(M=n.prompt)!=null?M:r,value:o,onChange:A=>l(n.id,A.currentTarget.value),minRows:1,maxRows:3,style:{resize:"none"}})},"prompt"),e[27]=l,e[28]=r,e[29]=o,e[30]=s,e[31]=n.id,e[32]=n.prompt,e[33]=k):k=e[33];let E;e[34]!==k?(E=i.jsx(In,{initial:!1,children:k}),e[34]=k,e[35]=E):E=e[35];let T;return e[36]!==w||e[37]!==E||e[38]!==m?(T=i.jsxs(wt.div,{layout:!0,transition:d,className:m,children:[w,E]}),e[36]=w,e[37]=E,e[38]=m,e[39]=T):T=e[39],T}const zl=we({focusTitle:{id:"pulse.onboarding.modal.interests.title",defaultMessage:"What would you like Pulse to keep track of?"},focusBody:{id:"pulse.onboarding.modal.interests.body",defaultMessage:"Choose a few focus areas to start. Pulse will evolve based on your chats and interests."},stepIndicator:{id:"pulse.onboarding.modal.interests.stepIndicator",defaultMessage:"Step {current} of {total}"},nextCta:{id:"pulse.onboarding.modal.interests.nextCta",defaultMessage:"Next"},basedOnYouLabel:{id:"pulse.onboarding.modal.interests.sectionBasedOnYou",defaultMessage:"Based on you"},moreIdeasLabel:{id:"pulse.onboarding.modal.interests.sectionMoreIdeas",defaultMessage:"More ideas"},suggestionPromptPlaceholder:{id:"pulse.onboarding.modal.interests.promptPlaceholder",defaultMessage:"Do you want to share anything else?"}});function WA(t,e){var o;const n=new Map(e.map(r=>{var a;return[r.id,(a=r.prompt)!=null?a:""]})),s={};for(const r of t){const a=n.get(r.id);s[r.id]={selected:n.has(r.id),promptValue:(o=a!=null?a:r.prompt)!=null?o:""}}return s}function Fye(t,e){return t.length!==e.length?!1:t.every((n,s)=>{var o,r,a,l;return n.id===((o=e[s])==null?void 0:o.id)&&((r=n.prompt)!=null?r:"")===((l=(a=e[s])==null?void 0:a.prompt)!=null?l:"")})}function Uye(t,e){const n=Object.keys(t),s=Object.keys(e);if(n.length!==s.length)return!1;for(const o of n){const r=t[o],a=e[o];if(!a||r.selected!==a.selected||r.promptValue!==a.promptValue)return!1}return!0}function Hye(t){"use forget";var T;const e=D.c(25),{headingId:n,descriptionId:s,onNext:o,stepIndex:r,totalSteps:a,hasSelection:l,selectedSuggestions:c,onSelectionChange:u,personalizedSuggestions:d,genericSuggestions:f,isSubmitting:m}=t,p=m===void 0?!1:m,g=te();let h;e[0]!==g?(h=(T=g.formatMessage(zl.nextCta))!=null?T:"Next",e[0]=g,e[1]=h):h=e[1];const _=h;let x;e[2]!==r||e[3]!==a?(x=a>1?i.jsx("p",{className:"text-token-text-secondary",children:i.jsx(P,G(N({},zl.stepIndicator),{values:{current:r,total:a}}))}):null,e[2]=r,e[3]=a,e[4]=x):x=e[4];const b=x;let y;e[5]!==s||e[6]!==f||e[7]!==n||e[8]!==u||e[9]!==d||e[10]!==c?(y=i.jsx($ye,{headingId:n,descriptionId:s,onSelectionChange:u,selectedSuggestions:c,personalizedSuggestions:d,genericSuggestions:f}),e[5]=s,e[6]=f,e[7]=n,e[8]=u,e[9]=d,e[10]=c,e[11]=y):y=e[11];let S;e[12]!==o?(S=()=>void o(),e[12]=o,e[13]=S):S=e[13];const C=!l||p;let w;e[14]!==_?(w=i.jsx("p",{children:_}),e[14]=_,e[15]=w):w=e[15];let k;e[16]!==p||e[17]!==S||e[18]!==C||e[19]!==w?(k=i.jsx(Se,{color:"primary",size:"large",className:"rounded-full px-6",onClick:S,disabled:C,loading:p,children:w},"interests-next-button-key"),e[16]=p,e[17]=S,e[18]=C,e[19]=w,e[20]=k):k=e[20];let E;return e[21]!==b||e[22]!==y||e[23]!==k?(E={content:y,footerContent:b,primaryButton:k},e[21]=b,e[22]=y,e[23]=k,e[24]=E):E=e[24],E}function $ye(t){"use forget";const e=D.c(58),{headingId:n,descriptionId:s,onSelectionChange:o,selectedSuggestions:r,personalizedSuggestions:a,genericSuggestions:l}=t,c=te();let u;e[0]!==a?(u=a!=null?a:[],e[0]=a,e[1]=u):u=e[1];const d=u;let f;e[2]!==l?(f=l!=null?l:[],e[2]=l,e[3]=f):f=e[3];const m=f;let p;e[4]!==m||e[5]!==d?(p=[...d,...m],e[4]=m,e[5]=d,e[6]=p):p=e[6];const g=p;let h;e[7]!==m||e[8]!==d?(h=JSON.stringify({personalizedIds:d.map(Vye),genericIds:m.map(Gye)}),e[7]=m,e[8]=d,e[9]=h):h=e[9];const _=h;let x;e[10]!==r||e[11]!==g?(x=()=>WA(g,r),e[10]=r,e[11]=g,e[12]=x):x=e[12];const[b,y]=v.useState(x);let S;e[13]!==m||e[14]!==d||e[15]!==r?(S=()=>{const J=WA([...d,...m],r);y(Q=>Uye(Q,J)?Q:J)},e[13]=m,e[14]=d,e[15]=r,e[16]=S):S=e[16];let C;e[17]!==m||e[18]!==d||e[19]!==r||e[20]!==_?(C=[_,r,d,m],e[17]=m,e[18]=d,e[19]=r,e[20]=_,e[21]=C):C=e[21],v.useEffect(S,C);let w;e[22]===Symbol.for("react.memo_cache_sentinel")?(w=J=>{aye(),y(Q=>{const ne=Q[J];return G(N({},Q),{[J]:G(N({},ne),{selected:!ne.selected})})})},e[22]=w):w=e[22];const k=w;let E;e[23]===Symbol.for("react.memo_cache_sentinel")?(E=(J,Q)=>{y(ne=>G(N({},ne),{[J]:G(N({},ne[J]),{promptValue:Q})}))},e[23]=E):E=e[23];const T=E;let M;if(e[24]!==b||e[25]!==g){M=[];for(const J of g){const Q=b[J.id];if(Q!=null&&Q.selected){const ne=Q.promptValue||J.prompt||"";if(typeof J.id=="string"&&J.id.toLowerCase().startsWith("other-")&&!ne.trim())continue;M.push(G(N({},J),{prompt:ne}))}}e[24]=b,e[25]=g,e[26]=M}else M=e[26];const A=M,I=A.length>0;let j,R;e[27]!==I||e[28]!==o||e[29]!==r||e[30]!==A?(j=()=>{if(I===r.length>0&&Fye(A,r))return;const J=window.setTimeout(()=>{o(I,A)},100);return()=>window.clearTimeout(J)},R=[I,o,r,A],e[27]=I,e[28]=o,e[29]=r,e[30]=A,e[31]=j,e[32]=R):(j=e[31],R=e[32]),v.useEffect(j,R);let O;e[33]!==c?(O=c.formatMessage(zl.suggestionPromptPlaceholder),e[33]=c,e[34]=O):O=e[34];const L=O;let B;e[35]===Symbol.for("react.memo_cache_sentinel")?(B={maxHeight:"min(calc(100vh - 124px), 700px)"},e[35]=B):B=e[35];let U;e[36]===Symbol.for("react.memo_cache_sentinel")?(U=i.jsx(P,N({},zl.focusTitle)),e[36]=U):U=e[36];let H;e[37]!==n?(H=i.jsx("p",{id:n,className:"text-token-text-primary text-[28px] font-normal",children:U}),e[37]=n,e[38]=H):H=e[38];let $;e[39]===Symbol.for("react.memo_cache_sentinel")?($=i.jsx(P,N({},zl.focusBody)),e[39]=$):$=e[39];let F;e[40]!==s?(F=i.jsx("p",{id:s,className:"text-token-text-primary mt-3 text-base",children:$}),e[40]=s,e[41]=F):F=e[41];let z;e[42]===Symbol.for("react.memo_cache_sentinel")?(z=i.jsx(P,N({},zl.basedOnYouLabel)),e[42]=z):z=e[42];let W;e[43]!==d||e[44]!==L||e[45]!==b?(W=i.jsx(qA,{label:z,suggestions:d,selectionState:b,onToggle:k,onPromptChange:T,promptPlaceholder:L}),e[43]=d,e[44]=L,e[45]=b,e[46]=W):W=e[46];let Y;e[47]!==m||e[48]!==L||e[49]!==b?(Y=m.length>0&&i.jsx(qA,{label:i.jsx(P,N({},zl.moreIdeasLabel)),suggestions:m,selectionState:b,onToggle:k,onPromptChange:T,promptPlaceholder:L}),e[47]=m,e[48]=L,e[49]=b,e[50]=Y):Y=e[50];let K;e[51]!==W||e[52]!==Y?(K=i.jsxs("div",{className:"mt-6 flex flex-col gap-5 pb-6",children:[W,Y]}),e[51]=W,e[52]=Y,e[53]=K):K=e[53];let Z;return e[54]!==H||e[55]!==F||e[56]!==K?(Z=i.jsxs("div",{className:"bg-token-interactive-bg-tertiary-hover no-scrollbar flex h-full flex-col overflow-y-auto px-9 pt-[120px] pb-12",style:B,children:[H,F,K]}),e[54]=H,e[55]=F,e[56]=K,e[57]=Z):Z=e[57],Z}function Gye(t){return t.id}function Vye(t){return t.id}function qA(t){"use forget";const e=D.c(18),{label:n,suggestions:s,selectionState:o,onToggle:r,onPromptChange:a,promptPlaceholder:l}=t;let c;e[0]!==n?(c=i.jsx("p",{className:"text-token-text-secondary text-sm",children:n}),e[0]=n,e[1]=c):c=e[1];let u;if(e[2]!==a||e[3]!==r||e[4]!==l||e[5]!==o||e[6]!==s){let m;e[8]!==a||e[9]!==r||e[10]!==l||e[11]!==o?(m=p=>{var g,h,_,x,b;return i.jsx(Bye,{suggestion:p,selected:(h=(g=o[p.id])==null?void 0:g.selected)!=null?h:!1,promptValue:(x=(_=o[p.id])==null?void 0:_.promptValue)!=null?x:"",onToggle:r,onPromptChange:a,promptPlaceholder:(b=p.hint)!=null?b:l},p.id)},e[8]=a,e[9]=r,e[10]=l,e[11]=o,e[12]=m):m=e[12],u=s.map(m),e[2]=a,e[3]=r,e[4]=l,e[5]=o,e[6]=s,e[7]=u}else u=e[7];let d;e[13]!==u?(d=i.jsx("div",{className:"mt-4 space-y-2",children:u}),e[13]=u,e[14]=d):d=e[14];let f;return e[15]!==c||e[16]!==d?(f=i.jsxs("div",{children:[c,d]}),e[15]=c,e[16]=d,e[17]=f):f=e[17],f}const zk="DEFAULT",WF=st(zk),ts={recentPulse:["recent-pulse"],pulseCard:t=>["pulse-card",t],pulseEntrypoint:["pulse-entrypoint"],pulseHistory:["pulse-history"]},zye=["pulse-entrypoint","live"],qF=["recent-pulse","live"],KA={useCache:!0};function Wk(t,e){t.setQueryData(ts.pulseCard(e.id),e)}const KF=t=>t!==void 0,YF=(t,e,n)=>{if(zp(t)&&t.id===e)return n(t);if(YL(t)){const s=t.items.map(o=>YF(o,e,n)).filter(KF);return s.length===0?void 0:G(N({},t),{items:s})}return t};function ZF(t,e,n){t.setQueryData(ts.pulseCard(e),s=>s&&n(s)),t.setQueryData(ts.recentPulse,s=>s&&G(N({},s),{items:s.items.map(o=>YF(o,e,n)).filter(KF)}))}function Wye(t,e){ZF(t,e,()=>{})}function fat(t,e,n){ZF(t,e,s=>G(N({},s),{conversation_id:n}))}const ex=t=>Object.keys(t).length===0,qye=er((t,e)=>Gs(()=>En({queryKey:["pulse-feed",e],queryFn:async()=>{const n=await ue.safeGet("/feed/mixed/{feed_variant_id}",{parameters:{path:{feed_variant_id:e}}});return ex(n)?null:(n.items.filter(zp).forEach(s=>{Wk(Zn(),s)}),n)}}),{enabled$:zc})),Kye=Gs(()=>En({queryKey:ts.recentPulse,queryFn:async()=>{const t=await ue.safeGet("/feed/mixed");return ex(t)?null:(t.items.filter(zp).forEach(e=>{Wk(Zn(),e)}),t)}}),{enabled$:zc}),Yye=Gs(()=>En({queryKey:qF,queryFn:async()=>{const t=await ue.safeGet("/feed/mixed");return ex(t)?null:(t.items.filter(zp).forEach(e=>{Wk(Zn(),e)}),t)},staleTime:0,gcTime:0}),{enabled$:zc}),cg=yp(t=>yt(()=>{const e=WF();return e&&e!==zk?qye(t,e):Kye()})),Zye=er((t,e)=>Gs(()=>{const{useCache:n=KA.useCache}=e!=null?e:{},s=n?ts.pulseEntrypoint:zye;return En({queryKey:s,queryFn:async()=>{const o=await ue.safeGet("/feed/entrypoint");return ex(o)?null:o},staleTime:n?300*1e3:0,gcTime:n?300*1e3:0,refetchOnMount:n?void 0:"always",refetchOnReconnect:n?void 0:"always",refetchOnWindowFocus:n?void 0:"always"})},{enabled$:()=>KL()}),t=>{var e;return JSON.stringify({useCache:(e=t==null?void 0:t.useCache)!=null?e:KA.useCache})}),Zc=Zye,Qye=er(()=>Gs(()=>En({queryKey:["cocoon-entrypoint"],queryFn:async()=>{var s;const e=await ue.safeGet("/feed/cocoon/entrypoint");if(!e)return null;const n=e.convo_id;return n?{conversationId:n,title:e.title,caption:e.caption,videoUrl:(s=e.preview_video_url)!=null?s:void 0}:null},staleTime:1/0,gcTime:1/0,refetchOnMount:!1,refetchOnReconnect:!1,refetchOnWindowFocus:!1}),{enabled$:kde})),Jye=Qye,QF=st(null),Xye=st(null),JF=yt(()=>{var t,e,n;return(n=QF())!=null?n:(e=(t=cg().data)==null?void 0:t.feedback)==null?void 0:e.feedback_conversation_id}),e2e=Hn(()=>Xd({mutationFn:async()=>await ue.safePost("/feed/feedback/conversation/delete"),onSuccess:()=>{Zn().invalidateQueries({queryKey:ts.recentPulse})}})),mat=Hn(()=>Xd({mutationFn:async t=>await ue.safeDelete("/feed/{feed_id}",{parameters:{path:{feed_id:t}}}),onSuccess:async(t,e)=>{const n=Zn();await Promise.all([n.invalidateQueries({queryKey:ts.recentPulse}),n.invalidateQueries({queryKey:qF}),n.invalidateQueries({queryKey:["pulse-feed",e]}),n.invalidateQueries({queryKey:ts.pulseEntrypoint})]),WF.set(zk)}})),qk=t=>{"use forget";const e=D.c(9);let n;e[0]!==t?(n=ts.pulseCard(t),e[0]=t,e[1]=n):n=e[1];let s,o;e[2]!==t?(s=async()=>{if(!t)throw new Error("Card ID is required");return await ue.safeGet("/feed/card/{card_id}",{parameters:{path:{card_id:t}}})},o=Aw()&&!!t,e[2]=t,e[3]=s,e[4]=o):(s=e[3],o=e[4]);let r;return e[5]!==n||e[6]!==s||e[7]!==o?(r={queryKey:n,queryFn:s,enabled:o},e[5]=n,e[6]=s,e[7]=o,e[8]=r):r=e[8],ut(r)},t2e=t=>{"use forget";const e=D.c(12),n=Nt();let s;e[0]!==t?(s=async c=>c==="remove"?await ue.safeDelete("/feed/card/{card_id}/reaction",{parameters:{path:{card_id:t}}}):await ue.safePost("/feed/card/{card_id}/reaction",{parameters:{path:{card_id:t}},requestBody:{emoji:c}}),e[0]=t,e[1]=s):s=e[1];let o,r,a;e[2]!==t||e[3]!==n?(o=async c=>{await n.cancelQueries({queryKey:ts.pulseCard(t)});const u=n.getQueryData(ts.pulseCard(t));return u&&n.setQueryData(ts.pulseCard(t),G(N({},u),{reaction:c})),{previousCard:u}},r=(c,u,d)=>{d!=null&&d.previousCard&&n.setQueryData(ts.pulseCard(t),d.previousCard)},a=(c,u,d)=>{const{emoji:f}=c,{previousCard:m}=d;n.setQueryData(ts.pulseCard(t),G(N({},m),{reaction:f}))},e[2]=t,e[3]=n,e[4]=o,e[5]=r,e[6]=a):(o=e[4],r=e[5],a=e[6]);let l;return e[7]!==s||e[8]!==o||e[9]!==r||e[10]!==a?(l={mutationFn:s,onMutate:o,onError:r,onSuccess:a},e[7]=s,e[8]=o,e[9]=r,e[10]=a,e[11]=l):l=e[11],zt(l)},n2e=t=>{"use forget";const e=D.c(12),n=Nt();let s;e[0]!==t?(s=async c=>c==="save"?await ue.safePut("/feed/card/{card_id}/save",{parameters:{path:{card_id:t}}}):await ue.safeDelete("/feed/card/{card_id}/save",{parameters:{path:{card_id:t}}}),e[0]=t,e[1]=s):s=e[1];let o,r,a;e[2]!==t||e[3]!==n?(o=async c=>{await n.cancelQueries({queryKey:ts.pulseCard(t)});const u=n.getQueryData(ts.pulseCard(t));return u&&n.setQueryData(ts.pulseCard(t),G(N({},u),{is_saved:c==="save"})),{previousCard:u}},r=(c,u,d)=>{d!=null&&d.previousCard&&n.setQueryData(ts.pulseCard(t),d.previousCard)},a=(c,u,d)=>{const{saved:f}=c,{previousCard:m}=d;n.setQueryData(ts.pulseCard(t),G(N({},m),{is_saved:f}))},e[2]=t,e[3]=n,e[4]=o,e[5]=r,e[6]=a):(o=e[4],r=e[5],a=e[6]);let l;return e[7]!==s||e[8]!==o||e[9]!==r||e[10]!==a?(l={mutationFn:s,onMutate:o,onError:r,onSuccess:a},e[7]=s,e[8]=o,e[9]=r,e[10]=a,e[11]=l):l=e[11],zt(l)},pat=(t,e)=>{"use forget";const n=D.c(3);let s;return n[0]!==t||n[1]!==e?(s={mutationFn:async()=>await ue.safePost("/feed/interactions",{requestBody:{events:[{type:"proactive_connectors_declined",connector_ids:t,item_id:e,timestamp:new Date().toISOString()}]}})},n[0]=t,n[1]=e,n[2]=s):s=n[2],zt(s)},s2e=Hn(()=>Xd({mutationFn:async t=>await ue.safePost("/feed/onboarding/preferences",{requestBody:{selected_suggestions:t}}),onSuccess:()=>{Zn().invalidateQueries({queryKey:ts.recentPulse})}})),gat=Gs(()=>En({queryKey:ts.pulseHistory,queryFn:async()=>await ue.safeGet("/feed/history")}),{enabled$:zc}),hat=Hn(()=>Xd({mutationFn:async({taskId:t,action:e})=>await ue.safePost("/feed/task-pause-survey/submit",{requestBody:{task_id:t,action:e}}),onSuccess:({task_id:t})=>{Zn().invalidateQueries({queryKey:il.getAutomationQueryKey(t)})}})),_at=Hn(()=>Xd({mutationFn:async({cardId:t})=>await ue.safePut("/feed/card/{card_id}/dismiss",{parameters:{path:{card_id:t}}}),onMutate:async({cardId:t})=>{Wye(Zn(),t)}})),YA=we({backLabel:{id:"pulse.onboarding.modal.backLabel",defaultMessage:"Go back"},modalClose:{id:"pulse.onboarding.modal.close",defaultMessage:"Close onboarding"}}),XF={step:"hero",hasInterestsSelection:!1,selectedSuggestions:[],isCompleting:!1,isCheckingConnector:!1,isConnecting:!1,hasCompletedConnection:!1,isSkipping:!1};function o2e(t,e){switch(e.type){case"SET_STEP":return G(N({},t),{step:e.step});case"SET_SELECTIONS":return G(N({},t),{hasInterestsSelection:e.hasSelection,selectedSuggestions:e.selectedSuggestions});case"SET_COMPLETING":return G(N({},t),{isCompleting:e.value});case"SET_SKIPPING":return G(N({},t),{isSkipping:e.value});case"SET_CHECKING_CONNECTOR":return G(N({},t),{isCheckingConnector:e.value});case"SET_CONNECTING":return G(N({},t),{isConnecting:e.value});case"RESET_CONNECTOR_PROGRESS":return G(N({},t),{hasCompletedConnection:!1,isCheckingConnector:!1,isConnecting:!1,isSkipping:!1});case"MARK_CONNECTION_COMPLETE":return G(N({},t),{hasCompletedConnection:e.value});case"RESET":return N({},XF);default:return t}}function r2e(t){"use forget";var rM,aM,iM,lM,cM,uM,dM,fM,mM,pM,gM;const e=D.c(203),{isOpen:n,onClose:s,onComplete:o,entrypointData:r,source:a}=t,l=vn(),c=X(u2e),u=a9();let d;e[0]===Symbol.for("react.memo_cache_sentinel")?(d={fetchValidLinksOnly:!0,productSku:An.CONNECTOR_SETTING},e[0]=d):d=e[0];const{connectorLinks:f,refetch:m}=Vo(d),[p,g]=v.useReducer(o2e,XF),h=v.useId(),_=v.useId(),{mutate:x}=pl(!0);let b;e[1]===Symbol.for("react.memo_cache_sentinel")?(b=[],e[1]=b):b=e[1];const[y,S]=v.useState(b),C=r==null?void 0:r.onboarding_config,[w,k]=v.useState(C);let E,T;e[2]!==n||e[3]!==C?(E=()=>{k(n?Rt=>C!=null?C:Rt:C)},T=[n,C],e[2]=n,e[3]=C,e[4]=E,e[5]=T):(E=e[4],T=e[5]),v.useEffect(E,T);const M=C!=null?C:w,A=M==null?void 0:M.connectors_config;A==null||A.connector_ids;let I;e[6]!==(A==null?void 0:A.connector_ids)?(I=(rM=A==null?void 0:A.connector_ids)!=null?rM:[],e[6]=A==null?void 0:A.connector_ids,e[7]=I):I=e[7];const j=I,R=j[0],O=j.length>0,L=te(),B=bt(),U=a!=null?a:"unknown";let H;e[8]!==O?(H=["hero","interests"],O&&H.push("connect"),e[8]=O,e[9]=H):H=e[9];const $=H;let F;e:{if(!$.length){F="hero";break e}F=$.includes(p.step)?p.step:$[0]}const z=F,W=$.indexOf(z);let Y;e[10]!==U?(Y=[{key:"source",value:U}],e[10]=U,e[11]=Y):Y=e[11];const K=Y,Z=v.useRef(null);let J,Q;e[12]!==z||e[13]!==n?(J=()=>{if(!n){Z.current&&(FA(Z.current),Z.current=null);return}Z.current!==z&&(Z.current&&FA(Z.current),nye(z),Z.current=z)},Q=[z,n],e[12]=z,e[13]=n,e[14]=J,e[15]=Q):(J=e[14],Q=e[15]),v.useEffect(J,Q);let ne;e[16]!==s||e[17]!==K?(ne=Rt=>{Rt&&Fe.count(Ue.PULSE,"chatgpt_pulse_onboarding_modal_closed",K),s(Rt)},e[16]=s,e[17]=K,e[18]=ne):ne=e[18];const ie=ne;let fe,ae;e[19]!==n||e[20]!==K?(fe=()=>{n&&Fe.count(Ue.PULSE,"chatgpt_pulse_onboarding_modal_shown",K)},ae=[n,K],e[19]=n,e[20]=K,e[21]=fe,e[22]=ae):(fe=e[21],ae=e[22]),v.useEffect(fe,ae);let le,pe;e[23]!==n?(le=()=>{n||g({type:"RESET"})},pe=[n],e[23]=n,e[24]=le,e[25]=pe):(le=e[24],pe=e[25]),v.useEffect(le,pe);let _e,Ce;e[26]!==$||e[27]!==p.step?(_e=()=>{$.length&&($.includes(p.step)||g({type:"SET_STEP",step:$[0]}))},Ce=[$,p.step],e[26]=$,e[27]=p.step,e[28]=_e,e[29]=Ce):(_e=e[28],Ce=e[29]),v.useEffect(_e,Ce);let ge;e[30]!==$?(ge=$.filter(c2e),e[30]=$,e[31]=ge):ge=e[31];const Re=ge,ke=Re.length;let he;e[32]!==Re?(he=Rt=>{const os=Re.indexOf(Rt);return os===-1?Re.length:os+1},e[32]=Re,e[33]=he):he=e[33];const Ee=he;let Pe;e[34]!==l||e[35]!==p.isCompleting||e[36]!==p.selectedSuggestions||e[37]!==ie||e[38]!==B||e[39]!==o||e[40]!==K||e[41]!==c?(Pe=async Rt=>{p.isCompleting||(Fe.count(Ue.PULSE,"chatgpt_pulse_onboarding_completed",[...K,{key:"reason",value:Rt}]),g({type:"SET_COMPLETING",value:!0}),await c.mutate(p.selectedSuggestions).catch(l2e),await Zc.refetch(l,{useCache:!1}).catch(i2e),o==null||o(),g({type:"SET_COMPLETING",value:!1}),ie(!0),B("/pulse"))},e[34]=l,e[35]=p.isCompleting,e[36]=p.selectedSuggestions,e[37]=ie,e[38]=B,e[39]=o,e[40]=K,e[41]=c,e[42]=Pe):Pe=e[42];const Ae=Pe;let de;e[43]!==$?(de=Rt=>{$.includes(Rt)&&g({type:"SET_STEP",step:Rt})},e[43]=$,e[44]=de):de=e[44];const oe=de;let se;e[45]!==$||e[46]!==W||e[47]!==Ae?(se=async()=>{if(W===-1)return;if(W===$.length-1){await Ae("flow_end");return}const os=$[W+1];os==="connect"&&g({type:"RESET_CONNECTOR_PROGRESS"}),g({type:"SET_STEP",step:os})},e[45]=$,e[46]=W,e[47]=Ae,e[48]=se):se=e[48];const Oe=se;let Ne;e[49]!==$||e[50]!==W?(Ne=()=>{if(W<=0)return;const Rt=$[W-1];g({type:"SET_STEP",step:Rt})},e[49]=$,e[50]=W,e[51]=Ne):Ne=e[51];const ze=Ne;let Qe;e[52]!==oe?(Qe=()=>{sye(),Fe.count(Ue.PULSE,"chatgpt_pulse_onboarding_hero_get_started_clicked"),oe("interests")},e[52]=oe,e[53]=Qe):Qe=e[53];const Le=Qe;let ce;e[54]!==$.length||e[55]!==W||e[56]!==Oe||e[57]!==K?(ce=async()=>{W===$.length-1?rye():oye(),Fe.count(Ue.PULSE,"chatgpt_pulse_onboarding_interests_next_clicked",K),await Oe()},e[54]=$.length,e[55]=W,e[56]=Oe,e[57]=K,e[58]=ce):ce=e[58];const be=ce,He=W>0?ze:void 0;let Ge,nt;e[59]!==z||e[60]!==p.isCheckingConnector||e[61]!==p.isConnecting?(Ge=()=>{z!=="connect"&&(p.isCheckingConnector||p.isConnecting)&&g({type:"RESET_CONNECTOR_PROGRESS"})},nt=[z,p.isCheckingConnector,p.isConnecting],e[59]=z,e[60]=p.isCheckingConnector,e[61]=p.isConnecting,e[62]=Ge,e[63]=nt):(Ge=e[62],nt=e[63]),v.useEffect(Ge,nt);const at=!!He,Xe=z==="interests"?"!bg-[#F3F3F3]":"!bg-white",gt=M==null?void 0:M.onboarding_preview_items;let ht;e[64]!==_||e[65]!==Le||e[66]!==h||e[67]!==gt?(ht={headingId:h,descriptionId:_,onGetStarted:Le,previewItems:gt},e[64]=_,e[65]=Le,e[66]=h,e[67]=gt,e[68]=ht):ht=e[68];const Zt=xye(ht),It=Ee("interests");let lt;e[69]===Symbol.for("react.memo_cache_sentinel")?(lt=(Rt,os)=>{g({type:"SET_SELECTIONS",hasSelection:Rt,selectedSuggestions:os})},e[69]=lt):lt=e[69];let Mt;e[70]!==(M==null?void 0:M.personalized_suggestions)?(Mt=(aM=M==null?void 0:M.personalized_suggestions)!=null?aM:[],e[70]=M==null?void 0:M.personalized_suggestions,e[71]=Mt):Mt=e[71];let Yt;e[72]!==(M==null?void 0:M.generic_suggestions)?(Yt=(iM=M==null?void 0:M.generic_suggestions)!=null?iM:[],e[72]=M==null?void 0:M.generic_suggestions,e[73]=Yt):Yt=e[73];let nn;e[74]!==_||e[75]!==p.hasInterestsSelection||e[76]!==p.isCompleting||e[77]!==p.selectedSuggestions||e[78]!==be||e[79]!==h||e[80]!==It||e[81]!==Mt||e[82]!==Yt||e[83]!==ke?(nn={headingId:h,descriptionId:_,onNext:be,stepIndex:It,totalSteps:ke,isSubmitting:p.isCompleting,hasSelection:p.hasInterestsSelection,selectedSuggestions:p.selectedSuggestions,onSelectionChange:lt,personalizedSuggestions:Mt,genericSuggestions:Yt},e[74]=_,e[75]=p.hasInterestsSelection,e[76]=p.isCompleting,e[77]=p.selectedSuggestions,e[78]=be,e[79]=h,e[80]=It,e[81]=Mt,e[82]=Yt,e[83]=ke,e[84]=nn):nn=e[84];const rn=Hye(nn);let sr;e[85]!==f?(sr=Rt=>f.has(Rt),e[85]=f,e[86]=sr):sr=e[86];const cs=sr;let Gr;if(e[87]!==j||e[88]!==f){let Rt;e[90]!==f?(Rt=os=>f.has(os),e[90]=f,e[91]=Rt):Rt=e[91],Gr=j.some(Rt),e[87]=j,e[88]=f,e[89]=Gr}else Gr=e[89];const js=Gr;let Vr;e[92]!==x?(Vr=Rt=>{const os=e0[Rt];os&&x({setting:os,value:!0})},e[92]=x,e[93]=Vr):Vr=e[93];const pn=Vr;let $n;e[94]!==x?($n=Rt=>{const os=e0[Rt];os&&x({setting:os,value:!1})},e[94]=x,e[95]=$n):$n=e[95];const Ps=$n;let Nl;e[96]!==j||e[97]!==cs?(Nl=Rt=>({connectorIds:j.filter(cs),connectFlow:Rt}),e[96]=j,e[97]=cs,e[98]=Nl):Nl=e[98];const Mo=Nl;let Il;e[99]!==j||e[100]!==Ps||e[101]!==p.isCheckingConnector||e[102]!==p.isCompleting||e[103]!==p.isConnecting||e[104]!==p.isSkipping||e[105]!==Ae||e[106]!==cs?(Il=async()=>{if(p.isConnecting||p.isCompleting||p.isSkipping||p.isCheckingConnector)return;iye(),Fe.count(Ue.PULSE,"chatgpt_pulse_onboarding_connectors_skip_clicked"),j.filter(cs).forEach(Ps),S([]),g({type:"SET_SKIPPING",value:!0}),await Ae("connectors_skipped"),g({type:"SET_SKIPPING",value:!1})},e[99]=j,e[100]=Ps,e[101]=p.isCheckingConnector,e[102]=p.isCompleting,e[103]=p.isConnecting,e[104]=p.isSkipping,e[105]=Ae,e[106]=cs,e[107]=Il):Il=e[107];const Jc=Il;let Pn;e[108]!==Mo||e[109]!==j||e[110]!==pn||e[111]!==p.isCompleting||e[112]!==p.isConnecting||e[113]!==Ae||e[114]!==cs||e[115]!==u||e[116]!==m?(Pn=async()=>{if(!j.length||p.isCompleting||p.isConnecting)return;lye(),Fe.count(Ue.PULSE,"chatgpt_pulse_onboarding_connectors_connect_clicked");const Rt=j.filter(cs),os=j.filter(tK=>!cs(tK));if(Rt.forEach(pn),S(os),os.length===0){UA(Mo(!1)),await Ae("connector_linked");return}g({type:"RESET_CONNECTOR_PROGRESS"}),g({type:"SET_STEP",step:"connect"}),g({type:"SET_CHECKING_CONNECTOR",value:!0});const Gg=os[0];Gg&&u({referrer:ec.PulseOnboarding,connectorId:Gg,showSettingsBehindConnectorLink:!1,noRedirect:!0}),await m()},e[108]=Mo,e[109]=j,e[110]=pn,e[111]=p.isCompleting,e[112]=p.isConnecting,e[113]=Ae,e[114]=cs,e[115]=u,e[116]=m,e[117]=Pn):Pn=e[117];const jl=Pn;let Tg,Mg;e[118]!==j.length||e[119]!==p.isCheckingConnector||e[120]!==m?(Tg=()=>{if(!p.isCheckingConnector||!j.length)return;const Rt=window.setInterval(()=>{m()},1e3);return()=>window.clearInterval(Rt)},Mg=[j.length,p.isCheckingConnector,m],e[118]=j.length,e[119]=p.isCheckingConnector,e[120]=m,e[121]=Tg,e[122]=Mg):(Tg=e[121],Mg=e[122]),v.useEffect(Tg,Mg);let Ag,Ng;e[123]!==z||e[124]!==p.isCheckingConnector||e[125]!==m?(Ag=()=>{if(!p.isCheckingConnector||z!=="connect")return;const Rt=()=>{m()};return window.addEventListener("focus",Rt),()=>window.removeEventListener("focus",Rt)},Ng=[p.isCheckingConnector,z,m],e[123]=z,e[124]=p.isCheckingConnector,e[125]=m,e[126]=Ag,e[127]=Ng):(Ag=e[126],Ng=e[127]),v.useEffect(Ag,Ng);let Ig;e[128]!==Mo||e[129]!==js||e[130]!==z||e[131]!==p.hasCompletedConnection||e[132]!==Ae||e[133]!==y.length?(Ig=()=>{if(!js||p.hasCompletedConnection||z!=="connect"||y.length===0)return;let Rt=!1;return(async()=>(UA(Mo(!0)),Fe.count(Ue.PULSE,"chatgpt_pulse_onboarding_connector_linked"),g({type:"SET_CONNECTING",value:!0}),await Ae("connector_linked"),!Rt&&(g({type:"MARK_CONNECTION_COMPLETE",value:!0}),g({type:"SET_CHECKING_CONNECTOR",value:!1}),g({type:"SET_CONNECTING",value:!1}))))(),()=>{Rt=!0}},e[128]=Mo,e[129]=js,e[130]=z,e[131]=p.hasCompletedConnection,e[132]=Ae,e[133]=y.length,e[134]=Ig):Ig=e[134];let jg;e[135]!==Mo||e[136]!==R||e[137]!==js||e[138]!==z||e[139]!==p.hasCompletedConnection||e[140]!==Ae||e[141]!==y.length?(jg=[js,R,Mo,p.hasCompletedConnection,Ae,z,y.length],e[135]=Mo,e[136]=R,e[137]=js,e[138]=z,e[139]=p.hasCompletedConnection,e[140]=Ae,e[141]=y.length,e[142]=jg):jg=e[142],v.useEffect(Ig,jg);let Pg,Rg;e[143]!==js||e[144]!==z||e[145]!==p.isCheckingConnector?(Pg=()=>{if(!p.isCheckingConnector||z!=="connect"||js)return;const Rt=window.setTimeout(()=>{g({type:"SET_CHECKING_CONNECTOR",value:!1}),g({type:"SET_CONNECTING",value:!1})},3e3);return()=>window.clearTimeout(Rt)},Rg=[p.isCheckingConnector,z,js],e[143]=js,e[144]=z,e[145]=p.isCheckingConnector,e[146]=Pg,e[147]=Rg):(Pg=e[146],Rg=e[147]),v.useEffect(Pg,Rg);let Og,Lg;e[148]!==pn||e[149]!==cs||e[150]!==y?(Og=()=>{if(!y.length)return;const Rt=y.filter(cs);if(!Rt.length)return;Rt.forEach(pn);const os=y.filter(Gg=>!Rt.includes(Gg));S(os)},Lg=[y,cs,pn,S],e[148]=pn,e[149]=cs,e[150]=y,e[151]=Og,e[152]=Lg):(Og=e[151],Lg=e[152]),v.useEffect(Og,Lg);let Xc;e[153]!==((lM=M==null?void 0:M.connectors_config)==null?void 0:lM.connectors_preview_items)?(Xc=(uM=(cM=M==null?void 0:M.connectors_config)==null?void 0:cM.connectors_preview_items)!=null?uM:[],e[153]=(dM=M==null?void 0:M.connectors_config)==null?void 0:dM.connectors_preview_items,e[154]=Xc):Xc=e[154];let Dg;e[155]!==Xc?(Dg=Xc.map(a2e),e[155]=Xc,e[156]=Dg):Dg=e[156];const Ux=Dg,Hx=O?A:null,$x=Ee("connect"),Gx=p.isSkipping&&!p.isConnecting&&!p.isCheckingConnector,Vx=p.isCheckingConnector||p.isConnecting,zx=p.isConnecting||p.isCompleting||p.isCheckingConnector||p.isSkipping,Wx=p.isCompleting||p.isConnecting||p.isCheckingConnector||p.isSkipping||!j.length,qx=(mM=(fM=M==null?void 0:M.connectors_config)==null?void 0:fM.cta_text)!=null?mM:void 0;let Bg;e[157]!==Ux||e[158]!==_||e[159]!==Jc||e[160]!==jl||e[161]!==h||e[162]!==Hx||e[163]!==$x||e[164]!==Gx||e[165]!==Vx||e[166]!==zx||e[167]!==Wx||e[168]!==qx||e[169]!==ke?(Bg={connectorCards:Ux,config:Hx,headingId:h,descriptionId:_,onConnect:jl,onSkip:Jc,stepIndex:$x,totalSteps:ke,isSkipLoading:Gx,isConnectLoading:Vx,disableSkip:zx,disableConnect:Wx,connectCta:qx},e[157]=Ux,e[158]=_,e[159]=Jc,e[160]=jl,e[161]=h,e[162]=Hx,e[163]=$x,e[164]=Gx,e[165]=Vx,e[166]=zx,e[167]=Wx,e[168]=qx,e[169]=ke,e[170]=Bg):Bg=e[170];const eu=mye(Bg);let Fg,Ug;e[171]!==eu||e[172]!==z||e[173]!==Ae?(Fg=()=>{z==="connect"&&!eu&&Ae("connectors_step_missing")},Ug=[eu,Ae,z],e[171]=eu,e[172]=z,e[173]=Ae,e[174]=Fg,e[175]=Ug):(Fg=e[174],Ug=e[175]),v.useEffect(Fg,Ug);let Tf;e:{if(z==="hero"){Tf=Zt;break e}if(z==="interests"){Tf=rn;break e}if(z==="connect"&&eu){Tf=eu;break e}Tf=rn}const Ta=Tf;let Hg;e[176]!==Ta.footerContent?(Hg=Ta.footerContent?i.jsx("div",{className:"flex w-full flex-row justify-start",children:Ta.footerContent}):null,e[176]=Ta.footerContent,e[177]=Hg):Hg=e[177];const Kx=Hg,Yx=(pM=Ta.primaryButton)!=null?pM:null,Zx=(gM=Ta.secondaryButton)!=null?gM:null;let tu;e[178]!==ie?(tu=()=>ie(!0),e[178]=ie,e[179]=tu):tu=e[179];let nu;e[180]!==L?(nu=L.formatMessage(YA.backLabel),e[180]=L,e[181]=nu):nu=e[181];let su;e[182]!==L?(su=L.formatMessage(YA.modalClose),e[182]=L,e[183]=su):su=e[183];let ou;e[184]!==He||e[185]!==Xe||e[186]!==at||e[187]!==tu||e[188]!==nu||e[189]!==su?(ou=i.jsx(cye,{onClose:tu,onBack:He,backAriaLabel:nu,closeAriaLabel:su,showBack:at,showClose:!0,buttonBackgroundClassName:Xe}),e[184]=He,e[185]=Xe,e[186]=at,e[187]=tu,e[188]=nu,e[189]=su,e[190]=ou):ou=e[190];let ru;e[191]!==Ta.content||e[192]!==ou?(ru=i.jsxs("div",{className:"bg-token-bg-primary relative flex max-h-[724px] min-h-[400px] flex-col rounded-2xl",children:[ou,Ta.content]}),e[191]=Ta.content,e[192]=ou,e[193]=ru):ru=e[193];let $g;return e[194]!==_||e[195]!==Kx||e[196]!==ie||e[197]!==h||e[198]!==n||e[199]!==Yx||e[200]!==Zx||e[201]!==ru?($g=i.jsx(en,{testId:"modal-pulse-onboarding",isOpen:n,onClose:ie,contentClassName:"!p-0",className:"max-w-[680px]!",ariaLabelledBy:h,ariaDescribedBy:_,footerClassName:"border-token-border-subtle border-t px-9 py-5 text-sm gap-4",footerIsSpacedBetween:!1,footerHasTopMargin:!1,footerContent:Kx,primaryButton:Yx,secondaryButton:Zx,shouldIgnoreClickOutside:!0,isScrollable:!0,children:ru}),e[194]=_,e[195]=Kx,e[196]=ie,e[197]=h,e[198]=n,e[199]=Yx,e[200]=Zx,e[201]=ru,e[202]=$g):$g=e[202],$g}function a2e(t,e){var s,o,r;let n=(o=(s=t.preview)!=null?s:t.title)!=null?o:"";return n.endsWith(".")&&(n=n.slice(0,-1)),i.jsx(VF,{title:n,imageUrl:t.image_url},(r=t.id)!=null?r:"".concat(t.title,"-").concat(e))}function i2e(){return null}function l2e(){return null}function c2e(t){return t!=="hero"}function u2e(){return s2e()}function d2e(t){return En({queryKey:il.getAutomationQueryKey(t),queryFn:async()=>{const e=await il.getAutomation(t);return eg.setAutomation(t,e),e},enabled:t.length>0})}const eU=er((t,e)=>{const n=oQ(Xp,{selector:o=>tg.getAutomation(e,o)}),s=Gs(()=>d2e(e));return yt(()=>({automation:n()||s().data,error:s().error}))});function Kk(t){const e=vn();return X(()=>eU(e,t))}const ZA="".concat(i9,":DUMMY_PULSE"),p2=je(()=>Me(()=>import("./99ffa85e-j884uby6ernx6rpn.js"),__vite__mapDeps([209,1,2,3,210,159,160,140,17,18,19,141,142,22,143,144,145,146,147,148,149,150,151,152,21,153,154,155,156,157,158])).then(t=>t.PulseFeedbackConversationModal)),g2=je(()=>Me(()=>import("./b464a63d-d6k5bcr3u2gjf6kj.js"),__vite__mapDeps([211,1,140,2,3,17,18,19,141,142,22,143,144,145,146,147,148,149,150,151,152,21,153,154,155,156,157,158,210,159,160])).then(t=>t.PulseCardConversationModal)),Ws=Hn(t=>{const e=st(ZA),n=yt(()=>Pt(e())),s=st(null),o=st(void 0),r=yt(()=>{const k=s();return(k==null?void 0:k.type)===Oa.Card?k.cardId:null}),a=yt(()=>{var k;return((k=s())==null?void 0:k.type)===Oa.Card}),l=yt(()=>{var k;return((k=s())==null?void 0:k.type)===Oa.Feedback}),c=yt(()=>{const k=s();return(k==null?void 0:k.type)===Oa.Feedback?k.feedbackState:null}),u=()=>{QF.set(null)},d=()=>{Xye.set(null)},f=()=>{e.set(ZA)},m=()=>{const k=Kt(()=>n());s.set(null),o.set(void 0),Ku(k),f(),u(),d()},p=()=>{const k=Kt(()=>n());s.set(null),lm()?Ku(k):Yn(g2),f(),u(),d()},g=(k,E)=>{if(s.set({type:Oa.Card,cardId:k}),lm()){const T=Kt(()=>n());kd(T,{type:"pulse",viewType:Oa.Card})}else cv(g2)||rt(g2,{onClose:()=>{E(),p()}})},h=()=>{const k=Kt(()=>n());s.set(null),o.set(void 0),lm()?Ku(k):Yn(p2),f(),u(),d()},_=k=>{switch(k==null?void 0:k.type){case zn.OnCard:o.set({type:"cardReply",cardId:k.cardId});break;case zn.TaskEdit:o.set({type:"sugarboneReply",taskId:k.taskId,composerMessage:k.composerMessage,taskName:Kt(()=>eU(t,k.taskId)).automation.title});break;case zn.Preview:o.set(k.populatePrompt);break;default:o.set(void 0);break}},x=(k=e0e,E)=>{if(E!=null&&E.anchorConversationId&&e.set(E.anchorConversationId),s.set({type:Oa.Feedback,feedbackState:k}),_(k),lm()){const T=Kt(()=>n());kd(T,{type:"pulse",viewType:Oa.Feedback,feedbackViewType:k==null?void 0:k.type})}else cv(p2)||rt(p2,{onClose:h})},b=(k,E)=>{E!=null&&E.anchorConversationId&&e.set(E.anchorConversationId),g(k,()=>{})},y=(k,E)=>{x({type:zn.TaskEdit,taskId:k,composerMessage:E})},S=(k,E)=>{_({type:zn.TaskEdit,taskId:k,composerMessage:E})},C=()=>{o.set(void 0)},w=yt(()=>{const k=o();return(k==null?void 0:k.type)!=="sugarboneReply"?null:k.taskId});return{autoSendCompletion:void 0,shouldAutoSendCompletion$:st(!1),populatePrompt$:o,clearPopulatePrompt:C,activeCardId$:r,viewState$:s,isCardViewOpen$:a,_openCardView:g,openCardView:b,selectedTaskReplyId$:w,isFeedbackViewOpen$:l,feedbackViewState$:c,openFeedbackView:x,openTaskView:y,prefillTaskReply:S,_closeCardView:p,closeFeedbackView:h,clearState:m}}),tU=yt(()=>{var e;const{data:t}=cg();return Iw((e=t==null?void 0:t.items)!=null?e:[])}),f2e=yt(()=>tU().find(t=>t.id===Ws().activeCardId$()));var Td=(t=>(t.Sidebar="sidebar",t.Chat="chat",t.Url="url",t.AnnouncementBanner="announcement_banner",t))(Td||{});const tx=st(void 0);function m2e(t){"use forget";const e=D.c(13),{onClose:n,source:s,entrypointData:o}=t,r=vn();let a;e[0]!==r||e[1]!==o?(a=()=>{var f;if(o)return o;if(KL())return(f=Zc(r).data)!=null?f:void 0},e[0]=r,e[1]=o,e[2]=a):a=e[2];const l=X(a);if(!l)return null;let c;e[3]!==n?(c=f=>{f&&n()},e[3]=n,e[4]=c):c=e[4];let u;e[5]!==n||e[6]!==s?(u=()=>{s!=="unknown"&&tx.set(s),Qd("/pulse"),n()},e[5]=n,e[6]=s,e[7]=u):u=e[7];let d;return e[8]!==l||e[9]!==s||e[10]!==c||e[11]!==u?(d=i.jsx(r2e,{isOpen:!0,entrypointData:l,source:s,onClose:c,onComplete:u}),e[8]=l,e[9]=s,e[10]=c,e[11]=u,e[12]=d):d=e[12],d}function nU({source:t,entrypointData:e}){rt(m2e,{source:t,entrypointData:e})}const ys=Hn(t=>{let e;return Ar(()=>{var n,s,o,r;return(r=(o=(n=cg().data)==null?void 0:n.id)!=null?o:(s=Zc(t).data)==null?void 0:s.id)!=null?r:void 0},n=>{e=n},{fireImmediately:!0}),{logEventWithStatsig:(n,s,o)=>{const r=e?G(N({},o),{feed_id:e}):o;V.logEventWithStatsig(n,s,r)}}});var sU=(t=>(t.NOT_STARTED="not_started",t.SUBMITTED_PENDING_FEED="submitted_pending_feed",t.FINISHED_WITH_FEED="finished_with_feed",t))(sU||{});const p2e=Sa(Ie.HasSeenPulseOnboardingModal,()=>!1);function g2e(t){"use forget";const e=D.c(2),{iconOnly:n}=t;if(!X(zc))return null;let o;return e[0]!==n?(o=i.jsx(h2e,{iconOnly:n}),e[0]=n,e[1]=o):o=e[1],o}function h2e(t){"use forget";const e=D.c(14),{iconOnly:n}=t,s=te(),o=Ade(),r=vn(),l=X(_2e);let c;e[0]!==s?(c=s.formatMessage({id:"zEGHd1",defaultMessage:"Pulse"}),e[0]=s,e[1]=c):c=e[1];const u=c;let d;e[2]===Symbol.for("react.memo_cache_sentinel")?(d=xe("4087025484"),e[2]=d):d=e[2];const f=d;let m;e[3]!==r?(m=()=>Zc(r,{useCache:!f}),e[3]=r,e[4]=m):m=e[4];const{data:p}=X(m);let g;e[5]===Symbol.for("react.memo_cache_sentinel")?(g=ef("/pulse"),e[5]=g):g=e[5];let h;e[6]!==l||e[7]!==p?(h=x=>{const b=p==null?void 0:p.onboarding_status,y=f&&b===sU.NOT_STARTED;y?(x.preventDefault(),l&&x.stopPropagation(),ys().logEventWithStatsig("(Web) Onboarding Opened From Sidebar","chatgpt_web_fyp_onboarding_opened_from_sidebar"),nU({source:Td.Sidebar,entrypointData:p!=null?p:void 0}),p2e.set(!0)):(p||!y)&&(ys().logEventWithStatsig("(Web) Feed Opened From Sidebar","chatgpt_web_fyp_feed_opened_from_sidebar"),tx.set(Td.Sidebar))},e[6]=l,e[7]=p,e[8]=h):h=e[8];let _;return e[9]!==n||e[10]!==o||e[11]!==u||e[12]!==h?(_=i.jsx(i.Fragment,{children:i.jsx(zs,{"data-testid":"sidebar-item-pulse",icon:lg,to:g,onClick:h,label:u,active:o,iconOnly:n})}),e[9]=n,e[10]=o,e[11]=u,e[12]=h,e[13]=_):_=e[13],_}function _2e(){return Qo()}const nx=re(me,"266724",20,20);function oU(t){return Vt(t).state.doc.textContent}function x2e(t){return new Promise((e,n)=>{const s=new Image;s.crossOrigin="anonymous",s.fetchPriority="high",s.onload=()=>{e(s)},s.onerror=o=>{n(o)},s.src=t})}function rU(t,e,n){return Ar(t,s=>{s.status==="success"&&!s.isPlaceholderData&&typeof s.data!="function"&&e.set(n(s.data))})}const aU=25,y2e=4,iU="__optimistic__",lU=1440*60*1e3,cU=t=>t<1e12?t*1e3:t;function xat(t){switch(t){case"image_card":return Yg.CHATGPT_IMAGE_PROMPT_GROUP_PRESENTATION_TYPE_IMAGE_CARD;case"portrait":return Yg.CHATGPT_IMAGE_PROMPT_GROUP_PRESENTATION_TYPE_PORTRAIT;case"text_pill":return Yg.CHATGPT_IMAGE_PROMPT_GROUP_PRESENTATION_TYPE_TEXT_PILL;case"icon_pill":return Yg.CHATGPT_IMAGE_PROMPT_GROUP_PRESENTATION_TYPE_ICON_PILL;default:return}}function yat(){return Je("3360722522").get("auto_send_with_attachments",!1)}function b2e(){return Je("3360722522").get("cache_recent_images",!1)}function QA(){return Je("3360722522").get("cache_recent_uploads",!1)}function v2e(){return En({queryKey:["imagesStyles"],queryFn:()=>ue.safeGet("/images/styles",{authOption:Ot.SendIfAvailable})})}const JA=Hn(()=>({current:!1}));function S2e(){return En({queryKey:["imageGenPrompts"],queryFn:async()=>{var n,s,o;const t=await ue.safeGet("/images/init",{authOption:Ot.SendIfAvailable}),e=(o=(s=(n=t.groups)==null?void 0:n[0])==null?void 0:s.items)==null?void 0:o[0].image_url;return e&&!JA().current&&(x2e(e),JA().current=!0),t}})}async function bat(t,e,n){const s=await I2e(t,e,n);Zn().setQueryData(["recentImages"],r=>{if(!r)return r;const[a,...l]=r.pages;if(a!=null&&a.items.some(u=>u.id===s.id))return r;const c=a?G(N({},a),{items:[s,...a.items]}):{items:[s],cursor:null};return G(N({},r),{pages:[c,...l]})})}const uU=Sa(Ie.RecentUploads,()=>({items:[],accountId:null,v:"1"})),Xh="1",Yk="1",C2e=yt(()=>{var o;const t=uU(),e=Et(),n=Date.now();return(e==null?void 0:e.id)!==t.accountId||t.v!==Xh?{items:[],accountId:null,v:Xh}:{items:t.items.filter(r=>cU(r.timestamp)>n-lU),accountId:(o=e==null?void 0:e.id)!=null?o:null,v:Xh}});function w2e(t,e){const n={limit:e};return En({queryKey:["recentUploads",e],staleTime:120*1e3,placeholderData:t?()=>({items:Kt(()=>C2e()).items}):void 0,queryFn:()=>ue.safeGet("/my/recent/uploaded_images",{parameters:{query:n}}),select:s=>s.items})}const vat=yp(()=>{const t=QA(),e=Et(),n=Gs(()=>w2e(QA(),y2e));return t&&rU(n,uU,s=>{var o;return{items:s,accountId:(o=e==null?void 0:e.id)!=null?o:null,v:Xh}}),n});function k2e(t){return aK({queryKey:["recentImages"],staleTime:120*1e3,queryFn:({pageParam:e})=>ue.safeGet("/my/recent/image_gen",{authOption:Ot.SendIfAvailable,parameters:{query:{limit:aU,after:e}}}),placeholderData:t?()=>({pages:[{items:Kt(()=>E2e()),cursor:null}],pageParams:[null]}):void 0,enabled:()=>mt(),initialPageParam:null,getNextPageParam:e=>{var n;return(n=e.cursor)!=null?n:void 0},select:e=>e.pages.flatMap(n=>n.items).map(n=>N2e(n))})}const sx=Gs(v2e),dU=Gs(S2e),fU=Sa(Ie.RecentImages,()=>({items:[],accountId:null,v:Yk})),E2e=yt(()=>{const t=fU(),e=Et(),n=Date.now();return(e==null?void 0:e.id)!==t.accountId||t.v!==Yk?[]:t.items.filter(s=>typeof s.created_at!="number"?!0:cU(s.created_at)>n-lU)}),T2e=yp(()=>{const t=b2e(),e=Et(),n=rQ(()=>k2e(t));return t&&rU(n,fU,s=>{var r;return{items:(s!=null?s:[]).filter(a=>!a.id.startsWith(iU)).map(c=>{var u=c,{createdAt:a}=u,l=De(u,["createdAt"]);return l}).slice(0,aU),accountId:(r=e==null?void 0:e.id)!=null?r:null,v:Yk}}),n}),Sat=yt(()=>{var a,l,c,u,d;const t=sx(),e=dU(),n=new Set(((l=(a=t.data)==null?void 0:a.styles)!=null?l:[]).map(f=>f.id)),o=((d=(u=(c=e.data)==null?void 0:c.groups)==null?void 0:u.flatMap(f=>{var m;return(m=f.items)==null?void 0:m.map(p=>G(N({},p),{group:f}))}))!=null?d:[]).filter(bp).filter(f=>f.id!=null&&n.has(f.id)),r=Object.fromEntries(o.map(f=>[f.id,f.group]));return{items:o,itemToGroup:r}});function Cat(t){var e;return{id:t.id,title:t.title,label:t.title,imageUrl:(e=t.image_url)!=null?e:"",width:void 0,height:void 0,textToImagePrompt:t.prompt_text,imageToImagePrompt:t.prompt_text}}function M2e(t,e){var s,o;const n={};for(const r of Object.values(e!=null?e:{}))for(const a of(s=r.items)!=null?s:[])a!=null&&a.id&&(n[a.id]={id:a.id,image_url:(o=a.image_url)!=null?o:"",prompt_text:a.prompt_text});return(t!=null?t:[]).map(r=>{var u,d;const a=r.id,l=n[a],c=(u=r.variants)==null?void 0:u[0];return{id:a,title:r.title,label:r.title,imageUrl:(d=c==null?void 0:c.url)!=null?d:l==null?void 0:l.image_url,width:c==null?void 0:c.width_px,height:c==null?void 0:c.height_px,textToImagePrompt:l==null?void 0:l.prompt_text,imageToImagePrompt:l==null?void 0:l.prompt_text}})}const A2e=yt(()=>{var n,s,o,r;const t=sx(),e=dU();return M2e((s=(n=t.data)==null?void 0:n.styles)!=null?s:[],(r=(o=e.data)==null?void 0:o.groups)!=null?r:[])});function N2e(t){var e,n,s,o,r,a,l,c;return G(N({},t),{archived:(e=t.is_archived)!=null?e:!1,messageId:(n=t.message_id)!=null?n:null,conversationId:(s=t.conversation_id)!=null?s:void 0,transformationId:(o=t.transformation_id)!=null?o:null,assetPointer:(r=t.asset_pointer)!=null?r:null,thumbnail:(c=(l=(a=t.encodings)==null?void 0:a.thumbnail)==null?void 0:l.path)!=null?c:null,createdAt:t.created_at?new Date(t.created_at*1e3):void 0})}const wat=yt(()=>{const t=T2e();return{images:t.data,isLoading:t.status==="pending",hasNextPage:t.hasNextPage,isFetchingNextPage:t.isFetchingNextPage,fetchNextPage:t.fetchNextPage,refetch:t.refetch}});async function I2e(t,e,n){var a,l,c;const s=Zn(),o=await wl.fetch(s,{asset:e,conversationId:t}),r=(c=(l=(a=e.metadata)==null?void 0:a.dalle)==null?void 0:l.gen_id)!=null?c:"";return G(N({},o),{id:"".concat(iU).concat(e.asset_pointer),generation_id:r,generation_type:"image_gen",created_at:Date.now(),message_id:n.id,conversation_id:t,transformation_id:r})}const j2e=Hn(()=>({isShowingHiddenImages$:st(!1)})),kat=Bn(()=>st({promptItem:null,group:null})),Eat=vp(()=>st(null));function Tat(t){return Array.from(new Set(t)).sort().join(",")}const P2e=vp(()=>st([]));function Mat(){j2e().isShowingHiddenImages$.set(t=>!t)}function Aat(){return Je("3360722522").get("composer_suggestions",!1)}function R2e(){return Je("3360722522").get("show_new_badge",!1)}const Nat=st(!1);function mU(){return Je("3360722522").get("images_home_entrypoint_enabled",!1)}function Iat(){return Je("3360722522").get("imagegen_loading_shimmer",!1)}function O2e(){return mU()?"/images":"/library"}const L2e=t=>({visible$:yt(()=>t().activeSystemHintType===Ke.PictureV2)}),jat=()=>{"use forget";const t=D.c(2),e=Wd.useStoreSignal();let n;t[0]!==e?(n=()=>L2e(e),t[0]=e,t[1]=n):n=t[1];const[s]=v.useState(n);return s},Pat=tf(t=>({setImageStyle$:n=>{const{style:s,isEditingImage:o}=n,r=Vt(t),a=oU(t),l=o?s.imageToImagePrompt:s.textToImagePrompt;if(V.logEventWithStatsig("chatgpt_imagegen_preset_style_selected","chatgpt_imagegen_preset_style_selected",{style_id:s.id,source:"image-gen-story"}),a.trim()===""){l9(r,l);return}const c=a.toLowerCase(),u=A2e();for(const{textToImagePrompt:d,imageToImagePrompt:f}of u){const p=[d,f].map(g=>{const h=c.indexOf(g.toLowerCase());return h===-1?null:{start:h,end:h+g.length}}).filter(Boolean);if(p.length){const g=Math.min(...p.map(x=>{var b;return(b=x==null?void 0:x.start)!=null?b:0})),h=Math.max(...p.map(x=>{var b;return(b=x==null?void 0:x.end)!=null?b:0})),_=a.substring(g,h).trimEnd();c9(r,_,l);return}}u9(r,l)}})),D2e=t=>{"use forget";var b,y;const e=D.c(9),{iconOnly:n}=t,s=o3();let o;e[0]===Symbol.for("react.memo_cache_sentinel")?(o=(b=Et())==null?void 0:b.getWorkspaceId(),e[0]=o):o=e[0];const r=o,a=s&&r!=null,{data:l}=Lc(a?r:void 0),c=!a||((y=l==null?void 0:l.permissions)==null?void 0:y.includes(Xi.ImageGenAccess));let u;e[1]===Symbol.for("react.memo_cache_sentinel")?(u=mU(),e[1]=u):u=e[1];const d=u,f=O2e(),m=ef(f).toString(),p=jn().pathname.startsWith(f);if(!c&&!hc())return null;let g;e[2]===Symbol.for("react.memo_cache_sentinel")?(g=R2e()?i.jsx(P,{id:"image-gen.images-app.my-images.sidebar-badge",defaultMessage:"New"}):void 0,e[2]=g):g=e[2];let h,_;e[3]===Symbol.for("react.memo_cache_sentinel")?(h={source:a3.CHATGPT_IMAGE_HOME_NAVIGATION_SOURCE_TYPE_SIDE_BAR},_=d?i.jsx(P,{id:"fVw/us",defaultMessage:"Images"}):i.jsx(P,{id:"E56n+Q",defaultMessage:"Library"}),e[3]=h,e[4]=_):(h=e[3],_=e[4]);let x;return e[5]!==n||e[6]!==p||e[7]!==m?(x=i.jsx(zs,{"data-testid":"sidebar-item-library",onClick:B2e,badge:g,active:p,icon:nx,to:m,state:h,label:_,iconOnly:n}),e[5]=n,e[6]=p,e[7]=m,e[8]=x):x=e[8],x};function B2e(){V.logStructuredEvent(aQ,{menuItem:iQ.CHATGPT_SIDEBAR_MENU_ITEM_IMAGE_HOME})}const pU="/archived";function F2e(){"use forget";return yC(pU)!=null}function U2e(){"use forget";const t=D.c(6),e=te(),n=F2e();let s;t[0]===Symbol.for("react.memo_cache_sentinel")?(s=ef(pU),t[0]=s):s=t[0];let o;t[1]!==e?(o=e.formatMessage(H2e),t[1]=e,t[2]=o):o=t[2];let r;return t[3]!==n||t[4]!==o?(r=i.jsx(zs,{icon:Qge,to:s,active:n,label:o}),t[3]=n,t[4]=o,t[5]=r):r=t[5],r}const H2e=qe({id:"WvXi2t",defaultMessage:"Archived chats"});function $2e(){const t=vn();return X(()=>{var e,n;return(n=(e=Jye(t))==null?void 0:e.data)!=null?n:void 0})}function G2e({fps:t=6,isAnimating:e=!0,className:n}){const s=(1/t).toFixed(4),o=(3/t).toFixed(4);return i.jsx("div",{className:q(n,"grid h-full w-full place-items-center"),children:i.jsxs("svg",{viewBox:"0 0 9 9",role:"img","aria-label":"Pixel star",focusable:"false",className:q("starburst",e?"starburst--animating":"starburst--static"),style:{display:"block",shapeRendering:"crispEdges","--frame":"".concat(s,"s"),"--cycle":"".concat(o,"s")},children:[i.jsx("style",{children:"\n          .starburst .px {\n            fill: var(--text-primary);\n          }\n\n          .starburst .frame {\n            opacity: 0;\n          }\n\n          .starburst--animating .frame {\n            animation: frames var(--cycle) steps(1, end) infinite;\n          }\n\n          .starburst--animating .f1 { animation-delay: 0s; }\n          .starburst--animating .f2 { animation-delay: var(--frame); }\n          .starburst--animating .f3 { animation-delay: calc(var(--frame) * 2); }\n\n          .starburst--static .f3 {\n            opacity: 1;\n          }\n\n          @keyframes frames {\n            0%   { opacity: 1; }\n            33%  { opacity: 1; }\n            34%  { opacity: 0; }\n            100% { opacity: 0; }\n          }\n        "}),i.jsx(V2e,{}),i.jsx(z2e,{}),i.jsx(W2e,{})]})})}function V2e(){return i.jsxs("g",{className:"frame f1",children:[i.jsx("rect",{className:"px",x:"4",y:"4",width:"1",height:"1"}),i.jsx("rect",{className:"px",x:"4",y:"3",width:"1",height:"1"}),i.jsx("rect",{className:"px",x:"4",y:"5",width:"1",height:"1"}),i.jsx("rect",{className:"px",x:"3",y:"4",width:"1",height:"1"}),i.jsx("rect",{className:"px",x:"5",y:"4",width:"1",height:"1"})]})}function z2e(){return i.jsxs("g",{className:"frame f2",children:[i.jsx("rect",{className:"px",x:"4",y:"4",width:"1",height:"1"}),i.jsx("rect",{className:"px",x:"4",y:"2",width:"1",height:"1"}),i.jsx("rect",{className:"px",x:"4",y:"3",width:"1",height:"1"}),i.jsx("rect",{className:"px",x:"4",y:"5",width:"1",height:"1"}),i.jsx("rect",{className:"px",x:"4",y:"6",width:"1",height:"1"}),i.jsx("rect",{className:"px",x:"2",y:"4",width:"1",height:"1"}),i.jsx("rect",{className:"px",x:"3",y:"4",width:"1",height:"1"}),i.jsx("rect",{className:"px",x:"5",y:"4",width:"1",height:"1"}),i.jsx("rect",{className:"px",x:"6",y:"4",width:"1",height:"1"}),i.jsx("rect",{className:"px",x:"3",y:"3",width:"1",height:"1"}),i.jsx("rect",{className:"px",x:"5",y:"3",width:"1",height:"1"}),i.jsx("rect",{className:"px",x:"3",y:"5",width:"1",height:"1"}),i.jsx("rect",{className:"px",x:"5",y:"5",width:"1",height:"1"})]})}function W2e(){return i.jsxs("g",{className:"frame f3",children:[i.jsx("rect",{className:"px",x:"1",y:"1",width:"1",height:"1"}),i.jsx("rect",{className:"px",x:"7",y:"1",width:"1",height:"1"}),i.jsx("rect",{className:"px",x:"1",y:"7",width:"1",height:"1"}),i.jsx("rect",{className:"px",x:"7",y:"7",width:"1",height:"1"}),i.jsx("rect",{className:"px",x:"4",y:"0",width:"1",height:"1"}),i.jsx("rect",{className:"px",x:"4",y:"8",width:"1",height:"1"}),i.jsx("rect",{className:"px",x:"0",y:"4",width:"1",height:"1"}),i.jsx("rect",{className:"px",x:"8",y:"4",width:"1",height:"1"}),i.jsx("rect",{className:"px",x:"3",y:"4",width:"1",height:"1"}),i.jsx("rect",{className:"px",x:"5",y:"4",width:"1",height:"1"}),i.jsx("rect",{className:"px",x:"4",y:"3",width:"1",height:"1"}),i.jsx("rect",{className:"px",x:"4",y:"5",width:"1",height:"1"})]})}function q2e({iconOnly:t}){const e=te(),n=$2e(),s=n==null?void 0:n.conversationId,o="/c/".concat(s),r=!!yC(o),[a,l]=v.useState(!1);return s?i.jsx(zs,{onMouseEnter:()=>l(!0),onMouseLeave:()=>l(!1),"data-testid":"sidebar-item-yywc",active:r,icon:i.jsx(G2e,{isAnimating:a}),to:o,label:e.formatMessage({id:"OM9PNa",defaultMessage:"Your Year With ChatGPT"}),iconOnly:t}):null}function K2e({iconOnly:t}){return!b1("cocoon")||!xe("2095603192")?null:i.jsx(q2e,{iconOnly:t})}function Qc({axis:t,debounce:e,initialSize:n=!0,onChange:s,target:o}){if(!o)return;let r=new AbortController,a=null,l=null,c=n;const u=new ResizeObserver(f=>{f.forEach(m=>{const{width:p,height:g}=Y2e(m);let h=!1;if(t==="width"){const _=(c||a!=null)&&a!==p;a=p,_&&(h=!0)}else if(t==="height"){const _=(c||l!=null)&&l!==g;l=g,_&&(h=!0)}else if(t==="both"){const _=(c||a!=null)&&a!==p,x=(c||l!=null)&&l!==g;a=p,l=g,(_||x)&&(h=!0)}if(c=!1,h)if(!e)s({width:p,height:g,previousWidth:a,previousHeight:l},m);else{r.abort(),r=new AbortController;const _=r.signal;requestAnimationFrame(()=>{_.aborted||s({width:p,height:g,previousWidth:a,previousHeight:l},m)})}})});function d(){try{u.disconnect()}catch(f){}}return u.observe(o),d}function Y2e(t){let e,n;if(t.borderBoxSize){const s=Array.isArray(t.borderBoxSize)?t.borderBoxSize[0]:t.borderBoxSize;e=s.inlineSize,n=s.blockSize}else e=t.contentRect.width,n=t.contentRect.height;return{width:e,height:n}}function Rat(t){return e=>Qc(G(N({},t),{target:e}))}const Z2e=je(()=>Me(()=>import("./2c0ba89a-km94u7flwx6jxpjr.js"),__vite__mapDeps([212,1,94,2,3,95,96,68,26,27,28,33,69,65,29,36,213,97,98,214])).then(t=>t.ShoppingCartSidebarItem),{loading:()=>null}),Q2e=st(null),Oat=()=>{"use forget";const t=D.c(16);let e;t[0]===Symbol.for("react.memo_cache_sentinel")?(e=_c()&&as(),t[0]=e):e=t[0];const n=e,s=v.useRef(null);let o,r;t[1]===Symbol.for("react.memo_cache_sentinel")?(o=()=>{if(s.current)return Qc({axis:"height",target:s.current,onChange:ebe})},r=[],t[1]=o,t[2]=r):(o=t[1],r=t[2]),v.useEffect(o,r);let a,l,c,u,d,f,m,p,g,h,_,x;t[3]===Symbol.for("react.memo_cache_sentinel")?(f=i.jsx(J2e,{}),m=i.jsx(X2e,{}),p=i.jsx(K2e,{}),g=i.jsx(g2e,{}),h=!1,_=!1,x=i.jsx(D2e,{}),a=i.jsx(Z2e,{}),l=!1,c=!1,u=n&&i.jsx(U2e,{}),d=!1,t[3]=a,t[4]=l,t[5]=c,t[6]=u,t[7]=d,t[8]=f,t[9]=m,t[10]=p,t[11]=g,t[12]=h,t[13]=_,t[14]=x):(a=t[3],l=t[4],c=t[5],u=t[6],d=t[7],f=t[8],m=t[9],p=t[10],g=t[11],h=t[12],_=t[13],x=t[14]);let b;return t[15]===Symbol.for("react.memo_cache_sentinel")?(b=i.jsxs(hxe,{first:!0,ref:s,className:"tall:sticky tall:top-header-height tall:z-20 not-tall:relative bg-(--sidebar-mask-bg,var(--bg-elevated-secondary)) [--sticky-spacer:6px]",children:[f,m,p,g,h,_,x,a,l,c,u,d,i.jsx("div",{"aria-hidden":!0,className:q("pointer-events-none absolute start-0 end-0","-bottom-(--sticky-spacer) h-(--sticky-spacer)","opacity-0 will-change-[opacity] group-data-scrolled-from-top/scrollport:opacity-100","bg-(--sidebar-mask-bg,var(--bg-elevated-secondary))")})]}),t[15]=b):b=t[15],b},J2e=t=>{"use forget";const e=D.c(9),{iconOnly:n}=t,s=te(),o=Ik();let r;e[0]!==o?(r=f=>{V.logEvent("Sidebar Click Gizmo",{gizmo_id:"primary"}),Sk(f,{location:o!=null?o:"Sidebar gizmo list"})},e[0]=o,e[1]=r):r=e[1];const a=r;let l;e[2]!==s?(l=s.formatMessage({id:"6Abeg/",defaultMessage:"New chat"}),e[2]=s,e[3]=l):l=e[3];const c=l,u=ek();let d;return e[4]!==a||e[5]!==n||e[6]!==c||e[7]!==u?(d=i.jsx(zs,{"data-testid":"create-new-chat-button",to:"/",state:u,onClick:a,icon:Bp,label:c,keyBinding:oF,iconOnly:n}),e[4]=a,e[5]=n,e[6]=c,e[7]=u,e[8]=d):d=e[8],d},X2e=({iconOnly:t})=>{"use no forget";const e=te(),{isFannyPackEnabled:n}=wk(),s=Ik(),r=X(()=>Qo());if(v.useEffect(()=>{n&&(Ve.addAction("fannypack.web.action_seen"),Me(()=>import("./ed836a35-b0tuygth4wutqabp.js").then(l=>l.a),__vite__mapDeps([215,216,2,1,3])))},[n]),!n&&!hc())return null;const a=e.formatMessage({id:"bDEsvT",defaultMessage:"Search chats"});return i.jsx(kc,{onClick:l=>{r&&(l.preventDefault(),l.stopPropagation()),Me(()=>import("./ed836a35-b0tuygth4wutqabp.js").then(c=>c.a),__vite__mapDeps([215,216,2,1,3])).then(c=>c.openFannyPackSearch()),V.logEventWithStatsig("chatgpt_web_search_sidebar_item_clicked","chatgpt_web_search_sidebar_item_clicked",{location:s})},icon:o_,label:a,keyBinding:w0e,iconOnly:t})};function ebe(t){const{height:e}=t;v.startTransition(()=>{Q2e.set(e)})}const ox=t=>{v.useEffect(t,[])},tbe=re(me,"d6b1ab",20,20),h2={minRating:null,openNowOnly:!1};class nbe{constructor(e){ye(this,"isOpen$",Rs(!1));ye(this,"currentMessageId$",Rs(void 0));ye(this,"mapMessageId$",Rs(void 0));ye(this,"contentReferenceStartIndex$",Rs(void 0));ye(this,"wasSidebarOpen$",Rs(!1));ye(this,"turnIndex$",Rs(-1));ye(this,"businesses$",Rs(void 0));ye(this,"filtersState$",Rs(h2));ye(this,"filters$",MM(()=>{var e;return(e=this.filtersState$())!=null?e:h2},{equals:Ji}));ye(this,"filteredBusinesses$",MM(()=>{const e=this.businesses$();if(!e)return;const{minRating:n,openNowOnly:s}=this.filters$();return n==null&&!s?e:e.filter(o=>{const{rating:r,is_open:a}=o.entity_data;return!(n!=null&&(r==null||Number.isNaN(r)||r<n)||s&&a!==!0)})},{equals:Ji}));ye(this,"additionalBusinessesMergeMode$",Rs("replace"));ye(this,"hasRequestedNewData$",Rs(!1));ye(this,"showNonPreferredBusinesses$",Rs(!1));ye(this,"openPopoverBusinessId$",Rs(null));ye(this,"hoveredBusinessId$",Rs(null));ye(this,"isLoadingNewData$",Rs(!1));ye(this,"initialViewState$",Rs(void 0));ye(this,"currentViewState$",Rs(void 0));this.conversation=e}open$(){this.isOpen$.set(!0)}close$(){this.isOpen$.set(!1)}toggleIsOpen$(){this.isOpen$.set(!this.isOpen$())}setOverlayState$({messageId:e,contentReferenceStartIndex:n,businesses:s,wasSidebarOpen:o,turnIndex:r,viewState:a}){this.resetFilters$(),this.currentMessageId$.set(e),this.mapMessageId$.set(e),this.contentReferenceStartIndex$.set(n),this.businesses$.set(s),this.turnIndex$.set(r),o!==void 0&&this.wasSidebarOpen$.set(o),a&&(this.initialViewState$.set(a),this.currentViewState$.set(a))}setViewState$({viewState:e}){this.currentViewState$.set(e)}setBusinesses$(e){this.businesses$.set(e)}setFilters$(e){const n=this.filters$();this.filtersState$.set(N(N({},n),e))}setAdditionalBusinessesMergeMode$(e){this.additionalBusinessesMergeMode$.set(e!=null?e:"replace")}setCurrentMessageId$(e){this.currentMessageId$.set(e)}setMapMessageId$(e){this.mapMessageId$.set(e)}setContentReferenceStartIndex$(e){this.contentReferenceStartIndex$.set(e)}setShowNonPreferredBusinesses$(e){this.showNonPreferredBusinesses$.set(e)}setOpenPopoverBusinessId$(e){this.openPopoverBusinessId$.set(e)}setHoveredBusinessId$(e){this.hoveredBusinessId$.set(e)}setTurnIndex$(e){this.turnIndex$.set(e)}setHasRequestedNewData$(e){this.hasRequestedNewData$.set(e),e?(this.isLoadingNewData$.set(!0),this.showNonPreferredBusinesses$.set(!1)):this.isLoadingNewData$.set(!1)}setIsLoadingNewData$(e){this.isLoadingNewData$.set(e)}reset$(){this.isOpen$.set(!1),this.currentMessageId$.set(void 0),this.mapMessageId$.set(void 0),this.contentReferenceStartIndex$.set(void 0),this.businesses$.set(void 0),this.openPopoverBusinessId$.set(null),this.hoveredBusinessId$.set(null),this.resetFilters$(),this.turnIndex$.set(-1),this.initialViewState$.set(void 0),this.currentViewState$.set(void 0)}resetFilters$(){this.filtersState$.set(N({},h2))}}const Zk=vp(t=>new nbe(t));class no extends ml()(()=>({history:[],historyIndex:-1,historyScrollTops:[],historyFullWidthImageHeights:[]})){appendOrReplaceActive(e,n=Z1){const{history:s,historyIndex:o,historyScrollTops:r,historyFullWidthImageHeights:a}=this.getState();if(o>=0&&n(s[o],e)){const c=[...s];c[o]=e,this.setState({history:c});return}const l=o>=0?s.slice(0,o+1):[];this.setState({history:[...l,e],historyScrollTops:[...r.slice(0,Math.max(0,o+1)),0],historyFullWidthImageHeights:[...a.slice(0,Math.max(0,o+1)),null],historyIndex:l.length})}setActiveIndex(e){const{history:n}=this.getState();e<0||e>=n.length||this.setState({historyIndex:e})}setScrollTopForActive(e){const{historyIndex:n,historyScrollTops:s}=this.getState();if(n<0)return;const o=[...s];o[n]=e,this.setState({historyScrollTops:o})}setFullWidthImageHeightForIndex(e,n){const{history:s,historyFullWidthImageHeights:o}=this.getState();if(e<0||e>=s.length)return;const r=[...o];r[e]=n,this.setState({historyFullWidthImageHeights:r})}setFullWidthImageHeightForActive(e){const{historyIndex:n}=this.getState();this.setFullWidthImageHeightForIndex(n,e)}reset(){this.setState({history:[],historyIndex:-1,historyScrollTops:[],historyFullWidthImageHeights:[]})}goBack(e){const{historyIndex:n,history:s}=this.getState();n<=0||(this.setActiveIndex(n-1),e(s[n-1]))}goToHistoryIndex(e,n){const{history:s}=this.getState();e<0||e>=s.length||(this.setActiveIndex(e),n(s[e]))}closeThreadSidebar(e){this.reset(),e()}}ye(no,"selectCanGoBack",e=>e.historyIndex>0),ye(no,"selectBackHistory",e=>e.history.slice(0,Math.max(0,e.historyIndex))),ye(no,"selectCurrentHistoryScrollTop",e=>{var n;return e.historyIndex>=0&&(n=e.historyScrollTops[e.historyIndex])!=null?n:0}),ye(no,"selectCurrentHistoryFullWidthImageHeight",e=>{var n;return e.historyIndex>=0&&(n=e.historyFullWidthImageHeights[e.historyIndex])!=null?n:null});function gU(){const{openThreadSidebar:t,closeThreadSidebar:e}=bi(),n=s0e(),s=no.useStore(),o=no.useState(no.selectCanGoBack),r=no.useState(no.selectBackHistory),a=no.useState(no.selectCurrentHistoryScrollTop),l=no.useState(no.selectCurrentHistoryFullWidthImageHeight),c=no.useState(_=>_.historyIndex);v.useEffect(()=>{n&&s.appendOrReplaceActive(n)},[n,s]);const u=v.useCallback(()=>s.goBack(t),[s,t]),d=v.useCallback(_=>s.goToHistoryIndex(_,t),[s,t]),f=v.useCallback(_=>s.setScrollTopForActive(_),[s]),m=v.useCallback(_=>s.setFullWidthImageHeightForActive(_),[s]),p=v.useCallback((_,x)=>s.setFullWidthImageHeightForIndex(_,x),[s]),g=v.useCallback(()=>{s.reset()},[s]),h=v.useCallback(()=>{s.reset(),e()},[s,e]);return{canGoBack:o,backHistory:r,goBack:u,goToHistoryIndex:d,setScrollTopForActive:f,currentHistoryScrollTop:a,setFullWidthImageHeightForActive:m,setFullWidthImageHeightForIndex:p,currentHistoryFullWidthImageHeight:l,activeHistoryIndex:c,resetSidebarHistory:g,closeThreadSidebarAndResetHistory:h}}function _2(t,e){let n=t.parentElement;for(;n!=null;){if(e(n))return n;n=n.parentElement}}function sbe(t){switch(getComputedStyle(t).display){case"block":case"inline-block":case"list-item":case"table":case"table-caption":case"flow-root":case"flex":case"grid":return!0}return!1}function hU(t){const e=getComputedStyle(t);return e.transform!=="none"||e.perspective!=="none"||e.willChange==="transform"||e.willChange==="perspective"||e.filter!=="none"||e.willChange==="filter"||e.backdropFilter!=="none"}function obe(t){return getComputedStyle(t).position!=="static"?!0:hU(t)}function XA(t){switch(getComputedStyle(t).position){case"static":case"relative":case"sticky":return _2(t,sbe);case"absolute":return _2(t,obe);case"fixed":return _2(t,hU)}}function _U(t,e="y"){if(!t.isConnected)return null;let n=XA(t);for(;n&&n!==document.body;){const s=getComputedStyle(n);switch(e==="x"?s.overflowX:s.overflowY){case"auto":case"scroll":case"hidden":return n}n=XA(n)}return document.scrollingElement&&getComputedStyle(document.scrollingElement).overflow==="visible"?document.scrollingElement:document.body}function xU({node:t,axis:e,onScrollIntoView:n,onDone:s,obscuringHeight:o=0,options:r={behavior:"smooth",block:"end"}}){if(!t)return;const a=_U(t,e);if(!a)return;const l=t.getBoundingClientRect(),c=a.getBoundingClientRect(),u=c.top+a.clientHeight-o,d=l.bottom>u,f=l.top<c.top;if(!d&&!f){s==null||s();return}requestAnimationFrame(()=>{t.scrollIntoView(r),n==null||n(),s==null||s()})}const rbe=2e3,abe=1e3,ibe="rgba(255, 235, 140, 0.6)",lbe="rgba(120, 100, 40, 0.7)";function cbe(t,e){if((e==null?void 0:e.start)==null)return null;if(e.end!=null){const n=t.querySelector('[data-start="'.concat(e.start,'"][data-end="').concat(e.end,'"]'));if(n)return n}return t.querySelector('[data-start="'.concat(e.start,'"]'))}function ube({messageId:t,messageRange:e,shouldHighlight:n,scrollMarginBottom:s}){if(!t)return;requestAnimationFrame(()=>{var u;const r=document.querySelector('[data-message-id="'.concat(t,'"]'));if(!r)return;const a=(u=cbe(r,e))!=null?u:r,l=a.style.scrollMarginTop,c=a.style.scrollMarginBottom;a.style.scrollMarginTop="40px",a.style.scrollMarginBottom=s,xU({node:a,axis:"y",obscuringHeight:100,options:{behavior:"smooth",block:"nearest",inline:"nearest"},onDone:()=>{requestAnimationFrame(()=>{a.style.scrollMarginTop=l,a.style.scrollMarginBottom=c}),setTimeout(()=>dbe(a),450)}})})}function dbe(t){var r,a;const e=t.style.transition,n=t.style.backgroundColor,o=typeof window<"u"&&((a=(r=window.matchMedia)==null?void 0:r.call(window,"(prefers-color-scheme: dark)"))==null?void 0:a.matches)?lbe:ibe;t.style.transition="none",t.style.backgroundColor=o,requestAnimationFrame(()=>{setTimeout(()=>{t.style.transition="background-color 1s ease",t.style.backgroundColor=n,setTimeout(()=>{t.style.transition=e},abe)},rbe)})}const fbe=Bn(()=>st(null)),ug=Bn(t=>yt(()=>{const e=fbe(t);return e?{gizmo:e,gizmo_id:e.gizmo.id,kind:Bt.GizmoInteraction}:ML(t)}));var x2,eN;function yU(){if(eN)return x2;eN=1;var t=lQ(),e=cQ();function n(s,o,r){(r!==void 0&&!e(s[o],r)||r===void 0&&!(o in s))&&t(s,o,r)}return x2=n,x2}var y2,tN;function mbe(){if(tN)return y2;tN=1;var t=uQ(),e=LC();function n(s){return e(s)&&t(s)}return y2=n,y2}var b2,nN;function pbe(){if(nN)return b2;nN=1;var t=yR(),e=dQ(),n=LC(),s="[object Object]",o=Function.prototype,r=Object.prototype,a=o.toString,l=r.hasOwnProperty,c=a.call(Object);function u(d){if(!n(d)||t(d)!=s)return!1;var f=e(d);if(f===null)return!0;var m=l.call(f,"constructor")&&f.constructor;return typeof m=="function"&&m instanceof m&&a.call(m)==c}return b2=u,b2}var v2,sN;function bU(){if(sN)return v2;sN=1;function t(e,n){if(!(n==="constructor"&&typeof e[n]=="function")&&n!="__proto__")return e[n]}return v2=t,v2}var S2,oN;function gbe(){if(oN)return S2;oN=1;var t=fQ(),e=d9();function n(s){return t(s,e(s))}return S2=n,S2}var C2,rN;function hbe(){if(rN)return C2;rN=1;var t=yU(),e=mQ(),n=pQ(),s=f9(),o=gQ(),r=hQ(),a=i3(),l=mbe(),c=_Q(),u=xQ(),d=m9(),f=pbe(),m=yQ(),p=bU(),g=gbe();function h(_,x,b,y,S,C,w){var k=p(_,b),E=p(x,b),T=w.get(E);if(T){t(_,b,T);return}var M=C?C(k,E,b+"",_,x,w):void 0,A=M===void 0;if(A){var I=a(E),j=!I&&c(E),R=!I&&!j&&m(E);M=E,I||j||R?a(k)?M=k:l(k)?M=s(k):j?(A=!1,M=e(E,!0)):R?(A=!1,M=n(E,!0)):M=[]:f(E)||r(E)?(M=k,r(k)?M=g(k):(!d(k)||u(k))&&(M=o(E))):A=!1}A&&(w.set(E,M),S(M,E,y,C,w),w.delete(E)),t(_,b,M)}return C2=h,C2}var w2,aN;function _be(){if(aN)return w2;aN=1;var t=bQ(),e=yU(),n=vQ(),s=hbe(),o=m9(),r=d9(),a=bU();function l(c,u,d,f,m){c!==u&&n(u,function(p,g){if(m||(m=new t),o(p))s(c,u,g,d,l,f,m);else{var h=f?f(a(c,g),p,g+"",c,u,m):void 0;h===void 0&&(h=p),e(c,g,h)}},r)}return w2=l,w2}var k2,iN;function xbe(){if(iN)return k2;iN=1;var t=SQ(),e=l3();function n(s){return t(function(o,r){var a=-1,l=r.length,c=l>1?r[l-1]:void 0,u=l>2?r[2]:void 0;for(c=s.length>3&&typeof c=="function"?(l--,c):void 0,u&&e(r[0],r[1],u)&&(c=l<3?void 0:c,l=1),o=Object(o);++a<l;){var d=r[a];d&&s(o,d,a,c)}return o})}return k2=n,k2}var E2,lN;function ybe(){if(lN)return E2;lN=1;var t=_be(),e=xbe(),n=e(function(s,o,r){t(s,o,r)});return E2=n,E2}var bbe=ybe();const vi=ps(bbe);function rx({type:t="copy",source:e,messageId:n,serverThreadId:s,selectedText:o,location:r,contentType:a,productLogOnly:l=!1}){if(mt()&&(V.logEvent("Content Exported",{type:t,source:e,length:o.length,location:r,contentType:a}),!(l||t==="download")))return ue.safePost("/conversation/implicit_message_feedback",{requestBody:{message_id:n,conversation_id:s,source:e,feedback:{feedback_type:t,selected_text_length:o.length},location:r}})}function vbe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)n.hasOwnProperty(s)&&(t[s]=n[s])}return t}function nS(t,e){return Array(e+1).join(t)}function Sbe(t){return t.replace(/^\n*/,"")}function Cbe(t){for(var e=t.length;e>0&&t[e-1]==="\n";)e--;return t.substring(0,e)}var wbe=["ADDRESS","ARTICLE","ASIDE","AUDIO","BLOCKQUOTE","BODY","CANVAS","CENTER","DD","DIR","DIV","DL","DT","FIELDSET","FIGCAPTION","FIGURE","FOOTER","FORM","FRAMESET","H1","H2","H3","H4","H5","H6","HEADER","HGROUP","HR","HTML","ISINDEX","LI","MAIN","MENU","NAV","NOFRAMES","NOSCRIPT","OL","OUTPUT","P","PRE","SECTION","TABLE","TBODY","TD","TFOOT","TH","THEAD","TR","UL"];function Qk(t){return Jk(t,wbe)}var vU=["AREA","BASE","BR","COL","COMMAND","EMBED","HR","IMG","INPUT","KEYGEN","LINK","META","PARAM","SOURCE","TRACK","WBR"];function SU(t){return Jk(t,vU)}function kbe(t){return wU(t,vU)}var CU=["A","TABLE","THEAD","TBODY","TFOOT","TH","TD","IFRAME","SCRIPT","AUDIO","VIDEO"];function Ebe(t){return Jk(t,CU)}function Tbe(t){return wU(t,CU)}function Jk(t,e){return e.indexOf(t.nodeName)>=0}function wU(t,e){return t.getElementsByTagName&&e.some(function(n){return t.getElementsByTagName(n).length})}var qs={};qs.paragraph={filter:"p",replacement:function(t){return"\n\n"+t+"\n\n"}};qs.lineBreak={filter:"br",replacement:function(t,e,n){return n.br+"\n"}};qs.heading={filter:["h1","h2","h3","h4","h5","h6"],replacement:function(t,e,n){var s=Number(e.nodeName.charAt(1));if(n.headingStyle==="setext"&&s<3){var o=nS(s===1?"=":"-",t.length);return"\n\n"+t+"\n"+o+"\n\n"}else return"\n\n"+nS("#",s)+" "+t+"\n\n"}};qs.blockquote={filter:"blockquote",replacement:function(t){return t=t.replace(/^\n+|\n+$/g,""),t=t.replace(/^/gm,"> "),"\n\n"+t+"\n\n"}};qs.list={filter:["ul","ol"],replacement:function(t,e){var n=e.parentNode;return n.nodeName==="LI"&&n.lastElementChild===e?"\n"+t:"\n\n"+t+"\n\n"}};qs.listItem={filter:"li",replacement:function(t,e,n){t=t.replace(/^\n+/,"").replace(/\n+$/,"\n").replace(/\n/gm,"\n    ");var s=n.bulletListMarker+"   ",o=e.parentNode;if(o.nodeName==="OL"){var r=o.getAttribute("start"),a=Array.prototype.indexOf.call(o.children,e);s=(r?Number(r)+a:a+1)+".  "}return s+t+(e.nextSibling&&!/\n$/.test(t)?"\n":"")}};qs.indentedCodeBlock={filter:function(t,e){return e.codeBlockStyle==="indented"&&t.nodeName==="PRE"&&t.firstChild&&t.firstChild.nodeName==="CODE"},replacement:function(t,e,n){return"\n\n    "+e.firstChild.textContent.replace(/\n/g,"\n    ")+"\n\n"}};qs.fencedCodeBlock={filter:function(t,e){return e.codeBlockStyle==="fenced"&&t.nodeName==="PRE"&&t.firstChild&&t.firstChild.nodeName==="CODE"},replacement:function(t,e,n){for(var s=e.firstChild.getAttribute("class")||"",o=(s.match(/language-(\S+)/)||[null,""])[1],r=e.firstChild.textContent,a=n.fence.charAt(0),l=3,c=new RegExp("^"+a+"{3,}","gm"),u;u=c.exec(r);)u[0].length>=l&&(l=u[0].length+1);var d=nS(a,l);return"\n\n"+d+o+"\n"+r.replace(/\n$/,"")+"\n"+d+"\n\n"}};qs.horizontalRule={filter:"hr",replacement:function(t,e,n){return"\n\n"+n.hr+"\n\n"}};qs.inlineLink={filter:function(t,e){return e.linkStyle==="inlined"&&t.nodeName==="A"&&t.getAttribute("href")},replacement:function(t,e){var n=e.getAttribute("href"),s=t0(e.getAttribute("title"));return s&&(s=' "'+s+'"'),"["+t+"]("+n+s+")"}};qs.referenceLink={filter:function(t,e){return e.linkStyle==="referenced"&&t.nodeName==="A"&&t.getAttribute("href")},replacement:function(t,e,n){var s=e.getAttribute("href"),o=t0(e.getAttribute("title"));o&&(o=' "'+o+'"');var r,a;switch(n.linkReferenceStyle){case"collapsed":r="["+t+"][]",a="["+t+"]: "+s+o;break;case"shortcut":r="["+t+"]",a="["+t+"]: "+s+o;break;default:var l=this.references.length+1;r="["+t+"]["+l+"]",a="["+l+"]: "+s+o}return this.references.push(a),r},references:[],append:function(t){var e="";return this.references.length&&(e="\n\n"+this.references.join("\n")+"\n\n",this.references=[]),e}};qs.emphasis={filter:["em","i"],replacement:function(t,e,n){return t.trim()?n.emDelimiter+t+n.emDelimiter:""}};qs.strong={filter:["strong","b"],replacement:function(t,e,n){return t.trim()?n.strongDelimiter+t+n.strongDelimiter:""}};qs.code={filter:function(t){var e=t.previousSibling||t.nextSibling,n=t.parentNode.nodeName==="PRE"&&!e;return t.nodeName==="CODE"&&!n},replacement:function(t){if(!t)return"";t=t.replace(/\r?\n|\r/g," ");for(var e=/^`|^ .*?[^ ].* $|`$/.test(t)?" ":"",n="`",s=t.match(/`+/gm)||[];s.indexOf(n)!==-1;)n=n+"`";return n+e+t+e+n}};qs.image={filter:"img",replacement:function(t,e){var n=t0(e.getAttribute("alt")),s=e.getAttribute("src")||"",o=t0(e.getAttribute("title")),r=o?' "'+o+'"':"";return s?"!["+n+"]("+s+r+")":""}};function t0(t){return t?t.replace(/(\n+\s*)+/g,"\n"):""}function kU(t){this.options=t,this._keep=[],this._remove=[],this.blankRule={replacement:t.blankReplacement},this.keepReplacement=t.keepReplacement,this.defaultRule={replacement:t.defaultReplacement},this.array=[];for(var e in t.rules)this.array.push(t.rules[e])}kU.prototype={add:function(t,e){this.array.unshift(e)},keep:function(t){this._keep.unshift({filter:t,replacement:this.keepReplacement})},remove:function(t){this._remove.unshift({filter:t,replacement:function(){return""}})},forNode:function(t){if(t.isBlank)return this.blankRule;var e;return(e=T2(this.array,t,this.options))||(e=T2(this._keep,t,this.options))||(e=T2(this._remove,t,this.options))?e:this.defaultRule},forEach:function(t){for(var e=0;e<this.array.length;e++)t(this.array[e],e)}};function T2(t,e,n){for(var s=0;s<t.length;s++){var o=t[s];if(Mbe(o,e,n))return o}}function Mbe(t,e,n){var s=t.filter;if(typeof s=="string"){if(s===e.nodeName.toLowerCase())return!0}else if(Array.isArray(s)){if(s.indexOf(e.nodeName.toLowerCase())>-1)return!0}else if(typeof s=="function"){if(s.call(t,e,n))return!0}else throw new TypeError("`filter` needs to be a string, array, or function")}function Abe(t){var e=t.element,n=t.isBlock,s=t.isVoid,o=t.isPre||function(f){return f.nodeName==="PRE"};if(!(!e.firstChild||o(e))){for(var r=null,a=!1,l=null,c=cN(l,e,o);c!==e;){if(c.nodeType===3||c.nodeType===4){var u=c.data.replace(/[ \r\n\t]+/g," ");if((!r||/ $/.test(r.data))&&!a&&u[0]===" "&&(u=u.substr(1)),!u){c=M2(c);continue}c.data=u,r=c}else if(c.nodeType===1)n(c)||c.nodeName==="BR"?(r&&(r.data=r.data.replace(/ $/,"")),r=null,a=!1):s(c)||o(c)?(r=null,a=!0):r&&(a=!1);else{c=M2(c);continue}var d=cN(l,c,o);l=c,c=d}r&&(r.data=r.data.replace(/ $/,""),r.data||M2(r))}}function M2(t){var e=t.nextSibling||t.parentNode;return t.parentNode.removeChild(t),e}function cN(t,e,n){return t&&t.parentNode===e||n(e)?e.nextSibling||e.parentNode:e.firstChild||e.nextSibling||e.parentNode}var EU=typeof window<"u"?window:{};function Nbe(){var t=EU.DOMParser,e=!1;try{new t().parseFromString("","text/html")&&(e=!0)}catch(n){}return e}function Ibe(){var t=function(){};return jbe()?t.prototype.parseFromString=function(e){var n=new window.ActiveXObject("htmlfile");return n.designMode="on",n.open(),n.write(e),n.close(),n}:t.prototype.parseFromString=function(e){var n=document.implementation.createHTMLDocument("");return n.open(),n.write(e),n.close(),n},t}function jbe(){var t=!1;try{document.implementation.createHTMLDocument("").open()}catch(e){window.ActiveXObject&&(t=!0)}return t}var Pbe=Nbe()?EU.DOMParser:Ibe();function Rbe(t,e){var n;if(typeof t=="string"){var s=Obe().parseFromString('<x-turndown id="turndown-root">'+t+"</x-turndown>","text/html");n=s.getElementById("turndown-root")}else n=t.cloneNode(!0);return Abe({element:n,isBlock:Qk,isVoid:SU,isPre:e.preformattedCode?Lbe:null}),n}var A2;function Obe(){return A2=A2||new Pbe,A2}function Lbe(t){return t.nodeName==="PRE"||t.nodeName==="CODE"}function Dbe(t,e){return t.isBlock=Qk(t),t.isCode=t.nodeName==="CODE"||t.parentNode.isCode,t.isBlank=Bbe(t),t.flankingWhitespace=Fbe(t,e),t}function Bbe(t){return!SU(t)&&!Ebe(t)&&/^\s*$/i.test(t.textContent)&&!kbe(t)&&!Tbe(t)}function Fbe(t,e){if(t.isBlock||e.preformattedCode&&t.isCode)return{leading:"",trailing:""};var n=Ube(t.textContent);return n.leadingAscii&&uN("left",t,e)&&(n.leading=n.leadingNonAscii),n.trailingAscii&&uN("right",t,e)&&(n.trailing=n.trailingNonAscii),{leading:n.leading,trailing:n.trailing}}function Ube(t){var e=t.match(/^(([ \t\r\n]*)(\s*))(?:(?=\S)[\s\S]*\S)?((\s*?)([ \t\r\n]*))$/);return{leading:e[1],leadingAscii:e[2],leadingNonAscii:e[3],trailing:e[4],trailingNonAscii:e[5],trailingAscii:e[6]}}function uN(t,e,n){var s,o,r;return t==="left"?(s=e.previousSibling,o=/ $/):(s=e.nextSibling,o=/^ /),s&&(s.nodeType===3?r=o.test(s.nodeValue):n.preformattedCode&&s.nodeName==="CODE"?r=!1:s.nodeType===1&&!Qk(s)&&(r=o.test(s.textContent))),r}var Hbe=Array.prototype.reduce,$be=[[/\\/g,"\\\\"],[/\*/g,"\\*"],[/^-/g,"\\-"],[/^\+ /g,"\\+ "],[/^(=+)/g,"\\$1"],[/^(#{1,6}) /g,"\\$1 "],[/`/g,"\\`"],[/^~~~/g,"\\~~~"],[/\[/g,"\\["],[/\]/g,"\\]"],[/^>/g,"\\>"],[/_/g,"\\_"],[/^(\d+)\. /g,"$1\\. "]];function n0(t){if(!(this instanceof n0))return new n0(t);var e={rules:qs,headingStyle:"setext",hr:"* * *",bulletListMarker:"*",codeBlockStyle:"indented",fence:"```",emDelimiter:"_",strongDelimiter:"**",linkStyle:"inlined",linkReferenceStyle:"full",br:"  ",preformattedCode:!1,blankReplacement:function(n,s){return s.isBlock?"\n\n":""},keepReplacement:function(n,s){return s.isBlock?"\n\n"+s.outerHTML+"\n\n":s.outerHTML},defaultReplacement:function(n,s){return s.isBlock?"\n\n"+n+"\n\n":n}};this.options=vbe({},e,t),this.rules=new kU(this.options)}n0.prototype={turndown:function(t){if(!zbe(t))throw new TypeError(t+" is not a string, or an element/document/fragment node.");if(t==="")return"";var e=TU.call(this,new Rbe(t,this.options));return Gbe.call(this,e)},use:function(t){if(Array.isArray(t))for(var e=0;e<t.length;e++)this.use(t[e]);else if(typeof t=="function")t(this);else throw new TypeError("plugin must be a Function or an Array of Functions");return this},addRule:function(t,e){return this.rules.add(t,e),this},keep:function(t){return this.rules.keep(t),this},remove:function(t){return this.rules.remove(t),this},escape:function(t){return $be.reduce(function(e,n){return e.replace(n[0],n[1])},t)}};function TU(t){var e=this;return Hbe.call(t.childNodes,function(n,s){s=new Dbe(s,e.options);var o="";return s.nodeType===3?o=s.isCode?s.nodeValue:e.escape(s.nodeValue):s.nodeType===1&&(o=Vbe.call(e,s)),MU(n,o)},"")}function Gbe(t){var e=this;return this.rules.forEach(function(n){typeof n.append=="function"&&(t=MU(t,n.append(e.options)))}),t.replace(/^[\t\r\n]+/,"").replace(/[\t\r\n\s]+$/,"")}function Vbe(t){var e=this.rules.forNode(t),n=TU.call(this,t),s=t.flankingWhitespace;return(s.leading||s.trailing)&&(n=n.trim()),s.leading+e.replacement(n,t,this.options)+s.trailing}function MU(t,e){var n=Cbe(t),s=Sbe(e),o=Math.max(t.length-n.length,e.length-s.length),r="\n\n".substring(0,o);return n+r+s}function zbe(t){return t!=null&&(typeof t=="string"||t.nodeType&&(t.nodeType===1||t.nodeType===9||t.nodeType===11))}var dN=/highlight-(?:text|source)-([a-z0-9]+)/;function Wbe(t){t.addRule("highlightedCodeBlock",{filter:function(e){var n=e.firstChild;return e.nodeName==="DIV"&&dN.test(e.className)&&n&&n.nodeName==="PRE"},replacement:function(e,n,s){var o=n.className||"",r=(o.match(dN)||[null,""])[1];return"\n\n"+s.fence+r+"\n"+n.firstChild.textContent+"\n"+s.fence+"\n\n"}})}function qbe(t){t.addRule("strikethrough",{filter:["del","s","strike"],replacement:function(e){return"~"+e+"~"}})}var Kbe=Array.prototype.indexOf,Ybe=Array.prototype.every,Md={};Md.tableCell={filter:["th","td"],replacement:function(t,e){return AU(t,e)}};Md.tableRow={filter:"tr",replacement:function(t,e){var n="",s={left:":--",right:"--:",center:":-:"};if(Xk(e))for(var o=0;o<e.childNodes.length;o++){var r="---",a=(e.childNodes[o].getAttribute("align")||"").toLowerCase();a&&(r=s[a]||r),n+=AU(r,e.childNodes[o])}return"\n"+t+(n?"\n"+n:"")}};Md.table={filter:function(t){return t.nodeName==="TABLE"&&Xk(t.rows[0])},replacement:function(t){return t=t.replace("\n\n","\n"),"\n\n"+t+"\n\n"}};Md.tableSection={filter:["thead","tbody","tfoot"],replacement:function(t){return t}};function Xk(t){var e=t.parentNode;return e.nodeName==="THEAD"||e.firstChild===t&&(e.nodeName==="TABLE"||Zbe(e))&&Ybe.call(t.childNodes,function(n){return n.nodeName==="TH"})}function Zbe(t){var e=t.previousSibling;return t.nodeName==="TBODY"&&(!e||e.nodeName==="THEAD"&&/^\s*$/i.test(e.textContent))}function AU(t,e){var n=Kbe.call(e.parentNode.childNodes,e),s=" ";return n===0&&(s="| "),s+t+" |"}function Qbe(t){t.keep(function(n){return n.nodeName==="TABLE"&&!Xk(n.rows[0])});for(var e in Md)t.addRule(e,Md[e])}function Jbe(t){t.addRule("taskListItems",{filter:function(e){return e.type==="checkbox"&&e.parentNode.nodeName==="LI"},replacement:function(e,n){return(n.checked?"[x]":"[ ]")+" "}})}function Xbe(t){t.use([Wbe,qbe,Qbe,Jbe])}function fN(t){const e=N({},t);for(const n of Object.keys(e))e[n]=Math.round(e[n]);return e}function Xl(t,e){for(;t;){if(t instanceof HTMLElement&&t.dataset[e]!=null)return{node:t,dataValue:t.dataset[e]};t=t.parentNode}return{node:void 0,dataValue:void 0}}const N2={clientRect:void 0,isCollapsed:void 0,textContent:void 0,documentFragment:void 0,selection:void 0},NU=new n0;NU.use(Xbe);function eve(t){const n=t.getRangeAt(0).cloneContents(),s=document.createElement("div");return s.appendChild(n),NU.turndown(s.innerHTML)}function tve(t){const[{clientRect:e,isCollapsed:n,textContent:s,documentFragment:o,selection:r},a]=v.useState(N2);bs(()=>{const c=()=>{setTimeout(()=>{let u;const d=window.getSelection(),f={};if(d==null||!d.rangeCount){a(N2);return}const m=d.getRangeAt(0);if(m==null){a(N2);return}const p=m.cloneContents();f.documentFragment=p,f.textContent=eve(d);const g=m.getClientRects();if(g.length===0&&m.commonAncestorContainer!=null&&m.commonAncestorContainer instanceof HTMLElement){const h=m.commonAncestorContainer;u=fN(h.getBoundingClientRect().toJSON())}else{if(g.length<1)return;u=fN(g[0].toJSON())}f.clientRect=u,f.isCollapsed=m.collapsed,f.selection=d,a(f)},0)};return window.addEventListener("mouseup",c),()=>{window.removeEventListener("mouseup",c)}},[]);const l=Hs();return v.useEffect(()=>{if(l)return;const c=u=>{const d=window.getSelection(),f=d==null?void 0:d.toString(),m=Lt(t),{dataValue:p}=Xl(d==null?void 0:d.anchorNode,"messageAuthorRole"),{dataValue:g}=Xl(d==null?void 0:d.anchorNode,"messageId");!f||!g||!m||!p||p!=="assistant"||rx({source:"keyboard",type:"copy",messageId:g,serverThreadId:m,selectedText:f,location:"selection",contentType:"text"})};return document.addEventListener("copy",c),()=>{document.removeEventListener("copy",c)}},[t,l]),{clientRect:e,isCollapsed:n,textContent:s,documentFragment:o,selection:r}}const IU="agent-turn",Lat=[Bt.PrimaryAssistant,Bt.GizmoInteraction],I2=8,nve=44,sve=12;function ove({clientRect:t,containerSize:e}){const n=t.top,s=n+t.height,o=t.left+t.width/2;let r=n-nve,a=o-e.width/2;const l=I2;(r<l||n<l)&&(r=s+sve);const c=window.innerWidth-e.width-I2;return a=Math.max(I2,Math.min(a,c)),{top:r,left:a}}function rve(t){var e;return Xa.createPortal(t.children,(e=t.mount)!=null?e:document.body)}function ave({onClick:t}){return i.jsx(Se,{size:"medium",color:"secondary",className:"shadow-long flex rounded-xl border-none active:opacity-1",onClick:t,children:i.jsxs("span",{className:"flex items-center gap-1.5 select-none",children:[i.jsx(tbe,{className:"icon"}),i.jsx("span",{className:"whitespace-nowrap! select-none max-md:sr-only",children:i.jsx(P,{defaultMessage:"Ask ChatGPT",id:"TargetedReplyPopover.askChatGPT"})})]})})}function ive(t){"use forget";const e=D.c(6),{onClick:n,className:s}=t;let o;e[0]!==s?(o=q("border-token-border-heavy rounded-none active:opacity-1",s),e[0]=s,e[1]=o):o=e[1];let r;e[2]===Symbol.for("react.memo_cache_sentinel")?(r=i.jsx("span",{className:"flex items-center select-none",children:i.jsx("span",{className:"whitespace-nowrap! select-none",children:i.jsx(P,{defaultMessage:"More Details",id:"TargetedActionPopover.moreContext"})})}),e[2]=r):r=e[2];let a;return e[3]!==n||e[4]!==o?(a=i.jsx(Se,{size:"medium",color:"secondary",className:o,onClick:n,children:r}),e[3]=n,e[4]=o,e[5]=a):a=e[5],a}function lve(t){"use forget";const e=D.c(6),{onClick:n,className:s}=t;let o;e[0]!==s?(o=q("rounded-none border-none active:opacity-1",s),e[0]=s,e[1]=o):o=e[1];let r;e[2]===Symbol.for("react.memo_cache_sentinel")?(r=i.jsx("span",{className:"flex items-center select-none",children:i.jsx("span",{className:"whitespace-nowrap! select-none",children:i.jsx(P,{defaultMessage:"Ask ChatGPT",id:"TargetedReplyPopover.askChatGPT"})})}),e[2]=r):r=e[2];let a;return e[3]!==n||e[4]!==o?(a=i.jsx(Se,{size:"medium",color:"secondary",className:o,onClick:n,children:r}),e[3]=n,e[4]=o,e[5]=a):a=e[5],a}function cve(t){"use forget";var y;const e=D.c(18),{anchorNode:n,clientRect:s,buttons:o}=t,r=v.useRef(null);let a;e[0]===Symbol.for("react.memo_cache_sentinel")?(a={width:0,height:0},e[0]=a):a=e[0];const[l,c]=v.useState(a);let u;e[1]===Symbol.for("react.memo_cache_sentinel")?(u=()=>{const S=r.current;if(!S)return;const C=()=>{r.current&&c({width:r.current.offsetWidth,height:r.current.offsetHeight})};C();const w=new ResizeObserver(C);return w.observe(S),()=>w.disconnect()},e[1]=u):u=e[1];let d;if(e[2]!==o.length?(d=[o.length],e[2]=o.length,e[3]=d):d=e[3],bs(u,d),!n||!n.closest(".".concat(IU))||(o==null?void 0:o.length)===0)return null;let f;e[4]!==s||e[5]!==l?(f=ove({clientRect:s,containerSize:l}),e[4]=s,e[5]=l,e[6]=f):f=e[6];const{top:m,left:p}=f,g=(y=n.ownerDocument)==null?void 0:y.body;if(!g)return null;let h;e[7]!==p||e[8]!==m?(h={top:m,left:p},e[7]=p,e[8]=m,e[9]=h):h=e[9];let _;e[10]!==o?(_=i.jsx("div",{ref:r,className:"shadow-long flex overflow-hidden rounded-xl",children:o}),e[10]=o,e[11]=_):_=e[11];let x;e[12]!==h||e[13]!==_?(x=i.jsx("div",{className:"aria-live=polite fixed select-none",style:h,children:_}),e[12]=h,e[13]=_,e[14]=x):x=e[14];let b;return e[15]!==g||e[16]!==x?(b=i.jsx(rve,{mount:g,children:x}),e[15]=g,e[16]=x,e[17]=b):b=e[17],b}function uve(t){if(!(t!=null&&t.rangeCount))return;const e=t.getRangeAt(0),{node:n}=Xl(e.startContainer,"start");if(!(n instanceof HTMLElement))return;const s=Number(n.dataset.start);if(Number.isNaN(s))return;const o=n.dataset.end!=null?Number(n.dataset.end):void 0,r=o!=null&&!Number.isNaN(o)?o:void 0;return{start:s,end:r}}const mN=3;function Dat({conversation:t,onTargetedReply:e}){var T;const{clientRect:n,isCollapsed:s,textContent:o,selection:r}=tve(t.id),{resetSidebarHistory:a}=gU(),l=X(()=>ug(t)),c=l&&Hce(l),u=X(()=>ln()),d=X(()=>Zk(t).isOpen$()),f=xe("4290238484")&&!l_(c),m=xe("473637331"),{dataValue:p}=Xl(r==null?void 0:r.anchorNode,"messageAuthorRole"),{node:g,dataValue:h}=Xl(r==null?void 0:r.anchorNode,"messageId"),{dataValue:_}=Xl(r==null?void 0:r.focusNode,"messageId"),x=!_||h===_,b=o==null?void 0:o.trim(),y=(T=b==null?void 0:b.length)!=null?T:0,{dataValue:S}=Xl(r==null?void 0:r.focusNode,"writingBlock"),C=v.useCallback(M=>{if(f&&b&&b.length>0){a(),kd(t,{type:"entity",messageId:M,contentReferenceStartIndex:0,query:b,category:"ask_sidebar",debugThreadId:void 0});const A=window.getSelection();A&&A.removeAllRanges()}},[t,f,b,a]),w=v.useCallback(M=>{const A=uve(r);if(b!==void 0&&e){e({targetedReply:{type:"text",label:b,onLabelClick:()=>ube({messageId:M,messageRange:A,shouldHighlight:!0,scrollMarginBottom:"100px"}),createNewCompletionParams:j=>{const R=Sp(b);return G(N({},j),{promptMessage:vi(j.promptMessage,{metadata:N({targeted_reply:b,targeted_reply_source_message_id:M},A?{targeted_reply_source_range:A}:{})}),appendMessages:j.appendMessages==null?[R]:[...j.appendMessages,R]})},onCreateCompletion:({serverThreadId:j,currentLeafId:R})=>{V.logEventWithStatsig("Targeted Reply Submitted","chatgpt_targeted_reply_submitted",{conversationId:j,currentLeafId:R})},onCleared:({serverThreadId:j,currentLeafId:R})=>{V.logEventWithStatsig("Targeted Reply Cleared","chatgpt_targeted_reply_cleared",{conversationId:j,currentLeafId:R})}},messageId:M});const I=window.getSelection();I&&I.removeAllRanges()}},[e,r,b]);if(n==null||s||d||S||!x||p!=="assistant")return null;const k=h!=null?h:"",E=[];return f?(m&&y>=mN&&E.push(i.jsx(lve,{onClick:()=>w(k),className:"border-y-0 border-s-0 border-e border-solid"})),u||E.push(i.jsx(ive,{onClick:()=>C(k),className:"border-none"}))):y>=mN&&E.push(i.jsx(ave,{onClick:()=>w(k)})),i.jsx(cve,{anchorNode:g,clientRect:n,buttons:E})}function Bat({isUserTurn:t}){return q("relative flex w-full min-w-0 flex-col",!t&&IU)}const pN="rounded-sm bg-(--theme-user-msg-text)/10 dark:bg-(--theme-user-msg-text)/15 px-1 py-0.5 text-(--theme-user-msg-text) text-sm";function Fat({text:t,customSymbolOffsets:e}){return i.jsx(WC,{name:"formatted_text_error",fallback:()=>i.jsx(i.Fragment,{children:t}),children:i.jsx(dve,{text:t,customSymbolOffsets:e})})}const dve=({text:t,customSymbolOffsets:e=[]})=>{const n=/(```[\s\S]*?```|`[^`\n]+`|```[\s\S]*|`[^`\n]*\n|`[^`\n]*$)/g;let s=0;const o=t.split(n).flatMap((r,a)=>{const l=s;if(s+=r.length,r.startsWith("```")&&r.endsWith("```"))return i.jsx("pre",{className:"overflow-x-auto",children:i.jsx("code",{children:r.slice(3,-3).trim()})},a);if(r.startsWith("```"))return i.jsx("pre",{className:"overflow-x-auto",children:i.jsx("code",{children:r.slice(3).trim()})},a);if(r.startsWith("`")&&r.endsWith("`"))return i.jsx("code",{className:pN,children:r.slice(1,-1)},a);if(r.startsWith("`"))return i.jsx("code",{className:pN,children:r.slice(1)},a);{const c=e.map(u=>AM(u)).filter(u=>l<=u.startIndex&&u.endIndex<=s);if(c.length){const u=c.map(m=>AM(m)).sort((m,p)=>m.startIndex-p.startIndex),d=[];let f=0;for(let m=0;m<u.length;m++){const p=u[m],g=p.startIndex-l,h=p.endIndex-l;g>f&&d.push(r.slice(f,g)),d.push(fve(p.symbol,r.slice(g,h),"".concat(a,"-multi-").concat(m))),f=h}return f<r.length&&d.push(r.slice(f)),d.filter(m=>!!m)}return r}});return i.jsx("div",{className:"whitespace-pre-wrap",children:o})};function fve(t,e,n=void 0){return t===NM.SystemHint?i.jsx("span",{className:"hint-pill",children:e},n):t===NM.EcosystemMention?i.jsx("span",{className:"ecosystem-mention",children:e},n):null}function mve({scriptSrc:t}){return i.jsx("script",{nonce:is().cspScriptNonce,suppressHydrationWarning:!0,children:t})}function Uat({role:t,children:e}){const n=X(ln);if(!n)return e;const s=t===dt.User&&n?"py-4":void 0;return i.jsx("div",{className:q(s),children:e})}const pve=CQ("(width <= 500px)",()=>!1);function gve(){return X(pve)}function jU(){const t=X(ln);return gve()&&t}let gN=!1;function Hat(t,e,n){v.useEffect(()=>{var s;!t||e||gN||n&&((s=up())==null||s.receivedFirstToken(),gN=!0)},[t,e,n])}const sS=je(()=>Me(()=>import("./6abf13ee-ja2tmawbp8paxf0h.js"),__vite__mapDeps([217,1,218,2,3,219,220,221,75,77,222,223,224,225,199,113,200,226,227,228,82,63,85,86,115,116,229,230,231,232])).then(t=>t.CanvasMessageAttachment)),hve=je(()=>Me(()=>import("./6abf13ee-ja2tmawbp8paxf0h.js"),__vite__mapDeps([217,1,218,2,3,219,220,221,75,77,222,223,224,225,199,113,200,226,227,228,82,63,85,86,115,116,229,230,231,232])).then(t=>t.CanvasMessageAttachmentWrapper));var Po=(t=>(t.INFERRING="inferring",t.PENDING="pending",t.SENT="sent",t))(Po||{}),Wm=(t=>(t.MODEL="model",t.SYSTEM_HINT_CANVAS="system_hint_canvas",t.SYSTEM_HINT_CANVAS_APPS="system_hint_canvas_apps",t.USER_CREATED_COMPOSER="user_created_composer",t.MESSAGE_CODE_SNIPPET="message_code_snippet",t.MESSAGE_WRITING_BLOCK="message_writing_block",t.MESSAGE="message",t.TASK_RESULT="task_result",t.REMIX_OF_SHARED_CANVAS="remix_of_shared_canvas",t.HIVE="hive",t))(Wm||{});const Qa=-1;var ro=(t=>(t.CREATING="creating",t.REWRITING="rewriting",t.COMMENTING="commenting",t.UPDATING="updating",t.COMPLETE="complete",t.ATTACHED_PENDING="attached_pending",t.ATTACHED_SENT="attached_sent",t))(ro||{});const $at=t=>(t==null?void 0:t.status)!=="complete"&&(t==null?void 0:t.status)!=="attached_pending"&&(t==null?void 0:t.status)!=="attached_sent",Gat=t=>(t==null?void 0:t.status)==="rewriting",Vat=t=>(t==null?void 0:t.status)==="creating",zat=t=>(t==null?void 0:t.status)==="attached_pending"||(t==null?void 0:t.status)==="attached_sent",Wat=t=>(t==null?void 0:t.status)==="attached_pending";var oi=(t=>(t.DOCUMENT="document",t.CODE_BASH="code/bash",t.CODE_ZSH="code/zsh",t.CODE_JAVASCRIPT="code/javascript",t.CODE_TYPESCRIPT="code/typescript",t.CODE_HTML="code/html",t.CODE_CSS="code/css",t.CODE_PYTHON="code/python",t.CODE_JSON="code/json",t.CODE_SQL="code/sql",t.CODE_GO="code/go",t.CODE_YAML="code/yaml",t.CODE_JAVA="code/java",t.CODE_RUST="code/rust",t.CODE_CPP="code/cpp",t.CODE_SWIFT="code/swift",t.CODE_PHP="code/php",t.CODE_XML="code/xml",t.CODE_RUBY="code/ruby",t.CODE_HASKELL="code/haskell",t.CODE_KOTLIN="code/kotlin",t.CODE_CSHARP="code/csharp",t.CODE_C="code/c",t.CODE_OBJECTIVEC="code/objectivec",t.CODE_R="code/r",t.CODE_LUA="code/lua",t.CODE_DART="code/dart",t.CODE_SCALA="code/scala",t.CODE_PERL="code/perl",t.CODE_COMMONLISP="code/commonlisp",t.CODE_CLOJURE="code/clojure",t.CODE_OCAML="code/ocaml",t.CODE_POWERSHELL="code/powershell",t.CODE_VERILOG="code/verilog",t.CODE_DOCKERFILE="code/dockerfile",t.CODE_VUE="code/vue",t.CODE_REACT="code/react",t.CODE_OTHER="code/other",t.LOADING="loading",t))(oi||{});function s0(t){return t.startsWith("code/")}function Mc(t){const e=v1(t,Object.values(oi),null);if(e)return e;if(t==="webview")return"code/html";if(t.startsWith("code"))switch(t){case"code/js":case"code/jsx":return"code/javascript";case"code/ts":case"code/tsx":return"code/typescript";default:return"code/other"}return"document"}var ns=(t=>(t.CREATE="create",t.REWRITE="rewrite",t.EDIT="edit",t.ADD_COMMENT="add_comment",t.REMOVE_COMMENT="remove_comment",t))(ns||{}),PU=(t=>(t.ACCEPT="accept",t.DISMISS="dismiss",t))(PU||{}),oS=(t=>(t.ACCEPT_INITIATED="accept_initiated",t.DISMISSED="dismissed",t.PENDING="pending",t))(oS||{}),_ve=(t=>(t.ADDED="added",t.REMOVED="removed",t))(_ve||{}),xve=(t=>(t.ACCEPT_COMMENT="accept_comment",t.ASK_CHATGPT="ask_chatgpt",t.ACCELERATOR="accelerator",t.CONSOLE="console",t.FULL_SCREEN_SUBMIT="full_screen_submit",t.HIVE_SPEAKER_EDIT="hive_speaker_edit",t))(xve||{}),RU=(t=>(t.PUBLIC="public",t.PRIVATE="private",t.WORKSPACE="workspace",t))(RU||{});const yve=t=>v1(t,Object.values(RU),void 0),bve=t=>v.createElement("svg",N({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"currentColor",viewBox:"0 0 24 24"},t),v.createElement("path",{fillRule:"evenodd",d:"M14.447 7.106a1 1 0 0 1 .447 1.341l-4 8a1 1 0 1 1-1.788-.894l4-8a1 1 0 0 1 1.341-.447ZM6.6 7.2a1 1 0 0 1 .2 1.4L4.25 12l2.55 3.4a1 1 0 0 1-1.6 1.2l-3-4a1 1 0 0 1 0-1.2l3-4a1 1 0 0 1 1.4-.2Zm10.8 0a1 1 0 0 1 1.4.2l3 4a1 1 0 0 1 0 1.2l-3 4a1 1 0 0 1-1.6-1.2l2.55-3.4-2.55-3.4a1 1 0 0 1 .2-1.4Z",clipRule:"evenodd"}));function Nu(t,e){return t===oi.DOCUMENT?i.jsx(vo,{className:q("icon",{"text-token-text-primary":e,"text-token-text-tertiary":!e})}):t&&s0(t)?i.jsx(bve,{className:q("icon",{"text-token-text-primary":e,"text-token-text-tertiary":!e})}):null}const vve=({textdocId:t,clientThreadId:e})=>{const n=qo(f=>{var m;return(m=f==null?void 0:f.resolveTempTextdocId[t])!=null?m:t}),s=G_(n),o=Xw(n),r=Qp(),a=qo(f=>{const m=f==null?void 0:f.lastCanvasAssistantMessageById;return m==null||n==null?!0:m[n]==null});if(!s)return null;const l=()=>{al(n)},c=()=>{cc({type:lc.Textdoc,textdocId:n,shouldRunCodeOnOpen:!0})},{title:u,type:d}=s;return i.jsx("div",{className:"flex w-full justify-end",children:i.jsx(sS,{textdocId:n,clientThreadId:e,name:u,tag:d,icon:Nu(d,!1),iconSelected:Nu(d,!0),isCanvasOpen:r,isInlinePreview:a,isFocused:o,isUserMessage:!0,onClick:l,onPreview:c})})},qat=({messages:t,clientThreadId:e})=>{var o,r;const[n]=t,s=(o=n==null?void 0:n.metadata)==null?void 0:o.canvas;return!s||s.user_message_type!=null?null:i.jsx(i.Fragment,{children:(r=s.user_created_textdocs)==null?void 0:r.map(({user_created_temp_textdoc_id:a})=>i.jsx(vve,{textdocId:a,clientThreadId:e},a))})};function Kat(t){const e=Un(t);return Zo(n=>Rm.getTaskIdsByConversationId(e,n).map(r=>Rm.getTask(r,n)).filter(r=>r!==void 0).some(r=>r.status===wn.RUNNING||r.status===wn.CREATED))}function Yat(t){var e,n;return t&&(n=(e=t.metadata)==null?void 0:e.b1de6e2_rm)!=null?n:!1}function Sve(t,e){return ve.findNode(t,({message:n})=>{var s,o;return((s=n.metadata)==null?void 0:s.b1de6e2_rm)===!0&&((o=n.metadata)==null?void 0:o.async_task_id)===e})!=null}function Cve(t,e){var s;let n=ve.getCurrentNode(t);return n.message.author.role==="developer"&&(n=ve.getNode(t,n.parentId)),e!=null&&(n.message.id===e||((s=n.message.metadata)==null?void 0:s.parent_id)===e)}function wve(t,e){const n=ve.getCurrentNode(t);return e!=null&&n.message.id===e}const kve=re(Cp,"ede1d7",24,24),hN={"https://chatgpt.com/c/":"Canvas","https://chatgpt-staging.com/c/":"Canvas","https://docs.google.com/document":"Google Docs","https://docs.google.com/presentation":"Google Slides","https://docs.google.com/spreadsheets":"Google Sheets","https://drive.google.com/":"Google Drive","https://mail.google.com/mail/":"Gmail","https://calendar.google.com/":"Google Calendar","https://www.google.com/calendar":"Google Calendar","https://github.com/":"GitHub","https://linear.app/":"Linear","https://app.intercom.com/":"Intercom","https://www.notion.so/":"Notion","https://notion.so/":"Notion","https://canva.com/":"Canva","https://www.canva.com/":"Canva","https://dropbox.com/":"Dropbox","https://www.dropbox.com/":"Dropbox","https://box.com/":"Box","https://app.box.com/":"Box","https://outlook.office.com/":"Outlook","https://outlook.live.com/":"Outlook","https://outlook.office365.com/":"Outlook","https://teams.microsoft.com/":"Teams","mailto:":"Google Contacts","https://app.hubspot.com/":"Hubspot","https://gitlab.com/":"GitLab","https://desk.zoho.":"Zoho Desk","https://3.basecamp.com":"Basecamp"},_N={".aha.io/":"Aha!",".asana.com/":"Asana","dev.azure.com/":"Azure DevOps",".clickup.com/":"ClickUp","gitlab.com/":"GitLab",".helpscout.net/":"Help Scout",".teamwork.com/":"Teamwork",".zendesk.com/":"Zendesk"},Eve=/^(https:\/\/)([a-zA-Z0-9-]+\.)+slack\.com(\/.*)?$/,Tve=/^https:\/\/outlook\.(office|live)\.com/,Mve=/^https:\/\/[^\s]+?\.sharepoint\.com\/[^\s]*/,Ave=/^https:\/\/chatgpt\.com\/c\/[^\s]*/;function OU(t){if(t){if(Eve.test(t))return"Slack";if(Tve.test(t))return"Outlook";if(Mve.test(t))return"SharePoint";if(Ave.test(t))return"Past Conversation";{const e=Object.keys(hN).find(s=>t.startsWith(s));if(e)return hN[e];const n=Object.keys(_N).find(s=>t.includes(s));return n?_N[n]:void 0}}}function eE(t){switch(t){case"Google Contacts":return k9;case"Google Docs":return w9;case"Google Slides":return c3;case"Google Sheets":return S1;case"Google Drive":return Ys;case"Gmail":return $a;case"Google Calendar":return xR;case"GitHub":return wp;case"Slack":return c_;case"Canvas":return vo;case"SharePoint":return jm;case"Linear":return dv;case"Dropbox":return oc;case"Box":return uv;case"Intercom":return C9;case"Notion":return sc;case"Canva":return kQ;case"Outlook":return kve;case"Teams":return Wh;case"Hubspot":return tc;case"Aha!":return S9;case"Asana":return v9;case"Azure DevOps":return b9;case"ClickUp":return y9;case"GitLab":return x9;case"Help Scout":return _9;case"Teamwork":return h9;case"Zendesk":return g9;case"Zoho Desk":return wQ;case"Basecamp":return p9;case"Past Conversation":return Gp;default:return null}}function _f(t){const e=OU(t);if(!e)return null;const n=eE(e);return n?{type:e,Icon:n}:null}const rS=({connectorId:t,cloud_doc_url:e,availableConnectors:n,iconClassName:s})=>{const o=_f(e!=null?e:""),{Icon:r,type:a}=o!=null?o:{};if(r)return{Icon:i.jsx(r,{className:q(s,"icon-sm")}),appName:a!=null?a:""};if(t){const l=Array.from(n!=null?n:[]).find(c=>c.id===t);if(l)return{Icon:i.jsx(Vc,{connector:l,size:"xsmall",className:s,iconClassName:"m-0"}),appName:l.name}}return{Icon:e?i.jsx(Ir,{className:q(s,"icon-sm")}):i.jsx(jr,{className:q(s,"icon-sm")}),appName:a!=null?a:""}};function Zat(t){var e;{const n=(e=t.extra)==null?void 0:e.cloud_doc_url;if(!n)return;const s=OU(n);if(!s)return;const o=t.name;return{url:n,type:s,title:Ive(s)?jve(o):o}}}const Nve=["Google Docs","Google Slides","Google Sheets"];function Ive(t){return Nve.includes(t)}function jve(t){const e=t.lastIndexOf(".");return e!==-1?t.slice(0,e):t}function Qat({citationMetadata:t,compact:e}){if(!t)return null;const n=eE(t.type);return n?e?i.jsx("a",{href:sy(t.url),target:"_blank",rel:"noreferrer",children:i.jsxs("div",{className:"flex flex-row items-center gap-2 overflow-clip rounded-lg border border-gray-200 px-[16px] py-2",children:[i.jsx(n,{className:"h-[16px] w-[16px] object-contain",alt:t.type}),i.jsx("p",{className:"text-token -text-primary line-clamp-1 text-sm",children:t.title?t.title:sy(t.url)})]})}):i.jsx("a",{href:sy(t.url),target:"_blank",rel:"noreferrer",children:i.jsxs("div",{className:"flex flex-col gap-[2px] overflow-clip rounded-lg border border-gray-200 px-[16px] py-[12px]",children:[i.jsxs("div",{className:"flex items-center gap-2 pb-0.5",children:[i.jsx(n,{className:"h-[16px] w-[16px] object-contain",alt:t.type}),i.jsx("p",{className:"text-token-text-secondary text-xs leading-normal",children:t.type})]}),i.jsx("p",{className:"text-token -text-primary line-clamp-1 text-sm",children:t.title})]})}):null}const Rr=re(me,"e04414",20,20,!0);function Jat({hint:t}){var n;if(!t)return null;const e=_f((n=t.url)!=null?n:"");return i.jsxs("div",{className:"text-token-text-tertiary mb-2 flex flex-row items-center justify-end",children:[i.jsx(Rr,{className:"icon me-1.5"}),i.jsx("span",{className:"shrink-0",children:i.jsx(P,{id:"Y+ZBkg",defaultMessage:"Referring to {fileName}",values:{fileName:i.jsxs(Hd,{className:"text-token-text-secondary font-semibold hover:underline",href:t.url,underline:!1,openNewTab:!0,children:[e&&i.jsx(e.Icon,{className:"icon me-1.5 inline"}),t.name]})}})})]})}const Xat=t=>{"use forget";const e=D.c(26),{children:n,collapsedHeight:s,fadeOutStyle:o,fadeClassName:r}=t,a=o===void 0?"hr":o,l=r===void 0?"from-[var(--theme-user-msg-bg)]":r,[c,u]=v.useState(!1),[d,f]=v.useState(null),m=v.useRef(null);let p;e[0]===Symbol.for("react.memo_cache_sentinel")?(p=()=>{m.current&&f(m.current.scrollHeight)},e[0]=p):p=e[0];let g;e[1]!==n||e[2]!==c?(g=[n,c],e[1]=n,e[2]=c,e[3]=g):g=e[3],v.useEffect(p,g);const h=c&&d?d:"".concat(s,"rem");let _;e[4]!==h?(_={maxHeight:h},e[4]=h,e[5]=_):_=e[5];let x;e[6]!==l||e[7]!==a||e[8]!==c?(x=a==="hr"?i.jsx("hr",{className:q("absolute start-0 end-0 bottom-0","hires:[border-inline-width:0.5px] [border-inline-width:1px] border-[var(--theme-user-msg-text)] opacity-20")}):!c&&i.jsx("div",{className:q("pointer-events-none absolute start-0 end-0 bottom-0 h-10 bg-gradient-to-t to-transparent",l)}),e[6]=l,e[7]=a,e[8]=c,e[9]=x):x=e[9];let b;e[10]!==n||e[11]!==_||e[12]!==x?(b=i.jsxs("div",{id:"expandable-content",ref:m,className:"relative overflow-hidden pb-3",style:_,children:[n,x]}),e[10]=n,e[11]=_,e[12]=x,e[13]=b):b=e[13];let y;e[14]===Symbol.for("react.memo_cache_sentinel")?(y=()=>u(Pve),e[14]=y):y=e[14];const S=c?xN.showLess.defaultMessage:xN.showMore.defaultMessage,C=c&&"rotate-180";let w;e[15]!==C?(w=q("self-center text-[var(--theme-user-msg-text)] group-hover:scale-110",C),e[15]=C,e[16]=w):w=e[16];let k;e[17]!==w?(k=i.jsx($o,{className:w}),e[17]=w,e[18]=k):k=e[18];let E;e[19]!==c||e[20]!==S||e[21]!==k?(E=i.jsx("button",{onClick:y,className:"group -mb-3 flex w-full cursor-pointer flex-col items-stretch pt-2 pb-2.5 select-none","aria-expanded":c,"aria-controls":"expandable-content","aria-label":S,children:k}),e[19]=c,e[20]=S,e[21]=k,e[22]=E):E=e[22];let T;return e[23]!==E||e[24]!==b?(T=i.jsxs("div",{className:"relative",children:[b,E]}),e[23]=E,e[24]=b,e[25]=T):T=e[25],T},xN=we({showLess:{id:"showLess",defaultMessage:"Show Less"},showMore:{id:"showMore",defaultMessage:"Show More"}});function Pve(t){return!t}const eit=re(me,"57c721",20,20),Rve={highlightedAttributions:new Set},yN=8,aS=tn(()=>Rve),bN={debugMode:!1,viewModelPredictedFallback:!1,disableSegmentReplacement:!1,useSigmoid:!0,influenceTemperature:.2,probThreshold:.45,probBaseline:.02},tE=tn()(NR(()=>N({},bN),{name:"search.attributions-settings",version:yN,migrate:(t,e)=>e!==yN?bN:t}));function LU(t,e){return"".concat(t,"-").concat(e)}const vN={setHighlight:(t,e)=>{if(t==null)return;if(e==null||e.length===0)return vN.clearHighlights();Array.isArray(e)||(e=[e]);const n=new Set;for(const s of e)n.add(LU(t,s));return aS.setState(()=>({highlightedAttributions:n}))},setHighlightBySource:(t,e)=>{var s;let n;"attribution_segments"in e&&(n=(s=e.attribution_segments)!=null?s:void 0),vN.setHighlight(t,n)},clearHighlights:()=>aS.setState({highlightedAttributions:new Set})},tit=()=>tE(t=>t.viewModelPredictedFallback),nit=()=>tE(t=>t.debugMode),sit=(t,e)=>aS(n=>t==null?!1:n.highlightedAttributions.has(LU(t,e))),oit=()=>tE(t=>t.disableSegmentReplacement),Ove=v.createContext(void 0);function rit(){return!1}const ait=()=>Je("453021389").get("enable-block-animations",!1);function DU(t){var e;return t.author.role===dt.Assistant&&((e=t.recipient)==null?void 0:e.startsWith(ds.CANMORE))===!0}function BU(t){var e;return t.author.role===dt.Tool&&((e=t.author.name)==null?void 0:e.startsWith(Yi))===!0}function FU(t,e){const n=[];let s=0,o=0;for(const r of e)n[o]=s,s+=r.length,o+=1;return n[o]=s,t.map(r=>{const{start:a,end:l}=r;return{start:n[a],end:n[l]}})}function Lve(t,e){const n=[];let s=0,o=0;for(const r of e)n[s]=o,r.length===2?(n[s+1]=o,s+=2):s+=1,o+=1;return n[s]=o,t.map(r=>{const{start:a,end:l}=r;return{start:n[a],end:n[l]}})}function iS(t,e){const n=t.map(({content:r,id:a,start:l,end:c})=>({id:a,at:{start:l,end:c},content:r})),s=n.map(r=>r.at),o=FU(s,e);return n.map((r,a)=>G(N({},r),{at:o[a]}))}function iit(t,e){const n=t.map(r=>r.at),s=Lve(n,e);return t.map((r,a)=>G(N({},r),{at:s[a]})).map(({content:r,id:a,at:l})=>({id:a,start:l.start,end:l.end,content:r}))}const Dve=(t,e)=>{const n=FU(e,t),s=[];for(let r=0;r<n.length;r++){const{start:a}=n[r];let l=0;const c=n.slice(0,r).entries();for(const[u,d]of c)if(a>d.start||a>d.end){const f=d.end-d.start,m=e[u].content.length;l+=m-f}s.push(l)}const o=[];for(let r=0;r<n.length;r++){const{content:a}=e[r],l=n[r],{start:c}=l,u=s[r],d={start:c+u,end:c+u+a.length};o.push({id:"edit-".concat(r),content:a,positionBefore:l,positionAfter:d})}return o},Bve=(t,e)=>ue.safeGet("/textdoc/{textdoc_id}/diff/{version}",{parameters:{path:{textdoc_id:t,version:e}}});function Fve(t,e){const n=t.filter(s=>s.op_type==="edit");return Dve(e,n)}const Uve=async(t,e)=>{if(e===1)return null;const{content_before:n,content_after:s,comments_before:o,comments_after:r,operations:a}=await Bve(t,e!=null?e:-1);return{edits:Fve(a,n),contentBefore:n,contentAfter:s,commentsBefore:iS(o,n),commentsAfter:iS(r,s)}},UU=(t,e)=>En({queryKey:[t,e,"edit"],enabled:e!=null,gcTime:1e3*60*5,queryFn:()=>Uve(t,e)}),nE=()=>({lastFlushedAt:null,lastTriggeredAt:null}),sE=tn(ls(()=>({userEdits:{},timestamps:{}}))),{setState:ax}=sE,lit=t=>sE(({timestamps:e})=>{var n,s,o,r;return((s=(n=e[t])==null?void 0:n.lastTriggeredAt)!=null?s:0)>((r=(o=e[t])==null?void 0:o.lastFlushedAt)!=null?r:0)}),cit=t=>{ax(e=>{var n,s;(s=(n=e.timestamps)[t])!=null||(n[t]=nE()),e.timestamps[t].lastTriggeredAt=Date.now()})},uit=({textdocId:t,basedOnVersionInt:e,content:n,comments:s})=>{ax(o=>{var r,a,l,c;(a=(r=o.timestamps)[t])!=null||(r[t]=nE()),o.timestamps[t].lastFlushedAt=Date.now(),(c=(l=o.userEdits)[t])!=null||(l[t]=[]),o.userEdits[t].push({content:n,basedOnVersionInt:e,nextVersionInt:null,isPending:!0,comments:s})})},dit=({textdocId:t,basedOnVersionInt:e,newVersion:n})=>{ax(s=>{var o,r;(r=(o=s.userEdits)[t])!=null||(o[t]=[]);for(const a of s.userEdits[t])if(a.basedOnVersionInt===e){a.isPending=!1,a.nextVersionInt=n;break}})},Hve=t=>{ax(e=>{for(const{textdocId:n,versionInt:s}of t){const o=e.userEdits[n];o&&(e.userEdits[n]=o.filter(r=>r.basedOnVersionInt>(s!=null?s:Qa)),o.length===0&&(e.timestamps[n]=nE()))}})},$ve=Wc(({userEdits:t})=>t),Gve=Wc(t=>{const e=new Map;for(const[n,s]of Object.entries(t)){const o=_a(s);if(!o)continue;const{content:r,comments:a,nextVersionInt:l,basedOnVersionInt:c}=o;e.set(n,{textdocId:n,comments:a,content:r,versionInt:l!=null?l:c})}return e}),Vve=()=>sE(t=>Gve($ve(t))),HU=tn(()=>({optimisticRestore:null})),{setState:e1,getState:zve}=HU;function Wve(t){e1(e=>{var n;if(e.optimisticRestore){for(const{textdocId:s,versionInt:o}of t)if(e.optimisticRestore.textdocId===s&&e.optimisticRestore.versionInt!==-1&&((n=e.optimisticRestore.versionInt)!=null?n:Qa)<=(o!=null?o:Qa))return{optimisticRestore:null}}return e})}function $U(){return HU(t=>t.optimisticRestore)}function fit(t,e,n){const s=Nt(),{mutateAsync:o}=zt({mutationKey:["canvas","textdoc","persist"],mutationFn:qve,onSuccess:()=>{t&&s.invalidateQueries({queryKey:[t,"textdocs"]})}}),r=$U(),a=v.useCallback(async()=>{if(!e||!n||e.versionInt==null||n.versionInt==null||zve().optimisticRestore!=null)return;const{textdocId:l,versionInt:c}=e,u=n.versionInt,d=G(N({},n),{versionInt:-1});e1(()=>({optimisticRestore:d})),ID(l);try{const f=await o({textdocId:l,versionInt:c,restoreFromVersionInt:u});e1(m=>({optimisticRestore:m.optimisticRestore&&G(N({},m.optimisticRestore),{versionInt:f})}))}catch(f){e1(()=>({optimisticRestore:null})),oge(l,{version:u})}},[e,n,o]);return{optimisticRestoredTextdocVersion:r,restoreHistoricalTextdocVersion:a}}async function qve({textdocId:t,versionInt:e,restoreFromVersionInt:n}){return(await ue.safePost("/textdoc/{textdoc_id}/restore",{parameters:{path:{textdoc_id:t}},requestBody:{version:e,restore_from_version:n}})).version}const Kve=async({lastVersion:t,textdocId:e,commentId:n,reason:s})=>(await ue.safeDelete("/textdoc/{textdoc_id}/{version}/comment/{comment_id}",{parameters:{query:{reason:s},path:{textdoc_id:e,version:String(t),comment_id:n}}})).version,lS=tn(()=>({persistingOp:null,ops:[]})),{setState:t1,getState:Yve}=lS,Zve=()=>{const t=lS(({ops:n})=>n),e=lS(({persistingOp:n})=>n);return v.useMemo(()=>[...t,e].filter(bp),[t,e])},Qve=t=>{t1(e=>{let n=e.ops;for(const{textdocId:s,versionInt:o}of t)n=n.filter(r=>{var a;return r.textdocId!==s||((a=r.versionInt)!=null?a:Qa)>(o!=null?o:Qa)});return{ops:n}})},mit=t=>v.useCallback(async(e,n)=>{const s=!!Yve().persistingOp,o=t==null?void 0:t.versionInt,r=t==null?void 0:t.textdocId;if(s||o==null||r==null)return!1;const a={kind:ns.REMOVE_COMMENT,textdocId:r,author:{role:dt.User},versionInt:o,createdAt:Date.now()/1e3,commentId:e,reason:n};t1(({ops:l})=>({ops:l,isPersisting:!0,persistingOp:a}));try{const l=await Kve({lastVersion:o,textdocId:r,commentId:e,reason:n});return t1(({ops:c})=>({ops:[...c,G(N({},a),{versionInt:l})],isPersisting:!1,persistingOp:null})),l}catch(l){return t1(({ops:c})=>({ops:c,isPersisting:!1,persistingOp:null})),!1}},[t]),oE=()=>xe("2928249761");function Jve(t){var n,s;const e=(s=(n=t.metadata)==null?void 0:n.open_in_canvas_view)==null?void 0:s.id;return e!=null?e:null}const Xve=async t=>await ue.safeGet("/conversation/{conversation_id}/textdocs",{parameters:{path:{conversation_id:t}}}).catch(e=>(qc.logError("Failed to fetch persisted textdocs",e,{clientThreadId:t}),[])),eSe=async t=>{const e=await Xve(t),n=new Map(e.map(r=>[r.id,r])),s=[];for(const{id:r,content:a,version:l,textdoc_type:c,title:u,comments:d,metadata:f}of e)s.push({textdocId:r,messageId:null,type:Mc(c),comments:iS(d,a),status:ro.COMPLETE,title:u,content:a,versionInt:l,createdAt:0,metadata:{content_references:f==null?void 0:f.content_references,hive_id:f==null?void 0:f.hive_id,record_meeting_id:f==null?void 0:f.record_meeting_id}});return{persistedTextdocVersionById:new Map(s.map(r=>[r.textdocId,r])),persistedTextdocVersions:s,persistedTextdocById:n}};function tSe(t){const e=oE(),n=xe("3959994305")||e,s=Un(t),[o,r]=Ze(t,p=>[ve.isMessageTurnEnded(p),ve.lastUserMessage(p)]),a=r&&!!Jve(r),l=!!s&&mt()&&(!n||o||!!a),{data:c,error:u,isLoading:d,isFetching:f,refetch:m}=ut({queryKey:[s,"textdocs"],enabled:l,queryFn:s?()=>eSe(s):xC});return v.useEffect(()=>{if(!c)return;const{persistedTextdocVersions:p}=c;Qve(p),Hve(p),Wve(p)},[c]),[G(N({},c),{error:u,isEnabled:l,isLoading:d,isFetching:f}),m]}var o0=(t=>(t[t.INITIALIZING=0]="INITIALIZING",t[t.READY=1]="READY",t[t.REFETCHING=2]="REFETCHING",t))(o0||{});function GU(t){"use forget";const e=D.c(14),[n,s]=tSe(t),{error:o,persistedTextdocVersionById:r,isEnabled:a,isLoading:l,isFetching:c}=n,u=r===void 0?null:r,d=Nt();let f;e[0]!==t||e[1]!==d||e[2]!==s?(f=()=>{var b,y,S,C,w;if(!mt())return;const g=ve.getConversationLastTurn(At(t)),h=(b=g==null?void 0:g.messages)!=null?b:[],_=Bc(h,sSe),x=h.some(nSe);if(_){const k=(S=(y=_.metadata)==null?void 0:y.canvas)==null?void 0:S.textdoc_id,E=(w=(C=_.metadata)==null?void 0:C.canvas)==null?void 0:w.version;k!=null&&E!=null&&d.prefetchQuery(UU(k,E))}(_||x)&&s()},e[0]=t,e[1]=d,e[2]=s,e[3]=f):f=e[3],pL(f);let m;e[4]!==a||e[5]!==c||e[6]!==l||e[7]!==u?(m=0,u&&c?m=2:(!a||u&&!c&&!l)&&(m=1),e[4]=a,e[5]=c,e[6]=l,e[7]=u,e[8]=m):m=e[8];let p;return e[9]!==o||e[10]!==u||e[11]!==s||e[12]!==m?(p={status:m,fetchError:o,textdocVersionById:u,refetch:s},e[9]=o,e[10]=u,e[11]=s,e[12]=m,e[13]=p):p=e[13],p}function nSe(t){var e,n;return((n=(e=t.metadata)==null?void 0:e.canvas)==null?void 0:n.user_created_temp_textdoc_id)!=null}function sSe(t){return BU(t)}const oSe=re(me,"e45ab3",20,20);function pit({messages:t,clientThreadId:e}){var r,a,l,c;const n=t.find(u=>{var d;return((d=u.metadata)==null?void 0:d.open_in_canvas_view)!=null}),{textdocVersionById:s}=GU(e);if(n==null)return null;const o=(a=(r=n.metadata)==null?void 0:r.open_in_canvas_view)!=null&&a.id?s==null?void 0:s.get((c=(l=n.metadata)==null?void 0:l.open_in_canvas_view)==null?void 0:c.id):void 0;return o!=null?i.jsxs("div",{className:"text-token-text-tertiary me-5 mt-2 mb-2 flex items-center justify-end gap-1",children:[i.jsx(Rr,{className:"icon"}),o.type.startsWith("code/")?i.jsx(oSe,{className:"ms-2 inline-block"}):i.jsx(vo,{className:"ms-2 inline-block"}),o.title]}):i.jsxs("div",{className:"text-token-text-tertiary me-5 mt-2 mb-2 flex items-center justify-end gap-1",children:[i.jsx(Rr,{className:"icon"}),i.jsx(P,{id:"NHZXLr",defaultMessage:"Canvas document"})]})}const git="n7jupd_crefs",Ii="agentCitation";function rSe(t){return t.type!=="invalid"&&t.cite_key!=null}function hit(t,e){return e.forEach((n,s)=>{n.start_idx!=null&&n.end_idx!=null?(t=t.replace(dSe(n),(o,r)=>" :".concat(Ii,"{").concat(pu(s,r),"}\n")),t=t.replace(cSe(n),(o,r)=>" :".concat(Ii,"{").concat(pu(s,r),"}")),t=t.replace(iSe(n)," :".concat(Ii,"{").concat(pu(s),"}"))):rSe(n)&&(t=t.replace(uSe(n),(o,r)=>" :".concat(Ii,"{").concat(pu(s,r),"}\n")),t=t.replace(lSe(n),(o,r)=>" :".concat(Ii,"{").concat(pu(s,r),"}")),t=t.replace(aSe(n)," :".concat(Ii,"{").concat(pu(s),"}")))}),t}function _it(){return t=>{ED(t,e=>{var n;!kpe(e)||e.name!==Ii||(e.data=(n=e.data)!=null?n:{},e.data.hName=Ii,e.data.hProperties=G(N({},e.attributes),{nodeType:e.type}))})}}function aSe(t){return new RegExp("{{".concat(t.type,":").concat(t.cite_key,"}}\\.?"))}function iSe(t){return new RegExp("".concat(t.matched_text,"\\.?"))}function lSe(t){return new RegExp("\\[([^\\]]+)\\]\\(\\{\\{"+t.type+":"+t.cite_key+"\\}\\}\\)\\.?","g")}function cSe(t){return new RegExp("\\[([^\\]]+)\\]\\("+t.matched_text+"\\)\\.?","g")}function uSe(t){return new RegExp("\\!\\[([^\\]]+)\\]\\(\\{\\{"+t.type+":"+t.cite_key+"\\}\\}\\)\\.?","g")}function dSe(t){return new RegExp("\\!\\[([^\\]]+)\\]\\("+t.matched_text+"\\)\\.?","g")}function pu(t,e){const n={citationIndex:t.toString()};return e&&(n.label=e),Object.entries(n).map(([s,o])=>"".concat(s,"='").concat(o,"'")).join(" ")}function xit({hint:t}){if(!t)return null;const e=t.entity_name||t.entity_id;return i.jsxs("div",{className:"text-token-text-tertiary mb-2 flex flex-row items-center justify-end",children:[i.jsx(Rr,{className:"icon me-1.5"}),i.jsx("span",{className:"shrink-0",children:i.jsx(P,{id:"HNz45X",defaultMessage:"Focusing on {entity}",values:{entity:i.jsx("span",{className:"text-token-text-secondary font-semibold",children:e})}})})]})}function fSe(t,e=[]){var s;if(e.length===0)return t;const n=e.filter(o=>{var r;return o.end_ix<=t.length&&o.citation_format_type==="tether_markdown"&&((r=o.metadata)==null?void 0:r.type)==="webpage"});for(let o=n.length-1;o>=0;o--){const r=n[o];if(((s=r.metadata)==null?void 0:s.type)!=="webpage")continue;const{start_ix:a,end_ix:l,metadata:c}=r,d=t.substring(a,l).replace(/\[(.*?)\]\((\d+)\)/g,"[$1](".concat(c==null?void 0:c.url,")"));t=t.substring(0,a)+d+t.substring(l)}return t}function mSe(t,e=[]){var r,a;if(e.length===0)return[];const n=[],s=e.filter(l=>l.end_ix<=t.length&&l.citation_format_type!=="tether_markdown"),o=EQ(t);for(let l=s.length-1;l>=0;l--){const c=s[l];let u;const{start_ix:d,end_ix:f,metadata:m,invalid_reason:p}=c;if(!(m!=null&&m.type))continue;const g=o.slice(d,f).join("");switch(m.type){case"webpage":u=G(N({},m),{type:"webpage",title:(r=m.title)!=null?r:"",snippet:(a=m.text)!=null?a:null,pub_date:pSe(m.pub_date),matched_text:g,start_idx:d,end_idx:f,alt:null,prompt_text:null,safe_urls:[],attributions:null,refs:[]});break;case"file":u=G(N({},m),{matched_text:g,start_idx:d,end_idx:f,alt:null,prompt_text:null,safe_urls:[],refs:[]});break}p&&(u={type:"invalid",alt:p,prompt_text:null,start_idx:d,end_idx:f,matched_text:g,invalid:!0,safe_urls:[],refs:[]});let h=!1;if(n.length>0){const _=n[n.length-1];SN(_)===SN(u)&&o.slice(_.end_idx,c.start_ix).join("").trim().length===0&&(n[n.length-1].end_idx=c.end_ix,h=!0)}!h&&u&&n.push(u)}return n}function yit(t,e=[],n=[]){const s=fSe(t,e),r=[...n.length>0?[]:mSe(s,e),...n],a=u3(r);return{text:s,contentReferences:a}}function SN(t){switch(t.type){case"file":return t.id;case"webpage":return t.url;case"invalid":return t.alt}}function pSe(t){return t==null?null:new Date(t).getTime()/1e3}function bit(t){return t.startsWith("file_")||t.startsWith("file-")}class gSe{constructor(){ye(this,"loggedEvents",new Set)}logEvent(e,n,s){if(!this.loggedEvents.has(e)){const o=s!=null?s:window.performance.now();V.logEvent(e,N({timeMs:o},n)),this.loggedEvents.add(e)}}}const hSe=new gSe;function vit({messages:t,clientThreadId:e}){var l,c,u;const[n,s]=v.useState(),o=te(),r=Un(e);let a=null;for(const d of t)if(((u=(c=(l=d.metadata)==null?void 0:l.dalle)==null?void 0:c.from_client)==null?void 0:u.operation)!=null){a=d.metadata.dalle.from_client.operation;break}return v.useEffect(()=>{if(a==null)return;const d=a.original_file_id;async function f(m){try{const p=await mp(m,{conversationId:r,showInline:!1});p.status===Yd.Success?s(p.download_url):Ve.addError("Error fetching URL for file ".concat(m,": ").concat(p.status))}catch(p){}}f(d)},[r,a]),a==null?null:i.jsxs("div",{className:"text-token-text-tertiary me-5 mt-2 mb-2 flex items-center justify-end gap-1",children:[i.jsx(Rr,{className:"icon"}),n==null?i.jsx("div",{className:"h-7"}):i.jsxs(i.Fragment,{children:[i.jsx("img",{src:n,alt:o.formatMessage({id:"textMessage.editedImageAltText",defaultMessage:"Edited image"}),className:"h-7 w-auto rounded-sm opacity-50"}),a.type==="inpainting"&&i.jsx("span",{className:"ms-1 text-sm font-semibold",children:i.jsx(P,{id:"textMessage.inpaintedImage",defaultMessage:"Selection"})})]})]})}function ix({type:t="info",children:e,isDismissible:n=!1,onDismiss:s,className:o,isElevated:r=!1,primaryAction:a,customIcon:l,iconCentered:c=!1}){const[u,d]=v.useState(!1);if(u)return null;let f;return t!=="none"&&l!==null&&(f=l||kr),i.jsxs(_Se,{$type:t,className:q("flex w-full items-center gap-6 rounded-2xl border text-sm",n?"py-2.5 ps-3 pe-2 md:py-3 md:ps-4 md:pe-3":"px-3 py-2.5 md:p-4",r&&"shadow-xxs",o),children:[i.jsxs("div",{className:q("flex min-w-0 grow gap-3",c?"items-center":"items-start"),children:[f&&i.jsx(f,{className:q("icon-lg shrink-0",n&&"mt-[2px] md:mt-px",(t==="info"||t==="none")&&"text-token-text-secondary")}),i.jsx("div",{className:q("min-w-0 grow",n?"pt-[4px] md:pt-[3px]":"pt-[2px]",!f&&"ps-1"),children:e})]}),a,n&&i.jsx("button",{onClick:()=>{d(!0),s==null||s()},className:q("text-token-text-primary flex h-7 w-7 shrink-0 items-center justify-center self-start rounded-full bg-transparent",(t==="info"||t==="none")&&"hover:bg-token-main-surface-secondary",t==="danger"&&"hover:bg-token-surface-error/10",t==="warning"&&"hover:bg-orange-400/10"),children:i.jsx(ms,{className:"icon"})})]})}var Yj;const _Se=Tt.div(Yj||(Yj=_t(["\n",""])),({$type:t})=>{switch(t){case"danger":return"text-token-text-error border-token-surface-error/15 bg-token-surface-error/5";case"warning":return"text-orange-600 bg-orange-400/5 border-orange-400/15";case"success":return"text-green-500 border-green-500 bg-green-500/10";case"info":return"text-token-text-primary border-token-border-default";default:return"text-token-text-primary border-token-border-default bg-token-main-surface-primary/10"}}),xSe=({disclaimerContent:t})=>{let e;switch(t){case"us_elections_policy":e=i.jsx(P,{id:"D1Mw8a",defaultMessage:"Always verify information about voting with your state or local election authority. For more information, visit <usElectionLink></usElectionLink>.",values:{usElectionLink:()=>i.jsx("a",{target:"_blank",href:"https://canivote.org",rel:"noreferrer",className:"underline hover:no-underline",children:"canivote.org"})}});break;case"eu_elections_policy":e=i.jsx(P,{id:"Disclaimer.EUElections",defaultMessage:"Always verify information about voting with your local election authority. For more information about the EU elections, visit <euElectionLink></euElectionLink>.",values:{euElectionLink:()=>i.jsx("a",{target:"_blank",href:"https://elections.europa.eu",rel:"noreferrer",className:"underline hover:no-underline",children:"elections.europa.eu"})}});break;case"generic_elections_policy":e=i.jsx(P,{id:"Disclaimer.GenericElections",defaultMessage:"Always verify information about voting with your local election authority."});break;default:e=i.jsx(Cr,{className:"text-sm",componentOverrides:{a:n=>{const a=n,{node:s,children:o}=a,r=De(a,["node","children"]);return i.jsx("a",G(N({},r),{target:"_blank",rel:"noreferrer",className:"underline hover:no-underline [&&]:text-black [&&]:underline [&&]:hover:text-black dark:[&&]:text-white dark:[&&]:hover:text-white",children:o}))}},children:t})}return i.jsx(ix,{className:"w-fit self-start",children:e})};function VU({message:t}){var e,n;return(n=(e=t==null?void 0:t.clientMetadata)==null?void 0:e.disclaimers)!=null&&n.length?i.jsx("div",{className:"flex flex-col gap-2",children:t.clientMetadata.disclaimers.map(s=>i.jsx(xSe,{disclaimerContent:s},s))}):null}const ySe=t=>{var e;return{type:"table",file_id:(e=t.id)!=null?e:"",title:TQ(t),file_name:t.name,context_connector_info:t.context_connector_info}};function bSe(){return b1(Qs.DataAnalysisV2)}const vSe=re(me,"29e159",20,20,!0);function zU(n){var s=n,{contextConnectorSourceUrl:t}=s,e=De(s,["contextConnectorSourceUrl"]);const o=te(),[r,a]=v.useState({width:0,height:0}),l=r.width/r.height,c=r.width>0&&r.height>0,u=v.useMemo(()=>{if(t!==void 0){let d=new URL(t);return d.protocol!=="https:"&&(d=void 0),d==null?void 0:d.toString()}},[t]);return v.useEffect(()=>{if(!e.src)throw new Error("ExpandableImage requires a src");const d=new Image;d.onload=()=>{a({width:d.naturalWidth,height:d.naturalHeight})},d.onerror=()=>{},d.src=e.src},[e.src]),i.jsxs(rp,{children:[i.jsx(GP,{className:e.className,disabled:!c,children:e.children}),i.jsx(ap,{children:i.jsxs(vC,{className:"radix-state-open:animate-show fixed inset-0 z-[100] flex items-center justify-center overflow-hidden bg-black/90 dark:bg-black/80",children:[i.jsx(U0,{asChild:!0,children:i.jsx("button",{className:"absolute end-4 top-4",children:i.jsx(ms,{className:"h-5 w-5 text-gray-100"})})}),i.jsxs(F0,{onEscapeKeyDown:d=>d.stopPropagation(),className:"radix-state-open:animate-contentShow shadow-xl focus:outline-hidden",children:[i.jsx("div",{className:q("relative max-h-[85vh] max-w-[90vw]"),style:{aspectRatio:l},children:i.jsx("img",{src:e.src,alt:e.alt,className:"h-full w-full object-contain"})}),u&&i.jsx("div",{className:"absolute end-14 top-4",children:i.jsx(St,{label:o.formatMessage(SSe.openOriginal),children:i.jsx("a",{href:u,target:"_blank",rel:"noreferrer",children:i.jsx(vSe,{className:"icon rotate-180 text-gray-100"})})})})]})]})})]})}const SSe=we({openOriginal:{id:"ExpandableImage.openOriginal",defaultMessage:"Open original image"}}),WU=re(me,"1a3695",20,20),dg=re(me,"d7281f",20,20);function CSe(t){return En({queryKey:["file-preview",t.fileId,t.serverThreadId],queryFn:async()=>{const e=await mp(t.fileId,{conversationId:t.serverThreadId,gizmoId:t.gizmoId,isUnauthenticated:t.isUnauthenticated,showInline:!0});if(e.status===Yd.Success)return e.download_url;throw new Error("Failed to download file inline preview")},staleTime:BR})}const wSe=Hn(()=>Xd({mutationFn:async({filepickerStore:t,tempId:e,mode:n,updatedFile:s,intl:o,isBigPaste:r})=>{const a=t.getState().files,l=e!=null?a.filter(u=>u.tempId!==e):a;Sr.restoreFiles(t,l);const c=ti(s);return await Sr.uploadFile(t,c,s,io.Retrieval,[],o,lp(),{isBigPaste:r,mode:n},void 0),{tempId:c}}}));function CN({filepickerStore:t,tempId:e,updatedFile:n,intl:s,isBigPaste:o,mode:r}){const{mutate:a}=wSe();return a({filepickerStore:t,tempId:e,updatedFile:n,intl:s,isBigPaste:o,mode:r})}const qU=er((t,e)=>{const n=Gs(()=>CSe(e));return yt(()=>({fileInfo$:yt(()=>n().data),error$:yt(()=>n().error)}))});function kSe({downloadUrl:t,isUnauthenticated:e,contentType:n}){return En({queryKey:["file-preview-contents",t],queryFn:async({signal:s})=>{const o=await nc.get(t,{skipJsonTransform:!0,additionalHeaders:{"content-type":n},signal:s,authOption:e?Ot.Anonymous:void 0}),r=o instanceof Response?o:null;return r?await r.text():null}})}const ESe=er((t,{downloadUrl:e,isUnauthenticated:n,contentType:s})=>{const o=Gs(()=>kSe({downloadUrl:e,isUnauthenticated:n,contentType:s}));return yt(()=>{const{data:r,error:a}=o();return r!=null?r:a})}),TSe=er((t,e)=>yt(()=>{const n=qU(t,e);return n.fileInfo$()?n.fileInfo$():null})),MSe=er((t,e)=>yt(()=>{const n=qU(t,e);if(!n.fileInfo$())return null;const s=n.fileInfo$();return s?ESe(t,{downloadUrl:s,isUnauthenticated:e.isUnauthenticated,contentType:e.contentType}):null}));er((t,e)=>yt(()=>{const n=TSe(t,e);if(!n)return null;const s=mt()?Object.entries(fd({accessToken:D0()})).map(([o,r])=>({key:o,value:r})):[];return{content:{location:{url:n,headers:s}},metaData:{fileName:e.fileName}}}));const ASe=Hn(()=>Je("3228704802").get("text_editor_sheet_enabled",!1));async function NSe(t){const n=t.stream().getReader(),s=new TextDecoder("utf-8");let o="";for(;;){await di.yield();const{value:r,done:a}=await n.read();if(a)break;o+=s.decode(r,{stream:!0})}return o+=s.decode(),await di.yield(),o}const ISe=MQ((t,e,n)=>{const s=st(null);async function o(){if(!ri(e))return;const r=await NSe(e);s.set(r)}return ri(e)&&o(),yt(()=>{if(n!=null){const r=MSe(t,{fileId:n,fileName:ri(e)?e.name:e,isUnauthenticated:!mt(),contentType:e instanceof File?e.type:"text/plain"});if(typeof r=="string")return r}return s()})},(t,e)=>"".concat(t instanceof File?t.name:t,"-").concat(e));function ri(t){return typeof window>"u"?!1:typeof t!="string"}const Ch={javascript:{ext:"js",mime:"text/javascript"},javascriptreact:{ext:"jsx",mime:"text/javascript"},typescript:{ext:"ts",mime:"text/typescript"},typescriptreact:{ext:"tsx",mime:"text/typescript"},python:{ext:"py",mime:"text/x-python"},java:{ext:"java",mime:"text/x-java"},c:{ext:"c",mime:"text/x-c"},cpp:{ext:"cpp",mime:"text/x-c++"},csharp:{ext:"cs",mime:"text/x-csharp"},go:{ext:"go",mime:"text/x-go"},rust:{ext:"rs",mime:"text/x-rust"},ruby:{ext:"rb",mime:"text/x-ruby"},php:{ext:"php",mime:"text/x-php"},swift:{ext:"swift",mime:"text/x-swift"},kotlin:{ext:"kt",mime:"text/x-kotlin"},scala:{ext:"scala",mime:"text/x-scala"},bash:{ext:"sh",mime:"text/x-sh"},powershell:{ext:"ps1",mime:"application/x-powershell"},json:{ext:"json",mime:"application/json"},yaml:{ext:"yaml",mime:"application/x-yaml"},html:{ext:"html",mime:"text/html"},css:{ext:"css",mime:"text/css"},haskell:{ext:"hs",mime:"text/x-haskell"},clojure:{ext:"clj",mime:"text/x-clojure"},elixir:{ext:"ex",mime:"text/x-elixir"},erlang:{ext:"erl",mime:"text/x-erlang"},objectivec:{ext:"m",mime:"text/x-objectivec"},objectivecpp:{ext:"mm",mime:"text/x-objectivec++"},asm:{ext:"asm",mime:"text/x-asm"},makefile:{ext:"Makefile",mime:"text/x-makefile"},markdown:{ext:"md",mime:"text/markdown"},text:{ext:"txt",mime:"text/plain"}};function jSe(t){if(!t)return null;for(const e in Ch)if(Object.prototype.hasOwnProperty.call(Ch,e)&&Ch[e].ext===t)return Ch[e].mime;return null}function PSe(t){return typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer}function RSe(t){const{buffer:e,byteOffset:n,byteLength:s}=t;if(!PSe(e))return e.slice(n,n+s);const o=new Uint8Array(s);return o.set(new Uint8Array(e,n,s)),o.buffer}function OSe({input:t,fileName:e,fallbackMime:n,lastModified:s}){let o;if(t instanceof Blob)o=t;else if(t instanceof ArrayBuffer)o=new Blob([t],{type:n});else if(ArrayBuffer.isView(t))o=new Blob([RSe(t)],{type:n});else if(typeof t=="string")if(/^[A-Za-z0-9+/]+={0,2}$/.test(t)){const r=Uint8Array.from(atob(t),a=>a.charCodeAt(0));o=new Blob([r],{type:n})}else o=new Blob([t],{type:n});else throw new TypeError("Unsupported input type");return new File([o],e,{type:o.type||n,lastModified:s instanceof Date?s.getTime():+Date.now()})}const LSe=t=>v.createElement("svg",N({width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},t),v.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.7587 3H15.2413C16.0463 2.99999 16.7106 2.99998 17.2518 3.04419C17.8139 3.09012 18.3306 3.18868 18.816 3.43597C19.5686 3.81947 20.1805 4.43139 20.564 5.18404C20.8113 5.66937 20.9099 6.18608 20.9558 6.74817C21 7.28936 21 7.95372 21 8.75868V15.2413C21 16.0463 21 16.7106 20.9558 17.2518C20.9099 17.8139 20.8113 18.3306 20.564 18.816C20.1805 19.5686 19.5686 20.1805 18.816 20.564C18.3306 20.8113 17.8139 20.9099 17.2518 20.9558C16.7106 21 16.0463 21 15.2413 21H8.75868C7.95372 21 7.28936 21 6.74817 20.9558C6.18608 20.9099 5.66937 20.8113 5.18404 20.564C4.43139 20.1805 3.81947 19.5686 3.43597 18.816C3.18868 18.3306 3.09012 17.8139 3.04419 17.2518C2.99998 16.7106 2.99999 16.0463 3 15.2413V8.7587C2.99999 7.95373 2.99998 7.28937 3.04419 6.74817C3.09012 6.18608 3.18868 5.66937 3.43597 5.18404C3.81947 4.43139 4.43139 3.81947 5.18404 3.43597C5.66937 3.18868 6.18608 3.09012 6.74817 3.04419C7.28937 2.99998 7.95373 2.99999 8.7587 3ZM5 11V15.2C5 16.0566 5.00078 16.6389 5.03755 17.089C5.07337 17.5274 5.1383 17.7516 5.21799 17.908C5.40973 18.2843 5.7157 18.5903 6.09202 18.782C6.24842 18.8617 6.47262 18.9266 6.91104 18.9624C7.36113 18.9992 7.94342 19 8.8 19H9V11H5ZM9 9H5V8.8C5 7.94342 5.00078 7.36113 5.03755 6.91104C5.07337 6.47262 5.1383 6.24842 5.21799 6.09202C5.40973 5.7157 5.7157 5.40973 6.09202 5.21799C6.24842 5.1383 6.47262 5.07337 6.91104 5.03755C7.36113 5.00078 7.94342 5 8.8 5H9V9ZM11 11V19H15.2C16.0566 19 16.6389 18.9992 17.089 18.9624C17.5274 18.9266 17.7516 18.8617 17.908 18.782C18.2843 18.5903 18.5903 18.2843 18.782 17.908C18.8617 17.7516 18.9266 17.5274 18.9624 17.089C18.9992 16.6389 19 16.0566 19 15.2V11H11ZM19 9H11V5H15.2C16.0566 5 16.6389 5.00078 17.089 5.03755C17.5274 5.07337 17.7516 5.1383 17.908 5.21799C18.2843 5.40973 18.5903 5.7157 18.782 6.09202C18.8617 6.24842 18.9266 6.47262 18.9624 6.91104C18.9992 7.36113 19 7.94342 19 8.8V9Z"})),xn="/cdn/assets/sprites-sonic-bm18hwxp.svg",rE=re(xn,"ab8f91",24,24);function DSe({enabled:t,text:e}){"use no forget";const n=v.useRef(null),[s,o]=v.useState(!1),r=v.useCallback(a=>{n.current=a},[]);return v.useEffect(()=>{if(!t||!n.current){v.startTransition(()=>{o(!1)});return}const a=()=>{const l=n.current;if(!l)return;const c=l.scrollWidth>l.clientWidth;v.startTransition(()=>{o(c)})};if(a(),!(typeof ResizeObserver>"u"))return Qc({axis:"width",onChange:()=>a(),target:n.current,debounce:!0})},[t,e]),{ref:r,isTruncated:s}}function BSe(t){"use forget";var H,$;const e=D.c(46),{fileName:n,icon:s,loadingPercentage:o,contextConnectorInfo:r,customFileDescription:a,customFileExtension:l,fileNameClass:c,showFileNameTooltip:u}=t,d=u===void 0?!1:u,f=te(),m=o!==void 0&&o<100;let p;e[0]!==l||e[1]!==n?(p=l!=null?l:Lm(n),e[0]=l,e[1]=n,e[2]=p):p=e[2];const g=p,h=(H=r==null?void 0:r.syntheticExtension)!=null?H:null;let _;e[3]!==g||e[4]!==f?(_=function(z){if(kp(z))return f.formatMessage(gu.fileDescImage);switch(g){case"py":return"Python";case"js":case"jsx":return"JavaScript";case"ts":case"tsx":return"TypeScript";case"pdf":return"PDF";case"doc":case"docx":case"txt":return f.formatMessage(gu.fileDescDocument);case"zip":return f.formatMessage(gu.fileDescZip);case"xls":case"xlsx":case"csv":return f.formatMessage(gu.fileDescSpreadsheet);case"ppt":case"pptx":case"key":return f.formatMessage(gu.fileDescPresentation);default:return f.formatMessage(gu.fileDescFile)}},e[3]=g,e[4]=f,e[5]=_):_=e[5];const x=_;let b;e[6]!==r||e[7]!==a||e[8]!==g||e[9]!==n||e[10]!==x||e[11]!==h?(b=a!=null?a:r!=null&&r.contextConnector?i.jsx(AQ,{contextConnector:r.contextConnector,extension:($=h!=null?h:g)!=null?$:null}):x(n),e[6]=r,e[7]=a,e[8]=g,e[9]=n,e[10]=x,e[11]=h,e[12]=b):b=e[12];const y=b;let S;e[13]!==n||e[14]!==h?(S=NQ(n,h),e[13]=n,e[14]=h,e[15]=S):S=e[15];const C=S;let w;e[16]!==C||e[17]!==d?(w={enabled:d,text:C},e[16]=C,e[17]=d,e[18]=w):w=e[18];const{ref:k,isTruncated:E}=DSe(w),T=c!=null?c:"font-semibold";let M;e[19]!==T?(M=q("truncate",T),e[19]=T,e[20]=M):M=e[20];const A=d?C:void 0;let I;e[21]!==C||e[22]!==k||e[23]!==M||e[24]!==A?(I=i.jsx("div",{ref:k,className:M,"aria-label":A,children:C}),e[21]=C,e[22]=k,e[23]=M,e[24]=A,e[25]=I):I=e[25];const j=I;let R;e[26]!==r||e[27]!==l||e[28]!==n||e[29]!==s||e[30]!==m||e[31]!==o?(R=s!=null&&s!==!1?i.jsxs("div",{className:"border-token-border-heavy relative h-10 w-10 shrink-0 overflow-hidden rounded-lg border",children:[s,m&&i.jsx(wN,{percentage:o,blurBackground:!0})]}):i.jsxs("div",{className:"relative h-10 w-10 shrink-0 overflow-hidden rounded-lg",children:[i.jsx(v.Activity,{mode:m?"visible":"hidden",children:i.jsxs(i.Fragment,{children:[i.jsx("div",{className:q("inset-0",KU),style:{backgroundColor:YU(n,r==null?void 0:r.contextConnector,l)}}),i.jsx(wN,{percentage:r||o===void 0?null:o})]})}),i.jsx(v.Activity,{mode:m?"hidden":"visible",children:i.jsx(FSe,{filename:n,contextConnectorInfo:r,customFileExtension:l})})]}),e[26]=r,e[27]=l,e[28]=n,e[29]=s,e[30]=m,e[31]=o,e[32]=R):R=e[32];let O;e[33]!==C||e[34]!==j||e[35]!==E||e[36]!==d?(O=d?i.jsx(St,{label:C,contentClassName:"break-all",open:E?void 0:!1,children:j}):j,e[33]=C,e[34]=j,e[35]=E,e[36]=d,e[37]=O):O=e[37];let L;e[38]!==y?(L=i.jsx("div",{className:"text-token-text-secondary truncate",children:y}),e[38]=y,e[39]=L):L=e[39];let B;e[40]!==O||e[41]!==L?(B=i.jsxs("div",{className:"overflow-hidden",children:[O,L]}),e[40]=O,e[41]=L,e[42]=B):B=e[42];let U;return e[43]!==R||e[44]!==B?(U=i.jsxs("div",{className:"overflow flex flex-row items-center gap-2",children:[R,B]}),e[43]=R,e[44]=B,e[45]=U):U=e[45],U}function wN(t){"use forget";const e=D.c(7),{percentage:n,blurBackground:s}=t,r=(s===void 0?!1:s)&&"bg-black/5 backdrop-blur-xs";let a;e[0]!==r?(a=q("absolute inset-0 flex items-center justify-center rounded-lg text-white",r),e[0]=r,e[1]=a):a=e[1];let l;e[2]!==n?(l=n?i.jsx(Cd,{percentage:n,className:"h-6 w-6"}):i.jsx(Us,{className:"text-token-text-secondary h-6 w-6"}),e[2]=n,e[3]=l):l=e[3];let c;return e[4]!==a||e[5]!==l?(c=i.jsx("div",{className:a,children:l}),e[4]=a,e[5]=l,e[6]=c):c=e[6],c}const KU="h-10 w-10 shrink-0";function FSe(t){"use forget";var y,S,C;const e=D.c(39),{filename:n,contextConnectorInfo:s,className:o,glyphClassName:r,customFileExtension:a}=t,l=o===void 0?KU:o,c=r===void 0?"h-5 w-5":r;if(s){let w;e[0]!==l?(w=q("flex items-center justify-center rounded-lg",l),e[0]=l,e[1]=w):w=e[1];let k;e[2]!==s.contextConnector||e[3]!==a||e[4]!==n?(k=YU(n,s.contextConnector,a),e[2]=s.contextConnector,e[3]=a,e[4]=n,e[5]=k):k=e[5];let E;e[6]!==k?(E={backgroundColor:k},e[6]=k,e[7]=E):E=e[7];const T=s.contextConnector;let M;e[8]!==s.syntheticExtension||e[9]!==n?(M=(S=(y=s.syntheticExtension)!=null?y:Lm(n))!=null?S:null,e[8]=s.syntheticExtension,e[9]=n,e[10]=M):M=e[10];let A;e[11]!==c?(A=q(c,"text-white"),e[11]=c,e[12]=A):A=e[12];let I;e[13]!==s.contextConnector||e[14]!==M||e[15]!==A?(I=i.jsx(IQ,{contextConnector:T,extension:M,className:A}),e[13]=s.contextConnector,e[14]=M,e[15]=A,e[16]=I):I=e[16];let j;return e[17]!==w||e[18]!==E||e[19]!==I?(j=i.jsx("div",{className:w,style:E,children:I}),e[17]=w,e[18]=E,e[19]=I,e[20]=j):j=e[20],j}let u;e[21]!==a||e[22]!==n?(u=(C=a!=null?a:Lm(n))!=null?C:null,e[21]=a,e[22]=n,e[23]=u):u=e[23];const d=u;let f;e[24]!==d?(f=ZU(d),e[24]=d,e[25]=f):f=e[25];const{BgColor:m,Icon:p}=f;let g;e[26]!==l?(g=q("flex items-center justify-center rounded-lg",l),e[26]=l,e[27]=g):g=e[27];let h;e[28]!==m?(h={backgroundColor:m},e[28]=m,e[29]=h):h=e[29];let _;e[30]!==c?(_=q(c,"text-white"),e[30]=c,e[31]=_):_=e[31];let x;e[32]!==p||e[33]!==_?(x=i.jsx(p,{className:_}),e[32]=p,e[33]=_,e[34]=x):x=e[34];let b;return e[35]!==g||e[36]!==h||e[37]!==x?(b=i.jsx("div",{className:g,style:h,children:x}),e[35]=g,e[36]=h,e[37]=x,e[38]=b):b=e[38],b}function YU(t,e,n){var o;if(e)return ho.gray.solid[50];const s=(o=n!=null?n:Lm(t))!=null?o:null;return ZU(s).BgColor}function ZU(t){const e={purple:ho.purple[400],blue:ho.blue[400],green:ho.green[400],red:ho.red[400],gray:ho.gray.solid[400]},n=(t!=null?t:"").toLowerCase();return n==="zip"?{BgColor:e.purple,Icon:rE}:n==="pdf"?{BgColor:e.red,Icon:jr}:n==="xls"||n==="xlsx"||n==="csv"?{BgColor:e.green,Icon:LSe}:n==="doc"||n==="docx"||n==="txt"||n==="md"||n==="markdown"?{BgColor:e.blue,Icon:vo}:n==="png"||n==="jpg"||n==="jpeg"||n==="gif"||n==="webp"?{BgColor:e.gray,Icon:dg}:{BgColor:e.gray,Icon:jr}}const gu=we({fileDescDocument:{id:"FileDataView.fileDescDocument",defaultMessage:"Document"},fileDescZip:{id:"FileDataView.fileDescZip",defaultMessage:"Zip Archive"},fileDescSpreadsheet:{id:"FileDataView.fileDescSpreadsheet",defaultMessage:"Spreadsheet"},fileDescPresentation:{id:"FileDataView.fileDescPresentation",defaultMessage:"Presentation"},fileDescImage:{id:"FileDataView.fileDescImage",defaultMessage:"Image"},fileDescFile:{id:"FileDataView.fileDescFile",defaultMessage:"File"}}),USe=je(()=>Me(()=>import("./f0342648-jc0i0xbjrlp26v97.js"),__vite__mapDeps([233,1,2,3])).then(t=>t.FilePreviewModal)),HSe=je(()=>Me(()=>import("./68f2ca65-kzvefejeqjiqxl6y.js"),__vite__mapDeps([234,1,220,2,3,235,236,237,238,239,240,75,241,84,58,59,60,61,62,63,64,26,27,28,36,24,25,29,30,35,65,66,33,67,32,34,68,69,70,71,72,73,74,76,77,78,79])).then(t=>t.TextEditorSheet));function $Se(t){"use forget";const e=D.c(5),{downloadLink:n}=t;let s;e[0]!==n?(s=()=>{var c;const l=document.createElement("a");l.href=n,l.setAttribute("download",(c=n.split("/").pop())!=null?c:"downloaded_file"),document.body.appendChild(l),l.click(),document.body.removeChild(l)},e[0]=n,e[1]=s):s=e[1];const o=s;let r;e[2]===Symbol.for("react.memo_cache_sentinel")?(r=i.jsx(WU,{className:"icon-sm m-1.5"}),e[2]=r):r=e[2];let a;return e[3]!==o?(a=i.jsx("button",{onClick:o,children:r}),e[3]=o,e[4]=a):a=e[4],a}function kN(t){"use forget";const e=D.c(7),{onClick:n,ariaLabel:s,large:o,children:r}=t,l=(o===void 0?!1:o)&&"h-6 w-6";let c;e[0]!==l?(c=q("transition-colors","flex h-4 w-4 items-center justify-center rounded-full","border-[rgba(0,0,0,0.1)] bg-black text-white","dark:border-[rgba(255,255,255,0.1)] dark:bg-white dark:text-black",l),e[0]=l,e[1]=c):c=e[1];let u;return e[2]!==s||e[3]!==r||e[4]!==n||e[5]!==c?(u=i.jsx("button",{onClick:n,"aria-label":s,className:c,children:r}),e[2]=s,e[3]=r,e[4]=n,e[5]=c,e[6]=u):u=e[6],u}function GSe(t){"use forget";var h,_;const e=D.c(22),n=ri(t.file)?t.file.name:t.file,s=t.loadingPercentage!==void 0&&t.loadingPercentage<100;let o;e[0]!==n||e[1]!==t.file||e[2]!==t.fileId?(o=ri(t.file)&&((h=t.file)==null?void 0:h.type.startsWith("image/"))||kp(n)&&t.fileId!=null,e[0]=n,e[1]=t.file,e[2]=t.fileId,e[3]=o):o=e[3];const r=o;let a;e[4]!==t.clientThreadId?(a=t.clientThreadId?Lt(t.clientThreadId):void 0,e[4]=t.clientThreadId,e[5]=a):a=e[5];const l=a;let c,u,d,f;if(e[6]!==n||e[7]!==t.file){const x=Lm(n);u=x==="pdf";let b;e[12]!==t.file?(b=ri(t.file)&&PQ(t.file.name),e[12]=t.file,e[13]=b):b=e[13],d=b,c=ASe(),f=jSe(x),e[6]=n,e[7]=t.file,e[8]=c,e[9]=u,e[10]=d,e[11]=f}else c=e[8],u=e[9],d=e[10],f=e[11];const p=c&&f?(_=t.isBigPaste)!=null?_:t.fileId!=null:!1;let g;return e[14]!==l||e[15]!==n||e[16]!==p||e[17]!==r||e[18]!==s||e[19]!==u||e[20]!==d?(g={fileName:n,isLoading:s,isImage:r,isPlainText:d,isExpandableTextFile:p,isPdf:u,conversationId:l},e[14]=l,e[15]=n,e[16]=p,e[17]=r,e[18]=s,e[19]=u,e[20]=d,e[21]=g):g=e[21],g}function VSe(t){"use forget";const e=D.c(10),{isImage:n}=t,s=te();let o;e[0]!==n?(o=n?i.jsx(dg,{className:"icon-sm"}):i.jsx(q_,{className:"icon-sm"}),e[0]=n,e[1]=o):o=e[1];const r=o;let a;e[2]!==s||e[3]!==n?(a=n?s.formatMessage(qm.uploadedImage):s.formatMessage(qm.uploadedFile),e[2]=s,e[3]=n,e[4]=a):a=e[4];const l=a;let c;e[5]!==l?(c=i.jsx("span",{children:l}),e[5]=l,e[6]=c):c=e[6];let u;return e[7]!==r||e[8]!==c?(u=i.jsxs("div",{className:"text-token-text-secondary flex items-center gap-2",children:[r,c]}),e[7]=r,e[8]=c,e[9]=u):u=e[9],u}function zSe(t){"use forget";const e=D.c(12),{useLargeImageThumbnailStyle:n,onImageEditClick:s,disableEditButton:o,onRemoveFileClick:r}=t,a=te();let l;e[0]!==o||e[1]!==a||e[2]!==s||e[3]!==n?(l=n&&s&&!o&&i.jsx(kN,{onClick:d=>{d.stopPropagation(),d.preventDefault(),s()},ariaLabel:a.formatMessage(qm.editImage),large:n,children:i.jsx(tr,{"aria-label":"",className:"icon-sm"})}),e[0]=o,e[1]=a,e[2]=s,e[3]=n,e[4]=l):l=e[4];let c;e[5]!==a||e[6]!==r||e[7]!==n?(c=r!=null&&i.jsx(kN,{onClick:d=>{d.stopPropagation(),d.preventDefault(),r()},ariaLabel:a.formatMessage(qm.removeFile),large:n,children:i.jsx(Om,{"aria-label":"",className:"icon-sm"})}),e[5]=a,e[6]=r,e[7]=n,e[8]=c):c=e[8];let u;return e[9]!==l||e[10]!==c?(u=i.jsxs("div",{className:"absolute end-1.5 top-1.5 inline-flex gap-1",children:[l,c]}),e[9]=l,e[10]=c,e[11]=u):u=e[11],u}function WSe(t){"use forget";const e=D.c(9),{isImage:n,alwaysShowData:s,useLargeImageThumbnailStyle:o,imageThumbnail:r,isLoading:a,loadingPercentage:l,fileDataViewWrapper:c}=t;if(n&&!s){const u=o&&"tall:h-36 tall:w-36";let d;e[0]!==u?(d=q("h-14.5 w-14.5",u),e[0]=u,e[1]=d):d=e[1];let f;e[2]!==a||e[3]!==l?(f=a&&i.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/5 text-white",children:i.jsx(Cd,{percentage:l!=null?l:0,className:"h-6 w-6"})}),e[2]=a,e[3]=l,e[4]=f):f=e[4];let m;return e[5]!==r||e[6]!==d||e[7]!==f?(m=i.jsxs("div",{className:d,children:[r,f]}),e[5]=r,e[6]=d,e[7]=f,e[8]=m):m=e[8],m}return c}function QU(t){"use forget";var Ce,ge,Re,ke;const e=D.c(92),n=te(),{borderRadius:s,isBigPaste:o,filepickerStore:r,mode:a}=t,l=s===void 0?"xl":s,c=o===void 0?!1:o,{fileName:u,isLoading:d,isImage:f,isPdf:m,conversationId:p,isExpandableTextFile:g}=GSe(t);let h;e[0]!==p||e[1]!==f||e[2]!==t.contextConnectorInfo||e[3]!==t.file||e[4]!==t.fileId||e[5]!==t.gizmoId?(h=f?i.jsx(KSe,{file:t.file,fileId:t.fileId,gizmoId:t.gizmoId,contextConnectorInfo:t.contextConnectorInfo,conversationId:p}):null,e[0]=p,e[1]=f,e[2]=t.contextConnectorInfo,e[3]=t.file,e[4]=t.fileId,e[5]=t.gizmoId,e[6]=h):h=e[6];const _=h;let x;e[7]!==u||e[8]!==r||e[9]!==n||e[10]!==t.tempId?(x=(he,Ee)=>{if(r)return CN({tempId:t.tempId,updatedFile:new File([he],u,{type:"text/plain",lastModified:+Date.now()}),isBigPaste:!0,intl:n,filepickerStore:r,mode:Ee})},e[7]=u,e[8]=r,e[9]=n,e[10]=t.tempId,e[11]=x):x=e[11];const b=_s(x);let y;e[12]!==r||e[13]!==n||e[14]!==t.tempId?(y=async(he,Ee)=>r?(await CN({tempId:t.tempId,updatedFile:OSe({input:Ee,fileName:he.fileName,fallbackMime:"application/pdf"}),intl:n,filepickerStore:r})).error?{code:"FAIL",data:{metaData:he}}:{code:"SUCCESS",data:{metaData:he}}:{code:"FAIL",data:{metaData:he}},e[12]=r,e[13]=n,e[14]=t.tempId,e[15]=y):y=e[15];const S=_s(y),C=v.useContext(Yp),w=(C==null?void 0:C.serverSharedThreadId)&&t.isUserTurn,k=jQ(),E=f||(Ce=t.contextConnectorInfo)==null?void 0:Ce.sourceUrl,T=!((ge=t.contextConnectorInfo)!=null&&ge.sourceUrl)&&!f?u:void 0;let M;e[16]!==u||e[17]!==S||e[18]!==t.clientThreadId||e[19]!==t.fileId||e[20]!==t.gizmoId||e[21]!==t.tempId?(M=()=>{t.fileId&&rt(USe,{gizmoId:t.gizmoId,fileId:t.fileId,fileName:u,clientThreadId:t.clientThreadId})},e[16]=u,e[17]=S,e[18]=t.clientThreadId,e[19]=t.fileId,e[20]=t.gizmoId,e[21]=t.tempId,e[22]=M):M=e[22];const A=_s(M);let I;e[23]!==u||e[24]!==a||e[25]!==b||e[26]!==t.file||e[27]!==t.fileId||e[28]!==t.tempId?(I=()=>{const he=ISe(Oc(),t.file,t.fileId);rt(HSe,{fileName:u,onSave:b,content$:he,mode:a,readonly:!t.tempId})},e[23]=u,e[24]=a,e[25]=b,e[26]=t.file,e[27]=t.fileId,e[28]=t.tempId,e[29]=I):I=e[29];const j=_s(I);let R;e[30]!==p||e[31]!==u||e[32]!==t.clientThreadId||e[33]!==t.fileId||e[34]!==t.gizmoId?(R=async()=>{if(!t.fileId)return;const he=await mp(t.fileId,{gizmoId:t.gizmoId,checkContextScopesForConversationId:t.clientThreadId!=null?p:void 0});he.status===Yd.Success?window.open(he.download_url,"_blank"):Ve.addError("Failed to get download link for file: ".concat(u))},e[30]=p,e[31]=u,e[32]=t.clientThreadId,e[33]=t.fileId,e[34]=t.gizmoId,e[35]=R):R=e[35];const O=_s(R);let L;e[36]!==g||e[37]!==d||e[38]!==m||e[39]!==O||e[40]!==A||e[41]!==j||e[42]!==t.fileId?(L=async()=>{if(!d&&t.fileId)return m?A():g?j():O()},e[36]=g,e[37]=d,e[38]=m,e[39]=O,e[40]=A,e[41]=j,e[42]=t.fileId,e[43]=L):L=e[43];const B=_s(L);if(w){if(!f||k()){let he;return e[44]!==f?(he=i.jsx(VSe,{isImage:f}),e[44]=f,e[45]=he):he=e[45],he}if(f)return null}const U=!t.onRemoveFileClick,H=t.width==="wide"?"w-80":"w-60";let $;e[46]!==H?($=q("p-2",H),e[46]=H,e[47]=$):$=e[47];let F;e[48]!==n||e[49]!==c?(F=c?n.formatMessage({id:"FileTile.expandActionText",defaultMessage:"Click to expand"}):void 0,e[48]=n,e[49]=c,e[50]=F):F=e[50];const z=c?"txt":void 0,W=c?null:_;let Y;e[51]!==u||e[52]!==t.contextConnectorInfo||e[53]!==t.loadingPercentage||e[54]!==F||e[55]!==z||e[56]!==W?(Y=i.jsx(BSe,{fileName:u,customFileDescription:F,customFileExtension:z,icon:W,loadingPercentage:t.loadingPercentage,contextConnectorInfo:t.contextConnectorInfo}),e[51]=u,e[52]=t.contextConnectorInfo,e[53]=t.loadingPercentage,e[54]=F,e[55]=z,e[56]=W,e[57]=Y):Y=e[57];let K;e[58]!==t.downloadLink||e[59]!==t.showDownloadButton?(K=t.showDownloadButton&&t.downloadLink!==""&&i.jsx("div",{className:"absolute end-1 top-1",children:i.jsx($Se,{downloadLink:(Re=t.downloadLink)!=null?Re:""})}),e[58]=t.downloadLink,e[59]=t.showDownloadButton,e[60]=K):K=e[60];let Z;e[61]!==$||e[62]!==Y||e[63]!==K?(Z=i.jsxs("div",{className:$,children:[Y,K]}),e[61]=$,e[62]=Y,e[63]=K,e[64]=Z):Z=e[64];const J=Z,Q=l&&"rounded-xl",ne=l==="2xl"&&"rounded-2xl";let ie;e[65]!==t.className||e[66]!==Q||e[67]!==ne?(ie=q("border-token-border-default bg-primary corner-superellipse/1.1 relative overflow-clip border",Q,ne,t.className),e[65]=t.className,e[66]=Q,e[67]=ne,e[68]=ie):ie=e[68];const fe=(ke=t.alwaysShowData)!=null?ke:!1;let ae;e[69]!==J||e[70]!==_||e[71]!==f||e[72]!==d||e[73]!==t.loadingPercentage||e[74]!==t.useLargeImageThumbnailStyle||e[75]!==fe?(ae=i.jsx(WSe,{isImage:f,alwaysShowData:fe,useLargeImageThumbnailStyle:t.useLargeImageThumbnailStyle,imageThumbnail:_,isLoading:d,loadingPercentage:t.loadingPercentage,fileDataViewWrapper:J}),e[69]=J,e[70]=_,e[71]=f,e[72]=d,e[73]=t.loadingPercentage,e[74]=t.useLargeImageThumbnailStyle,e[75]=fe,e[76]=ae):ae=e[76];let le;e[77]!==B||e[78]!==U||e[79]!==E||e[80]!==ie||e[81]!==ae||e[82]!==T?(le=i.jsx(QSe,{showTooltip:U,sourceUrl:E,className:ie,tooltipContent:T,onClick:B,children:ae}),e[77]=B,e[78]=U,e[79]=E,e[80]=ie,e[81]=ae,e[82]=T,e[83]=le):le=e[83];let pe;e[84]!==t.disableEditButton||e[85]!==t.onImageEditClick||e[86]!==t.onRemoveFileClick||e[87]!==t.useLargeImageThumbnailStyle?(pe=i.jsx(zSe,{useLargeImageThumbnailStyle:t.useLargeImageThumbnailStyle,onImageEditClick:t.onImageEditClick,disableEditButton:t.disableEditButton,onRemoveFileClick:t.onRemoveFileClick}),e[84]=t.disableEditButton,e[85]=t.onImageEditClick,e[86]=t.onRemoveFileClick,e[87]=t.useLargeImageThumbnailStyle,e[88]=pe):pe=e[88];let _e;return e[89]!==le||e[90]!==pe?(_e=i.jsxs("div",{className:"group text-token-text-primary relative inline-block text-sm",children:[le,pe]}),e[89]=le,e[90]=pe,e[91]=_e):_e=e[91],_e}var Zj;const JU=Tt.span(Zj||(Zj=_t(["flex items-center h-full w-full justify-center bg-gray-500 dark:bg-gray-700 bg-cover bg-center text-white"])));function qSe(){"use forget";const t=D.c(1);let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=i.jsx(JU,{}),t[0]=e):e=t[0],e}function KSe(t){"use forget";const e=D.c(10),{file:n,fileId:s,gizmoId:o,contextConnectorInfo:r,conversationId:a}=t,l=te(),c=ri(n)?n.name:n,u=ZSe(ri(n)?n:null,c,s,o,r,void 0,void 0,a);if(u==null){let h;return e[0]===Symbol.for("react.memo_cache_sentinel")?(h=i.jsx(qSe,{}),e[0]=h):h=e[0],h}let d;e[1]!==l?(d=l.formatMessage(qm.userUploadedImage),e[1]=l,e[2]=d):d=e[2];const f=r==null?void 0:r.sourceUrl,m="url(".concat(u,")");let p;e[3]!==m?(p=i.jsx(JU,{style:{backgroundImage:m}}),e[3]=m,e[4]=p):p=e[4];let g;return e[5]!==u||e[6]!==d||e[7]!==f||e[8]!==p?(g=i.jsx(zU,{src:u,alt:d,contextConnectorSourceUrl:f,className:"h-full w-full",children:p}),e[5]=u,e[6]=d,e[7]=f,e[8]=p,e[9]=g):g=e[9],g}const Df=new Map,YSe=100;function ZSe(t,e,n,s,o,r,a,l){"use forget";const c=D.c(17),u=r===void 0?!1:r,d=a===void 0?!1:a,[f,m]=v.useState(void 0);let p;c[0]!==o||c[1]!==l||c[2]!==u||c[3]!==t||c[4]!==n||c[5]!==e||c[6]!==s?(p=()=>{if(!u&&o&&n!=null)EN({fileId:n,gizmoId:s,setUri:m,conversationId:l});else if(!o&&(t!=null&&t.type.startsWith("image/"))){const h=URL.createObjectURL(t);return v.startTransition(()=>{m(h)}),()=>URL.revokeObjectURL(h)}else!u&&e&&kp(e)&&n!=null?EN({fileId:n,gizmoId:s,setUri:m,conversationId:l}):v.startTransition(()=>{m(void 0)})},c[0]=o,c[1]=l,c[2]=u,c[3]=t,c[4]=n,c[5]=e,c[6]=s,c[7]=p):p=c[7];let g;return c[8]!==o||c[9]!==l||c[10]!==u||c[11]!==t||c[12]!==n||c[13]!==e||c[14]!==s||c[15]!==d?(g=[t,e,n,s,o,u,d,l],c[8]=o,c[9]=l,c[10]=u,c[11]=t,c[12]=n,c[13]=e,c[14]=s,c[15]=d,c[16]=g):g=c[16],v.useEffect(p,g),f}async function EN({fileId:t,gizmoId:e,setUri:n,conversationId:s}){try{const o="".concat(s!=null?s:"none",":").concat(e!=null?e:"none",":").concat(t),r=Df.get(o);if(r){n(r);return}const a=await mp(t,{gizmoId:e,checkContextScopesForConversationId:s});if(a.status===Yd.Success){if(Df.size>=YSe){const l=Df.keys().next().value;l&&Df.delete(l)}Df.set(o,a.download_url),n(a.download_url)}else Ve.addError("Error fetching URL for file ".concat(t,": ").concat(a.status))}catch(o){Ve.addError(new Error("Error fetching URL for file ".concat(t,")"),{cause:o}))}}const qm=we({removeFile:{id:"FileTile.removeFile",defaultMessage:"Remove file"},editImage:{id:"FileTile.editImage",defaultMessage:"Edit image"},userUploadedImage:{id:"FileTile.userUploadedImage",defaultMessage:"User uploaded image"},uploadedImage:{id:"FileTile.uploadedImage",defaultMessage:"Uploaded an image"},uploadedFile:{id:"FileTile.uploadedFile",defaultMessage:"Uploaded a file"}});function QSe(t){"use forget";var b;const e=D.c(23),{showTooltip:n,sourceUrl:s,children:o,className:r,onClick:a,tooltipContent:l}=t,c=X(JC);if(!s&&!l){let y;return e[0]!==o||e[1]!==r?(y=i.jsx("div",{className:r,children:o}),e[0]=o,e[1]=r,e[2]=y):y=e[2],y}let u;e[3]!==o||e[4]!==r?(u=i.jsx("div",{className:r,children:o}),e[3]=o,e[4]=r,e[5]=u):u=e[5];let d;e[6]!==a||e[7]!==s||e[8]!==u?(d=i.jsx("a",{href:s,target:"_blank",rel:"noreferrer",onClick:a,className:"cursor-pointer",children:u}),e[6]=a,e[7]=s,e[8]=u,e[9]=d):d=e[9];const f=d;if(!n||!c)return f;const m=(b=l!=null?l:s)!=null?b:"";let p;e[10]!==m?(p=JSe(m),e[10]=m,e[11]=p):p=e[11];let g;e[12]!==p?(g=i.jsx("p",{className:"line-clamp-1 flex-1 text-ellipsis",children:p}),e[12]=p,e[13]=g):g=e[13];let h;e[14]!==s?(h=s&&i.jsx(ka,{className:"icon-sm"}),e[14]=s,e[15]=h):h=e[15];let _;e[16]!==s||e[17]!==g||e[18]!==h?(_=i.jsxs("a",{href:s,target:"_blank",className:"flex w-full items-center gap-2",rel:"noreferrer",children:[g,h]}),e[16]=s,e[17]=g,e[18]=h,e[19]=_):_=e[19];let x;return e[20]!==f||e[21]!==_?(x=i.jsx(St,{wide:!0,interactive:!0,label:_,side:"top",children:f}),e[20]=f,e[21]=_,e[22]=x):x=e[22],x}function JSe(t){return t.split("").join("")}const XSe=v.createContext({isEmbeddedInFocusedView:!1});function aE(){return v.useContext(XSe).isEmbeddedInFocusedView}const eCe=je(()=>Me(()=>import("./87fb1aaf-kq5fkx08cp1zafgx.js").then(t=>t.A),__vite__mapDeps([242,1,2,3,243,244,108,109,245,200,246,247,248])).then(t=>t.default));var Qj;const tCe=Tt.div(Qj||(Qj=_t(["flex gap-2 flex-wrap mt-1 max-w-[80%] justify-end"])));var Jj;const nCe=Tt.div(Jj||(Jj=_t(["flex flex-col gap-2"]))),Sit=({parts:t,attachments:e,isUserTurn:n,conversation:s})=>{const o=Ko(),r=bSe(),a=ha.getImageAssetPointersFromParts(t),l=new Set(a.map(p=>Mr(p.asset_pointer))),u=aE()||o,d=(e!=null?e:[]).filter(p=>RQ(p.name)),f=(e!=null?e:[]).filter(p=>p.id==null||l.has(p.id)?!1:r?!d.includes(p):!0);return(r?(f.length>0||d.length>0)&&n:f.length>0&&n)?i.jsxs(i.Fragment,{children:[i.jsx(tCe,{children:f.map(p=>i.jsx(QU,{file:p.name,fileId:p.id,contextConnectorInfo:OQ(p.context_connector_info),width:o?"normal":"wide",alwaysShowData:!0,isUserTurn:n,clientThreadId:s.id},p.id))}),r&&i.jsx(nCe,{className:q(!u&&!0&&"w-[80%]"),children:d.map(p=>i.jsx(eCe,{clientThreadId:s.id,visualization:ySe(p)},p.id))})]}):null};function iE(){const t=v.useRef(!1);return v.useEffect(()=>(t.current=!0,()=>{t.current=!1}),[]),v.useCallback(()=>t.current,[])}const TN=we({copy:{id:"CopyButton.copy",defaultMessage:"Copy"},copied:{id:"CopyButton.copied",defaultMessage:"Copied"}});function sCe({buttonText:t,shouldChangeText:e=!0,iconClassName:n="icon-sm",onCopy:s,className:o,disabled:r=!1,iconOnly:a=!1,textPosition:l="right",tooltipSideOffset:c}){const u=te(),[d,f]=v.useState(!1),m=iE(),p=_s(h=>{h.stopPropagation(),!r&&(s(h),f(!0),setTimeout(()=>{m()&&f(!1)},2e3))});let g=t;return e&&d?g=i.jsx(P,N({},TN.copied)):t===!0&&(g=i.jsx(P,N({},TN.copy))),i.jsxs(i.Fragment,{children:[!d&&i.jsx(St,{triggerAs:null,label:i.jsx(P,{id:"CopyButton.copyTooltip",defaultMessage:"Copy"}),disabled:!a,sideOffset:c,children:i.jsxs(MN,{onClick:p,className:o,"aria-label":u.formatMessage({id:"ywKsIl",defaultMessage:"Copy"}),children:[l==="left"&&!a&&g,i.jsx(tk,{className:n}),l==="right"&&!a&&g]})}),d&&i.jsxs(MN,{className:o,"aria-label":u.formatMessage({id:"I3L53c",defaultMessage:"Copied"}),children:[l==="left"&&!a&&g,i.jsx(Pr,{className:n}),l==="right"&&!a&&g]})]})}var Xj;const MN=Tt.button(Xj||(Xj=_t(["flex gap-1 items-center select-none"]))),lE=re(me,"ee0f3c",20,20),XU=-1,lx=0,r0=1,a0=2,cE=3,uE=4,dE=5,fE=6,eH=7,tH=8,AN=typeof self=="object"?self:globalThis,oCe=(t,e)=>{const n=(o,r)=>(t.set(r,o),o),s=o=>{if(t.has(o))return t.get(o);const[r,a]=e[o];switch(r){case lx:case XU:return n(a,o);case r0:{const l=n([],o);for(const c of a)l.push(s(c));return l}case a0:{const l=n({},o);for(const[c,u]of a)l[s(c)]=s(u);return l}case cE:return n(new Date(a),o);case uE:{const{source:l,flags:c}=a;return n(new RegExp(l,c),o)}case dE:{const l=n(new Map,o);for(const[c,u]of a)l.set(s(c),s(u));return l}case fE:{const l=n(new Set,o);for(const c of a)l.add(s(c));return l}case eH:{const{name:l,message:c}=a;return n(new AN[l](c),o)}case tH:return n(BigInt(a),o);case"BigInt":return n(Object(BigInt(a)),o)}return n(new AN[r](a),o)};return s},NN=t=>oCe(new Map,t)(0),hu="",{toString:rCe}={},{keys:aCe}=Object,Bf=t=>{const e=typeof t;if(e!=="object"||!t)return[lx,e];const n=rCe.call(t).slice(8,-1);switch(n){case"Array":return[r0,hu];case"Object":return[a0,hu];case"Date":return[cE,hu];case"RegExp":return[uE,hu];case"Map":return[dE,hu];case"Set":return[fE,hu]}return n.includes("Array")?[r0,n]:n.includes("Error")?[eH,n]:[a0,n]},wh=([t,e])=>t===lx&&(e==="function"||e==="symbol"),iCe=(t,e,n,s)=>{const o=(a,l)=>{const c=s.push(a)-1;return n.set(l,c),c},r=a=>{if(n.has(a))return n.get(a);let[l,c]=Bf(a);switch(l){case lx:{let d=a;switch(c){case"bigint":l=tH,d=a.toString();break;case"function":case"symbol":if(t)throw new TypeError("unable to serialize "+c);d=null;break;case"undefined":return o([XU],a)}return o([l,d],a)}case r0:{if(c)return o([c,[...a]],a);const d=[],f=o([l,d],a);for(const m of a)d.push(r(m));return f}case a0:{if(c)switch(c){case"BigInt":return o([c,a.toString()],a);case"Boolean":case"Number":case"String":return o([c,a.valueOf()],a)}if(e&&"toJSON"in a)return r(a.toJSON());const d=[],f=o([l,d],a);for(const m of aCe(a))(t||!wh(Bf(a[m])))&&d.push([r(m),r(a[m])]);return f}case cE:return o([l,a.toISOString()],a);case uE:{const{source:d,flags:f}=a;return o([l,{source:d,flags:f}],a)}case dE:{const d=[],f=o([l,d],a);for(const[m,p]of a)(t||!(wh(Bf(m))||wh(Bf(p))))&&d.push([r(m),r(p)]);return f}case fE:{const d=[],f=o([l,d],a);for(const m of a)(t||!wh(Bf(m)))&&d.push(r(m));return f}}const{message:u}=a;return o([l,{name:c,message:u}],a)};return r},IN=(t,{json:e,lossy:n}={})=>{const s=[];return iCe(!(e||n),!!e,new Map,s)(t),s},j2=typeof structuredClone=="function"?(t,e)=>e&&("json"in e||"lossy"in e)?NN(IN(t,e)):structuredClone(t):(t,e)=>NN(IN(t,e)),Cit=(function(t,e,n,s,o){const r=mE(e);return nH(t)?r.call(o,t,n,s):!1}),mE=(function(t){if(t==null)return uCe;if(typeof t=="string")return cCe(t);if(typeof t=="object")return lCe(t);if(typeof t=="function")return pE(t);throw new Error("Expected function, string, or array as `test`")});function lCe(t){const e=[];let n=-1;for(;++n<t.length;)e[n]=mE(t[n]);return pE(s);function s(...o){let r=-1;for(;++r<e.length;)if(e[r].apply(this,o))return!0;return!1}}function cCe(t){return pE(e);function e(n){return n.tagName===t}}function pE(t){return e;function e(n,s,o){return!!(nH(n)&&t.call(this,n,typeof s=="number"?s:void 0,o||void 0))}}function uCe(t){return!!(t&&typeof t=="object"&&"type"in t&&t.type==="element"&&"tagName"in t&&typeof t.tagName=="string")}function nH(t){return t!==null&&typeof t=="object"&&"type"in t&&"tagName"in t}const dCe=/^[a-zA-Z][a-zA-Z\d+\-.]*?:/,fCe=/^[a-zA-Z]:\\/;function mCe(t){if(typeof t!="string")throw new TypeError("Expected a `string`, got `".concat(typeof t,"`"));return fCe.test(t)?!1:dCe.test(t)}function pCe(t){const e=String(t||"").trim();return e?e.split(/[ \t\n\r\f]+/g):[]}function wit(t){return t.join(" ").trim()}const gCe=["http","https"],hCe=["nofollow"],_Ce={};function xCe(t){const e=t||_Ce,n=e.protocols||gCe,s=mE(e.test);return function(o){ED(o,"element",function(r,a,l){if(r.tagName==="a"&&typeof r.properties.href=="string"&&s(r,a,l)){const c=r.properties.href;if(mCe(c)?n.includes(c.slice(0,c.indexOf(":"))):c.startsWith("//")){const u=Ff(e.content,r),d=u&&!Array.isArray(u)?[u]:u,f=Ff(e.rel,r)||hCe,m=typeof f=="string"?pCe(f):f,p=Ff(e.target,r),g=Ff(e.properties,r);if(g&&Object.assign(r.properties,j2(g)),m.length>0&&(r.properties.rel=[...m]),p&&(r.properties.target=p),d){const h=Ff(e.contentProperties,r)||{};r.children.push({type:"element",tagName:"span",properties:j2(h),children:j2(d)})}}}})}}function Ff(t,e){return typeof t=="function"?t(e):t}const yCe=je(()=>Me(()=>import("./1bc04b52-jbvp2k2yd8ul63oq.js").then(t=>t.i),__vite__mapDeps([68,26,27,28,1,33,69]))),kit=t=>{"use forget";const e=D.c(41),{errorState:n,nodeId:s,conversation:o,isFeedbackEnabled:r,isUserTurn:a,isCompletionInProgress:l}=t,c=l===void 0?!1:l;let u;e[0]!==o.id||e[1]!==s?(u=ve.isLastActorMessage(At(o.id),s),e[0]=o.id,e[1]=s,e[2]=u):u=e[2];const d=u,f=n.canRetry&&d&&!c,m=n.flagSeverity==="info"&&n.errCode===na.NetworkErrorWithReconnection;if(a){const y=n.flagSeverity==="danger"&&"text-token-text-error",S=n.flagSeverity==="warning"&&"text-orange-600",C=(n.flagSeverity==="info"||!n.flagSeverity)&&"text-token-text-secondary";let w;e[3]!==y||e[4]!==S||e[5]!==C?(w=q("flex max-w-[var(--user-chat-width,70%)] flex-row-reverse items-start gap-1 text-start text-sm",y,S,C),e[3]=y,e[4]=S,e[5]=C,e[6]=w):w=e[6];let k;e[7]!==m?(k=m?i.jsx(Us,{className:"icon-lg mt-[0.0625em]"}):i.jsx(kr,{className:"icon mt-[0.0625em]"}),e[7]=m,e[8]=k):k=e[8];let E;e[9]!==o||e[10]!==n||e[11]!==r?(E=i.jsx(jN,{errorState:n,conversation:o,isFeedbackEnabled:r}),e[9]=o,e[10]=n,e[11]=r,e[12]=E):E=e[12];let T;e[13]!==w||e[14]!==k||e[15]!==E?(T=i.jsxs("div",{className:w,children:[k,E]}),e[13]=w,e[14]=k,e[15]=E,e[16]=T):T=e[16];let M;e[17]!==o||e[18]!==n||e[19]!==f||e[20]!==s?(M=f&&i.jsx(RN,{conversation:o,nodeId:s,errorState:n}),e[17]=o,e[18]=n,e[19]=f,e[20]=s,e[21]=M):M=e[21];let A;return e[22]!==M||e[23]!==T?(A=i.jsxs("div",{className:"flex w-full flex-col items-end justify-between gap-2",children:[T,M]}),e[22]=M,e[23]=T,e[24]=A):A=e[24],A}const p=n==null?void 0:n.flagSeverity,g=m&&"mask-shimmer-muted";let h;e[25]!==g?(h=q("mb-2 w-full max-w-full self-start",g),e[25]=g,e[26]=h):h=e[26];let _;e[27]!==o||e[28]!==n||e[29]!==f||e[30]!==s?(_=f&&i.jsx(RN,{conversation:o,nodeId:s,errorState:n}),e[27]=o,e[28]=n,e[29]=f,e[30]=s,e[31]=_):_=e[31];let x;e[32]!==o||e[33]!==n||e[34]!==r?(x=i.jsx("div",{className:"flex flex-row items-center justify-between gap-4",children:i.jsx("div",{className:"min-w-0 text-pretty break-words whitespace-pre-wrap",children:i.jsx(jN,{errorState:n,conversation:o,isFeedbackEnabled:r})})}),e[32]=o,e[33]=n,e[34]=r,e[35]=x):x=e[35];let b;return e[36]!==p||e[37]!==h||e[38]!==_||e[39]!==x?(b=i.jsx(ix,{type:p,className:h,primaryAction:_,customIcon:null,children:x}),e[36]=p,e[37]=h,e[38]=_,e[39]=x,e[40]=b):b=e[40],b},jN=t=>{"use forget";const e=D.c(19),{errorState:n,conversation:s,isFeedbackEnabled:o}=t,{errCode:r,errMessage:a}=n,l=te(),[c,u]=v.useState(!1),d=a&&(typeof a=="string"?a:l.formatMessage(a));d!=null&&vCe(d);const f=!1,m=_=>{d&&zo(d,void 0,_)};let p;e[0]!==m||e[1]!==f?(p=null,e[0]=m,e[1]=f,e[2]=p):p=e[2],v.useEffect(()=>{var _,x;V.logEvent("message_error_notice_shown",{conversationId:(_=s.serverId$())!=null?_:s.id,errorCode:r!=null?r:"unknown",errorMessage:d!=null?d:"unknown"}),ft.logEvent("chatgpt_message_error_notice_shown",null,{conversationId:(x=s.serverId$())!=null?x:s.id,errorCode:r!=null?r:"unknown",errorMessage:d!=null?d:"unknown"})},[r,d,s]);let g;e[3]===Symbol.for("react.memo_cache_sentinel")?(g=()=>{u(!1)},e[3]=g):g=e[3],v.useEffect(g,[d]);const h=ICe;switch(r){case mr.ContentPolicy:{let _;return e[4]!==o?(_=i.jsx(TCe,{isFeedbackEnabled:o}),e[4]=o,e[5]=_):_=e[5],_}case mr.BioSafetyContentPolicy:{let _;return e[6]===Symbol.for("react.memo_cache_sentinel")?(_=i.jsx(MCe,{}),e[6]=_):_=e[6],_}case mr.ModelIncompatibility:{let _;return e[7]===Symbol.for("react.memo_cache_sentinel")?(_=i.jsx(P,{id:"cyOWhN",defaultMessage:"Your request was flagged as potentially violating our usage policy. Please try again with a different prompt."}),e[7]=_):_=e[7],_}case mr.ContentOrTos:{let _;return e[8]!==o?(_=i.jsx(kCe,{isFeedbackEnabled:o}),e[8]=o,e[9]=_):_=e[9],_}case mr.ContentRegurgitation:{let _;return e[10]===Symbol.for("react.memo_cache_sentinel")?(_=i.jsx(ECe,{}),e[10]=_):_=e[10],_}case Yl.ModelCapExceeded:{let _;return e[11]!==s?(_=i.jsx(SCe,{conversation:s}),e[11]=s,e[12]=_):_=e[12],_}case Yl.HistoryDisabledConversationNotFound:{let _;return e[13]===Symbol.for("react.memo_cache_sentinel")?(_=i.jsx(P,{id:"TextMessageDisplay.historyDisabledConversationMissing",defaultMessage:"Sorry, conversations created when Chat History is off expire after 6 hours of inactivity. Please start a new conversation to continue using ChatGPT."}),e[13]=_):_=e[13],_}case Yl.MissingLastCompletion:case Yl.InterruptionServerError:{let _;return e[14]===Symbol.for("react.memo_cache_sentinel")?(_=i.jsx(P,{id:"TextMessageDisplay.somethingWentWrong",defaultMessage:"Something went wrong."}),e[14]=_):_=e[14],_}default:{if(!d)return null;let _;return e[17]!==d?(_=h(d),e[17]=d,e[18]=_):_=e[18],_}}},bCe=/\r\n|\r|\n/;function vCe(t){if(!t)return 0;const e=t.split(bCe);return e.length===0?0:e[e.length-1]===""?e.length-1:e.length}function SCe(t){"use forget";const e=D.c(6),{conversation:n}=t,s=lf(wCe);let o;e[0]!==s?(o=fF(s),e[0]=s,e[1]=o):o=e[1];const r=o,a=Ze(n.id,CCe),l=a&&a.kind!==Bt.PrimaryAssistant;if(s){let u;return e[2]===Symbol.for("react.memo_cache_sentinel")?(u=i.jsx(P,{id:"TextMessageDisplay.gptUsageCapExceededExpired",defaultMessage:"You previously reached your usage cap for GPT-4, but you can now try sending your message again"}),e[2]=u):u=e[2],u}let c;return e[3]!==r||e[4]!==l?(c=i.jsx("span",{children:l!=null?i.jsx(P,{id:"TextMessageDisplay.gptUsageCapExceededCustomFeature",defaultMessage:"You've reached the current usage cap for GPT-4, please try again {formattedTime}. <link>Learn more</link>",values:{link:PN,formattedTime:r}}):i.jsx(P,{id:"TextMessageDisplay.gptUsageCapExceeded",defaultMessage:"You've reached the current usage cap for GPT-4. You can continue with the default model now, or try again {formattedTime}. <link>Learn more</link>",values:{link:PN,formattedTime:r}})}),e[3]=r,e[4]=l,e[5]=c):c=e[5],c}function CCe(t){return t==null?void 0:t.mode}function wCe(t){return t.isoDate}const PN=t=>i.jsx("a",{href:"https://share.hsforms.com/16d0ZZVM3QZirXnCD_q7u1Q4sk30",target:"_blank",rel:"noreferrer",className:"underline hover:no-underline",children:t});function kCe(t){"use forget";const e=D.c(10),{isFeedbackEnabled:n}=t,s=n?"font-semibold":"";let o;e[0]===Symbol.for("react.memo_cache_sentinel")?(o=i.jsx(P,{id:"TextMessageDisplay.contentOrTosViolationNoFeedback",defaultMessage:"This content may violate our <termsLink>Terms of Use</termsLink> or <contentPolicyLink>usage policies</contentPolicyLink>.",values:{contentPolicyLink:sH,termsLink:ACe}}),e[0]=o):o=e[0];let r;e[1]!==s?(r=i.jsx("div",{className:s,children:o}),e[1]=s,e[2]=r):r=e[2];let a;e[3]!==n?(a=n&&i.jsx(P,{id:"TextMessageDisplay.contentPolicyFeedback",defaultMessage:"Did we get it wrong? Please tell us by giving this response a thumbs down."}),e[3]=n,e[4]=a):a=e[4];let l;e[5]!==a?(l=i.jsx("div",{children:a}),e[5]=a,e[6]=l):l=e[6];let c;return e[7]!==r||e[8]!==l?(c=i.jsxs("div",{children:[r,l]}),e[7]=r,e[8]=l,e[9]=c):c=e[9],c}function ECe(){"use forget";const t=D.c(2);let e;t[0]===Symbol.for("react.memo_cache_sentinel")?(e=i.jsx("div",{className:"font-semibold",children:i.jsx(P,{id:"kAMQnd",defaultMessage:"ChatGPT isn't designed to provide this type of content."})}),t[0]=e):e=t[0];let n;return t[1]===Symbol.for("react.memo_cache_sentinel")?(n=i.jsxs("div",{children:[e,i.jsx("div",{children:i.jsx(P,{id:"fQ0JYv",defaultMessage:"Read the <modelSpecLink>Model Spec</modelSpecLink> for more on how ChatGPT handles creators' content.",values:{modelSpecLink:oH}})})]}),t[1]=n):n=t[1],n}function TCe(t){"use forget";const e=D.c(10),{isFeedbackEnabled:n}=t,s=n?"font-semibold":"";let o;e[0]===Symbol.for("react.memo_cache_sentinel")?(o=i.jsx(P,{id:"TextMessageDisplay.contentPolicyViolationNoFeedback",defaultMessage:"This content may violate our <contentPolicyLink>usage policies</contentPolicyLink>.",values:{contentPolicyLink:sH}}),e[0]=o):o=e[0];let r;e[1]!==s?(r=i.jsx("div",{className:s,children:o}),e[1]=s,e[2]=r):r=e[2];let a;e[3]!==n?(a=n&&i.jsx(P,{id:"TextMessageDisplay.contentPolicyFeedback",defaultMessage:"Did we get it wrong? Please tell us by giving this response a thumbs down."}),e[3]=n,e[4]=a):a=e[4];let l;e[5]!==a?(l=i.jsx("div",{children:a}),e[5]=a,e[6]=l):l=e[6];let c;return e[7]!==r||e[8]!==l?(c=i.jsxs("div",{children:[r,l]}),e[7]=r,e[8]=l,e[9]=c):c=e[9],c}function MCe(){"use forget";const t=D.c(2);let e;t[0]===Symbol.for("react.memo_cache_sentinel")?(e=i.jsx("div",{className:"font-semibold",children:i.jsx(P,{id:"TextMessageDisplay.bioSafetyContentPolicyViolationNoFeedback1",defaultMessage:"We've limited access to this content for safety reasons."})}),t[0]=e):e=t[0];let n;return t[1]===Symbol.for("react.memo_cache_sentinel")?(n=i.jsxs("div",{children:[e,i.jsx("div",{children:i.jsx(P,{id:"TextMessageDisplay.bioSafetyContentPolicyViolationNoFeedback2",defaultMessage:"This type of information may be used to benefit or to harm people. We are continuously refining our work in this area, and you can read more about our approach in our <bioSafetyBlogPostLink>blog post</bioSafetyBlogPostLink> and <modelSpecLink>Model Spec</modelSpecLink>.",values:{bioSafetyBlogPostLink:NCe,modelSpecLink:oH}})})]}),t[1]=n):n=t[1],n}const sH=t=>i.jsx(cx,{href:"https://openai.com/policies/usage-policies",children:t}),ACe=t=>i.jsx(cx,{href:"https://openai.com/policies/terms-of-use",children:t}),oH=t=>i.jsx(cx,{href:"https://model-spec.openai.com",children:t}),NCe=t=>i.jsx(cx,{href:"https://openai.com/index/preparing-for-future-ai-capabilities-in-biology/",children:t}),cx=t=>{"use forget";const e=D.c(3),{href:n,children:s}=t;let o;return e[0]!==s||e[1]!==n?(o=i.jsx("a",{target:"_blank",rel:"noreferrer",href:n,className:"underline hover:no-underline",children:s}),e[0]=s,e[1]=n,e[2]=o):o=e[2],o},RN=t=>{"use forget";const e=D.c(21),{conversation:n,nodeId:s,errorState:o}=t,r=bt();let a;e[0]!==n.id?(a={clientThreadId:n.id},e[0]=n.id,e[1]=a):a=e[1];const l=Zp(a),c=(o==null?void 0:o.errCode)===Yl.ModelCapExceeded,u=lf(jCe),d=c&&!!u,f=Ze(n.id,PCe),m=f&&f.kind!==Bt.PrimaryAssistant,p=d&&!m,g=d&&m,h=X(n.serverId$);let _;e[2]!==n||e[3]!==(o==null?void 0:o.errCode)||e[4]!==c||e[5]!==s||e[6]!==l||e[7]!==p?(_=w=>{var E;c?V.logEventWithStatsig("chatgpt_regenerate_due_to_rate_limit_button_clicked","chatgpt_regenerate_due_to_rate_limit_button_clicked",G(N({},Ms({clientThreadId:n.id})),{useDefaultModel:p?"true":"false"})):V.logEventWithStatsig("chatgpt_regenerate_due_to_error_button_clicked","chatgpt_regenerate_due_to_error_button_clicked",G(N({},Ms({clientThreadId:n.id})),{inlineButton:"true",errorCode:(E=o==null?void 0:o.errCode)!=null?E:""}));const k=Kt(RCe);p&&k?(pd(n,k),l({sourceEvent:w,nodeId:s,requestedModelId:k})):l({sourceEvent:w,nodeId:s})},e[2]=n,e[3]=o==null?void 0:o.errCode,e[4]=c,e[5]=s,e[6]=l,e[7]=p,e[8]=_):_=e[8];const x=_;let b;e[9]!==n.id||e[10]!==r?(b=()=>{const w=ve.getParentPromptNode(At(n.id)),k=w!=null&&w.message?Ss(w.message):"";V.logEventWithStatsig("chatgpt_edit_clicked_no_server_thread_id","chatgpt_edit_clicked_no_server_thread_id",N({},Ms({clientThreadId:n.id}))),kl({location:"Message Error"}),Ea(r,{params:new URLSearchParams({prompt:k})})},e[9]=n.id,e[10]=r,e[11]=b):b=e[11];const y=b;if(!h){let w;e[12]===Symbol.for("react.memo_cache_sentinel")?(w=i.jsx(P,{id:"MessageError.buttonRetryResponse",defaultMessage:"Retry"}),e[12]=w):w=e[12];let k;return e[13]!==y?(k=i.jsx(Se,{as:"button",color:"secondary",onClick:y,icon:tr,children:w}),e[13]=y,e[14]=k):k=e[14],k}if(!h)return null;let S;e[15]!==p?(S=p?i.jsx(P,{id:"MessageError.buttonUseDefaultModel",defaultMessage:"Use default model"}):i.jsx(P,{id:"MessageError.buttonRetryResponse",defaultMessage:"Retry"}),e[15]=p,e[16]=S):S=e[16];let C;return e[17]!==g||e[18]!==x||e[19]!==S?(C=i.jsx(Se,{as:"button",color:"secondary",disabled:g,onClick:x,icon:lE,"data-testid":"regenerate-thread-error-button",children:S}),e[17]=g,e[18]=x,e[19]=S,e[20]=C):C=e[20],C};function ICe(t){return i.jsx(yCe,{rehypePlugins:[[xCe,{target:"_new",rel:"noopener noreferrer"}]],className:"markdown break-words [&>:last-child]:mb-0",children:t})}function jCe(t){return t.isoDate}function PCe(t){return t==null?void 0:t.mode}function RCe(){return LQ().id}const OCe=t=>{"use forget";var y;const e=D.c(24);let n,s,o,r,a,l,c;e[0]!==t?(y=t,{label:o,icon:s,as:l,isUserTurn:c,className:n,onClick:r}=y,a=De(y,["label","icon","as","isUserTurn","className","onClick"]),e[0]=t,e[1]=n,e[2]=s,e[3]=o,e[4]=r,e[5]=a,e[6]=l,e[7]=c):(n=e[1],s=e[2],o=e[3],r=e[4],a=e[5],l=e[6],c=e[7]);const u=l===void 0?"div":l,d=c===void 0?!0:c,f=u,m=u==="button"&&"hover:text-token-text-primary",p=d?"mt-1 justify-end":"mt-12";let g;e[8]!==n||e[9]!==m||e[10]!==p?(g=q("text-token-text-tertiary mx-2 mb-1 flex items-start gap-1.5 text-sm font-normal focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-current",m,p,n),e[8]=n,e[9]=m,e[10]=p,e[11]=g):g=e[11];const h=u==="button"?"button":void 0;let _;e[12]!==s?(_=i.jsx("span",{"aria-hidden":"true",className:"pointer-events-none",children:s}),e[12]=s,e[13]=_):_=e[13];let x;e[14]!==o?(x=i.jsx("p",{className:"line-clamp-3",children:o}),e[14]=o,e[15]=x):x=e[15];let b;return e[16]!==f||e[17]!==r||e[18]!==a||e[19]!==g||e[20]!==h||e[21]!==_||e[22]!==x?(b=i.jsxs(f,G(N({className:g,type:h,onClick:r},a),{children:[_,x]})),e[16]=f,e[17]=r,e[18]=a,e[19]=g,e[20]=h,e[21]=_,e[22]=x,e[23]=b):b=e[23],b},LCe=d3(()=>({images:new Set})),DCe=t=>f3(LCe,t);function BCe(){return DCe(t=>t.images)}function Eit({messages:t}){const e=Sme(t),n=BCe();return e.length===0?null:i.jsx("div",{className:q({"mb-2":!0,"grid grid-flow-col gap-3":e.length>1,"w-1/3":e.length===1}),children:e.filter(({contentUrl:s})=>n.has(s)).map((s,o)=>i.jsx("a",{href:s.hostPageUrl,target:"_blank",rel:"noreferrer",children:i.jsx("img",{src:s.contentUrl,alt:s.name,className:"aspect-square rounded-xl object-cover"})},o))})}class cS extends ml()(()=>({files:[]})){addFile(e){this.setState(n=>G(N({},n),{files:[...n.files,e]}))}updateFile(e,n){this.setState(s=>G(N({},s),{files:s.files.map(o=>o.fileSpec.id===e?N(N({},o),n):o)}))}removeFile(e){this.setState(n=>G(N({},n),{files:n.files.filter(s=>s.fileSpec.id!==e)}))}reset(){this.setState(()=>({files:[]}))}}ye(cS,"selectFiles",e=>e.files),ye(cS,"selectFile",(e,n)=>e.files.find(s=>s.fileSpec.id===n));const FCe=v.createContext({postId:""});function rH(){const{postId:t}=v.useContext(FCe),{postWithProfile:e}=v.useContext(DQ);return(e==null?void 0:e.post.id)||t}function Tit(o){var r=o,{className:t,onLoad:e,fadeIn:n=!0}=r,s=De(r,["className","onLoad","fadeIn"]);const[a,l]=v.useState(!1);function c(u){l(!0),e==null||e(u)}return i.jsx("img",G(N({},s),{alt:s.alt,onLoad:u=>c(u),className:q(t,"w-fit",n&&"transition-opacity duration-300",a?"opacity-100":"opacity-0")}))}function UCe(t,e,n){const s=!mt(),o=v.useContext(Yp),r=o==null?void 0:o.serverSharedThreadId,a=rH();return iK({queries:t.map(l=>wl.makeQueryOptions({asset:l,sharedThreadId:r,gizmoId:e,isUnauthenticated:s,postId:a,conversationId:n}))})}function Mit(t){"use forget";const e=D.c(8),{asset:n,gizmoId:s,conversationId:o,getServerUrl:r,sharedThreadId:a}=t;let l;e[0]===Symbol.for("react.memo_cache_sentinel")?(l=mt(),e[0]=l):l=e[0];const c=!l,u=rH();let d;return e[1]!==n||e[2]!==o||e[3]!==r||e[4]!==s||e[5]!==u||e[6]!==a?(d=wl.makeQueryOptions({asset:n,gizmoId:s,isUnauthenticated:c,conversationId:o,getServerUrl:r,sharedThreadId:a,postId:u}),e[1]=n,e[2]=o,e[3]=r,e[4]=s,e[5]=u,e[6]=a,e[7]=d):d=e[7],ut(d)}function HCe(t){"use forget";var _;const e=D.c(21);let n,s,o,r,a;e[0]!==t?(_=t,{duration:o,delay:r,animate:a,className:n}=_,s=De(_,["duration","delay","animate","className"]),e[0]=t,e[1]=n,e[2]=s,e[3]=o,e[4]=r,e[5]=a):(n=e[1],s=e[2],o=e[3],r=e[4],a=e[5]);const l=o===void 0?.6:o,c=r===void 0?.1:r,u=a===void 0?!0:a;let d;e[6]===Symbol.for("react.memo_cache_sentinel")?(d=[0,1,1,0,0,0],e[6]=d):d=e[6];const f=d;let m,p,g;if(e[7]!==u||e[8]!==n||e[9]!==c||e[10]!==l||e[11]!==s){const x=BQ(f.length-1);e[15]!==n?(m=q("flex h-8 w-12 items-center justify-center gap-1",n),e[15]=n,e[16]=m):m=e[16],p=s,g=new Array(3).fill(!0).map((b,y)=>i.jsx(wt.div,{className:"bg-token-text-primary h-1.5 w-1.5 rounded-full",animate:u?{opacity:f}:{opacity:1},transition:{duration:l,repeat:1/0,ease:x,delay:c*y}},y)),e[7]=u,e[8]=n,e[9]=c,e[10]=l,e[11]=s,e[12]=m,e[13]=p,e[14]=g}else m=e[12],p=e[13],g=e[14];let h;return e[17]!==m||e[18]!==p||e[19]!==g?(h=i.jsx("div",G(N({className:m},p),{children:g})),e[17]=m,e[18]=p,e[19]=g,e[20]=h):h=e[20],h}const Ait=t=>{"use forget";var c;const e=D.c(9);let n,s,o;e[0]!==t?(c=t,{shouldOffsetLoadingDot:o,className:n}=c,s=De(c,["shouldOffsetLoadingDot","className"]),e[0]=t,e[1]=n,e[2]=s,e[3]=o):(n=e[1],s=e[2],o=e[3]);let r;e[4]===Symbol.for("react.memo_cache_sentinel")?(r=xe("84110054"),e[4]=r):r=e[4];const a=r;let l;return e[5]!==n||e[6]!==s||e[7]!==o?(l=a?i.jsx(HCe,N({className:n},s)):i.jsx("div",G(N({className:q("result-streaming pulse aria-busy",o&&"ms-1",n)},s),{children:i.jsx("span",{children:i.jsx("pre",{})})})),e[5]=n,e[6]=s,e[7]=o,e[8]=l):l=e[8],l},$Ce="o0OWBW_slideUp",Nit={slideUp:$Ce};function Iit({containsImagesOrAttachments:t,isMaxWidthMessage:e=!1,children:n}){const s=v.useRef(!1);return i.jsx("div",{className:q("user-message-bubble-color corner-superellipse/1.1 relative rounded-[18px] px-4 py-1.5 data-[multiline]:py-3",t&&"rounded-se-lg",e?"w-full":"max-w-[var(--user-chat-width,70%)]"),ref:o=>Qc({axis:"height",target:o,onChange:({height:r})=>{if(o){const a=parseFloat(getComputedStyle(document.documentElement).fontSize),l=2*(s.current?12:6);s.current=r>1.5*a+l,rc(o,"data-multiline",s.current)}}}),children:n})}function GCe(){return i.jsx(wt.div,{className:"absolute flex h-8 w-3 origin-center items-center justify-center",initial:{scale:1,opacity:1},animate:{scale:0,opacity:0},transition:{ease:"easeInOut",duration:.2},children:i.jsx("div",{className:"bg-token-text-primary h-3 w-3 rounded-full"})})}const VCe=v.createContext(!1);function gE(t){"use forget";const e=D.c(2);let n;return e[0]!==t?(n=zCe(t),e[0]=t,e[1]=n):n=e[1],ut(n)}function zCe(t){return En({enabled:t!=null,queryKey:["imageData",t],queryFn:()=>new Promise((e,n)=>{const s=new Image;s.decoding="async",s.onload=()=>{e(s)},s.onerror=n,s.src=t})})}function Ns(t){"use forget";const e=D.c(14),{url:n,size:s,minSize:o,fallback:r,className:a,containerClassName:l,showLoadingAnimation:c,applySizeToImg:u,onLoad:d,onError:f}=t,m=s===void 0?16:s,p=u===void 0?!0:u;let g;e[0]!==m||e[1]!==n?(g=JCe(n,m),e[0]=m,e[1]=n,e[2]=g):g=e[2];const h=g;if(h==null)return r!=null?r:null;let _;return e[3]!==p||e[4]!==a||e[5]!==l||e[6]!==r||e[7]!==h||e[8]!==o||e[9]!==f||e[10]!==d||e[11]!==c||e[12]!==m?(_=o!=null?i.jsx(WCe,{faviconUrl:h,size:m,minSize:o,fallback:r,className:a,containerClassName:l,showLoadingAnimation:c,onLoad:d,onError:f}):i.jsx(aH,{faviconUrl:h,size:p?m:void 0,className:a,onLoad:d,onError:f}),e[3]=p,e[4]=a,e[5]=l,e[6]=r,e[7]=h,e[8]=o,e[9]=f,e[10]=d,e[11]=c,e[12]=m,e[13]=_):_=e[13],_}function WCe(t){"use forget";const e=D.c(13),{faviconUrl:n,size:s,minSize:o,fallback:r,className:a,containerClassName:l,showLoadingAnimation:c,onLoad:u,onError:d}=t,{data:f,isLoading:m}=gE(n),p=f&&Math.min(f.width,f.height);if(!m&&(p==null||p<o))return r!=null?r:null;let g;e[0]!==l?(g=q("relative inline-block shrink-0",l),e[0]=l,e[1]=g):g=e[1];let h;e[2]!==a||e[3]!==n||e[4]!==m||e[5]!==d||e[6]!==u||e[7]!==c||e[8]!==s?(h=m?c?i.jsx(qCe,{className:q(a,"duration-200 motion-safe:transition-opacity",!m&&"pointer-events-none opacity-0")}):i.jsx("div",{className:a}):i.jsx(aH,{faviconUrl:n,size:s,className:q(a,"duration-200 motion-safe:transition-opacity",m?"pointer-events-none opacity-0":"opacity-100"),onLoad:u,onError:d}),e[2]=a,e[3]=n,e[4]=m,e[5]=d,e[6]=u,e[7]=c,e[8]=s,e[9]=h):h=e[9];let _;return e[10]!==g||e[11]!==h?(_=i.jsx("div",{className:g,children:h}),e[10]=g,e[11]=h,e[12]=_):_=e[12],_}function aH(t){"use forget";const e=D.c(7),{faviconUrl:n,size:s,className:o,onLoad:r,onError:a}=t,l=s!=null?s:"auto",c=s!=null?s:"auto";let u;return e[0]!==o||e[1]!==n||e[2]!==a||e[3]!==r||e[4]!==l||e[5]!==c?(u=i.jsx("img",{src:n,alt:"",width:l,height:c,className:o,onLoad:r,onError:a}),e[0]=o,e[1]=n,e[2]=a,e[3]=r,e[4]=l,e[5]=c,e[6]=u):u=e[6],u}function qCe({className:t,children:e}){return i.jsx("div",{"aria-busy":!0,className:q("bg-token-bg-tertiary flex animate-pulse items-center justify-center rounded-full",t),children:e})}const KCe="http://files.openai.com",YCe="https://openai.com",ZCe="https://images.openai.com";function QCe(t){const e=new URL(t);if(e.protocol!=="http:"&&e.protocol!=="https:")return KCe;const n=e.origin;return n===ZCe?YCe:n}function JCe(t,e){if(!t)return null;try{const n=QCe(t);return"https://www.google.com/s2/favicons?domain=".concat(n,"&sz=").concat(e)}catch(n){return Ve.addAction("Invalid favicon url",{error:n,url:t}),null}}var iH=(t=>(t.Sources="sources",t.Images="images",t))(iH||{}),hE=(t=>(t.Links="links",t.Citations="citations",t.SearchResults="search_results",t))(hE||{}),P2,ON;function XCe(){if(ON)return P2;ON=1;var t=p8(),e=l3(),n=E9(),s=Math.ceil,o=Math.max;function r(a,l,c){(c?e(a,l,c):l===void 0)?l=1:l=o(n(l),0);var u=a==null?0:a.length;if(!u||l<1)return[];for(var d=0,f=0,m=Array(s(u/l));d<u;)m[f++]=t(a,d,d+=l);return m}return P2=r,P2}var e3e=XCe();const t3e=ps(e3e),LN=3;function n3e({navigation:t,trackContentReferenceEvent:e}){const[n,s]=v.useState(!1),[o,r]=v.useState(0),a=t.domains.filter(m=>m.url);v.useEffect(()=>{e("Search Content Reference Shown","search_content_reference_shown",t.type,{urls:a.map(m=>m.url).join(",")})},[a]);const l=Gd(),c=o3e(a.length,!l),u=n?t3e(a,c):[a.slice(0,LN)];function d(){return a.length<=LN?null:o===0&&!n?i.jsx(R2,{onClick:()=>s(!0),className:"shrink-0 text-sm whitespace-nowrap",children:i.jsx(P,{id:"B5xwY8",defaultMessage:"More links"})}):i.jsx(R2,{onClick:()=>r(o-1),className:"shrink-0 text-sm whitespace-nowrap",disabled:o===0,children:i.jsx(P,{id:"Q0o6pZ",defaultMessage:"{icon} Previous",values:{icon:i.jsx(K_,{className:"icon-sm -ms-1 -me-1"})}})})}function f(){return n?i.jsx(R2,{onClick:()=>r(o+1),className:"shrink-0 text-sm whitespace-nowrap",disabled:o>=u.length-1,children:i.jsx(P,{id:"N4c5Xd",defaultMessage:"Next {icon}",values:{icon:i.jsx(zi,{className:"icon-sm -ms-1 -me-1"})}})}):null}return i.jsxs("div",{className:"not-prose mb-3",children:[i.jsx(wt.div,{initial:!1,animate:{maxHeight:n?1e3:250,opacity:1},transition:{duration:.2,ease:"easeInOut"},className:"overflow-hidden",children:i.jsx("div",{className:"flex transition-transform",style:{transform:"translateX(-".concat(o*100,"%)")},children:u.map((m,p)=>i.jsx("div",{className:"flex flex-[0_0_100%] shrink-0 flex-col gap-6",children:m.map((g,h)=>i.jsx(s3e,{navigationDomain:g,trackContentReferenceEvent:e,analyticsMetadata:{section_index:h}},g.url))},p))})}),i.jsx("div",{className:"mt-6 flex flex-col gap-6",children:i.jsxs("div",{className:"text-token-text-tertiary flex items-center gap-3",children:[d(),i.jsx("div",{className:"bg-token-bg-tertiary h-[1px] w-full flex-1"}),f()]})})]})}function s3e({navigationDomain:t,trackContentReferenceEvent:e,analyticsMetadata:n}){var s;return v.useEffect(()=>{e("link_action",null,"navigation",{url:t.url,title:t.title,link_type:"card",action:"show",section:"fast_nav",section_location:"response",section_index:n.section_index})},[]),i.jsxs(Fs,{className:"flex flex-col hover:underline",href:t.url,children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Ns,{url:t.url,size:32,applySizeToImg:!0,className:"icon-xs rounded-full",showLoadingAnimation:!0}),i.jsx("div",{className:"text-token-text-secondary text-xs",children:(s=t.attribution)!=null?s:t.subtitle})]}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx("div",{className:"text-token-text-primary text-sm",children:t.title}),t.snippet&&i.jsx("div",{className:"text-token-text-secondary line-clamp-1 w-full text-sm",children:t.snippet})]})]})}function o3e(t,e){const n=e?[5,6]:[6,7,8];let s=n[0],o=-1;for(let r=0;r<n.length;r++){const a=n[r],l=t%a;if(l===0)return a;l>o&&(o=l,s=a)}return s}var eP;const R2=Tt.button(eP||(eP=_t(["\n    shrink-0\n    text-sm\n    whitespace-nowrap\n    flex\n    items-center\n    gap-1\n    text-token-text-secondary\n    hover:text-token-text-primary\n    disabled:opacity-50\n    disabled:hover:text-token-text-secondary\n  "]))),r3e=v.createContext(null),O2=3,a3e=3;function i3e({navigation:t,onShowSearchResults:e,trackContentReferenceEvent:n}){const s=xe("4111922784"),o=v.useContext(r3e)==="user-query-with-navlink",r=v.useContext(VCe);return i.jsx("div",{className:q({hidden:r&&o}),children:s?i.jsx(n3e,{navigation:t,trackContentReferenceEvent:n}):i.jsx(l3e,{navigation:t,onShowSearchResults:e,trackContentReferenceEvent:n})})}function l3e({navigation:t,onShowSearchResults:e,trackContentReferenceEvent:n}){const s=t.domains.filter(a=>a.url);v.useEffect(()=>{n("Search Content Reference Shown","search_content_reference_shown",t.type,{urls:s.map(a=>a.url).join(",")})},[s]);const o=s.slice(0,O2),r=s.slice(O2,O2+a3e);return i.jsxs("div",{className:"not-prose mb-3 flex gap-2",children:[o.map((a,l)=>i.jsx(u3e,{isPrimaryDomain:l===0,isFistLineDomain:!0,navigationDomain:a,trackContentReferenceEvent:n,analyticsMetadata:{section_index:l}},a.url)),r.length>0&&i.jsx(c3e,{onShowSearchResults:e,trackContentReferenceEvent:n,moreDomains:r})]})}const c3e=({onShowSearchResults:t,trackContentReferenceEvent:e,moreDomains:n})=>i.jsx(lH,{component:"div",className:"group flex w-28 cursor-pointer",onClick:()=>{e("Search Content Reference Clicked","search_content_reference_clicked","navigation",{sidebar:"sidebar"}),t(iH.Sources,hE.Links)},children:i.jsxs("div",{className:"flex min-w-0 flex-col",children:[i.jsx("div",{className:"flex items-center",children:n.map((s,o)=>i.jsx("div",{style:{zIndex:n.length-o},className:"ms-[-6px] first:ms-0",children:i.jsx("div",{className:q("flex h-4 w-4 items-center overflow-hidden rounded-full","border-token-bg-primary bg-token-bg-primary group-hover:border-token-bg-tertiary border-2"),children:i.jsx(Ns,{url:s.url,size:32,minSize:20,className:"icon-xs rounded-full",showLoadingAnimation:!0})},s.url)},s.url))}),i.jsx("div",{className:"text-token-text-primary flex text-sm font-semibold",children:i.jsx("span",{className:"truncate",children:i.jsx(P,{id:"B5xwY8",defaultMessage:"More links"})})})]})}),u3e=({isPrimaryDomain:t,isFistLineDomain:e,navigationDomain:n,trackContentReferenceEvent:s,analyticsMetadata:o})=>{var r;return v.useEffect(()=>{s("link_action",null,"navigation",{url:n.url,title:n.title,link_type:"card",action:"show",section:"fast_nav",section_location:"response",section_index:o.section_index})},[]),i.jsx("div",{className:"min-w-0 flex-1",children:i.jsx(d3e,{isFistLineDomain:e,isPrimaryDomain:t,title:n.title,subtitle:(r=n.subtitle)!=null?r:void 0,url:n.url,domain:n.domain,subDomains:n.sub_domains,trackContentReferenceEvent:s,analyticsMetadata:o})})},d3e=({isFistLineDomain:t,title:e,subtitle:n,url:s,trackContentReferenceEvent:o,analyticsMetadata:r})=>{const a={url:s,title:e,link_type:"card",section:"fast_nav",section_location:"response",section_index:r.section_index},l=as()?"_self":"_blank";return i.jsxs(lH,{component:Fs,href:s,target:l,onClick:()=>o("link_action",null,"navigation",G(N({},a),{action:"click"})),onMouseEnter:()=>{o("link_action",null,"navigation",G(N({},a),{action:"hover"}))},className:"flex flex-col gap-[2px]",children:[i.jsxs("div",{className:"text-token-text-secondary flex items-center gap-[6px] text-xs",children:[i.jsx(Ns,{url:s,size:32,applySizeToImg:!0,className:"icon-xs rounded-full",showLoadingAnimation:!0}),i.jsx("div",{className:"truncate",children:n})]}),i.jsx("div",{className:q("text-token-text-primary flex items-center font-medium",t?"text-sm":"text-xs"),children:i.jsx("span",{className:"truncate",children:e})})]})},lH=o=>{var r=o,{component:t,children:e,className:n}=r,s=De(r,["component","children","className"]);return i.jsx(t,G(N({},s),{className:q("hover:bg-token-bg-tertiary border-token-border-light rounded-2xl border px-4 py-3",n),children:e}))},f3e=(t,e)=>t==="Search Content Reference Shown"||t==="Search Content Reference Show More Shown"||t==="Contextual Answers Content Reference Shown"||t==="Search Content Reference Failed"||t==="link_action"&&(e==null?void 0:e.action)==="show"||t==="product_offer"&&(e==null?void 0:e.action)==="shown",m3e=(t,e,n)=>N(G(N({},Ms(e)),{type:t}),n?g3e(n):{}),p3e=["section_index","product_index","offer_index"],g3e=t=>Object.fromEntries(Object.entries(t!=null?t:{}).map(([e,n])=>[e,p3e.includes(e)&&n!==void 0?(Number(n)+1).toString():String(n)]));function jit(t){var s;const e=(s=v.useContext(Yp))==null?void 0:s.serverSharedThreadId;return v.useMemo(()=>{const[o,r]=t.split("?"),a=new URLSearchParams(r!=null?r:"");return e&&a.set("shared_conversation_id",e),a.size?o+"?"+a.toString():o},[t,e])}function h3e(t){const e=v.useRef(new Set);return v.useCallback((n,s,o,r,a)=>{if(t&&t.messageId&&_3e(t.messageId)){const l=m3e(o,t,r),c="".concat(n,"-").concat(JSON.stringify(l));(!e.current.has(c)||!f3e(n,r))&&(e.current.add(c),s?V.logEventWithStatsig(n,s,l):V.logEvent(n,l),a==null||a(t))}},[t])}const _3e=t=>!t.startsWith(i9)&&!t.startsWith(FQ),cH=je(()=>Me(()=>import("./7d5f5c33-j98k6601dwm02jlz.js"),__vite__mapDeps([249,1])).then(t=>t.QRCodeSVG)),hn=({onDismiss:t,title:e,content:n,customCtas:s,onPrimaryCtaClick:o,primaryCtaText:r,primaryCtaColor:a,primaryCtaClassName:l,secondaryCtaColor:c,primaryCtaQrLink:u,onPrimaryCtaQrClick:d,onSecondaryCtaClick:f,onDangerCtaClick:m,secondaryCtaText:p,dangerCtaText:g,icon:h,iconContainerClassName:_,isElevated:x=!0,isPrimaryCtaDisabled:b=!1,isSecondaryCtaDisabled:y=!1,isDangerCtaDisabled:S=!1,type:C="normal",className:w,contentClassName:k,closeButtonContainerClassName:E,verticalCta:T=!1})=>{const M=aE(),A=q("m-w-fit flex shrink-0 gap-2 pb-1 md:pb-0",T&&"flex-col"),I=s?i.jsx("div",{className:A,children:s}):(r||p||g)&&i.jsxs("div",{className:A,children:[r&&i.jsx(Se,{onClick:o,color:a!=null?a:"primary",className:q("shrink-0",l),disabled:b,children:r}),p&&i.jsx(Se,{onClick:f,color:c!=null?c:"secondary",className:"shrink-0",disabled:y,children:p}),g&&i.jsx(Se,{onClick:m,color:"danger-outline",className:"shrink-0",disabled:S,children:g})]});return i.jsxs("aside",{className:q("flex w-full items-start gap-4 rounded-3xl border py-4 ps-5 pe-3 text-sm [text-wrap:pretty] lg:mx-auto dark:border-transparent",x&&"shadow-xxs",M?"flex-col":"md:items-center",C==="error"?"border-token-surface-error/15 text-token-text-error dark:bg-token-surface-error/5 bg-red-50":C==="info"?"border-token-border-light bg-token-main-surface-secondary text-token-text-primary dark:bg-token-main-surface-tertiary":"border-token-border-default bg-token-main-surface-primary text-token-text-primary dark:bg-token-main-surface-secondary",w),children:[i.jsxs("div",{className:q("flex h-full w-full gap-3",!M&&"md:items-center"),children:[h&&i.jsx("div",{className:q("flex items-start pt-0.5",_),children:h}),i.jsxs("div",{className:q("flex grow flex-col md:flex-row md:items-center md:justify-between md:gap-8",k),children:[i.jsxs("div",{className:"flex flex-col",children:[e&&i.jsx("h3",{className:q("text-sm font-bold",C==="error"?"text-token-text-error":"text-token-text-primary"),children:e}),i.jsx("div",{className:q(e?C==="error"?"text-token-text-error":"text-token-text-secondary":""),children:n})]}),i.jsxs("div",{className:"mt-2 flex min-w-fit flex-col gap-2 md:mt-0 md:items-center md:gap-4",children:[u&&i.jsx(cH,{className:"min-h-[62px] min-w-[62px] cursor-pointer",onClick:d,size:62,value:u}),!M&&I]})]}),i.jsx("div",{className:q("flex shrink-0 items-start gap-2 sm:items-center",E),children:!!t&&i.jsx(Wn,{onClick:t})})]}),M&&I]})},uH=({onDismiss:t,title:e,content:n,onPrimaryCtaClick:s,primaryCtaText:o,onSecondaryCtaClick:r,secondaryCtaText:a})=>i.jsxs("div",{className:q("border-main-surface-secondary bg-token-main-surface-primary text-token-text-primary flex h-16 items-center border-b px-2 text-sm"),children:[i.jsxs("div",{className:"flex items-center justify-center",children:[!!t&&i.jsx(Wn,{onClick:t,className:"text-token-text-tertiary -me-2"}),i.jsx(UQ,{className:"h-16 w-16 rounded-xs pt-1 shadow-none"}),i.jsxs("div",{className:"-ms-1 flex flex-col",children:[e&&i.jsx("div",{className:"text-token-text-primary font-bold",children:e}),i.jsx("div",{className:q(e?"text-token-text-secondary -mt-0.5":""),children:n})]})]}),i.jsxs("div",{className:"ms-auto flex justify-end",children:[o&&i.jsx(Se,{onClick:s,color:"primary",className:"shrink-0",children:o}),a&&i.jsx(Se,{onClick:r,color:"secondary",className:"me-2 shrink-0",children:a})]})]}),dH=We.DesktopBrowserExtensionAnnouncement,fH=We.DesktopBrowserExtensionReactiveAnnouncement,x3e=5,y3e="https://chromewebstore.google.com/detail/searchgpt/ejcfepkfckglbgocfkanmcdngdijcgld";function b3e({announcementKey:t=dH,onClose:e}){v.useEffect(()=>{V.logEventWithStatsig("ChatGPT Browser Extension: Announcement Shown","chatgpt_browser_extension_announcement_shown"),V.logUpsellOrModalEvent(qn,{eventId:"browser_extension_announcement_banner_shown",type:Kn.UPSELL_OR_MODAL_TYPE_NUX_BANNER})},[]);const n=v.useCallback(()=>{kt(t),V.logEventWithStatsig("ChatGPT Browser Extension: Announcement Closed","chatgpt_browser_extension_announcement_closed"),e&&e()},[t,e]),s=v.useCallback(()=>{V.logEventWithStatsig("ChatGPT Browser Extension: CTA Clicked","chatgpt_browser_extension_announcement_cta_clicked"),kt(t),e&&e()},[t,e]);return i.jsx(v3e,{downloadUrl:y3e,announcementKey:t,handleCTAClicked:s,handleClose:n})}function Pit({onClose:t}){return b3e({announcementKey:fH,onClose:t})}function v3e({downloadUrl:t,announcementKey:e,handleCTAClicked:n,handleClose:s}){const o=()=>{n(),window.open(t)},r=i.jsxs("div",{className:"grow",children:[i.jsx("div",{className:"mb-0.5 font-semibold",children:i.jsx(P,{id:"uAZwaE",defaultMessage:"Use ChatGPT for every search"})}),i.jsx("span",{className:"text-token-text-secondary",children:i.jsx(P,{id:"+wTq4L",defaultMessage:"Download the Chrome extension to switch your default search engine to ChatGPT, and get instant answers from trusted sources with every search."})})]});return i.jsx(hn,{onPrimaryCtaClick:o,primaryCtaText:i.jsx(P,{id:"x9mKG0",defaultMessage:"Get Extension"}),onDismiss:()=>s(e),content:r})}function mH(t){var l;const e=T9(()=>document.documentElement.dataset.searchExtension==="1"),s=(l=X(()=>Fn(Pt(t.clientThreadId))).enabledTools)==null?void 0:l.includes(Ep.Search),o=fl(),r=!(o!=null&&o.includes(Qs.SearchToolHoldout)),a=as();return HQ()&&!a&&!e&&s&&r}function Rit(t){return mH(t),C3e(),Ct(dH),!1}function Oit(t){var a;const e=mH(t),n=Ze(t.clientThreadId,l=>Bc(ve.getConversationTurns(l),c=>c.role===dt.User));let s=!1;const o=n==null?void 0:n.messages[0];if((o==null?void 0:o.content.content_type)===vt.Text){const l=(a=o==null?void 0:o.content.parts[0])==null?void 0:a.toLowerCase();l&&(s=l.includes("chrome extension")||l.includes("default search"))}const r=Ct(fH);return r.eligible&&!r.isLoading&&e&&s}function S3e(t){var n;const e=(n=tt.getItem(Ie.SearchSettings))!=null?n:{};e.hasSearchedMinTimes||(e.searchMessageIds||(e.searchMessageIds=[]),e.searchMessageIds.includes(t)||(e.searchMessageIds.push(t),e.searchMessageIds.length>=x3e&&(e.hasSearchedMinTimes=!0,delete e.searchMessageIds),tt.setItem(Ie.SearchSettings,e)))}function C3e(){var e;return((e=tt.getItem(Ie.SearchSettings))!=null?e:{}).hasSearchedMinTimes===!0}var fg=(t=>(t.SonicBusinessesMap="sonic.web.businessesMap",t.CompletionRequest="chatgpt.web.completionRequest",t.GetDiffedDoc="chatgpt.web.canvas.getDiffedDoc",t.ProductsCompletionRequest="chatgpt.web.products.completionRequest",t.ProductSidebar="chatgpt.web.products.sidebar",t.SuperWidget="chatgpt.web.super_widget",t.SearchingState="chatgpt.web.searchingState",t))(fg||{});class w3e{constructor(e,n){ye(this,"namespace");ye(this,"expectedTimingLogs");ye(this,"expectedTimingLogTimeouts",{});ye(this,"startMs",-1);ye(this,"lastLogMs",-1);ye(this,"loggedTimings",new Set);ye(this,"timingBlocks",{});ye(this,"_debug",!1);ye(this,"context");var s,o,r;this.namespace=e,this.expectedTimingLogs=(s=n==null?void 0:n.expectedTimingLogs)!=null?s:[],this._debug=(o=n==null?void 0:n.debug)!=null?o:!1,this.context=(r=n==null?void 0:n.context)!=null?r:{},this.reset()}reset(e){this.startMs=this.lastLogMs=e!=null?e:performance.now(),this.timingBlocks={},this.loggedTimings=new Set;for(const n of Object.values(this.expectedTimingLogTimeouts))clearTimeout(n);this.expectedTimingLogTimeouts={};for(const n of this.expectedTimingLogs){const s=setTimeout(()=>{var o;Ve.addAction("".concat(this.namespace,".").concat(n.name,".timed_out"),(o=n.initializationInfo)!=null?o:{})},n.expectedInMs);this.expectedTimingLogTimeouts[n.name]=s,this.isDebug()&&console.debug("[DatadogProfiler] Expecting ".concat(this.namespace,".").concat(n.name," to be logged within ").concat(n.expectedInMs,"ms"))}}isDebug(){var e;return(e=window.__DATADOG_PROFILER_DEBUG__)!=null?e:this._debug}getStartTime(){return this.startMs}logTimingOnce(e,n={fromLastLog:!1}){var r;if(this.loggedTimings.has(e)){this.isDebug()&&console.warn("[DatadogProfiler] Timing ".concat(this.namespace,".").concat(e," already logged"));return}const s=performance.now(),o=(r=n.overrideDurationMs)!=null?r:s-(n.fromLastLog?this.lastLogMs:this.startMs);return Ve.addAction("".concat(this.namespace,".").concat(e),G(N(N({},this.context),n.context),{durationMs:o})),this.lastLogMs=s,this.loggedTimings.add(e),e in this.expectedTimingLogTimeouts&&(clearTimeout(this.expectedTimingLogTimeouts[e]),delete this.expectedTimingLogTimeouts[e]),this.isDebug()&&console.debug("[DatadogProfiler] ".concat(this.namespace,".").concat(e,": ").concat(o,"ms")),o}startBlock(e){this.timingBlocks[e]=performance.now()}endBlock(e,n={throwError:!0}){const s=this.timingBlocks[e];if(s===void 0&&n.throwError)throw new Error('Block "'.concat(e,'" not started'));const o=performance.now()-s;Ve.addAction("".concat(this.namespace,".").concat(e),G(N(N({},this.context),n.context),{durationMs:o})),delete this.timingBlocks[e]}}const i0={};function k3e({namespace:t,opts:e}){return i0[t]!==void 0&&Ve.addError("Profiler already exists for namespace ".concat(t)),i0[t]=new w3e(t,e)}function _E({namespace:t,opts:e}){let n=i0[t];return n===void 0&&(n=i0[t]=k3e({namespace:t,opts:e})),n}function pH(t){"use forget";const e=D.c(10),{namespace:n,clientThreadId:s}=t,[o,r]=v.useState(!1);let a;e[0]!==n?(a=()=>_E({namespace:n,opts:{debug:!1}}),e[0]=n,e[1]=a):a=e[1];const[l]=v.useState(a),c=Ze(s,E3e),u=Dr(c);let d;e[2]===Symbol.for("react.memo_cache_sentinel")?(d=new Set,e[2]=d):d=e[2];const f=v.useRef(d);let m,p;e[3]!==l||e[4]!==c?(m=()=>{if(c&&!f.current.has(c)){f.current.add(c);const _=$Q(c);_&&(l.reset(_.turnTracker.promptSentTimestamp),r(!0))}},p=[c,l],e[3]=l,e[4]=c,e[5]=m,e[6]=p):(m=e[5],p=e[6]),v.useEffect(m,p);const g=o?l:null;let h;return e[7]!==u||e[8]!==g?(h={profiler:g,isRequestActive:u},e[7]=u,e[8]=g,e[9]=h):h=e[9],h}function E3e(t){return ve.getRequestId(t)}const uS=d3(()=>({delayedRenderingMessageIds:new Set})),T3e=t=>f3(uS,t);function M3e(t){return T3e(e=>t?t(e.delayedRenderingMessageIds):e.delayedRenderingMessageIds)}const DN={addDelayedRenderingMessage(t){uS.setState(e=>{if(e.delayedRenderingMessageIds.has(t))return e;const n=new Set(e.delayedRenderingMessageIds);return n.add(t),{delayedRenderingMessageIds:n}})},removeDelayedRenderingMessage(t){uS.setState(e=>{if(!e.delayedRenderingMessageIds.has(t))return e;const n=new Set(e.delayedRenderingMessageIds);return n.delete(t),{delayedRenderingMessageIds:n}})}},A3e="5.7.5",N3e=100,I3e=0,j3e=350,P3e=24,R3e=24,O3e="Comp 1",L3e=0,D3e=[],B3e=[{ddd:0,ind:1,ty:4,nm:"border",sr:1,ks:{o:{a:0,k:100,ix:2},r:{a:0,k:0,ix:2},p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2}},ao:0,hd:!1,shapes:[{ty:"gr",hd:!1,it:[{ty:"el",hd:!1,d:1,s:{a:0,k:[22,22],ix:2},p:{a:0,k:[0,0],ix:2}},{ty:"st",c:{a:0,k:[.203921568627451,.207843137254902,.2509803921568627],ix:2},o:{a:0,k:100,ix:2},w:{a:0,k:2,ix:2},hd:!1,lc:2,lj:2},{ty:"tm",s:{a:0,k:0,ix:2},e:{a:0,k:100,ix:2},o:{a:0,k:0,ix:2},m:1,hd:!1},{ty:"tr",hd:!1,p:{a:0,k:[12,12],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2},r:{a:0,k:-180,ix:2},o:{a:0,k:100,ix:2},sk:{a:0,k:0,ix:2},sa:{a:0,k:0,ix:2}}]}],ip:0,op:350,st:0,bm:0},{ddd:0,ind:2,ty:4,nm:"Path",sr:1,ks:{o:{a:0,k:100,ix:2},r:{a:0,k:0,ix:2},p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2}},ao:0,hd:!1,shapes:[{ty:"gr",hd:!1,it:[{ty:"sh",hd:!1,d:1,ks:{a:0,k:{c:!1,v:[[8.6485975,.1178352687211168],[8.880497499999999,1.074935268721117],[6.6505975,3.304865268721118],[6.6505975,6.016105268721118],[9.3617975,6.016105268721118],[11.5916975,3.786175268721117],[12.5487975,4.018115268721118],[11.1692975,8.727405268721117],[5.5576975,9.820205268721118],[3.272757499999999,12.10510526872112],[.561517499999999,12.10510526872112],[.561517499999999,9.393905268721117],[2.8464575,7.109005268721118],[3.9393075,1.497375268721117],[8.6485975,.1178352687211168],[8.6485975,.1178352687211168],[8.6485975,.1178352687211168]],i:[[0,0],[.3205000000000009,-.3204799999999999],[.7432999999999996,-.7433100000000001],[-.7487000000000013,-.7487000000000013],[-.7487000000000013,.7486999999999995],[-.7433000000000014,.743310000000001],[-.09659999999999869,-.4428200000000011],[1.278300000000002,-1.2783],[1.8610999999999986,.7885999999999989],[.7616466666666675,-.7616333333333323],[.7486899999999999,.7486999999999995],[-.7486899999999999,.7487000000000013],[-.7616466666666675,.7616333333333323],[-1.5171100000000006,1.5171199999999994],[-1.6442,-.3585899999999995],[0,0],[0,0]],o:[[.4428000000000001,.09658000000000033],[-.7432999999999996,.7433100000000001],[-.7487000000000013,.7486899999999999],[.7485999999999997,.7486999999999995],[.7432999999999996,-.743310000000001],[.3204999999999991,-.3204799999999999],[.3585999999999991,1.644189999999998],[-1.5170999999999992,1.5170999999999992],[-.7616466666666675,.761633333333334],[-.7486899999999999,.7486999999999995],[-.7486899999999999,-.7485999999999997],[.7616466666666666,-.7616333333333323],[-.7885500000000008,-1.8611],[1.278289999999998,-1.27829],[0,0],[0,0],[.4428000000000001,.09658000000000033]]}}},{ty:"fl",c:{a:0,k:[.6980392156862745,.3843137254901961,.996078431372549],ix:2},o:{a:0,k:100,ix:2},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tm",s:{a:0,k:0,ix:2},e:{a:0,k:100,ix:2},o:{a:0,k:0,ix:2},m:1,hd:!1},{ty:"tr",hd:!1,p:{a:1,k:[{t:0,s:[13.23,10.77154381752014],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:50,s:[12,12],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:100,s:[12,12],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:117,s:[12,12],i:{x:[.5],y:[1.5]},o:{x:[.8],y:[0]}},{t:227,s:[12,12],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:282,s:[13.23,10.77],i:{x:[1],y:[1]},o:{x:[0],y:[0]}}],ix:2},a:{a:1,k:[{t:0,s:[7.559483528137207,5.104858875274658],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:50,s:[7.559483528137207,5.104858875274658],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}}],ix:2},s:{a:1,k:[{t:0,s:[100,100],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:50,s:[121.15,121.15],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:60,s:[121.15,121.15],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:100,s:[121.15,121.15],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:117,s:[121.15,121.15],i:{x:[.5],y:[1.5]},o:{x:[.8],y:[0]}},{t:227,s:[121.15,121.15],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:282,s:[100,100],i:{x:[1],y:[1]},o:{x:[0],y:[0]}}],ix:2},r:{a:1,k:[{t:0,s:[0],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:50,s:[45],i:{x:[1],y:[1]},o:{x:[0],y:[0]}},{t:60,s:[45],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:100,s:[-45],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:117,s:[-45],i:{x:[.5],y:[1.5]},o:{x:[.8],y:[0]}},{t:167,s:[45],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:184,s:[45],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:217,s:[-45],i:{x:[1],y:[1]},o:{x:[0],y:[0]}},{t:227,s:[-45],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:282,s:[0],i:{x:[1],y:[1]},o:{x:[0],y:[0]}}],ix:2},o:{a:0,k:100,ix:2},sk:{a:1,k:[{t:0,s:[0],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:50,s:[0],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}}],ix:2},sa:{a:0,k:0,ix:2}}]}],ip:0,op:350,st:0,bm:0},{ddd:0,ind:3,ty:4,nm:"Circle",sr:1,ks:{o:{a:0,k:100,ix:2},r:{a:0,k:0,ix:2},p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2}},ao:0,hd:!1,shapes:[{ty:"gr",hd:!1,it:[{ty:"sh",hd:!1,d:1,ks:{a:0,k:{c:!1,v:[[0,-10],[10,0],[0,10],[-10,0],[0,-10]],i:[[-5.5228475,0],[0,-5.5228475],[5.5228475,0],[0,5.5228475],[-5.5228475,0]],o:[[5.5228475,0],[0,5.5228475],[-5.5228475,0],[0,-5.5228475],[5.5228475,0]]}}},{ty:"fl",c:{a:0,k:[.203921568627451,.207843137254902,.2509803921568627],ix:2},o:{a:0,k:100,ix:2},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tm",s:{a:0,k:0,ix:2},e:{a:0,k:100,ix:2},o:{a:0,k:0,ix:2},m:1,hd:!1},{ty:"tr",hd:!1,p:{a:0,k:[12,12],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2},r:{a:0,k:90,ix:2},o:{a:0,k:100,ix:2},sk:{a:0,k:0,ix:2},sa:{a:0,k:0,ix:2}}]}],ip:0,op:350,st:0,bm:0},{ddd:0,ind:4,ty:4,nm:"Circle",sr:1,ks:{o:{a:0,k:100,ix:2},r:{a:0,k:0,ix:2},p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2}},ao:0,hd:!1,shapes:[{ty:"gr",hd:!1,it:[{ty:"el",hd:!1,d:1,s:{a:0,k:[24,24],ix:2},p:{a:0,k:[0,0],ix:2}},{ty:"fl",c:{a:0,k:[.6980392156862745,.3843137254901961,.996078431372549],ix:2},o:{a:0,k:100,ix:2},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tm",s:{a:0,k:0,ix:2},e:{a:0,k:100,ix:2},o:{a:0,k:0,ix:2},m:1,hd:!1},{ty:"tr",hd:!1,p:{a:0,k:[12,12],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2},r:{a:0,k:-180,ix:2},o:{a:0,k:25,ix:2},sk:{a:0,k:0,ix:2},sa:{a:0,k:0,ix:2}}]}],ip:0,op:350,st:0,bm:0}],F3e=[],U3e={v:A3e,fr:N3e,ip:I3e,op:j3e,w:P3e,h:R3e,nm:O3e,ddd:L3e,assets:D3e,layers:B3e,markers:F3e},H3e="5.7.5",$3e=100,G3e=0,V3e=400,z3e=24,W3e=24,q3e="Comp 1",K3e=0,Y3e=[],Z3e=[{ddd:0,ind:1,ty:3,nm:"",sr:1,ks:{o:{a:0,k:100,ix:2},r:{a:0,k:0,ix:2},p:{a:0,k:[12,12],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2}},ao:0,ip:0,op:400,st:0,bm:0,hd:!1},{ddd:0,ind:2,ty:4,nm:"Path's solid stroke",sr:1,ks:{o:{a:0,k:100,ix:2},r:{a:0,k:0,ix:2},p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2}},ao:0,hd:!1,parent:1,shapes:[{ty:"gr",hd:!1,it:[{ty:"sh",hd:!1,d:1,ks:{a:1,k:[{t:125,s:[{c:!1,v:[[3.5,0],[0,5.8332999999999995],[3.5,5.8332999999999995]],i:[[0,0],[1.166666666666667,-1.944433333333334],[-1.166666666666667,0]],o:[[-1.166666666666666,1.944433333333333],[1.166666666666666,0],[0,0]]}],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:200,s:[{c:!1,v:[[5.836999893188477,0],[9.336999893188477,5.83329963684082],[5.9886474609375,5.83329963684082]],i:[[-1.184650421142578,-1.832367897033691],[0,0],[-1.166666666666667,0]],o:[[1.184650897979736,1.832367539405823],[0,0],[0,0]]}],i:{x:[1],y:[1]},o:{x:[0],y:[0]}},{t:325,s:[{c:!1,v:[[5.836999893188477,0],[9.336999893188477,5.83329963684082],[5.9886474609375,5.83329963684082]],i:[[-1.184650421142578,-1.832367897033691],[0,0],[-1.166666666666667,0]],o:[[1.184650897979736,1.832367539405823],[0,0],[0,0]]}],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:400,s:[{c:!1,v:[[3.503000259399414,0],[.003000259399414062,5.83329963684082],[3.503000259399414,5.83329963684082]],i:[[.2074432373046875,-.3626899719238281],[0,0],[-1.166666666666667,0]],o:[[-.2074427604675293,.3626899123191833],[0,0],[0,0]]}],i:{x:[1],y:[1]},o:{x:[0],y:[0]}}],ix:2}},{ty:"st",c:{a:0,k:[.6941176470588235,.3803921568627451,.9921568627450981],ix:2},o:{a:0,k:100,ix:2},w:{a:0,k:2.33333,ix:2},hd:!1,lc:2,lj:2},{ty:"tm",s:{a:0,k:0,ix:2},e:{a:0,k:100,ix:2},o:{a:0,k:0,ix:2},m:1,hd:!1},{ty:"tr",hd:!1,p:{a:1,k:[{t:125,s:[-4.666999816894531,-4.666650772094727],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:200,s:[-4.67,-4.666650772094727],i:{x:[1],y:[1]},o:{x:[0],y:[0]}},{t:325,s:[-4.67,-4.666650772094727],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}}],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2},r:{a:0,k:0,ix:2},o:{a:0,k:100,ix:2},sk:{a:0,k:0,ix:2},sa:{a:0,k:0,ix:2}}]}],ip:0,op:400,st:0,bm:0},{ddd:0,ind:3,ty:4,nm:"Path's solid stroke",sr:1,ks:{o:{a:0,k:100,ix:2},r:{a:0,k:0,ix:2},p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2}},ao:0,hd:!1,parent:1,shapes:[{ty:"gr",hd:!1,it:[{ty:"sh",hd:!1,d:1,ks:{a:1,k:[{t:125,s:[{c:!1,v:[[0,2.3332999999999995],[3.5,0]],i:[[0,0],[-.7981999999999996,1.4169]],o:[[1.4311000000000007,0],[0,0]]}],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:200,s:[{c:!1,v:[[-2.333999633789062,2.333300590515137],[-5.833999633789062,0]],i:[[1.169005393981934,0],[.7811636924743652,1.481373190879822]],o:[[-1.169005155563354,0],[-.7811641693115234,-1.481372833251953]]}],i:{x:[1],y:[1]},o:{x:[0],y:[0]}},{t:325,s:[{c:!1,v:[[-2.333999633789062,2.333300590515137],[-5.833999633789062,0]],i:[[1.169005393981934,0],[.7811636924743652,1.481373190879822]],o:[[-1.169005155563354,0],[-.7811641693115234,-1.481372833251953]]}],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:400,s:[{c:!1,v:[[-.003000259399414062,2.333300590515137],[3.496999740600586,0]],i:[[-1.720494270324707,0],[-.6510887145996094,1.120759010314941]],o:[[1.720494627952576,0],[.6510882377624512,-1.120759010314941]]}],i:{x:[1],y:[1]},o:{x:[0],y:[0]}}],ix:2}},{ty:"st",c:{a:0,k:[.6941176470588235,.3803921568627451,.9921568627450981],ix:2},o:{a:0,k:100,ix:2},w:{a:0,k:2.33333,ix:2},hd:!1,lc:2,lj:2},{ty:"tm",s:{a:0,k:0,ix:2},e:{a:0,k:100,ix:2},o:{a:0,k:0,ix:2},m:1,hd:!1},{ty:"tr",hd:!1,p:{a:1,k:[{t:200,s:[1.166999816894531,2.33335018157959],i:{x:[1],y:[1]},o:{x:[0],y:[0]}},{t:325,s:[1.17,2.33335018157959],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}}],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2},r:{a:0,k:0,ix:2},o:{a:0,k:100,ix:2},sk:{a:0,k:0,ix:2},sa:{a:0,k:0,ix:2}}]}],ip:0,op:400,st:0,bm:0},{ddd:0,ind:4,ty:4,nm:"border",sr:1,ks:{o:{a:0,k:100,ix:2},r:{a:0,k:0,ix:2},p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2}},ao:0,hd:!1,shapes:[{ty:"gr",hd:!1,it:[{ty:"el",hd:!1,d:1,s:{a:0,k:[22,22],ix:2},p:{a:0,k:[0,0],ix:2}},{ty:"st",c:{a:0,k:[.203921568627451,.207843137254902,.2509803921568627],ix:2},o:{a:0,k:100,ix:2},w:{a:0,k:2,ix:2},hd:!1,lc:2,lj:2},{ty:"tm",s:{a:0,k:0,ix:2},e:{a:0,k:100,ix:2},o:{a:0,k:0,ix:2},m:1,hd:!1},{ty:"tr",hd:!1,p:{a:0,k:[12,12],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2},r:{a:0,k:-180,ix:2},o:{a:0,k:100,ix:2},sk:{a:0,k:0,ix:2},sa:{a:0,k:0,ix:2}}]}],ip:0,op:400,st:0,bm:0}],Q3e=[],J3e={v:H3e,fr:$3e,ip:G3e,op:V3e,w:z3e,h:W3e,nm:q3e,ddd:K3e,assets:Y3e,layers:Z3e,markers:Q3e},X3e="5.7.5",ewe=100,twe=0,nwe=400,swe=24,owe=24,rwe="Comp 1",awe=0,iwe=[],lwe=[{ddd:0,ind:1,ty:3,nm:"",sr:1,ks:{o:{a:0,k:100,ix:2},r:{a:0,k:0,ix:2},p:{a:0,k:[12,12],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2}},ao:0,ip:0,op:400,st:0,bm:0,hd:!1},{ddd:0,ind:2,ty:4,nm:"Path's solid stroke",sr:1,ks:{o:{a:0,k:100,ix:2},r:{a:0,k:0,ix:2},p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2}},ao:0,hd:!1,parent:1,shapes:[{ty:"gr",hd:!1,it:[{ty:"sh",hd:!1,d:1,ks:{a:1,k:[{t:125,s:[{c:!1,v:[[3.5,0],[0,5.8332999999999995],[3.5,5.8332999999999995]],i:[[0,0],[1.166666666666667,-1.9444333333333343],[-1.166666666666667,0]],o:[[-1.166666666666666,1.9444333333333326],[1.166666666666666,0],[0,0]]}],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:200,s:[{c:!1,v:[[5.836999893188477,0],[9.336999893188477,5.83329963684082],[5.9886474609375,5.83329963684082]],i:[[-1.1846504211425781,-1.8323678970336914],[0,0],[-1.166666666666667,0]],o:[[1.1846508979797363,1.8323675394058228],[0,0],[0,0]]}],i:{x:[1],y:[1]},o:{x:[0],y:[0]}},{t:325,s:[{c:!1,v:[[5.836999893188477,0],[9.336999893188477,5.83329963684082],[5.9886474609375,5.83329963684082]],i:[[-1.1846504211425781,-1.8323678970336914],[0,0],[-1.166666666666667,0]],o:[[1.1846508979797363,1.8323675394058228],[0,0],[0,0]]}],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:400,s:[{c:!1,v:[[3.503000259399414,0],[.0030002593994140625,5.83329963684082],[3.503000259399414,5.83329963684082]],i:[[.2074432373046875,-.3626899719238281],[0,0],[-1.166666666666667,0]],o:[[-.2074427604675293,.36268991231918335],[0,0],[0,0]]}],i:{x:[1],y:[1]},o:{x:[0],y:[0]}}],ix:2}},{ty:"st",c:{a:0,k:[.6941176470588235,.3803921568627451,.9921568627450981],ix:2},o:{a:0,k:100,ix:2},w:{a:0,k:2.33333,ix:2},hd:!1,lc:2,lj:2},{ty:"tm",s:{a:0,k:0,ix:2},e:{a:0,k:100,ix:2},o:{a:0,k:0,ix:2},m:1,hd:!1},{ty:"tr",hd:!1,p:{a:1,k:[{t:125,s:[-4.666999816894531,-4.666650772094727],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:200,s:[-4.67,-4.666650772094727],i:{x:[1],y:[1]},o:{x:[0],y:[0]}},{t:325,s:[-4.67,-4.666650772094727],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}}],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2},r:{a:0,k:0,ix:2},o:{a:0,k:100,ix:2},sk:{a:0,k:0,ix:2},sa:{a:0,k:0,ix:2}}]}],ip:0,op:400,st:0,bm:0},{ddd:0,ind:3,ty:4,nm:"Path's solid stroke",sr:1,ks:{o:{a:0,k:100,ix:2},r:{a:0,k:0,ix:2},p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2}},ao:0,hd:!1,parent:1,shapes:[{ty:"gr",hd:!1,it:[{ty:"sh",hd:!1,d:1,ks:{a:1,k:[{t:125,s:[{c:!1,v:[[0,2.3332999999999995],[3.5,0]],i:[[0,0],[-.7981999999999996,1.4169]],o:[[1.4311000000000007,0],[0,0]]}],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:200,s:[{c:!1,v:[[-2.3339996337890625,2.3333005905151367],[-5.8339996337890625,0]],i:[[1.1690053939819336,0],[.7811636924743652,1.4813731908798218]],o:[[-1.1690051555633545,0],[-.7811641693115234,-1.4813728332519531]]}],i:{x:[1],y:[1]},o:{x:[0],y:[0]}},{t:325,s:[{c:!1,v:[[-2.3339996337890625,2.3333005905151367],[-5.8339996337890625,0]],i:[[1.1690053939819336,0],[.7811636924743652,1.4813731908798218]],o:[[-1.1690051555633545,0],[-.7811641693115234,-1.4813728332519531]]}],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:400,s:[{c:!1,v:[[-.0030002593994140625,2.3333005905151367],[3.496999740600586,0]],i:[[-1.720494270324707,0],[-.6510887145996094,1.1207590103149414]],o:[[1.7204946279525757,0],[.6510882377624512,-1.1207590103149414]]}],i:{x:[1],y:[1]},o:{x:[0],y:[0]}}],ix:2}},{ty:"st",c:{a:0,k:[.6941176470588235,.3803921568627451,.9921568627450981],ix:2},o:{a:0,k:100,ix:2},w:{a:0,k:2.33333,ix:2},hd:!1,lc:2,lj:2},{ty:"tm",s:{a:0,k:0,ix:2},e:{a:0,k:100,ix:2},o:{a:0,k:0,ix:2},m:1,hd:!1},{ty:"tr",hd:!1,p:{a:1,k:[{t:200,s:[1.1669998168945312,2.33335018157959],i:{x:[1],y:[1]},o:{x:[0],y:[0]}},{t:325,s:[1.17,2.33335018157959],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}}],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2},r:{a:0,k:0,ix:2},o:{a:0,k:100,ix:2},sk:{a:0,k:0,ix:2},sa:{a:0,k:0,ix:2}}]}],ip:0,op:400,st:0,bm:0},{ddd:0,ind:4,ty:4,nm:"border",sr:1,ks:{o:{a:0,k:100,ix:2},r:{a:0,k:0,ix:2},p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2}},ao:0,hd:!1,shapes:[{ty:"gr",hd:!1,it:[{ty:"el",hd:!1,d:1,s:{a:0,k:[22,22],ix:2},p:{a:0,k:[0,0],ix:2}},{ty:"st",c:{a:0,k:[1,1,1],ix:2},o:{a:0,k:100,ix:2},w:{a:0,k:2,ix:2},hd:!1,lc:2,lj:2},{ty:"tm",s:{a:0,k:0,ix:2},e:{a:0,k:100,ix:2},o:{a:0,k:0,ix:2},m:1,hd:!1},{ty:"tr",hd:!1,p:{a:0,k:[12,12],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2},r:{a:0,k:-180,ix:2},o:{a:0,k:100,ix:2},sk:{a:0,k:0,ix:2},sa:{a:0,k:0,ix:2}}]}],ip:0,op:400,st:0,bm:0}],cwe=[],uwe={v:X3e,fr:ewe,ip:twe,op:nwe,w:swe,h:owe,nm:rwe,ddd:awe,assets:iwe,layers:lwe,markers:cwe},dwe="5.7.5",fwe=100,mwe=0,pwe=350,gwe=24,hwe=24,_we="Comp 1",xwe=0,ywe=[],bwe=[{ddd:0,ind:1,ty:4,nm:"border",sr:1,ks:{o:{a:0,k:100,ix:2},r:{a:0,k:0,ix:2},p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2}},ao:0,hd:!1,shapes:[{ty:"gr",hd:!1,it:[{ty:"el",hd:!1,d:1,s:{a:0,k:[22,22],ix:2},p:{a:0,k:[0,0],ix:2}},{ty:"st",c:{a:0,k:[1,1,1],ix:2},o:{a:0,k:100,ix:2},w:{a:0,k:2,ix:2},hd:!1,lc:2,lj:2},{ty:"tm",s:{a:0,k:0,ix:2},e:{a:0,k:100,ix:2},o:{a:0,k:0,ix:2},m:1,hd:!1},{ty:"tr",hd:!1,p:{a:0,k:[12,12],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2},r:{a:0,k:-180,ix:2},o:{a:0,k:100,ix:2},sk:{a:0,k:0,ix:2},sa:{a:0,k:0,ix:2}}]}],ip:0,op:350,st:0,bm:0},{ddd:0,ind:2,ty:4,nm:"Path",sr:1,ks:{o:{a:0,k:100,ix:2},r:{a:0,k:0,ix:2},p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2}},ao:0,hd:!1,shapes:[{ty:"gr",hd:!1,it:[{ty:"sh",hd:!1,d:1,ks:{a:0,k:{c:!1,v:[[8.6485975,.1178352687211168],[8.880497499999999,1.074935268721117],[6.6505975,3.304865268721118],[6.6505975,6.016105268721118],[9.3617975,6.016105268721118],[11.5916975,3.786175268721117],[12.5487975,4.018115268721118],[11.1692975,8.727405268721117],[5.5576975,9.820205268721118],[3.272757499999999,12.10510526872112],[.561517499999999,12.10510526872112],[.561517499999999,9.393905268721117],[2.8464575,7.109005268721118],[3.9393075,1.497375268721117],[8.6485975,.1178352687211168],[8.6485975,.1178352687211168],[8.6485975,.1178352687211168]],i:[[0,0],[.3205000000000009,-.3204799999999999],[.7432999999999996,-.7433100000000001],[-.7487000000000013,-.7487000000000013],[-.7487000000000013,.7486999999999995],[-.7433000000000014,.743310000000001],[-.09659999999999869,-.4428200000000011],[1.278300000000002,-1.2783],[1.8610999999999986,.7885999999999989],[.7616466666666675,-.7616333333333323],[.7486899999999999,.7486999999999995],[-.7486899999999999,.7487000000000013],[-.7616466666666675,.7616333333333323],[-1.5171100000000006,1.5171199999999994],[-1.6442,-.3585899999999995],[0,0],[0,0]],o:[[.4428000000000001,.09658000000000033],[-.7432999999999996,.7433100000000001],[-.7487000000000013,.7486899999999999],[.7485999999999997,.7486999999999995],[.7432999999999996,-.743310000000001],[.3204999999999991,-.3204799999999999],[.3585999999999991,1.644189999999998],[-1.5170999999999992,1.5170999999999992],[-.7616466666666675,.761633333333334],[-.7486899999999999,.7486999999999995],[-.7486899999999999,-.7485999999999997],[.7616466666666666,-.7616333333333323],[-.7885500000000008,-1.8611],[1.278289999999998,-1.27829],[0,0],[0,0],[.4428000000000001,.09658000000000033]]}}},{ty:"fl",c:{a:0,k:[.6980392156862745,.3843137254901961,.996078431372549],ix:2},o:{a:0,k:100,ix:2},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tm",s:{a:0,k:0,ix:2},e:{a:0,k:100,ix:2},o:{a:0,k:0,ix:2},m:1,hd:!1},{ty:"tr",hd:!1,p:{a:1,k:[{t:0,s:[13.23,10.77154381752014],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:50,s:[12,12],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:100,s:[12,12],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:117,s:[12,12],i:{x:[.5],y:[1.5]},o:{x:[.8],y:[0]}},{t:227,s:[12,12],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:282,s:[13.23,10.77],i:{x:[1],y:[1]},o:{x:[0],y:[0]}}],ix:2},a:{a:1,k:[{t:0,s:[7.559483528137207,5.104858875274658],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:50,s:[7.559483528137207,5.104858875274658],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}}],ix:2},s:{a:1,k:[{t:0,s:[100,100],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:50,s:[121.15,121.15],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:60,s:[121.15,121.15],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:100,s:[121.15,121.15],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:117,s:[121.15,121.15],i:{x:[.5],y:[1.5]},o:{x:[.8],y:[0]}},{t:227,s:[121.15,121.15],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:282,s:[100,100],i:{x:[1],y:[1]},o:{x:[0],y:[0]}}],ix:2},r:{a:1,k:[{t:0,s:[0],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:50,s:[45],i:{x:[1],y:[1]},o:{x:[0],y:[0]}},{t:60,s:[45],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:100,s:[-45],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:117,s:[-45],i:{x:[.5],y:[1.5]},o:{x:[.8],y:[0]}},{t:167,s:[45],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:184,s:[45],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:217,s:[-45],i:{x:[1],y:[1]},o:{x:[0],y:[0]}},{t:227,s:[-45],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:282,s:[0],i:{x:[1],y:[1]},o:{x:[0],y:[0]}}],ix:2},o:{a:0,k:100,ix:2},sk:{a:1,k:[{t:0,s:[0],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:50,s:[0],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}}],ix:2},sa:{a:0,k:0,ix:2}}]}],ip:0,op:350,st:0,bm:0},{ddd:0,ind:3,ty:4,nm:"Circle",sr:1,ks:{o:{a:0,k:100,ix:2},r:{a:0,k:0,ix:2},p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2}},ao:0,hd:!1,shapes:[{ty:"gr",hd:!1,it:[{ty:"sh",hd:!1,d:1,ks:{a:0,k:{c:!1,v:[[0,-10],[10,0],[0,10],[-10,0],[0,-10]],i:[[-5.5228475,0],[0,-5.5228475],[5.5228475,0],[0,5.5228475],[-5.5228475,0]],o:[[5.5228475,0],[0,5.5228475],[-5.5228475,0],[0,-5.5228475],[5.5228475,0]]}}},{ty:"fl",c:{a:0,k:[1,1,1],ix:2},o:{a:0,k:100,ix:2},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tm",s:{a:0,k:0,ix:2},e:{a:0,k:100,ix:2},o:{a:0,k:0,ix:2},m:1,hd:!1},{ty:"tr",hd:!1,p:{a:0,k:[12,12],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2},r:{a:0,k:90,ix:2},o:{a:0,k:100,ix:2},sk:{a:0,k:0,ix:2},sa:{a:0,k:0,ix:2}}]}],ip:0,op:350,st:0,bm:0},{ddd:0,ind:4,ty:4,nm:"Circle",sr:1,ks:{o:{a:0,k:100,ix:2},r:{a:0,k:0,ix:2},p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2}},ao:0,hd:!1,shapes:[{ty:"gr",hd:!1,it:[{ty:"el",hd:!1,d:1,s:{a:0,k:[24,24],ix:2},p:{a:0,k:[0,0],ix:2}},{ty:"fl",c:{a:0,k:[.6941176470588235,.3803921568627451,.9921568627450981],ix:2},o:{a:0,k:100,ix:2},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tm",s:{a:0,k:0,ix:2},e:{a:0,k:100,ix:2},o:{a:0,k:0,ix:2},m:1,hd:!1},{ty:"tr",hd:!1,p:{a:0,k:[12,12],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2},r:{a:0,k:-180,ix:2},o:{a:0,k:25,ix:2},sk:{a:0,k:0,ix:2},sa:{a:0,k:0,ix:2}}]}],ip:0,op:350,st:0,bm:0}],vwe=[],Swe={v:dwe,fr:fwe,ip:mwe,op:pwe,w:gwe,h:hwe,nm:_we,ddd:xwe,assets:ywe,layers:bwe,markers:vwe},Cwe=je(()=>Me(()=>import("./301efb8d-ki1i3i50z4i5ju9g.js"),__vite__mapDeps([183,1])));function gH({animationData:t,animationSegmentToPlay:e,animationLoopCounter:n}){const s=v.useRef(null);return v.useEffect(()=>{var o;(o=s.current)==null||o.playSegments(e,!0)},[n]),i.jsx(Cwe,{animationData:t,lottieRef:s,loop:!1,autoplay:!1})}function wwe(t){return i.jsx(Vs,G(N({width:"8",height:"9",viewBox:"0 0 8 9",fill:"none"},t),{children:i.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.66607 0.376042C8.01072 0.605806 8.10385 1.07146 7.87408 1.4161L3.54075 7.9161C3.40573 8.11863 3.18083 8.24304 2.93752 8.24979C2.69421 8.25654 2.46275 8.1448 2.31671 7.95008L0.150044 5.06119C-0.098484 4.72982 -0.0313267 4.25972 0.300044 4.01119C0.631415 3.76266 1.10152 3.82982 1.35004 4.16119L2.88068 6.20204L6.62601 0.584055C6.85577 0.239408 7.32142 0.146278 7.66607 0.376042Z",fill:"currentColor"})}))}function kwe(t){return i.jsxs(Vs,G(N({width:"4",height:"12",viewBox:"0 0 4 12",fill:"none"},t),{children:[i.jsx("mask",{id:"path-1-inside-1_1975_4008",fill:"currentColor",children:i.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M1 6.5C1 7.05228 1.44772 7.5 2 7.5C2.55228 7.5 3 7.05228 3 6.5V1.5C3 0.947715 2.55228 0.5 2 0.5C1.44772 0.5 1 0.947715 1 1.5L1 6.5ZM0.75 10.25C0.75 10.9404 1.30964 11.5 2 11.5C2.69036 11.5 3.25 10.9404 3.25 10.25C3.25 9.55964 2.69036 9 2 9C1.30964 9 0.75 9.55964 0.75 10.25Z"})}),i.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M1 6.5C1 7.05228 1.44772 7.5 2 7.5C2.55228 7.5 3 7.05228 3 6.5V1.5C3 0.947715 2.55228 0.5 2 0.5C1.44772 0.5 1 0.947715 1 1.5L1 6.5ZM0.75 10.25C0.75 10.9404 1.30964 11.5 2 11.5C2.69036 11.5 3.25 10.9404 3.25 10.25C3.25 9.55964 2.69036 9 2 9C1.30964 9 0.75 9.55964 0.75 10.25Z",fill:"currentColor"}),i.jsx("path",{d:"M1 6.5H-0.25H1ZM1 1.5L-0.25 1.5L-0.25 1.5L1 1.5ZM2 6.25C2.13807 6.25 2.25 6.36193 2.25 6.5H-0.25C-0.25 7.74264 0.757359 8.75 2 8.75V6.25ZM1.75 6.5C1.75 6.36193 1.86193 6.25 2 6.25V8.75C3.24264 8.75 4.25 7.74264 4.25 6.5H1.75ZM1.75 1.5V6.5H4.25V1.5H1.75ZM2 1.75C1.86193 1.75 1.75 1.63807 1.75 1.5H4.25C4.25 0.257359 3.24264 -0.75 2 -0.75V1.75ZM2.25 1.5C2.25 1.63807 2.13807 1.75 2 1.75V-0.75C0.757359 -0.75 -0.25 0.257359 -0.25 1.5L2.25 1.5ZM2.25 6.5L2.25 1.5L-0.25 1.5L-0.25 6.5L2.25 6.5ZM2 10.25H-0.5C-0.5 11.6307 0.619288 12.75 2 12.75V10.25ZM2 10.25V12.75C3.38071 12.75 4.5 11.6307 4.5 10.25H2ZM2 10.25H2H4.5C4.5 8.86929 3.38071 7.75 2 7.75V10.25ZM2 10.25H2V7.75C0.619288 7.75 -0.5 8.86929 -0.5 10.25H2Z",fill:"currentColor",mask:"url(#path-1-inside-1_1975_4008)"})]}))}function Ewe(t){return i.jsx(Vs,G(N({width:"8",height:"9",viewBox:"0 0 8 9",fill:"none"},t),{children:i.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.32256 1.48447C7.59011 1.16827 7.55068 0.695034 7.23447 0.427476C6.91827 0.159918 6.44503 0.199354 6.17748 0.515559L4.00002 3.08892L1.82256 0.515559C1.555 0.199354 1.08176 0.159918 0.765559 0.427476C0.449355 0.695034 0.409918 1.16827 0.677476 1.48447L3.01755 4.25002L0.677476 7.01556C0.409918 7.33176 0.449354 7.805 0.765559 8.07256C1.08176 8.34011 1.555 8.30068 1.82256 7.98447L4.00002 5.41111L6.17748 7.98447C6.44503 8.30068 6.91827 8.34011 7.23447 8.07256C7.55068 7.805 7.59011 7.33176 7.32256 7.01556L4.98248 4.25002L7.32256 1.48447Z",fill:"currentColor"})}))}function Lit({animationLoopCounter:t}){const e=Yo();return i.jsx(gH,{animationData:e?U3e:Swe,animationSegmentToPlay:[0,300],animationLoopCounter:t})}function Dit({animationLoopCounter:t}){const e=Yo();return i.jsx(gH,{animationData:e?J3e:uwe,animationSegmentToPlay:[0,400],animationLoopCounter:t})}const Twe=2e3,hH=.4,Mwe=.45,Awe=.2,Nwe=.1,Iwe=.25;var gn=(t=>(t[t.Running=0]="Running",t[t.Finished=1]="Finished",t[t.Error=2]="Error",t[t.Stopped=3]="Stopped",t[t.Paused=4]="Paused",t))(gn||{});function Bit({conversationMessages:t,icon:e,status:n,text:s,estimatedToolDurationMs:o,animationLoopDurationMs:r=Twe,shouldPersistAfterFinished:a=!1}){const[l,c]=v.useState(n===0?0:n===1&&!a?7:1),[u,d]=v.useState(0);v.useEffect(()=>{n===2?c(8):n===3?c(9):n===4?c(10):n===1?c(l===2?3:7):n===0&&l===10&&(c(2),d(m=>m+1))},[n]);const f=Rwe(l);return v.useEffect(()=>{const m=t[0].id;if(f)return DN.addDelayedRenderingMessage(m),()=>{DN.removeDelayedRenderingMessage(m)}},[f]),m3(()=>{Zu(l)&&d(m=>m+1)},r),l===7&&!a?null:i.jsxs("div",{className:"my-2.5 flex items-center gap-2.5",children:[i.jsx(jwe,{icon:e,status:n,uiState:l,estimatedToolDurationMs:o,animationLoopCounter:u,shouldPersistAfterFinished:a,onFillProgressBarAnimationComplete:()=>c(4),onFinishAnimationComplete:()=>{c(5),setTimeout(()=>{c(a?7:6)},Nwe*1e3)},onHideAnimationComplete:()=>c(7)}),i.jsx(Pwe,{text:s,uiState:l,animationLoopCounter:u,onEnterAnimationComplete:()=>c(2)})]})}const BN=50;function jwe({icon:t,status:e,uiState:n,estimatedToolDurationMs:s,animationLoopCounter:o,shouldPersistAfterFinished:r,onFillProgressBarAnimationComplete:a,onFinishAnimationComplete:l,onHideAnimationComplete:c}){const[u,d]=v.useState(0);m3(()=>{Zu(n)?d(b=>b+BN):n===10&&d(0)},BN);let f,m,p;Zu(n)||n===10?(f="running",m=i.jsx(t,{animationLoopCounter:o}),p="bg-transparent"):n===4||n===5||n===7&&r?(f="finished",m=i.jsx(wwe,{}),p="bg-brand-purple"):e===2?(f="error",m=i.jsx(kwe,{}),p="bg-orange-500"):e===3&&(f="stopped",m=i.jsx(Ewe,{}),p="bg-gray-300");let g={opacity:0,scale:0,rotate:-180,x:0},h={type:"spring",bounce:.3,duration:Mwe},_={opacity:0,scale:.6,rotate:0,x:0};n===0?(g={opacity:0,scale:.5,rotate:-180,x:-8},h={type:"spring",bounce:.3,duration:hH}):n===1?g=!1:n===5&&(_={opacity:0,scale:0,rotate:0,x:0},h={type:"spring",bounce:.3,duration:Iwe});const x=yme(u,s);return i.jsx("div",{className:"relative h-5 w-5 shrink-0",children:i.jsx(In,{onExitComplete:()=>{n===6&&c()},children:f!=null&&i.jsxs(wt.div,{className:q("absolute start-0 top-0 flex h-full w-full items-center justify-center rounded-full text-white",p),initial:g,animate:{opacity:1,scale:1,rotate:0,x:0},exit:_,transition:h,onAnimationComplete:()=>{n===4&&l()},children:[m,(Zu(n)||n===10)&&i.jsx(Cd,{percentage:n===3?100:x,thickness:1.5/23,className:"text-brand-purple absolute start-1/2 top-1/2 h-[23px] w-[23px] -translate-x-1/2 -translate-y-1/2",backgroundStrokeClassName:"stroke-brand-purple/25 dark:stroke-brand-purple/50",transitionDuration:n===3?"".concat((100-x)/100*Awe,"s"):void 0,transitionTimingFunction:n===3?"cubic-bezier(0.55, 0, 1, 1)":void 0,onTransitionEnd:()=>{n===3&&a()}})]},f)})})}function Pwe({text:t,uiState:e,animationLoopCounter:n,onEnterAnimationComplete:s}){const[o,r]=v.useState(t);v.useEffect(()=>{e===2&&r(t)},[n]),v.useEffect(()=>{Zu(e)||r(t)},[e,t]);let a={opacity:0,x:0,y:15},l={type:"spring",bounce:.3,opacity:{duration:.15},y:{duration:.3}};e===0?(a={opacity:0,x:-8,y:0},l={type:"spring",bounce:.3,duration:hH,delay:.15}):e===1&&(a=!1);const c=o!=null?o:void 0;return i.jsx("div",{className:q("relative h-5 w-full leading-5",e===8||e===9?"text-token-text-tertiary":"text-token-text-secondary"),children:i.jsx(In,{children:c!=null&&i.jsx(wt.div,{className:"absolute start-0 top-0 line-clamp-1 overflow-visible",initial:a,animate:{opacity:1,x:0,y:0},exit:{opacity:0,x:0,y:-15},transition:l,onAnimationComplete:()=>{e===0&&s()},children:c},c.toString())})})}function Zu(t){return t===0||t===2||t===3}function Rwe(t){return Zu(t)||t===4||t===5||t===6||t===10}const Owe=re(me,"43e704",16,16);var tP;const FN=Tt.div(tP||(tP=_t(["group start-0 top-0 me-1.5 overflow-hidden mt-1 text-start"]))),xE=t=>{"use forget";var J;const e=D.c(70);let n,s,o,r,a,l,c,u,d,f,m,p,g;e[0]!==t?(J=t,{highlightedCommand:o,status:d,children:s,showWorkUserSetting:f,hideOnlyIfNotInteractedWith:m,defaultExpanded:p,forceExpanded:g,labelPrefix:r,onOpenAnalytics:l,onClick:a,accessory:n,ref:c}=J,u=De(J,["highlightedCommand","status","children","showWorkUserSetting","hideOnlyIfNotInteractedWith","defaultExpanded","forceExpanded","labelPrefix","onOpenAnalytics","onClick","accessory","ref"]),e[0]=t,e[1]=n,e[2]=s,e[3]=o,e[4]=r,e[5]=a,e[6]=l,e[7]=c,e[8]=u,e[9]=d,e[10]=f,e[11]=m,e[12]=p,e[13]=g):(n=e[1],s=e[2],o=e[3],r=e[4],a=e[5],l=e[6],c=e[7],u=e[8],d=e[9],f=e[10],m=e[11],p=e[12],g=e[13]);const h=f===void 0?!1:f,_=m===void 0?!1:m,x=p===void 0?!1:p,b=g===void 0?!1:g,y=s!=null||a!=null,[S]=v.useState(h),[C,w]=v.useState(h||x),[k,E]=v.useState(!1),T=d===gn.Finished||d===gn.Error,M=_?S?!1:!k:!1,A=d===gn.Running?"loading-shimmer":"inline-block";if(T&&M)return null;if(!y){let Q;e[14]!==A?(Q=q(A),e[14]=A,e[15]=Q):Q=e[15];let ne;e[16]!==o?(ne=i.jsx("span",{className:"text-start",children:o}),e[16]=o,e[17]=ne):ne=e[17];let ie;e[18]!==n||e[19]!==r||e[20]!==ne?(ie=i.jsxs("div",{className:"flex items-center justify-start gap-1",children:[r,ne,n]}),e[18]=n,e[19]=r,e[20]=ne,e[21]=ie):ie=e[21];let fe;e[22]!==Q||e[23]!==ie?(fe=i.jsx(FN,{className:Q,children:ie}),e[22]=Q,e[23]=ie,e[24]=fe):fe=e[24];let ae;return e[25]!==c||e[26]!==u||e[27]!==fe?(ae=i.jsx(UN,G(N({ref:c,$canShowWork:!1},u),{children:fe})),e[25]=c,e[26]=u,e[27]=fe,e[28]=ae):ae=e[28],ae}let I;e[29]!==a||e[30]!==l||e[31]!==C?(I=Q=>{C||l==null||l(),w(Lwe),E(!0),a==null||a(Q)},e[29]=a,e[30]=l,e[31]=C,e[32]=I):I=e[32];let j;e[33]!==o?(j=o==null?void 0:o.toString(),e[33]=o,e[34]=j):j=e[34];let R,O,L,B;e[35]===Symbol.for("react.memo_cache_sentinel")?(O={opacity:0},L={opacity:1},B={opacity:0},R={duration:.3},e[35]=R,e[36]=O,e[37]=L,e[38]=B):(R=e[35],O=e[36],L=e[37],B=e[38]);let U;e[39]!==A?(U=q(A),e[39]=A,e[40]=U):U=e[40];let H;e[41]!==o?(H=i.jsx("span",{className:"text-start",children:o}),e[41]=o,e[42]=H):H=e[42];let $;e[43]!==b||e[44]!==a||e[45]!==C?($=!a&&!b&&(C?i.jsx(Owe,{className:"icon-sm"}):i.jsx($o,{className:"icon-sm"})),e[43]=b,e[44]=a,e[45]=C,e[46]=$):$=e[46];let F;e[47]!==n||e[48]!==r||e[49]!==H||e[50]!==$?(F=i.jsxs("div",{className:"flex items-center justify-start gap-1",children:[r,H,$,n]}),e[47]=n,e[48]=r,e[49]=H,e[50]=$,e[51]=F):F=e[51];let z;e[52]!==U||e[53]!==F||e[54]!==I||e[55]!==j?(z=i.jsx(In,{children:i.jsx(FN,{children:i.jsx(wt.button,{onClick:I,initial:O,animate:L,exit:B,transition:R,className:U,children:F},j)})}),e[52]=U,e[53]=F,e[54]=I,e[55]=j,e[56]=z):z=e[56];let W;e[57]!==c||e[58]!==u||e[59]!==z?(W=i.jsx(UN,G(N({ref:c,$canShowWork:!0},u),{children:z})),e[57]=c,e[58]=u,e[59]=z,e[60]=W):W=e[60];let Y;e[61]!==s||e[62]!==b||e[63]!==C?(Y=(C||b)&&s&&i.jsx(wt.div,{initial:"collapsed",animate:"reveal",exit:"collapsed",variants:{collapsed:{translateY:-20,opacity:0,height:0},reveal:{translateY:0,opacity:1,height:"auto"}},transition:{duration:.3,ease:"easeInOut"},className:"overflow-hidden",children:s}),e[61]=s,e[62]=b,e[63]=C,e[64]=Y):Y=e[64];let K;e[65]!==Y?(K=i.jsx(In,{children:Y}),e[65]=Y,e[66]=K):K=e[66];let Z;return e[67]!==W||e[68]!==K?(Z=i.jsxs(i.Fragment,{children:[W,K]}),e[67]=W,e[68]=K,e[69]=Z):Z=e[69],Z};var nP;const UN=Tt.span(nP||(nP=_t(["block first:mt-0 relative\n",""])),({$canShowWork:t})=>t?"text-token-text-secondary hover:text-token-text-primary my-1.5":"text-token-text-secondary");function Lwe(t){return!t}const Dwe=800,Bwe=1200;function Fit(t){"use forget";var z;const e=D.c(59),{nextMessage:n,isLastMessage:s,isRequestActive:o,isLastTurnInConversation:r,clientThreadId:a,turnIndex:l,searchModelQueries:c,showFastNav:u,shouldShowAnimatedBlackDot:d}=t;let f;e[0]!==c?(f=c===void 0?[]:c,e[0]=c,e[1]=f):f=e[1];const m=f,p=u===void 0?!0:u,g=d===void 0?!0:d;let h;e[2]!==s||e[3]!==n?(h=Uwe({isLastMessage:s,nextMessage:n}),e[2]=s,e[3]=n,e[4]=h):h=e[4];const _=h,x=v.useRef(!1),b=Nt(),y=Ze(a,ve.getGizmoId);let S,C;e[5]!==y||e[6]!==n||e[7]!==b?(S=()=>{n&&M9(n)&&!x.current&&(x.current=!0,Fo(b,y))},C=[n,b,y],e[5]=y,e[6]=n,e[7]=b,e[8]=S,e[9]=C):(S=e[8],C=e[9]),v.useEffect(S,C);let w;e[10]!==n?(w=Tp(n),e[10]=n,e[11]=w):w=e[11];const k=w;n!=null&&n.id&&S3e(n==null?void 0:n.id);let E;e[12]!==a?(E={namespace:fg.SearchingState,clientThreadId:a},e[12]=a,e[13]=E):E=e[13];const{profiler:T}=pH(E);let M;e[14]===Symbol.for("react.memo_cache_sentinel")?(M=hs(),e[14]=M):M=e[14];const A=M,I=v.useRef(!1);let j,R;e[15]!==o||e[16]!==T||e[17]!==_?(j=()=>{_&&!I.current&&T&&o&&(I.current=!0,T.logTimingOnce("searching_the_web_shown"))},R=[_,T,o],e[15]=o,e[16]=T,e[17]=_,e[18]=j,e[19]=R):(j=e[18],R=e[19]),v.useEffect(j,R);const[O,L]=v.useState(0),[B,U]=v.useState(!0);let H,$;e[20]!==o||e[21]!==m.length||e[22]!==_||e[23]!==B?(H=()=>{if(o&&_&&m.length>0&&B){let W=null;const Y=setTimeout(()=>{U(!1),W=setInterval(()=>{L(K=>K+1>=m.length?m.length-1:K+1)},Bwe)},Dwe);return()=>{clearTimeout(Y),W!=null&&clearInterval(W)}}(!o||!_||m.length===0)&&!B&&U(!0)},$=[o,_,m.length,B],e[20]=o,e[21]=m.length,e[22]=_,e[23]=B,e[24]=H,e[25]=$):(H=e[24],$=e[25]),v.useEffect(H,$);let F;if(e[26]!==a||e[27]!==k||e[28]!==r||e[29]!==o||e[30]!==n||e[31]!==m||e[32]!==O||e[33]!==g||e[34]!==p||e[35]!==_||e[36]!==B||e[37]!==l){if(F=[],((z=k==null?void 0:k[0])==null?void 0:z.type)==="navigation"&&n&&p){const W=k[0];let Y;e[39]!==a||e[40]!==r||e[41]!==o||e[42]!==n||e[43]!==W||e[44]!==l?(Y=i.jsx(Fwe,{clientThreadId:a,turnIndex:l,nextMessage:n,isRequestActive:o,isLastTurnInConversation:r,navigationCitation:W},"fast-nav"),e[39]=a,e[40]=r,e[41]=o,e[42]=n,e[43]=W,e[44]=l,e[45]=Y):Y=e[45],F.push(Y)}if(_){const W=!o;let Y;e[46]!==W||e[47]!==m||e[48]!==O||e[49]!==B?(Y=W?i.jsx(P,{id:"sjbaxy",defaultMessage:"Stopped searching"}):B?i.jsx(P,{id:"jjx8Qg",defaultMessage:"Searching the web"}):i.jsx(P,{id:"FauKHv",defaultMessage:"Searching for {query}",values:{query:m[O]}}),e[46]=W,e[47]=m,e[48]=O,e[49]=B,e[50]=Y):Y=e[50];const K=Y;if(W){let Z;e[51]!==K?(Z=i.jsx(xE,{highlightedCommand:K,status:gn.Error},"search-gpt-query"),e[51]=K,e[52]=Z):Z=e[52],F.push(Z)}else{if(B&&g){let Q;e[53]===Symbol.for("react.memo_cache_sentinel")?(Q=i.jsx(GCe,{}),e[53]=Q):Q=e[53],F.push(Q)}let Z;e[54]===Symbol.for("react.memo_cache_sentinel")?(Z=q("loading-shimmer text-token-text-secondary inline-block w-full pt-[3px] font-medium select-none",!A&&"truncate"),e[54]=Z):Z=e[54];let J;e[55]!==K?(J=i.jsx("span",{className:Z,children:K}),e[55]=K,e[56]=J):J=e[56],F.push(J)}}e[26]=a,e[27]=k,e[28]=r,e[29]=o,e[30]=n,e[31]=m,e[32]=O,e[33]=g,e[34]=p,e[35]=_,e[36]=B,e[37]=l,e[38]=F}else F=e[38];if(F.length){let W;return e[57]!==F?(W=i.jsx("div",{children:F}),e[57]=F,e[58]=W):W=e[58],W}return null}const Fwe=({clientThreadId:t,turnIndex:e,nextMessage:n,isRequestActive:s,isLastTurnInConversation:o,navigationCitation:r})=>{var d;const{scrollToHeader:a}=(d=bA("searchSources"))!=null?d:{},l=n0e(),c=bA("searchSources"),{openThreadSidebar:u}=bi();return v.useEffect(()=>{Ve.addFirstTiming("render.fastNavigation")},[]),v.useEffect(()=>{var f;l&&c&&u({type:"searchSources",scrollToHeader:a,turnIndex:e,messageId:(f=n==null?void 0:n.id)!=null?f:""})},[]),v.useEffect(()=>{var g;const f=n,m=(g=f.metadata)==null?void 0:g.search_source,p=r.domains.map(h=>h.url);vme.logEvent("Search Tool Request Time To Fast Nav",t,f.id,{search_source:m,urls:p},()=>{m===GQ.InstantQuery&&hSe.logEvent("Search Tool Page Load Time To Fast Nav",{message_id:f.id,urls:p,search_source:m})})},[t,n,r]),s&&o?i.jsx(wt.div,{initial:{opacity:s?0:1,height:s?0:"auto"},animate:{opacity:1,height:"auto"},children:i.jsx(HN,{clientThreadId:t,turnIndex:e,nextMessage:n,navigationCitation:r})}):i.jsx(HN,{clientThreadId:t,turnIndex:e,nextMessage:n,navigationCitation:r})},HN=({clientThreadId:t,turnIndex:e,nextMessage:n,navigationCitation:s})=>{const{toggleThreadSidebar:o}=bi(),r=v.useMemo(()=>({clientThreadId:t,turnIndex:e,messageId:n==null?void 0:n.id}),[t,e,n==null?void 0:n.id]),a=v.useCallback((c,u)=>{var d;o({type:"searchSources",scrollToHeader:u,turnIndex:e,messageId:(d=n==null?void 0:n.id)!=null?d:""})},[o,e,n==null?void 0:n.id]),l=h3e(r);return i.jsx(i3e,{navigation:s,onShowSearchResults:a,trackContentReferenceEvent:l})};function Uwe({isLastMessage:t,nextMessage:e}){return t||!e||e&&!M9(e)}function l0({fullHeight:t,children:e,verticalPadding:n,horizontalPadding:s,overflowY:o,verticalMargin:r="auto",horizontalMargin:a="auto",ref:l}){const[c,u]=X(()=>[Qo(),ln()]),d=!u&&!c;return i.jsx("div",{className:q("text-base",o==="auto"&&"overflow-y-auto",r==="auto"&&"my-auto",a==="auto"&&"mx-auto",d&&n==="first"&&"pt-3",d&&n==="last"&&"pb-10",d&&n==="last-standard"&&"pb-3",d&&n==="large"&&"pt-12",d&&n==="large-bottom"&&"pb-12",d&&n==="small"&&"py-1",c&&n==="first"&&"pt-4.5",c&&n==="large"&&"pt-4.5",c&&n==="last"&&"pb-8",$we,s!=="none"&&"px-(--thread-content-margin)",t&&"h-full"),ref:l,children:e})}function to(s){var o=s,{children:t,className:e}=o,n=De(o,["children","className"]);const r=X(()=>ln()),a=r?"[--thread-content-max-width:100%]":Hwe(),l=r?"mx-auto flex-1 w-full max-w-full":"mx-auto max-w-(--thread-content-max-width) flex-1";return i.jsx("div",G(N({className:q(a,l,e)},n),{children:t}))}function Hwe(){return"[--thread-content-max-width:40rem] @w-lg/main:[--thread-content-max-width:48rem]"}const $we="[--thread-content-margin:--spacing(4)] @w-sm/main:[--thread-content-margin:--spacing(6)] @w-lg/main:[--thread-content-margin:--spacing(16)]";function Uit(){return Je("1803944755").get("enable_combined_login_or_signup_button",!1)}const yE=re(me,"bbf3a9",20,20),Gwe=re(me,"6eb585",20,20);function Vwe({children:t}){return i.jsx("div",{className:"border-token-main-surface-tertiary text-token-text-secondary mb-2 flex max-w-[500px] flex-col gap-4 rounded-2xl border border-solid p-[22px] pt-[18px] shadow-sm",children:t})}function dS({className:t}){return i.jsx("div",{className:q("loading-results-shimmer rounded-md",t),children:""})}function L2({className:t}){return i.jsxs("div",{className:q("flex w-full flex-col gap-1",t),children:[i.jsx(dS,{className:"h-[26px] w-[105px]"}),i.jsx(dS,{className:"h-[42px] w-full"})]})}function Hit(){return i.jsxs(Vwe,{children:[i.jsxs("div",{className:"grid grid-cols-1 gap-2 sm:grid-cols-2",children:[i.jsx(L2,{className:"col-span-1"}),i.jsx(L2,{className:"col-span-1"}),i.jsx(L2,{className:"col-span-1 sm:col-span-2"})]}),i.jsxs("div",{className:"flex w-full justify-between",children:[i.jsx(Se,{disabled:!0,color:"secondary",className:"text-token-text-secondary",children:i.jsx(P,{id:"Sen69P",defaultMessage:"Add a detail"})}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(Se,{disabled:!0,color:"secondary",className:"text-token-text-secondary",children:i.jsx(P,{id:"Uqo7UD",defaultMessage:"Reset"})}),i.jsx(Se,{disabled:!0,children:i.jsx(P,{id:"FVou++",defaultMessage:"Start"})})]})]})]})}function zwe({isFetchingNextPage:t,hasNextPage:e,fetchNextPage:n,bgColor:s="bg-token-bg-primary"}){const o=v.useCallback(r=>{if(t||r==null)return;const a=new IntersectionObserver(l=>{l[0].isIntersecting&&e&&n()});return a.observe(r),()=>{a.disconnect()}},[t,e,n]);return i.jsxs(i.Fragment,{children:[e&&!t&&i.jsx("div",{className:"h-1","data-testid":"infinite-scroll-trigger",ref:o}),i.jsx("div",{className:q("flex w-full items-center justify-center",s),children:t&&i.jsx(Us,{className:"min-h-[50px]"})})]})}function bE(t,e){const[n,s]=v.useState(t),o=v.useRef(tl(r=>s(r),e));return v.useEffect(()=>(o.current=tl(r=>{s(r)},e),()=>{var r;(r=o.current)==null||r.cancel()}),[e]),v.useEffect(()=>{var r;(r=o.current)==null||r.call(o,t)},[t]),n}const Wwe=re(me,"4bb189",16,16),qwe=re(me,"f64f60",20,20),Kwe=new RegExp("((?:\\n|\\r)+)((?:\\s{2,}|\\t)+)?|(```)|([#*_-]+)|([(){}[\\]]+)|([\\x21-\\x2F\\x3A-\\x40\\x5B-\\x60\\x7B-\\x7E]+)|(\\b(?:await|break|case|catch|class|continue|default|define|except|extends|export|finally|implements|import|include|print|private|protected|public|return|span|switch|system|template|throw|type|using|while)\\b)|(\\b(?:async|breakpoint|cin|cmd|console|const|constexpr|cout|def|defn|div|env|fn|func|function|href|html|img|interface|lambda|namespace|println|src|stdout|struct|var|workdir|yield)\\b)","gi"),Ywe=[80.33911781017851,19.194942847935266,-78.96158351597562,31.404985863148777,48.13976028814005,82.48501866379408,15.781632991361631,67.81666324403915],Zwe=-9.860574779222393;function _H(t){return Qwe(Jwe(t),Ywe,Zwe)>0}function Qwe(t,e,n){let s=n;for(let o=0;o<t.length;o++)s+=t[o]*e[o];return s}function Jwe(t){const e=[0,0,0,0,0,0,0,0];if(!t)return e;let n;for(;(n=Kwe.exec(t))!=null;)for(let s=0;s<e.length;s++)n[s+1]&&(e[s]+=n[s+1].length);for(let s=0;s<e.length;s++)e[s]/=t.length;return e}function Xwe(t){var e,n;return{sharedTextdocId:t.shared_textdoc_id,versionInt:(e=t.version)!=null?e:void 0,title:t.name,type:Mc(t.textdoc_type),content:t.content,access:yve(t.access),isModerationBlocked:t.is_moderation_blocked,isAnonifyApiKeyDetected:(n=t.is_anonify_api_key_detected)!=null?n:!1}}const eke=4e4,tke={[et.GUEST]:8e3,[et.FREE]:8e3,[et.FREE_WORKSPACE]:8e3,[et.GO]:8e3,[et.PLUS]:32e3,[et.PRO]:128e3,[et.SELF_SERVE_BUSINESS]:32e3,[et.ENTERPRISE_CBP]:128e3,[et.HC]:128e3,[et.FINSERV]:128e3,[et.EDUCATION_CBP]:32e3,[et.K12]:32e3,[et.QUORUM]:128e3,[et.DEPRECATED_ENTERPRISE]:128e3,[et.DEPRECATED_EDU]:32e3};function $it(t){return Math.round(tke[t]/3*4)}const nke="max-length-toast",xH=tl((t,e,n,s=1.5)=>t.warning(e,{description:n,duration:s,id:nke}),500,{leading:!0,trailing:!1});function Git(t,e,n){xH(t,e.formatMessage(c0.exceededMaxLengthTitle),e.formatMessage(c0.exceededMaxLengthDescription),n)}function ske(t,e,n){xH(t,e.formatMessage(c0.exceededMaxLengthTitle),e.formatMessage(c0.exceededMaxLengthForTruncatedMessageDescription),n)}const c0=we({exceededMaxLengthDescription:{id:"YhSTHh",defaultMessage:"The document might be longer than a canvas can currently handle. To edit, please reduce the length."},exceededMaxLengthForTruncatedMessageDescription:{id:"r87COE",defaultMessage:"The document was truncated because it was too long."},exceededMaxLengthTitle:{id:"v9nHC8",defaultMessage:"Document may exceed maximum length"}}),ux="temp";function yH(t,e){return"".concat(ux,"-tdc-").concat(e,"-").concat(t)}function vE(t){return"".concat(ux,"-td-").concat(t)}function oke(){return"".concat(ux,"-td-user:").concat(Date.now())}function rke(t){return"".concat(ux,"-td-remix:").concat(t)}const xf=tn(ls(()=>({attachedTempTextdocs:{}}))),{setState:Na,getState:ake}=xf,ike=7e3,bH={createTempTextdoc:(t,e,n,s)=>{const o=oke(),r=s?Mc("code/"+s):_H(t)?oi.CODE_OTHER:oi.DOCUMENT;Na(u=>{u.attachedTempTextdocs[o]={tempTextdocId:o,createdAt:Date.now(),status:Po.INFERRING,type:r,title:e,content:t,create_source:n,hasUserEdits:!1}});let a=!1;const l=new Promise(u=>setTimeout(u,ike)).then(()=>{a=!0}),c=ue.safePost("/conversation/textdocs/infer_metadata",{requestBody:{content:t.slice(0,eke)}}).then(({name:u,type:d})=>{a||Na(f=>{f.attachedTempTextdocs[o]&&(f.attachedTempTextdocs[o].title=u,f.attachedTempTextdocs[o].type=Mc(d))})});return Promise.race([l,c]).finally(()=>{Na(u=>{u.attachedTempTextdocs[o]&&(u.attachedTempTextdocs[o].status=Po.PENDING)})}),o},createRemixTempTextdoc:(t,e)=>{const n=rke(t);if(!ake().attachedTempTextdocs[n])return Na(s=>{s.attachedTempTextdocs[n]={tempTextdocId:n,createdAt:Date.now(),status:Po.PENDING,type:oi.LOADING,title:"",content:"",create_source:Wm.REMIX_OF_SHARED_CANVAS,hasUserEdits:!1,remixSharedTextdocId:t}}),ue.safeGet("/textdoc/shared/{shared_textdoc_id}",{parameters:{path:{shared_textdoc_id:t}}}).then(({shared_textdoc:s})=>{const o=Xwe(s);Na(r=>{r.attachedTempTextdocs[n]={tempTextdocId:n,createdAt:Date.now(),status:Po.PENDING,type:o.type,title:e.formatMessage({id:"cuH4su",defaultMessage:"Copy of {title}"},{title:o.title}),content:o.content,create_source:Wm.REMIX_OF_SHARED_CANVAS,hasUserEdits:!1,remixSharedTextdocId:o.sharedTextdocId}})}).catch(()=>{bH.removeTempTextdoc(n),window.location.href=VQ(zQ.CANVAS_NOT_FOUND)}),n},replaceTempTextdocContent:(t,e)=>{Na(n=>{n.attachedTempTextdocs[t].content=e,n.attachedTempTextdocs[t].hasUserEdits=!0})},markAsSent:t=>{Na(e=>{e.attachedTempTextdocs[t].status===Po.PENDING?e.attachedTempTextdocs[t].status=Po.SENT:delete e.attachedTempTextdocs[t]})},markAllAsSent:()=>{Na(t=>{for(const e of Object.keys(t.attachedTempTextdocs))t.attachedTempTextdocs[e].status===Po.PENDING?t.attachedTempTextdocs[e].status=Po.SENT:delete t.attachedTempTextdocs[e]})},removeTempTextdoc:t=>{Na(e=>{delete e.attachedTempTextdocs[t]})}},mg=Wc(({attachedTempTextdocs:t})=>t),lke=Wc(t=>Object.values(t)),SE=Wc(t=>Object.values(t).filter(e=>e.status!==Po.SENT)),cke=()=>SE(mg(xf.getState())),uke=()=>xf(t=>lke(mg(t))),dke=()=>xf(t=>SE(mg(t))),Vit=t=>xf(e=>{if(t)return mg(e)[t]}),zit=()=>xf(t=>SE(mg(t)).length>0),fke=t=>{const[e,n]=v.useState(null),s=v.useCallback(r=>{n(a=>{if(!a)return[r];const l=[...a];for(let c=0;c<a.length;c++)l[c].id===r.id?l[c]=r:c===l.length-1&&l.push(r);return l})},[]),o=v.useCallback(()=>n(null),[]);return cA(K1.TurnComplete,async()=>{await t(),o()}),cA(K1.CanvasMessage,async({message:r})=>{var u;const{message:a}=r,{recipient:l,author:c}=a;(l!=null&&l.startsWith(Yi)||(u=c.name)!=null&&u.startsWith(Yi))&&s(a)}),e};function mke(t,e){return t.replace(new RegExp("\\\\(\\d+)|\\\\g<(?:(\\d+)|(\\D[^>]*))>|((?<!\\\\)\\\\(?:g(?:<[^>]*)?)?$)","gi"),(n,s,o,r,a)=>{var c,u,d;if(s==="0")return"\\0";const l=s!=null?s:o;if(l)return(c=e[A9(l)])!=null?c:"";if(r)return(d=(u=e.groups)==null?void 0:u[r])!=null?d:"";if(a)return"";throw new Error("Unreachable")})}function pke(t,e){var _;let n="",s=0,o=0,r=0,a=0,l=!1;const c=x=>{s+=x},u=x=>{s>o&&(n+=t.slice(o,s)),s=o=s+x},d=x=>{u(0),n+=x},f=()=>{d("\\"),c(1)},m=x=>{if(s+x<t.length)return t[s+x]},p=(x,b=0)=>s+b<t.length&&x===t[s+b],g=x=>{const b=t.indexOf(x,s);if(b===-1)u(t.length-s);else return b-s},h=x=>{let b=1;if(m(x)==="\\"){const S=m(x+1);b=S==="U"?10:S==="u"?6:S==="x"?4:2}const y=s+x+b>t.length;return y&&u(t.length-s),y};for(;s<t.length;){if(p("\\")){if(h(0))continue;const y=(_=m(1))!=null?_:"";if(y==="a")u(2),d("\\x07");else if(y==="A")u(2),d("^");else if(y==="z")u(2),d("$");else if(y==="Z")u(2),d("(?=\\n?$)");else if(y==="U"){const S=t.slice(s+2,s+10);u(10),d("\\u{".concat(parseInt(S,16).toString(16),"}"))}else if(y==="u")c(6);else if(y==="x")c(4);else{let S;l?S=/[0bdDsSwWfnrtv()[\]{}|/\\^-]/.test(y):/[1-9]/.test(y)?S=parseInt(y,10)<=a:S=/[0bBdDsSwWfnrtv()[\]{}|/\\^$.?*+]/.test(y),S?c(2):u(1)}continue}if(p("]")){l?(l=!1,c(1)):f();continue}else if(l){if(p("-")&&h(1))continue;/[()[\]{}|/\\]/.test(t[s])?f():c(1);continue}else if(p("[")){l=!0,c(1),p("]")&&f();continue}if(p("|")&&h(1))continue;if(p("{")){const y=/^\{(?:\d+(?:,\d*)?(\}|$)|$)/.exec(t.slice(s));s>0&&(y==null?void 0:y[1])==="}"?c(y[0].length):s>0&&y&&e?u(y[0].length):f();continue}else if(p("}")){f();continue}if(p("+")){const y=m(-1);y&&/[*+?}]/.test(y)&&m(-2)!=="\\"?u(1):c(1);continue}if(p(")")){r>0?(r--,c(1)):f();continue}if(!p("(")){c(1);continue}if(h(1))continue;if(m(1)!=="?"){r++,a++,c(1);continue}if(h(2))continue;const x=m(2);if(!x){u(2);continue}if(x==="#"){const y=g(")");y&&u(1+y);continue}if(x==="P"){if(m(3)==="="){const y=g(")");if(y){const S=t.slice(s+4,s+y);u(1+y),d("\\k<".concat(S,">"))}}else{const y=g(">");if(y){const S=t.slice(s+4,s+y);if(u(1+y),h(0))continue;d("(?<".concat(S,">")),r++}}continue}if(/[-a-z]/.test(x)){const y=t.indexOf(":",s)>=0,S=g(y?":":")");if(S&&u(1+S),y){if(h(0))continue;d("(?:"),r++}continue}if(x===">"){if(u(3),h(0))continue;d("(?:"),r++;continue}const b=x==="<"?4:3;h(b)||(c(b),r++)}for(n+=t.slice(o,t.length),l&&(n+="]");r-- >0;)n+=")";return n.length>0?n:"(?!)"}function $N(t){const e=[/^`{1,3}\s*$/,/^```[^\n]*\n?/],n=[/\n?`{1,3}\s*$/];for(const s of e)if(s.test(t)){t=t.replace(s,"");break}for(const s of n)if(s.test(t)){t=t.replace(s,"");break}return t}function vH(t){let e=t;return e=e.replace(/\.[^/.]+$/,""),e=e.replace(/_/g," "),e=e.replace(/([a-z])([A-Z])/g,"$1 $2"),e.split(" ").map(s=>s.charAt(0).toUpperCase()+s.slice(1).toLowerCase()).join(" ")}function u0(t,e){return e!=null||t!=null?{modelSelectionPositionRange:e,modelCursorPosition:t}:void 0}function gke(t,e,n){const s=[],o=e.start-e.end+n;for(const r of t){const a=hke(r.at,e,o);a&&s.push(a===r.at?r:G(N({},r),{at:a}))}return s}function hke(t,e,n){return e.start>=t.end?t:e.start<=t.start&&e.end>=t.end?null:e.end<=t.start?n===0?t:{start:t.start+n,end:t.end+n}:e.start<=t.start?{start:e.end+n,end:t.end+n}:e.end>=t.end?{start:t.start,end:e.start}:{start:t.start,end:t.end+n}}const _ke=/[*_-\s\d.\\`]+$/;function fS(t,e){return e?t.replace(_ke,""):t}function SH(t,e){return Ui(t,n=>{for(const s of e){if(s.kind===ns.CREATE){const o=yke(s);vm(n,o)}else{const o=n.textdocById[s.textdocId];if(!o){Ve.addError("Attempted to apply canmore operation to an unknown target id",{textdocOp:s});continue}const r=o.versions[o.versions.length-1],a=CH(r,s);vm(n,a,xke(r,s))}s.textdocId&&(n.latestTextdocId=s.textdocId)}})}function xke(t,e){if(e.author.role===dt.User)return t.messageId?!0:e.createdAt-t.createdAt>3600;switch(e.kind){case ns.REWRITE:return!0;case ns.EDIT:return e.messageId!==t.messageId;case ns.ADD_COMMENT:return!1;case ns.REMOVE_COMMENT:return!1}}function yke(t){var s,o;const e=!!t.isPartial,n=fS(t.content,e);return{textdocId:t.textdocId,versionInt:(s=t.versionInt)!=null?s:null,messageId:(o=t.messageId)!=null?o:null,title:t.title,type:t.type,content:n,createdAt:t.createdAt,status:e?ro.CREATING:ro.COMPLETE,comments:[],modelCursor:u0(t.author.role===dt.Assistant&&t.isPartial?n.length:void 0)}}function bke(t,e){if(!t.isPartial)return;if(t.isPartialRange)return u0(void 0,t.at);const n=t.at.start+e.length;return u0(n)}function CH(t,e){var n,s,o,r,a,l,c,u,d,f;switch(e.kind){case ns.REMOVE_COMMENT:return G(N({},t),{versionInt:(n=e.versionInt)!=null?n:t.versionInt,comments:t.comments.map(m=>m.id===e.commentId?G(N({},m),{status:e.reason===PU.ACCEPT?oS.ACCEPT_INITIATED:oS.DISMISSED}):m)});case ns.REWRITE:{const m=t.status!==ro.COMPLETE||e.isPartial===!0,p=fS(e.content,m),g=e.author.role===dt.Assistant&&e.isPartial?p.length:void 0;return G(N({},t),{versionInt:(s=e.versionInt)!=null?s:t.versionInt,messageId:(o=e.messageId)!=null?o:null,content:p,createdAt:e.createdAt,comments:(r=e.comments)!=null?r:t.comments,status:e.isPartial?ro.REWRITING:ro.COMPLETE,modelCursor:u0(g)})}case ns.EDIT:{const m=e.isPartial&&e.isPartialRange?t.content.slice(e.at.start,e.at.end):fS(e.content,e.isPartial===!0),p=t.content.slice(0,e.at.start)+m+t.content.slice(e.at.end);return G(N({},t),{versionInt:(a=e.versionInt)!=null?a:t.versionInt,messageId:(l=e.messageId)!=null?l:null,content:p,createdAt:e.createdAt,status:e.isPartial?ro.UPDATING:ro.COMPLETE,comments:gke(t.comments,e.at,m.length),modelCursor:bke(e,m)})}case ns.ADD_COMMENT:{const m={id:(c=e.id)!=null?c:e.tempId,tempId:e.tempId,at:e.at,content:(u=e.content)!=null?u:""},p=t.comments.concat(m);return G(N({},t),{versionInt:(d=e.versionInt)!=null?d:t.versionInt,messageId:(f=e.messageId)!=null?f:null,createdAt:e.createdAt,status:e.isPartial?ro.COMMENTING:ro.COMPLETE,comments:p})}}}function vke(t){let e="";const n=t.length;let s=0,o=0;for(;s<n;){let r=t.charCodeAt(s);if(r!==92){s++;continue}if(o<s&&(e+=t.slice(o,s)),s++,s>=n){e+="\\";break}switch(r=t.charCodeAt(s),r){case 110:e+="\n",s++;break;case 116:e+="	",s++;break;case 114:e+="\r",s++;break;case 98:e+="\b",s++;break;case 102:e+="\f",s++;break;case 118:e+="\v",s++;break;case 48:e+="\0",s++;break;case 39:e+="'",s++;break;case 34:e+='"',s++;break;case 92:e+="\\",s++;break;case 120:if(s+2<n){const a=parseInt(t.slice(s+1,s+3),16);if(!isNaN(a)){e+=String.fromCharCode(a),s+=3;break}}e+="\\x",s++;break;case 117:if(s+1<n)if(t.charAt(s+1)==="{"){const a=t.indexOf("}",s+2);if(a!==-1){const l=parseInt(t.slice(s+2,a),16);if(!isNaN(l)&&l<=1114111){e+=String.fromCodePoint(l),s=a+1;break}}}else{const a=parseInt(t.slice(s+1,s+5),16);if(!isNaN(a)){e+=String.fromCharCode(a),s+=5;break}}e+="\\u",s++;break;default:e+="\\"+t.charAt(s),s++;break}o=s}return o<n&&(e+=t.slice(o)),e}const GN=t=>t===" "||t==="\n"||t==="\r"||t==="	";function Ske(t,e=!1){let n=0,s=null;const o=[];if(!t)return[void 0,o];if(e)return[l(),o];try{return[JSON.parse(t),null]}catch(g){return s=g,[l(),o]}function r(){for(;n<t.length&&GN(t[n]);)n++;return n<t.length}function a(g){return r()&&t[n]===g?(n++,!0):!1}function l(){if(r())switch(t[n]){case"{":return f();case"[":return m();case'"':{const[g]=u();return g}case"f":return p("false",!1);case"t":return p("true",!0);case"n":return p("null",null);case"-":case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":return d()}throw s}function c(g,h=!1){return h?vke(g):g}function u(g=!1){const h=n+1;let _=!1;for(n++;n<t.length;){const x=t[n++];if(x==="\\"){if(_=!0,n===t.length||t[n]==="u"&&n+4>=t.length){const b=n-1;return n=t.length,[c(t.slice(h,b),_),!1]}n++;continue}if(x==='"'){let b=n;for(;b<t.length&&GN(t[b]);)b++;if(t[b]==null||t[b]===","||t[b]==="]"||t[b]==="}"||g&&t[b]===":")return[c(t.slice(h,n-1),_),!0]}}return[c(t.slice(h,n),_),!1]}function d(){const g=n;for(;n<t.length&&/[0-9.eE+-]/.test(t[n]);)n++;const h=Number(t.slice(g,n));if(isNaN(h)){if(r())throw s;return 0}return h}function f(){n++;const g={};if(a("}"))return g;for(;r();){const[h,_]=u(!0);if(!_||(o.push(h),!r()))break;if(!a(":"))throw s;if(!r()||(g[h]=l(),!r()))break;if(a("}")){o.pop();break}if(!a(","))throw s;o.pop()}return g}function m(){n++;const g=[];if(a("]"))return g;for(o.push(0);r()&&(g.push(l()),!!r());){if(a("]")){o.pop();break}if(!a(","))throw s;o[o.length-1]=g.length}return g}function p(g,h){const _=n+g.length;if(_<=t.length?t.slice(n,_)===g:g.startsWith(t.slice(n)))return n=_,h;throw s}}function Zi(t,e,n=!1){try{const[s,o]=Ske(t);return[e(s),o]}catch(s){return n&&qc.logError("JSON parsing",s),[void 0,[]]}}function Uf(t,e){return t!=null&&e.every((n,s)=>t[s]===n)}const Cke=xr({type:qi(ks),name:qi(ks),content:qi(ks)}),wke=xr({updates:N9(xr({pattern:qi(ks),multiple:qi(Ba),replacement:qi(ks)}))}),kke=xr({comments:N9(xr({pattern:qi(ks),comment:qi(ks)}))});function wH(t){var s;const e=t.author.name;if(!FD(e))return null;const n=(s=t==null?void 0:t.metadata)==null?void 0:s.canvas;return{function:e,status:Tke(t),textdocId:n==null?void 0:n.textdoc_id,type:(n==null?void 0:n.textdoc_type)&&Mc(n.textdoc_type),versionInt:Mke(n),commentIds:n==null?void 0:n.comment_ids}}function kH(t,e,n){var u,d,f,m,p;const{id:s,author:o,recipient:r,create_time:a}=e;if(!a)throw new Error("Expected a create_time");const l=Ss(e),c=n&&wH(n);if((u=e==null?void 0:e.metadata)!=null&&u.is_redacted||(c==null?void 0:c.status)===jt.REDACTED||l==="The output of this plugin was redacted.")return{function:r,status:jt.REDACTED,messageId:s,author:o,createdAt:a};switch(r){case rs.CreateTextdoc:{const[g,h]=Zi(l,Cke),_=(d=c==null?void 0:c.type)!=null?d:!(g!=null&&g.type)||Uf(h,["type"])?void 0:Mc(g.type);return{function:rs.CreateTextdoc,status:(f=c==null?void 0:c.status)!=null?f:D2(t,e,h!=null),messageId:s,author:o,createdAt:a,textdocId:c==null?void 0:c.textdocId,versionInt:c==null?void 0:c.versionInt,title:g==null?void 0:g.name,type:_,content:g==null?void 0:g.content}}case rs.UpdateTextdoc:{const[g,h]=Zi(l,wke,!t),_=g==null?void 0:g.updates.map((x,b)=>G(N({},x),{isPartialPattern:Uf(h,["updates",b,"pattern"]),isPartial:Uf(h,["updates",b])}));return{function:rs.UpdateTextdoc,status:(m=c==null?void 0:c.status)!=null?m:D2(t,e,h!=null),messageId:s,author:o,createdAt:a,textdocId:c==null?void 0:c.textdocId,versionInt:c==null?void 0:c.versionInt,updates:_}}case rs.CommentTextdoc:{const[g,h]=Zi(l,kke,!t),_=c==null?void 0:c.commentIds,x=g==null?void 0:g.comments.map((b,y)=>G(N({},b),{id:_==null?void 0:_[y],isPartialPattern:Uf(h,["comments",y,"pattern"]),isPartial:Uf(h,["comments",y])}));return{function:rs.CommentTextdoc,status:(p=c==null?void 0:c.status)!=null?p:D2(t,e,h!=null),messageId:s,author:o,createdAt:a,textdocId:c==null?void 0:c.textdocId,versionInt:c==null?void 0:c.versionInt,comments:x}}}}function mS(t){return FD(t==null?void 0:t.recipient)}function Eke(t,e=0){for(let n=e;n<t.length;n++)if(mS(t[n]))return!0;return!1}function D2(t,e,n){var o,r;return((r=(o=e==null?void 0:e.metadata)==null?void 0:o.finish_details)==null?void 0:r.type)==="interrupted"?jt.CANCELED:t?n?jt.STREAMING:jt.WAITING:jt.FAILED}function Tke(t){var n,s;if((n=t==null?void 0:t.metadata)!=null&&n.is_redacted)return jt.REDACTED;if((t==null?void 0:t.content.content_type)===vt.SystemError)return jt.FAILED;const e=(s=t==null?void 0:t.metadata)==null?void 0:s.canvas;return e!=null&&e.is_failure!==!0?jt.COMPLETE:jt.FAILED}function Mke(t){var e;return(e=t==null?void 0:t.version)!=null?e:t==null?void 0:t.version_int}const Ake=5;function CE(t){var n;let e=null;for(let s=0;s<t.length;s++){const o=t[s];if(mS(o)){let r=null;for(let a=s+1;a<t.length;a++){const l=t[a];if(mS(l))break;if(((n=l.author)==null?void 0:n.name)===o.recipient){r=l;break}}e?e.push([o,r]):e=[[o,r]]}}return e}function Nke(t,e,n){let s=null;const o=CE(n);if(!o)return s;for(const[r,a]of o){const l=kH(t,r,a),c=Ike(e,l,t);c&&(e&&(e=SH(e,c)),s?s=s.concat(c):s=c)}return s}const B2=Wc((t,e,n)=>{Ve.addError(e,n)},([t],[e])=>t===e);function Ike(t,e,n){var l,c,u,d,f,m,p,g;if(e.status===jt.FAILED||e.status===jt.CANCELED||!n&&(t==null?void 0:t.isFetchingFromPersistence)&&Object.keys((l=t.textdocById)!=null?l:{}).length===0&&e.function!==rs.CreateTextdoc)return null;if(e.function===rs.CreateTextdoc){if(!e.type)return null;const h=vE(e.messageId),_=e.content&&s0(e.type)?$N(e.content):e.content;return[{kind:ns.CREATE,textdocId:(c=e.textdocId)!=null?c:h,versionInt:e.versionInt,messageId:e.messageId,author:e.author,createdAt:e.createdAt,tempTextdocId:h,title:vH((u=e.title)!=null?u:""),type:e.type,content:_!=null?_:"",isPartial:e.status===jt.STREAMING}]}const o=t==null?void 0:t.latestTextdocId,r=(d=e==null?void 0:e.textdocId)!=null?d:o;if(e.status===jt.COMPLETE&&(o?e!=null&&e.textdocId&&e.textdocId!==o&&B2(e.messageId,"Attempted to parse canmore operation with incorrect client latest target id",{latestTextdocId:o,toolCall:e}):B2(e.messageId,"Attempted to parse canmore operation but latestTextdocId is unset",{toolCall:e})),!r)return null;const a=_a((f=Jw(t,r))==null?void 0:f.versions);if(!a)return e.status===jt.COMPLETE&&B2(e.messageId,"Attempted to parse canmore operation against unknown target id",{textdocId:r}),null;switch(e.function){case rs.UpdateTextdoc:{const h=[],_=(m=e.updates)!=null?m:[];for(let x=0;x<_.length;x++){const b=_[x];if(b.isPartialPattern&&b.pattern&&b.pattern.length<Ake)continue;if(b.pattern===".*"){const C=b.replacement?s0(a.type)?$N(b.replacement):b.replacement:"";return[{kind:ns.REWRITE,textdocId:r,versionInt:e.versionInt,messageId:e.messageId,createdAt:e.createdAt,author:e.author,content:C,isPartial:e.status===jt.STREAMING&&b.isPartial,comments:[]}]}const y=zN(b.pattern,b.isPartialPattern,b.multiple);if(!y)continue;let S=!1;for(const C of VN(a.content,y,b.multiple)){S=!0;const w=WN(C),k=b.replacement&&mke(b.replacement,C);for(const E of h)if(E.at.end<=w.start){if(!E.isPartialRange){const T=E.at.start-E.at.end+E.content.length;w.start+=T,w.end+=T}}else E.at.start<w.end;h.push({kind:ns.EDIT,textdocId:r,versionInt:e.versionInt,messageId:e.messageId,author:e.author,createdAt:e.createdAt,at:w,content:k!=null?k:"",isPartialRange:e.status===jt.STREAMING&&b.isPartialPattern,isPartial:e.status===jt.STREAMING&&b.isPartial})}if(!b.isPartialPattern&&!S)return null}return h.length>0?h:null}case rs.CommentTextdoc:{const h=[],_=(p=e.comments)!=null?p:[];for(let x=0;x<_.length;x++){const b=_[x],y=zN(b.pattern,b.isPartialPattern);if(!y)continue;let S=!1;for(const C of VN(a.content,y)){S=!0;const w=WN(C);w.end>w.start&&h.push({kind:ns.ADD_COMMENT,textdocId:r,versionInt:e.versionInt,messageId:e.messageId,author:e.author,createdAt:e.createdAt,id:b.id,tempId:yH(e.messageId,x),at:w,content:(g=b.comment)!=null?g:"",isPartialRange:e.status===jt.STREAMING&&b.isPartialPattern,isPartial:e.status===jt.STREAMING&&b.isPartial})}if(!b.isPartialPattern&&!S)return null}return h.length>0?h:null}}}function*VN(t,e,n=!1){if(n)yield*Mf(t.matchAll(e));else{const s=t.match(e);s&&(yield s)}}function zN(t,e,n=!1){if(t)try{const s=pke(t,e);return new RegExp(s,n?"gsv":"sv")}catch(s){console.warn("Assistant returned invalid Regexp, dropping",{pattern:t,error:s})}}function WN(t){return{start:t.index,end:t.index+t[0].length}}const qN=(t,e)=>{var o,r,a;for(const l of e){const c=(o=l.metadata)==null?void 0:o.canvas;if(c!=null&&c.user_created_temp_textdoc_id&&(c!=null&&c.textdoc_id)){const{user_created_temp_textdoc_id:u,textdoc_id:d}=c;t=Ui(t,f=>{f.latestTextdocId=d,f.resolveTempTextdocId[u]=d})}}const n=Bc(e,l=>DU(l));for(let l=e.length-1;l>=0;l--){const{metadata:c}=e[l],u=c==null?void 0:c.canvas,d=(a=(r=c==null?void 0:c.open_in_canvas_view)==null?void 0:r.id)!=null?a:u==null?void 0:u.textdoc_id;if(d){t=Ui(t,f=>{f.latestTextdocId=d!=null?d:null,n&&(f.lastCanvasAssistantMessageById[d]=n.id)});break}}const s=CE(e);if(!s)return t;for(const[l,c]of s){const u=c&&wH(c);u&&(t=Ui(t,d=>{if(u.function===rs.CreateTextdoc){const{textdocId:f}=u;f&&(d.resolveTempTextdocId[vE(l.id)]=f)}else if(u.function===rs.CommentTextdoc){const{commentIds:f=[]}=u;for(let m=0;m<f.length;m++){const p=f[m],g=yH(l.id,m);d.resolveTempCommentId[p]=g}}}))}return t},jke=(t,e,n)=>{const s=At(t),o=ve.getTree(s),r=ve.getVariantIds(s,n.messages[0].id);if(r.length<2)return qN(e,n.messages);for(const a of r){const l=o.getLeafFromNode(a).id,c=ve.getConversationLastTurn(s,l);c&&(e=qN(e,c.messages))}return e};function Pke(){return new WeakMap}function EH(t,e,n,s){const o=n[s];let r=e.get(o);if(!r){const a=s===0?RD():EH(t,e,n,s-1);r=jke(t,a,o),e.set(o,r)}return r}function Rke(t,e,n){return n.length===0?null:EH(t,e,n,n.length-1)}function Oke(t,e){const[n]=v.useState(Pke);return v.useMemo(()=>Rke(t,n,e),[n,t,e])}const KN=t=>{if(!t)return;const{messages:e}=t,n=UR(e!=null?e:[],o=>o.author.role===dt.System||o.author.role===dt.Developer),s=n===-1?e:e==null?void 0:e.slice(n+1);if(s&&Eke(s))return s},Lke=({lastTurn:t,clientThreadId:e,isRequestActive:n,persistedTextdocStoreStatus:s})=>{const[o,r]=v.useState(!0),a=n||!o||s!==o0.READY,l=v.useMemo(()=>{if(!t)return null;const u=At(e),d=ve.getTree(u),f=ve.getVariantIds(u,t.messages[0].id);return f.length<2?null:f.map(m=>{const p=d.getLeafFromNode(m).id;return ve.getConversationLastTurn(u,p)})},[e,t]);return[v.useMemo(()=>{var u,d;return!a||!t?null:l?(d=l.flatMap(KN).filter(bp))!=null?d:null:(u=KN(t))!=null?u:null},[a,t,l]),r]};class TH{constructor(e,n,s,o){ye(this,"sentLength",null);ye(this,"sentIsComplete",null);ye(this,"bufferedLength");ye(this,"requestUpdateRaf",null);ye(this,"prevBuffer");ye(this,"nextBuffer");this.targetLength=e,this.isActivelyStreaming=n,this.onUpdate=o,this.bufferedLength=s?0:this.targetLength,s&&!s.isComplete()?(s.nextBuffer=this,this.prevBuffer=s):s!=null&&s.isComplete()&&(this.bufferedLength=this.targetLength)}setTargetLength(e,n){e<this.bufferedLength&&(this.bufferedLength=e),this.targetLength=e,this.isActivelyStreaming=n,this.shouldUpdate()&&this.updateBufferedState()}shouldUpdate(){return!this.prevBuffer&&(this.isBuffering()||this.sentIsComplete!==this.isComplete())}isBuffering(){return this.bufferedLength<this.targetLength}isComplete(){return!this.prevBuffer&&!this.isActivelyStreaming&&!this.isBuffering()}getTotalRemainingLength(){let e=this.targetLength,n=this.nextBuffer;for(;n;)e+=n.targetLength,n=n.nextBuffer;return e-this.bufferedLength}requestUpdate(){this.requestUpdateRaf||this.sentLength===this.bufferedLength&&this.sentIsComplete===this.isComplete()||(this.requestUpdateRaf=window.requestAnimationFrame(()=>{this.requestUpdateRaf=null;const e=this.isComplete();this.sentLength=this.bufferedLength,this.sentIsComplete=e,this.onUpdate(this.bufferedLength,e),e&&this.resolveDependency()}))}resolveDependency(){if(this.nextBuffer){const e=this.nextBuffer;this.nextBuffer=e.prevBuffer=void 0,e.shouldUpdate()&&e.updateBufferedState()}}destroy(){this.resolveDependency(),this.requestUpdateRaf&&(window.cancelAnimationFrame(this.requestUpdateRaf),this.requestUpdateRaf=null)}}const Kl=class Kl extends TH{constructor(){super(...arguments);ye(this,"frameRequestId");ye(this,"prevAddFrameTime")}updateBufferedState(){if(!this.frameRequestId){const n=this.getTotalRemainingLength(),s=Math.max(Kl.MIN_BUFFERING_CHAR_PER_MS,n/Kl.MAX_BUFFERING_LAG_MS);this.frameRequestId=window.requestAnimationFrame(o=>{this.frameRequestId=void 0;const r=this.prevAddFrameTime===void 0?2/Kl.MIN_BUFFERING_CHAR_PER_MS:o-this.prevAddFrameTime,a=Math.floor(s*r);a>0&&(this.prevAddFrameTime=o,this.bufferedLength=Math.min(this.bufferedLength+a,this.targetLength)),this.requestUpdate(),this.shouldUpdate()&&this.updateBufferedState()})}}destroy(){super.destroy(),this.frameRequestId&&window.cancelAnimationFrame(this.frameRequestId)}};ye(Kl,"MAX_BUFFERING_LAG_MS",500),ye(Kl,"MIN_BUFFERING_CHAR_PER_MS",1/30);let pS=Kl;class wE extends TH{constructor(e,n,s,o){super(Q1(e).length,s,o,(r,a)=>n(dF(this.textMessageParts,r),a)),this.textMessageParts=e}onMessagePartsUpdated(e,n){this.textMessageParts=e,this.setTargetLength(Q1(e).length,n)}removeDelayedRender(){return!this.isBuffering()}}const Lu=class Lu extends wE{constructor(n,s,o,r,a){var l,c,u,d;super(n,s,o,r);ye(this,"ALPHA",.1);ye(this,"DIV",1.2);ye(this,"MUL",1.5);ye(this,"minRate");ye(this,"expectedDisplayInterval");ye(this,"maxTokensPerStep");ye(this,"displayNextChunkTimeout");ye(this,"messageIdForDebug");ye(this,"_rate");ye(this,"_lastArrival",null);ye(this,"_lastDrain",0);ye(this,"_drainCarry",0);ye(this,"_lastTargetLength",0);this.updateReactComponentDisplay=s,this.minRate=(l=a==null?void 0:a.minRate)!=null?l:Lu.DEFAULT_MIN_RATE,this.expectedDisplayInterval=(c=a==null?void 0:a.expectedDisplayInterval)!=null?c:Lu.DEFAULT_EXPECTED_DISPLAY_INTERVAL,this.maxTokensPerStep=(u=a==null?void 0:a.maxTokensPerStep)!=null?u:Number.POSITIVE_INFINITY,this._rate=this.minRate,this.messageIdForDebug=(d=a==null?void 0:a.messageId)!=null?d:null}removeDelayedRender(){return this.bufferedLength>1}calculateBufferLength(){const n=performance.now(),s=n/1e3;if(!this.isActivelyStreaming){this.bufferedLength<this.targetLength&&(this.bufferedLength=this.targetLength,this.requestUpdate(),this.messageIdForDebug&&IM.recordAdaptiveBufferSample(this.messageIdForDebug,{kind:"flush",timestampMs:n,receivedCharsTotal:this.targetLength,displayedCharsTotal:this.bufferedLength,queueChars:Math.max(0,this.targetLength-this.bufferedLength)}));return}const o=this.targetLength-this._lastTargetLength;if(this._lastTargetLength=this.targetLength,o>0){if(this._lastArrival!=null){const u=Math.max(s-this._lastArrival,10),d=o/u;this._rate=Math.max(this.minRate,this.ALPHA*d+(1-this.ALPHA)*this._rate)}else this._rate=o;this._lastArrival=s}const r=s-this._lastDrain;this._lastDrain=s;const a=this.targetLength-this.bufferedLength;for(let u=0;u<(r+this._drainCarry)/this.expectedDisplayInterval;u++)a&&a<this._rate*this.MUL&&(this._rate=(a+this._rate*this.MUL)/2),a>this._rate/this.DIV&&(this._rate=(a+this._rate/this.DIV)/2);this._rate=Math.max(this.minRate,this._rate);const l=r*this._rate+this._drainCarry,c=Math.min(Math.floor(l),this.maxTokensPerStep);this._drainCarry=l-c,c>=1&&(this.bufferedLength=Math.min(this.bufferedLength+c,this.targetLength)),this.messageIdForDebug&&IM.recordAdaptiveBufferSample(this.messageIdForDebug,{kind:"sample",rate:this._rate,timestampMs:n,receivedCharsTotal:this.targetLength,displayedCharsTotal:this.bufferedLength,queueChars:Math.max(0,this.targetLength-this.bufferedLength)}),this.requestUpdate()}updateBufferedState(){var n;this.calculateBufferLength(),(n=this.displayNextChunkTimeout)!=null||(this.displayNextChunkTimeout=window.setTimeout(()=>{this.displayNextChunkTimeout=void 0,this.shouldUpdate()&&this.updateBufferedState()},50))}destroy(){super.destroy(),window.clearTimeout(this.displayNextChunkTimeout)}};ye(Lu,"DEFAULT_MIN_RATE",1),ye(Lu,"DEFAULT_EXPECTED_DISPLAY_INTERVAL",.05);let YN=Lu;const Ha=class Ha extends wE{constructor(n,s,o,r){super(n,s,o,r);ye(this,"displayNextChunkTimeout");this.updateReactComponentDisplay=s}updateBufferedState(){var o;const n=this.getTotalRemainingLength(),s=n<Ha.MIN_CHARS_BEHIND_TO_CATCHUP?this.targetLength-this.bufferedLength:Math.ceil(n*Ha.UPDATE_FREQUENCY_MS/Ha.CATCHUP_TIME_MS);this.bufferedLength=Math.min(this.bufferedLength+s,this.targetLength),this.requestUpdate(),(o=this.displayNextChunkTimeout)!=null||(this.displayNextChunkTimeout=window.setTimeout(()=>{this.displayNextChunkTimeout=void 0,this.shouldUpdate()&&this.updateBufferedState()},Ha.UPDATE_FREQUENCY_MS))}destroy(){super.destroy(),window.clearTimeout(this.displayNextChunkTimeout)}};ye(Ha,"MIN_CHARS_BEHIND_TO_CATCHUP",5),ye(Ha,"CATCHUP_TIME_MS",300),ye(Ha,"UPDATE_FREQUENCY_MS",30);let d0=Ha;const kh=15,F2=8;class Wit extends wE{constructor(n,s,o,r,a){var l;super(n,s,o,r);ye(this,"LAG_FACTORS",N({".":kh,"!":kh,"?":kh,"\n":kh,",":F2,":":F2,";":F2,DEFAULT_LAG_FACTOR:.9,BUFFER_FACTOR:.08},typeof window<"u"&&window.__PUNCTUATION_BUFFER_LAG_FACTORS));ye(this,"concatenatedText");ye(this,"displayNextCharTimeout");ye(this,"debug");ye(this,"streamStartMs");ye(this,"averageMsPerChar");ye(this,"_throttledDebugLog",WQ(n=>{console.debug(n)},500,{leading:!0,trailing:!0}));this.updateReactComponentDisplay=s,this.concatenatedText=Q1(this.textMessageParts),this.debug=(l=a==null?void 0:a.debug)!=null?l:!1,this.streamStartMs=0,this.averageMsPerChar=.25,this.debug&&console.debug(["PunctuationBuffer:","[lagFactors: ".concat(JSON.stringify(this.LAG_FACTORS,null,2),"]")].join("\n"))}displayNextChar(){this.displayNextCharTimeout=void 0,this.shouldUpdate()&&(this.bufferedLength++,this.requestUpdate(),this.displayNextCharTimeout=window.setTimeout(()=>this.displayNextChar(),this._getNextCharDelayMs()))}updateBufferedState(){this.concatenatedText=Q1(this.textMessageParts),this.streamStartMs===0?this.streamStartMs=Date.now():this.averageMsPerChar=(Date.now()-this.streamStartMs)/this.targetLength,this.displayNextCharTimeout||this.displayNextChar()}destroy(){super.destroy(),window.clearTimeout(this.displayNextCharTimeout)}_getNextCharDelayMs(){var l;const n=this.concatenatedText[this.bufferedLength-1],s=this.getTotalRemainingLength(),o=1/Math.max(s*this.LAG_FACTORS.BUFFER_FACTOR,1),r=((l=this.LAG_FACTORS[n])!=null?l:this.LAG_FACTORS.DEFAULT_LAG_FACTOR)*o,a=this.averageMsPerChar*r;return this.debug&&this._throttledDebugLog(["PunctuationBuffer:","[lagMs: ".concat(a,"]"),'[lastChar: "'.concat(n,'"]'),"[averageMsPerChar: ".concat(this.averageMsPerChar,"]"),"[lagFactor: ".concat(r,"]"),"[bufferLagFactor: ".concat(o,"]"),"[remainingLength: ".concat(s,"]"),"==="].join("\n")),a}}function Dke(t){return t.type==="text"}class ZN{constructor(e,n,s="",o,r){ye(this,"buffer");ye(this,"text");this.buffer=new e([s],(a,l)=>{const c=a.filter(Dke).map(u=>u.text).join("");n(c,l)},o,r),this.text=s}setText(e,n=!0){this.text=e,this.buffer.onMessagePartsUpdated([this.text],n)}isBuffering(){return this.buffer.isBuffering()}isComplete(){return this.buffer.isComplete()}destroy(){return this.buffer.destroy()}}function Bke(t,e,n){var c;const[s,o]=v.useState(null),r=(c=e==null?void 0:e.length)!=null?c:0,a=r>0,l=v.useRef(new Map);return v.useEffect(()=>{if(e)for(const u of e){const{messageId:d}=u;if(d==null||l.current.has(d))continue;const f=new Fke((m,p)=>{if(o(g=>G(N({},g),{[d]:m})),!!p){for(const[g,h]of l.current.entries())if(g!==d&&!h.isComplete())return;n(!0)}});l.current.set(d,f)}},[r]),v.useEffect(()=>{const u=l.current;return()=>{for(const d of u.values())d.destroy()}},[a]),v.useEffect(()=>{if(!a)return o(null);const u=Zd(e,"messageId");for(const[d,f]of Object.entries(u)){const m=l.current.get(d);m&&m.setTextdocOps(f,!t)}},[a,t,e]),v.useMemo(()=>!a||!s?null:Object.values(s).flatMap(u=>u!=null?u:[]),[a,s])}class Fke{constructor(e){ye(this,"bufferedOps",[]);ye(this,"isFinishedStreaming",!1);ye(this,"rangeBuffers",[]);ye(this,"textBuffers",[]);ye(this,"completeCounters",[]);ye(this,"lastBuffer");this.onUpdate=e}destroy(){for(const e of this.rangeBuffers)e==null||e.destroy();for(const e of this.textBuffers)e==null||e.destroy();this.isFinishedStreaming=!0,this.rangeBuffers=[],this.textBuffers=[],this.completeCounters=[],this.lastBuffer=void 0}isBuffering(){var e,n,s,o;return!(((n=(e=this.lastBuffer)==null?void 0:e.isComplete())==null||n)&&((o=(s=_a(this.completeCounters))==null?void 0:s.isComplete())==null||o))}getNonEmptyBufferedOpsOrNull(){return this.bufferedOps&&this.bufferedOps.length>0?this.bufferedOps:null}isComplete(){return this.isFinishedStreaming&&!this.isBuffering()}setTextdocOps(e,n){if(this.isFinishedStreaming=n,e)for(let s=0;s<e.length;s++){const o=e[s];if(o.author.role===dt.Assistant)switch(o.kind){case ns.CREATE:case ns.REWRITE:this.setAllContentOpAtIndex(o,s);break;case ns.EDIT:case ns.ADD_COMMENT:this.setRangeAndContentOpAtIndex(o,s);break;default:this.setUnbufferedOpAtIndex(o,s)}else this.setUnbufferedOpAtIndex(o,s)}n&&(e?this.isBuffering()||this.onUpdate(this.getNonEmptyBufferedOpsOrNull(),!0):(this.destroy(),this.update(()=>null)))}update(e){const n=this.bufferedOps;this.bufferedOps=UC(n,e),this.bufferedOps!==n&&this.onUpdate(this.getNonEmptyBufferedOpsOrNull(),this.isComplete())}getBufferedAllContentOp(e,n,s){let o=e[s];return o||(o=G(N({},n),{content:""}),e[s]=o),o}setAllContentOpAtIndex(e,n){const{content:s,isPartial:o=!1}=e;let r=this.textBuffers[n];r?(r.setText(s,o),e.kind===ns.CREATE&&this.update(a=>{const l=this.getBufferedAllContentOp(a,e,n);l.textdocId=e.textdocId})):(r=new ZN(d0,(a,l)=>{this.update(c=>{const u=this.getBufferedAllContentOp(c,e,n);u.content=a,u.isPartial=!l})},s,o,this.lastBuffer),this.textBuffers[n]=r,this.lastBuffer=r.buffer)}getBufferedRangeAndContentOp(e,n,s){let o=e[s];return o||(o=G(N({},n),{at:{start:n.at.start,end:n.at.start},content:"",isPartial:!0,isPartialRange:!0}),e[s]=o),o}setRangeAndContentOpAtIndex(e,n){const{at:s,content:o,isPartialRange:r=!1,isPartial:a=!1}=e;let l=this.completeCounters[n];l||(l=new Uke(()=>{this.update(d=>{const f=this.getBufferedRangeAndContentOp(d,e,n);f.isPartial=!1})}),l.update("original",!1),this.completeCounters[n]=l);let c=this.rangeBuffers[n];c?(this.update(d=>{const f=this.getBufferedRangeAndContentOp(d,e,n);if(f.at.start!==s.start){const m=f.at.end-f.at.start;f.at={start:s.start,end:s.start+m}}}),c.setTargetLength(s.end-s.start,r)):(c=new pS(0,r,this.lastBuffer,(d,f)=>{this.update(m=>{const p=this.getBufferedRangeAndContentOp(m,e,n);p.at.end=p.at.start+d,p.isPartialRange=!f}),l.update("range",f)}),this.rangeBuffers[n]=c,this.lastBuffer=c,l.update("range",!1));let u=this.textBuffers[n];u?u.setText(o!=null?o:"",a):(u=new ZN(d0,(d,f)=>{this.update(m=>{const p=this.getBufferedRangeAndContentOp(m,e,n);p.content=d}),l.update("content",f)},o,a,this.lastBuffer),this.textBuffers[n]=u,this.lastBuffer=u.buffer,l.update("content",!1)),l.update("original",!a)}setUnbufferedOpAtIndex(e,n){this.update(s=>{s[n]=e})}}class Uke{constructor(e){ye(this,"keyStates",new Set);ye(this,"onComplete");this.onComplete=e}isComplete(){return this.onComplete==null}update(e,n){if(!n)this.keyStates.add(e);else if(this.keyStates.delete(e),this.keyStates.size===0&&this.onComplete){const s=this.onComplete;this.onComplete=null,s()}}}function Hke(t){const e=te(),n=Dt();pL(()=>{var r,a;const s=ve.getConversationLastTurn(At(t)),o=Bc(s==null?void 0:s.messages,l=>DU(l));((a=(r=o==null?void 0:o.metadata)==null?void 0:r.finish_details)==null?void 0:a.type)==="max_tokens"&&ske(n,e,4)})}function $ke(t){var e;return t?!!((e=t.metadata)!=null&&e.async_completion_id&&t.status==="in_progress"):!1}function Gke(t){var C,w;const[e,n]=Ze(t,k=>[ve.getRequestId(k),ve.getConversationTurns(k)],{disablePerfDetector:!0}),s=Dr(e)||$ke((w=(C=_a(n))==null?void 0:C.messages)==null?void 0:w[0]),o=GU(t),r=Vve(),a=fke(()=>Promise.allSettled([o.refetch(),sl(t)])),[l,c]=Lke({isRequestActive:s,lastTurn:_a(n),clientThreadId:t,persistedTextdocStoreStatus:o.status}),u=a!=null?a:l,d=!!a||s,f=u?a?Wv.NATIVE:Wv.LAST_TURN:null,m=Oke(t,n),p=$U(),g=Zve(),h=uke(),_=v.useMemo(()=>{let k=RD(m);const{textdocVersionById:E,fetchError:T,status:M}=o;return k=Ui(k,A=>{var I,j,R,O;A.fetchError=T,A.isFetchingFromPersistence=M===o0.REFETCHING||M===o0.INITIALIZING;for(const{tempTextdocId:L,status:B,createdAt:U,type:H,title:$,content:F}of h){const z=(I=A.resolveTempTextdocId[L])!=null?I:L;vm(A,{textdocId:z,title:$,type:H,content:F,createdAt:U,versionInt:0,comments:[],messageId:null,status:B===Po.SENT?ro.ATTACHED_SENT:ro.ATTACHED_PENDING})}if(E)for(const[L,B]of E.entries()){A.allTextdocIdSet[L]=L;const U=r.get(L);let H=U&&((j=U.versionInt)!=null?j:Qa)>((R=B.versionInt)!=null?R:Qa)?N(N({},B),U):B;const $=g.filter(z=>z.textdocId===L&&z.kind===ns.REMOVE_COMMENT);let F=H.versionInt;for(const z of $)H=CH(H,z),F=Math.max(F!=null?F:Qa,(O=z.versionInt)!=null?O:Qa);H=G(N({},H),{versionInt:F}),A.textdocById[L]=void 0,vm(A,H)}}),p?Ui(k,A=>{vm(A,p,!1)}):k},[h,m,o,r,p,g]),x=v.useMemo(()=>u!=null&&u.length?Nke(d,_,u):null,[u,d,_]),b=v.useMemo(()=>Ui(_,k=>{for(const E of x!=null?x:[])if(E.messageId&&(k.lastCanvasAssistantMessageById[E.textdocId]=E.messageId),E.kind===ns.CREATE){const{tempTextdocId:T,textdocId:M}=E;T&&M&&(k.resolveTempTextdocId[T]=M)}}),[x,_]),y=Bke(d,x,c);return v.useMemo(()=>y?Ui(SH(b,y),k=>{k.streamingSource=f}):b,[b,f,y])}function qit({clientThreadId:t,children:e}){const n=Gke(t);return Hke(t),i.jsx(PD.Provider,{value:n,children:e})}const MH=re(me,"ac89a7",20,20),pg=re(me,"b140e7",20,20,!0),Kit=[Ye.Mod,"k"],Yit=[Ye.Mod,Ye.Alt,"0"],Zit=[Ye.Mod,Ye.Alt,"1"],Qit=[Ye.Mod,Ye.Alt,"2"],Jit=[Ye.Mod,Ye.Alt,"3"],Xit=[Ye.Mod,Ye.Alt,"4"],elt=[Ye.Mod,Ye.Alt,"5"],tlt="writingBlockSkipSerialize",Vke=/^((`{3,})|(~{3,}))\s*/;var sP;const zke=new RegExp(String.raw(sP||(sP=_t(["^s*:::","{[^}]*}[sS]*?:::"],["^\\s*:::","\\{[^}]*\\}[\\s\\S]*?:::"])),p3),"m");var oP;const Wke=new RegExp(String.raw(oP||(oP=_t(["^s*:::",""],["^\\s*:::",""])),p3),"m");var rP;const qke=new RegExp(String.raw(rP||(rP=_t(["^s*:::","(?:s|{|$)"],["^\\s*:::","(?:\\s|\\{|$)"])),p3)),Kke=/^\s*:::\s*$/;function Yke(t){const e=Zke(t);return!!zke.test(e)}function nlt(t){return!!Wke.test(t)}function slt(t){var r,a;const e=t.split("\n"),n=[],s=[];let o=null;for(const l of e){if(o){if(Kke.test(l)){n.push(...o),o=null;continue}o.push(l);continue}if(s.length>0){n.push(l);const u=gS(l);u&&u.info.trim().length===0&&u.marker===((r=s[s.length-1])==null?void 0:r.marker)&&u.fence.length===((a=s[s.length-1])==null?void 0:a.length)&&s.pop();continue}if(qke.test(l)){o=[];continue}const c=gS(l);if(!c){n.push(l);continue}s.push({marker:c.marker,length:c.fence.length}),n.push(l)}return o&&n.push(...o),n.join("\n")}function Zke(t){const e=t.split("\n"),n=[];let s=null,o=[];for(const r of e){const a=gS(r);if(a){if(!s){s={marker:a.marker,length:a.fence.length},o=[r];continue}o.push(r),a.info.trim().length===0&&a.marker===s.marker&&a.fence.length===s.length&&(o=[],s=null);continue}if(!s){n.push(r);continue}o.push(r)}return s&&n.push(...o),n.join("\n")}function gS(t){const e=t.match(/^\s*/),n=e?e[0]:"",s=t.slice(n.length),o=s.match(Vke);if(!o)return null;const r=o[0].trim(),a=r[0],l=s.slice(r.length).trimStart();return{leadingWhitespace:n,fence:r,marker:a,info:l}}function QN(t,e){const n=[];let s=e;for(;s&&s!==t;){const o=s.parentNode;if(!o)throw new Error("Unable to resolve selection for magic edit.");const r=Array.prototype.indexOf.call(o.childNodes,s);n.unshift(r),s=o}if(s!==t)throw new Error("Unable to resolve selection for magic edit.");return n}function olt(t,e){return{startPath:QN(t,e.startContainer),startOffset:e.startOffset,endPath:QN(t,e.endContainer),endOffset:e.endOffset}}function rlt(t,e,n,s=120){const o=Math.max(0,e-s),r=Math.min(t.length,n+s);return{leading:t.slice(o,e),selection:t.slice(e,n),trailing:t.slice(n,r)}}async function alt(t){const e=new TextEncoder,n=await crypto.subtle.digest("SHA-256",e.encode(t));return Array.from(new Uint8Array(n)).map(s=>s.toString(16).padStart(2,"0")).join("")}const ilt=()=>xe("3700195277")||!1,llt=()=>{const t=fl();return!!(t!=null&&t.includes(Qs.CanvasCodeExecution))||void 0},clt=()=>{const t=fl();return!!(t!=null&&t.includes(Qs.CanvasCodeNetworkAccess))||void 0},ult=()=>xe("2311599525"),dlt=()=>xe("3468624635")||!1,Qke=()=>{const t=xe("3286474446"),e=Ko();return mt()&&t&&!e},flt=(t,e)=>{var m,p;const n=mt(),o=!!((m=X(()=>Fn(Pt(t))).enabledTools)!=null&&m.includes(Ep.Canvas)),r=Ko(),a=Dd(),l=(p=e==null?void 0:e.metadata)==null?void 0:p.b1de6e2_s,c=Hs(),u=!!e&&qQ(e)===KQ.PIMBlock,d=xe("4223274760"),f=((e==null?void 0:e.content.content_type)===vt.Text||(e==null?void 0:e.content.content_type)===vt.MultimodalText)&&Yke(e==null?void 0:e.content.parts.join("\n"));return n&&d&&!f&&(!r||a)&&o&&!l&&!c&&!u};var U2,JN;function Jke(){if(JN)return U2;JN=1;var t=K0();function e(n){return typeof n=="function"?n:t}return U2=e,U2}var H2,XN;function Xke(){if(XN)return H2;XN=1;var t=YQ(),e=Jke(),n=E9(),s=9007199254740991,o=4294967295,r=Math.min;function a(l,c){if(l=n(l),l<1||l>s)return[];var u=o,d=r(l,o);c=e(c),l-=o;for(var f=t(d,c);++u<l;)c(u);return f}return H2=a,H2}var eEe=Xke();const kE=ps(eEe);class tEe{constructor({capacity:e,dispose:n}){ye(this,"capacity");ye(this,"cache");ye(this,"dispose");this.capacity=e,this.cache=new Map,this.dispose=n}get(e){if(!this.cache.has(e))return null;const n=this.cache.get(e);return this.cache.delete(e),this.cache.set(e,n),n}set(e,n){if(this.cache.has(e)){this.cache.delete(e),this.cache.set(e,n);return}if(this.cache.size>=this.capacity){const s=this.cache.keys().next().value;s!=null&&this.delete(s)}this.cache.set(e,n)}delete(e){const n=this.cache.get(e);this.cache.delete(e),this.dispose&&this.dispose(n)}}const nEe=re(me,"71a046",20,20,!0),EE=re(me,"1fa93b",20,20,!0),sEe=re(me,"644ce5",20,20,!0),ll=re(me,"cf3864",20,20),oEe=re(me,"efede7",20,20),AH=re(me,"01bab7",20,20),rEe=300,NH=({collapsed:t,setCollapsed:e,children:n})=>{const s=hs(),o=te(),[r,a]=v.useState(!1);return i.jsxs(wt.div,{className:q("border-token-border-sharp dark:border-token-main-surface-secondary @container relative mb-4","flex cursor-text flex-col items-start overflow-hidden rounded-[14px] border shadow-md contain-inline-size",!s&&"mx-[-16px] sm:mx-[-32px] sm:rounded-[28px]"),initial:!1,animate:{height:t?rEe:"auto"},transition:{duration:.5,ease:"easeInOut"},onAnimationComplete:()=>a(!1),children:[t&&i.jsx("button",{type:"button",className:"absolute inset-0 z-10","aria-label":o.formatMessage({id:"iB4l+i",defaultMessage:"Expand full response"}),"aria-expanded":!t,onClick:()=>{e(!1),a(!0)}}),i.jsx("div",{className:q("p-4",!s&&"sm:p-8"),children:i.jsx(to,{children:n})}),(t||r)&&i.jsx("span",{className:"pointer-events-none absolute inset-x-0 bottom-0 h-12 bg-gradient-to-b from-transparent to-[var(--bg-primary)] dark:to-[var(--bg-elevated-secondary)]"})]})},aEe=1e3;function mlt({children:t,messages:e,clientThreadId:n}){var d,f;const s=e.find(m=>{var p;return(p=m.metadata)==null?void 0:p.is_async_task_result_message}),o=(d=s==null?void 0:s.metadata)==null?void 0:d.async_task_id,r=Zo(m=>o?m.tasks[o]:null),[a,l]=v.useState((f=r==null?void 0:r.collapsed)!=null?f:!1),c=Ze(n,m=>{var p,g;return s&&((p=s.metadata)==null?void 0:p.async_task_id)&&ve.hasContinuedFromAsyncTask(m,s==null?void 0:s.id,(g=s==null?void 0:s.metadata)==null?void 0:g.async_task_id)});if(!s)return null;const u=s.content.content_type==="text"&&s.content.parts.reduce((m,p)=>m+p.length,0)<aEe;return!c||u?i.jsx(i.Fragment,{children:t}):i.jsx("div",{className:"py-2",children:i.jsx(NH,{collapsed:a,setCollapsed:l,children:t})})}function iEe({className:t}){return i.jsxs(i.Fragment,{children:[i.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":!0,focusable:"false",className:q(t,"dark:hidden"),children:[i.jsx("circle",{cx:"8",cy:"8",r:"8",fill:"black",fillOpacity:"0.04"}),i.jsx("circle",{cx:"8",cy:"8",r:"7.7",stroke:"black",strokeOpacity:"0.16",strokeWidth:"0.6"}),i.jsx("path",{d:"M10.8988 4.47241C11.297 4.30205 11.6994 4.7051 11.5287 5.10327L9.85392 9.01147C9.69208 9.3891 9.39072 9.69046 9.0131 9.85229L5.1049 11.5271C4.70673 11.6977 4.30368 11.2954 4.47404 10.8972L6.14982 6.98804C6.31165 6.61062 6.61225 6.31002 6.98966 6.14819L10.8988 4.47241ZM8.00138 7.19995C7.5597 7.20005 7.20167 7.55807 7.20158 7.99976C7.20158 8.44152 7.55964 8.79946 8.00138 8.79956C8.44321 8.79956 8.80119 8.44158 8.80119 7.99976C8.80109 7.55801 8.44315 7.19995 8.00138 7.19995Z",fill:"black",fillOpacity:"0.16"})]}),i.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":!0,focusable:"false",className:q(t,"hidden dark:block"),children:[i.jsx("circle",{cx:"8",cy:"8",r:"8",fill:"white",fillOpacity:"0.2"}),i.jsx("circle",{cx:"8",cy:"8",r:"7.7",stroke:"white",strokeOpacity:"0.65",strokeWidth:"0.6"}),i.jsx("path",{d:"M10.8989 4.47248C11.2971 4.30212 11.6994 4.70517 11.5288 5.10334L9.85399 9.01154C9.69215 9.38917 9.39079 9.69052 9.01317 9.85236L5.10496 11.5272C4.7068 11.6978 4.30375 11.2955 4.47411 10.8973L6.14989 6.98811C6.31171 6.61069 6.61232 6.31009 6.98973 6.14826L10.8989 4.47248ZM8.00145 7.20002C7.55976 7.20012 7.20174 7.55814 7.20164 7.99982C7.20164 8.44159 7.5597 8.79953 8.00145 8.79963C8.44328 8.79963 8.80125 8.44165 8.80125 7.99982C8.80116 7.55808 8.44322 7.20002 8.00145 7.20002Z",fill:"white",fillOpacity:"0.65"})]})]})}function Qu({base64:t,title:e,alt:n,className:s}){var o;return t?i.jsx("img",{src:"data:image/png;base64,".concat(t),alt:(o=n!=null?n:e)!=null?o:"",className:s}):i.jsx(iEe,{className:s})}function plt(t){"use forget";var S;const e=D.c(19),{browserContextMetadata:n,className:s,sourceIndex:o}=t,r=o===void 0?0:o,a=(S=n.sources)==null?void 0:S[r];if(!a)return null;const{url:l,title:c,base64favicon:u}=a;if(!l)return null;let d;e[0]!==c?(d=c==null?void 0:c.trim(),e[0]=c,e[1]=d):d=e[1];const f=d;let m;if(e[2]!==l){let C;e[4]===Symbol.for("react.memo_cache_sentinel")?(C=/^[a-zA-Z][a-zA-Z\d+\-.]*:\/\//,e[4]=C):C=e[4],m=l.replace(C,""),e[2]=l,e[3]=m}else m=e[3];const p=m,g=f&&f.length>0?f:p||l;let h;e[5]!==s?(h=q("no-underline",s),e[5]=s,e[6]=h):h=e[6];let _;e[7]!==u||e[8]!==g?(_=i.jsx(Qu,{base64:u,title:g,alt:"",className:"h-4 w-4 flex-shrink-0"}),e[7]=u,e[8]=g,e[9]=_):_=e[9];let x;e[10]!==g?(x=i.jsx("span",{className:"truncate select-none",children:g}),e[10]=g,e[11]=x):x=e[11];let b;e[12]!==_||e[13]!==x?(b=i.jsx("div",{className:"user-message-bubble-color relative max-w-[var(--user-chat-width,70%)] rounded-3xl px-3.5 py-1.5",children:i.jsxs("div",{className:"flex min-w-0 cursor-pointer items-center gap-2",children:[_,x]})}),e[12]=_,e[13]=x,e[14]=b):b=e[14];let y;return e[15]!==h||e[16]!==b||e[17]!==l?(y=i.jsx("a",{href:l,target:"_blank",rel:"noopener noreferrer",className:h,children:b}),e[15]=h,e[16]=b,e[17]=l,e[18]=y):y=e[18],y}function lEe(t,e,n){var r,a,l,c;if(!t)return n.current=null,null;if(!e)return(a=(r=n.current)==null?void 0:r.message)!=null?a:null;const s=n.current;if(s&&s.threadId===t)return s.message;const o=(c=(l=ve.findFirstFromLeaf(e,u=>u.message.author.role===dt.Tool&&u.message.author.name==="n7jupd.metadata"))==null?void 0:l.message)!=null?c:null;return o&&(n.current={threadId:t,message:o}),o}function IH(t){const e=v.useRef(null);return Ze(t,n=>lEe(t,n,e),{disablePerfDetector:!0})}function cEe(t){var n;const e=IH(t);return((n=e==null?void 0:e.metadata)==null?void 0:n.n7jupd_local_safe_mode)===!0}const glt=re(me,"03424d",20,20),jH=re(me,"e3745b",20,20),uEe=we({heading:{id:"odyssey.openTabs.heading",defaultMessage:"Relevant tabs"},safeModeTooltip:{id:"odyssey.openTabs.safeModeTooltip",defaultMessage:"This tab is in logged out mode"}});function hlt(t){"use forget";const e=D.c(19),{tabs:n,clientThreadId:s,className:o,onTabClick:r,detailed:a,isSafeMode:l}=t,c=l===void 0?!1:l,u=te();let d;e[0]!==u||e[1]!==c?(d=c?u.formatMessage(uEe.safeModeTooltip):void 0,e[0]=u,e[1]=c,e[2]=d):d=e[2];const f=d;if(!n||n.length===0)return null;let m;e[3]!==o?(m=q("flex flex-col",o),e[3]=o,e[4]=m):m=e[4];let p;if(e[5]!==s||e[6]!==a||e[7]!==r||e[8]!==f||e[9]!==n){let h;e[11]!==s||e[12]!==a||e[13]!==r||e[14]!==f?(h=(_,x)=>{var b;return i.jsx("div",{className:q(x>0&&"border-token-border-subtle border-t"),children:i.jsx("button",{type:"button",onClick:()=>{r?r(_):mEe(_,s)},className:"hover:bg-token-bg-secondary focus-visible:ring-token-text-tertiary w-full cursor-pointer p-3 text-start transition-colors focus-visible:ring-2 focus-visible:ring-offset-1 focus-visible:outline-hidden",children:a?i.jsx(fEe,{tab:_,safeModeLabel:f}):i.jsx(dEe,{tab:_,safeModeLabel:f})})},(b=_.id)!=null?b:"".concat(_.url,"-").concat(x))},e[11]=s,e[12]=a,e[13]=r,e[14]=f,e[15]=h):h=e[15],p=n.map(h),e[5]=s,e[6]=a,e[7]=r,e[8]=f,e[9]=n,e[10]=p}else p=e[10];let g;return e[16]!==m||e[17]!==p?(g=i.jsx("div",{className:m,children:p}),e[16]=m,e[17]=p,e[18]=g):g=e[18],g}const dEe=t=>{"use forget";var x,b,y;const e=D.c(25),{tab:n,safeModeLabel:s}=t;let o;e[0]!==n.url?(o=_f(n.url),e[0]=n.url,e[1]=o):o=e[1];const r=o,a=(x=r==null?void 0:r.Icon)!=null?x:null;let l;e[2]!==n.title||e[3]!==n.url?(l=((b=n.title)==null?void 0:b.trim())||f0(n.url),e[2]=n.title,e[3]=n.url,e[4]=l):l=e[4];const c=l;let u;e[5]!==(r==null?void 0:r.type)||e[6]!==n.url?(u=(y=r==null?void 0:r.type)!=null?y:f0(n.url),e[5]=r==null?void 0:r.type,e[6]=n.url,e[7]=u):u=e[7];const d=u;let f;e[8]!==a||e[9]!==(r==null?void 0:r.type)||e[10]!==n.url?(f=a?i.jsx(a,{className:"icon-md",alt:r==null?void 0:r.type}):i.jsx(Ns,{url:n.url,size:32,minSize:16,className:"size-5 rounded-md",showLoadingAnimation:!0,applySizeToImg:!1,fallback:i.jsx(jr,{className:"size-5"})}),e[8]=a,e[9]=r==null?void 0:r.type,e[10]=n.url,e[11]=f):f=e[11];let m;e[12]!==c?(m=i.jsx("span",{className:"text-token-text-primary line-clamp-1 text-sm font-medium",children:c}),e[12]=c,e[13]=m):m=e[13];let p;e[14]!==d?(p=i.jsx("span",{className:"text-token-text-secondary line-clamp-1 text-xs",children:d}),e[14]=d,e[15]=p):p=e[15];let g;e[16]!==m||e[17]!==p?(g=i.jsxs("div",{className:"flex min-w-0 flex-1 flex-col",children:[m,p]}),e[16]=m,e[17]=p,e[18]=g):g=e[18];let h;e[19]!==s?(h=s?i.jsx(PH,{label:s}):null,e[19]=s,e[20]=h):h=e[20];let _;return e[21]!==f||e[22]!==g||e[23]!==h?(_=i.jsxs("div",{className:"flex items-center gap-3",children:[f,g,h]}),e[21]=f,e[22]=g,e[23]=h,e[24]=_):_=e[24],_},fEe=t=>{"use forget";var x,b,y;const e=D.c(25),{tab:n,safeModeLabel:s}=t;let o;e[0]!==n.url?(o=_f(n.url),e[0]=n.url,e[1]=o):o=e[1];const r=o,a=(x=r==null?void 0:r.Icon)!=null?x:null;let l;e[2]!==n.title||e[3]!==n.url?(l=((b=n.title)==null?void 0:b.trim())||f0(n.url),e[2]=n.title,e[3]=n.url,e[4]=l):l=e[4];const c=l;let u;e[5]!==(r==null?void 0:r.type)||e[6]!==n.url?(u=(y=r==null?void 0:r.type)!=null?y:f0(n.url),e[5]=r==null?void 0:r.type,e[6]=n.url,e[7]=u):u=e[7];const d=u;let f;e[8]!==a||e[9]!==(r==null?void 0:r.type)||e[10]!==n.url?(f=a?i.jsx(a,{className:"icon-md",alt:r==null?void 0:r.type}):i.jsx(Ns,{url:n.url,size:32,minSize:16,className:"size-5 rounded-md",showLoadingAnimation:!0,applySizeToImg:!1,fallback:i.jsx(jr,{className:"size-5"})}),e[8]=a,e[9]=r==null?void 0:r.type,e[10]=n.url,e[11]=f):f=e[11];let m;e[12]!==c?(m=i.jsx("span",{className:"text-token-text-primary line-clamp-1 text-sm font-medium",children:c}),e[12]=c,e[13]=m):m=e[13];let p;e[14]!==d?(p=i.jsx("span",{className:"text-token-text-secondary line-clamp-1 text-xs",children:d}),e[14]=d,e[15]=p):p=e[15];let g;e[16]!==m||e[17]!==p?(g=i.jsxs("div",{className:"flex min-w-0 flex-1 flex-col",children:[m,p]}),e[16]=m,e[17]=p,e[18]=g):g=e[18];let h;e[19]!==s?(h=s?i.jsx(PH,{label:s}):null,e[19]=s,e[20]=h):h=e[20];let _;return e[21]!==f||e[22]!==g||e[23]!==h?(_=i.jsxs("div",{className:"flex items-center gap-3 px-3",children:[f,g,h]}),e[21]=f,e[22]=g,e[23]=h,e[24]=_):_=e[24],_},PH=t=>{"use forget";const e=D.c(6),{label:n}=t;let s;e[0]===Symbol.for("react.memo_cache_sentinel")?(s=i.jsx(jH,{className:"icon-sm","aria-hidden":"true"}),e[0]=s):s=e[0];let o;e[1]!==n?(o=i.jsx("span",{className:"text-token-text-tertiary inline-flex items-center justify-center",role:"img","aria-label":n,children:s}),e[1]=n,e[2]=o):o=e[2];let r;return e[3]!==n||e[4]!==o?(r=i.jsx(St,{label:n,side:"top",className:"ms-auto inline-flex items-center justify-center",children:o}),e[3]=n,e[4]=o,e[5]=r):r=e[5],r};function mEe(t,e){if(t!=null&&t.url){try{const n=Lt(e);if(n){const s=up();s==null||s.openAgentTabs(n,[t.url]);return}}catch(n){ws.error("openTabs via host failed",{error:n})}try{const n=window.open(t.url,"_blank","noopener,noreferrer");n==null||n.focus()}catch(n){ws.error("openTabs fallback failed",{error:n})}}}function f0(t){try{return new URL(t).hostname.replace(/^www\./,"")}catch(e){return t}}const pEe=t=>Ze(t,e=>{var n,s;return(s=(n=e==null?void 0:e.disabledToolIds)==null?void 0:n.includes(ds.CANMORE))!=null?s:!1}),gEe=(t,e)=>{var u;const n=Ze(t,d=>ve.getLastMessageSystemHints(d).includes(Zr.CANVAS)),s=Zp({clientThreadId:t}),o=pEe(t),r=oE(),a=(u=_a(e))==null?void 0:u.id,l=e.some(d=>{var f,m;return(m=(f=d.metadata)==null?void 0:f.canvas)==null?void 0:m.canvas_opt_in});return{isVisible:!n&&!o&&!r&&!l&&!!a,onClick:async d=>{var h;if(!a)return;d.stopPropagation(),Qw();const f=[ds.CANMORE];s({sourceEvent:d,nodeId:a,appendMessages:[g3("The user has requested the canvas tool be disabled for this conversation. You should not call the tool again.",{disable_tool_ids:f,exclude_after_next_user_message:!0})]});const m=At(t),p=ve.getConversationTurns(m,a).length,g=(h=ve.getParentPromptNode(m,a))==null?void 0:h.message.id;qc.logEventWithStatsig("Canvas Opt Out Clicked","chatgpt_canvas_opt_out_clicked",{num_turns:String(p),conversation_id:Lt(t),message_id:g}),pt(t,_=>{_.disabledToolIds=f})}}},hEe=({clientThreadId:t,allTurnMessages:e})=>{const{isVisible:n,onClick:s}=gEe(t,e);return n?i.jsx("button",{onClick:s,className:"text-token-text-secondary hover:text-token-text-primary mb-2 w-full",children:i.jsxs("div",{className:"flex items-center rounded-xl",children:[i.jsx(P,{id:"aa5Dyk",defaultMessage:"Answer in chat instead"}),i.jsx(pg,{className:"icon text-token-text-secondary"})]})}):null},gg=t=>{const{closeThreadSidebar:e}=bi();return()=>{t!=="canvas"&&Qw(),t!=="caterpillar"&&t!=="summarizer"&&t!=="searchSources"&&t!=="entity"&&e()}},_Ee=(t,e)=>t!=null&&t.textdocId?t.textdocId:(t==null?void 0:t.function)===rs.CreateTextdoc?vE(t.messageId):e!=null?e:void 0,xEe=({toolCall:t,clientThreadId:e,isRequestActive:n})=>{const s=te(),o=vge(),r=_Ee(t,o),a=G_(r),l=Qp(),c=Xw(r),u=Sge(),d=oE(),f=Nt(),m=bge(),p=Cge({textdocId:r,assistantMessageId:t==null?void 0:t.messageId}),g=Wme(()=>{const E=Fn(Pt(e)).id;qc.logError("Textdoc missing from conversation",null,{clientThreadId:e,modelId:E,textdocId:r,latestTextdocId:o,toolCallTextdocId:t==null?void 0:t.textdocId,toolCallStatus:t==null?void 0:t.status,toolCallFunction:t==null?void 0:t.function})});v.useEffect(()=>{!n&&(t==null?void 0:t.status)===jt.COMPLETE&&!m&&!a&&g()},[t,a,n,m,g]);const h=gg("canvas");if(!t)return null;const _=t.status===jt.REDACTED||!m&&!a&&t.status!==jt.STREAMING&&t.status!==jt.WAITING;let x,b,y;if(t.status!==jt.REDACTED&&t.status!==jt.FAILED&&!_&&r){const E=!p&&t.status===jt.COMPLETE;x=()=>{h(),E&&t.versionInt?cc({type:lc.Textdoc,textdocId:r,history:{version:t.versionInt},shouldRunCodeOnOpen:!0}):al(r)},b=()=>{h(),E&&t.versionInt?cc({type:lc.Textdoc,textdocId:r,history:{version:t.versionInt},shouldRunCodeOnOpen:!0}):cc({type:lc.Textdoc,textdocId:r,shouldRunCodeOnOpen:!0})},y=()=>{E&&t.versionInt&&f.prefetchQuery(UU(r,t.versionInt))}}const S=yEe(t,a);if(t.function===rs.CreateTextdoc&&!(d&&(!p||l))){if(t.status===jt.STREAMING||t.status===jt.WAITING||t.status===jt.COMPLETE){const T=m===!0&&(t.status===jt.STREAMING||t.status===jt.WAITING);return i.jsx(sS,{textdocId:r,name:S,clientThreadId:e,tag:t.type,icon:Nu(t.type,!1),iconSelected:Nu(t.type,!0),isCanvasOpen:l,isInlinePreview:p,isFetching:T,isFocused:c,isStreaming:t.status===jt.STREAMING,onClick:x,onPreview:b})}let E;switch(t.status){case jt.FAILED:E=s.formatMessage({id:"SNarKX",defaultMessage:"Failed to generate"});break;case jt.CANCELED:E=s.formatMessage({id:"1A6W36",defaultMessage:"Stopped generating"});break;case jt.REDACTED:E=i.jsx(St,{align:"start",label:s.formatMessage({id:"F6q1k7",defaultMessage:"Removed from shared conversation"}),children:s.formatMessage({id:"BqyYDu",defaultMessage:"Created document"})});break}return i.jsx(e5,{children:E})}const C=_||t.status===jt.REDACTED,w=d?C?null:S:u&&!C?S:null,k=i.jsxs(e5,{onClick:x,onMouseOver:y,isStreaming:t.status===jt.STREAMING,children:[d&&i.jsx(vo,{}),t.function===rs.CommentTextdoc?vEe(s,t,w):t.function===rs.CreateTextdoc?w!=null?w:s.formatMessage({id:"/402F4",defaultMessage:"New document"}):bEe(s,t,w)]});return p&&!l&&!_&&r?i.jsx(sS,{textdocId:r,clientThreadId:e,name:S,tag:a==null?void 0:a.type,icon:Nu(a==null?void 0:a.type,!1),iconSelected:Nu(a==null?void 0:a.type,!0),isCanvasOpen:l,isFetching:!1,isFocused:c,isInlinePreview:!0,isStreaming:t.status===jt.STREAMING,onPreview:b,onClick:r!=null?()=>{h(),al(r)}:void 0}):k};function yEe(t,e){return e!=null&&e.title?e.title:t.function===rs.CreateTextdoc&&t.title?vH(t.title):null}const e5=({isStreaming:t=!1,onClick:e,onMouseOver:n,children:s})=>i.jsx("button",{disabled:!e,className:q(t&&"loading-shimmer","text-token-text-secondary flex min-h-5 w-fit flex-row items-center gap-1.5 pt-[3px] text-start select-none",e&&"hover:text-token-text-primary"),onClick:e,onMouseOver:n,children:s}),RH=9;function bEe(t,e,n){var o;if(e.status===jt.STREAMING)return n?t.formatMessage({id:"W2xN1Z",defaultMessage:"Editing {documentTitle}"},{documentTitle:n}):t.formatMessage({id:"8taq8v",defaultMessage:"Editing"});if(e.status===jt.FAILED)return n?t.formatMessage({id:"UjJKYZ",defaultMessage:"Failed to edit {documentTitle}"},{documentTitle:n}):t.formatMessage({id:"kWUVkg",defaultMessage:"Failed to edit"});if(e.status===jt.CANCELED)return n?t.formatMessage({id:"TmSrCd",defaultMessage:"Stopped editing {documentTitle}"},{documentTitle:n}):t.formatMessage({id:"bYV7xA",defaultMessage:"Stopped editing"});const s=(o=e.updates)==null?void 0:o.length;return e.status===jt.REDACTED||!s||s>RH?n?t.formatMessage({id:"n+G/ct",defaultMessage:"Edited {documentTitle}"},{documentTitle:n}):t.formatMessage({id:"aegqpL",defaultMessage:"Edited"}):n?t.formatMessage({id:"osYMSb",defaultMessage:"{numEdits, plural, one {Edited {documentTitle}} other {Made {numEdits} edits to {documentTitle}}}"},{numEdits:s,documentTitle:n}):t.formatMessage({id:"xJD3WR",defaultMessage:"{numEdits, plural, one {Edited} other {Made {numEdits} edits}}"},{numEdits:s})}function vEe(t,e,n){var o;if(e.status===jt.STREAMING)return n?t.formatMessage({id:"8xQH/P",defaultMessage:"Commenting on {documentTitle}"},{documentTitle:n}):t.formatMessage({id:"5yqLeN",defaultMessage:"Commenting"});if(e.status===jt.FAILED)return n?t.formatMessage({id:"Rl821S",defaultMessage:"Failed to comment on {documentTitle}"},{documentTitle:n}):t.formatMessage({id:"W007jt",defaultMessage:"Failed to comment"});if(e.status===jt.CANCELED)return n?t.formatMessage({id:"bozPdq",defaultMessage:"Stopped commenting on {documentTitle}"},{documentTitle:n}):t.formatMessage({id:"hyBGa7",defaultMessage:"Stopped commenting"});const s=(o=e.comments)==null?void 0:o.length;return e.status===jt.REDACTED||!s||s>RH?n?t.formatMessage({id:"LXEzK7",defaultMessage:"Commented on {documentTitle}"},{documentTitle:n}):t.formatMessage({id:"KeMYhy",defaultMessage:"Commented"}):n?t.formatMessage({id:"Ql5lPq",defaultMessage:"{numComments, plural, one {Commented on {documentTitle}} other {Added {numComments} comments on {documentTitle}}}"},{numComments:s,documentTitle:n}):t.formatMessage({id:"FHtyJQ",defaultMessage:"{numComments, plural, one {Commented} other {Added {numComments} comments}}"},{numComments:s})}const _lt=({messages:t,isRequestActive:e,isFinalTurn:n,allTurnMessages:s,clientThreadId:o})=>{const r=v.useMemo(()=>{const l=CE(s);if(!l)return null;const c=new Set(t.map(u=>u.id));return l.filter(([u])=>c.has(u.id))},[s,t]),a=v.useMemo(()=>r?r.map(([l,c])=>kH(e,l,c)).filter(Boolean):[],[r,e]);return a.length===0?null:i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"flex flex-col gap-2 [&:not(:first-child)]:mt-2",children:a.map(l=>i.jsx(xEe,{toolCall:l,clientThreadId:o,isRequestActive:e},l.messageId))}),n&&i.jsx(hEe,{clientThreadId:o,allTurnMessages:s})]})};function SEe(t,e,n){const s=Zo(l=>!!(t&&l.tasks[t])),o=gg("caterpillar"),r=Ze(n,l=>ve.findNode(l,c=>{var u,d,f;return((u=c.message.metadata)==null?void 0:u.async_task_id)===t&&(((d=c.message.metadata)==null?void 0:d.b1de6e2_rm)===!0||((f=c.message.metadata)==null?void 0:f.is_async_task_result_message)===!0)})!=null),{clearSystemHintModeTrigger:a}=Cl();v.useEffect(()=>{var p;if(s||!t||!e)return;const{async_task_created_at:l,async_task_prompt:c,async_task_title:u,async_task_original_message_id:d}=(p=e.metadata)!=null?p:{},f=Lt(n),m={originalConversationId:f!=null?f:n,taskId:t,title:u!=null?u:"",prompt:c!=null?c:"",createdAt:l!=null?l:"",updatedAt:l!=null?l:"",status:wn.UNDETERMINED,originalConversationUserMessageId:d};Er.setTask(t,m),a(Ke.Research)},[s,t,e,n,o,a,r])}const hS=re(me,"23f3be",20,20),CEe=re(Cp,"409a38",24,24),wEe=re(Cp,"cb060c",24,24),kEe=re(me,"ebc49a",20,20),EEe=re(me,"5d7f10",24,24),OH=re(me,"ac37b7",20,20),TEe={pdf:wEe,sheet:S1,excel:P9,doc:vo,audio:OH,video:kEe,image:EEe,csv:S1,word:j9,forms:CEe,slides:c3,powerpoint:I9,other:jr};function TE(t){var e;return(e=TEe[t])!=null?e:jr}const MEe=({children:t,iconType:e})=>{const n=TE(e);return i.jsxs("div",{className:"flex items-start gap-2 text-start text-wrap",children:[i.jsx("div",{className:"mt-[1px] inline-flex h-5 w-5 shrink-0 items-center justify-end gap-2.5 pt-[3px]",children:i.jsx(n,{className:"text-token-text-primary relative h-5 w-5"})}),t]})},xlt=({row:t})=>i.jsx(MEe,{iconType:t.iconType,children:i.jsx("div",{className:"text-token-text-primary flex-1 truncate text-base",children:t.rowText})});function AEe(){return ut({queryKey:["clientStrings"],queryFn:()=>ue.safeGet("/client/strings"),staleTime:1/0,enabled:mt()})}const LH=re(xn,"03f099",24,24);function DH(t,e,n,s){"use forget";const o=D.c(7),r=e===void 0?"small":e,{platformConnectors:a}=t_(!1,An.DEEP_RESEARCH);let l;e:try{let d;if(s&&(d=R9[s.toLowerCase()]),!d){l=null;break e}const f=un[d];if(!f){l=null;break e}let m;o[0]!==f||o[1]!==a?(m=a.get(f),o[0]=f,o[1]=a,o[2]=m):m=o[2];const p=m;if(!p){l=null;break e}l=p}catch(d){l=null}const c=l;let u;return o[3]!==n||o[4]!==c||o[5]!==r?(u=c?i.jsx(Vc,{connector:c,size:r,className:n}):null,o[3]=n,o[4]=c,o[5]=r,o[6]=u):u=o[6],u}function NEe({url:t,size:e="small",className:n,fallback:s,connectorSource:o}){const r=DH(t,e,n,o);return r!=null?r:s}function ylt(t,e=0){if(!t)return!1;const n=t.getBoundingClientRect();return n.top+e>=0&&n.left+e>=0&&n.bottom-e<=(window.innerHeight||document.documentElement.clientHeight)&&n.right-e<=(window.innerWidth||document.documentElement.clientWidth)}function BH(){var o,r,a,l,c,u,d;const t=te(),{data:e}=AEe(),n=e==null?void 0:e.caterpillar_status_message_texts,s={cancelledMessage:t.formatMessage({id:"ZVkPyf",defaultMessage:"Task cancelled"}),failureMessage:t.formatMessage({id:"3BZzpX",defaultMessage:"Something went wrong"}),completedMessage:t.formatMessage({id:"nZ8w6W",defaultMessage:"Completed in"}),failureBannerContentMessage:t.formatMessage({id:"9peWdy",defaultMessage:"There was an error"}),waitingInQueueMessage:t.formatMessage({id:"k4vqxH",defaultMessage:"Your request is queued up. It will be completed shortly."}),startingMessage:t.formatMessage({id:"+jIjI+",defaultMessage:"Starting Task"}),caterpillarNoneSelectedMessage:t.formatMessage({id:"cLZOtM",defaultMessage:"Choose at least one"})};return n?{cancelledMessage:(o=n.cancelled_message)!=null?o:s.cancelledMessage,failureMessage:(r=n.failure_message)!=null?r:s.failureMessage,completedMessage:(a=n.completed_message)!=null?a:s.completedMessage,failureBannerContentMessage:(l=n.failure_banner_content_message)!=null?l:s.failureBannerContentMessage,waitingInQueueMessage:(c=n.waiting_in_queue_message)!=null?c:s.waitingInQueueMessage,startingMessage:(u=n.starting_message)!=null?u:s.startingMessage,caterpillarNoneSelectedMessage:(d=n.none_selected_dr_message)!=null?d:s.caterpillarNoneSelectedMessage}:s}function FH(t){const e=new Map;return u3(t).forEach(s=>{if(s.type==="website")try{const o=i.jsx(NEe,{url:s.url,size:"xsmall",className:"icon-sm",fallback:i.jsx(Ns,{url:s.url,className:"icon-sm bg-token-main-surface-primary rounded-full object-cover",size:32,minSize:20,fallback:i.jsx(LH,{className:"icon-sm text-token-text-quaternary"})})}),r=new URL(s.url).hostname;if(e.has(r)){const a=e.get(r);a&&(a.count+=1)}else e.set(r,{url:s.url,count:1,icon:o})}catch(o){}else if(!e.has(s.name)){const o=TE(s.fileType);e.set(s.name,{url:s.name,count:1,icon:i.jsx(o,{className:"text-token-text-primary relative h-4 w-4"})})}}),Array.from(e.values())}function IEe(t){const e=t.map(n=>n.type==="websiteOpen"?{url:n.url,type:"website"}:n.type==="fileOpen"&&n.fileName?{name:n.fileName,type:"file",fileType:n.iconType}:null);return FH(e)}function jEe(t){return t.reduce((e,n)=>{var s,o;if(n.type==="search"){const r=(o=(s=n.urls)==null?void 0:s.length)!=null?o:0;return e+r}return e},0)}function PEe(t){var s;const e=(s=t.metadata)==null?void 0:s.content_references;if(!e)return[];const n=e.map(o=>o.type==="webpage_extended"?o.icon_type?{name:o.title,type:"file",fileType:o.icon_type}:{url:o.url,type:"website"}:null);return FH(n)}function blt(t){var e;return{type:O9,groups:(e=t==null?void 0:t.filter(n=>n.type==="summary").map(n=>{var s;return{type:n.message?(s=ZQ(n.message))!=null?s:hd.Text:hd.Text,messages:n.message?[n.message]:[]}}))!=null?e:[]}}const UH=re(xn,"1f1450",24,24),HH=re(xn,"dfff97",24,24),$H=re(xn,"ea4e71",24,24),GH=re(xn,"78f6aa",24,24),VH=re(xn,"f616fd",24,24),zH=re(xn,"de4618",24,24),WH=re(xn,"becb12",24,24),qH=re(xn,"9e4e62",24,24),KH=re(xn,"e05e3f",24,24),YH=re(xn,"69efb8",24,24),ZH=re(xn,"05b551",24,24),QH=re(xn,"117e74",24,24),JH=re(xn,"538bdf",24,24);function REe({url:t,className:e}){switch(new URL(t).pathname.split(".").pop()){case"pdf":return i.jsx(KH,{className:e});case"gif":return i.jsx(HH,{className:e});case"jpg":case"jpeg":return i.jsx($H,{className:e});case"png":return i.jsx(YH,{className:e});case"webp":return i.jsx(JH,{className:e});case"mp3":return i.jsx(zH,{className:e});case"m4a":return i.jsx(GH,{className:e});case"ogg":return i.jsx(qH,{className:e});case"wav":return i.jsx(QH,{className:e});case"mp4":return i.jsx(WH,{className:e});case"mov":return i.jsx(VH,{className:e});case"zip":return i.jsx(rE,{className:e});case"rar":return i.jsx(ZH,{className:e});case"css":return i.jsx(UH,{className:e});default:return null}}function OEe({searchResult:t,className:e}){switch(t.content_type){case"application/pdf":return i.jsx(KH,{className:e});case"image/gif":return i.jsx(HH,{className:e});case"image/jpeg":return i.jsx($H,{className:e});case"image/png":return i.jsx(YH,{className:e});case"image/webp":return i.jsx(JH,{className:e});case"audio/mpeg":return i.jsx(zH,{className:e});case"audio/m4a":return i.jsx(GH,{className:e});case"audio/ogg":return i.jsx(qH,{className:e});case"audio/wav":return i.jsx(QH,{className:e});case"video/mp4":return i.jsx(WH,{className:e});case"video/quicktime":return i.jsx(VH,{className:e});case"application/zip":return i.jsx(rE,{className:e});case"application/x-rar-compressed":return i.jsx(ZH,{className:e});case"text/css":return i.jsx(UH,{className:e})}return i.jsx(REe,{url:t.url,className:e})}function ME(t,e="short"){try{const n=new URL(t).hostname.replace("www.","");return e==="hostname"?n:n.replace(/\.[^.]*$/,"")}catch(n){return t}}function LEe(t){var e;if(t.startsWith("file://"))return TE((e=t.split(".").pop())!=null?e:"other")}const XH=({item:t})=>{const e=t.attribution,n=DH(t.url,"small","relative",e!=null?e:void 0);if(n)return n;const s=LEe(t.url);return s?i.jsx(s,{className:"text-token-text-primary relative h-4 w-4"}):i.jsx(Ns,{url:t.url,className:"icon-sm bg-token-main-surface-primary rounded-full object-cover",size:32,minSize:20,fallback:i.jsx(LH,{className:"icon-sm text-token-text-quaternary"})})};function DEe({item:t}){var o;const e=t.attribution,n=e!=null?e:ME(t.url,"short"),s=r=>"ref_id"in r&&"content_type"in r;return i.jsxs("a",{href:t.url,target:"_blank",rel:"noopener noreferrer",className:"hover:bg-token-main-surface-secondary flex flex-col gap-0.5 rounded-xl px-3 py-2.5",children:[i.jsxs("div",{className:"line-clamp-1 flex h-6 items-center gap-2 text-xs",children:[i.jsx(XH,{item:t}),n,s(t)&&i.jsx(OEe,{searchResult:t,className:"text-token-text-tertiary inline h-4 w-4"})]}),i.jsx("div",{className:"line-clamp-2 text-sm font-semibold break-words",children:t.title}),((o=t.pub_date)!=null?o:t.snippet)&&i.jsxs("div",{className:"text-token-text-secondary line-clamp-2 text-sm leading-snug font-normal",children:[t.pub_date&&i.jsx(Wxe,{date:t.pub_date}),t.pub_date&&t.snippet&&"  ",t.snippet]})]})}function BEe(t,e=20){if(t.length<=e)return{attribution:t,wasTruncated:!1};const n="...",s=e-n.length,o=Math.floor(s/2),r=s-o;return{attribution:t.substring(0,o)+n+t.substring(t.length-r),wasTruncated:!0}}function FEe({citation:t,showCounts:e}){const n=ME(t.url,"short"),{attribution:s,wasTruncated:o}=BEe(n);return i.jsxs("a",{href:t.url,target:"_blank",rel:"noopener noreferrer",className:"group hover:bg-token-main-surface-secondary flex items-center gap-0.5 rounded-xl px-3 py-2.5",children:[i.jsxs("div",{className:"line-clamp-1 flex h-6 items-center gap-2 text-xs",title:o?n:void 0,children:[t.icon,s]}),e&&t.count>1&&i.jsx("div",{className:"flex h-4 items-center justify-end ps-1",children:i.jsx("div",{className:"bg-token-main-surface-tertiary group-hover:bg-token-main-surface-primary flex h-4 min-w-4 items-center justify-center rounded-full text-[8px]",children:t.count})})]})}function UEe({item:t}){const e=t.url.split("#:~:text=")[0];return i.jsxs("a",{href:t.url,target:"_blank",rel:"noopener noreferrer",className:"hover:bg-token-main-surface-secondary flex flex-col gap-0.5 rounded-xl px-3 py-2.5",children:[i.jsxs("div",{className:"line-clamp-1 flex h-6 items-center gap-2 text-xs",children:[i.jsx(XH,{item:t}),i.jsx("p",{className:"text-normal truncate text-base font-semibold",children:t.title})]}),i.jsx("div",{className:"text-token-text-secondary line-clamp-2 text-sm leading-snug font-normal",children:e})]})}function HEe({taskIsPending:t,finalMessage:e,sources:n,caterpillarHeaderRef:s,showCounts:o=!0,citationView:r="normal"}){var l,c;const a=r3((c=(l=e==null?void 0:e.metadata)==null?void 0:l.content_references)==null?void 0:c.filter(u=>u.type==="webpage_extended"),"matched_text");return i.jsxs("div",{children:[i.jsx("div",{ref:s},"task-header"),i.jsxs("div",{className:"flex flex-col gap-4",children:[a.length>0&&i.jsxs("div",{className:"flex flex-col",children:[i.jsx("div",{className:"text-base font-medium",children:i.jsx(P,{id:"cc9nL7",defaultMessage:"Citations"})}),i.jsx("div",{className:"ms-[-12px] flex flex-col gap-1",children:a==null?void 0:a.map((u,d)=>r==="condensed"?i.jsx(UEe,{item:u},"citation-".concat(d,"-").concat(u.matched_text)):i.jsx(DEe,{item:u},"citation-".concat(d,"-").concat(u.matched_text)))})]}),i.jsxs("div",{className:"flex flex-col gap-2.5",children:[i.jsx("div",{className:"text-base font-medium",children:t?i.jsx("div",{className:"loading-shimmer-pure-text flex h-8 gap-1 overflow-hidden",children:i.jsx(P,{id:"Wo2ed3",defaultMessage:"Compiling sources"})}):i.jsx(P,{id:"h6ereF",defaultMessage:"All Sources"})}),i.jsx("div",{className:"ms-[-12px] flex flex-wrap",children:n==null?void 0:n.map((u,d)=>i.jsx(FEe,{citation:u,showCounts:o},"source-".concat(d,"-").concat(u.url)))})]})]})]})}const $Ee=t=>t?!1:xe("3576660381"),GEe=(t,e)=>{if(!t)return[];const n=ve.getConversationTurns(t);return e<0||e>=n.length?[]:ve.getConversationTurnAtIndex(t,e).messages.filter(o=>{var r;return((r=o.metadata)==null?void 0:r.b47u8ra0)===!0})},VEe=5;function zEe(t){const e=_f(t);if(e)return e.type;try{return new URL(t).hostname.replace(/^www\./,"")}catch(n){return t}}function WEe(t){const e=new Map;return t.forEach(n=>e.set(zEe(n),n)),Array.from(e.values())}function e$(t){"use forget";const e=D.c(14),{urls:n,max:s,itemClass:o,iconClass:r,faviconClass:a}=t;let l,c;if(e[0]!==a||e[1]!==r||e[2]!==o||e[3]!==s||e[4]!==n){const d=WEe(n);l="flex flex-row-reverse";let f;e[7]!==a||e[8]!==r||e[9]!==o?(f=(m,p)=>{var x;const g=_f(m),h=(x=g==null?void 0:g.Icon)!=null?x:null,_=(g==null?void 0:g.type)==="Past Conversation"?q(o,"bg-transparent"):q(o);return i.jsx("div",{className:_,children:h?i.jsx(h,{className:q("icon-sm",r),alt:g==null?void 0:g.type}):i.jsx(Ns,{url:m,size:32,minSize:16,className:q("icon-sm",a),"aria-label":"",showLoadingAnimation:!0,fallback:i.jsx(jr,{className:"icon-sm"})})},p)},e[7]=a,e[8]=r,e[9]=o,e[10]=f):f=e[10],c=d.slice(0,s).reverse().map(f),e[0]=a,e[1]=r,e[2]=o,e[3]=s,e[4]=n,e[5]=l,e[6]=c}else l=e[5],c=e[6];let u;return e[11]!==l||e[12]!==c?(u=i.jsx("div",{className:l,children:c}),e[11]=l,e[12]=c,e[13]=u):u=e[13],u}function t$({sourcesUrls:t,onClick:e,className:n}){return i.jsxs("button",{className:q("not-prose group/footnote border-token-border-default bg-token-main-surface-primary hover:bg-token-main-surface-secondary mt-3 mb-2 flex h-[38px] w-fit items-center gap-1.5 rounded-3xl border py-2","ps-3 pe-3",n),onClick:e,children:[t.length>0&&i.jsx(e$,{urls:t,max:VEe,itemClass:q("border-token-main-surface-primary bg-token-main-surface-primary flex items-center overflow-hidden rounded-full","-ms-1 first:me-0","border-2","group-hover/footnote:border-token-main-surface-secondary","relative")}),i.jsx("div",{className:"text-token-text-secondary flex items-center text-xs font-semibold",children:i.jsx(P,{id:"/48IOP",defaultMessage:"Sources"})})]})}function qEe(t,e,n){const s=Ze(t,u=>{const d=GEe(u,e);return[n,...d]}),o=v.useMemo(()=>s.flatMap(u=>Tp(u)),[s]),r=o.find(u=>u.type==="sources_footnote"),a=X(()=>Fn(Pt(t))),l=e_(a),c=r!=null&&r.sources?r==null?void 0:r.sources.map(({url:u})=>u).filter(u=>!!u):l?o.map(u=>{var d;return(d=u.safe_urls)!=null?d:[]}).flat().filter(u=>!!u):[];return{hasSources:(!!r||l)&&c.length>0,sourcesUrls:c}}function vlt({clientThreadId:t,message:e,turnIndex:n,isAgentTurn:s}){const o=e==null?void 0:e.id,{toggleThreadSidebar:r}=bi(),a=$Ee(s),[l,c]=Ze(t,h=>{var x;if(!((x=e==null?void 0:e.metadata)!=null&&x.async_task_id))return[-1,-1];const _=ve.getConversationTurns(h);for(let b=0;b<_.length;b++){const y=_[b];for(let S=0;S<y.messageGroups.length;S++){const C=y.messageGroups[S];if(C.type===hd.a8km123&&C.messages.some(w=>{var k,E;return((k=w==null?void 0:w.metadata)==null?void 0:k.async_task_id)===((E=e==null?void 0:e.metadata)==null?void 0:E.async_task_id)}))return[b,S]}}return[-1,-1]}),u=Ze(t,h=>{var _;return n>=0?(_=ve.getConversationTurnAtIndex(h,n))==null?void 0:_.messageGroups.findIndex(x=>x.type===O9||x.type===hd.a8km123):-1}),d=l>=0?l:n,f=c>=0?c:u,m=v.useCallback(()=>{o&&(a&&f>=0?r({type:"cot",turnIndex:d,reasoningGroupIndex:f,scrollTo:"sources"}):r({type:"searchSources",scrollToHeader:hE.Citations,turnIndex:n,messageId:o}))},[o,r,n,a,f,d]),{hasSources:p,sourcesUrls:g}=qEe(t,n,e);return p?i.jsx(YEe,{sourcesUrls:g,onClick:m,className:"hover:bg-token-bg-tertiary rounded-3xl"}):null}const KEe=3;function YEe({sourcesUrls:t,onClick:e,className:n}){const o=te().formatMessage({id:"/48IOP",defaultMessage:"Sources"});return i.jsxs("button",{className:q("group/footnote bg-token-bg-primary flex w-fit items-center gap-1.5 px-3 py-1.5",n),onClick:e,"aria-label":o,children:[t.length>0?i.jsx(e$,{urls:t,max:KEe,itemClass:q("border-token-bg-primary bg-token-bg-primary flex items-center overflow-clip rounded-full","-ms-1.5 first:me-0","border-2","group-hover/footnote:border-token-bg-tertiary","relative"),iconClass:"rounded-full shadow-[inset_0_0_0_1px_rgba(0,0,0,0.05)]",faviconClass:"rounded-full border border-token-border-light border-[0.5px]"}):i.jsx(xi,{className:"icon-sm text-token-text-secondary"}),i.jsx("div",{className:"text-token-text-secondary mt-[-1px] text-[13px] font-medium",children:o})]})}const ZEe=({title:t})=>i.jsxs("div",{className:"text-token-text-tertiary flex items-center gap-2",children:[i.jsx(mi,{className:"h-4 w-4"}),i.jsx("p",{children:t})]});function Slt({messages:t,children:e,clientThreadId:n,renderingView:s}){var y,S,C,w;const o=t.find(k=>{var E;return(E=k.metadata)==null?void 0:E.b1de6e2_rm}),r=(y=o==null?void 0:o.metadata)==null?void 0:y.async_task_id,a=Zo(k=>r?k.tasks[r]:null),[l,c]=v.useState((S=a==null?void 0:a.collapsed)!=null?S:!1),{toggleThreadSidebar:u}=bi(),d=gg("caterpillar"),f=v.useRef(null),m=L9(),p=df(),g=Ze(n,k=>{var M,A;if(!l||!a)return!1;const E=ve.getCurrentNode(k);let T=ve.getNode(k,E.parentId);return T.message.author.role==="developer"&&(T=ve.getNode(k,T.parentId)),!(((M=T.message.metadata)==null?void 0:M.async_task_id)===r&&((A=T.message.metadata)!=null&&A.async_task_created_at))});v.useEffect(()=>{!g&&l&&c(g)},[g,l]);const h=v.useCallback(k=>{r&&u({type:"caterpillar",caterpillarId:r,initialTab:k},d)},[u,r,d]),{uniqueSources:_}=v.useMemo(()=>o?{uniqueSources:PEe(o)}:{uniqueSources:[],totalSources:0},[o]),x=Mp();if(!o)return null;const b=({taskId:k})=>m?null:i.jsx("div",{className:"hover:bg-token-main-surface-secondary cursor-pointer rounded-md p-2",children:i.jsx(Kc,{className:"icon text-token-text-tertiary",onClick:()=>{Er.setResearchShareIntent({messages:t.map(E=>E),threadId:n,taskId:k})}})});return s==="chat"?i.jsxs(NH,{collapsed:l,setCollapsed:c,children:[i.jsxs("div",{className:"flex w-full items-center justify-between gap-2",children:[!p&&((C=o.metadata)==null?void 0:C.async_task_title)&&i.jsx(ZEe,{title:(w=o.metadata)==null?void 0:w.async_task_title}),r&&i.jsx(b,{taskId:r})]}),e,i.jsxs("div",{className:"flex items-center gap-2 py-2",children:[i.jsx(t$,{sourcesUrls:_.map(k=>k.url),onClick:()=>{x&&h("sources")},className:q("mt-0! mb-0!",x&&"cursor-default")}),r&&i.jsx(b,{taskId:r})]})]}):i.jsxs("div",{className:"flex flex-col gap-4",children:[e,i.jsx("div",{className:"border-token-border-sharp flex flex-col gap-2 border-b"}),i.jsx(HEe,{caterpillarHeaderRef:f,taskIsPending:!1,finalMessage:o,showCounts:!1,sources:_,citationView:"condensed"})]})}function Clt({className:t}){return i.jsx(n$,{className:q("w-full",t)})}function n$({className:t}){return i.jsx("div",{className:q("loading-results-shimmer rounded-md",t),children:""})}function QEe({percentage:t,height:e=10,className:n,backgroundClassName:s="bg-gray-400",barClassName:o="bg-current",transitionDuration:r,transitionTimingFunction:a,onTransitionEnd:l}){return i.jsxs("div",{className:q("relative w-full",n),style:{height:e},children:[i.jsx("div",{className:q("absolute start-0 top-0 h-full w-full",s)}),i.jsx("div",{className:q("absolute start-0 top-0 h-full transition-[width]",o),style:{width:"".concat(Math.max(Math.min(t,100),1),"%"),transitionDuration:r,transitionTimingFunction:a},onTransitionEnd:l})]})}function JEe({taskId:t,intl:e,toaster:n}){return zt({mutationFn:async()=>{if(t)return await DC.cancelTask({taskId:t})},onSuccess:()=>{t&&(Er.setTaskStatus(t,wn.CANCELLED),Er.abortTaskStream(t))},onError:()=>{n.danger(e.formatMessage({id:"4Hl5/B",defaultMessage:"An error occurred while cancelling the task."}),{loggingTitle:"An error occurred while cancelling the task.",toastId:"caterpillar_mutations",loggingDescription:"Error message when task cancellation throws an error"})}})}function wlt({taskId:t,intl:e,toaster:n}){return zt({mutationFn:async()=>{if(!t)throw new Error("Cannot answer now without a task id");return await DC.answerNowTask({taskId:t})},onMutate:()=>{var o;if(!t)return;const s=(o=Rm.getTask(t))==null?void 0:o.status;return Er.setTaskStatus(t,wn.SKIPPING),{previousStatus:s}},onSuccess:()=>{},onError:(s,o,r)=>{t&&(r!=null&&r.previousStatus)&&Er.setTaskStatus(t,r.previousStatus),n.danger(e.formatMessage({id:"c0xDWm",defaultMessage:"An error occurred while skipping thinking."}),{loggingTitle:"An error occurred while skipping thinking.",toastId:"caterpillar_mutations",loggingDescription:"Error message when task answer now throws an error"})}})}const XEe=({taskId:t,clientThreadId:e,onClose:n})=>{const s=te(),o=Dt(),r=D9(c=>c.bySystemHint(Ke.Research)),a=JEe({taskId:t,intl:s,toaster:o}),l=v.useCallback(()=>{a.mutate(),yd(e,null),V.logEventWithStatsig("Pause Completion","chatgpt_pause_completion",{threadId:Lt(e),currentLeafId:ve.getCurrentNode(At(e)).message.id,eventSource:"mouse"}),n()},[a,e,n]);return i.jsx(rp,{open:!0,onOpenChange:c=>{c||n()},children:i.jsxs(ap,{children:[i.jsx(vC,{className:"border-token-border-medium radix-state-open:animate-show fixed inset-0 bg-black/25"}),i.jsxs(F0,{className:"bg-token-main-surface-primary radix-state-open:animate-alertShow fixed start-1/2 top-1/2 flex max-h-[85vh] w-[90vw] max-w-lg -translate-x-1/2 -translate-y-1/2 flex-col gap-2 rounded-2xl shadow-2xl focus:outline-hidden",children:[i.jsx(HP,{className:"p-4 pb-2 text-lg font-semibold md:p-6 md:pb-2",children:i.jsx(P,{id:"caterpillar.message.modal.confirmCancelTaskTitle",defaultMessage:"Are you sure you want to stop researching?"})}),i.jsxs("div",{className:"flex flex-col gap-4 p-4 pt-0 md:p-6 md:pt-0",children:[i.jsx($P,{className:"text-base",children:i.jsx("span",{className:"mb-2",children:r?i.jsx(P,{id:"caterpillar.message.modal.confirmCancelTaskDescription",defaultMessage:"Stopping now will still count as one deep research request. You have {remaining} more available until {resetDate}.",values:{remaining:r.remaining,resetDate:new Date(r.reset_after).toLocaleDateString(s.locale,{month:"long",day:"numeric"})}}):i.jsx(P,{id:"caterpillar.message.modal.confirmCancelTaskDescriptionNoRateLimit",defaultMessage:"Stopping now will still count as one deep research request."})})}),i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx(Se,{color:"secondary",onClick:n,children:i.jsx(P,{id:"caterpillar.message.modal.confirmCancelTaskCancelButton",defaultMessage:"Don't stop"})}),i.jsx(Se,{color:"danger",className:"w-20",onClick:l,children:a.isPending?i.jsx(Us,{}):i.jsx(P,{id:"caterpillar.message.modal.confirmCancelTaskButton",defaultMessage:"Stop"})})]})]})]})]})})},$2={div:t=>{const o=t,{node:e,children:n}=o,s=De(o,["node","children"]);return i.jsx("div",G(N({},s),{className:"text-red-500",children:n}))},p:t=>{const o=t,{node:e,children:n}=o,s=De(o,["node","children"]);return i.jsx("p",G(N({},s),{className:"text-token-text-primary text-start leading-6",children:n}))},a:t=>{const o=t,{node:e,children:n}=o,s=De(o,["node","children"]);return i.jsx("a",G(N({},s),{className:"font-sm text-token-text-primary! leading-6",children:n}))}},eTe=1e3*60*2,tTe=30;function s$({taskId:t,clientThreadId:e,onClick:n,statusMessage:s,showSources:o,includeMargin:r,sources:a,progressBar:l}){const c=Mp(),[u,d]=v.useState(!1);return i.jsxs(i.Fragment,{children:[t&&u&&i.jsx(XEe,{taskId:t,clientThreadId:e,onClose:()=>d(!1)}),i.jsxs("div",{className:"relative flex w-4/5 max-w-[416px]",children:[t&&i.jsx("button",{onClick:()=>d(!0),disabled:!t,className:"hover:bg-token-bg-elevated-secondary bg-token-bg-elevated-primary absolute end-4 bottom-4 flex items-center justify-center rounded-full border border-black/10 p-0.5 dark:border-white/10",children:i.jsx(yE,{className:"icon-lg"})}),i.jsx("button",{onClick:()=>c&&n(),className:q("bg-token-main-surface-primary mt-4 flex w-full items-start justify-start gap-[18px] rounded-2xl border border-black/10 px-5 py-4 shadow-sm dark:border-white/10",c?"hover:bg-token-main-surface-secondary cursor-pointer":"cursor-auto"),children:i.jsxs("div",{className:"flex w-full flex-col gap-3",children:[i.jsxs("div",{className:q("flex flex-col items-start justify-start self-stretch md:h-7 md:flex-row md:items-center md:justify-between",o?"h-12":"h-6"),children:[i.jsx("div",{className:q("font-sm text-token-text-primary w-full flex-1 truncate text-start leading-7 md:w-0",r&&"me-[30px]"),children:s}),o&&a]}),i.jsx("div",{className:q("flex w-full items-center justify-start gap-4 self-stretch pb-2",t&&"pe-10"),children:l})]})})]})]})}function AE({taskId:t,clientThreadId:e,toggleSidebar:n,openSidebar:s,startTime:o,progressBar:r}){const a=te(),[l,c]=v.useState(!1),u=BH();v.useEffect(()=>{if(!o)return;const p=Date.now()-o,g=eTe-p;if(g>0){const h=setTimeout(()=>{c(!0),s()},g);return()=>clearTimeout(h)}else c(!0),s()},[o,s]);const d=df(),f=Zo(p=>t?p.tasks[t]:null),m=d&&f&&hp(f);return v.useEffect(()=>{m&&s()},[m,s]),r||(r=i.jsx(n$,{className:"h-2 w-full"})),i.jsx(s$,{taskId:t,clientThreadId:e,onClick:n,statusMessage:l?a.formatMessage({id:"T2SbxC",defaultMessage:"Waiting"}):i.jsx("div",{className:"text-token-text-primary text-sm font-medium text-pretty",children:u.startingMessage}),progressBar:r,showSources:!1})}function nTe(t,e,n){var r;const s=t.formatMessage({id:"Bs+OcV",defaultMessage:"Thinking"});if(e.length<2)return(r=n==null?void 0:n.initial)!=null?r:s;const o=e[e.length-2];return o.type==="summary"?o.title:o.type==="search"?o.query:(o==null?void 0:o.type)==="websiteOpen"?i.jsx(Cr,{componentOverrides:$2,children:o.activeRowText}):o.type==="fileOpen"?i.jsx(Cr,{componentOverrides:$2,children:o.activeRowText}):o.type==="pythonAnalysis"?i.jsx(Cr,{componentOverrides:$2,children:o.analysisSummary}):s}function sTe({task:t,clientThreadId:e,caterpillarRows:n,messageWithTaskMetadata:s,totalSources:o,handleToggleCaterpillarSidebar:r}){var C,w;const a=te(),l=Mp(),c=nTe(a,n,(C=s.metadata)==null?void 0:C.async_task_status_messages),u=((w=t==null?void 0:t.expectedDurationMinutes)!=null?w:tTe)*60*1e3,d=df(),f=xe("3550239432"),m=t.createdAt?+new Date(t.createdAt):Date.now(),p=Xv(m,u),g=s!=null&&s.create_time?s.create_time*1e3:0,h=Math.min(Xv(g||Date.now(),u),4),_=f?Math.max(p,h):p;let x;const b=i.jsx("div",{className:"bg-token-main-surface-tertiary flex h-2 shrink grow basis-0 items-start justify-start gap-2.5 overflow-hidden rounded-[10px]",children:i.jsx(QEe,{percentage:_,barClassName:"bg-token-text-primary",backgroundClassName:"bg-token-main-surface-tertiary"})});f&&(x=b),v.useEffect(()=>{d||yd(e,{source:Ka.CLIENT,value:Nn.STREAMING})},[e,d]);const{openThreadSidebar:y}=bi();v.useEffect(()=>{n.length===2&&l&&y({type:"caterpillar",caterpillarId:t.taskId,initialTab:"activity"})},[n.length,y,t.taskId,e,l]);const S=v.useCallback(()=>{y({type:"caterpillar",caterpillarId:t.taskId,initialTab:"activity"})},[y,t.taskId]);return n.length<=1?i.jsx(AE,{taskId:t.taskId,clientThreadId:e,toggleSidebar:()=>r("activity"),openSidebar:S,startTime:new Date(t.createdAt).getTime(),progressBar:x}):i.jsx(s$,{taskId:t.taskId,clientThreadId:e,onClick:()=>r("activity"),statusMessage:c,showSources:!0,includeMargin:o>0,sources:o===0?i.jsx("div",{className:"text-token-text-tertiary text-sm text-pretty",children:i.jsx(P,{id:"zfwUjs",defaultMessage:"Looking for sources"})}):i.jsxs("button",{onClick:k=>{k.stopPropagation(),r("sources")},className:q("flex shrink-0 gap-1 text-[13px] leading-[18px] text-[#0285ff]",l?"cursor-pointer hover:text-[#0285ff]/80":"cursor-auto"),children:[i.jsx("div",{className:"relative",children:i.jsx(In,{initial:!1,children:i.jsx(wt.span,{initial:{opacity:0,rotateX:-90,translateY:20},animate:{opacity:1,rotateX:0,translateY:0},exit:{opacity:0,rotateX:90,translateY:-20},transition:{duration:.35},className:"absolute start-0 md:end-0",children:o},o)})}),i.jsx("div",{className:q("md:pe-0",o>0&&"ps-2",o>9&&"ps-[14px]",o>99&&"ps-[22px]"),children:o>1?i.jsx(P,{id:"zN+MuO",defaultMessage:" sources"}):i.jsx(P,{id:"dMowmJ",defaultMessage:" source"})})]}),progressBar:b})}function _S({message:t,handleToggleCaterpillarSidebar:e}){const n=Mp();return i.jsx("div",{className:"flex w-full flex-col gap-6 pt-3 pb-6",children:i.jsx("button",{onClick:()=>n&&e(),className:q("text-token-text-tertiary flex w-full text-start",n?"hover:text-token-text-secondary cursor-pointer":"cursor-auto"),children:t})})}const oTe=()=>!1;function t5({task:t,clientThreadId:e,messageWithTaskMetadata:n,totalSources:s,totalSearches:o,handleToggleCaterpillarSidebar:r}){var m,p,g,h,_,x;const a=t==null?void 0:t.originalConversationId,l=HD(a),c=df(),u=oTe(),d=Ze(e,b=>Sve(b,t==null?void 0:t.taskId)),{clearSystemHintModeTrigger:f}=Cl();return v.useEffect(()=>{(t==null?void 0:t.status)===wn.COMPLETED&&!d&&!u&&(c&&FR()?pt(a,b=>{fo.setShouldRefetchConvoOnFinalize(b,!0)}):l(),f(Ke.Research))},[t==null?void 0:t.status,u,d,l,f,c,a]),i.jsx(_S,{message:i.jsxs(i.Fragment,{children:[(x=(_=(p=(m=n.metadata)==null?void 0:m.async_task_status_messages)==null?void 0:p.completed_with_time)!=null?_:(h=(g=n.metadata)==null?void 0:g.async_task_status_messages)==null?void 0:h.completed_no_time)!=null?x:i.jsx(P,{id:"4d0xZc",defaultMessage:"Completed"}),s===0?i.jsx(P,{id:"VggF2B",defaultMessage:"  0 sources"}):s===1?i.jsx(P,{id:"zkkdKV",defaultMessage:"  1 source"}):i.jsx(P,{id:"qcKt3q",defaultMessage:"  {sourcesCount} sources",values:{sourcesCount:s}}),o>0&&i.jsx(P,{id:"ti+7CY",defaultMessage:"  {searchesCount, plural, one {# search} other {# searches}}",values:{searchesCount:o}})]}),handleToggleCaterpillarSidebar:()=>r("activity")})}function o$({clientThreadId:t}){const e=Pt(t),n=X(()=>{var r;return((r=zd(e))==null?void 0:r.value)===Nn.STREAMING}),[s]=Ze(t,r=>[ve.getRequestId(r)]);return Dr(s)||n}function klt({messages:t,clientThreadId:e}){var f;const n=t.find(m=>{var p,g;return((p=m.metadata)==null?void 0:p.b1de6e2_s)&&((g=m.metadata)==null?void 0:g.async_task_id)}),s=(f=n==null?void 0:n.metadata)==null?void 0:f.async_task_id,o=t.find(m=>m.recipient===ds.START_RESEARCH_TASK),r=df(),a=Ze(e,m=>r?Cve(m,o==null?void 0:o.id):wve(m,o==null?void 0:o.id)),l=o$({clientThreadId:e}),[c,u]=v.useState(l),{clearSystemHintModeTrigger:d}=Cl();return v.useEffect(()=>{const m=setTimeout(()=>{u(a&&(l||r))},3e3);return()=>clearTimeout(m)},[l,a,r]),v.useEffect(()=>{c&&d(Ke.Research)},[c,d]),!n||!s?c?i.jsx(AE,{taskId:s,clientThreadId:e,toggleSidebar:()=>{},openSidebar:()=>{},startTime:new Date().getTime()}):null:i.jsx(rTe,{clientThreadId:e,payloadTaskId:s,messageWithTaskMetadata:n})}function rTe({payloadTaskId:t,messageWithTaskMetadata:e,clientThreadId:n}){var m,p,g,h,_,x,b,y;SEe(t,e,n);const s=Zo(S=>t?S.tasks[t]:null),o=te(),r=s==null?void 0:s.status,a=v.useMemo(()=>s!=null&&s.rows?s.rows:[],[s==null?void 0:s.rows]),{toggleThreadSidebar:l}=bi(),{totalSources:c,totalSearches:u}=v.useMemo(()=>{if(!a)return{uniqueSources:[],totalSources:0,totalSearches:0};const S=IEe(a),C=S.reduce((k,E)=>k+E.count,0),w=jEe(a);return{uniqueSources:S,totalSources:C,totalSearches:w}},[a]),d=gg("caterpillar"),f=v.useCallback(S=>{t&&l({type:"caterpillar",caterpillarId:t,initialTab:S},d)},[l,t,d]);return QQ(t),(p=(m=e.metadata)==null?void 0:m.async_task_status_messages)!=null&&p.completed_with_time?i.jsx(t5,{task:s,clientThreadId:n,messageWithTaskMetadata:e,totalSources:c,totalSearches:u,handleToggleCaterpillarSidebar:f}):!s||!r||r===wn.UNDETERMINED?i.jsx(AE,{taskId:t,clientThreadId:n,toggleSidebar:()=>{},openSidebar:()=>{},startTime:new Date().getTime()}):s.status===wn.COMPLETED?i.jsx(t5,{task:s,clientThreadId:n,messageWithTaskMetadata:e,totalSources:c,totalSearches:u,handleToggleCaterpillarSidebar:f}):s.status===wn.FAILED?i.jsx(_S,{message:(_=(h=(g=e.metadata)==null?void 0:g.async_task_status_messages)==null?void 0:h.error)!=null?_:o.formatMessage({id:"at6zk8",defaultMessage:"Failed to think"}),handleToggleCaterpillarSidebar:()=>f("activity")}):s.status===wn.CANCELLED?i.jsx(_S,{message:(y=(b=(x=e.metadata)==null?void 0:x.async_task_status_messages)==null?void 0:b.cancelled)!=null?y:o.formatMessage({id:"u1rIr5",defaultMessage:"Task Cancelled"}),handleToggleCaterpillarSidebar:()=>f("activity")}):i.jsx(sTe,{task:s,clientThreadId:n,caterpillarRows:a,messageWithTaskMetadata:e,totalSources:c,handleToggleCaterpillarSidebar:f})}var G2,n5;function aTe(){if(n5)return G2;n5=1;function t(e){return e==null}return G2=t,G2}var iTe=aTe();const lTe=ps(iTe);function Elt({formData:t,readOnly:e,schema:n,uiSchema:s,onChange:o}){const r=v.useCallback((c,u)=>{o==null||o(G(N({},t),{[c]:u}))},[t,o]);v.useEffect(()=>{const c={};Object.entries(n.properties).forEach(([u,d])=>{c[u]===void 0&&d.default!==void 0&&("enum"in d?c[u]=[d.default]:c[u]=d.default)}),o(c)},[]);const a=v.useMemo(()=>{const c=Object.fromEntries(s.elements.map(u=>{const d=_a(u.scope.split("/"));return d?[d,u]:[]}).filter(u=>u.length>0));return Object.entries(n.properties).map(([u,d])=>{const f=c[u];return f?{dataRow:d,uiRow:f,rowKey:u}:null}).filter(u=>!!u).sort((u,d)=>{const f="enum"in u.dataRow,m="enum"in d.dataRow;return f===m?0:f?-1:1})},[n,s]),l=a.filter(c=>"enum"in c.dataRow).length;return i.jsx("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:a.map((c,u)=>i.jsx(cTe,{updateFormDataForRow:d=>r(c.rowKey,d),clearAll:()=>r(c.rowKey,void 0),renderRow:c,value:t==null?void 0:t[c.rowKey],readOnly:e,forceFullWidth:l%2===1&&u===l-1},c.rowKey))})}function cTe({updateFormDataForRow:t,clearAll:e,renderRow:n,readOnly:s,value:o,forceFullWidth:r=!1}){const{dataRow:a,uiRow:l,rowKey:c}=n,u=te(),d=v.useCallback(w=>{o===void 0?t([w]):o.includes(w)?t(o.filter(k=>k!==w)):t([...o,w])},[o,t]),[f,m]=v.useState(!1),[p,g]=v.useState(""),[h,_]=v.useState(!1),[x,b]=v.useState(void 0);v.useEffect(()=>{m(!1),g("")},[h]);const y=v.useCallback(()=>{d(p),m(!1),g(""),x&&b([...x,p])},[p,d,m,g,x]);v.useEffect(()=>{"enum"in a&&a.enum&&b(a.enum)},[a]);const S=v.useMemo(()=>{const w=a.type,k=lTe(o)||o===""||Array.isArray(o)&&o.length===0;if(x){const E=k?u.formatMessage({id:"Dzsmf1",defaultMessage:"Any"}):o.length===1?o[0]:o[0]+" + ".concat(o.length-1);return i.jsxs(ee.Root,{open:h,onOpenChange:_,children:[i.jsxs(ee.Trigger,{className:"border-token-main-surface-quaternary bg-token-main-surface-primary text-token-text-secondary hover:bg-token-main-surface-primary! dark:bg-token-main-surface-secondary w-full justify-between rounded-md border text-start",children:[i.jsx("span",{className:"text-token-text-primary truncate",children:E}),i.jsx(ng,{className:"icon-sm text-token-text-tertiary"})]}),i.jsx(ee.Portal,{children:i.jsxs(ee.Content,{size:"medium",children:[i.jsx(ee.MultiSelectCheckboxItem,{checked:(o==null?void 0:o.length)===0||o===void 0,onCheckedChange:e,children:i.jsx(P,{id:"Dzsmf1",defaultMessage:"Any"})},"any"),i.jsx("hr",{className:"border-token-main-surface-quaternary mx-2 my-2"}),x.map(T=>i.jsx(ee.MultiSelectCheckboxItem,{checked:o==null?void 0:o.includes(T),onCheckedChange:()=>d(T),children:i.jsx("span",{className:"pe-2",children:T})},T)),i.jsx("hr",{className:"border-token-main-surface-quaternary mx-2 my-2"}),f?i.jsxs("div",{className:"flex w-full flex-row items-center justify-between pe-5",children:[i.jsx(xd,{autoFocus:!0,name:"new-option",className:"bg-token-main-surface-primary text-token-text-secondary hover:bg-token-main-surface-primary! dark:bg-token-main-surface-secondary w-0 flex-1 grow rounded-md border-none text-start focus-within:ring-0!",value:p,placeholder:u.formatMessage({id:"LhAlwa",defaultMessage:"Add option..."}),ariaLabel:u.formatMessage({id:"XElhCL",defaultMessage:"New option"}),onChange:T=>g(T.target.value),onKeyDown:T=>T.stopPropagation(),onPressEnter:y}),i.jsx("button",{className:"shrink-0 cursor-pointer",onClick:y,children:i.jsx(gR,{className:"icon-sm text-token-text-primary"})})]}):i.jsx("div",{className:"flex px-2",children:i.jsx("button",{className:"bg-token-main-surface-primary hover:bg-token-main-surface-secondary w-full rounded-md border-none p-2 text-start text-sm",onClick:()=>m(!0),children:i.jsx(P,{id:"lMgmto",defaultMessage:"Add Option..."})})})]})})]})}else return w==="string"||w==="integer"?i.jsx(xd,{ariaLabel:u.formatMessage({id:"M18pon",defaultMessage:"Form row"}),name:c,color:"quaternary",placeholder:l.placeholder,value:o!=null?o:"",type:"text",className:q("border-token-main-surface-quaternary text-token-text-primary",k&&"text-token-text-quaternary"),onChange:E=>t(E.target.value),disabled:s}):null},[a,o,l.placeholder,d,u,c,s,t,e,f,p,h,x,y]);if(!S)return null;const C=r||!x;return i.jsx(uTe,{label:l.label,className:q("col-span-1 flex flex-col justify-between",C&&"sm:col-span-2"),children:S})}function uTe({children:t,label:e,className:n}){return i.jsxs("div",{className:n,children:[i.jsx("p",{className:"mb-1 font-[550]",children:e}),i.jsx("div",{children:t})]})}const Tlt=t=>{"use forget";const e=D.c(20),{turnExchangeId:n,turnIndex:s,conversation:o}=t,{toggleThreadSidebar:r}=bi(),{resetSidebarHistory:a}=gU();let l;e[0]!==a||e[1]!==r||e[2]!==n||e[3]!==s?(l=()=>{a(),r(N({type:"cot",turnIndex:s},n?{turnExchangeId:n}:{}))},e[0]=a,e[1]=r,e[2]=n,e[3]=s,e[4]=l):l=e[4];const c=l;let u;e[5]!==o?(u=()=>JQ(o),e[5]=o,e[6]=u):u=e[6];const d=X(u);let f;e[7]!==d||e[8]!==n?(f=n?d.get(n):void 0,e[7]=d,e[8]=n,e[9]=f):f=e[9];const m=f;let p;e[10]!==(m==null?void 0:m.groups)?(p=m==null?void 0:m.groups.filter(dTe).flatMap(mTe).at(-1),e[10]=m==null?void 0:m.groups,e[11]=p):p=e[11];const g=p;if(!n||!g)return null;let h,_;e[12]===Symbol.for("react.memo_cache_sentinel")?(h={opacity:1},_={type:"spring",duration:.3},e[12]=h,e[13]=_):(h=e[12],_=e[13]);let x;e[14]===Symbol.for("react.memo_cache_sentinel")?(x=i.jsx(pg,{className:"icon-xs"}),e[14]=x):x=e[14];let b;e[15]!==g?(b=i.jsx(In,{mode:"popLayout",children:i.jsxs(wt.span,{className:"text-token-text-secondary hover:text-token-text-primary dark:hover:text-token-text-primary my-2 flex items-center gap-0.5 dark:text-(--interactive-label-tertiary-default)",initial:!1,animate:h,transition:_,children:[g,x]})}),e[15]=g,e[16]=b):b=e[16];let y;return e[17]!==c||e[18]!==b?(y=i.jsx("button",{onClick:c,children:b}),e[17]=c,e[18]=b,e[19]=y):y=e[19],y};function dTe(t){return t.type===hd.ReasoningRecap}function fTe(t){var e,n;return((e=t.content)==null?void 0:e.content_type)===vt.ReasoningRecap?(n=t.content)==null?void 0:n.content:null}function mTe(t){return t.messages.map(fTe)}var NE=(t=>(t.Turn="turn",t.ImagesTab="images_tab",t.ProductDetails="product_details",t.SuperWidget="super_widget",t.ImageGroup="image_group",t.DilWidget="dil_widget",t))(NE||{});class dx extends ml()(()=>({currentImage:void 0})){setCurrentImage(e){this.setState({currentImage:e})}static useCurrentImage(){return this.useState(e=>e.currentImage)}}function pTe(t){"use forget";const e=D.c(8),{clientThreadId:n,children:s}=t,[o]=v.useState(gTe);let r;e[0]!==o?(r=()=>{o.setCurrentImage(void 0)},e[0]=o,e[1]=r):r=e[1];let a;e[2]!==n||e[3]!==o?(a=[n,o],e[2]=n,e[3]=o,e[4]=a):a=e[4],v.useEffect(r,a);let l;return e[5]!==s||e[6]!==o?(l=i.jsx(dx.Provider,{store:o,children:s}),e[5]=s,e[6]=o,e[7]=l):l=e[7],l}function gTe(){return new dx}function hTe(t){if(!t||typeof t!="object")return!1;const e=t;return typeof e.title=="string"&&typeof e.date_str=="string"&&(e.location==null||typeof e.location=="string")}function _Te(t){const{title:e,location:n="",date_str:s}=t,o=new URLSearchParams({action:"TEMPLATE",text:e,location:n,dates:s}),r="https://calendar.google.com/calendar/render?".concat(o.toString());window.open(r,"_blank","noopener,noreferrer")}function Mlt({calendarPreferenceFeatureEnabled:t,CalendarPreferenceModal:e}){const n=t,[s,o]=v.useState(()=>null),r=v.useCallback(u=>{},[n]),a=v.useCallback(({initialPreference:u}={})=>Promise.resolve(null),[e,s,n,r]),l=v.useCallback(async()=>null,[s,n,a]),c=v.useCallback(async u=>{{_Te(u);return}},[l,n]);return v.useMemo(()=>({runAddToCalendarFlow:c}),[c])}const n1=t=>typeof t=="string"?t:void 0,xTe=t=>typeof t=="object"&&t!=null&&!Array.isArray(t),V2=(t,e)=>{let n=t;for(const s of e){if(!xTe(n))return;n=n[s]}return n1(n)};function yTe(t){var o,r,a;const e=(o=n1(t["email.to"]))!=null?o:V2(t,["email","to"]),n=(r=n1(t["email.subject"]))!=null?r:V2(t,["email","subject"]),s=(a=n1(t["email.body"]))!=null?a:V2(t,["email","body"]);return!e&&!n&&!s?null:{to:e,subject:n,body:s}}const bTe=async(t,{toaster:e})=>{const n=t.value;n!=null&&await zo(typeof n=="string"?n:String(n),e,void 0,{showSuccessSnackbar:!0})},vTe=async(t,{calendar:e})=>{!e||!RTe(t)||await e.runAddToCalendarFlow(t.item)},STe=(t,{openEntitySidebar:e})=>{if(!e)return;const n=t.query;if(typeof n!="string"||!n)return;const s=typeof t.category=="string"?t.category:"ask_sidebar",o=t.extraParams!=null&&typeof t.extraParams=="object"&&!Array.isArray(t.extraParams)?t.extraParams:void 0;e({query:n,category:s,extraParams:o})},CTe=async(t,{issueNewTurn:e})=>{if(!e)return;const n=t.query;typeof n!="string"||!n||await e(n)},wTe=t=>{if(typeof t=="number"&&Number.isFinite(t))return t;if(typeof t=="bigint"||typeof t=="string"){const e=Number(t);return Number.isFinite(e)?e:void 0}},kTe=t=>typeof t.url=="string"&&typeof t.content_url=="string"&&typeof t.thumbnail_url=="string"&&typeof t.title=="string",ETe=t=>{const e=t.images;return Array.isArray(e)?e.every(kTe):!1},TTe=(t,{imageLightbox:e})=>{var s;const n=(s=wTe(t.selected_index))!=null?s:0;!e||!ETe(t)||t.images.length<n+1||e.setCurrentImage({image:t.images[n],source:NE.DilWidget,imageResults:t.images})},MTe=t=>typeof t=="object"&&t!=null&&!Array.isArray(t),ATe=(t,{logEvent:e})=>{const n=typeof t.event_name=="string"?t.event_name:void 0,s=MTe(t.event_data)?t.event_data:void 0;!e||!n||e(n,s)},NTe=t=>{const e=t.url;if(typeof e!="string"||!e||typeof window>"u")return;let n;try{n=new URL(e,window.location.origin)}catch(s){return}n.protocol!=="http:"&&n.protocol!=="https:"||window.open(n.toString(),"_blank","noopener,noreferrer")},s5=t=>{if(typeof window>"u")return;const e=yTe(t);if(!e)return;const{to:n,subject:s,body:o}=e,r=new URLSearchParams;s&&r.set("subject",s),o&&r.set("body",o);const a=r.toString(),l="mailto:".concat(n!=null?n:"").concat(a?"?".concat(a):"");window.open(l,"_blank","noopener,noreferrer")},fx=t=>{const e=typeof t.card_id=="string"&&t.card_id?t.card_id:null,n=typeof t.conversation_id=="string"&&t.conversation_id?t.conversation_id:void 0;return e?{cardId:e,conversationId:n}:null},ITe=(t,{openPulseOverlay:e})=>{if(!e)return;const n=fx(t);n&&e({conversationId:n.conversationId,pulseOverlayType:{type:"card",cardId:n.cardId}})},o5=t=>async e=>{const n=fx(e);if(!n)return;const{cardId:s}=n;await ue.safePost("/feed/card/{card_id}/reaction",{parameters:{path:{card_id:s}},requestBody:{emoji:t}})},jTe=async t=>{const e=fx(t);if(!e)return;const{cardId:n,conversationId:s}=e;await ue.safePut("/feed/card/{card_id}/save",{parameters:{path:{card_id:n}}}),s&&Zn().invalidateQueries({queryKey:B9().queryKey})},PTe=t=>{const e=fx(t);if(!(e!=null&&e.conversationId))return;const n=Lt(e.conversationId);n&&As.openSharingModal(n,"pulse_card_widget")},Alt={copy:bTe,add_to_calendar:vTe,open_entity_detail:STe,issue_new_turn:CTe,open_image_lightbox:TTe,log_event:ATe,open_url:NTe,"email.send":s5,"email.mailto":s5,"card.open":ITe,"card.thumbs_up":o5("like"),"card.thumbs_down":o5("dislike"),"card.save":jTe,"card.share":PTe};function RTe(t){return"item"in t&&hTe(t.item)}async function Nlt({payload:t,context:e,library:n,actionType:s}){var a;const o=(a=t==null?void 0:t.action)!=null?a:s;if(!o||!t)return;const r=n[o];r&&await r(t,e)}const OTe=/^[A-Za-z_][\w]*$/,r$=2;function Ilt({mode:t,widget:e},n){const s=v.useMemo(()=>t==="packed"?e?IE(e):null:e?a$(e):null,[t,e]);return v.useCallback(o=>{s&&zo(s,n,o,{showSuccessSnackbar:!0})},[s,n])}function jlt(){const t=_n(),e=C1(n=>n.showDebugConversationTurns);return LTe(t,e)}function LTe(t,e){return!!t&&J0(t)||e}function IE(t,e={}){var l,c;const{indent:n=0}=e,s=" ".repeat(n),o=i$((l=t.props)!=null?l:{}),r=((c=t.children)!=null?c:[]).filter(u=>u!=null);if(!r.length)return"".concat(s,"<").concat(t.type).concat(o," />");const a=r.map(u=>IE(u,{indent:n+r$})).join("\n");return"".concat(s,"<").concat(t.type).concat(o,">\n").concat(a,"\n").concat(s,"</").concat(t.type,">")}function a$(t,e={}){var l;const{indent:n=0}=e,s=" ".repeat(n),o=i$(Object.fromEntries(Object.entries(t).filter(([c,u])=>c!=="type"&&c!=="children"&&u!==void 0))),r=((l=t.children)!=null?l:[]).filter(c=>c!=null);if(!r.length)return"".concat(s,"<").concat(t.type).concat(o," />");const a=r.map(c=>a$(c,{indent:n+r$})).join("\n");return"".concat(s,"<").concat(t.type).concat(o,">\n").concat(a,"\n").concat(s,"</").concat(t.type,">")}function i$(t){const e=Object.keys(t!=null?t:{}).filter(s=>t[s]!==void 0);if(!e.length)return"";const n=e.sort().map(s=>DTe(s,t[s]));return" ".concat(n.join(" "))}function DTe(t,e){return typeof e=="string"?"".concat(t,"=").concat(l$(e)):"".concat(t,"={ ").concat(UTe(xS(e))," }")}function xS(t){if(BTe(t))return IE(t,{indent:0});if(t===null)return"null";if(t===void 0)return"undefined";if(typeof t=="boolean")return t?"true":"false";if(typeof t=="number"){if(!Number.isFinite(t))throw new Error("Cannot serialize non-finite numbers in DIL props");return String(t)}if(typeof t=="string")return l$(t);if(Array.isArray(t)){const e=t.map(n=>xS(n)).join(", ");return"[".concat(e,"]")}if(t instanceof Date)return JSON.stringify(t.toISOString());if(FTe(t)){const n=Object.keys(t).sort().map(s=>{const o=OTe.test(s)?s:JSON.stringify(s);return"".concat(o,": ").concat(xS(t[s]))}).join(", ");return n?"{ ".concat(n," }"):"{}"}return JSON.stringify(t)}function BTe(t){return!t||typeof t!="object"?!1:"type"in t&&"props"in t&&"children"in t}function FTe(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)}function l$(t){var r,a;const e=((r=t.match(/'/g))!=null?r:[]).length,n=((a=t.match(/"/g))!=null?a:[]).length;let s;!n&&e?s='"':!e&&n?s="'":s=e<=n?"'":'"';const o=t.replace(/['"\\\u0000-\u001f\u2028\u2029]/g,l=>{var c;return l===s?"\\".concat(l):l==="\\"?"\\\\":(c={"\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","'":"'",'"':'"'}[l])!=null?c:"\\u".concat(l.charCodeAt(0).toString(16).padStart(4,"0"))});return"".concat(s).concat(o).concat(s)}function UTe(t){return t.replace(/\s*\n\s*/g," ")}const c$=0,jE=700,HTe=t=>{var e;return Array.from((e=t.match(/\s*\S+(?:\s+|$)/g))!=null?e:[])},$Te=/^\s*$/,GTe=()=>{const{locale:t}=te(),e=v.useMemo(()=>{try{return new Intl.Segmenter(t,{granularity:"word"})}catch(s){return null}},[t]);return v.useCallback(s=>{var r;if(e==null)return HTe(s);const o=[];for(const{segment:a,isWordLike:l}of e.segment(s))if($Te.test(a)||!l){const c=Math.max(o.length-1,0);(r=o[c])!=null||(o[c]=""),o[c]+=a}else o.push(a);return o},[e])},VTe=v.createContext({isDisabled:!0,segmentText:()=>[],enqueueElement:()=>{},dequeueElement:()=>{},updateElementBounds:()=>{},reportReady:()=>{},reportProgress:()=>{},reportComplete:()=>{},lastPositionCompletedAnimating:null,activeStartPos:null,animationTiming:{durationMs:jE,delayMs:c$}}),Hf=(t,e)=>"".concat(t,"-").concat(e),zTe=t=>{const[e,n]=t.split("-");return{tag:e,startPos:parseInt(n)}},Plt=({isDisabled:t,onComplete:e,children:n,defaultDelayPerSegmentMs:s=c$,defaultAnimationDurationPerSegmentMs:o=jE})=>{const r=v.useRef(new Set),[a,l]=v.useState(null),[c,u]=v.useState(null),d=v.useRef(new Map),f=v.useRef(null),m=v.useCallback((S,C,w,k)=>{var E;f.current=Math.max((E=f.current)!=null?E:0,w),d.current.set(Hf(S,C),{start:C,end:w,numChildren:k})},[]),p=v.useCallback((S,C)=>{c!=null&&C<=c||(r.current.add(Hf(S,C)),r.current.size===1&&u(C))},[c]),g=v.useCallback((S,C)=>{const w=Hf(S,C);r.current.delete(w),d.current.delete(w)},[]),[h]=v.useState(()=>({delayMs:s,durationMs:o})),_=v.useCallback((S,C,w)=>{var M;if(C!==c)return;const k=Hf(S,C),E=(M=d.current.get(k))==null?void 0:M.end,T=f.current;E==null||T==null},[c]),x=v.useCallback((S,C)=>{const w=Hf(S,C);if(!r.current.has(w))return;r.current.delete(w);let k=null;for(const E of r.current){const{startPos:T}=zTe(E);(k==null||T<k)&&(k=T)}k!=null&&u(k)},[]),b=v.useCallback(S=>{(r.current.size===0||r.current.size===1&&S===f.current)&&(e==null||e()),l(C=>Math.max(C!=null?C:0,S))},[e]),y=GTe();return i.jsx(VTe.Provider,{value:{lastPositionCompletedAnimating:a,isDisabled:t,activeStartPos:c,animationTiming:h,segmentText:y,enqueueElement:p,dequeueElement:g,updateElementBounds:m,reportProgress:_,reportReady:x,reportComplete:b},children:n})},WTe="BZ_Pyq_fadeIn",qTe="BZ_Pyq_root",Rlt={"fade-in":"BZ_Pyq_fade-in",fadeIn:WTe,root:qTe},Olt=()=>{const t=Je("3991624489"),e=C1(({wordFadeType:o})=>o),n=C1(({tokenBufferType:o})=>o),s=t.get("animation_duration",jE);return{wordFadeType:v1(e!=null?e:t.get("word_fade_type"),eJ),bufferType:v1(n!=null?n:t.get("token_buffer_type"),XQ),animationDurationMs:s}};function Llt(t){const e=t.replace(/\\/g,"/").split("/").filter(Boolean);return e.length===0?t.trim()||"file":e[e.length-1]}function Dlt(t){const e=t.replace(/\\/g,"/").split("/").filter(Boolean);return e.length===0?"file":e[e.length-1]}function Blt(t){return t.trim().replace(/\\/g,"/").replace(/^\/+/,"")}function Flt(t){if(!t)return null;for(const e of Object.entries(t)){const[n,s]=e;if(n.trim().toLowerCase().endsWith("skill.md"))return e}return null}function Ult(t){const e=t.replace(/^\ufeff/,""),n=e.split(/\r?\n/);let s=0;for(;s<n.length&&!n[s].trim();)s+=1;if(s<n.length&&n[s].trim()==="---"){let o=s+1;for(;o<n.length&&n[o].trim()!=="---";)o+=1;if(o<n.length)return n.slice(o+1).join("\n").trim()}return e.trim()}function Hlt(){return typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():"".concat(Date.now(),"-").concat(Math.random().toString(16).slice(2))}function u$(t,e){return function(){return t.apply(e,arguments)}}const{toString:KTe}=Object.prototype,{getPrototypeOf:PE}=Object,mx=(t=>e=>{const n=KTe.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Ur=t=>(t=t.toLowerCase(),e=>mx(e)===t),px=t=>e=>typeof e===t,{isArray:yf}=Array,Km=px("undefined");function YTe(t){return t!==null&&!Km(t)&&t.constructor!==null&&!Km(t.constructor)&&Go(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const d$=Ur("ArrayBuffer");function ZTe(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&d$(t.buffer),e}const QTe=px("string"),Go=px("function"),f$=px("number"),gx=t=>t!==null&&typeof t=="object",JTe=t=>t===!0||t===!1,s1=t=>{if(mx(t)!=="object")return!1;const e=PE(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},XTe=Ur("Date"),eMe=Ur("File"),tMe=Ur("Blob"),nMe=Ur("FileList"),sMe=t=>gx(t)&&Go(t.pipe),oMe=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||Go(t.append)&&((e=mx(t))==="formdata"||e==="object"&&Go(t.toString)&&t.toString()==="[object FormData]"))},rMe=Ur("URLSearchParams"),[aMe,iMe,lMe,cMe]=["ReadableStream","Request","Response","Headers"].map(Ur),uMe=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function hg(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let s,o;if(typeof t!="object"&&(t=[t]),yf(t))for(s=0,o=t.length;s<o;s++)e.call(null,t[s],s,t);else{const r=n?Object.getOwnPropertyNames(t):Object.keys(t),a=r.length;let l;for(s=0;s<a;s++)l=r[s],e.call(null,t[l],l,t)}}function m$(t,e){e=e.toLowerCase();const n=Object.keys(t);let s=n.length,o;for(;s-- >0;)if(o=n[s],e===o.toLowerCase())return o;return null}const p$=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,g$=t=>!Km(t)&&t!==p$;function yS(){const{caseless:t}=g$(this)&&this||{},e={},n=(s,o)=>{const r=t&&m$(e,o)||o;s1(e[r])&&s1(s)?e[r]=yS(e[r],s):s1(s)?e[r]=yS({},s):yf(s)?e[r]=s.slice():e[r]=s};for(let s=0,o=arguments.length;s<o;s++)arguments[s]&&hg(arguments[s],n);return e}const dMe=(t,e,n,{allOwnKeys:s}={})=>(hg(e,(o,r)=>{n&&Go(o)?t[r]=u$(o,n):t[r]=o},{allOwnKeys:s}),t),fMe=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),mMe=(t,e,n,s)=>{t.prototype=Object.create(e.prototype,s),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},pMe=(t,e,n,s)=>{let o,r,a;const l={};if(e=e||{},t==null)return e;do{for(o=Object.getOwnPropertyNames(t),r=o.length;r-- >0;)a=o[r],(!s||s(a,t,e))&&!l[a]&&(e[a]=t[a],l[a]=!0);t=n!==!1&&PE(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},gMe=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const s=t.indexOf(e,n);return s!==-1&&s===n},hMe=t=>{if(!t)return null;if(yf(t))return t;let e=t.length;if(!f$(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},_Me=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&PE(Uint8Array)),xMe=(t,e)=>{const s=(t&&t[Symbol.iterator]).call(t);let o;for(;(o=s.next())&&!o.done;){const r=o.value;e.call(t,r[0],r[1])}},yMe=(t,e)=>{let n;const s=[];for(;(n=t.exec(e))!==null;)s.push(n);return s},bMe=Ur("HTMLFormElement"),vMe=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,s,o){return s.toUpperCase()+o}),r5=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),SMe=Ur("RegExp"),h$=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),s={};hg(n,(o,r)=>{let a;(a=e(o,r,t))!==!1&&(s[r]=a||o)}),Object.defineProperties(t,s)},CMe=t=>{h$(t,(e,n)=>{if(Go(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const s=t[n];if(Go(s)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},wMe=(t,e)=>{const n={},s=o=>{o.forEach(r=>{n[r]=!0})};return yf(t)?s(t):s(String(t).split(e)),n},kMe=()=>{},EMe=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e,z2="abcdefghijklmnopqrstuvwxyz",a5="0123456789",_$={DIGIT:a5,ALPHA:z2,ALPHA_DIGIT:z2+z2.toUpperCase()+a5},TMe=(t=16,e=_$.ALPHA_DIGIT)=>{let n="";const{length:s}=e;for(;t--;)n+=e[Math.random()*s|0];return n};function MMe(t){return!!(t&&Go(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const AMe=t=>{const e=new Array(10),n=(s,o)=>{if(gx(s)){if(e.indexOf(s)>=0)return;if(!("toJSON"in s)){e[o]=s;const r=yf(s)?[]:{};return hg(s,(a,l)=>{const c=n(a,o+1);!Km(c)&&(r[l]=c)}),e[o]=void 0,r}}return s};return n(t,0)},NMe=Ur("AsyncFunction"),IMe=t=>t&&(gx(t)||Go(t))&&Go(t.then)&&Go(t.catch),Be={isArray:yf,isArrayBuffer:d$,isBuffer:YTe,isFormData:oMe,isArrayBufferView:ZTe,isString:QTe,isNumber:f$,isBoolean:JTe,isObject:gx,isPlainObject:s1,isReadableStream:aMe,isRequest:iMe,isResponse:lMe,isHeaders:cMe,isUndefined:Km,isDate:XTe,isFile:eMe,isBlob:tMe,isRegExp:SMe,isFunction:Go,isStream:sMe,isURLSearchParams:rMe,isTypedArray:_Me,isFileList:nMe,forEach:hg,merge:yS,extend:dMe,trim:uMe,stripBOM:fMe,inherits:mMe,toFlatObject:pMe,kindOf:mx,kindOfTest:Ur,endsWith:gMe,toArray:hMe,forEachEntry:xMe,matchAll:yMe,isHTMLForm:bMe,hasOwnProperty:r5,hasOwnProp:r5,reduceDescriptors:h$,freezeMethods:CMe,toObjectSet:wMe,toCamelCase:vMe,noop:kMe,toFiniteNumber:EMe,findKey:m$,global:p$,isContextDefined:g$,ALPHABET:_$,generateString:TMe,isSpecCompliantForm:MMe,toJSONObject:AMe,isAsyncFn:NMe,isThenable:IMe};function $t(t,e,n,s,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),s&&(this.request=s),o&&(this.response=o)}Be.inherits($t,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Be.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const x$=$t.prototype,y$={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{y$[t]={value:t}});Object.defineProperties($t,y$);Object.defineProperty(x$,"isAxiosError",{value:!0});$t.from=(t,e,n,s,o,r)=>{const a=Object.create(x$);return Be.toFlatObject(t,a,function(c){return c!==Error.prototype},l=>l!=="isAxiosError"),$t.call(a,t.message,e,n,s,o),a.cause=t,a.name=t.name,r&&Object.assign(a,r),a};const jMe=null;function bS(t){return Be.isPlainObject(t)||Be.isArray(t)}function b$(t){return Be.endsWith(t,"[]")?t.slice(0,-2):t}function i5(t,e,n){return t?t.concat(e).map(function(o,r){return o=b$(o),!n&&r?"["+o+"]":o}).join(n?".":""):e}function PMe(t){return Be.isArray(t)&&!t.some(bS)}const RMe=Be.toFlatObject(Be,{},null,function(e){return/^is[A-Z]/.test(e)});function hx(t,e,n){if(!Be.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=Be.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(h,_){return!Be.isUndefined(_[h])});const s=n.metaTokens,o=n.visitor||d,r=n.dots,a=n.indexes,c=(n.Blob||typeof Blob<"u"&&Blob)&&Be.isSpecCompliantForm(e);if(!Be.isFunction(o))throw new TypeError("visitor must be a function");function u(g){if(g===null)return"";if(Be.isDate(g))return g.toISOString();if(!c&&Be.isBlob(g))throw new $t("Blob is not supported. Use a Buffer instead.");return Be.isArrayBuffer(g)||Be.isTypedArray(g)?c&&typeof Blob=="function"?new Blob([g]):Buffer.from(g):g}function d(g,h,_){let x=g;if(g&&!_&&typeof g=="object"){if(Be.endsWith(h,"{}"))h=s?h:h.slice(0,-2),g=JSON.stringify(g);else if(Be.isArray(g)&&PMe(g)||(Be.isFileList(g)||Be.endsWith(h,"[]"))&&(x=Be.toArray(g)))return h=b$(h),x.forEach(function(y,S){!(Be.isUndefined(y)||y===null)&&e.append(a===!0?i5([h],S,r):a===null?h:h+"[]",u(y))}),!1}return bS(g)?!0:(e.append(i5(_,h,r),u(g)),!1)}const f=[],m=Object.assign(RMe,{defaultVisitor:d,convertValue:u,isVisitable:bS});function p(g,h){if(!Be.isUndefined(g)){if(f.indexOf(g)!==-1)throw Error("Circular reference detected in "+h.join("."));f.push(g),Be.forEach(g,function(x,b){(!(Be.isUndefined(x)||x===null)&&o.call(e,x,Be.isString(b)?b.trim():b,h,m))===!0&&p(x,h?h.concat(b):[b])}),f.pop()}}if(!Be.isObject(t))throw new TypeError("data must be an object");return p(t),e}function l5(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(s){return e[s]})}function RE(t,e){this._pairs=[],t&&hx(t,this,e)}const v$=RE.prototype;v$.append=function(e,n){this._pairs.push([e,n])};v$.toString=function(e){const n=e?function(s){return e.call(this,s,l5)}:l5;return this._pairs.map(function(o){return n(o[0])+"="+n(o[1])},"").join("&")};function OMe(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function S$(t,e,n){if(!e)return t;const s=n&&n.encode||OMe,o=n&&n.serialize;let r;if(o?r=o(e,n):r=Be.isURLSearchParams(e)?e.toString():new RE(e,n).toString(s),r){const a=t.indexOf("#");a!==-1&&(t=t.slice(0,a)),t+=(t.indexOf("?")===-1?"?":"&")+r}return t}class c5{constructor(){this.handlers=[]}use(e,n,s){return this.handlers.push({fulfilled:e,rejected:n,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Be.forEach(this.handlers,function(s){s!==null&&e(s)})}}const C$={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},LMe=typeof URLSearchParams<"u"?URLSearchParams:RE,DMe=typeof FormData<"u"?FormData:null,BMe=typeof Blob<"u"?Blob:null,FMe={isBrowser:!0,classes:{URLSearchParams:LMe,FormData:DMe,Blob:BMe},protocols:["http","https","file","blob","url","data"]},OE=typeof window<"u"&&typeof document<"u",UMe=(t=>OE&&["ReactNative","NativeScript","NS"].indexOf(t)<0)(typeof navigator<"u"&&navigator.product),HMe=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",$Me=OE&&window.location.href||"http://localhost",GMe=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:OE,hasStandardBrowserEnv:UMe,hasStandardBrowserWebWorkerEnv:HMe,origin:$Me},Symbol.toStringTag,{value:"Module"})),wr=N(N({},GMe),FMe);function VMe(t,e){return hx(t,new wr.classes.URLSearchParams,Object.assign({visitor:function(n,s,o,r){return wr.isNode&&Be.isBuffer(n)?(this.append(s,n.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},e))}function zMe(t){return Be.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function WMe(t){const e={},n=Object.keys(t);let s;const o=n.length;let r;for(s=0;s<o;s++)r=n[s],e[r]=t[r];return e}function w$(t){function e(n,s,o,r){let a=n[r++];if(a==="__proto__")return!0;const l=Number.isFinite(+a),c=r>=n.length;return a=!a&&Be.isArray(o)?o.length:a,c?(Be.hasOwnProp(o,a)?o[a]=[o[a],s]:o[a]=s,!l):((!o[a]||!Be.isObject(o[a]))&&(o[a]=[]),e(n,s,o[a],r)&&Be.isArray(o[a])&&(o[a]=WMe(o[a])),!l)}if(Be.isFormData(t)&&Be.isFunction(t.entries)){const n={};return Be.forEachEntry(t,(s,o)=>{e(zMe(s),o,n,0)}),n}return null}function qMe(t,e,n){if(Be.isString(t))try{return(e||JSON.parse)(t),Be.trim(t)}catch(s){if(s.name!=="SyntaxError")throw s}return(n||JSON.stringify)(t)}const _g={transitional:C$,adapter:["xhr","http","fetch"],transformRequest:[function(e,n){const s=n.getContentType()||"",o=s.indexOf("application/json")>-1,r=Be.isObject(e);if(r&&Be.isHTMLForm(e)&&(e=new FormData(e)),Be.isFormData(e))return o?JSON.stringify(w$(e)):e;if(Be.isArrayBuffer(e)||Be.isBuffer(e)||Be.isStream(e)||Be.isFile(e)||Be.isBlob(e)||Be.isReadableStream(e))return e;if(Be.isArrayBufferView(e))return e.buffer;if(Be.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let l;if(r){if(s.indexOf("application/x-www-form-urlencoded")>-1)return VMe(e,this.formSerializer).toString();if((l=Be.isFileList(e))||s.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return hx(l?{"files[]":e}:e,c&&new c,this.formSerializer)}}return r||o?(n.setContentType("application/json",!1),qMe(e)):e}],transformResponse:[function(e){const n=this.transitional||_g.transitional,s=n&&n.forcedJSONParsing,o=this.responseType==="json";if(Be.isResponse(e)||Be.isReadableStream(e))return e;if(e&&Be.isString(e)&&(s&&!this.responseType||o)){const a=!(n&&n.silentJSONParsing)&&o;try{return JSON.parse(e)}catch(l){if(a)throw l.name==="SyntaxError"?$t.from(l,$t.ERR_BAD_RESPONSE,this,null,this.response):l}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:wr.classes.FormData,Blob:wr.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Be.forEach(["delete","get","head","post","put","patch"],t=>{_g.headers[t]={}});const KMe=Be.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),YMe=t=>{const e={};let n,s,o;return t&&t.split("\n").forEach(function(a){o=a.indexOf(":"),n=a.substring(0,o).trim().toLowerCase(),s=a.substring(o+1).trim(),!(!n||e[n]&&KMe[n])&&(n==="set-cookie"?e[n]?e[n].push(s):e[n]=[s]:e[n]=e[n]?e[n]+", "+s:s)}),e},u5=Symbol("internals");function $f(t){return t&&String(t).trim().toLowerCase()}function o1(t){return t===!1||t==null?t:Be.isArray(t)?t.map(o1):String(t)}function ZMe(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=n.exec(t);)e[s[1]]=s[2];return e}const QMe=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function W2(t,e,n,s,o){if(Be.isFunction(s))return s.call(this,e,n);if(o&&(e=n),!!Be.isString(e)){if(Be.isString(s))return e.indexOf(s)!==-1;if(Be.isRegExp(s))return s.test(e)}}function JMe(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,s)=>n.toUpperCase()+s)}function XMe(t,e){const n=Be.toCamelCase(" "+e);["get","set","has"].forEach(s=>{Object.defineProperty(t,s+n,{value:function(o,r,a){return this[s].call(this,e,o,r,a)},configurable:!0})})}let co=class{constructor(e){e&&this.set(e)}set(e,n,s){const o=this;function r(l,c,u){const d=$f(c);if(!d)throw new Error("header name must be a non-empty string");const f=Be.findKey(o,d);(!f||o[f]===void 0||u===!0||u===void 0&&o[f]!==!1)&&(o[f||c]=o1(l))}const a=(l,c)=>Be.forEach(l,(u,d)=>r(u,d,c));if(Be.isPlainObject(e)||e instanceof this.constructor)a(e,n);else if(Be.isString(e)&&(e=e.trim())&&!QMe(e))a(YMe(e),n);else if(Be.isHeaders(e))for(const[l,c]of e.entries())r(c,l,s);else e!=null&&r(n,e,s);return this}get(e,n){if(e=$f(e),e){const s=Be.findKey(this,e);if(s){const o=this[s];if(!n)return o;if(n===!0)return ZMe(o);if(Be.isFunction(n))return n.call(this,o,s);if(Be.isRegExp(n))return n.exec(o);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=$f(e),e){const s=Be.findKey(this,e);return!!(s&&this[s]!==void 0&&(!n||W2(this,this[s],s,n)))}return!1}delete(e,n){const s=this;let o=!1;function r(a){if(a=$f(a),a){const l=Be.findKey(s,a);l&&(!n||W2(s,s[l],l,n))&&(delete s[l],o=!0)}}return Be.isArray(e)?e.forEach(r):r(e),o}clear(e){const n=Object.keys(this);let s=n.length,o=!1;for(;s--;){const r=n[s];(!e||W2(this,this[r],r,e,!0))&&(delete this[r],o=!0)}return o}normalize(e){const n=this,s={};return Be.forEach(this,(o,r)=>{const a=Be.findKey(s,r);if(a){n[a]=o1(o),delete n[r];return}const l=e?JMe(r):String(r).trim();l!==r&&delete n[r],n[l]=o1(o),s[l]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return Be.forEach(this,(s,o)=>{s!=null&&s!==!1&&(n[o]=e&&Be.isArray(s)?s.join(", "):s)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join("\n")}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const s=new this(e);return n.forEach(o=>s.set(o)),s}static accessor(e){const s=(this[u5]=this[u5]={accessors:{}}).accessors,o=this.prototype;function r(a){const l=$f(a);s[l]||(XMe(o,a),s[l]=!0)}return Be.isArray(e)?e.forEach(r):r(e),this}};co.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Be.reduceDescriptors(co.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(s){this[n]=s}}});Be.freezeMethods(co);function q2(t,e){const n=this||_g,s=e||n,o=co.from(s.headers);let r=s.data;return Be.forEach(t,function(l){r=l.call(n,r,o.normalize(),e?e.status:void 0)}),o.normalize(),r}function k$(t){return!!(t&&t.__CANCEL__)}function bf(t,e,n){$t.call(this,t==null?"canceled":t,$t.ERR_CANCELED,e,n),this.name="CanceledError"}Be.inherits(bf,$t,{__CANCEL__:!0});function E$(t,e,n){const s=n.config.validateStatus;!n.status||!s||s(n.status)?t(n):e(new $t("Request failed with status code "+n.status,[$t.ERR_BAD_REQUEST,$t.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function e4e(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function t4e(t,e){t=t||10;const n=new Array(t),s=new Array(t);let o=0,r=0,a;return e=e!==void 0?e:1e3,function(c){const u=Date.now(),d=s[r];a||(a=u),n[o]=c,s[o]=u;let f=r,m=0;for(;f!==o;)m+=n[f++],f=f%t;if(o=(o+1)%t,o===r&&(r=(r+1)%t),u-a<e)return;const p=d&&u-d;return p?Math.round(m*1e3/p):void 0}}function n4e(t,e){let n=0;const s=1e3/e;let o=null;return function(){const a=this===!0,l=Date.now();if(a||l-n>s)return o&&(clearTimeout(o),o=null),n=l,t.apply(null,arguments);o||(o=setTimeout(()=>(o=null,n=Date.now(),t.apply(null,arguments)),s-(l-n)))}}const m0=(t,e,n=3)=>{let s=0;const o=t4e(50,250);return n4e(r=>{const a=r.loaded,l=r.lengthComputable?r.total:void 0,c=a-s,u=o(c),d=a<=l;s=a;const f={loaded:a,total:l,progress:l?a/l:void 0,bytes:c,rate:u||void 0,estimated:u&&l&&d?(l-a)/u:void 0,event:r,lengthComputable:l!=null};f[e?"download":"upload"]=!0,t(f)},n)},s4e=wr.hasStandardBrowserEnv?(function(){const e=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");let s;function o(r){let a=r;return e&&(n.setAttribute("href",a),a=n.href),n.setAttribute("href",a),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return s=o(window.location.href),function(a){const l=Be.isString(a)?o(a):a;return l.protocol===s.protocol&&l.host===s.host}})():(function(){return function(){return!0}})(),o4e=wr.hasStandardBrowserEnv?{write(t,e,n,s,o,r){const a=[t+"="+encodeURIComponent(e)];Be.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),Be.isString(s)&&a.push("path="+s),Be.isString(o)&&a.push("domain="+o),r===!0&&a.push("secure"),document.cookie=a.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function r4e(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function a4e(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function T$(t,e){return t&&!r4e(e)?a4e(t,e):e}const d5=t=>t instanceof co?N({},t):t;function Ac(t,e){e=e||{};const n={};function s(u,d,f){return Be.isPlainObject(u)&&Be.isPlainObject(d)?Be.merge.call({caseless:f},u,d):Be.isPlainObject(d)?Be.merge({},d):Be.isArray(d)?d.slice():d}function o(u,d,f){if(Be.isUndefined(d)){if(!Be.isUndefined(u))return s(void 0,u,f)}else return s(u,d,f)}function r(u,d){if(!Be.isUndefined(d))return s(void 0,d)}function a(u,d){if(Be.isUndefined(d)){if(!Be.isUndefined(u))return s(void 0,u)}else return s(void 0,d)}function l(u,d,f){if(f in e)return s(u,d);if(f in t)return s(void 0,u)}const c={url:r,method:r,data:r,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:l,headers:(u,d)=>o(d5(u),d5(d),!0)};return Be.forEach(Object.keys(Object.assign({},t,e)),function(d){const f=c[d]||o,m=f(t[d],e[d],d);Be.isUndefined(m)&&f!==l||(n[d]=m)}),n}const M$=t=>{const e=Ac({},t);let{data:n,withXSRFToken:s,xsrfHeaderName:o,xsrfCookieName:r,headers:a,auth:l}=e;e.headers=a=co.from(a),e.url=S$(T$(e.baseURL,e.url),t.params,t.paramsSerializer),l&&a.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):"")));let c;if(Be.isFormData(n)){if(wr.hasStandardBrowserEnv||wr.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if((c=a.getContentType())!==!1){const[u,...d]=c?c.split(";").map(f=>f.trim()).filter(Boolean):[];a.setContentType([u||"multipart/form-data",...d].join("; "))}}if(wr.hasStandardBrowserEnv&&(s&&Be.isFunction(s)&&(s=s(e)),s||s!==!1&&s4e(e.url))){const u=o&&r&&o4e.read(r);u&&a.set(o,u)}return e},i4e=typeof XMLHttpRequest<"u",l4e=i4e&&function(t){return new Promise(function(n,s){const o=M$(t);let r=o.data;const a=co.from(o.headers).normalize();let{responseType:l}=o,c;function u(){o.cancelToken&&o.cancelToken.unsubscribe(c),o.signal&&o.signal.removeEventListener("abort",c)}let d=new XMLHttpRequest;d.open(o.method.toUpperCase(),o.url,!0),d.timeout=o.timeout;function f(){if(!d)return;const p=co.from("getAllResponseHeaders"in d&&d.getAllResponseHeaders()),h={data:!l||l==="text"||l==="json"?d.responseText:d.response,status:d.status,statusText:d.statusText,headers:p,config:t,request:d};E$(function(x){n(x),u()},function(x){s(x),u()},h),d=null}"onloadend"in d?d.onloadend=f:d.onreadystatechange=function(){!d||d.readyState!==4||d.status===0&&!(d.responseURL&&d.responseURL.indexOf("file:")===0)||setTimeout(f)},d.onabort=function(){d&&(s(new $t("Request aborted",$t.ECONNABORTED,o,d)),d=null)},d.onerror=function(){s(new $t("Network Error",$t.ERR_NETWORK,o,d)),d=null},d.ontimeout=function(){let g=o.timeout?"timeout of "+o.timeout+"ms exceeded":"timeout exceeded";const h=o.transitional||C$;o.timeoutErrorMessage&&(g=o.timeoutErrorMessage),s(new $t(g,h.clarifyTimeoutError?$t.ETIMEDOUT:$t.ECONNABORTED,o,d)),d=null},r===void 0&&a.setContentType(null),"setRequestHeader"in d&&Be.forEach(a.toJSON(),function(g,h){d.setRequestHeader(h,g)}),Be.isUndefined(o.withCredentials)||(d.withCredentials=!!o.withCredentials),l&&l!=="json"&&(d.responseType=o.responseType),typeof o.onDownloadProgress=="function"&&d.addEventListener("progress",m0(o.onDownloadProgress,!0)),typeof o.onUploadProgress=="function"&&d.upload&&d.upload.addEventListener("progress",m0(o.onUploadProgress)),(o.cancelToken||o.signal)&&(c=p=>{d&&(s(!p||p.type?new bf(null,t,d):p),d.abort(),d=null)},o.cancelToken&&o.cancelToken.subscribe(c),o.signal&&(o.signal.aborted?c():o.signal.addEventListener("abort",c)));const m=e4e(o.url);if(m&&wr.protocols.indexOf(m)===-1){s(new $t("Unsupported protocol "+m+":",$t.ERR_BAD_REQUEST,t));return}d.send(r||null)})},c4e=(t,e)=>{let n=new AbortController,s;const o=function(c){if(!s){s=!0,a();const u=c instanceof Error?c:this.reason;n.abort(u instanceof $t?u:new bf(u instanceof Error?u.message:u))}};let r=e&&setTimeout(()=>{o(new $t("timeout ".concat(e," of ms exceeded"),$t.ETIMEDOUT))},e);const a=()=>{t&&(r&&clearTimeout(r),r=null,t.forEach(c=>{c&&(c.removeEventListener?c.removeEventListener("abort",o):c.unsubscribe(o))}),t=null)};t.forEach(c=>c&&c.addEventListener&&c.addEventListener("abort",o));const{signal:l}=n;return l.unsubscribe=a,[l,()=>{r&&clearTimeout(r),r=null}]},u4e=function*(t,e){let n=t.byteLength;if(n<e){yield t;return}let s=0,o;for(;s<n;)o=s+e,yield t.slice(s,o),s=o},d4e=function(t,e,n){return po(this,null,function*(){try{for(var s=Ao(t),o,r,a;o=!(r=yield new dn(s.next())).done;o=!1){const l=r.value;yield*Mf(u4e(ArrayBuffer.isView(l)?l:yield new dn(n(String(l))),e))}}catch(r){a=[r]}finally{try{o&&(r=s.return)&&(yield new dn(r.call(s)))}finally{if(a)throw a[0]}}})},f5=(t,e,n,s,o)=>{const r=d4e(t,e,o);let a=0;return new ReadableStream({type:"bytes",async pull(l){const{done:c,value:u}=await r.next();if(c){l.close(),s();return}let d=u.byteLength;n&&n(a+=d),l.enqueue(new Uint8Array(u))},cancel(l){return s(l),r.return()}},{highWaterMark:2})},m5=(t,e)=>{const n=t!=null;return s=>setTimeout(()=>e({lengthComputable:n,total:t,loaded:s}))},_x=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",A$=_x&&typeof ReadableStream=="function",vS=_x&&(typeof TextEncoder=="function"?(t=>e=>t.encode(e))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),f4e=A$&&(()=>{let t=!1;const e=new Request(wr.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e})(),p5=64*1024,SS=A$&&!!(()=>{try{return Be.isReadableStream(new Response("").body)}catch(t){}})(),p0={stream:SS&&(t=>t.body)};_x&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!p0[e]&&(p0[e]=Be.isFunction(t[e])?n=>n[e]():(n,s)=>{throw new $t("Response type '".concat(e,"' is not supported"),$t.ERR_NOT_SUPPORT,s)})})})(new Response);const m4e=async t=>{if(t==null)return 0;if(Be.isBlob(t))return t.size;if(Be.isSpecCompliantForm(t))return(await new Request(t).arrayBuffer()).byteLength;if(Be.isArrayBufferView(t))return t.byteLength;if(Be.isURLSearchParams(t)&&(t=t+""),Be.isString(t))return(await vS(t)).byteLength},p4e=async(t,e)=>{const n=Be.toFiniteNumber(t.getContentLength());return n==null?m4e(e):n},g4e=_x&&(async t=>{let{url:e,method:n,data:s,signal:o,cancelToken:r,timeout:a,onDownloadProgress:l,onUploadProgress:c,responseType:u,headers:d,withCredentials:f="same-origin",fetchOptions:m}=M$(t);u=u?(u+"").toLowerCase():"text";let[p,g]=o||r||a?c4e([o,r],a):[],h,_;const x=()=>{!h&&setTimeout(()=>{p&&p.unsubscribe()}),h=!0};let b;try{if(c&&f4e&&n!=="get"&&n!=="head"&&(b=await p4e(d,s))!==0){let w=new Request(e,{method:"POST",body:s,duplex:"half"}),k;Be.isFormData(s)&&(k=w.headers.get("content-type"))&&d.setContentType(k),w.body&&(s=f5(w.body,p5,m5(b,m0(c)),null,vS))}Be.isString(f)||(f=f?"cors":"omit"),_=new Request(e,G(N({},m),{signal:p,method:n.toUpperCase(),headers:d.normalize().toJSON(),body:s,duplex:"half",withCredentials:f}));let y=await fetch(_);const S=SS&&(u==="stream"||u==="response");if(SS&&(l||S)){const w={};["status","statusText","headers"].forEach(E=>{w[E]=y[E]});const k=Be.toFiniteNumber(y.headers.get("content-length"));y=new Response(f5(y.body,p5,l&&m5(k,m0(l,!0)),S&&x,vS),w)}u=u||"text";let C=await p0[Be.findKey(p0,u)||"text"](y,t);return!S&&x(),g&&g(),await new Promise((w,k)=>{E$(w,k,{data:C,headers:co.from(y.headers),status:y.status,statusText:y.statusText,config:t,request:_})})}catch(y){throw x(),y&&y.name==="TypeError"&&/fetch/i.test(y.message)?Object.assign(new $t("Network Error",$t.ERR_NETWORK,t,_),{cause:y.cause||y}):$t.from(y,y&&y.code,t,_)}}),CS={http:jMe,xhr:l4e,fetch:g4e};Be.forEach(CS,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch(n){}Object.defineProperty(t,"adapterName",{value:e})}});const g5=t=>"- ".concat(t),h4e=t=>Be.isFunction(t)||t===null||t===!1,N$={getAdapter:t=>{t=Be.isArray(t)?t:[t];const{length:e}=t;let n,s;const o={};for(let r=0;r<e;r++){n=t[r];let a;if(s=n,!h4e(n)&&(s=CS[(a=String(n)).toLowerCase()],s===void 0))throw new $t("Unknown adapter '".concat(a,"'"));if(s)break;o[a||"#"+r]=s}if(!s){const r=Object.entries(o).map(([l,c])=>"adapter ".concat(l," ")+(c===!1?"is not supported by the environment":"is not available in the build"));let a=e?r.length>1?"since :\n"+r.map(g5).join("\n"):" "+g5(r[0]):"as no adapter specified";throw new $t("There is no suitable adapter to dispatch the request "+a,"ERR_NOT_SUPPORT")}return s},adapters:CS};function K2(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new bf(null,t)}function h5(t){return K2(t),t.headers=co.from(t.headers),t.data=q2.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),N$.getAdapter(t.adapter||_g.adapter)(t).then(function(s){return K2(t),s.data=q2.call(t,t.transformResponse,s),s.headers=co.from(s.headers),s},function(s){return k$(s)||(K2(t),s&&s.response&&(s.response.data=q2.call(t,t.transformResponse,s.response),s.response.headers=co.from(s.response.headers))),Promise.reject(s)})}const I$="1.7.2",LE={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{LE[t]=function(s){return typeof s===t||"a"+(e<1?"n ":" ")+t}});const _5={};LE.transitional=function(e,n,s){function o(r,a){return"[Axios v"+I$+"] Transitional option '"+r+"'"+a+(s?". "+s:"")}return(r,a,l)=>{if(e===!1)throw new $t(o(a," has been removed"+(n?" in "+n:"")),$t.ERR_DEPRECATED);return n&&!_5[a]&&(_5[a]=!0,console.warn(o(a," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(r,a,l):!0}};function _4e(t,e,n){if(typeof t!="object")throw new $t("options must be an object",$t.ERR_BAD_OPTION_VALUE);const s=Object.keys(t);let o=s.length;for(;o-- >0;){const r=s[o],a=e[r];if(a){const l=t[r],c=l===void 0||a(l,r,t);if(c!==!0)throw new $t("option "+r+" must be "+c,$t.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new $t("Unknown option "+r,$t.ERR_BAD_OPTION)}}const wS={assertOptions:_4e,validators:LE},ki=wS.validators;let uc=class{constructor(e){this.defaults=e,this.interceptors={request:new c5,response:new c5}}async request(e,n){try{return await this._request(e,n)}catch(s){if(s instanceof Error){let o;Error.captureStackTrace?Error.captureStackTrace(o={}):o=new Error;const r=o.stack?o.stack.replace(/^.+\n/,""):"";try{s.stack?r&&!String(s.stack).endsWith(r.replace(/^.+\n.+\n/,""))&&(s.stack+="\n"+r):s.stack=r}catch(a){}}throw s}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=Ac(this.defaults,n);const{transitional:s,paramsSerializer:o,headers:r}=n;s!==void 0&&wS.assertOptions(s,{silentJSONParsing:ki.transitional(ki.boolean),forcedJSONParsing:ki.transitional(ki.boolean),clarifyTimeoutError:ki.transitional(ki.boolean)},!1),o!=null&&(Be.isFunction(o)?n.paramsSerializer={serialize:o}:wS.assertOptions(o,{encode:ki.function,serialize:ki.function},!0)),n.method=(n.method||this.defaults.method||"get").toLowerCase();let a=r&&Be.merge(r.common,r[n.method]);r&&Be.forEach(["delete","get","head","post","put","patch","common"],g=>{delete r[g]}),n.headers=co.concat(a,r);const l=[];let c=!0;this.interceptors.request.forEach(function(h){typeof h.runWhen=="function"&&h.runWhen(n)===!1||(c=c&&h.synchronous,l.unshift(h.fulfilled,h.rejected))});const u=[];this.interceptors.response.forEach(function(h){u.push(h.fulfilled,h.rejected)});let d,f=0,m;if(!c){const g=[h5.bind(this),void 0];for(g.unshift.apply(g,l),g.push.apply(g,u),m=g.length,d=Promise.resolve(n);f<m;)d=d.then(g[f++],g[f++]);return d}m=l.length;let p=n;for(f=0;f<m;){const g=l[f++],h=l[f++];try{p=g(p)}catch(_){h.call(this,_);break}}try{d=h5.call(this,p)}catch(g){return Promise.reject(g)}for(f=0,m=u.length;f<m;)d=d.then(u[f++],u[f++]);return d}getUri(e){e=Ac(this.defaults,e);const n=T$(e.baseURL,e.url);return S$(n,e.params,e.paramsSerializer)}};Be.forEach(["delete","get","head","options"],function(e){uc.prototype[e]=function(n,s){return this.request(Ac(s||{},{method:e,url:n,data:(s||{}).data}))}});Be.forEach(["post","put","patch"],function(e){function n(s){return function(r,a,l){return this.request(Ac(l||{},{method:e,headers:s?{"Content-Type":"multipart/form-data"}:{},url:r,data:a}))}}uc.prototype[e]=n(),uc.prototype[e+"Form"]=n(!0)});let x4e=class j${constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(r){n=r});const s=this;this.promise.then(o=>{if(!s._listeners)return;let r=s._listeners.length;for(;r-- >0;)s._listeners[r](o);s._listeners=null}),this.promise.then=o=>{let r;const a=new Promise(l=>{s.subscribe(l),r=l}).then(o);return a.cancel=function(){s.unsubscribe(r)},a},e(function(r,a,l){s.reason||(s.reason=new bf(r,a,l),n(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}static source(){let e;return{token:new j$(function(o){e=o}),cancel:e}}};function y4e(t){return function(n){return t.apply(null,n)}}function b4e(t){return Be.isObject(t)&&t.isAxiosError===!0}const kS={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(kS).forEach(([t,e])=>{kS[e]=t});function P$(t){const e=new uc(t),n=u$(uc.prototype.request,e);return Be.extend(n,uc.prototype,e,{allOwnKeys:!0}),Be.extend(n,e,null,{allOwnKeys:!0}),n.create=function(o){return P$(Ac(t,o))},n}const ss=P$(_g);ss.Axios=uc;ss.CanceledError=bf;ss.CancelToken=x4e;ss.isCancel=k$;ss.VERSION=I$;ss.toFormData=hx;ss.AxiosError=$t;ss.Cancel=ss.CanceledError;ss.all=function(e){return Promise.all(e)};ss.spread=y4e;ss.isAxiosError=b4e;ss.mergeConfig=Ac;ss.AxiosHeaders=co;ss.formToJSON=t=>w$(Be.isHTMLForm(t)?new FormData(t):t);ss.getAdapter=N$.getAdapter;ss.HttpStatusCode=kS;ss.default=ss;const{Axios:v4e,AxiosError:S4e,CanceledError:C4e,isCancel:w4e,CancelToken:k4e,VERSION:E4e,all:T4e,Cancel:M4e,isAxiosError:A4e,spread:N4e,toFormData:I4e,AxiosHeaders:j4e,HttpStatusCode:P4e,formToJSON:R4e,getAdapter:O4e,mergeConfig:L4e}=ss,Vlt=Object.freeze(Object.defineProperty({__proto__:null,Axios:v4e,AxiosError:S4e,AxiosHeaders:j4e,Cancel:M4e,CancelToken:k4e,CanceledError:C4e,HttpStatusCode:P4e,VERSION:E4e,all:T4e,default:ss,formToJSON:R4e,getAdapter:O4e,isAxiosError:A4e,isCancel:w4e,mergeConfig:L4e,spread:N4e,toFormData:I4e},Symbol.toStringTag,{value:"Module"})),rr=we({networkError:{defaultMessage:"We couldn't upload or create the skill because your network connection was interrupted. Check your connection and try again.",id:"hazelnutsSettings.networkError"},permissionDenied:{defaultMessage:"You don't have permission to upload or create skills in this workspace.",id:"hazelnutsSettings.permissionDenied"},invalidZip:{defaultMessage:"That file isn't a valid .zip skill archive. Re-export the skill and try again.",id:"hazelnutsSettings.invalidZip"},archiveTooLarge:{defaultMessage:"This .zip file is too large to upload. Remove large files or split the skill into smaller archives.",id:"hazelnutsSettings.archiveTooLarge"},archiveUnsafeCompression:{defaultMessage:"That .zip file can't be opened because it appears to be over-compressed. Re-export the skill archive and try again.",id:"hazelnutsSettings.archiveUnsafeCompression"},archiveEmpty:{defaultMessage:"We couldn't find any skills in that .zip file. Make sure it contains a SKILL.md file and try again.",id:"hazelnutsSettings.archiveEmpty"},duplicateName:{defaultMessage:"A skill with this name already exists in your workspace. Rename the skill and try again.",id:"hazelnutsSettings.duplicateName"},invalidEncoding:{defaultMessage:"SKILL.md must be saved as UTF-8. Re-save the file and try again.",id:"hazelnutsSettings.invalidEncoding"},timeout:{defaultMessage:"Skill creation is taking longer than expected. Please try again.",id:"hazelnutsSettings.timeout"}});function zlt({error:t,intl:e,fallbackMessage:n}){var u;const s=t instanceof Vn?t:void 0,o=ss.isAxiosError(t)?(u=t.response)==null?void 0:u.status:void 0,r=o!=null?o:s==null?void 0:s.status,l=(t instanceof Error?t.message:"").toLowerCase();if(zh(t))return e.formatMessage(rr.networkError);if(r===401||r===403)return e.formatMessage(rr.permissionDenied);if(r===408||r===504||l.includes("timeout"))return e.formatMessage(rr.timeout);if(r===413)return e.formatMessage(rr.archiveTooLarge);if((s==null?void 0:s.code)==="hazelnut_duplicate_name")return e.formatMessage(rr.duplicateName);if(l.includes("not a valid zip"))return e.formatMessage(rr.invalidZip);if(l.includes("no skills parsed from archive"))return e.formatMessage(rr.archiveEmpty);if(l.includes("too large to extract safely"))return e.formatMessage(rr.archiveTooLarge);if(l.includes("over-compressed"))return e.formatMessage(rr.archiveUnsafeCompression);if(l.includes("skill.md must be utf-8 encoded"))return e.formatMessage(rr.invalidEncoding);if(l.includes("files must include at least one entry"))return e.formatMessage(rr.archiveEmpty);const c=Q0(t);return c||e.formatMessage(n)}const g0=["hazelnuts"];function D4e(t){"use forget";const e=D.c(12),{hazelnutId:n}=t;let s;e[0]!==n?(s=["hazelnut",n],e[0]=n,e[1]=s):s=e[1];const o=!!n;let r;e[2]!==n?(r=async()=>await ue.safeGet("/hazelnuts/{hazelnut_id}",{parameters:{path:{hazelnut_id:n},query:{include_permissions:!0}}}),e[2]=n,e[3]=r):r=e[3];let a;e[4]!==s||e[5]!==o||e[6]!==r?(a={queryKey:s,enabled:o,queryFn:r},e[4]=s,e[5]=o,e[6]=r,e[7]=a):a=e[7];const{data:l,isLoading:c,isError:u}=ut(a);let d;return e[8]!==u||e[9]!==c||e[10]!==l?(d={skillData:l,isLoadingSkill:c,didFailSkillLoad:u},e[8]=u,e[9]=c,e[10]=l,e[11]=d):d=e[11],d}function DE(t){"use forget";const e=D.c(9);let n;e[0]===Symbol.for("react.memo_cache_sentinel")?(n=rk(),e[0]=n):n=e[0];const s=n,{hasPermission:o,isLoading:r}=xF(Xi.SkillsAccess),a=t==null?void 0:t.scope;let l;e[1]!==a?(l=a?[...g0,a]:g0,e[1]=a,e[2]=l):l=e[2];let c;e[3]!==a?(c=async()=>await ue.safeGet("/hazelnuts",{parameters:{query:N({include_permissions:!0},a?{scope:a}:{})}}),e[3]=a,e[4]=c):c=e[4];const u=s&&!r&&o;let d;return e[5]!==l||e[6]!==c||e[7]!==u?(d={queryKey:l,queryFn:c,enabled:u,staleTime:3e5},e[5]=l,e[6]=c,e[7]=u,e[8]=d):d=e[8],ut(d)}function Wlt(t){return ue.safePost("/hazelnuts/draft/uploads",{requestBody:{files:t}})}async function qlt(t,e){const n=await ue.safePost("/hazelnuts/draft",{requestBody:t});return await e.invalidateQueries({queryKey:g0}),n}function Klt(t){"use forget";const e=D.c(8),{hazelnutId:n,isEnabled:s}=t,o=s===void 0?!0:s;let r;e[0]!==n?(r=["hazelnut-share",n],e[0]=n,e[1]=r):r=e[1];const a=!!(o&&n);let l;e[2]!==n?(l=async()=>{const u=await ue.safeGet("/hazelnuts/{hazelnut_id}/share",{parameters:{path:{hazelnut_id:n}}}),d=B4e(u)?u.workspace_access_state:void 0;return{principals:u.principals,workspace_access_state:d}},e[2]=n,e[3]=l):l=e[3];let c;return e[4]!==r||e[5]!==a||e[6]!==l?(c={queryKey:r,enabled:a,queryFn:l},e[4]=r,e[5]=a,e[6]=l,e[7]=c):c=e[7],ut(c)}function B4e(t){return typeof t=="object"&&t!=null&&"workspace_access_state"in t}async function Ylt(t,e,n){const s=await ue.safePost("/hazelnuts/{hazelnut_id}/share",{parameters:{path:{hazelnut_id:t}},requestBody:{targets:e}});return await n.invalidateQueries({queryKey:["hazelnut-share",t]}),s}async function Zlt(t,e,n){await ue.safePost("/hazelnuts/{hazelnut_id}/workspace-access",{parameters:{path:{hazelnut_id:t}},requestBody:{state:e}}),await n.invalidateQueries({queryKey:["hazelnut-share",t]}),await n.invalidateQueries({queryKey:g0}),await n.invalidateQueries({queryKey:["hazelnuts-dashboard"]})}async function Qlt(t,e,n){await ue.safeDelete("/hazelnuts/{hazelnut_id}/share",{parameters:{path:{hazelnut_id:t}},requestBody:{principal_type:e.principal_type,principal_id:e.principal_id}}),await n.invalidateQueries({queryKey:["hazelnut-share",t]})}function Jlt(t,e){return ue.safePost("/hazelnuts/{hazelnut_id}/files/get_download_link",{parameters:{path:{hazelnut_id:t}},requestBody:{file_id:e}})}async function Xlt(t,e){const n=await ue.safePost("/hazelnuts/{hazelnut_id}/files/download",{parameters:{path:{hazelnut_id:t}},requestBody:{path:e},skipJsonTransform:!0});if(!(n instanceof Response)||!n.ok)throw new Error("Unable to download local file content");return n.arrayBuffer()}async function ect(t){await ue.safeDelete("/hazelnuts/{hazelnut_id}",{parameters:{path:{hazelnut_id:t}}})}function tct(t){return ue.safePost("/hazelnuts/{hazelnut_id}/clone",{parameters:{path:{hazelnut_id:t}}})}async function nct(t,e,n){await ue.safePost("/hazelnuts/{hazelnut_id}/status",{parameters:{path:{hazelnut_id:t}},requestBody:{enabled:e}}),n&&await n.invalidateQueries({queryKey:["hazelnut",t]})}const ES="hazelnuts",sct=({clientThreadId:t})=>{const[e,n]=wo(),{data:s,isLoading:o}=DE({scope:"personal"});v.useEffect(()=>{const r=e.get(ES);if(!r||o||!s)return;const a=r.split(",").map(u=>u.trim()).filter(Boolean),l=new Set(s.hazelnuts.map(u=>u.id)),c=a.filter(u=>l.has(u));c.length!==0&&pt(t,u=>{var m;const d=(m=u.selectedHazelnuts)!=null?m:[],f=new Set(d);c.forEach(p=>f.add(p)),u.selectedHazelnuts=Array.from(f)}),n(u=>(u.delete(ES),u),{replace:!0})},[t,s,o,e,n])},F4e="gpt-5-2-thinking",U4e=t=>"I just added the ".concat(t," skill. Let's explore what it does with an example. Make up a realistic user prompt and then use the full Skill end to end."),H4e=(t,e)=>{const n=new URLSearchParams;return n.set(ES,t),n.set("prompt",U4e(e)),n.set("model",F4e),n},R$=je(()=>Me(()=>import("./15dffd5b-cjdf3agzl91geeph.js"),__vite__mapDeps([250,1,2,3,230,75,231,251,252,253,254,68,26,27,28,33,69,65,29,36])).then(t=>t.SkillSharingModal)),$4e=(t,e,n)=>{"use forget";const s=D.c(10),o=t!=null?t:"";let r;s[0]!==o?(r={hazelnutId:o},s[0]=o,s[1]=r):r=s[1];const{skillData:a,didFailSkillLoad:l}=D4e(r),c=te();let u,d;s[2]!==l||s[3]!==c||s[4]!==e||s[5]!==n||s[6]!==a||s[7]!==t?(u=()=>{t&&(l&&(lp().danger(c.formatMessage({id:"H2Bc95",defaultMessage:"Skill not found, please verify you are in the right workspace and that the skill has been shared with you"})),e()),a!=null&&(V.logStructuredEvent(tJ,{hazelnutId:t!=null?t:""}),rt(R$,{skill:a,onClose:e,onTryIt:n})))},d=[a,e,l,n,c,t],s[2]=l,s[3]=c,s[4]=e,s[5]=n,s[6]=a,s[7]=t,s[8]=u,s[9]=d):(u=s[8],d=s[9]),v.useEffect(u,d)};function oct(t,e,n){rt(R$,{skill:t,onClose:e,onTryIt:n})}function rct(t){"use forget";const e=D.c(6),{searchParams:n,setSearchParams:s}=t,o=bt();let r;e[0]!==s?(r=()=>{s(G4e)},e[0]=s,e[1]=r):r=e[1];const a=r;let l;e[2]!==o?(l=d=>{var m;const f=H4e(d.id,(m=d.name)!=null?m:"this");Ea(o,{params:f})},e[2]=o,e[3]=l):l=e[3];const c=l;let u;return e[4]!==n?(u=n.get("hazelnut_id"),e[4]=n,e[5]=u):u=e[5],$4e(u,a,c),null}function G4e(t){const e=new URLSearchParams(t);return e.delete("hazelnut_id"),e}const V4e=re(me,"19c64a",20,20),Bl=we({expand:{id:"etYaQU",defaultMessage:"Expand"},loadingDescription:{id:"rIL86E",defaultMessage:"Loading skill preview"},errorDescription:{id:"qR+XK1",defaultMessage:"We could not load this skill preview."},addToLibrary:{id:"kHOMbo",defaultMessage:"Add to library"},tryInChat:{id:"BIPBqt",defaultMessage:"Try in chat"},replaceSkill:{id:"5cxz1B",defaultMessage:"Update skill in library"}}),act=t=>{"use forget";const e=D.c(33),{title:n,description:s,isLoading:o,isError:r,isExpandDisabled:a,isAddDisabled:l,isInLibrary:c,isAdding:u,canReplace:d,isReplacing:f,onExpand:m,onAddToLibrary:p,onTryInChat:g,onReplaceSkill:h}=t,_=o===void 0?!1:o,x=r===void 0?!1:r,b=a===void 0?!1:a,y=l===void 0?!1:l,S=c===void 0?!1:c,C=u===void 0?!1:u,w=d===void 0?!1:d,k=f===void 0?!1:f,E=te();let T;e[0]!==s||e[1]!==x||e[2]!==_?(T=x?i.jsx(P,N({},Bl.errorDescription)):_?i.jsx(P,N({},Bl.loadingDescription)):s,e[0]=s,e[1]=x,e[2]=_,e[3]=T):T=e[3];const M=T;let A;e[4]!==n?(A=i.jsx("div",{className:"text-token-text-primary text-sm font-semibold",children:n}),e[4]=n,e[5]=A):A=e[5];let I;e[6]!==E?(I=E.formatMessage(Bl.expand),e[6]=E,e[7]=I):I=e[7];let j;e[8]===Symbol.for("react.memo_cache_sentinel")?(j=i.jsx(V4e,{className:"icon-sm"}),e[8]=j):j=e[8];let R;e[9]!==b||e[10]!==m||e[11]!==I?(R=i.jsx(Zxe,{label:I,icon:j,onClick:m,disabled:b}),e[9]=b,e[10]=m,e[11]=I,e[12]=R):R=e[12];let O;e[13]!==A||e[14]!==R?(O=i.jsxs("div",{className:"flex items-center gap-2",children:[A,R]}),e[13]=A,e[14]=R,e[15]=O):O=e[15];let L;e[16]!==w||e[17]!==y||e[18]!==C||e[19]!==S||e[20]!==k||e[21]!==p||e[22]!==h||e[23]!==g?(L=i.jsx("div",{className:"flex items-center gap-2",children:S&&w?i.jsxs(i.Fragment,{children:[i.jsx(Se,{size:"small",color:"primary",onClick:h,disabled:y||k||!h,loading:k,type:"button",children:i.jsx(P,N({},Bl.replaceSkill))}),i.jsx(Se,{size:"small",color:"secondary",onClick:g,disabled:y||k||!g,type:"button",children:i.jsx(P,N({},Bl.tryInChat))})]}):i.jsx(Se,{size:"small",color:S?"secondary":"primary",onClick:S?g:p,disabled:y||(S?!g:!p),loading:!S&&C,type:"button",children:i.jsx(P,N({},S?Bl.tryInChat:Bl.addToLibrary))})}),e[16]=w,e[17]=y,e[18]=C,e[19]=S,e[20]=k,e[21]=p,e[22]=h,e[23]=g,e[24]=L):L=e[24];let B;e[25]!==O||e[26]!==L?(B=i.jsxs("div",{className:"flex items-start justify-between gap-3",children:[O,L]}),e[25]=O,e[26]=L,e[27]=B):B=e[27];let U;e[28]!==M?(U=i.jsx("div",{className:"text-token-text-secondary line-clamp-2 text-sm",children:M}),e[28]=M,e[29]=U):U=e[29];let H;return e[30]!==B||e[31]!==U?(H=i.jsxs("div",{className:"border-token-border-light bg-tertiary flex flex-col gap-2 rounded-2xl border px-4 py-3",children:[B,U]}),e[30]=B,e[31]=U,e[32]=H):H=e[32],H};async function ict(t,e,n,s){const o=s?await ue.safeGet("/share/{shared_conversation_id}/file_from_message/{message_id}",{parameters:{path:{shared_conversation_id:e,message_id:t},query:{file_path:n}},authOption:Ot.SendIfAvailable}):await ue.safeGet("/conversation/{conversation_id}/interpreter/download",{parameters:{path:{conversation_id:e},query:{message_id:t,sandbox_path:n}}});if(o.status===Yd.Success)return o;throw new nJ("Could not download file from advanced data analysis","error_code"in o?o.error_code:"unknown_error")}function O$(){return xe("2304807207")}function x5({text:t}){return t&&t.length>0?i.jsx("span",{className:"result-streaming streaming-dot loading-shimmer relative pt-1",children:i.jsx(Cr,{children:t})}):i.jsx("span",{className:"result-streaming streaming-dot relative pt-1",children:""})}function lct(t,e,n,s){var o;return(o=z4e(t))!=null?o:K4e(t,e,n,s)}function z4e(t){var u,d,f;const{errType:e,errCode:n,err:s,disclaimers:o}=(u=t.clientMetadata)!=null?u:{},r=q4e(t),a=n!==mr.ModelIncompatibility&&n!==mr.ContentPolicy&&((f=(d=t.clientMetadata)==null?void 0:d.canRetry)!=null?f:!0);if(r&&W4e(t))return{flagSeverity:"warning",shouldHideContent:!0,errCode:mr.ContentRegurgitation,errMessage:s,canRetry:a};if(!(o&&o.length>0)&&r)return{flagSeverity:"warning",shouldHideContent:!0,errCode:mr.ContentOrTos,errMessage:s,canRetry:a};if(e)return{flagSeverity:e,shouldHideContent:e==="danger"&&(n===mr.ContentPolicy||n===mr.ModelIncompatibility),disclaimers:o,errCode:n,errMessage:s,canRetry:a}}function W4e(t){var e;return((e=t.metadata)==null?void 0:e.safety_plugin_status_code)===123}function q4e(t){var e,n;return((n=(e=t.metadata)==null?void 0:e.finish_details)==null?void 0:n.type)==="content_filter"}function K4e(t,e,n,s){var a,l,c,u,d,f,m;const o=t.metadata&&"voice_mode_message"in t.metadata;if(!n&&e&&(t==null?void 0:t.author.role)===dt.User&&t.status!==void 0&&!o&&!s&&!0)return{flagSeverity:"info",shouldHideContent:!1,errCode:Yl.MissingLastCompletion,canRetry:!0};if(((l=(a=t.metadata)==null?void 0:a.finish_details)==null?void 0:l.type)==="interrupted"&&((u=(c=t.metadata)==null?void 0:c.finish_details)==null?void 0:u.reason)==="server_error")return{flagSeverity:"danger",shouldHideContent:!1,errCode:Yl.InterruptionServerError,canRetry:!0};if((d=t.clientMetadata)!=null&&d.isOptimisticPlaceholder&&((f=t.clientMetadata)!=null&&f.placeholderErrorMessage))return{flagSeverity:"danger",shouldHideContent:!1,errMessage:(m=t.clientMetadata)==null?void 0:m.placeholderErrorMessage,canRetry:!1}}var fs=(t=>(t[t.Thought=0]="Thought",t[t.Recap=1]="Recap",t[t.Search=2]="Search",t[t.CodeAnalysis=3]="CodeAnalysis",t[t.ImageAnalysis=4]="ImageAnalysis",t[t.ComputerOutput=5]="ComputerOutput",t[t.N7jupdLoading=6]="N7jupdLoading",t[t.Browsing=7]="Browsing",t[t.N7jupdAPI=8]="N7jupdAPI",t[t.e1ld0dvz=9]="e1ld0dvz",t[t.Glaux=10]="Glaux",t[t.Strix=11]="Strix",t))(fs||{});const Y4e=v.createContext(null);let r1=null;const L$=()=>{var t;return(t=r1==null?void 0:r1.platformConnectors)!=null?t:null};function cct({value:t,children:e}){"use no forget";return r1=t,i.jsx(Y4e.Provider,{value:t,children:e})}const Z4e=t=>{const[e,n]=v.useState(null);return Ze(t,o=>{var a,l,c;if(e)return e;const r=ve.findNode(o,u=>{var d;return((d=u.message.metadata)==null?void 0:d.visited_risky_domain)!==void 0});return(a=r==null?void 0:r.message.metadata)!=null&&a.visited_risky_domain?(n((l=r==null?void 0:r.message.metadata)==null?void 0:l.visited_risky_domain),(c=r.message.metadata)==null?void 0:c.visited_risky_domain):null})},Q4e=(t,e)=>{var a,l;const n=mo(),s=X(()=>e!=null?e:n==null?void 0:n.serverId$()),o=v.useMemo(()=>t?[t]:[],[t]);return(l=(a=UCe(o,void 0,s)[0])==null?void 0:a.data)==null?void 0:l.url},uct=t=>{const[e,n]=v.useState(t);return v.useEffect(()=>{if(!t||t===e)return;const s=new Image;return s.src=t,s.onload=()=>n(t),s.onerror=()=>console.warn("failed to load",t),()=>{s.src="",s.onload=null,s.onerror=null}},[t,e]),e},J4e=t=>t.replace(/^wwws?\./,""),X4e=["localhost","127.0.0.1","newtab"];function eAe(t){try{return new URL(t)}catch(e){return Ve.addError(e),null}}function y5(t){var r;const e=(r=t==null?void 0:t.vmMetadata)==null?void 0:r.url;if(!e)return{domain:null,origin:null};if(e.startsWith("data:"))return{domain:null,origin:null};const n=eAe(e);if(!n)return{domain:null,origin:null};if(X4e.includes(n.hostname))return{domain:null,origin:null};const s=n.origin;return{domain:J4e(n.hostname),origin:s}}const tAe=(t,e)=>{var d,f,m,p,g;const n=[],s=[],o=[],r=[];if(t.every(h=>h.author.name===ds.n7jupd_m)){if(!e)return;const h=_a(t),_=typeof((d=h==null?void 0:h.metadata)==null?void 0:d.agent_custom_loading_headline)=="string"?h.metadata.agent_custom_loading_headline:void 0;return[{type:fs.N7jupdLoading,needs_startup:(m=(f=h==null?void 0:h.metadata)==null?void 0:f.needs_startup)!=null?m:!1,custom_headline:_}]}for(const h of t){if(h.content.content_type===vt.ComputerOutput){const _=G(N({},h.content.screenshot),{vmMetadata:(p=h.metadata)==null?void 0:p.n7jupd_v,messageId:h.id});n.push(_)}if(h.content.content_type===vt.Text&&((g=h.recipient)!=null&&g.includes("computer"))&&s.push({type:h.recipient,parts:h.content.parts.join("")}),h.content.content_type===vt.StructuredThoughts)for(const _ of h.content.thoughts)_.summary&&(o.push(_.summary),r.push(_.content))}const l=!1,c=[],u=Math.min(n.length,r.length);for(let h=0;h<u;h++){const _=n[h],{domain:x}=y5(_),b={type:fs.ComputerOutput,screenshots:[_],text:"",messages:t,thoughts:[o[h]],fullThoughts:[r[h]],actions:s,isBlank:!x};c.push(b)}if(n.length>u){const h=n.slice(u);if(c.length===0)c.push({type:fs.ComputerOutput,screenshots:h,text:"",messages:t,thoughts:[],fullThoughts:[],actions:s,isBlank:l});else{const _=c[c.length-1];_.screenshots.push(...h),_.isBlank&&(_.isBlank=h.every(x=>!y5(x).domain)&&_.isBlank)}}if(r.length>u)for(let h=u;h<r.length;h++)c.push({type:fs.ComputerOutput,screenshots:[],text:"",messages:t,thoughts:[o[h]],fullThoughts:[r[h]],actions:s,isBlank:!0});return!c.length&&(n.length||r.length)?[{type:fs.ComputerOutput,screenshots:n,text:"",messages:t,thoughts:o,fullThoughts:r,actions:s,isBlank:l}]:c},dct=t=>{var s,o,r,a;const e=t.messages[0];let n;switch(e.author.name){case"browser.search":{const l=(o=(s=e.metadata)==null?void 0:s.n7jupd_title)!=null?o:"Searched",c=(a=(r=e.metadata)==null?void 0:r.n7jupd_urls)!=null?a:[];n={type:fs.Search,queries:[{type:"search",q:l}],sources:c.map(u=>({type:"search_result_group",domain:u,entries:[{type:"search_result",url:u,title:"",snippet:"",ref_id:null,content_type:null,pub_date:null}]}))};break}}if(!(!n||!n.sources.length))return[n]},TS=/connector_[0-9a-f]{32}/i,fct=t=>{var l,c,u,d,f,m,p,g,h,_,x,b,y,S,C,w;const e=L$();if(!e)return;const n=t.messages[0];if(!n)return;const s=(l=n.metadata)==null?void 0:l.n7jupd_subtool;if((c=s==null?void 0:s.subtool)!=null&&c.includes("search"))return[{type:fs.N7jupdAPI,action:"n7jupd_as"}];if((u=s==null?void 0:s.subtool)!=null&&u.includes("api_doc"))return[{type:fs.N7jupdAPI,action:"n7jupd_ag"}];const o=(f=(d=n.metadata)==null?void 0:d.n7jupd_subtool)==null?void 0:f.generic_api_func;let r=(p=(m=o==null?void 0:o.match(TS))==null?void 0:m[0])!=null?p:void 0;r||(r=(x=(_=(h=(g=n.metadata)==null?void 0:g.n7jupd_url)==null?void 0:h.match(TS))==null?void 0:_[0])!=null?x:void 0);const a=e==null?void 0:e.get(r!=null?r:"");if(!r||!a)return[{type:fs.N7jupdAPI,action:"n7jupd_cf"}];if(t.messages.length>1&&((b=t.messages[1].metadata)!=null&&b.connector_source)&&t.messages[1].content.content_type===vt.TetherBrowsingDisplay){if((y=t.messages[1].metadata)!=null&&y.display_url&&((S=t.messages[1].metadata)!=null&&S.display_title))return[{type:fs.N7jupdAPI,action:"n7jupd_cf",source:a,fetchResult:{url:(C=t.messages[1].metadata)==null?void 0:C.display_url,title:(w=t.messages[1].metadata)==null?void 0:w.display_title}}];const k=D$(t.messages[1].content.result);if(k.length)return[{type:fs.N7jupdAPI,action:"n7jupd_cs",source:a,searchResults:k.map(([E,T])=>({url:E,title:T}))}]}return[{type:fs.N7jupdAPI,action:"n7jupd_cf",source:a}]},mct=t=>{var a,l,c,u,d,f,m,p,g,h,_,x,b;const e=L$();if(!e)return;const n=t.messages[0];if(!n)return;if((a=n.recipient)!=null&&a.includes("list_resources")||(l=n.recipient)!=null&&l.includes("search_tools"))return[{type:fs.N7jupdAPI,action:"n7jupd_as"}];if((c=n.recipient)!=null&&c.includes("read_resources")||(u=n.recipient)!=null&&u.includes("get_resource"))return[{type:fs.N7jupdAPI,action:"n7jupd_ag"}];if(t.messages.length==1)return[];const s=t.messages[1];if(s.content.content_type!==vt.CitableCodeOutput)return[{type:fs.N7jupdAPI,action:"n7jupd_cf"}];let o=(f=(d=s.content.metadata)==null?void 0:d.connector_id)!=null?f:void 0;o||(o=(p=(m=s.content.output_str.match(TS))==null?void 0:m[0])!=null?p:void 0);const r=e==null?void 0:e.get(o!=null?o:"");if(t.messages.length>1&&t.messages[1].content.content_type===vt.CitableCodeOutput&&((g=t.messages[1].content.metadata)!=null&&g.connector_source)){if((h=t.messages[1].metadata)!=null&&h.display_url&&((_=t.messages[1].metadata)!=null&&_.display_title))return[{type:fs.N7jupdAPI,action:"n7jupd_cf",source:r,fetchResult:{url:(x=t.messages[1].metadata)==null?void 0:x.display_url,title:(b=t.messages[1].metadata)==null?void 0:b.display_title}}];const y=D$(t.messages[1].content.output_str);if(y.length)return[{type:fs.N7jupdAPI,action:"n7jupd_cs",source:r,searchResults:y.map(([S,C])=>({url:S,title:C}))}]}return[{type:fs.N7jupdAPI,action:"n7jupd_cf",source:r}]};function D$(t){const e=t.replace(/^\s*L\d+:\s*/gm,""),n=[],s=[];for(let f=0;f<e.length;f++){const m=e[f];if(m==="{")s.push(f);else if(m==="}"){if(s.length===0)continue;const p=s.pop();n.push({start:p,end:f})}}const o=["display_url","web_link","url","web_url"],r=["display_title","title","name","path","subject","summary"],a=f=>f.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"),l=(f,m)=>{const p=[];for(const g of f){const h=new RegExp('"'.concat(a(g),'"\\s*:\\s*"([^"]+)"'),"g");for(const _ of m.matchAll(h))p.push(_[1].replace(/\n/g,""))}return p},c=[];for(const{start:f,end:m}of n){const p=e.slice(f,m+1),g=l(o,p),h=l(r,p),_=Math.min(g.length,h.length);for(let x=0;x<_;x++)c.push([g[x],h[x]])}const u=new Map;for(const[f,m]of c)u.set("".concat(f,"|||").concat(m),[f,m]);return Array.from(u.values())}function nAe(){const t=Je("3336871980");return{uiEnabled:t.get("code_blocks_ui_enabled")||xe("3950660279"),editEnabled:t.get("code_blocks_edit_enabled")||xe("3950660279"),previewEnabled:t.get("code_blocks_preview_enabled")||xe("3950660279"),fullScreenEnabled:t.get("code_blocks_full_screen_enabled")||xe("3950660279"),shikiEnabled:t.get("code_blocks_shiki_enabled")||xe("1758722097")}}const b5=tn(()=>({rect:null})),sAe=t=>{if(!t)return b5.setState({rect:null});const{height:e,left:n,top:s,width:o}=t.getBoundingClientRect(),{borderRadius:r}=getComputedStyle(t);b5.setState({rect:{height:e,left:n,top:s,width:o,borderRadius:r}})};function B$(t){const e=te(),n=Un(t),s=Nt();return async({title:r,textdocType:a,content:l,createSource:c})=>{if(!n)return;if(a==="loading"){Ve.addError("Tried to add a textdoc with type 'loading'");return}const u=e.formatMessage({id:"6dkdc5",defaultMessage:"New document"});r||(r=u);const{textdoc_id:d}=await ue.safePost("/textdoc/add",{requestBody:{conversation_id:n,textdoc_title:r,textdoc_type:a,content:l,create_source:c}});return s.setQueryData([n,"textdocs"],f=>{if(!f)return f;const m={textdocId:d,messageId:null,type:a,comments:[],status:ro.COMPLETE,title:r,content:l,versionInt:1,createdAt:Date.now()},p=new Map(f.persistedTextdocVersionById);p.set(d,m);const g=[...f.persistedTextdocVersions,m],h=new Map(f.persistedTextdocById);return h.set(d,{id:d,version:1,title:r,textdoc_type:a,content:l,comments:[],metadata:null,updated_at:new Date().toISOString()}),G(N({},f),{persistedTextdocVersionById:p,persistedTextdocVersions:g,persistedTextdocById:h})}),await s.invalidateQueries({queryKey:[n,"textdocs"]}),requestAnimationFrame(()=>{al(d),setTimeout(()=>{al(d)},250)}),d}}const oAe=({content:t,codeLanguage:e,codeSnippetRef:n,clientThreadId:s})=>{var c;const o=te(),r=X(()=>Fn(Pt(s))),a=B$(s);if(!((c=r.enabledTools)!=null&&c.includes(Ep.Canvas)))return null;function l(){qc.logButtonClick(V_.EDIT_IN_CANVAS_CODE_SNIPPET),n!=null&&n.current&&sAe(n.current);const u=e?Mc("code/"+e):_H(t)?oi.CODE_OTHER:oi.DOCUMENT;a({title:o.formatMessage({id:"ay0U57",defaultMessage:"New {codeLanguage} document"},{codeLanguage:e||"text"}),textdocType:u,content:t,createSource:Wm.MESSAGE})}return i.jsx(St,{label:i.jsx(P,{id:"EditInCanvasButton.editTooltip",defaultMessage:"Edit in canvas"}),children:i.jsxs("button",{className:"flex items-center gap-1 py-1 select-none",onClick:l,children:[i.jsx(ll,{className:"icon-xs"}),o.formatMessage({id:"5k0sSJ",defaultMessage:"Edit"})]})})},rAe=()=>i.jsx("div",{className:"text-token-text-tertiary font-sans text-sm",children:i.jsx(P,{id:"W7gqvz",defaultMessage:"Loading diagram..."})}),aAe=je(()=>Me(()=>import("./5b446015-ogragt3i75wdsp91.js"),__vite__mapDeps([255,1,2,3])).then(t=>t.MermaidDiagram),{loading:rAe}),iAe=v.createContext({isWithinDataAnalysisToolMessage:!1}),lAe=Wc(()=>Me(()=>import("./86bfab85-i4mzkb7xi5m2mimd.js"),__vite__mapDeps([256,257,1,258]))),cAe=Od.memo(function({htmlSegment:e}){return i.jsx("span",{dangerouslySetInnerHTML:{__html:e}})}),uAe=t=>{var e,n;if(t instanceof Element)return(n=(e=t.closest("[data-message-id]"))==null?void 0:e.getAttribute("data-message-id"))!=null?n:void 0};function F$({wrapperClassName:t,codeClassName:e,language:n,content:s,shouldWrapCode:o=!1,removeTopBorderRadius:r,showActionBar:a=!0,showStickyRightContent:l=!0,codeContainerClassName:c,title:u}){var L,B;const d=mo(),f=v.useRef(null),m=Dt(),p=Hs(),g=Qke(),h=X(ln),_=ND(),x=v.useContext(Ove),b=(L=x==null?void 0:x.isActivelyStreaming)!=null?L:!1,[y,S]=v.useState("code"),C=(n==null?void 0:n.toLowerCase())==="mermaid"&&xe("1726290737"),w=C&&y==="diagram",k=v.useCallback(U=>{var $;U.preventDefault(),U.stopPropagation();const H=($=window.getSelection())==null?void 0:$.toString();H&&zo(H,void 0,U)},[]),E=v.useCallback(U=>{const H=(F,z,W)=>{if(p||(d==null?void 0:d.id)==null||z===void 0)return;const Y=Lt(d.id);Y!=null&&rx({source:F,type:"copy",messageId:z,serverThreadId:Y,selectedText:W,location:"code-snippet",contentType:"code"})},$=uAe(U.target);zo(s,m,U),H("mouse",$,s)},[s,m,p,d]),T=te(),{isWithinDataAnalysisToolMessage:M}=v.useContext(iAe),[A,I]=v.useState(null);v.useEffect(()=>{lAe().then(U=>{if(U!=null)try{I(U.highlightCode(s,n))}catch(H){if(!(H instanceof Error&&/Unknown language/i.test(H.message)))throw H}})},[s,n]);const j=n==="svg"||(n==="xml"||n==="html")&&xAe(s),R=v.useMemo(()=>A==null?void 0:A.html.split(/(<span[^>]*>.*?<\/span>)/g).filter(Boolean),[A==null?void 0:A.html]),O=j?i.jsx(sJ,{svgString:s,className:"max-h-96 w-full"}):R&&R.length>0?i.jsx("span",{children:R.map((U,H)=>i.jsx(cAe,{htmlSegment:U},H))}):A!=null&&A.html?i.jsx("span",{dangerouslySetInnerHTML:{__html:A.html}}):i.jsx("span",{children:s});return i.jsx(fAe,{ref:f,title:(B=u!=null?u:A==null?void 0:A.language)!=null?B:n,stickyTitleRightContent:l&&i.jsxs("div",{className:"bg-token-bg-elevated-secondary text-token-text-secondary flex items-center gap-4 rounded-sm px-2 font-sans text-xs",children:[M&&i.jsx(dAe,{}),C&&i.jsxs("label",{className:q("flex items-center gap-2 font-sans text-xs",b?"text-token-text-tertiary":"text-token-text-secondary"),children:[i.jsx(P,{id:"rFpifq",defaultMessage:"Diagram"}),i.jsx(MC,{withinLabel:!0,size:"small",disabled:b,checked:w,onCheckedChange:U=>{Fe.count(Ue.DEFAULT,"chatgpt_code_block_view_toggled",{view:U?"diagram":"code"}),S(U?"diagram":"code")}})]}),i.jsx(sCe,{buttonText:g?T.formatMessage({id:"6NJu7m",defaultMessage:"Copy"}):T.formatMessage({id:"zIa6ZQ",defaultMessage:"Copy code"}),onCopy:E,className:"py-1",iconClassName:g?"icon-xs":"icon-sm"}),!_&&(d==null?void 0:d.id)&&g&&i.jsx(oAe,{content:s,codeLanguage:n!=null?n:"",codeSnippetRef:f,clientThreadId:d==null?void 0:d.id})]}),codeContainerClassName:c,className:q(t,h&&"border-token-border-medium bg-token-bg-primary dark:bg-token-sidebar-surface-primary border"),removeTopBorderRadius:r,showActionBar:a,isAuraSideChat:h,children:w?i.jsx(_Ae,{onCopy:k,children:i.jsx(aAe,{source:s})}):i.jsx(hAe,{$shouldWrap:o,className:e,onCopy:k,children:O})})}function dAe(){const e=pl(!0),{data:n=!1}=bo(Ft.ShowExpandedCodeView),s=te();return i.jsxs("div",{className:"border-token-border-medium flex items-center gap-1",children:[i.jsx("label",{htmlFor:"ada-always-show",children:i.jsx(P,{defaultMessage:"Always show details",id:"message.tools.codeInterpreter.alwaysShowAnalysis"})}),i.jsx(MC,{id:"ada-always-show",size:"small",onCheckedChange:o=>{e.mutate({setting:Ft.ShowExpandedCodeView,value:o})},checked:n,"aria-label":n?s.formatMessage({defaultMessage:"Toggle to always expand detail view for code analysis on",id:"message.tools.codeInterpreter.alwaysShowAnalysis.enabled"}):s.formatMessage({defaultMessage:"Toggle to always expand detail view for code analysis off",id:"message.tools.codeInterpreter.alwaysShowAnalysis.disabled"})})]})}function fAe({children:t,title:e,stickyTitleRightContent:n,className:s,codeContainerClassName:o,ref:r,removeTopBorderRadius:a,showActionBar:l=!0,isAuraSideChat:c=!1}){return i.jsxs(mAe,{className:s,children:[l&&i.jsxs(i.Fragment,{children:[i.jsx(pAe,{$removeTopBorderRadius:a,className:q(c&&"bg-token-bg-primary dark:bg-token-sidebar-surface-primary"),children:e}),i.jsx("div",{className:"sticky top-[calc(var(--sticky-padding-top)+9*var(--spacing))]",children:i.jsx("div",{className:"absolute end-0 bottom-0 flex h-9 items-center pe-2",children:n})})]}),i.jsx(gAe,{ref:r,className:o,children:t})]})}var aP;const mAe=Tt.div(aP||(aP=_t(["contain-inline-size rounded-2xl corner-superellipse/1.1 relative bg-token-sidebar-surface-primary"])));var iP;const pAe=Tt.div(iP||(iP=_t(["flex items-center text-token-text-secondary px-4 py-2 text-xs font-sans justify-between h-9 bg-token-sidebar-surface-primary select-none ",""])),t=>t.$removeTopBorderRadius?"":"rounded-t-2xl corner-t-superellipse/1.1"),gAe=function({children:e,className:n,ref:s}){return i.jsx("div",{ref:s,className:q("overflow-y-auto p-4",n),dir:"ltr",children:e})};var lP;const hAe=Tt.code(lP||(lP=_t(["",""])),t=>t.$shouldWrap?"whitespace-pre-wrap!":"whitespace-pre!");var cP;const _Ae=Tt.div(cP||(cP=_t(["\n  flex w-full items-start justify-center\n"])));function xAe(t){return t.trim().startsWith("<svg")}function yAe(t){return"children"in t?U$(t):"value"in t?t.value:""}function bAe(t){return t.type==="text"?t.value:"children"in t?U$(t):""}function U$(t){let e=-1;const n=[];for(;++e<t.children.length;)n[e]=bAe(t.children[e]);return n.join("")}const vAe=je(()=>Me(()=>import("./9b3e84e7-nxbbdu6xkosse21o.js"),__vite__mapDeps([259,1,235,236,237,2,3,238,220,239,240,75,241,78])).then(t=>({default:n=>{const u=n,{wrapperClassName:s,codeContainerClassName:o,codeClassName:r,removeTopBorderRadius:a,showActionBar:l}=u,c=De(u,["wrapperClassName","codeContainerClassName","codeClassName","removeTopBorderRadius","showActionBar"]);return i.jsx(t.CodeBlock,G(N({},c),{className:s}))}})),{loading:t=>{var e;return i.jsx(F$,{language:t.language,wrapperClassName:t.wrapperClassName,codeContainerClassName:t.codeContainerClassName,content:t.code,removeTopBorderRadius:t.removeTopBorderRadius,showActionBar:(e=t.showActionBar)!=null?e:!0})}}),SAe=/^\s*([`~]{3,})\s*/;function CAe(t){var e,n;return(n=(e=t.match(SAe))==null?void 0:e[1])!=null?n:null}var uP;function wAe(t,e){if(!e||!t)return e;const n=t.split("\n");let s=null,o=!1;for(const r of n){const a=CAe(r);if(a){if(!s){s=a;continue}new RegExp(String.raw(uP||(uP=_t(["^s*","s*$"],["^\\s*","\\s*$"])),s)).test(r)&&(o=!0)}}return!!s&&!o}function kAe(t){"use forget";var M,A,I,j,R;const e=D.c(48);let n,s,o,r,a,l,c,u,d,f,m,p;e[0]!==t?(M=t,{node:l,className:s,wrapperClassName:p,threadId:m,messageId:a,children:n,inline:r,removeTopBorderRadius:u,showActionBar:d,isStreaming:f,codeContainerClassName:o}=M,c=De(M,["node","className","wrapperClassName","threadId","messageId","children","inline","removeTopBorderRadius","showActionBar","isStreaming","codeContainerClassName"]),e[0]=t,e[1]=n,e[2]=s,e[3]=o,e[4]=r,e[5]=a,e[6]=l,e[7]=c,e[8]=u,e[9]=d,e[10]=f,e[11]=m,e[12]=p):(n=e[1],s=e[2],o=e[3],r=e[4],a=e[5],l=e[6],c=e[7],u=e[8],d=e[9],f=e[10],m=e[11],p=e[12]);const g=d===void 0?!0:d,h=f===void 0?!1:f;let _;e[13]===Symbol.for("react.memo_cache_sentinel")?(_=nAe(),e[13]=_):_=e[13];const x=_;if(r){let O;return e[14]!==n||e[15]!==s||e[16]!==c?(O=i.jsx("code",G(N({className:s},c),{children:n})),e[14]=n,e[15]=s,e[16]=c,e[17]=O):O=e[17],O}let b,y;e[18]!==s?(b=s==null?void 0:s.split(new RegExp("\\s|\\p{White_Space}","u")).find(EAe),y=b==null?void 0:b.split("-")[1],e[18]=s,e[19]=b,e[20]=y):(b=e[19],y=e[20]);const S=y;let C;e[21]!==l?(C=l?yAe(l):"",e[21]=l,e[22]=C):C=e[22];const w=C;let k;e[23]!==l?(k=typeof((A=l==null?void 0:l.properties)==null?void 0:A.codeIndex)=="number"?l.properties.codeIndex:typeof((I=l==null?void 0:l.properties)==null?void 0:I.codeIndex)=="string"?Number.parseInt(l.properties.codeIndex,10):void 0,e[23]=l,e[24]=k):k=e[24];const E=k;if(x.uiEnabled&&m&&a){let O;e[25]===Symbol.for("react.memo_cache_sentinel")?(O=/\bpreview\b/,e[25]=O):O=e[25];let L;e[26]!==(l==null?void 0:l.data)?(L=O.test((R=(j=l==null?void 0:l.data)==null?void 0:j.meta)!=null?R:""),e[26]=l==null?void 0:l.data,e[27]=L):L=e[27];const B=L,U=l==null?void 0:l.markdownSource;let H;e[28]!==h||e[29]!==U?(H=wAe(U,h),e[28]=h,e[29]=U,e[30]=H):H=e[30];const $=H;let F;return e[31]!==E||e[32]!==w||e[33]!==$||e[34]!==B||e[35]!==S||e[36]!==a||e[37]!==m||e[38]!==p?(F=i.jsx(vAe,{language:S,code:w,wrapperClassName:p,codeIndex:E,threadId:m,messageId:a,isPreviewable:B,isStreaming:$,gates:x}),e[31]=E,e[32]=w,e[33]=$,e[34]=B,e[35]=S,e[36]=a,e[37]=m,e[38]=p,e[39]=F):F=e[39],F}let T;return e[40]!==o||e[41]!==w||e[42]!==S||e[43]!==b||e[44]!==u||e[45]!==g||e[46]!==p?(T=i.jsx(F$,{language:S,wrapperClassName:p,codeContainerClassName:o,codeClassName:b,content:w,removeTopBorderRadius:u,showActionBar:g}),e[40]=o,e[41]=w,e[42]=S,e[43]=b,e[44]=u,e[45]=g,e[46]=p,e[47]=T):T=e[47],T}function EAe(t){return t.startsWith("language-")}const TAe="QKycbG_markdown",MAe={markdown:TAe},v5=({content:t})=>i.jsx(Cr,{className:q(MAe.markdown,"text-token-text-secondary text-[14px] leading-5"),componentOverrides:{code:e=>i.jsx(kAe,G(N({},e),{wrapperClassName:"",showActionBar:!1}))},children:t});function AAe(t){let e;try{e=JSON.parse(t)}catch(o){return Ve.addError(o),null}const n=o=>typeof o=="object"&&o!=null&&typeof o.x=="number"&&typeof o.y=="number"&&typeof o.button=="number"&&typeof o.action=="string",s=o=>typeof o=="object"&&o!=null&&Array.isArray(o.actions);if(typeof e=="object"&&e!=null&&s(e)){const o=Bc(e.actions,r=>r&&r.action==="click");if(n(o))return o}else if(n(e))return e;return null}const NAe=({chunk:t,isKAUR1BR5:e})=>{var p,g,h,_,x;const n=v.useRef(null),s=t.screenshots.at(-1),o=(p=t.fullThoughts)==null?void 0:p.at(-1),r=(g=t.thoughts)==null?void 0:g.at(-1),a=o!=null?o:r,l=(h=t.actions)==null?void 0:h.at(-1),c=Q4e(s,void 0),[u,d]=v.useState(null),[f,m]=v.useState(!1);return v.useEffect(()=>{if(!c)return;let b=!1;const y=new Image;return m(!1),y.src=c,y.onload=()=>{!b&&d(c)},y.onerror=()=>{!b&&d(null),!b&&m(!0),!b&&Ve.addError(new Error("Failed to load image"))},()=>{b=!0}},[c]),(l==null?void 0:l.type)==="computer.click"&&AAe(l.parts),e?((_=t.fullThoughts)==null?void 0:_.length)===0?i.jsx(v5,{content:"Used the browser"},"used-the-browser"):i.jsx(i.Fragment,{children:(x=t.fullThoughts)==null?void 0:x.map(b=>i.jsx(v5,{content:b},b))}):i.jsxs("div",{className:"flex w-full flex-row items-start justify-center gap-4",children:[a&&i.jsx("div",{className:"text-token-text-secondary flex-1 text-sm",children:a}),s&&i.jsx("div",{ref:n,className:"border-token-border-heavy mt-1 flex h-30 w-40 items-center justify-center overflow-hidden rounded-lg border",children:u&&i.jsx(zU,{src:u,alt:"screenshot",className:"flex aspect-[1024/764] w-40 items-center justify-center overflow-hidden",children:i.jsx("img",{src:u,alt:"screenshot",loading:"lazy",className:"h-full w-full object-cover object-bottom"},u)})})]})},pct=({clientThreadId:t,messageId:e,renderClosestScreenshot:n})=>{const s=Ze(t,a=>{const c=ve.getConversationTurns(a).find(f=>f.messages.some(m=>m.id===e));if(!c)return null;const u=tAe([...c.messages],!1);return u==null?void 0:u.find(f=>f.type===fs.ComputerOutput)}),o=v.useMemo(()=>{if(!s)return null;if(n){const u=s.screenshots.findIndex(d=>d.messageId===e);return u===-1?null:u}const a={};s.screenshots.forEach((u,d)=>{a[u.messageId]=d});const l=s.messages.findIndex(u=>u.id===e),c=s.messages.slice(l).find(u=>a[u.id]);return c?a[c.id]:null},[s,e,n]),r=s==null?void 0:s.messages.some(a=>{var l;return(l=a.metadata)==null?void 0:l.kaur1br5_mode});return n&&o===null||!s||!s.screenshots.length?null:i.jsx("div",{children:i.jsx("div",{className:"relative flex flex-1 cursor-default flex-col gap-2",children:i.jsx(NAe,{chunk:s,isKAUR1BR5:r})})})};function IAe(t){return t.filter(e=>e.author.role===dt.Tool)}function jAe(t){const e=IAe(t);return e[e.length-1]}function gct(t){"use forget";const e=D.c(12),{messages:n,nextMessage:s,isLastMessage:o}=t,r=jAe(n),a=te();let l;e[0]!==a?(l=a.formatMessage({id:"q7dr546.remembering",defaultMessage:"Remembering"}),e[0]=a,e[1]=l):l=e[1];const c=l;let u;e[2]!==a?(u=a.formatMessage({id:"q7dr546.collecting-thoughts",defaultMessage:"Collecting thoughts"}),e[2]=a,e[3]=u):u=e[3];const d=u;if(!(o||!s||!s.content)){let p;return e[4]===Symbol.for("react.memo_cache_sentinel")?(p=i.jsx(i.Fragment,{}),e[4]=p):p=e[4],p}if(!r){const p="q7dr546-"+n[0].id;let g;return e[5]!==c||e[6]!==p?(g=i.jsx(x5,{text:c},p),e[5]=c,e[6]=p,e[7]=g):g=e[7],g}if(r&&!s){const p="q7dr546-"+n[0].id;let g;return e[8]!==d||e[9]!==p?(g=i.jsx(i.Fragment,{children:i.jsx(x5,{text:d},p)}),e[8]=d,e[9]=p,e[10]=g):g=e[10],g}let m;return e[11]===Symbol.for("react.memo_cache_sentinel")?(m=i.jsx(i.Fragment,{}),e[11]=m):m=e[11],m}var Y2,S5;function PAe(){if(S5)return Y2;S5=1;function t(e,n,s,o){var r=-1,a=e==null?0:e.length;for(o&&a&&(s=e[++r]);++r<a;)s=n(s,e[r],r,e);return s}return Y2=t,Y2}var Z2,C5;function RAe(){if(C5)return Z2;C5=1;function t(e){return function(n){return e==null?void 0:e[n]}}return Z2=t,Z2}var Q2,w5;function OAe(){if(w5)return Q2;w5=1;var t=RAe(),e={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},n=t(e);return Q2=n,Q2}var J2,k5;function LAe(){if(k5)return J2;k5=1;var t=OAe(),e=sp(),n=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,s="\\u0300-\\u036f",o="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",a=s+o+r,l="["+a+"]",c=RegExp(l,"g");function u(d){return d=e(d),d&&d.replace(n,t).replace(c,"")}return J2=u,J2}var X2,E5;function DAe(){if(E5)return X2;E5=1;var t=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function e(n){return n.match(t)||[]}return X2=e,X2}var eb,T5;function BAe(){if(T5)return eb;T5=1;var t=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function e(n){return t.test(n)}return eb=e,eb}var tb,M5;function FAe(){if(M5)return tb;M5=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",s="\\u20d0-\\u20ff",o=e+n+s,r="\\u2700-\\u27bf",a="a-z\\xdf-\\xf6\\xf8-\\xff",l="\\xac\\xb1\\xd7\\xf7",c="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",u="\\u2000-\\u206f",d=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",f="A-Z\\xc0-\\xd6\\xd8-\\xde",m="\\ufe0e\\ufe0f",p=l+c+u+d,g="[']",h="["+p+"]",_="["+o+"]",x="\\d+",b="["+r+"]",y="["+a+"]",S="[^"+t+p+x+r+a+f+"]",C="\\ud83c[\\udffb-\\udfff]",w="(?:"+_+"|"+C+")",k="[^"+t+"]",E="(?:\\ud83c[\\udde6-\\uddff]){2}",T="[\\ud800-\\udbff][\\udc00-\\udfff]",M="["+f+"]",A="\\u200d",I="(?:"+y+"|"+S+")",j="(?:"+M+"|"+S+")",R="(?:"+g+"(?:d|ll|m|re|s|t|ve))?",O="(?:"+g+"(?:D|LL|M|RE|S|T|VE))?",L=w+"?",B="["+m+"]?",U="(?:"+A+"(?:"+[k,E,T].join("|")+")"+B+L+")*",H="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",$="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",F=B+L+U,z="(?:"+[b,E,T].join("|")+")"+F,W=RegExp([M+"?"+y+"+"+R+"(?="+[h,M,"$"].join("|")+")",j+"+"+O+"(?="+[h,M+I,"$"].join("|")+")",M+"?"+I+"+"+R,M+"+"+O,$,H,x,z].join("|"),"g");function Y(K){return K.match(W)||[]}return tb=Y,tb}var nb,A5;function UAe(){if(A5)return nb;A5=1;var t=DAe(),e=BAe(),n=sp(),s=FAe();function o(r,a,l){return r=n(r),a=l?void 0:a,a===void 0?e(r)?s(r):t(r):r.match(a)||[]}return nb=o,nb}var sb,N5;function HAe(){if(N5)return sb;N5=1;var t=PAe(),e=LAe(),n=UAe(),s="[']",o=RegExp(s,"g");function r(a){return function(l){return t(n(e(l).replace(o,"")),a,"")}}return sb=r,sb}var ob,I5;function $Ae(){if(I5)return ob;I5=1;var t=HAe(),e=h8(),n=t(function(s,o,r){return s+(r?" ":"")+e(o)});return ob=n,ob}var GAe=$Ae();const VAe=ps(GAe),Wl=we({settingsUpdate:{id:"message.tools.user-settings.update",defaultMessage:"Settings updated"},examinedSettings:{id:"message.tools.user-settings.examined",defaultMessage:"Examined your settings"},accentColor:{id:"message.tools.user-settings.accent-color",defaultMessage:"Accent color"},appearance:{id:"settingsModal.appearance",defaultMessage:"Appearance"},personality:{id:"personalizationSettingsTool.settingsPersonalitySelectionRowTitle",defaultMessage:"Base style and tone"},customInstructionsAbout:{id:"user_settings.custom_instructions_about_you",defaultMessage:"Custom instructions  About you"},customInstructionsRespond:{id:"user_settings.custom_instruction",defaultMessage:"Custom instructions"}}),H$={accent_color:Wl.accentColor,appearance:Wl.appearance,personality:Wl.personality,know_about_me:Wl.customInstructionsAbout,custom_instructions:Wl.customInstructionsRespond},zAe={accent_color:"#settings",appearance:"#settings",personality:"#settings/Personalization",know_about_me:"#settings/Personalization",custom_instructions:"#settings/Personalization"},j5={accent_color:[aa],appearance:[],personality:[aa,oy],know_about_me:[aa,oy],custom_instructions:[aa,oy]},WAe=[aa];function $$(t){return Object.prototype.hasOwnProperty.call(H$,t)}function hct(t){"use forget";const e=D.c(49),{messages:n,isRequestActive:s}=t;let o;e[0]===Symbol.for("react.memo_cache_sentinel")?(o=Zn(),e[0]=o):o=e[0];const r=o,a=te(),l=v.useRef(void 0),c=v.useRef(s),[,u]=oJ(),d=v.useRef(void 0);let f,m,p,g,h,_,x,b,y;if(e[1]!==a||e[2]!==s||e[3]!==n){f=n.find(KAe),x=n.find(qAe);const L=eNe(f);h=YAe(f),y=h&&$$(h)?h:void 0,g=L==="get_user_settings"||L==="settings_help";let B;e[13]!==a||e[14]!==g?(B=a.formatMessage(g?Wl.examinedSettings:Wl.settingsUpdate),e[13]=a,e[14]=g,e[15]=B):B=e[15],m=B,p=h?XAe(h,a):void 0,b=QAe(x),_=JAe({toolMessage:x,isRequestActive:s,hasError:b}),e[1]=a,e[2]=s,e[3]=n,e[4]=f,e[5]=m,e[6]=p,e[7]=g,e[8]=h,e[9]=_,e[10]=x,e[11]=b,e[12]=y}else f=e[4],m=e[5],p=e[6],g=e[7],h=e[8],_=e[9],x=e[10],b=e[11],y=e[12];const S=_,C=x==null?void 0:x.id;let w,k;e[16]!==s||e[17]!==h||e[18]!==C||e[19]!==y?(w=()=>{var U;const L=c.current;if(c.current=s,!C||s||!L||l.current===C)return;l.current=C;const B=(U=y?j5[y]:h==null?j5.accent_color:void 0)!=null?U:WAe;for(const H of B){const $=H(),{queryKey:F}=$;r.invalidateQueries({queryKey:F}),r.prefetchQuery($)}},k=[r,s,C,h,y],e[16]=s,e[17]=h,e[18]=C,e[19]=y,e[20]=w,e[21]=k):(w=e[20],k=e[21]),v.useEffect(w,k);let E;e[22]!==f||e[23]!==s||e[24]!==u||e[25]!==h?(E=()=>{if(h!=="appearance"||!f||!GC(f)||!s)return;const L=ZAe(f);if(!rJ(L))return;const B="".concat(f.id,":").concat(L);d.current!==B&&(u(L),d.current=B)},e[22]=f,e[23]=s,e[24]=u,e[25]=h,e[26]=E):E=e[26];let T;if(e[27]!==f||e[28]!==s||e[29]!==u||e[30]!==h||e[31]!==x||e[32]!==b?(T=[f,x,s,h,u,b],e[27]=f,e[28]=s,e[29]=u,e[30]=h,e[31]=x,e[32]=b,e[33]=T):T=e[33],v.useEffect(E,T),!f&&!x)return null;let M;e[34]!==m?(M=i.jsx("strong",{className:"text-token-text-secondary font-medium",children:m}),e[34]=m,e[35]=M):M=e[35];let A;e[36]!==p||e[37]!==g?(A=p&&!g?i.jsxs("span",{className:"text-token-text-tertiary",children:[i.jsx("span",{className:"mx-1",children:""}),p]}):"",e[36]=p,e[37]=g,e[38]=A):A=e[38];let I;e[39]!==M||e[40]!==A?(I=i.jsxs("div",{children:[M,A]}),e[39]=M,e[40]=A,e[41]=I):I=e[41];let j=I;const R=y?zAe[y]:void 0;if(R){let L;e[42]===Symbol.for("react.memo_cache_sentinel")?(L=i.jsx(pg,{className:"icon-xs text-token-text-tertiary ms-1"}),e[42]=L):L=e[42];let B;e[43]!==R||e[44]!==j?(B=i.jsxs("a",{href:R,className:"flex flex-row items-center",children:[j,L]}),e[43]=R,e[44]=j,e[45]=B):B=e[45],j=B}let O;return e[46]!==S||e[47]!==j?(O=i.jsx(xE,{status:S,highlightedCommand:j}),e[46]=S,e[47]=j,e[48]=O):O=e[48],O}function qAe(t){return t.author.role===dt.Tool}function KAe(t){return t.author.role===dt.Assistant}function G$(t){return typeof t=="object"&&t!=null&&!Array.isArray(t)}function YAe(t){var o;if(!t)return;const e=(o=Ss(t))!=null?o:"",[n,s]=Zi(e,r=>r);if(s==null&&G$(n)){const r=n.setting_name;if(typeof r=="string")return r}}function ZAe(t){var o;const e=(o=Ss(t))!=null?o:"",[n,s]=Zi(e,r=>r);if(s==null&&G$(n)){const r=n.setting_value;if(typeof r=="string")return r}}function QAe(t){var o;if(!t)return!1;const e=(o=Ss(t))!=null?o:"",[n,s]=Zi(e,r=>r);return s!=null?!1:n!=null&&typeof n=="object"&&!Array.isArray(n)?"error"in n:!1}function JAe({toolMessage:t,isRequestActive:e,hasError:n}){return n?gn.Error:t==null?e?gn.Running:gn.Stopped:GC(t)?gn.Finished:e?gn.Running:gn.Stopped}function XAe(t,e){if($$(t)){const s=H$[t];if(s)return e.formatMessage(s)}const n=VAe(t.replace(/\./g," ").replace(/_/g," ").replace(/-/g," ")).trim();return n.length>0?n:void 0}function eNe(t){if(!(t!=null&&t.recipient))return;const[,e]=t.recipient.split(".",2);return e}const _ct=()=>i.jsxs("div",{className:"text-message relative flex w-full flex-col items-end gap-2 text-start break-words whitespace-normal [.text-message+&]:mt-5",children:[i.jsx("div",{className:"text-token-text-tertiary px-5 text-sm",children:i.jsx(P,{id:"clarification.autoResponse",defaultMessage:"Auto response"})}),i.jsx("div",{className:"bg-token-message-surface relative max-w-[var(--user-chat-width,70%)] rounded-3xl px-5 py-2.5",children:i.jsx(P,{id:"clarification.modelContinueMessage",defaultMessage:"Continue"})})]}),V$=re(me,"e43eb6",20,20),xct=()=>i.jsx("div",{className:"flex w-full justify-end px-5 py-4",children:i.jsxs("div",{className:"text-token-text-secondary flex items-center justify-center gap-1",children:[i.jsx(V$,{className:"size-5"}),i.jsx(P,{id:"operator.takeover.indicator",defaultMessage:"You took control"})]})}),tNe=()=>{};function nNe(t){return v.useCallback(e=>t?e(console.log.bind(console)):tNe,[t])}const sNe=".markdown:is(.streaming-animation,.result-streaming)",yct=v.memo(function(e){const{debug:n,isStreaming:s}=e,o=v.useRef(-1),r=nNe(n),a=v.useRef(null),[l,c]=v.useState([]),u=v.useCallback(m=>{const p=m.dataset.start,g=m.tagName.toLowerCase(),h="--streaming-".concat(g,"-").concat(p),x={height:0,ready:!1,selector:"".concat(g,'[data-start="').concat(p,'"]'),target:m,variableName:h},b=Qc({axis:"height",target:m,onChange({height:y}){var E;const S=m.dataset.end,C=m.dataset.isLastNode==="",w=["table","pre"].includes(g)&&C;if(r(T=>T("".concat(g,"-").concat(p),{observedElement:x,height:y,canLookAhead:w,isLastNode:C})),!x.ready){const T=w&&oNe(p,S,15),M=y>0;(T||M)&&(x.ready=!0,o.current=iNe(S))}const k=typeof x.height=="number"&&y<x.height;x.ready&&!k&&(x.height=y,(E=a.current)==null||E.style.setProperty(h,"".concat(y,"px")))}});x.unsubscribe=b,c(y=>[...y,x])},[r]),d=v.useCallback(m=>aJ({onChange(p){const{added:g}=aNe(p);for(const h of g)u(h)},target:m,subtree:!0,childList:!0}),[u]);v.useEffect(()=>{if(!s)return;let m;function p(h){a.current=h,m=d(h)}function g(h){const _=document.querySelector(sNe);_?h(_):requestAnimationFrame(()=>{g(h)})}return g(p),()=>{window.setTimeout(()=>{if(n){r(h=>h("Animations complete, preserving state in debug mode."));return}m==null||m(),c([]),o.current=-1},500)}},[s,n,d,r]);const f=l.map(({selector:m,variableName:p})=>"".concat(m," { --streaming-reveal-amount: var(").concat(p,", 0) }")).join("\n");return i.jsx("style",{children:f})});function oNe(t,e,n){if(t===void 0||e===void 0)return!0;const s=parseInt(t,10),o=parseInt(e,10);return isNaN(s)||isNaN(o)?!0:o-s>=n}function rNe(t){return t instanceof HTMLElement?["PRE","TABLE"].includes(t.tagName):!1}function aNe(t){return{added:t.flatMap(n=>Array.from(n.addedNodes)).filter(rNe)}}function iNe(t){return t?parseInt(t,10):-1}function lNe(t){return ha.isMultimodalTextMessage(t)?t.content.parts.flatMap(e=>typeof e!="string"&&e.content_type===el.VideoAssetPointer?e:null).filter(e=>!!e):[]}const cNe=(t,e)=>{var r;const n={"video/mp4":"mp4","video/quicktime":"mov"},s={mp4:"mp4",mov:"mov"},o=(r=e.split(".").pop())==null?void 0:r.toLowerCase();return n[t]||s[o!=null?o:""]||void 0};function uNe(t){"use forget";const e=D.c(7),[n,s]=v.useState(null),o=Nt();let r,a;e[0]!==t.assetPointer||e[1]!==t.serverThreadId||e[2]!==o?(r=()=>{t.assetPointer&&wl.fetch(o,{asset:t.assetPointer,conversationId:t.serverThreadId}).then(c=>{s(c.url)})},a=[o,t.assetPointer,t.serverThreadId],e[0]=t.assetPointer,e[1]=t.serverThreadId,e[2]=o,e[3]=r,e[4]=a):(r=e[3],a=e[4]),v.useEffect(r,a);let l;return e[5]!==n?(l=n?i.jsx("video",{controls:!0,src:n,className:"w-full"}):null,e[5]=n,e[6]=l):l=e[6],l}function bct(t){"use forget";var f,m;const e=D.c(5),{message:n,isUserTurn:s,clientThreadId:o}=t,r=lNe(n),a=Un(o);if(r.length===0||!s)return null;const l=(m=(f=r[0].metadata)==null?void 0:f.transcription)==null?void 0:m.text,c=q("mt-2 text-sm italic",{"opacity-65":l,"opacity-30":!l});let u;e[0]!==l?(u=l!=null?l:i.jsx(P,N({},dNe.transcriptUnavailable)),e[0]=l,e[1]=u):u=e[1];let d;return e[2]!==c||e[3]!==u?(d=i.jsx("div",{className:c,children:u}),e[2]=c,e[3]=u,e[4]=d):d=e[4],i.jsxs("div",{className:"flex max-w-[400px] flex-col justify-end self-end",children:[i.jsx(uNe,{assetPointer:r[0],serverThreadId:a}),d]})}const dNe=we({transcriptUnavailable:{id:"textMessage.transcriptUnavailable",defaultMessage:"Transcript Unavailable"}}),z$=re(me,"29f921",20,20),fNe=re(me,"dc94ab",20,20);function mNe(t){const e=Math.max(0,Math.floor(t)),n=Math.floor(e/86400),s=Math.floor(e%86400/3600),o=Math.floor(e%3600/60),r=e%60;return{days:n,hours:s,minutes:o,seconds:r}}function pNe(t,{format:e="clock"}={}){const{days:n,hours:s,minutes:o,seconds:r}=mNe(t);if(e==="units"){const c=[];return n>0&&c.push("".concat(n,"d")),c.push("".concat(s,"h"),"".concat(o,"m"),"".concat(r,"s")),c.join(" ")}const a=String(r).padStart(2,"0"),l=String(o).padStart(2,"0");if(n>0){const c=String(s).padStart(2,"0");return"".concat(n,"d ").concat(c,":").concat(l,":").concat(a)}return s===0?"".concat(l,":").concat(a):"".concat(s,":").concat(l,":").concat(a)}function gNe(t){var n;const e=(n=t==null?void 0:t.audio_asset_pointer)==null?void 0:n.metadata;if((e==null?void 0:e.start)!==void 0&&(e==null?void 0:e.end)!==void 0)return e.end-e.start}const vct=v.memo(function(e){const n=te(),{content:s,metadata:o}=e.message;if(!(s.content_type==="multimodal_text"&&e.isUserTurn))return;const a=s.parts.filter(ha.isPartRealTimeUserAudioVideoAssetPointer).find(c=>c.audio_asset_pointer),l=gNe(a);return i.jsxs("div",{className:"text-token-text-secondary my-2 me-4 flex flex-row justify-end gap-1 text-xs",children:[(o==null?void 0:o.real_time_audio_has_video)&&i.jsx(fNe,{"aria-label":n.formatMessage({id:"/nS9Zn",defaultMessage:"Recorded with video or screenshare"}),className:"icon-sm"}),a&&i.jsx(z$,{"aria-label":n.formatMessage({id:"eP1JEa",defaultMessage:"Recorded with voice"}),className:"icon-sm"}),l!==void 0&&i.jsx("span",{className:"font-semibold",children:pNe(l)})]})});function h0(t){if(t.buffer instanceof ArrayBuffer)return t;const e=new Uint8Array(t.byteLength);return e.set(t),e}function xx(){"use forget";var u,d,f,m,p,g,h;const t=D.c(8),{data:e}=Ld(),n=W$(),s=(u=e==null?void 0:e.settings)==null?void 0:u[Ft.VoiceName];let o;t[0]!==n||t[1]!==s?(o=K$(s,n),t[0]=n,t[1]=s,t[2]=o):o=t[2];const r=(f=(d=e==null?void 0:e.settings)==null?void 0:d[Ft.VoiceMainLanguage])!=null?f:rm.Auto,a=!!((m=e==null?void 0:e.settings)!=null&&m[Ft.TrainingAllowed]&&((p=e==null?void 0:e.settings)!=null&&p[Ft.VoiceTrainingAllowed])),l=!!((g=e==null?void 0:e.settings)!=null&&g[Ft.TrainingAllowed]&&((h=e==null?void 0:e.settings)!=null&&h[Ft.VideoTrainingAllowed]));let c;return t[3]!==o||t[4]!==r||t[5]!==a||t[6]!==l?(c={voiceName:o,voiceMainLanguage:r,voiceTrainingAllowed:a,videoTrainingAllowed:l},t[3]=o,t[4]=r,t[5]=a,t[6]=l,t[7]=c):c=t[7],c}function W$(){const t=q$(),e=F9().locale;return v.useCallback(()=>{if(t.length===0)return"juniper";let n=t[0].voice;return e.startsWith("zh")&&(n="cove"),n},[t,e])}function q$(){var n;const t=(n=bo(Ft.VoiceMainLanguage))==null?void 0:n.data,{data:e}=ut({queryKey:["getUserSettingVoices",t],queryFn:()=>ue.safeGet("/settings/voices",{authOption:Ot.SendIfAvailable})});return e?e.voices:[]}function K$(t,e){return t==="sky"?"juniper":t!=null?t:e()}function BE(){if(typeof window<"u"&&"MediaSource"in window){const t=e=>iJ(e)&&MediaSource.isTypeSupported(e);if(t("audio/aac"))return"aac";if(t("audio/mpeg"))return"mp3";if(t("audio/ogg"))return"opus"}}function hNe({conversationId:t,messageId:e}){const{voiceName:n}=xx(),s=()=>ue.safeGet("/synthesize",{parameters:{query:{message_id:e,conversation_id:t,voice:n,format:BE()}},skipJsonTransform:!0}),o="".concat(t,".").concat(e,".").concat(n);return _Ne(s,o)}function _Ne(t,e){var p;const[n,s]=v.useState(!1),o=v.useRef({isMediaSourceAvailable:FE(),mediaSourceFormat:(p=BE())!=null?p:"n/a",playPromise:null,shouldAbortQueuedPlayback:!1}).current,r=te(),a=Dt(),l=h3(),c=_3(g=>{var h;return g.isPlaying&&g.sourceUrl===((h=Ro.get(e))==null?void 0:h.src)}),u=v.useCallback(async()=>{if(!l||!t)return;s(!0);const g={isMediaSourceAvailable:o.isMediaSourceAvailable,format:o.mediaSourceFormat};try{const h=await xNe({key:e,onStreamingError:_=>{Ut.readAloud.error(_,g),s(!1),a.danger(r.formatMessage(Eh.playbackError,{error:_.message}),{toastId:"useVoiceReadAloudAudio_onStreamingError",loggingTitle:Eh.playbackError.defaultMessage,loggingDescription:_.message})},onStreamingStart:()=>{s(!1)},fetchAudioDataResponse:t});if(o.shouldAbortQueuedPlayback){o.shouldAbortQueuedPlayback=!1;return}l.changeSource(h),o.playPromise=l.play()}catch(h){Ut.readAloud.error(h,g),s(!1),a.danger(r.formatMessage(Eh.playbackError,{error:h.message}),{toastId:"useVoiceReadAloudAudio_onStreamingError",loggingTitle:Eh.playbackError.defaultMessage,loggingDescription:h.message})}},[l,o,e,a,r,t]),d=v.useCallback(()=>{const g=fv();g&&(o.playPromise?o.playPromise.then(()=>{g.stop(),o.playPromise=null}):g.stop())},[o]),f=v.useCallback(()=>{var h;const g=fv();g&&(g.state.isPlaying&&g.state.sourceUrl===((h=Ro.get(e))==null?void 0:h.src)?d():(Ut.readAloud.click({isMediaSourceAvailable:o.isMediaSourceAvailable,format:o.mediaSourceFormat}),u()))},[e,o,u,d]);v.useEffect(()=>{n&&c&&s(!1)},[n,c]);const m=v.useRef(e);return v.useEffect(()=>{m.current=e}),v.useEffect(()=>(o.shouldAbortQueuedPlayback=!1,()=>{var _;const g=U9();g.isPlaying&&g.sourceUrl===((_=Ro.get(m.current))==null?void 0:_.src)?d():o.shouldAbortQueuedPlayback=!0}),[o,d]),{togglePlayback:f,isPlaying:c,isLoading:n}}async function Y$(t){var s;const e=await t(),n=(s=e.headers.get("content-type"))!=null?s:"audio/aac";return{response:e,format:n}}async function xNe(t){return FE()?bNe(t):yNe(t)}async function yNe({key:t,fetchAudioDataResponse:e}){const n=Ro.get(t);if(n!=null&&n.blob)return n.src;const{response:s,format:o}=await Y$(e),r=await s.arrayBuffer(),a=new Blob([r],{type:o}),l=Z$({key:t,src:URL.createObjectURL(a),format:o,blob:a});return Ro.set(t,l),l.src}async function bNe({key:t,onStreamingError:e,onStreamingStart:n,fetchAudioDataResponse:s}){let o=Ro.get(t);o!=null&&o.streaming&&(Ro.delete(t),o=null);let r,a;const l=SNe(),c=new l;if(o)r=o,r.src=URL.createObjectURL(c);else{const{format:f,response:m}=await Y$(s);a=m,r=Z$({key:t,src:URL.createObjectURL(c),format:f})}const u=vNe(r.id),d={sourceopen:async()=>{var p,g;u("sourceopen");const f=c.addSourceBuffer(r.format),m=async()=>{f.updating&&await new Promise(h=>f.addEventListener("updateend",h,{once:!0}))};if(r.segments.length&&!r.streaming){u("streaming from cache"),r.streaming=!0,n();for(const h of r.segments)f.appendBuffer(h0(h)),await m();c.readyState==="open"&&c.endOfStream(),r.streaming=!1,u("done streaming from cache");return}if(a){u("fetching audio");try{const h=(p=a.body)==null?void 0:p.getReader();if(!h)return;for(;((g=Ro.get(t))==null?void 0:g.id)===r.id;){const{done:_,value:x}=await h.read();if(_){u("done streaming"),r.streaming=!1,c.readyState==="open"&&c.endOfStream();break}if(!x)continue;if(!Array.from(c.sourceBuffers).includes(f)){u("stop streaming, source buffer removed"),r.streaming=!1;break}r.streaming||(u("start streaming"),r.streaming=!0,n());const b=h0(x);f.appendBuffer(b),r.segments.push(b),await m()}}catch(h){if(u("error while streaming",h),r.streaming=!1,c.readyState==="open")try{c.endOfStream("network")}catch(_){Ut.readAloud.error(_)}Ro.delete(t),e(h)}}},sourceclose:()=>{var f;u("sourceclose"),r.streaming&&(r.streaming=!1,((f=Ro.get(t))==null?void 0:f.id)===r.id&&(u("sourceclosed while streaming, cleaning up cache"),Ro.delete(t)))},sourceended:uo};for(const[f,m]of Object.entries(d))c.addEventListener(f,()=>{try{return m()}catch(p){Ut.readAloud.error(p)}});return Ro.set(t,r),r.src}const Eh=we({playbackError:{id:"useVoiceReadAloudAudio.playbackError",defaultMessage:"Failed to play message"}}),vNe=t=>uo;function SNe(){return FE()?window.MediaSource:null}function FE(){return!!BE()}const Z$=t=>N({id:fa(),segments:[],streaming:!1},t),Ro=new tEe({capacity:50,dispose:t=>{URL.revokeObjectURL(t.src)}}),Q$=re(me,"b26965",20,20),xg=re(me,"29a5ec",20,20),CNe=re(me,"334d9b",20,20);function wNe(t){"use forget";const e=D.c(5),n=lJ(),{data:s,isLoading:o}=Lc(t);let r;e:{if(!n){r=!1;break e}if(s==null||typeof s!="object"){r=!1;break e}const c=s.role_summaries;if(!Array.isArray(c)){r=!1;break e}let u;e[0]!==c?(u=c.some(kNe),e[0]=c,e[1]=u):u=e[1],r=u}const a=r;let l;return e[2]!==a||e[3]!==o?(l={hasLockdownRole:a,isLoading:o},e[2]=a,e[3]=o,e[4]=l):l=e[4],l}function kNe(t){if(t==null||typeof t!="object")return!1;const e=t.metadata;return e==null||typeof e!="object"?!1:e.lockdown_mode===!0}async function UE(t){const e=await Me(()=>import("./1bc04b52-emja6bpoehwcct3m.js").then(n=>n.i),__vite__mapDeps([149,1]));if(mc!=null&&(t!=null&&t.startsWith(mc)))return!0;try{const n=e.get(new URL(t!=null?t:"").hostname);return n==null?!1:new Set(["openai.com","chatgpt.com","chat.com"]).has(n)}catch(n){return!1}}function HE(t,e,n){return ue.safeGet("/conversation/{conversation_id}/url_safe",{parameters:{path:{conversation_id:t},query:{url:e,history_and_training_disabled:n}}})}function ENe(t,e){const n=X(()=>Z0()),s=!mt();return ut({queryKey:["safe-url",{serverThreadId:t,url:e,isHistoryAndTrainingDisabled:n}],queryFn:async()=>{if(t==null||e==null)throw new Error("Unexpected falsey useSafeUrlQuery");return await UE(e)||ve.isThreadUrlSafe(At(t),e)?{safe:!0}:s?{safe:!1}:HE(t,e,n)},enabled:t!=null&&e!=null})}function TNe(t,e,n=!0){var c;const s=(c=Et())==null?void 0:c.getWorkspaceId(),{hasLockdownRole:o}=wNe(s),r=o,a=Ze(t,u=>e!=null&&ve.isThreadUrlSafe(u,e)),{data:{safe:l}={}}=ENe(t,!a&&!r?e:void 0);if(!r)return a||l||!n?e:void 0}function Sct(t,e,n=!0){const s=MNe(e,500);return TNe(t,s,n)}function MNe(t,e){const[n,s]=v.useState(void 0),[o]=v.useState(()=>tl(r=>{s(r)},e));return v.useEffect(()=>{o(t)},[o,t]),n===t?t:void 0}function Cct(t,e){const n=X(()=>Z0()),s=Ze(t,r=>{var a;return(a=r==null?void 0:r.safeUrls)!=null?a:[]}),{data:o=[]}=ut({queryKey:["safe-urls",t,e,n,s],queryFn:async()=>{const r=s.filter(u=>e.includes(u)),a=e.filter(u=>!r.includes(u)),c=(await Promise.allSettled(a.map(async u=>{if(await UE(u))return u;if(t==null)return null;try{return(await HE(t,u,n)).safe?u:null}catch(f){return null}}))).map(u=>u.status==="fulfilled"?u.value:null).filter(u=>u!=null);return r.concat(c)},enabled:t!=null&&e.length>0});return o}async function ANe(t,e){const{isKnownSafeUrl:n,isUrlMarkedSafeInThread:s,serverCheck:o,isHistoryAndTrainingDisabled:r}=e,a=t.filter(f=>!s(f));if(a.length===0)return[];const l=await Promise.all(a.map(f=>n(f))),c=a.filter((f,m)=>!l[m]);if(c.length===0)return[];if(!o)return c;const u=await Promise.allSettled(c.map(async f=>{try{return await o(f,r)?null:f}catch(m){return f}})),d=[];return u.forEach((f,m)=>{const p=c[m];f.status==="fulfilled"?typeof f.value=="string"&&d.push(f.value):d.push(p)}),d}function wct(t,e){const n=At(t),s=Lt(t);return ANe(e,{isKnownSafeUrl:UE,isUrlMarkedSafeInThread:o=>ve.isThreadUrlSafe(n,o),serverCheck:s!=null?async(o,r)=>(await HE(s,o,r)).safe:void 0,isHistoryAndTrainingDisabled:Kt(()=>Z0())})}const vf=tn(t=>({targetedContent:void 0,setTargetedContent:e=>{t({targetedContent:e})}})),kct=t=>{"use forget";const e=D.c(3),n=v.useRef(void 0);let s,o;return e[0]!==t?(s=()=>{n.current=t},o=[t],e[0]=t,e[1]=s,e[2]=o):(s=e[1],o=e[2]),v.useEffect(s,o),n};function P5(){return" "}const NNe=x3(()=>({width:window.innerWidth,height:window.innerHeight}),t=>Kd(window,{resize:t}),{getServerFallback:()=>({width:cJ()?360:768,height:640})}),R5=t=>["conversation","init",t],INe=({clientThreadId:t,conversationMode:e,clientModelId:n,enabled:s},o,r,a)=>{var f;const l=y3(e),u=(f=new URLSearchParams(a).get(H9))!=null?f:void 0,d=hi(t)?null:t;return{gcTime:0,refetchOnWindowFocus:!0,refetchOnMount:"always",queryKey:R5(t),queryFn:()=>{let m=ue.safePost("/conversation/init",{requestBody:{gizmo_id:l,requested_default_model:n,conversation_id:d,timezone_offset_min:new Date().getTimezoneOffset(),conversation_owner_id:u},authOption:Ot.SendIfAvailable});return m=m.then(p=>(o.getQueryData(R5(t))&&uJ(p)&&o.invalidateQueries({queryKey:dJ()}),p)),m},enabled:s&&!wL(t)}},jNe=t=>{const e=Nt(),n=Dt(),{search:s}=jn();return ut(INe(t,e,n,s))},PNe=t=>{"use forget";var _;const e=D.c(23),n=bt(),{pathname:s,search:o}=jn(),r=Hs(),a=Dt(),l=X(ln),c=Dd();let u,d,f;if(e[0]!==t||e[1]!==l||e[2]!==c||e[3]!==n||e[4]!==s||e[5]!==o||e[6]!==a){const x=c||wL(t);u=c;const b=new URLSearchParams(o),y=FF(s),S=(_=b.get(H9))!=null?_:void 0;f=ut;let C;e[10]!==t||e[11]!==l||e[12]!==n||e[13]!==s||e[14]!==a?(C=w=>{if(l)ot.wantsNewConversation$.set(!0),ot.selectedConversationId$.set(void 0);else{const k=fJ(s),E=k!=null?$9(k):"/";n(E)}a.danger("Unable to load conversation ".concat(t),{testId:"conversation-fetch-error-toaster",toastId:"use_fetch_conversation_failed_to_load_conversation",loggingTitle:"Error type: ".concat(w instanceof Error?w.constructor.name:typeof w),loggingDescription:"error-message: ".concat(w instanceof Error?w.message:String(w))})},e[10]=t,e[11]=l,e[12]=n,e[13]=s,e[14]=a,e[15]=C):C=e[15],d=O_({clientThreadId:t,alwaysForceUpdate:x,projectId:y,ownerUserId:S,onError:C}),e[0]=t,e[1]=l,e[2]=c,e[3]=n,e[4]=s,e[5]=o,e[6]=a,e[7]=u,e[8]=d,e[9]=f}else u=e[7],d=e[8],f=e[9];let m;e[16]!==t||e[17]!==r?(m=!hi(t)&&!r,e[16]=t,e[17]=r,e[18]=m):m=e[18];const p=u?"always":!1;let g;e[19]!==d||e[20]!==m||e[21]!==p?(g=G(N({},d),{enabled:m,refetchOnMount:!0,refetchOnWindowFocus:p}),e[19]=d,e[20]=m,e[21]=p,e[22]=g):g=e[22];const{data:h}=f(g);return h},J$=(t,e,n)=>{const s=X(ln),o=Lt(t),r=e.kind===Bt.GizmoInteraction?e.gizmo_id:null,{data:a}=gi(r!=null?r:void 0),c=r&&Bs(r)&&!a;PNe(t);const{session:u}=Ud(),d=xe("544083113");v.useEffect(()=>{var p,g;fc.initThread({clientThreadId:t,conversationMode:e,userId:(p=u==null?void 0:u.user)==null?void 0:p.id,accountId:(g=u==null?void 0:u.account)==null?void 0:g.id,skipFollowupMcpCheck:d,isDoNotRemember:n==null?void 0:n.isDoNotRemember}),w1.reset(),Wo.dismiss()},[t]),v.useEffect(()=>{n!=null&&n.shouldScrollToBottom&&pt(t,p=>{p.scrollToMessageId="finalAgentTurn"})},[t,n==null?void 0:n.shouldScrollToBottom]),v.useEffect(()=>{n!=null&&n.disableConversationNavigation&&pt(t,p=>{p.disableConversationNavigation=n.disableConversationNavigation})},[t,n==null?void 0:n.disableConversationNavigation]);const{isLoading:f,data:m}=jNe({clientThreadId:o!=null?o:t,clientModelId:null,conversationMode:e,enabled:!c});v.useEffect(()=>{if(f||!m||s)return;const{default_model_slug:p}=m,g=p;w1.updateDetails(m),g&&pt(t,h=>{h.defaultModelId=g})},[f,m,s])};function Ect(){const t=is();t.redirect!=null&&(window.location.href=t.redirect.destination)}const RNe="365985288",ONe="3561896342";function nr({consumer:t,type:e}){if(!t)return!1;const n=is();if(n.userCountry!=="US")return!0;const r=mn(e==="signup"?RNe:ONe).get(t,[]);return!(n.userRegionCode&&r.includes(n.userRegionCode))}const O5="3747963938802455",Iu="1105138088231444",LNe="Lead",DNe="AddToCart",BNe={"":"",[et.GO]:"FindLocation",[et.PLUS]:"AddToWishlist",[et.PRO]:"CustomizeProduct",[et.SELF_SERVE_BUSINESS]:"Contact","go-secondary":"","plus-secondary":"","pro-secondary":"","team-secondary":"","chatgpt-team-get-started":"Search","chatgpt-codex-get-started":"Donate","chatgpt-team-contact-sales":"ViewContent","chatgpt-explore-plan":"Subscribe","chatgpt-subscribe-plan-plus":"AddPaymentInfo","chatgpt-subscribe-plan-go":"InitiateCheckout","chatgpt-subscribe-plan-pro":"CompleteRegistration","chatgpt-subscribe-plan-business":"Schedule"},FNe={"":"",[et.GO]:"FindLocation",[et.PLUS]:"AddToWishlist",[et.PRO]:"CustomizeProduct",[et.SELF_SERVE_BUSINESS]:"Contact","go-secondary":"","plus-secondary":"","pro-secondary":"","team-secondary":"","chatgpt-team-get-started":"Search","chatgpt-codex-get-started":"Donate","chatgpt-team-contact-sales":"ViewContent","chatgpt-explore-plan":"Subscribe","chatgpt-subscribe-plan-plus":"AddPaymentInfo","chatgpt-subscribe-plan-go":"InitiateCheckout","chatgpt-subscribe-plan-pro":"CompleteRegistration","chatgpt-subscribe-plan-business":"Schedule"};function Tct(){"use forget";const t=D.c(6);let e;t[0]===Symbol.for("react.memo_cache_sentinel")?(e=nr({consumer:"maverick",type:"signup"}),t[0]=e):e=t[0];const n=e;let s;t[1]===Symbol.for("react.memo_cache_sentinel")?(s=mt(),t[1]=s):s=t[1];const o=!s,{eligible:r,isLoading:a}=Ct(We.hasSeenMaverick),l=_n();let c;t[2]===Symbol.for("react.memo_cache_sentinel")?(c=G(N({},Qi),{staleTime:144e5,refetchOnMount:!1,refetchOnWindowFocus:!1,refetchOnReconnect:!1}),t[2]=c):c=t[2];const{data:u,isLoading:d}=ut(c),f=u?u.is_consent_required?!!u.consent_marketing:!0:!1,m=n&&l&&r&&f&&!o,p=a||d;let g;return t[3]!==m||t[4]!==p?(g={eligible:m,isLoading:p},t[3]=m,t[4]=p,t[5]=g):g=t[5],g}function Mct(t){"use forget";const e=D.c(4),{key:n,onTracked:s,allowUnauthenticatedTracking:o}=t,r=o===void 0?!1:o,a=_n();let l;e[0]===Symbol.for("react.memo_cache_sentinel")?(l=is(),e[0]=l):l=e[0];const{cspScriptNonce:c}=l;if(!window||!a&&!r||!c)return UNe;let u;return e[1]!==n||e[2]!==s?(u=()=>{const d=Br(Fr.Fbclid),f=d?BNe[n]:FNe[n];if(!f)return;const m=X$(c);m("set","autoConfig","false",Iu),m("init",Iu),m("dataProcessingOptions",["LDU"],0,0),d?m("trackSingle",Iu,f,{fbclid:d}):m("trackSingle",Iu,f),s()},e[1]=n,e[2]=s,e[3]=u):u=e[3],u}function UNe(){}function Act(){"use forget";const t=D.c(3),e=_n(),n=nr({consumer:"maverick",type:"signup"});let s;t[0]===Symbol.for("react.memo_cache_sentinel")?(s=is(),t[0]=s):s=t[0];const o=s,{cspScriptNonce:r}=o,a=o.eligibleNoCookieConsumerMarketing.isUserEligibleForMaverick,{eligible:l}=Ct(We.hasSeenMaverickCapi);if(!window||!e||!r||!n)return HNe;let c;return t[1]!==l?(c=()=>{const u=Br(Fr.Fbclid);if(!u&&!a)return;const d=X$(r);u&&(d("init",O5),d("dataProcessingOptions",["LDU"],0,0),d("trackSingle",O5,LNe,{fbclid:u})),l&&(d("init",Iu),d("dataProcessingOptions",["LDU"],0,0),d("trackSingle",Iu,DNe,{fbclid:u!=null?u:""}),kt(We.hasSeenMaverickCapi))},t[1]=l,t[2]=c):c=t[2],c}function HNe(){}function X$(t){return!window||!document?()=>{}:((function(e,n,s,o,r,a,l){e.fbq||(r=e.fbq=function(){r.callMethod?r.callMethod(...arguments):r.queue.push(arguments)},e._fbq||(e._fbq=r),r.push=r,r.loaded=!0,r.version="2.0",r.queue=[],a=n.createElement(s),a.async=!0,a.src=o,a.nonce=t,l=n.getElementsByTagName(s)[0],l==null||l.parentNode.insertBefore(a,l))})(window,document,"script","https://connect.facebook.net/en_US/fbevents.js"),window.fbq)}const eG="AW-16678058309",tG="AW-16679965591";function Nct(){const t=nr({consumer:"pioneer",type:"signup"}),e=!mt(),{eligible:n,isLoading:s}=Ct(We.hasSeenPioneer),o=_n(),{data:r,isLoading:a}=ut(G(N({},Qi),{staleTime:14400*1e3,refetchOnMount:!1,refetchOnWindowFocus:!1,refetchOnReconnect:!1})),l=r?r.is_consent_required?!!r.consent_marketing:!0:!1;return{eligible:t&&o&&o.created>Date.now()/1e3-1440*60&&n&&l&&!e,isLoading:s||a}}function $Ne(){["IDE","ANID","NID"].forEach(e=>{try{document.cookie=e+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;domain=."+window.location.hostname}catch(n){ft.logEvent("chatgpt_pioneer_cookie_error")}})}async function GNe(t){if(t)try{const n=new TextEncoder().encode(t);return await crypto.subtle.digest("SHA-256",n).then(s=>Array.from(new Uint8Array(s)).map(o=>o.toString(16).padStart(2,"0")).join(""))}catch(e){ft.logEvent("chatgpt_pioneer_email_error")}}const VNe={"":"",[et.GO]:"AW-16679965591/WLICCMbBkYUbEJen0JE-",[et.PLUS]:"AW-16679965591/_IcwCPrEnYQbEJen0JE-",[et.PRO]:"AW-16679965591/vEXOCMPBkYUbEJen0JE-",[et.SELF_SERVE_BUSINESS]:"AW-16679965591/GuBcCP3CkYUbEJen0JE-","go-secondary":"AW-16678058309/OcdrCOT1g5kbEMXy25A-","plus-secondary":"AW-16678058309/ekpFCMui9ZgbEMXy25A-","pro-secondary":"AW-16678058309/CuIdCPne8JgbEMXy25A-","team-secondary":"AW-16678058309/nwKZCKzt8pgbEMXy25A-","chatgpt-team-get-started":"AW-16679965591/qdZOCN-224sbEJen0JE-","chatgpt-codex-get-started":"AW-16678058309/trpTCNO06tEbEMXy25A-","chatgpt-team-contact-sales":"AW-16679965591/X1ZvCLPptJQbEJen0JE-","chatgpt-explore-plan":"AW-16678058309/-VhXCK3Z2r0bEMXy25A-","chatgpt-subscribe-plan-plus":"AW-16678058309/LjaPCJnT0b0bEMXy25A-","chatgpt-subscribe-plan-go":"AW-16678058309/ShZRCJbT0b0bEMXy25A-","chatgpt-subscribe-plan-pro":"AW-16678058309/lwuWCJzT0b0bEMXy25A-","chatgpt-subscribe-plan-business":"AW-16678058309/NiaVCLbJ2b0bEMXy25A-"},zNe={"":"",[et.GO]:"AW-16679965591/WLICCMbBkYUbEJen0JE-",[et.PLUS]:"AW-16679965591/_IcwCPrEnYQbEJen0JE-",[et.PRO]:"AW-16679965591/vEXOCMPBkYUbEJen0JE-",[et.SELF_SERVE_BUSINESS]:"AW-16679965591/GuBcCP3CkYUbEJen0JE-","go-secondary":"AW-16678058309/OcdrCOT1g5kbEMXy25A-","plus-secondary":"AW-16678058309/ekpFCMui9ZgbEMXy25A-","pro-secondary":"AW-16678058309/CuIdCPne8JgbEMXy25A-","team-secondary":"AW-16678058309/nwKZCKzt8pgbEMXy25A-","chatgpt-team-get-started":"AW-16679965591/qdZOCN-224sbEJen0JE-","chatgpt-codex-get-started":"AW-16678058309/trpTCNO06tEbEMXy25A-","chatgpt-team-contact-sales":"AW-16679965591/X1ZvCLPptJQbEJen0JE-","chatgpt-explore-plan":"AW-16678058309/-VhXCK3Z2r0bEMXy25A-","chatgpt-subscribe-plan-plus":"AW-16678058309/LjaPCJnT0b0bEMXy25A-","chatgpt-subscribe-plan-go":"AW-16678058309/ShZRCJbT0b0bEMXy25A-","chatgpt-subscribe-plan-pro":"AW-16678058309/lwuWCJzT0b0bEMXy25A-","chatgpt-subscribe-plan-business":"AW-16678058309/NiaVCLbJ2b0bEMXy25A-"},WNe={"":"",[et.GO]:"",[et.PLUS]:"",[et.PRO]:"",[et.SELF_SERVE_BUSINESS]:"","go-secondary":"","plus-secondary":"","pro-secondary":"","team-secondary":"","chatgpt-team-get-started":"","chatgpt-codex-get-started":"AW-16679965591/lgvPCJ3j6dEbEJen0JE-","chatgpt-team-contact-sales":"","chatgpt-explore-plan":"AW-16679965591/fQSPCKP20r0bEJen0JE-","chatgpt-subscribe-plan-plus":"AW-16679965591/zJU3CLC02b0bEJen0JE-","chatgpt-subscribe-plan-go":"AW-16679965591/rQqJCK202b0bEJen0JE-","chatgpt-subscribe-plan-pro":"AW-16679965591/AZZZCLO02b0bEJen0JE-","chatgpt-subscribe-plan-business":"AW-16679965591/XTwNCLa02b0bEJen0JE-"},qNe={"":"",[et.GO]:"",[et.PLUS]:"",[et.PRO]:"",[et.SELF_SERVE_BUSINESS]:"","go-secondary":"","plus-secondary":"","pro-secondary":"","team-secondary":"","chatgpt-team-get-started":"","chatgpt-codex-get-started":"AW-16679965591/lgvPCJ3j6dEbEJen0JE-","chatgpt-team-contact-sales":"","chatgpt-explore-plan":"AW-16679965591/fQSPCKP20r0bEJen0JE-","chatgpt-subscribe-plan-plus":"AW-16679965591/zJU3CLC02b0bEJen0JE-","chatgpt-subscribe-plan-go":"AW-16679965591/rQqJCK202b0bEJen0JE-","chatgpt-subscribe-plan-pro":"AW-16679965591/AZZZCLO02b0bEJen0JE-","chatgpt-subscribe-plan-business":"AW-16679965591/XTwNCLa02b0bEJen0JE-"},L5=[[eG,"0kStCJHMl9QZEMXy25A-"],[tG,"1dOfCL2W9ZYbEJen0JE-"]];function Ict({key:t,onTracked:e,allowUnauthenticatedTracking:n=!1}){const s=_n(),{cspScriptNonce:o}=is();return!window||!s&&!n||!o?()=>{}:()=>{const r=Br(Fr.Gclid),a=r?VNe[t]:zNe[t],l=r?WNe[t]:qNe[t];if(!a&&!l)return;const c=(u,d)=>{if(!d)return;const f=G9(o,u);f("config",u,{send_page_view:!1,conversion_linker:!1,allow_ad_personalization_signals:!1,restricted_data_processing:!0}),r?f("event","conversion",{send_to:d,user_data:{gclid:r}}):f("event","conversion",{send_to:d})};a&&c(eG,a),l&&c(tG,l),e()}}function jct(){"use forget";const t=D.c(3),e=_n(),n=nr({consumer:"pioneer",type:"signup"});let s;t[0]===Symbol.for("react.memo_cache_sentinel")?(s=is(),t[0]=s):s=t[0];const o=s,{cspScriptNonce:r}=o,a=o.eligibleNoCookieConsumerMarketing.isUserEligibleForPioneer;if(!window||!e||!r||!n)return KNe;let l;return t[1]!==e?(l=async()=>{const c=Br(Fr.Gclid);if(!c&&!a)return;const u=await GNe(e.email),[d]=L5[0],f=G9(r,d);for(const[m,p]of L5)f("config",m,{send_page_view:!1,conversion_linker:!0,restricted_data_processing:!0}),$Ne(),f("set","user_data",{sha256_email_address:u}),f("event","conversion",{send_to:"".concat(m,"/").concat(p),user_data:{sha256_email_address:u,gclid:c!=null?c:void 0}});ft.logEvent("chatgpt_pioneer_conv")},t[1]=e,t[2]=l):l=t[2],l}function KNe(){}const YNe={"":0,[et.GO]:22738426,[et.PLUS]:22738410,[et.PRO]:22738418,[et.SELF_SERVE_BUSINESS]:22738434,"go-secondary":0,"plus-secondary":0,"pro-secondary":0,"team-secondary":0,"chatgpt-team-get-started":22837578,"chatgpt-codex-get-started":25010242,"chatgpt-team-contact-sales":22998554,"chatgpt-explore-plan":24300506,"chatgpt-subscribe-plan-plus":24300482,"chatgpt-subscribe-plan-go":24300474,"chatgpt-subscribe-plan-pro":24300490,"chatgpt-subscribe-plan-business":24300498},ZNe={"":0,[et.GO]:22738426,[et.PLUS]:22738410,[et.PRO]:22738418,[et.SELF_SERVE_BUSINESS]:22738434,"go-secondary":0,"plus-secondary":0,"pro-secondary":0,"team-secondary":0,"chatgpt-team-get-started":0,"chatgpt-codex-get-started":25010242,"chatgpt-team-contact-sales":0,"chatgpt-explore-plan":24300506,"chatgpt-subscribe-plan-plus":24300482,"chatgpt-subscribe-plan-go":24300474,"chatgpt-subscribe-plan-pro":24300490,"chatgpt-subscribe-plan-business":24300498},QNe={"":0,[et.GO]:22332948,[et.PLUS]:22332932,[et.PRO]:22332940,[et.SELF_SERVE_BUSINESS]:22332956,"go-secondary":0,"plus-secondary":0,"pro-secondary":0,"team-secondary":0,"chatgpt-team-get-started":22332972,"chatgpt-codex-get-started":23286204,"chatgpt-team-contact-sales":22332964,"chatgpt-explore-plan":22333036,"chatgpt-subscribe-plan-plus":22333012,"chatgpt-subscribe-plan-go":22333004,"chatgpt-subscribe-plan-pro":22333020,"chatgpt-subscribe-plan-business":22333028},JNe={"":0,[et.GO]:22332948,[et.PLUS]:22332932,[et.PRO]:22332940,[et.SELF_SERVE_BUSINESS]:22332956,"go-secondary":0,"plus-secondary":0,"pro-secondary":0,"team-secondary":0,"chatgpt-team-get-started":0,"chatgpt-codex-get-started":23286204,"chatgpt-team-contact-sales":0,"chatgpt-explore-plan":22333036,"chatgpt-subscribe-plan-plus":22333012,"chatgpt-subscribe-plan-go":22333004,"chatgpt-subscribe-plan-pro":22333020,"chatgpt-subscribe-plan-business":22333028};function Pct(){"use forget";const t=D.c(6);let e;t[0]===Symbol.for("react.memo_cache_sentinel")?(e=nr({consumer:"seeker",type:"signup"}),t[0]=e):e=t[0];const n=e;let s;t[1]===Symbol.for("react.memo_cache_sentinel")?(s=mt(),t[1]=s):s=t[1];const o=!s,{eligible:r,isLoading:a}=Ct(We.hasSeenSeeker),l=_n();let c;t[2]===Symbol.for("react.memo_cache_sentinel")?(c=G(N({},Qi),{staleTime:144e5,refetchOnMount:!1,refetchOnWindowFocus:!1,refetchOnReconnect:!1}),t[2]=c):c=t[2];const{data:u,isLoading:d}=ut(c),f=u?u.is_consent_required?!!u.consent_marketing:!0:!1,m=n&&l&&r&&f&&!o,p=a||d;let g;return t[3]!==m||t[4]!==p?(g={eligible:m,isLoading:p},t[3]=m,t[4]=p,t[5]=g):g=t[5],g}function Rct(){"use forget";const t=D.c(2),e=_n(),n=nr({consumer:"seeker",type:"signup"});let s;t[0]===Symbol.for("react.memo_cache_sentinel")?(s=is(),t[0]=s):s=t[0];const o=s,{cspScriptNonce:r}=o,a=o.eligibleNoCookieConsumerMarketing.isUserEligibleForSeeker;if(!window||!e||!r||!n)return XNe;let l;return t[1]===Symbol.for("react.memo_cache_sentinel")?(l=()=>{if(!(!Br(Fr.Liclid)&&!a))try{MS(r,yr)("track",{conversion_id:22332924,[Ju]:yr})}catch(u){const d=u;Ve.addError(d,{conversion_id:22332924,partner_id:yr})}},t[1]=l):l=t[1],l}function XNe(){}const D5="seeker-script-8jd10",e5e="seeker-script-h8d129",Hi="7057666",yr="8245332",Ju="__seekerPartnerId";let B5=!1;const Pi={},F5={},_0={};function wm(t){const e=Pi[t];if(!e)return;const n=_0[t];if(n!=null&&n.length){_0[t]=[];for(const[s,o,r]of n)e.call(s,o,r)}}function nG(t){if(typeof window>"u")return;const e=window,n="_linkedin_data_partner_ids";e._linkedin_partner_id=t,e._linkedin_data_partner_id=t,e[n]=Array.isArray(e[n])?e[n]:[],e[n].includes(t)||e[n].push(t)}function t5e(){if(B5||typeof window>"u")return;B5=!0;const t=window;let e=t.lintrk;const n=s=>{if(!s||s.__seekerWrapped)return s;const o=!!s.q,r=function(l,c){let u;if(c&&Ju in c){const f=c[Ju];(f===Hi||f===yr)&&(u=f)}u&&nG(u);let d=c;return!o&&u&&c&&(d=N({},c),delete d[Ju]),s.call(this,l,d)};return o&&s.q&&(r.q=s.q),r.__seekerWrapped=!0,r.__seekerIsStub=o,r};Object.defineProperty(t,"lintrk",{configurable:!0,get(){return e},set(s){if(e=n(s),e&&!e.__seekerIsStub){const o=t._linkedin_partner_id;o===Hi?(Pi[Hi]=e,wm(Hi)):o===yr&&(Pi[yr]=e,wm(yr))}}}),e=n(e)}function n5e(t){switch(t){case Hi:return D5;case yr:return e5e;default:return D5}}function Oct(t){"use forget";const e=D.c(4),{key:n,onTracked:s,allowUnauthenticatedTracking:o}=t,r=o===void 0?!1:o,a=_n();let l;e[0]===Symbol.for("react.memo_cache_sentinel")?(l=is(),e[0]=l):l=e[0];const{cspScriptNonce:c}=l;if(!window||!a&&!r||!c)return s5e;let u;return e[1]!==n||e[2]!==s?(u=()=>{const d=Br(Fr.Liclid),f=d?YNe[n]:ZNe[n],m=d?QNe[n]:JNe[n];if(!(!f&&!m)){if(f)try{MS(c,Hi)("track",{conversion_id:f,[Ju]:Hi}),s()}catch(p){const g=p;Ve.addError(g,{conversion_id:f,partner_id:Hi})}if(m)try{MS(c,yr)("track",{conversion_id:m,[Ju]:yr}),s()}catch(p){const g=p;Ve.addError(g,{conversion_id:m,partner_id:yr})}}},e[1]=n,e[2]=s,e[3]=u):u=e[3],u}function s5e(){}function MS(t,e){var o,r;if(typeof window>"u"||typeof document>"u")return()=>{};t5e();const n=window;nG(e);let s=F5[e];if(s||(s=function(l,c){var f;const u=Pi[e];if(u)return wm(e),u.call(this,l,c);((f=_0[e])!=null?f:_0[e]=[]).push([this,l,c])},F5[e]=s),!Pi[e]){if(!n.lintrk){const c=function(d,f){var p;const m=(p=n.lintrk)==null?void 0:p.q;m&&m.push([d,f])};c.q=[],n.lintrk=c}const a=n5e(e);if(document.getElementById(a))!Pi[e]&&typeof n.lintrk=="function"&&(Pi[e]=n.lintrk,wm(e));else{const c=document.getElementsByTagName("script")[0],u=document.createElement("script");u.id=a,u.type="text/javascript",u.async=!0,u.src="https://snap.licdn.com/li.lms-analytics/insight.min.js",typeof t=="string"&&(u.nonce=t),u.addEventListener("load",()=>{const d=n.lintrk;typeof d=="function"&&(Pi[e]=d,wm(e))}),((r=(o=c==null?void 0:c.parentNode)!=null?o:document.head)!=null?r:document.documentElement).insertBefore(u,c!=null?c:null)}}return s}function Lct(){"use forget";const t=D.c(6);let e;t[0]===Symbol.for("react.memo_cache_sentinel")?(e=nr({consumer:"stratos",type:"signup"}),t[0]=e):e=t[0];const n=e;let s;t[1]===Symbol.for("react.memo_cache_sentinel")?(s=mt(),t[1]=s):s=t[1];const o=!s,{eligible:r,isLoading:a}=Ct(We.hasSeenStratos),l=_n();let c;t[2]===Symbol.for("react.memo_cache_sentinel")?(c=G(N({},Qi),{staleTime:144e5,refetchOnMount:!1,refetchOnWindowFocus:!1,refetchOnReconnect:!1}),t[2]=c):c=t[2];const{data:u,isLoading:d}=ut(c),f=u?u.is_consent_required?!!u.consent_marketing:!0:!1,m=n&&l&&r&&f&&!o,p=a||d;let g;return t[3]!==m||t[4]!==p?(g={eligible:m,isLoading:p},t[3]=m,t[4]=p,t[5]=g):g=t[5],g}function Dct(){"use forget";const t=D.c(2),e=_n(),n=nr({consumer:"stratos",type:"signup"});let s;t[0]===Symbol.for("react.memo_cache_sentinel")?(s=is(),t[0]=s):s=t[0];const o=s,{cspScriptNonce:r}=o,a=o.eligibleNoCookieConsumerMarketing.isUserEligibleForStratos;if(!window||!e||!r||!n)return o5e;let l;return t[1]===Symbol.for("react.memo_cache_sentinel")?(l=()=>{const c=Br(Fr.Tiktokclid);if(!(!c&&!a))try{const u=r5e(r);u.load("D0V58BRC77UC6ES2LGJG",{limited_data_use:!0}),u.page(),u.identify({external_id:c}),u.track("AddToCart")}catch(u){const d=u;Ve.addError(d,{message:"Failed to track Stratos conversion"})}},t[1]=l):l=t[1],l}function o5e(){}function r5e(t){return!window||!document?()=>{}:((function(e,n,s){e.TiktokAnalyticsObject=s;var o=e[s]=e[s]||[];o.methods=["page","track","identify","instances","debug","on","off","once","ready","alias","group","enableCookie","disableCookie","holdConsent","revokeConsent","grantConsent"],o.setAndDefer=function(a,l){a[l]=function(){a.push([l].concat(Array.prototype.slice.call(arguments,0)))}};for(var r=0;r<o.methods.length;r++)o.setAndDefer(o,o.methods[r]);o.instance=function(a){for(var l=o._i[a]||[],c=0;c<o.methods.length;c++)o.setAndDefer(l,o.methods[c]);return l},o.load=function(a,l){var c="https://analytics.tiktok.com/i18n/pixel/events.js";l&&l.partner,o._i=o._i||{},o._i[a]=[],o._i[a]._u=c,o._t=o._t||{},o._t[a]=+new Date,o._o=o._o||{},o._o[a]=l||{},l=n.createElement("script"),l.type="text/javascript",l.async=!0,l.src=c+"?sdkid="+a+"&lib="+s,l.nonce=t,a=n.getElementsByTagName("script")[0],a.parentNode.insertBefore(l,a)}})(window,document,"ttq"),window.ttq)}function Bct(){"use forget";const t=D.c(6);let e;t[0]===Symbol.for("react.memo_cache_sentinel")?(e=nr({consumer:"trailblazer",type:"signup"}),t[0]=e):e=t[0];const n=e;let s;t[1]===Symbol.for("react.memo_cache_sentinel")?(s=mt(),t[1]=s):s=t[1];const o=!s,{eligible:r,isLoading:a}=Ct(We.hasSeenTrailBlazer),l=_n();let c;t[2]===Symbol.for("react.memo_cache_sentinel")?(c=G(N({},Qi),{staleTime:144e5,refetchOnMount:!1,refetchOnWindowFocus:!1,refetchOnReconnect:!1}),t[2]=c):c=t[2];const{data:u,isLoading:d}=ut(c),f=u?u.is_consent_required?!!u.consent_marketing:!0:!1,m=n&&l&&r&&f&&!o,p=a||d;let g;return t[3]!==m||t[4]!==p?(g={eligible:m,isLoading:p},t[3]=m,t[4]=p,t[5]=g):g=t[5],g}const a5e={"":"",[et.GO]:"FindLocation",[et.PLUS]:"",[et.PRO]:"CustomizeProduct",[et.SELF_SERVE_BUSINESS]:"","go-secondary":"","plus-secondary":"","pro-secondary":"","team-secondary":"","chatgpt-team-get-started":"PageVisit","chatgpt-codex-get-started":"SignUp","chatgpt-team-contact-sales":"","chatgpt-explore-plan":"","chatgpt-subscribe-plan-plus":"AddToCart","chatgpt-subscribe-plan-go":"","chatgpt-subscribe-plan-pro":"","chatgpt-subscribe-plan-business":"Purchase"},i5e={"":"",[et.GO]:"",[et.PLUS]:"",[et.PRO]:"",[et.SELF_SERVE_BUSINESS]:"","go-secondary":"","plus-secondary":"","pro-secondary":"","team-secondary":"","chatgpt-team-get-started":"","chatgpt-codex-get-started":"SignUp","chatgpt-team-contact-sales":"","chatgpt-explore-plan":"","chatgpt-subscribe-plan-plus":"","chatgpt-subscribe-plan-go":"","chatgpt-subscribe-plan-pro":"","chatgpt-subscribe-plan-business":""};function Fct(t){"use forget";const e=D.c(4),{key:n,onTracked:s,allowUnauthenticatedTracking:o}=t,r=o===void 0?!1:o,a=_n();let l;e[0]===Symbol.for("react.memo_cache_sentinel")?(l=is(),e[0]=l):l=e[0];const{cspScriptNonce:c}=l;if(!window||!a&&!r||!c)return l5e;let u;return e[1]!==n||e[2]!==s?(u=()=>{const d=Br(Fr.Rdtcid),f=d?a5e[n]:i5e[n];if(!f)return;const m=sG(c);m("init","a2_f1c16ccvsrrl",{dpm:"LDU",dpcc:"ALL",dprc:"ALL"}),d?m("track",f,{rdt_cid:d}):m("track",f),s()},e[1]=n,e[2]=s,e[3]=u):u=e[3],u}function l5e(){}function Uct(){"use forget";const t=D.c(2),e=_n(),n=nr({consumer:"trailblazer",type:"signup"});let s;t[0]===Symbol.for("react.memo_cache_sentinel")?(s=is(),t[0]=s):s=t[0];const o=s,{cspScriptNonce:r}=o,a=o.eligibleNoCookieConsumerMarketing.isUserEligibleForTrailBlazer;if(!window||!e||!r||!n)return c5e;let l;return t[1]===Symbol.for("react.memo_cache_sentinel")?(l=()=>{const c=Br(Fr.Rdtcid);if(!c&&!a)return;const u=sG(r);u("init","a2_f1c16ccvsrrl",{}),u("track","Lead",{rdt_cid:c!=null?c:void 0})},t[1]=l):l=t[1],l}function c5e(){}function sG(t){return!window||!document?()=>{}:((function(e,n){if(!e.rdt){var s=e.rdt=function(){s.sendEvent?s.sendEvent(...arguments):s.callQueue.push(arguments)};s.callQueue=[];var o=n.createElement("script");o.src="https://www.redditstatic.com/ads/pixel.js",o.async=!0,o.nonce=t;var r=n.getElementsByTagName("script")[0];r==null||r.parentNode.insertBefore(o,r)}})(window,document),window.rdt)}const u5e="187204252",U5="wayfinder-uet-script",d5e={"":"",[et.GO]:"FindLocation",[et.PLUS]:"AddToWishlist",[et.PRO]:"CustomizeProduct",[et.SELF_SERVE_BUSINESS]:"Contact","go-secondary":"","plus-secondary":"","pro-secondary":"","team-secondary":"","chatgpt-team-get-started":"Search","chatgpt-codex-get-started":"","chatgpt-team-contact-sales":"ViewContent","chatgpt-explore-plan":"Subscribe","chatgpt-subscribe-plan-plus":"AddPaymentInfo","chatgpt-subscribe-plan-go":"InitiateCheckout","chatgpt-subscribe-plan-pro":"Complete Registration","chatgpt-subscribe-plan-business":"Schedule"};function Hct(){"use forget";const t=D.c(6);let e;t[0]===Symbol.for("react.memo_cache_sentinel")?(e=nr({consumer:"wayfinder",type:"signup"}),t[0]=e):e=t[0];const n=e;let s;t[1]===Symbol.for("react.memo_cache_sentinel")?(s=mt(),t[1]=s):s=t[1];const o=!s,{eligible:r,isLoading:a}=Ct(We.hasSeenWayfinder),l=_n();let c;t[2]===Symbol.for("react.memo_cache_sentinel")?(c=G(N({},Qi),{staleTime:144e5,refetchOnMount:!1,refetchOnWindowFocus:!1,refetchOnReconnect:!1}),t[2]=c):c=t[2];const{data:u,isLoading:d}=ut(c),f=u?u.is_consent_required?!!u.consent_marketing:!0:!1,m=n&&l&&r&&f&&!o,p=a||d;let g;return t[3]!==m||t[4]!==p?(g={eligible:m,isLoading:p},t[3]=m,t[4]=p,t[5]=g):g=t[5],g}function $ct(t){"use forget";const e=D.c(4),{key:n,onTracked:s,allowUnauthenticatedTracking:o}=t,r=o===void 0?!1:o,a=_n();let l;e[0]===Symbol.for("react.memo_cache_sentinel")?(l=is(),e[0]=l):l=e[0];const{cspScriptNonce:c}=l;if(!window||!a&&!r||!c)return f5e;let u;return e[1]!==n||e[2]!==s?(u=()=>{if(!Br(Fr.Msclkid))return;const f=d5e[n];if(f)try{const m=oG(c);if(!m)return;m.push("event",f),s()}catch(m){const p=m;Ve.addError(p,{message:"Failed to track Wayfinder Bing b2b conversion",eventName:f})}},e[1]=n,e[2]=s,e[3]=u):u=e[3],u}function f5e(){}function Gct(){"use forget";const t=D.c(2),e=_n(),n=nr({consumer:"wayfinder",type:"signup"});let s;t[0]===Symbol.for("react.memo_cache_sentinel")?(s=is(),t[0]=s):s=t[0];const o=s,{cspScriptNonce:r}=o,a=o.eligibleNoCookieConsumerMarketing.isUserEligibleForWayfinder;if(!window||!e||!r||!n)return m5e;let l;return t[1]===Symbol.for("react.memo_cache_sentinel")?(l=()=>{if(!(!Br(Fr.Msclkid)&&!a))try{const u=oG(r);if(!u)return;u.push("event","AddToCart")}catch(u){const d=u;Ve.addError(d,{message:"Failed to track Wayfinder Bing b2c conversion",eventName:"AddToCart"})}},t[1]=l):l=t[1],l}function m5e(){}function oG(t){var r,a;if(!window||!document)return;const e=window;e.uetq=(r=e.uetq)!=null?r:[],e.__wayfinderConsentConfigured||(e.uetq.push("consent","default",{ad_storage:"granted"}),e.__wayfinderConsentConfigured=!0);const n=()=>{var c;if(e.__wayfinderUetInitialized||typeof e.UET!="function")return;const l={ti:u5e,enableAutoSpaTracking:!0};l.q=e.uetq,e.uetq=new e.UET(l),(c=e.uetq)==null||c.push("pageLoad"),e.__wayfinderUetInitialized=!0};if(document.getElementById(U5))return n(),e.uetq;const s=document.createElement("script");s.id=U5,s.async=!0,s.src="https://bat.bing.com/bat.js",t&&(s.nonce=t),s.onload=n,s.addEventListener("readystatechange",()=>{const l=s.readyState;(!l||l==="loaded"||l==="complete")&&n()});const o=document.getElementsByTagName("script")[0];return(a=o==null?void 0:o.parentNode)==null||a.insertBefore(s,o),e.uetq}function Vct(t){"use forget";const e=D.c(6);let n,s;if(e[0]!==t){const l=mt()&&!t;n=ut,s=Ace(l),e[0]=t,e[1]=n,e[2]=s}else n=e[1],s=e[2];const{data:o}=n(s);let r,a;e[3]!==o?(r=()=>{!o||!o.ui_info||Wo.updateDetails(o,void 0,void 0)},a=[o],e[3]=o,e[4]=r,e[5]=a):(r=e[4],a=e[5]),v.useEffect(r,a)}const p5e={stiffness:300,damping:30,mass:1},g5e={transition:p5e,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0}};function h5e(t){"use forget";const e=D.c(26),{size:n,triggerIcon:s,triggerButton:o,children:r,side:a,className:l,triggerIconClassName:c,sideOffset:u,alignOffset:d,open:f,onOpenChange:m,alignAgainstAnchor:p,disableAutofocus:g,modal:h}=t,_=n===void 0?"default":n,x=a===void 0?"bottom":a,b=u===void 0?10:u,y=d===void 0?0:d,S=p===void 0?"center":p,C=g===void 0?!1:g,w=h===void 0?!1:h,k=mJ();let E;e[0]!==s||e[1]!==o||e[2]!==c?(E=s?i.jsx(ba,{className:q("hover:bg-token-main-surface-secondary rounded-lg p-2",c),children:i.jsx(s,{className:"icon"})}):i.jsx(ba,{asChild:!0,children:o}),e[0]=s,e[1]=o,e[2]=c,e[3]=E):E=e[3];let T;e[4]!==C?(T=O=>{C&&O.preventDefault()},e[4]=C,e[5]=T):T=e[5];const M=_==="default";let A;e[6]!==l||e[7]!==M?(A=q({"max-w-xs min-w-[200px]":M},l),e[6]=l,e[7]=M,e[8]=A):A=e[8];let I;e[9]!==S||e[10]!==y||e[11]!==r||e[12]!==x||e[13]!==b||e[14]!==A||e[15]!==T?(I=i.jsx(b3,{$as:Al,side:x,sideOffset:b,alignOffset:y,align:S,collisionPadding:10,onOpenAutoFocus:T,className:A,children:r}),e[9]=S,e[10]=y,e[11]=r,e[12]=x,e[13]=b,e[14]=A,e[15]=T,e[16]=I):I=e[16];let j;e[17]!==k||e[18]!==I?(j=i.jsx(Ml,G(N({},k),{children:I})),e[17]=k,e[18]=I,e[19]=j):j=e[19];let R;return e[20]!==w||e[21]!==m||e[22]!==f||e[23]!==j||e[24]!==E?(R=i.jsxs(Tl,{open:f,onOpenChange:m,modal:w,children:[E,j]}),e[20]=w,e[21]=m,e[22]=f,e[23]=j,e[24]=E,e[25]=R):R=e[25],R}function $E(t){"use forget";const e=D.c(2);t.triggerIcon&&t.triggerButton;let n;return e[0]!==t?(n=i.jsx(h5e,N({},t)),e[0]=t,e[1]=n):n=e[1],n}const _5e={setFocusedObject:t=>{W1.setState({focusedObject:t}),rge()},close(){W1.setState({focusedObject:null})}},x5e=({className:t})=>i.jsxs(Vs,{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",className:t,children:[i.jsx("path",{d:"M11.5047 10C12.8828 10 14 11.1172 14 12.4953C14 15.2919 10.9404 14.9905 9.00947 14.9905C9.00947 13.0596 8.70813 10 11.5047 10Z",stroke:"currentColor",strokeWidth:"2",strokeLinejoin:"round"}),i.jsx("path",{d:"M12 9.5C13.8983 6.79576 16.0839 4.85949 18.8983 3.40128C19.3829 3.15019 19.9712 3.25691 20.3571 3.64286V3.64286C20.7431 4.0288 20.8498 4.61706 20.5987 5.10168C19.1405 7.91612 17.2042 10.1017 14.5 12",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"}),i.jsx("path",{d:"M12.0003 21.0003C11.5003 21.0003 8.93732 20.1297 6.71782 17.9102C3.00784 14.2002 2.05809 9.13491 4.5965 6.5965C6.68218 4.51082 10.4738 4.78002 13.8179 7.00031M17.1066 10.0003C19.9927 13.3315 21.2146 16.7289 19.0003 18.5003C17.3415 19.8274 15.2424 18.2927 14.0176 17.1097",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),y5e=({className:t})=>i.jsx(Vs,{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",className:t,children:i.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.70711 2.29289C8.09763 2.68342 8.09763 3.31658 7.70711 3.70711L6.41421 5H13.5C17.6421 5 21 8.35786 21 12.5C21 16.6421 17.6421 20 13.5 20H9C8.44772 20 8 19.5523 8 19C8 18.4477 8.44772 18 9 18H13.5C16.5376 18 19 15.5376 19 12.5C19 9.46243 16.5376 7 13.5 7H6.41421L7.70711 8.29289C8.09763 8.68342 8.09763 9.31658 7.70711 9.70711C7.31658 10.0976 6.68342 10.0976 6.29289 9.70711L3.29289 6.70711C2.90237 6.31658 2.90237 5.68342 3.29289 5.29289L6.29289 2.29289C6.68342 1.90237 7.31658 1.90237 7.70711 2.29289Z",fill:"currentColor"})}),b5e=({className:t})=>i.jsx(Vs,{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",className:t,children:i.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16.2929 2.29289C16.6834 1.90237 17.3166 1.90237 17.7071 2.29289L20.7071 5.29289C21.0976 5.68342 21.0976 6.31658 20.7071 6.70711L17.7071 9.70711C17.3166 10.0976 16.6834 10.0976 16.2929 9.70711C15.9024 9.31658 15.9024 8.68342 16.2929 8.29289L17.5858 7H10.5C7.46243 7 5 9.46243 5 12.5C5 15.5376 7.46243 18 10.5 18H15C15.5523 18 16 18.4477 16 19C16 19.5523 15.5523 20 15 20H10.5C6.35786 20 3 16.6421 3 12.5C3 8.35786 6.35786 5 10.5 5H17.5858L16.2929 3.70711C15.9024 3.31658 15.9024 2.68342 16.2929 2.29289Z",fill:"currentColor"})}),zct=({className:t})=>i.jsx(Vs,{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",className:t,children:i.jsx("path",{d:"M3 18H4.17157C4.70201 18 5.21071 17.7893 5.58579 17.4142L15.4142 7.58579C15.7893 7.21071 16.298 7 16.8284 7H19M3 6H4.17157C4.70201 6 5.21071 6.21071 5.58579 6.58579L8 9M19 17H16.8284C16.298 17 15.7893 16.7893 15.4142 16.4142L14 15M18 4L21 7L18 10M18 14L21 17L18 20",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),Wct=({className:t})=>i.jsx(Vs,{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",className:t,children:i.jsx("rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",stroke:"currentColor",strokeWidth:"2"})}),qct=({className:t})=>i.jsx(Vs,{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",className:t,children:i.jsx("rect",{x:"2",y:"6",width:"20",height:"12",rx:"2",stroke:"currentColor",strokeWidth:"2"})}),Kct=({className:t})=>i.jsx(Vs,{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",className:t,children:i.jsx("rect",{x:"6",y:"2",width:"12",height:"20",rx:"2",stroke:"currentColor",strokeWidth:"2"})}),Yct=({className:t})=>i.jsx(Vs,{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",className:t,children:i.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13 4C13 3.44772 13.4477 3 14 3H20C20.5523 3 21 3.44772 21 4V10C21 10.5523 20.5523 11 20 11C19.4477 11 19 10.5523 19 10V6.41421L15.2071 10.2071C14.8166 10.5976 14.1834 10.5976 13.7929 10.2071C13.4024 9.81658 13.4024 9.18342 13.7929 8.79289L17.5858 5H14C13.4477 5 13 4.55228 13 4ZM4 13C4.55228 13 5 13.4477 5 14V17.5858L8.79289 13.7929C9.18342 13.4024 9.81658 13.4024 10.2071 13.7929C10.5976 14.1834 10.5976 14.8166 10.2071 15.2071L6.41421 19H10C10.5523 19 11 19.4477 11 20C11 20.5523 10.5523 21 10 21H4C3.44772 21 3 20.5523 3 20V14C3 13.4477 3.44772 13 4 13Z",fill:"currentColor"})});function rG(t){var e,n,s;return(s=(n=(e=t.metadata)==null?void 0:e.dalle)==null?void 0:n.prompt)!=null?s:""}async function v5e(t,e,n="image/png"){return new Promise((s,o)=>{t.toBlob(r=>{r!=null?s(new File([r],e,{type:n})):o(new Error("Failed to convert canvas to blob"))},n)})}async function S5e(t,e){const n=document.createElement("canvas");n.width=t.width,n.height=t.height;const s=n.getContext("2d");if(s==null)throw new Error("Failed to get 2d context for mask canvas");const o=s.createImageData(t.width,t.height);for(let r=0;r<t.data.length;r+=4)t.data[r+3]!==0?(o.data[r]=0,o.data[r+1]=0,o.data[r+2]=0,o.data[r+3]=255):(o.data[r]=255,o.data[r+1]=255,o.data[r+2]=255,o.data[r+3]=255);return s.putImageData(o,0,0),v5e(n,e)}async function C5e(t,e){const s=await(await fetch(t)).blob(),o=document.createElement("a");o.href=URL.createObjectURL(s),o.download=e,o.click(),o.remove()}function w5e(t){const e=gJ(new Date,"yyyy-MM-dd HH.mm.ss");let n=t.slice(0,150);return n.endsWith(".")&&(n=n.slice(0,-1)),"DALLE ".concat(e," - ").concat(n,".webp")}async function k5e(t,e,n,s=!1){var l,c,u,d,f,m,p,g,h,_,x,b,y,S,C,w,k,E,T,M,A,I;const o=rG(t),r=w5e(o);await C5e(t.url,r);const a=s?"chatgpt_dalle_image_captioning_download":"chatgpt_dalle_image_download";ft.logEvent(a,null,{sourceOperation:(u=(c=(l=t.metadata)==null?void 0:l.dalle)==null?void 0:c.edit_op)!=null?u:"none",hasParent:((f=(d=t.metadata)==null?void 0:d.dalle)==null?void 0:f.parent_gen_id)!=null?"true":"false",model:"dalle"}),V.logEvent(a,{conversationId:e,messageId:n,generationId:(p=(m=t.metadata)==null?void 0:m.dalle)==null?void 0:p.gen_id,parentGenerationId:(h=(g=t.metadata)==null?void 0:g.dalle)==null?void 0:h.parent_gen_id,fileId:Mr(t.asset_pointer),sourceOperation:(x=(_=t.metadata)==null?void 0:_.dalle)==null?void 0:x.edit_op,model:"dalle"}),ft.logEvent("chatgpt_image_download",null,{sourceOperation:(S=(y=(b=t.metadata)==null?void 0:b.dalle)==null?void 0:y.edit_op)!=null?S:"none",hasParent:((w=(C=t.metadata)==null?void 0:C.dalle)==null?void 0:w.parent_gen_id)!=null?"true":"false",model:"dalle"}),V.logEvent("chatgpt_image_download",{conversationId:e,messageId:n,generationId:(E=(k=t.metadata)==null?void 0:k.dalle)==null?void 0:E.gen_id,parentGenerationId:(M=(T=t.metadata)==null?void 0:T.dalle)==null?void 0:M.parent_gen_id,fileId:Mr(t.asset_pointer),sourceOperation:(I=(A=t.metadata)==null?void 0:A.dalle)==null?void 0:I.edit_op,model:"dalle"})}function Zct(t){const e=TL(t),n=aE(),s=e&&"gizmo"in e?e.gizmo:void 0;return!n&&(s==null?void 0:s.gizmo.id)===pJ}function E5e(t,e){var o,r;const n=(r=(o=e.metadata)==null?void 0:o.dalle)==null?void 0:r.gen_id,s=Mr(e.asset_pointer);return s==null||n==null?t:vi(t,{promptMessage:{metadata:{dalle:{from_client:{operation:{type:"transformation",original_gen_id:n,original_file_id:s}}}}}})}async function T5e(t,e,n,s){return new Promise((o,r)=>{hJ(ti(t),t,e,n,{kind:_J.DalleAgent},{onFileCreated:uo,onFileUploadProgress:uo,onFileUploaded:(a,l)=>o(l),onError:(a,l)=>{r(new Error("Failed to upload file with reason: ".concat(l)))}},s)})}async function M5e(t,e,n,s,o){var l,c;const r=(c=(l=e.metadata)==null?void 0:l.dalle)==null?void 0:c.gen_id,a=Mr(e.asset_pointer);if(a==null||r==null||n==null)return t;try{const u=await S5e(n,"mask.png"),d=await T5e(u,s,o,{imageDimensions:{width:e.width,height:e.height}});return vi(t,{promptMessage:{metadata:{dalle:{from_client:{operation:{type:"inpainting",original_gen_id:r,original_file_id:a,mask_file_id:d}}}}}})}catch(u){return Ve.addError(u),t}}async function A5e(t,e,n,s,o){return await Promise.all(e.map(r=>wl.fetch(t,{asset:r,sharedThreadId:n,gizmoId:s,conversationId:o}))).catch(r=>{const a=e.map(l=>Mr(l.asset_pointer));throw Ve.addError(new Error("Could not fetch files with IDs ".concat(a," from file service"),{cause:r})),r})}var aG=["PageUp","PageDown"],iG=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],lG={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},Sf="Slider",[AS,N5e,I5e]=SC(Sf),[cG]=Pc(Sf,[I5e]),[j5e,yx]=cG(Sf),uG=v.forwardRef((t,e)=>{const A=t,{name:n,min:s=0,max:o=100,step:r=1,orientation:a="horizontal",disabled:l=!1,minStepsBetweenThumbs:c=0,defaultValue:u=[s],value:d,onValueChange:f=()=>{},onValueCommit:m=()=>{},inverted:p=!1,form:g}=A,h=De(A,["name","min","max","step","orientation","disabled","minStepsBetweenThumbs","defaultValue","value","onValueChange","onValueCommit","inverted","form"]),_=v.useRef(new Set),x=v.useRef(0),y=a==="horizontal"?P5e:R5e,[S=[],C]=ld({prop:d,defaultProp:u,onChange:I=>{var R;(R=[..._.current][x.current])==null||R.focus(),f(I)}}),w=v.useRef(S);function k(I){const j=F5e(S,I);M(I,j)}function E(I){M(I,x.current)}function T(){const I=w.current[x.current];S[x.current]!==I&&m(S)}function M(I,j,{commit:R}={commit:!1}){const O=G5e(r),L=V5e(Math.round((I-s)/r)*r+s,O),B=R1(L,[s,o]);C((U=[])=>{const H=D5e(U,B,j);if($5e(H,c*r)){x.current=H.indexOf(B);const $=String(H)!==String(U);return $&&R&&m(H),$?H:U}else return U})}return i.jsx(j5e,{scope:t.__scopeSlider,name:n,disabled:l,min:s,max:o,valueIndexToChangeRef:x,thumbs:_.current,values:S,orientation:a,form:g,children:i.jsx(AS.Provider,{scope:t.__scopeSlider,children:i.jsx(AS.Slot,{scope:t.__scopeSlider,children:i.jsx(y,G(N({"aria-disabled":l,"data-disabled":l?"":void 0},h),{ref:e,onPointerDown:Gt(h.onPointerDown,()=>{l||(w.current=S)}),min:s,max:o,inverted:p,onSlideStart:l?void 0:k,onSlideMove:l?void 0:E,onSlideEnd:l?void 0:T,onHomeKeyDown:()=>!l&&M(s,0,{commit:!0}),onEndKeyDown:()=>!l&&M(o,S.length-1,{commit:!0}),onStepKeyDown:({event:I,direction:j})=>{if(!l){const L=aG.includes(I.key)||I.shiftKey&&iG.includes(I.key)?10:1,B=x.current,U=S[B],H=r*L*j;M(U+H,B,{commit:!0})}}}))})})})});uG.displayName=Sf;var[dG,fG]=cG(Sf,{startEdge:"left",endEdge:"right",size:"width",direction:1}),P5e=v.forwardRef((t,e)=>{const y=t,{min:n,max:s,dir:o,inverted:r,onSlideStart:a,onSlideMove:l,onSlideEnd:c,onStepKeyDown:u}=y,d=De(y,["min","max","dir","inverted","onSlideStart","onSlideMove","onSlideEnd","onStepKeyDown"]),[f,m]=v.useState(null),p=Qn(e,S=>m(S)),g=v.useRef(),h=EC(o),_=h==="ltr",x=_&&!r||!_&&r;function b(S){const C=g.current||f.getBoundingClientRect(),w=[0,C.width],E=GE(w,x?[n,s]:[s,n]);return g.current=C,E(S-C.left)}return i.jsx(dG,{scope:t.__scopeSlider,startEdge:x?"left":"right",endEdge:x?"right":"left",direction:x?1:-1,size:"width",children:i.jsx(mG,G(N({dir:h,"data-orientation":"horizontal"},d),{ref:p,style:G(N({},d.style),{"--radix-slider-thumb-transform":"translateX(-50%)"}),onSlideStart:S=>{const C=b(S.clientX);a==null||a(C)},onSlideMove:S=>{const C=b(S.clientX);l==null||l(C)},onSlideEnd:()=>{g.current=void 0,c==null||c()},onStepKeyDown:S=>{const w=lG[x?"from-left":"from-right"].includes(S.key);u==null||u({event:S,direction:w?-1:1})}}))})}),R5e=v.forwardRef((t,e)=>{const h=t,{min:n,max:s,inverted:o,onSlideStart:r,onSlideMove:a,onSlideEnd:l,onStepKeyDown:c}=h,u=De(h,["min","max","inverted","onSlideStart","onSlideMove","onSlideEnd","onStepKeyDown"]),d=v.useRef(null),f=Qn(e,d),m=v.useRef(),p=!o;function g(_){const x=m.current||d.current.getBoundingClientRect(),b=[0,x.height],S=GE(b,p?[s,n]:[n,s]);return m.current=x,S(_-x.top)}return i.jsx(dG,{scope:t.__scopeSlider,startEdge:p?"bottom":"top",endEdge:p?"top":"bottom",size:"height",direction:p?1:-1,children:i.jsx(mG,G(N({"data-orientation":"vertical"},u),{ref:f,style:G(N({},u.style),{"--radix-slider-thumb-transform":"translateY(50%)"}),onSlideStart:_=>{const x=g(_.clientY);r==null||r(x)},onSlideMove:_=>{const x=g(_.clientY);a==null||a(x)},onSlideEnd:()=>{m.current=void 0,l==null||l()},onStepKeyDown:_=>{const b=lG[p?"from-bottom":"from-top"].includes(_.key);c==null||c({event:_,direction:b?-1:1})}}))})}),mG=v.forwardRef((t,e)=>{const f=t,{__scopeSlider:n,onSlideStart:s,onSlideMove:o,onSlideEnd:r,onHomeKeyDown:a,onEndKeyDown:l,onStepKeyDown:c}=f,u=De(f,["__scopeSlider","onSlideStart","onSlideMove","onSlideEnd","onHomeKeyDown","onEndKeyDown","onStepKeyDown"]),d=yx(Sf,n);return i.jsx(bn.span,G(N({},u),{ref:e,onKeyDown:Gt(t.onKeyDown,m=>{m.key==="Home"?(a(m),m.preventDefault()):m.key==="End"?(l(m),m.preventDefault()):aG.concat(iG).includes(m.key)&&(c(m),m.preventDefault())}),onPointerDown:Gt(t.onPointerDown,m=>{const p=m.target;p.setPointerCapture(m.pointerId),m.preventDefault(),d.thumbs.has(p)?p.focus():s(m)}),onPointerMove:Gt(t.onPointerMove,m=>{m.target.hasPointerCapture(m.pointerId)&&o(m)}),onPointerUp:Gt(t.onPointerUp,m=>{const p=m.target;p.hasPointerCapture(m.pointerId)&&(p.releasePointerCapture(m.pointerId),r(m))})}))}),pG="SliderTrack",gG=v.forwardRef((t,e)=>{const r=t,{__scopeSlider:n}=r,s=De(r,["__scopeSlider"]),o=yx(pG,n);return i.jsx(bn.span,G(N({"data-disabled":o.disabled?"":void 0,"data-orientation":o.orientation},s),{ref:e}))});gG.displayName=pG;var NS="SliderRange",hG=v.forwardRef((t,e)=>{const m=t,{__scopeSlider:n}=m,s=De(m,["__scopeSlider"]),o=yx(NS,n),r=fG(NS,n),a=v.useRef(null),l=Qn(e,a),c=o.values.length,u=o.values.map(p=>xG(p,o.min,o.max)),d=c>1?Math.min(...u):0,f=100-Math.max(...u);return i.jsx(bn.span,G(N({"data-orientation":o.orientation,"data-disabled":o.disabled?"":void 0},s),{ref:l,style:G(N({},t.style),{[r.startEdge]:d+"%",[r.endEdge]:f+"%"})}))});hG.displayName=NS;var IS="SliderThumb",_G=v.forwardRef((t,e)=>{const n=N5e(t.__scopeSlider),[s,o]=v.useState(null),r=Qn(e,l=>o(l)),a=v.useMemo(()=>s?n().findIndex(l=>l.ref.current===s):-1,[n,s]);return i.jsx(O5e,G(N({},t),{ref:r,index:a}))}),O5e=v.forwardRef((t,e)=>{const b=t,{__scopeSlider:n,index:s,name:o}=b,r=De(b,["__scopeSlider","index","name"]),a=yx(IS,n),l=fG(IS,n),[c,u]=v.useState(null),d=Qn(e,y=>u(y)),f=c?a.form||!!c.closest("form"):!0,m=ZP(c),p=a.values[s],g=p===void 0?0:xG(p,a.min,a.max),h=B5e(s,a.values.length),_=m==null?void 0:m[l.size],x=_?U5e(_,g,l.direction):0;return v.useEffect(()=>{if(c)return a.thumbs.add(c),()=>{a.thumbs.delete(c)}},[c,a.thumbs]),i.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[l.startEdge]:"calc(".concat(g,"% + ").concat(x,"px)")},children:[i.jsx(AS.ItemSlot,{scope:t.__scopeSlider,children:i.jsx(bn.span,G(N({role:"slider","aria-label":t["aria-label"]||h,"aria-valuemin":a.min,"aria-valuenow":p,"aria-valuemax":a.max,"aria-orientation":a.orientation,"data-orientation":a.orientation,"data-disabled":a.disabled?"":void 0,tabIndex:a.disabled?void 0:0},r),{ref:d,style:p===void 0?{display:"none"}:t.style,onFocus:Gt(t.onFocus,()=>{a.valueIndexToChangeRef.current=s})}))}),f&&i.jsx(L5e,{name:o!=null?o:a.name?a.name+(a.values.length>1?"[]":""):void 0,form:a.form,value:p},s)]})});_G.displayName=IS;var L5e=t=>{const r=t,{value:e}=r,n=De(r,["value"]),s=v.useRef(null),o=TC(e);return v.useEffect(()=>{const a=s.current,l=window.HTMLInputElement.prototype,u=Object.getOwnPropertyDescriptor(l,"value").set;if(o!==e&&u){const d=new Event("input",{bubbles:!0});u.call(a,e),a.dispatchEvent(d)}},[o,e]),i.jsx("input",G(N({style:{display:"none"}},n),{ref:s,defaultValue:e}))};function D5e(t=[],e,n){const s=[...t];return s[n]=e,s.sort((o,r)=>o-r)}function xG(t,e,n){const r=100/(n-e)*(t-e);return R1(r,[0,100])}function B5e(t,e){return e>2?"Value ".concat(t+1," of ").concat(e):e===2?["Minimum","Maximum"][t]:void 0}function F5e(t,e){if(t.length===1)return 0;const n=t.map(o=>Math.abs(o-e)),s=Math.min(...n);return n.indexOf(s)}function U5e(t,e,n){const s=t/2,r=GE([0,50],[0,s]);return(s-r(e)*n)*n}function H5e(t){return t.slice(0,-1).map((e,n)=>t[n+1]-e)}function $5e(t,e){if(e>0){const n=H5e(t);return Math.min(...n)>=e}return!0}function GE(t,e){return n=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const s=(e[1]-e[0])/(t[1]-t[0]);return e[0]+s*(n-t[0])}}function G5e(t){return(String(t).split(".")[1]||"").length}function V5e(t,e){const n=Math.pow(10,e);return Math.round(t*n)/n}var VE=uG,zE=gG,yG=hG,WE=_G;function Qct({imageAsset:t,mode:e,setMode:n,clientThreadId:s,messageId:o,cursorWidth:r,setCursorWidth:a,inpaintingDrawingState:l,isLoadingNewImage:c}){const u=Lt(s),{canUndoDrawing:d,undoDrawing:f,canRedoDrawing:m,redoDrawing:p,clearAllDrawings:g}=l,h=te();return i.jsxs(wt.div,G(N({className:"flex h-16 w-full justify-between px-4"},g5e),{children:[i.jsx("div",{className:"flex items-center",children:e==="inpaint"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:q("flex items-center gap-3",c&&"opacity-50"),children:[i.jsx($5,{className:"h-[11px] w-[11px]"}),i.jsxs(VE,{className:"relative flex w-[90px] items-center",min:32,max:240,step:.01,value:[r],onValueChange:_=>a(_[0]),disabled:c,children:[i.jsx(zE,{className:"bg-token-text-quaternary relative h-[2px] grow",children:i.jsx(yG,{className:"bg-token-text-secondary absolute h-full"})}),i.jsx(WE,{className:"bg-token-text-secondary block h-[11px] w-[11px] rounded-full"})]}),i.jsx($5,{className:"h-6 w-6"})]}),i.jsx(H5,{}),i.jsx(Fa,{disabled:!d||c,onClick:f,children:i.jsx(y5e,{})}),i.jsx(Fa,{disabled:!m||c,onClick:p,children:i.jsx(b5e,{})}),i.jsx(H5,{}),i.jsx(Fa,{disabled:!d||c,onClick:g,children:i.jsx(P,{id:"imageEditorControls.clearSelectionButtonLabel",defaultMessage:"Clear selection"})})]})}),i.jsx("div",{className:"flex items-center",children:e==="inpaint"?i.jsx(Fa,{onClick:()=>n("default"),disabled:c,children:i.jsx(P,{id:"imageEditorControls.cancelButtonLabel",defaultMessage:"Cancel"})}):i.jsxs(i.Fragment,{children:[i.jsx(W5e,{imageAsset:t,setMode:n,messageId:o,serverThreadId:u}),i.jsx(Fa,{tooltip:h.formatMessage({id:"imageEditorControls.downloadButtonTooltip",defaultMessage:"Save"}),onClick:()=>k5e(t,u,o),children:i.jsx(WU,{})}),i.jsx(z5e,{prompt:rG(t),children:i.jsx(Fa,{tooltip:h.formatMessage({id:"imageEditorControls.promptButtonTooltip",defaultMessage:"Prompt"}),children:i.jsx(kr,{})})}),i.jsx(Fa,{tooltip:h.formatMessage({id:"imageEditorControls.closeButtonTooltip",defaultMessage:"Close"}),onClick:_5e.close,children:i.jsx(ms,{className:"icon-lg"})})]})})]}))}function z5e({prompt:t,children:e}){const[n,s]=v.useState(!1),o=te(),r=Dt();return i.jsx($E,{sideOffset:4,alignAgainstAnchor:"end",triggerButton:i.jsx("div",{className:"group",children:e}),className:"z-10",size:"none",children:i.jsxs("div",{className:"flex max-w-sm flex-col gap-3 p-4",children:[i.jsx("div",{className:"text-token-text-secondary",children:i.jsx(P,{id:"imageEditorControls.promptPopoverLabel",defaultMessage:"Prompt"})}),i.jsx("div",{children:t}),i.jsx("div",{children:i.jsx(Se,{color:"secondary",disabled:n,onClick:a=>{s(!0),zo(t,r,a),setTimeout(()=>s(!1),2e3)},icon:tk,children:n?o.formatMessage({id:"imageEditorControls.copiedButtonLabel",defaultMessage:"Copied!"}):o.formatMessage({id:"imageEditorControls.copyButtonLabel",defaultMessage:"Copy"})})})]})})}function Fa({children:t,tooltip:e,disabled:n,onClick:s}){const o=i.jsx("button",{className:q("hover:bg-token-main-surface-tertiary group-radix-state-open:bg-token-main-surface-tertiary rounded-sm p-2 font-semibold",n?"text-token-text-quaternary":"text-token-text-secondary"),disabled:n,onClick:s,children:t});return e!=null?i.jsx(St,{label:e,children:o}):o}function Jct({onClose:t}){const e=te();return i.jsx(Fa,{tooltip:e.formatMessage({id:"imageEditorControls.closeButtonTooltip",defaultMessage:"Close"}),onClick:t,children:i.jsx(ms,{className:"icon-lg"})})}function W5e({imageAsset:t,setMode:e,messageId:n,serverThreadId:s,disabled:o}){const r=te(),a=Ct(We.DalleEditingOnboarding),l=a.eligible&&!a.isLoading,c=i.jsx(Fa,{tooltip:l?void 0:r.formatMessage({id:"imageEditorControls.inpaintButtonTooltip",defaultMessage:"Select area"}),onClick:()=>{var u,d,f,m,p,g,h,_,x,b,y,S,C,w,k,E,T,M,A,I,j,R;e("inpaint"),ft.logEvent("chatgpt_dalle_inpaint_click",null,{sourceOperation:(f=(d=(u=t.metadata)==null?void 0:u.dalle)==null?void 0:d.edit_op)!=null?f:"none",hasParent:((p=(m=t.metadata)==null?void 0:m.dalle)==null?void 0:p.parent_gen_id)!=null?"true":"false",model:"dalle"}),V.logEvent("chatgpt_dalle_inpaint_click",{conversationId:s,messageId:n,generationId:(h=(g=t.metadata)==null?void 0:g.dalle)==null?void 0:h.gen_id,fileId:Mr(t.asset_pointer),parentGenerationId:(x=(_=t.metadata)==null?void 0:_.dalle)==null?void 0:x.parent_gen_id,sourceOperation:(y=(b=t.metadata)==null?void 0:b.dalle)==null?void 0:y.edit_op,model:"dalle"}),ft.logEvent("chatgpt_image_inpaint_click",null,{sourceOperation:(w=(C=(S=t.metadata)==null?void 0:S.dalle)==null?void 0:C.edit_op)!=null?w:"none",hasParent:((E=(k=t.metadata)==null?void 0:k.dalle)==null?void 0:E.parent_gen_id)!=null?"true":"false",model:"dalle"}),V.logEvent("chatgpt_image_inpaint_click",{conversationId:s,messageId:n,generationId:(M=(T=t.metadata)==null?void 0:T.dalle)==null?void 0:M.gen_id,fileId:Mr(t.asset_pointer),parentGenerationId:(I=(A=t.metadata)==null?void 0:A.dalle)==null?void 0:I.parent_gen_id,sourceOperation:(R=(j=t.metadata)==null?void 0:j.dalle)==null?void 0:R.edit_op,model:"dalle"})},disabled:o,children:i.jsx(x5e,{})});return l?i.jsx(hf,{announcementKey:We.DalleEditingOnboarding,show:!0,side:"bottom",sideOffset:0,title:r.formatMessage({id:"imageEditorNUX.title",defaultMessage:"Select area of the image to edit"}),description:r.formatMessage({id:"imageEditorNUX.description",defaultMessage:"Highlight the area and describe changes in chat."}),onDismiss:()=>kt(We.DalleEditingOnboarding),children:i.jsx("div",{children:c})}):c}var dP;const H5=Tt.div(dP||(dP=_t(["mx-3 w-[1px] h-6 bg-token-border-default"])));var fP;const $5=Tt.div(fP||(fP=_t(["rounded-full border-2 border-token-text-secondary"])));function Xct(t,e,n,s,o){let r=xJ.getReadyFiles(t.getState());(s==null?void 0:s.kind)===Bt.GizmoMagicCreate?r=r.filter(g=>g.gizmoId!=null):r=r.filter(g=>g.gizmoId==null);let a=e!=null?e:"";const l=[],c=[],u=V9(n,s,o),f=z9(n,s).length>0,m=u===io.Interpreter||u===io.Retrieval||u===io.ContextConnector,p=xe("3681682292");return r.forEach(g=>{var x,b;const h=g.fileSpec,_=cNe(h.mimeType,h.name);if(m&&!(f&&p&&_)){const y=h.contextConnectorInfo,S={id:h.id,size:h.size,name:h.name,context_connector_info:y?{context_connector:y==null?void 0:y.contextConnector,source_url:y==null?void 0:y.sourceUrl,synthetic_extension:(x=y==null?void 0:y.syntheticExtension)!=null?x:null,type:y==null?void 0:y.type}:void 0,mime_type:h.mimeType,width:"width"in h?h.width:void 0,height:"height"in h?h.height:void 0,file_token_size:h.fileTokenSize,source:g.source,library_file_id:g.libraryFileId,is_big_paste:(b=h.isBigPaste)!=null?b:!1};l.push(S)}f&&("width"in h&&"height"in h&&c.push({content_type:el.ImageAssetPointer,asset_pointer:mv(h.id),size_bytes:h.size,width:h.width,height:h.height}),p&&_&&c.push({content_type:el.VideoAssetPointer,asset_pointer:mv(h.id),size_bytes:h.size,format:_,metadata:{source:"quick_video_capture"}}))}),c.length>0&&(c.push(e!=null?e:""),a={content_type:vt.MultimodalText,parts:c}),{content:a,attachments:l}}const q5e=Hn(()=>d3(()=>yJ)),K5e="image-gen-action-modal-upload-photos",Y5e="image-gen-action-modal-upload-camera",Z5e=Hn(()=>function({files:e,type:n,conversation:s,filePickerStore:o}){const r=bJ();if(!e||!r)return{tempIds:[],uploads:null};const a=Fn(s),l=ug(s),c=vJ(s.id)(),u=o!=null?o:q5e(),d=W9(a,l),f=Array.from(e).map(g=>{const h=ti(g);return{result:Sr.uploadFile(u,h,g,io.Multimodal,z9(a,l),r,lp(),N({isUnauthenticated:!mt()},c?{uploadSource:c}:{}),d==null?void 0:d.attachments),tempId:h}}),m=f.map(g=>g.tempId),p=Promise.allSettled(f.map(g=>g.result));return P2e(s).set(m),V.logEventWithStatsig("Upload File",n==="photos"?"chatgpt_web_photos_file_uploaded":"chatgpt_web_camera_file_uploaded",{intent:n,source:"image-gen-action-modal",location:"image-gen-action-modal"}),{tempIds:m,uploads:p}});function eut(t){"use forget";const e=D.c(9),{onUploadFiles:n}=t,s=Q5e;let o;e[0]===Symbol.for("react.memo_cache_sentinel")?(o=()=>s("photos"),e[0]=o):o=e[0];let r;e[1]!==n?(r=i.jsx("input",{className:"sr-only",type:"file",tabIndex:-1,"aria-hidden":!0,id:K5e,onClick:o,onChange:u=>{n({files:u.currentTarget.files,type:"photos"})},accept:"image/*",multiple:!0}),e[1]=n,e[2]=r):r=e[2];let a;e[3]===Symbol.for("react.memo_cache_sentinel")?(a=()=>s("camera"),e[3]=a):a=e[3];let l;e[4]!==n?(l=i.jsx("input",{className:"sr-only",type:"file",tabIndex:-1,"aria-hidden":!0,id:Y5e,onClick:a,onChange:u=>{n({files:u.currentTarget.files,type:"camera"})},accept:"image/*",capture:"environment",multiple:!0}),e[4]=n,e[5]=l):l=e[5];let c;return e[6]!==r||e[7]!==l?(c=i.jsxs(i.Fragment,{children:[r,l]}),e[6]=r,e[7]=l,e[8]=c):c=e[8],c}function Q5e(t){V.logEvent("Open File Viewer",{intent:t,source:"image-gen-action-modal"}),ft.logEvent("chatgpt_web_".concat(t,"_file_viewer_opened"),null,{location:"image-gen-action-modal"})}const tut=re(me,"1a24f4",20,20);async function nut({url:t,fileName:e}){const s=await(await fetch(t)).blob(),o=document.createElement("a");o.href=URL.createObjectURL(s),o.download=e,o.click(),o.remove()}const J5e="ChatGPT Image";function sut(t){const e=new Date,n=t.formatDate(e,{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"});return"".concat(J5e," ").concat(n,".png")}const X5e=qe({id:"imageGenEditor.transformationTextareaPlaceholder",defaultMessage:"Describe what you want to add, remove or replace"}),eIe=qe({id:"imageGenEditor.transformationTextareaPlaceholderShort",defaultMessage:"Describe your edit"}),jS="image",out=({image:t,currentDrawnShape:e,onCleared:n,getImageData:s})=>{const o=te(),{setTargetedContent:r}=vf(),a=Dt(),c=Bd()?X5e:eIe;v.useEffect(()=>(e==null?r({type:"object",subtype:jS,placeholderTextOverride:c,shouldPersistAcrossMessages:!0,isFocusedViewContent:!1,createNewCompletionParams:u=>E5e(u,t)}):r({type:"object",subtype:jS,placeholderTextOverride:c,isFocusedViewContent:!1,createNewCompletionParams:async u=>await M5e(u,t,s(),o,a),onCleared:n}),()=>{r(void 0)}),[e,s,t,o,n,r,a,c])};function tIe({systemHints:t,isN7jupdActive:e}){const n=ot.agentSessionMode$();if(!e)return;const s=t.includes(Ke.Agent);if(!(n!=="incognito"||!s))return{n7jupd_local_safe_mode:!0}}let PS=null;function rut(t){PS=t}function nIe(t){return PS?PS(t):t}async function sIe({appUri:t,file:e}){const n=await oIe(e),s=new FormData;return s.append("app_uri",t),s.append("file",n,n.name),s}async function oIe(t){const e=await t.arrayBuffer(),n=t.name&&t.name.trim().length>0?t.name.trim():"apps-sdk-upload";return new File([e],n,{type:t.type||"application/octet-stream",lastModified:t.lastModified})}function bG(t){switch(t.content.content_type){case vt.Text:return t.content.parts.join("");case vt.Code:return t.content.text;default:return""}}const G5=new WeakMap,x0=new WeakMap,V5=t=>{const e=G5.get(t);if(e)return e;try{const n=t!=null&&t.widget_state?JSON.parse(t.widget_state):void 0;return G5.set(t,n),n}catch(n){return null}},rIe=t=>{var n;const e=x0.get(t);if(e)return e;try{const s=bG(t),o=s&&(n=JSON.parse(s))!=null?n:void 0;return x0.set(t,o),o}catch(s){return null}},aIe=t=>{const e=x0.get(t);if(e)return e;try{const n=bG(t),[s]=Zi(n,xr({path:ks,args:o=>{if(typeof o=="string"){const[r]=Zi(ks(o),Im);return r!=null?r:{}}return Im(o,{})}}));return s?(x0.set(t,s),s):null}catch(n){return null}},bx=t=>{var e;return(e=t.html_asset_pointer)!=null?e:""},iIe=t=>{var e;return(e=t.resolved_pineapple_uri)!=null?e:""},z5="api_tool",qE=t=>t.filter(e=>{var n,s,o;return e.author.role===dt.Assistant&&!!((n=e.recipient)!=null&&n.startsWith(z5))||e.author.role===dt.Tool&&(!!((s=e.author.name)!=null&&s.startsWith(z5))||!!((o=e.author.name)!=null&&o.startsWith("genui.run")))}),rb=t=>{var e;if(t){if("metadata"in t)return(e=t.metadata)==null?void 0:e.chatgpt_sdk;if("chatgpt_sdk"in t)return t.chatgpt_sdk}else return},vG=u_(lIe);function lIe(t){var m,p,g,h,_,x,b,y,S,C,w,k,E,T,M;const e=qE(t),n=e.find(A=>A.author.role===dt.Assistant),s=e.findLast(A=>A.author.role===dt.Tool&&!!rb(A)),o=rb(n),r=rb(s);let a=o;r&&(a=N(N({},a),r)),a=cd(a);const l=bx(a),c=iIe(a),u=()=>n?aIe(n):null,d=()=>s?rIe(s):null,f=(m=a.tool_response_metadata)!=null?m:null;return new Proxy({csp:(p=a.csp)!=null?p:null,disableHeader:a.disable_header,isComplete:!!s&&!!n,invocationUuid:(g=a.invocation_uuid)!=null?g:null,turnUuid:(h=a.turn_uuid)!=null?h:null,distributionChannel:(_=a.distribution_channel)!=null?_:qh.EXTERNAL,widgetSessionId:(b=(x=a.widget_session_id)!=null?x:a.session_id)!=null?b:null,oaiSubjectId:(S=(y=a.oai_subject_id)!=null?y:a.subject_id)!=null?S:null,oaiSessionId:(C=a.oai_session_id)!=null?C:null,connectorId:(w=a.attribution_id)!=null?w:"",isError:(k=a.is_error)!=null?k:!1,messages:t,widgetId:(T=(E=s==null?void 0:s.id)!=null?E:n==null?void 0:n.id)!=null?T:"",toolMessageId:(M=s==null?void 0:s.id)!=null?M:null,metadata:a,widgetType:l,widgetParent:c,toolResponseMetadata:f,fitWidth:!!a.fit_width,toolInput:null,toolOutput:null,path:null},{get(A,I){var j,R,O,L,B,U;if(I==="path")return(R=(j=u())==null?void 0:j.path)!=null?R:null;if(I==="toolInput")return(L=(O=u())==null?void 0:O.args)!=null?L:null;if(I==="toolOutput")return(B=d())!=null?B:null;if(I in A)return(U=Object.getOwnPropertyDescriptor(A,I))==null?void 0:U.value}})}const cIe=t=>qE(t).some(e=>{var n;return!!((n=e.metadata)!=null&&n.chatgpt_sdk)}),uIe="oai-ecosys-db",Ei="resolved-widget-cache",dIe=10,W5=(t,e)=>DR(e,{key:()=>t,domain:Pl(ks),subdomain:Pl(ks),name:Pl(ks),html:Pl(ks),fitWidth:Ba,logoUrl:Pl(ks),logoUrlDark:Pl(ks),csp:Pl(xr({isTrusted:Ba,connectDomains:Zg,resourceDomains:Zg,frameDomains:Zg})),redirectDomains:Zg,prefersBorder:Ba,hideWidgetAttribution:Ba,hideWidgetActions:Ba,hideFullScreenHeader:Ba,hideComposer:Ba,lastAccess:A9});class fIe{constructor(e){ye(this,"db");ye(this,"openDB",Gf({name:"open_db"},()=>new Promise((e,n)=>{const s=indexedDB.open(uIe,1);s.onupgradeneeded=()=>{const o=s.result;o.objectStoreNames.contains(Ei)||o.createObjectStore(Ei,{keyPath:"key"}).createIndex("lastAccess","lastAccess")},s.onsuccess=()=>e(s.result),s.onerror=()=>n(s.error)})));ye(this,"getDB",Gf({name:"get_db"},async()=>{const e=await this.db;return!e||e.close===void 0||e.version===0?(this.db=this.openDB(),this.db):e}));ye(this,"get",Gf({name:"get"},async e=>{const n=await this.getDB();return n?new Promise((s,o)=>{const a=n.transaction(Ei,"readwrite").objectStore(Ei),l=a.get(e);l.onsuccess=()=>{if(l.result==null)return s(null);const c=W5(e,l.result);c.lastAccess=Date.now(),a.put(c),s(c)},l.onerror=()=>o(l.error)}):null}));ye(this,"set",Gf({name:"set"},async(e,n)=>{const s=await this.getDB();if(!s)return;const r=s.transaction(Ei,"readwrite").objectStore(Ei);r.put(G(N({},W5(e,n)),{key:e,lastAccess:Date.now()})),await new Promise((a,l)=>{const c=r.count();c.onsuccess=()=>{if(c.result>dIe){const f=r.index("lastAccess").openCursor();f.onsuccess=()=>{const m=f.result;m&&r.delete(m.primaryKey),a()},f.onerror=()=>l(f.error);return}a()},c.onerror=()=>l(c.error)})}));ye(this,"delete",Gf({name:"delete"},async e=>{const n=await this.getDB();if(!n)return;const o=n.transaction(Ei,"readwrite").objectStore(Ei);await new Promise((r,a)=>{const l=o.delete(e);l.onsuccess=()=>r(),l.onerror=()=>a(l.error)})}));this.ctx=e,this.db=this.openDB()}}const Gf=({name:t},e)=>async(...n)=>{try{return await e(...n)}catch(s){return Me(async()=>{const{DatadogLogger:o}=await import("./4813494d-di0bpg5zidu9s57f.js").then(r=>r.E$);return{DatadogLogger:o}},__vite__mapDeps([2,1,3])).then(({DatadogLogger:o})=>{o.addError(s)}),Me(async()=>{const{statsc:o,Namespace:r}=await import("./4813494d-di0bpg5zidu9s57f.js").then(a=>a.F0);return{statsc:o,Namespace:r}},__vite__mapDeps([2,1,3])).then(({statsc:o,Namespace:r})=>{o.count(r.ECOSYSTEM,"resolved_widget_cache.".concat(t,".error"))}),null}},mIe=Hn(t=>new fIe(t)),pIe=(t,e,n)=>{var s,o,r;return e!=null||(e=t.csp),e?{isTrusted:!0,connectDomains:(s=e.connect_domains)!=null?s:[],resourceDomains:(o=e.resource_domains)!=null?o:[],frameDomains:(r=e.frame_domains)!=null?r:[]}:n?{isTrusted:!1,connectDomains:[],resourceDomains:[],frameDomains:[]}:null},RS=t=>{if(!t)return null;try{return new URL(t).hostname.replaceAll(".","-")}catch(e){return t.startsWith("http")?null:RS("https://".concat(t))}},a1=({chatSDK:t,widgetResponse:e})=>{var d,f,m,p,g,h,_,x,b,y,S,C,w,k,E,T,M,A,I,j,R,O,L,B,U,H;const n=(f=(d=e==null?void 0:e.domain)!=null?d:t.metadata.widget_domain)!=null?f:null,s=(p=RS(n))!=null?p:RS((m=t.metadata.resolved_pineapple_uri)!=null?m:null),o=t.distributionChannel!==qh.ONLY_ME&&t.distributionChannel!==qh.OPENAI,r=(g=e==null?void 0:e.logo_url)!=null?g:null,a=(_=(h=e==null?void 0:e.hide_widget_attribution)!=null?h:t.metadata.hide_widget_attribution)!=null?_:t.distributionChannel===qh.OPENAI,l=(b=(x=e==null?void 0:e.csp)==null?void 0:x.redirect_domains)!=null?b:[],c=(S=(y=t.csp)==null?void 0:y.redirect_domains)!=null?S:[],u=l.length>0?l:c;return{domain:n,subdomain:s,name:(C=e==null?void 0:e.name)!=null?C:null,html:(w=e==null?void 0:e.html)!=null?w:null,logoUrl:r,logoUrlDark:(k=e==null?void 0:e.logo_url_dark)!=null?k:r,csp:pIe(t,(E=e==null?void 0:e.csp)!=null?E:null,o),redirectDomains:u,prefersBorder:(M=(T=e==null?void 0:e.prefers_border)!=null?T:t.metadata.prefers_border)!=null?M:!1,hideComposer:(A=t.metadata.hide_composer)!=null?A:!1,hideWidgetAttribution:a,hideWidgetActions:((j=(I=e==null?void 0:e.hide_widget_feedback)!=null?I:t.metadata.hide_widget_feedback)!=null?j:!1)||((O=(R=e==null?void 0:e.hide_widget_actions)!=null?R:t.metadata.hide_widget_actions)!=null?O:!1),fitWidth:(B=(L=e==null?void 0:e.fit_width)!=null?L:t.metadata.fit_width)!=null?B:!1,hideFullScreenHeader:(H=(U=e==null?void 0:e.hide_full_screen_header)!=null?U:t.disableHeader)!=null?H:!1}},gIe=({metadata:t,path:e},n)=>{var a,l,c;const s=(l=(a=n==null?void 0:n.templateOverride)!=null?a:t.html_asset_pointer)!=null?l:null;if(!s)return null;if(n!=null&&n.appOverride)return"".concat(s,"-connectors://").concat(n.appOverride);const o=(c=t.resolved_pineapple_uri)!=null?c:"",r=e||t.resource_name||"";return"".concat(s,"-").concat(o,"-").concat(r)},SG=({metadata:t,path:e},n)=>{var s;return n!=null&&n.appOverride?["htmlAsset",n.appOverride,n.templateOverride]:["htmlAsset",t.resolved_pineapple_uri,(s=n==null?void 0:n.templateOverride)!=null?s:t.html_asset_pointer,e||t.resource_name]},hIe=(t,e,n)=>{var s;return a1({chatSDK:e,widgetResponse:(s=t.getQueryData(SG(e,n)))!=null?s:null})},aut=(t,e)=>{"use no forget";var b,y;const n=e!=null&&e.appOverride?G(N({},t),{metadata:G(N({},t.metadata),{resolved_pineapple_uri:"connectors://".concat(e.appOverride)})}):t,s=mIe(),o=gIe(t,e),{path:r}=t,{html_asset_pointer:a,resolved_pineapple_uri:l,resource_name:c}=t.metadata,u=(y=(b=e==null?void 0:e.templateOverride)!=null?b:a)!=null?y:"",d=SG(t,e),{data:f,isLoading:m}=ut({queryKey:["resolvedWidgetCache",o],queryFn:()=>o?s.get(o):Promise.resolve(null),enabled:!!o,staleTime:1/0,gcTime:1/0}),{data:p,isLoading:g,isError:h,refetch:_}=ut({queryKey:d,queryFn:async()=>{try{const S=await ue.safeGet("/ecosystem/widget",{parameters:{query:N({force_local:!1},e!=null&&e.appOverride?{connector_id:e.appOverride,uri:"connectors://".concat(e.appOverride),template_pointer:u}:{uri:l!=null?l:"",template_pointer:u,resource_path:r||c||""})}});if(o){const C=a1({chatSDK:n,widgetResponse:S});s.set(o,C)}return S}catch(S){throw o&&S instanceof Vn&&S.status===404&&s.delete(o),S}},gcTime:0,enabled:d.every(Boolean)}),x=N(N(N({},a1({chatSDK:n,widgetResponse:null})),f!=null?f:void 0),p?a1({chatSDK:n,widgetResponse:p}):{});return G(N({},x),{refetch:_,isLoading:g&&(!f||m),isError:h})};var tp,rd,ad,O0;class _Ie{constructor(e){ye(this,"requestBlockingPromiseListener",null);ye(this,"subscriptionEffect",null);ye(this,"showLoadingBar$",st(!1));ye(this,"transitioningId$",st(null));ye(this,"pinnedChatSDK$",st(null));ye(this,"pinnedChatSDKId$",yt(()=>{var e,n;return(n=(e=this.pinnedChatSDK$())==null?void 0:e.widgetId)!=null?n:null}));ye(this,"pinnedWidgetType$",yt(()=>{var n;const e=(n=this.pinnedChatSDK$())==null?void 0:n.metadata;return e?bx(e):null}));ye(this,"conversationChatSDKEntries$",yt(()=>Ya(this.conversation).map(({messages:n})=>cIe(n)?vG(n):null).filter(n=>n!=null),{equals:Ji}));ye(this,"widgetStateCache$",st(new Map,{equals:()=>!1}));ye(this,"conversationTurnSnapshot$",yt(()=>this.hasPinnedWidget$()?Kt(()=>Ya(this.conversation)):[]));ye(this,"hasPinnedWidget$",yt(()=>this.pinnedWidgetType$()!=null));ye(this,"hasFullscreenWidget$",yt(()=>this.hasPinnedWidget$()&&this.displayMode$()==="fullscreen"));ye(this,"isDedicatedAppRoute$",st(!1));ye(this,"displayMode$",st("inline"));ye(this,"title$",st(null));zr(this,tp,st(null));ye(this,"maxWidgetHeight$",yt(()=>{const{height:e}=NNe();if(this.displayMode$()!=="inline")return this.displayMode$()==="pip"?e/2-38:void 0}));zr(this,rd,new Set);zr(this,ad,new Map);ye(this,"closedWidgetIds$",st(new Set,{equals:()=>!1}));ye(this,"pinnedWidgetHeight$",yt(()=>{const e=this.maxWidgetHeight$(),n=this.pinnedWidgetType$(),s=Xn(this,tp).call(this);return n?Math.min(e!=null?e:0,s!=null?s:0):null}));zr(this,O0,e=>tl(async n=>{const s=this.conversation.serverId$();if(s)try{await ue.safePost("/ecosystem/widget_state",{requestBody:{conversation_id:s,message_id:e,state:JSON.stringify(n)}})}catch(o){}finally{Xn(this,rd).delete(e)}},2e3));ye(this,"getLatestChatSDK$",e=>{const n=this.pinnedWidgetType$();if(!n||n!==e.widgetType)return e;const s=Ya(this.conversation);return q5(e,s,n)});ye(this,"getLatestChatSDKForSession$",e=>{const n=e.widgetSessionId;if(!n)return e;const s=this.conversationChatSDKEntries$();for(let o=s.length-1;o>=0;o--){const r=s[o];if(r.widgetSessionId===n&&r.widgetType===e.widgetType)return r}return e});this.conversation=e,this.requestBlockingPromiseListener=Rle(async()=>{await Promise.all(Xn(this,ad).values().map(n=>n.flush()))},()=>Xn(this,rd).size>0)}subscribeToNewMessages$(e,n){this.subscriptionEffect&&this.subscriptionEffect(),this.subscriptionEffect=Hc(()=>{const s=this.pinnedWidgetType$();if(!s)return;const o=this.conversationTurnSnapshot$(),a=Ya(this.conversation).slice(o.length);if(a.length===0)return;const l=q5(e,a,s);n(c=>{var d,f;return!c||l.toolOutput!=null?l:G(N({},l),{toolResponseMetadata:(d=l.toolResponseMetadata)!=null?d:c.toolResponseMetadata,toolOutput:(f=l.toolOutput)!=null?f:c.toolOutput})})})}setPinnedWidgetHeight(e){Xn(this,tp).set(e)}setDedicatedAppRoute(e){this.isDedicatedAppRoute$.set(e)}isPinned$(e){return this.pinnedWidgetType$()===e.widgetType}isPinOrigin$(e){return this.pinnedChatSDKId$()===e.widgetId}setDisplayMode$(e,n,s){Nr(()=>{this.displayMode$.set(n),n==="fullscreen"?s&&this.title$.set(s):this.title$.set(null),n==="pip"||n==="fullscreen"?this.pinnedChatSDK$.set(e):this.pinnedChatSDK$.set(null)})}setWidgetState$(e,n){this.widgetStateCache$.set(this.widgetStateCache$().set(e,n));let s=Xn(this,ad).get(e);s||(s=Xn(this,O0).call(this,e),Xn(this,ad).set(e,s)),Xn(this,rd).add(e),s(n)}closeWidget$(e,n){const s=this.conversation.serverId$();s&&(this.closedWidgetIds$.set(this.closedWidgetIds$().add(e)),ue.safePost("/ecosystem/widget_close",{requestBody:{conversation_id:s,message_id:e,close_reason:n}}))}callTool$(e,n,s){return ue.safePost("/ecosystem/call_mcp",{requestBody:{app_uri:e,tool_name:n,conversation_id:this.conversation.serverId$(),tool_input:s}})}async uploadFile$(e,n){const s=await sIe({appUri:e,file:n});return nc.post("".concat(mc,"/ecosystem/upload_widget_file"),s).then(o=>({fileId:o.file_id}))}getFileDownloadUrl$(e,n){return ue.safePost("/ecosystem/file_download_url",{requestBody:{app_uri:e,file_id:n}}).then(s=>({downloadUrl:s.download_url}))}getFileMetadata$(e,n){return ue.safePost("/ecosystem/file_metadata",{requestBody:{app_uri:e,file_id:n}}).then(s=>{var o,r;return{fileName:(o=s.file_name)!=null?o:null,mimeType:(r=s.mime_type)!=null?r:null}})}getWidgetState$(e){var o,r;const n=(o=this.widgetStateCache$().get(e.widgetId))!=null?o:V5(e.metadata);if(n!=null||e.widgetSessionId==null)return n;const s=this.conversationChatSDKEntries$();for(let a=s.length-1;a>=0;a--){const l=s[a],c=(r=this.widgetStateCache$().get(l.widgetId))!=null?r:V5(l.metadata);if(l.widgetId!==e.widgetId&&l.widgetSessionId===e.widgetSessionId&&c!=null)return c}return null}getWidgetStateAndProps$(e){const{toolInput:n,toolOutput:s,toolResponseMetadata:o}=e;return{toolInput:n,toolOutput:s,toolResponseMetadata:o,widgetState:this.getWidgetState$(e)}}fullscreenWidgetPlaceholder$(e){if(this.displayMode$()!=="fullscreen")return null;const n=this.pinnedChatSDK$();if(!n)return null;const s=hIe(Zn(),n);return s!=null&&s.name?e.formatMessage(qe({id:"oECdDM",defaultMessage:"Ask {name}"}),{name:s.name}):null}}tp=new WeakMap,rd=new WeakMap,ad=new WeakMap,O0=new WeakMap;const OS=vp(t=>new _Ie(t)),q5=(t,e,n)=>{var s,o;for(let r=e.length-1;r>=0;r--){const a=e[r];for(let l=a.messageGroups.length-1;l>=0;l--){const c=a.messageGroups[l];if(c.type===hd.JITPlugin)for(let u=c.messages.length-1;u>=0;u--){const d=c.messages[u];if((s=d.metadata)!=null&&s.chatgpt_sdk&&n===bx((o=d.metadata)==null?void 0:o.chatgpt_sdk))return vG(c.messages)}}}return t},xIe=["local_business","restaurant","hotel"],yIe=(t,e)=>{if(!((t==null?void 0:t.latitude)==null||t.longitude==null||t.latSpan==null||t.longSpan==null||t.latSpan<=0||t.longSpan<=0))return{latitude:t.latitude,longitude:t.longitude,latitude_span:t.latSpan,longitude_span:t.longSpan,map_message_id:e}},bIe=(t,e)=>{const n=new Set(t.map(s=>s.entity_data.id));return e.filter(s=>n.has(s.entity_data.id)?!1:(n.add(s.entity_data.id),!0))},iut=t=>{var o;const e=K5(t.entities),n=(o=t.raw_search_entities)!=null&&o.length?K5(t.raw_search_entities):[],s=bIe(e,n);return{businesses:e,additionalBusinesses:s}},K5=t=>t.map(e=>{var n;return{entity_type:"local_business",entity_data:e.entity,extra_params:(n=e.extra_params)!=null?n:void 0}}),lut=t=>{var n,s;const e=(n=t.metadata)==null?void 0:n.sonic_entity_data;if(!(!(e!=null&&e.status)||e.status!=="success"))return((s=e.results)!=null?s:[]).filter(o=>o.entity_type==="local_business")},cut=(t,e)=>{const n=new Set(e.map(s=>s.entity_data.id));return[...e,...t.filter(s=>!n.has(s.entity_data.id))]},uut=t=>{var e,n,s;return(s=(n=(e=t.metadata)==null?void 0:e.content_references)==null?void 0:n.flatMap(o=>{var r,a;return o.type==="entity"&&xIe.includes((r=o.category)!=null?r:"")&&"entity_data"in o&&o.entity_data?[{entity_type:"local_business",entity_data:o.entity_data,extra_params:(a=o.extra_params)!=null?a:void 0,isModelPreferred:!0}]:[]}))!=null?s:[]},dut=t=>{if(!t)return{latSpan:0,longSpan:0};const e=t.getBounds();return e?{latSpan:Math.abs(e.getNorth()-e.getSouth()),longSpan:Math.abs(e.getEast()-e.getWest())}:{latSpan:0,longSpan:0}};function CG(t,e){return t!=null&&e!=null?"".concat(t,"-").concat(e):void 0}function wG(t,e){return t!=null&&e!=null?"".concat(t,"-").concat(e):void 0}function Y5(t,{serverThreadId:e,fallbackMessageId:n,fallbackTurnIndex:s,contentReferenceType:o,fallbackContentReferenceStartIndex:r,defaultInteractionSurface:a}){var p,g,h,_,x;const l=t.product,c=(p=l.url)!=null?p:void 0,u=c&&(g=CJ(c))!=null?g:void 0,d=(h=t.turnIndex)!=null?h:s,f=CG(e,d),m=wG(f,o);return{messageId:(_=t.messageId)!=null?_:n,conversationId:e,turnIndex:d,turnId:f,contentReferenceId:m,productId:l.id,productUrl:c,productTitle:l.title,productHostname:u,contentReferenceType:o,contentReferenceStartIndex:(x=t.contentReferenceStartIndex)!=null?x:r,productIndex:t.productIndex,interactionSurface:a}}function vIe({serverThreadId:t,selectedProducts:e,targetedProduct:n,context:s}){var f,m,p;const o=n!=null?n:e[0],r=(f=s.messageId)!=null?f:o==null?void 0:o.messageId,a=(m=s.turnIndex)!=null?m:o==null?void 0:o.turnIndex,l=s.contentReferenceType,c=CG(t,a),u=wG(c,l),d=(p=s.contentReferenceStartIndex)!=null?p:o==null?void 0:o.contentReferenceStartIndex;return{messageId:r,turnIndex:a,contentReferenceType:l,turnId:c,contentReferenceId:u,contentReferenceStartIndex:d}}function SIe(t){const{interactionType:e,interactionSurface:n,promptControlId:s,selectedProducts:o,targetedProduct:r,context:a,promptMessageId:l}=t,c=o!=null?o:[],u=a.clientThreadId?Lt(a.clientThreadId):void 0,d=vIe({serverThreadId:u,selectedProducts:c,targetedProduct:r,context:a}),f=c.length,m=c.map(h=>Y5(h,{serverThreadId:u,fallbackMessageId:d.messageId,fallbackTurnIndex:d.turnIndex,contentReferenceType:d.contentReferenceType,fallbackContentReferenceStartIndex:d.contentReferenceStartIndex,defaultInteractionSurface:n})),p=r?Y5(r,{serverThreadId:u,fallbackMessageId:d.messageId,fallbackTurnIndex:d.turnIndex,contentReferenceType:d.contentReferenceType,fallbackContentReferenceStartIndex:d.contentReferenceStartIndex,defaultInteractionSurface:n}):void 0,g={interactionType:e,interactionSurface:n,selectionCount:f,promptControlId:s,targetedProduct:p,selectedProducts:m,messageId:d.messageId,conversationId:u,turnIndex:d.turnIndex,turnId:d.turnId,contentReferenceId:d.contentReferenceId,contentReferenceType:d.contentReferenceType,contentReferenceStartIndex:d.contentReferenceStartIndex,promptMessageId:l};V.logStructuredEvent(SJ,g)}function KE(t){try{return SIe(t)}catch(e){}}const CIe=kJ("connector_openai_shopping");function fut(){return Je("2128165686").get("multiselect_enabled",!1)}function mut(){return Je("2128165686").get("research_prompt_control_enabled",!1)}const cl=Bn(()=>st(new Map,{name:"shoppingProductSelection$"})),vx=Bn(()=>st(!1,{name:"shoppingProductMultiSelectMode$"})),kG=Bn(t=>yt(()=>Array.from(cl(t).values()))),YE=Bn(()=>st(null,{name:"shoppingPromptControlMessage$"})),Sx=Bn(()=>st(null,{name:"shoppingPromptControlId$"})),Nc=Bn(()=>st(null,{name:"shoppingLastInteractionSurface$"})),wIe=Bn(t=>yt(()=>{const e=Nc(t);return e===pv.CHATGPT_PRODUCT_FOLLOW_UP_INTERACTION_SURFACE_PROMPT_CONTROL?e:pv.CHATGPT_PRODUCT_FOLLOW_UP_INTERACTION_SURFACE_PROMPT_TEXT_AREA})),kIe=Bn(t=>yt(()=>{const e=kG(t);if(e.length===0)return null;const n=RIe(e),s=OIe(e);return{type:"text",label:n,createNewCompletionParams:o=>{var b;if(e.length===0)return o;const[r,a,l]=Kt(()=>[YE(t),Sx(t),wIe(t)]),c=s?wJ(n,s):Sp(n),u=r?[r,c]:[c],d=e.map(y=>y.product),f=ZE(e),m=QE(e),p=e[0].messageId,g=e[0].turnIndex;KE({promptMessageId:o.promptMessage.id,interactionType:xc.CHATGPT_PRODUCT_FOLLOW_UP_INTERACTION_EVENT_TYPE_COMPLETION_REQUEST_SUBMITTED,interactionSurface:l,promptControlId:a!=null?a:void 0,selectedProducts:e,targetedProduct:void 0,context:{clientThreadId:Cx(t),messageId:p,turnIndex:g,contentReferenceType:f,contentReferenceStartIndex:m}});const _=a==="research"?BIe(t,o):null,x=vi(o.promptMessage,{metadata:N({shopping_product_selection:{products:d}},_&&{shopping_start_overrides:{skip_product_rating:!0}})});return _&&(x.metadata.system_hints=_.systemHints),G(N({},o),{completionMetadata:(b=_==null?void 0:_.completionMetadata)!=null?b:o.completionMetadata,promptMessage:x,appendMessages:o.appendMessages==null?u:[...o.appendMessages,...u]})},onCreateCompletion:()=>{EIe(t),jIe(t),MIe(t),NIe(t)}}}));function EIe(t){Nr(()=>{cl.set(t,new Map),vx.set(t,!1)})}function TIe(t,e){Sx.set(t,e)}function MIe(t){Sx.set(t,null)}function AIe(t,e){Nc.set(t,e)}function NIe(t){Nc.set(t,null)}function IIe(t,e){const n=e?g3(e,{exclude_after_next_user_message:!0}):null;YE.set(t,n)}function jIe(t){YE.set(t,null)}function put(t,e,n={},s){const o=Kt(()=>cl(t)),r=new Map(o),a=o.get(e.id);if(a)r.delete(e.id);else{const u=b0(e,n,s,a);r.set(e.id,u)}const l=b0(e,n,s,a),c=a?xc.CHATGPT_PRODUCT_FOLLOW_UP_INTERACTION_EVENT_TYPE_DESELECTED:xc.CHATGPT_PRODUCT_FOLLOW_UP_INTERACTION_EVENT_TYPE_SELECTED;y0(t,c,s,Array.from(r.values()),l,n),Nr(()=>{cl.set(t,r),vx.set(t,r.size>0),s&&Nc.set(t,s)})}function gut(t,e,n={},s){const o=Kt(()=>cl(t)),r=o.get(e.id);if(o.has(e.id)){const u=Array.from(o.values()),d=b0(e,n,s,r);y0(t,xc.CHATGPT_PRODUCT_FOLLOW_UP_INTERACTION_EVENT_TYPE_SELECTED,s,u,d,n),s&&Nc.set(t,s);return}const a=new Map(o),l=b0(e,n,s,r);a.set(e.id,l);const c=Array.from(a.values());y0(t,xc.CHATGPT_PRODUCT_FOLLOW_UP_INTERACTION_EVENT_TYPE_SELECTED,s,c,l,n),Nr(()=>{cl.set(t,a),vx.set(t,a.size>0),s&&Nc.set(t,s)})}function hut(t,e,n){const s=Kt(()=>cl(t));if(!s.has(e))return;const o=s.get(e);if(!o)return;const r=new Map(s);r.delete(e);const a=Array.from(r.values());y0(t,xc.CHATGPT_PRODUCT_FOLLOW_UP_INTERACTION_EVENT_TYPE_DESELECTED,n,a,o,o),Nr(()=>{cl.set(t,r),vx.set(t,r.size>0),n&&Nc.set(t,n)})}function _ut(t,e,n){AIe(t,pv.CHATGPT_PRODUCT_FOLLOW_UP_INTERACTION_SURFACE_PROMPT_CONTROL),TIe(t,e),IIe(t,n),PIe(t,e)}function y0(t,e,n,s,o,r,a){var m,p;const l=Kt(()=>Sx(t)),c=ZE(s,o,r),u=QE(s,o,r),d=(m=r==null?void 0:r.messageId)!=null?m:o==null?void 0:o.messageId,f=(p=r==null?void 0:r.turnIndex)!=null?p:o==null?void 0:o.turnIndex;KE({promptMessageId:a,interactionType:e,interactionSurface:n,promptControlId:l!=null?l:void 0,selectedProducts:s,targetedProduct:o,context:{clientThreadId:Cx(t),messageId:d,turnIndex:f,contentReferenceType:c,contentReferenceStartIndex:u}})}function PIe(t,e){var l,c;const n=Kt(()=>kG(t));if(n.length===0)return;const s=ZE(n),o=QE(n),r=(l=n[0])==null?void 0:l.messageId,a=(c=n[0])==null?void 0:c.turnIndex;KE({promptMessageId:void 0,interactionType:xc.CHATGPT_PRODUCT_FOLLOW_UP_INTERACTION_EVENT_TYPE_PROMPT_CONTROL_CLICKED,interactionSurface:void 0,promptControlId:e,selectedProducts:n,targetedProduct:n[0],context:{clientThreadId:Cx(t),messageId:r,turnIndex:a,contentReferenceType:s,contentReferenceStartIndex:o}})}function Cx(t){var e;return(e=Lt(t.id))!=null?e:t.id}const RIe=t=>t.map(n=>{var s;return(s=n.product.title)==null?void 0:s.trim()}).filter(n=>!!n).join(", ")||"",OIe=t=>t.flatMap(n=>{var a,l;const s=[],o=(a=n.product.title)==null?void 0:a.trim(),r=(l=n.product.description)==null?void 0:l.trim();return o&&s.push(o),r&&s.push(r),s}).join("\n\n").trim(),LIe="products";function ZE(t,e,n){var s,o,r,a;return(a=(r=(s=n==null?void 0:n.contentReferenceType)!=null?s:e==null?void 0:e.contentReferenceType)!=null?r:(o=t[0])==null?void 0:o.contentReferenceType)!=null?a:LIe}function QE(t,e,n){var s,o,r;return(r=(s=n==null?void 0:n.contentReferenceStartIndex)!=null?s:e==null?void 0:e.contentReferenceStartIndex)!=null?r:(o=t[0])==null?void 0:o.contentReferenceStartIndex}function b0(t,e,n,s){var o,r,a,l,c;return{product:t,messageId:(o=e.messageId)!=null?o:s==null?void 0:s.messageId,turnIndex:(r=e.turnIndex)!=null?r:s==null?void 0:s.turnIndex,contentReferenceStartIndex:(a=e.contentReferenceStartIndex)!=null?a:s==null?void 0:s.contentReferenceStartIndex,productIndex:(l=e.productIndex)!=null?l:s==null?void 0:s.productIndex,contentReferenceType:(c=e.contentReferenceType)!=null?c:s==null?void 0:s.contentReferenceType,interactionSurface:n!=null?n:s==null?void 0:s.interactionSurface}}function DIe(t,e){var n,s,o,r;return(r=(o=(n=e.completionMetadata)==null?void 0:n.conversationMode)!=null?o:(s=At(Cx(t)))==null?void 0:s.mode)!=null?r:{kind:Bt.PrimaryAssistant}}function BIe(t,e){var r;const n=DIe(t,e),s=[CIe];return{completionMetadata:G(N({},(r=e.completionMetadata)!=null?r:{}),{conversationMode:n,systemHints:s}),systemHints:s}}function xut(){return!1}const FIe={apps:[],selectedApps:[]},yut=tn(xp(ls(()=>FIe))),UIe=async t=>{var n;const e=t.map(s=>s.id);if(e.length!==0)return(n=EJ)==null?void 0:n.pairing.getContentForPairedApps(e)},but=async()=>{},vut=({event:t,conversationMode:e,systemHints:n})=>{const{systemHints:s,extraStreamParams:o}=Zw(n);return{sourceEvent:t,completionType:$C.Continue,extraStreamParams:o,completionMetadata:{conversationMode:e,systemHints:s}}};function HIe(t){if(t===Ke.Research)return"research";if(t===Ke.Agent)return"agent";if(t===Ke.Glaux)return"scout";if(t===Ke.Search)return"file_search"}const Sut=async({clientThreadId:t,attachments:e,content:n,contentToSend:s,conversationMode:o,hasSelectedApps:r,desktopOrigin:a,shouldCollectSidebarContext:l,desktopSidebarContext:c,desktopSidebarContexts:u,isMessageFollowupsEnabled:d,selectedApps:f,selectedGizmoTag:m,selectedRepos:p,selectedSources:g,selectedMCPConnectors:h,selectedConnectorIds:_,selectedSyncKnowledgeStoreIds:x,searchConnectorIds:b,noFullActionConnectorIds:y,startedWithByoMcp:S,sourceEvent:C,systemHints:w,allSystemHints:k,firstInputTimestampMs:E,usedDictation:T,dictationEdited:M,dictationOriginalText:A,dictationAssetPointer:I,dictationAssetTTL:j,dictationAssetFormat:R,isN7jupdActive:O,customSourceList:L,isForceAllowCustomMcpModeEnabled:B,selectedHazelnuts:U,thinkingEffort:H,deepResearchVersion:$})=>{var ze,Qe,Le;const F=_E({namespace:fg.CompletionRequest,opts:{expectedTimingLogs:[{name:"prompt_submitted",expectedInMs:3e3}],debug:!1}});F.reset();const z=[],{targetedContent:W}=vf.getState();if(r){const ce=await UIe(f);ce&&z.push(TJ(ce))}const Y=new Map;k.forEach(ce=>Y.set(ce.systemHint,ce)),(S||h&&h.some(ce=>ce.status==="ONLY_ME")||w.some(ce=>{var be;return(be=Y.get(ce))==null?void 0:be.isDangerous}))&&z.push(g3("",{disable_tool_ids:["gmail","gcal","gcontacts"]}));const K=[],{rebaseSystemMessageContent:Z}=C1.getState();Z&&K.push(MJ(Z));const J=N({},o);"gizmo"in J&&delete J.gizmo;let Q=J;if(a){const ce=ot.newConversationGizmoId$();ce&&(Q={kind:Bt.GizmoInteraction,gizmo_id:ce},ot.newConversationGizmoId$.set(void 0))}const ne=w.includes(Ke.Search);let ie=w.includes(Ke.Research);ie||(ie=!!(Js&&w.includes(Js)));const fe=w.includes(Ke.Agent),ae=O&&fe&&xe("355562319"),le=w.includes(Ke.Glaux),pe=w.includes(Ke.Slurm),_e=w.length===0,Ce=ne?Pm.CONVERSATION_COMPOSER_WEB_ICON:void 0,ge=cke(),Re=xw(),ke=Intl.DateTimeFormat().resolvedOptions().timeZone,he=a?tIe({systemHints:w,isN7jupdActive:O}):void 0,Ee=Object.keys(Re).length>0,Pe=Pt(t),Ae=Kt(()=>kIe(Pe)),de=(ze=OS(Pe).pinnedChatSDK$())==null?void 0:ze.toolMessageId,oe=Dc(n,N(N(N(N(N(N(N(N(N(N(N(N(N(N(N(N(N(N({},e.length>0&&{attachments:e}),m&&{gizmo_id:m.gizmo.id}),g&&{caterpillar_selected_sources:ie?V1(g):void 0,developer_mode_connector_ids:h==null?void 0:h.map(ce=>ce.id),selected_mcp_sources:ie||pe||le||O&&B?h:void 0,selected_connector_ids:_?Array.from(_):void 0,selected_sync_knowledge_store_ids:x?Array.from(x):void 0,selected_sources:pe||le||ie||O||_e||fe?V1(g,pe||le||_e):void 0}),p&&{selected_github_repos:[...(Qe=p.selectedRepos)!=null?Qe:[]],selected_all_github_repos:p.selectedAllRepos}),w.length>0&&{system_hints:w}),ae&&{clear_agent_hint_after_submit:!0}),U&&U.length>0&&{selected_hazelnuts:U}),$&&{deep_research_version:$,[AJ]:$}),b&&b.length>0&&{search_connectors:b}),y&&y.length>0&&{no_full_action_connectors:y}),!!s.metadata&&{serialization_metadata:s.metadata}),de?{chatgpt_sdk_focused_message_id:de}:null),ge.length>0&&{canvas:{user_created_textdocs:ge.map(ce=>({user_created_temp_textdoc_id:ce.tempTextdocId,type:ce.type,title:ce.title,content:ce.content,create_source:ce.create_source,remix_shared_textdoc_id:ce.remixSharedTextdocId}))}}),Ee&&{__internal:{search_settings:Ee?Re:void 0}}),T&&N(N(N(N(N({dictation:!0},M&&{dictation_edited:!0}),A&&{dictation_original_text:A}),I&&{dictation_asset_pointer:I}),j&&{dictation_asset_ttl:j}),R&&{dictation_asset_format:R})),(ie||O)&&ke&&{user_timezone:ke}),L&&{custom_source_list:L}),a?N(N({},await q9(l?u!=null?u:c?[c]:[]:[],a,"user",w)),he!=null?he:{}):{}));let se={sourceEvent:C,firstInputTimestampMs:E,completionMetadata:{conversationMode:Q,systemHints:w,searchSource:Ce},promptMessage:oe,prependMessages:z,appendMessages:K,thinkingEffort:H,profiler:F};const Oe={};if(se=nIe(se),(Le=se.completionMetadata)!=null&&Le.systemHints){let ce=!1;se.completionMetadata.systemHints=se.completionMetadata.systemHints.filter(be=>be===Ke.Search?(ce=!0,!1):!0),ce&&(Oe.forceUseSearch=!0)}d&&(Oe.enableMessageFollowups=!0);const Ne=Zk(Pe);if(Ne.isOpen$()){Ne.setHasRequestedNewData$(!0),Ne.setOpenPopoverBusinessId$(null);const ce=yIe(Ne.currentViewState$(),Ne.mapMessageId$());ce&&(Oe.mapSearchParams=ce)}se.extraStreamParams=Oe,W!=null&&W.createNewCompletionParams&&(se=await W.createNewCompletionParams(se)),Ae!=null&&Ae.createNewCompletionParams&&(se=Ae.createNewCompletionParams(se));try{const ce=w.length>0?HIe(w[0]):void 0;NJ.logSelectionChanged({selectedSources:g!=null?g:new Set,selectedMCPSources:h!=null?h:[],referrer:"composer_submit",triggerHint:ce})}catch(ce){}return F.logTimingOnce("request_params_ready"),se},$Ie=({dismissLink:t,onLogInButtonClick:e,onSignUpButtonClick:n,subtitle:s,title:o})=>{const a=Gd()?"center":"bottom",c=Je("2118136551").get("sign_up_button_has_the_word_free",!0),u=Hp(c?Tu.signUpForFreeCta:Z5.signUpCta),d=i.jsx(Se,{as:"button",size:"large",color:"secondary",onClick:n,fullWidth:!0,children:i.jsx(P,N({},u))}),m=[i.jsx(Se,{as:"button",size:"large",color:"primary",fullWidth:!0,onClick:e,children:i.jsx(P,N({},Z5.logInCta))}),d];return i.jsx(en,{testId:"modal-no-auth-rate-limit",isOpen:!0,onClose:uo,shouldIgnoreClickOutside:!0,showCloseButton:!1,type:"success",noPadding:!0,position:a,size:"custom",className:"max-w-[373px] sm:max-w-[400px]",children:i.jsxs("div",{className:"flex flex-col items-center justify-center px-6 py-8 sm:px-10 sm:pt-12 sm:pb-10",children:[i.jsx("p",{className:"mb-1 text-center text-2xl font-semibold",children:i.jsx(P,N({},o))}),i.jsx("p",{className:"text-token-text-secondary mb-6 text-center",children:i.jsx(P,N({},s))}),i.jsx("div",{className:"flex w-full flex-col gap-2 sm:gap-2.5",children:m}),t?i.jsx("a",{href:"#",className:"text-token-text-secondary mt-5 cursor-pointer text-sm font-semibold underline",onClick:p=>{p.preventDefault(),t.onClick()},children:i.jsx(P,N({},t.text))}):null]})})},Z5=we({signUpCta:{id:"NoAuthModal.signUpCta",defaultMessage:"Sign up"},logInCta:{id:"NoAuthModal.logInCta",defaultMessage:"Log in"}}),GIe=t=>{"use forget";const e=D.c(10),{onClose:n}=t,{isOpen:s,onClose:o,onMount:r}=Xie(),a=s?Je("2118136551").get("soft_rate_limit_modal_copy_variant","control"):"control",l=a in ab?ab[a]:ab.control;let c,u;if(e[0]!==r?(c=()=>{r==null||r()},u=[r],e[0]=r,e[1]=c,e[2]=u):(c=e[1],u=e[2]),v.useEffect(c,u),!s)return null;let d;e[3]!==n||e[4]!==o?(d={text:Da.stayLoggedOutLink,onClick:()=>{V.logEvent("No Auth Soft Rate Limit Modal Stay Logged out Link Clicked"),ft.logEvent("chatgpt_no_auth_soft_rate_limit_modal_stay_logged_out_link_clicked"),n(),o()}},e[3]=n,e[4]=o,e[5]=d):d=e[5];let f;return e[6]!==l.subtitle||e[7]!==l.title||e[8]!==d?(f=i.jsx($Ie,{dismissLink:d,onLogInButtonClick:zIe,onSignUpButtonClick:qIe,subtitle:l.subtitle,title:l.title}),e[6]=l.subtitle,e[7]=l.title,e[8]=d,e[9]=f):f=e[9],f},Da=we({title:{id:"NoAuthSoftRateLimitModal.title",defaultMessage:"Thanks for trying ChatGPT"},signUpSubtitle:{id:"zpngdW",defaultMessage:"Sign up or log in to get smarter responses, upload files and images, and more."},logInSubtitle:{id:"iVew+I",defaultMessage:"Log in or sign up to get smarter responses, upload files and images, and more."},persistenceTitle:{id:"zqKa/9",defaultMessage:"Save your chats"},persistenceLogInSubtitle:{id:"YSacLh",defaultMessage:"Log in to keep conversations, continue later, and access them from any device."},continuityTitle:{id:"Jpn8yT",defaultMessage:"Pick up where you left off"},continuityLogInSubtitle:{id:"nj4QWO",defaultMessage:"Log in to continue conversations and avoid starting over each time."},filesTitle:{id:"ED/pmh",defaultMessage:"Work with files"},filesLogInSubtitle:{id:"gY4Ixk",defaultMessage:"Log in to upload files and return to your work anytime."},stayLoggedOutLink:{id:"NoAuthWelcomeBackModal.stayLoggedOut",defaultMessage:"Stay logged out"}}),ab={control:{title:Da.title,subtitle:Da.logInSubtitle},persistence:{title:Da.persistenceTitle,subtitle:Da.persistenceLogInSubtitle},continuity:{title:Da.continuityTitle,subtitle:Da.continuityLogInSubtitle},files:{title:Da.filesTitle,subtitle:Da.filesLogInSubtitle}};function VIe(t){_o({provider:t,location:"No Auth Soft Rate Limit Modal"},Jt.ACCESS_FLOW_ENTRY_POINT_NO_AUTH_SOFT_RATE_LIMIT_MODAL)}function zIe(){fn({fallbackScreenHint:"login",callback:VIe,skipLoginModal:!1})}function WIe(t){ci({provider:t,location:"No Auth Soft Rate Limit Modal"},Jt.ACCESS_FLOW_ENTRY_POINT_NO_AUTH_SOFT_RATE_LIMIT_MODAL)}function qIe(){fn({fallbackScreenHint:"signup",callback:WIe,skipLoginModal:!1})}const Cut=Object.freeze(Object.defineProperty({__proto__:null,NoAuthSoftRateLimitModal:GIe},Symbol.toStringTag,{value:"Module"}));var ib,Q5;function KIe(){if(Q5)return ib;Q5=1;var t=sp(),e=/[\\^$.*+?()[\]{}|]/g,n=RegExp(e.source);function s(o){return o=t(o),o&&n.test(o)?o.replace(e,"\\$&"):o}return ib=s,ib}var YIe=KIe();const ZIe=ps(YIe),QIe=t=>{var l;const e=(l=t==null?void 0:t.filter(c=>{var u;return(u=c.keywordInvocations)==null?void 0:u.length}))!=null?l:[],n=e.flatMap(c=>c.keywordInvocations).filter(c=>typeof c=="string"),s=n.map(c=>ZIe(c)),o=[];e.forEach(c=>{var u;(u=c.keywordInvocations)==null||u.forEach(d=>{o.push([d.toLowerCase(),c])})});const r=Object.fromEntries(o);let a;try{a=s.length>0?new RegExp("^(".concat(s.join("|"),")\\s+"),"ig"):void 0}catch(c){Ve.addError("Error creating regex for ecosystem suggestions",{keywords:n,escapedKeywords:s})}return{keywordToSystemHintMap:r,regex:a}},wut=t=>{"use forget";const e=D.c(21),{clientThreadId:n,composerController:s,availableSystemHints:o}=t;let r;e[0]===Symbol.for("react.memo_cache_sentinel")?(r=jM(),e[0]=r):r=e[0];const a=r,l=Is(),c=IJ(),u=v3(),d=S3(),f=v.useRef(void 0);let m;e:{if(!jM()){let C;e[1]===Symbol.for("react.memo_cache_sentinel")?(C={},e[1]=C):C=e[1],m=C;break e}let y;e[2]!==o?(y=QIe(o),e[2]=o,e[3]=y):y=e[3];let S;e[4]!==d||e[5]!==l||e[6]!==y?(S=G(N({},y),{activeSystemHintType:l,activeConnectorSystemTypes:d}),e[4]=d,e[5]=l,e[6]=y,e[7]=S):S=e[7],m=S}const p=m;let g,h;e[8]!==s||e[9]!==p?(g=()=>{a&&jJ(Vt(s),p)},h=[s,p,a],e[8]=s,e[9]=p,e[10]=g,e[11]=h):(g=e[10],h=e[11]),v.useEffect(g,h);let _,x;e[12]!==d||e[13]!==l||e[14]!==c||e[15]!==o||e[16]!==n||e[17]!==s||e[18]!==u?(_=()=>{if(!a)return;const b=y=>{var w;const S=Vt(s),{matches:C}=(w=PJ.getState(S.state))!=null?w:{};return{matches:C}};return Ar(()=>b(K9(s)),y=>{const{matches:S}=y,C=f.current,w=new Set([...S!=null?S:[]].map(JIe));f.current=w;const k=[...S!=null?S:[]].filter(I=>{const{systemHintType:j}=I;return!(C!=null&&C.has(j))}),E=[...C!=null?C:[]].filter(I=>!w.has(I));if(!S)return;let T=k.map(I=>({systemHint:o==null?void 0:o.find(j=>j.systemHint===I.systemHintType),keyword:I.keyword}));const M=E.map(I=>o==null?void 0:o.find(j=>j.systemHint===I)),A=o==null?void 0:o.find(I=>I.systemHint===l);if(!(A&&!C3(A.systemHint))){if(T.length>0){const j=Eo("2993367469").get("connector_id",null);if(T=T.filter(R=>{const{systemHint:O}=R;if(!(O!=null&&O.isConnector))return!0;const L=d_(O.systemHint);return L?L!==j:!0}),T.length===0)return}T.forEach(I=>{const{systemHint:j,keyword:R}=I;j!=null&&j.isConnector&&!d.has(j.systemHint)&&(PM(j.systemHint,RM.PrefixMatch,G(N({},Ms({clientThreadId:n})),{matched_keyword:R})),c(j.systemHint,{analyticsMetadata:{clientThreadId:n}}))}),M.forEach(I=>{I!=null&&I.isConnector&&d.has(I.systemHint)&&(PM(I.systemHint,RM.PrefixRemove,N({},Ms({clientThreadId:n}))),u(I.systemHint,{analyticsMetadata:{clientThreadId:n}}))})}},{fireImmediately:!0,equals:Ji})},x=[s,n,c,u,o,l,d,a],e[12]=d,e[13]=l,e[14]=c,e[15]=o,e[16]=n,e[17]=s,e[18]=u,e[19]=_,e[20]=x):(_=e[19],x=e[20]),v.useEffect(_,x)};function JIe(t){const{systemHintType:e}=t;return e}function JE(t){const e=Is(),n=X(()=>t!=null&&EG(Fn(Pt(t)).id,e));return v.useMemo(()=>({isOdysseyMode:n}),[n])}function EG(t,e){return t===RJ||pc(e)}const TG=t=>{"use forget";var O,L;const e=D.c(36),{clientThreadId:n}=t,s=Is(),o=Tn(),r=$d();let a;e[0]!==o||e[1]!==r?(a=(o==null?void 0:o.isPersonalAccount())&&r,e[0]=o,e[1]=r,e[2]=a):a=e[2];const l=!!a,c=JE(n).isOdysseyMode,u=c||s===Ke.Research;let d;e[3]!==s?(d=as()&&s===Ke.Agent,e[3]=s,e[4]=d):d=e[4];const f=d,m=X0(),g=!!(m!=null&&m.softmentionEnabled)&&u&&!f;let h;e[5]!==g?(h={enabled:g},e[5]=g,e[6]=h):h=e[6];const{connectedTypes:_,linkIdToConnectedType:x}=qC(h);let b;e[7]!==g?(b={enabled:g},e[7]=g,e[8]=b):b=e[8];const{connectedTypes:y}=WR(b),{data:S}=W0();S==null||S.connection_statuses,m==null||m.connectorConfig;let C,w,k;if(e[9]!==s||e[10]!==(m==null?void 0:m.connectorConfig)||e[11]!==y||e[12]!==g||e[13]!==c||e[14]!==l||e[15]!==_||e[16]!==x||e[17]!==(S==null?void 0:S.connection_statuses)){const B=(O=S==null?void 0:S.connection_statuses.reduce(XIe,new Set))!=null?O:new Set;let U=_;if(s===Ke.Research||c)U=y;else{const Y=(L=S==null?void 0:S.connection_statuses.reduce((K,Z)=>{if(["activated","partially_activated"].includes(Z.user_connection_details.activation_status)&&Z.user_connection_details.backing_link_id){const J=x.get(Z.user_connection_details.backing_link_id);J&&K.add(J)}return K},new Set))!=null?L:new Set;U=new Set([..._].filter(K=>K===Te.GDRIVE_ACTION_CONNECTOR&&l&&B.has("gdrive_sync_connector")||Y.has(K)?!1:!(K===Te.SHAREPOINT_CONNECTOR&&B.has("sharepoint_admin_sync_connector"))))}const H=(m==null?void 0:m.connectorConfig)||{},$={keywordSet:new Set,connectorToKeywordsMap:{},keywordsConnectorMap:{}},{keywordSet:F,connectorToKeywordsMap:z,keywordsConnectorMap:W}=Object.entries(H).reduce((Y,K)=>{const[Z,J]=K;if(U.has(Z)||B.has(Z)){const Q=((J==null?void 0:J.keywords)||[]).map(e6e);Y.connectorToKeywordsMap[Z]=Q,Q.forEach(ne=>{Y.keywordSet.add(ne),Y.keywordsConnectorMap[ne]=Z})}return Y},$);C=z,w=W,k=g?Array.from(F):[],e[9]=s,e[10]=m==null?void 0:m.connectorConfig,e[11]=y,e[12]=g,e[13]=c,e[14]=l,e[15]=_,e[16]=x,e[17]=S==null?void 0:S.connection_statuses,e[18]=C,e[19]=w,e[20]=k}else C=e[18],w=e[19],k=e[20];let E;e[21]!==C||e[22]!==g?(E=g?C:{},e[21]=C,e[22]=g,e[23]=E):E=e[23];let T;e[24]!==g||e[25]!==w?(T=g?w:{},e[24]=g,e[25]=w,e[26]=T):T=e[26];let M;e[27]!==k||e[28]!==E||e[29]!==T?(M={filteredKeywords:k,connectorToKeywordsMap:E,keywordsConnectorMap:T},e[27]=k,e[28]=E,e[29]=T,e[30]=M):M=e[30];const{filteredKeywords:A,connectorToKeywordsMap:I,keywordsConnectorMap:j}=M;let R;return e[31]!==I||e[32]!==g||e[33]!==A||e[34]!==j?(R={enabled:g,keywords:A,connectorToKeywordsMap:I,keywordsConnectorMap:j},e[31]=I,e[32]=g,e[33]=A,e[34]=j,e[35]=R):R=e[35],R};function XIe(t,e){return["activated","partially_activated"].includes(e.user_connection_details.activation_status)&&t.add(e.user_connection_details.connection_type),t}function e6e(t){return t.toLowerCase()}const kut=({clientThreadId:t,composerController:e})=>{const{mentionedSources:n,addMentionedSource:s,deleteMentionedSource:o}=Yc(t),r=Is(),{setThreadSystemHintMode:a}=Cl(),l=JE(t).isOdysseyMode,c=v.useRef(l),{keywords:u,connectorToKeywordsMap:d,keywordsConnectorMap:f}=TG({clientThreadId:t});v.useEffect(()=>{Y9(u,Vt(e))},[e,u]);const m=v.useRef(r);v.useEffect(()=>{const _=m.current;m.current=r;const x=Vt(e),b=c.current;if(c.current=l,b&&!l&&ry(ay(x.state),x),(_===Ke.Slurm||_===Ke.Research)&&r==null){const y=ay(x.state);ry(y,x),y.forEach(S=>o(f[S]))}},[r,e,o,l,f]);const p=v.useRef(n);v.useEffect(()=>{const _=p.current;if(p.current=n,!_)return;const x=Array.from(_).filter(y=>!(n!=null?n:new Set).has(y)),b=[];x.forEach(y=>{var S;b.push(...(S=d[y])!=null?S:[])}),ry(b,Vt(e))},[e,d,n]);const g=v.useRef([]),h=r!=null;v.useEffect(()=>{const _=b=>{if(g.current.length===0&&b.length>0&&!h){const C={clientThreadId:t};a(Ke.Slurm,!0,C)}const y=b.filter(C=>!g.current.includes(C)),S=g.current.filter(C=>!b.includes(C));y.forEach(C=>s(C)),S.forEach(C=>o(C)),g.current=b},x=b=>ay(b).map(y=>f[y.toLowerCase()]);return Hc(()=>{_(OJ(x(K9(e))))})},[s,t,e,o,f,h,a])},Eut="side_chat",Tut="ntp",Mut="website";function Aut(t){"use forget";var u;const e=D.c(4),{clientThreadId:n,isKaur1br5Client:s}=t,o=IH(s?n:void 0);let r;e:{if(!o){r=null;break e}r=((u=o.metadata)==null?void 0:u.n7jupd_local_safe_mode)===!0?"incognito":"signedInAccounts"}const a=r;let l,c;return e[0]!==a||e[1]!==s?(l=()=>{s&&a&&ot.agentSessionMode$()!==a&&ot.agentSessionMode$.set(a)},c=[a,s],e[0]=a,e[1]=s,e[2]=l,e[3]=c):(l=e[2],c=e[3]),v.useEffect(l,c),o!=null}const t6e="signedInAccounts";function n6e(t){ot.agentSessionMode$.set(t)}function s6e(t){ot.agentSafeModeHasSeenNux$.set(t)}function MG(t){n6e(t);const e=up();e==null||e.updateAgentSafeMode(t)}function o6e(t){s6e(t);const e=up();e==null||e.updateAgentSafeModeHasSeenNux(t)}const Ds=we({incognitoLabel:{id:"R+8byO",defaultMessage:"Start logged out"},incognitoDescription:{id:"Omk3s1",defaultMessage:"Let ChatGPT work alongside you logged out from your accounts."},incognitoMenuLabel:{id:"2E6cUi",defaultMessage:"Logged out"},signedInLabel:{id:"ajcZ1i",defaultMessage:"Start logged in"},signedInDescription:{id:"+aVek4",defaultMessage:"ChatGPT works alongside you using your logged in accounts."},signedInMenuLabel:{id:"dPv7uS",defaultMessage:"Logged in"},modalTitle:{id:"QvXNKA",defaultMessage:"Agent mode may introduce risk"},modalDescriptionIntroHeading:{id:"M46Qff",defaultMessage:"Agent mode may introduce risk."},modalDescriptionIntroBody:{id:"bwpgjC",defaultMessage:"In Agent mode, ChatGPT can perform complex tasks in the browser for you."},modalDescriptionLoggedInHeading:{id:"7YCY6E",defaultMessage:"Logged in:"},modalDescriptionLoggedInBody:{id:"6AOX4E",defaultMessage:'In "logged in" mode, ChatGPT can access your logged in sites, making it faster to complete tasks. ChatGPT is built to protect you, but there is always some risk that attackers could successfully break our safeguards to access your data, or take actions as you on logged in sites. You can use logged out mode to reduce risk.'},modalDescriptionLoggedOutHeading:{id:"seaiYG",defaultMessage:"Logged out:"},modalDescriptionLoggedOutBody:{id:"Gw4NKU",defaultMessage:'Use "logged out" mode to have Agent mode use sites without being logged in as you. You can still log ChatGPT agent into individual sites, allowing it to use just those sites logged in.'},modalIncognitoCta:{id:"JEr/J7",defaultMessage:"Start logged out"},modalSignedInCta:{id:"kGLOXd",defaultMessage:"Start logged in"},modalCancelCta:{id:"5anpHu",defaultMessage:"Cancel"}}),AG=re(me,"aa2e8a",20,20),r6e=t=>({introHeading:t.formatMessage(Ds.modalDescriptionIntroHeading),introBody:t.formatMessage(Ds.modalDescriptionIntroBody),loggedInHeading:t.formatMessage(Ds.modalDescriptionLoggedInHeading),loggedInBody:t.formatMessage(Ds.modalDescriptionLoggedInBody),loggedOutHeading:t.formatMessage(Ds.modalDescriptionLoggedOutHeading),loggedOutBody:t.formatMessage(Ds.modalDescriptionLoggedOutBody)}),a6e=t=>["".concat(t.introHeading," ").concat(t.introBody),"".concat(t.loggedInHeading," ").concat(t.loggedInBody),"".concat(t.loggedOutHeading," ").concat(t.loggedOutBody)].join("\n\n");function i6e(t){"use forget";const e=D.c(35),{isOpen:n,onClose:s,onModeSelected:o}=t,r=te(),a=X(ot.agentSessionMode$),l=a!=null?a:t6e,c=X(ot.agentSafeModeHasSeenNux$);let u,d,f;e[0]!==r?(u=r6e(r),d=r.formatMessage(Ds.modalTitle),f=a6e(u),e[0]=r,e[1]=u,e[2]=d,e[3]=f):(u=e[1],d=e[2],f=e[3]);let m;e[4]!==r?(m=r.formatMessage(Ds.modalIncognitoCta),e[4]=r,e[5]=m):m=e[5];let p;e[6]!==r?(p=r.formatMessage(Ds.modalSignedInCta),e[6]=r,e[7]=p):p=e[7];let g;e[8]!==r?(g=r.formatMessage(Ds.modalCancelCta),e[8]=r,e[9]=g):g=e[9];let h;e[10]!==u||e[11]!==d||e[12]!==f||e[13]!==m||e[14]!==p||e[15]!==g?(h={title:d,description:f,descriptionSections:u,incognitoCta:m,signedInCta:p,cancelCta:g},e[10]=u,e[11]=d,e[12]=f,e[13]=m,e[14]=p,e[15]=g,e[16]=h):h=e[16];const _=h;let x,b;e[17]!==c||e[18]!==n?(x=()=>{n&&c===!1&&o6e(!0)},b=[c,n],e[17]=c,e[18]=n,e[19]=x,e[20]=b):(x=e[19],b=e[20]),v.useEffect(x,b);let y;e[21]!==s||e[22]!==o?(y=w=>{MG(w),o==null||o(w),s()},e[21]=s,e[22]=o,e[23]=y):y=e[23];const S=y;let C;return e[24]!==S||e[25]!==n||e[26]!==_.cancelCta||e[27]!==_.description||e[28]!==_.descriptionSections||e[29]!==_.incognitoCta||e[30]!==_.signedInCta||e[31]!==_.title||e[32]!==l||e[33]!==s?(C=i.jsx(l6e,{isOpen:n,onClose:s,selectedMode:l,onSelectMode:S,title:_.title,description:_.description,descriptionSections:_.descriptionSections,incognitoCta:_.incognitoCta,signedInCta:_.signedInCta,cancelCta:_.cancelCta}),e[24]=S,e[25]=n,e[26]=_.cancelCta,e[27]=_.description,e[28]=_.descriptionSections,e[29]=_.incognitoCta,e[30]=_.signedInCta,e[31]=_.title,e[32]=l,e[33]=s,e[34]=C):C=e[34],C}function l6e(t){"use forget";const e=D.c(40),{isOpen:n,onClose:s,selectedMode:o,isSubmitting:r,onSelectMode:a,title:l,description:c,descriptionSections:u,incognitoCta:d,signedInCta:f,cancelCta:m}=t;let p;e[0]!==c||e[1]!==u?(p=u?i.jsxs("div",{className:"text-token-text-secondary space-y-3 text-sm md:text-base",children:[i.jsx("p",{children:u.introBody}),i.jsxs("p",{children:[i.jsx("span",{className:"text-token-text-primary me-1 font-semibold",children:u.loggedInHeading}),i.jsx("span",{children:u.loggedInBody})]}),i.jsxs("p",{children:[i.jsx("span",{className:"text-token-text-primary me-1 font-semibold",children:u.loggedOutHeading}),i.jsx("span",{children:u.loggedOutBody})]})]}):i.jsx("p",{className:"text-token-text-secondary text-sm whitespace-pre-line md:text-base",children:c}),e[0]=c,e[1]=u,e[2]=p):p=e[2];const g=p;let h;e[3]===Symbol.for("react.memo_cache_sentinel")?(h=i.jsx("div",{className:"bg-token-main-surface-secondary flex h-12 w-12 items-center justify-center rounded-full",children:i.jsx(AG,{className:"icon-xl text-token-text-primary"})}),e[3]=h):h=e[3];let _;e[4]!==l?(_=i.jsx("h2",{className:"text-token-text-primary text-lg font-semibold md:text-xl",children:l}),e[4]=l,e[5]=_):_=e[5];let x;e[6]!==g||e[7]!==_?(x=i.jsxs("div",{className:"flex flex-col gap-4",children:[h,i.jsxs("div",{className:"space-y-2",children:[_,g]})]}),e[6]=g,e[7]=_,e[8]=x):x=e[8];let b;e[9]!==m||e[10]!==r||e[11]!==s?(b=i.jsx(Se,{color:"secondary",onClick:s,disabled:r,className:"md:text-base",children:m}),e[9]=m,e[10]=r,e[11]=s,e[12]=b):b=e[12];let y;e[13]!==a?(y=()=>a("incognito"),e[13]=a,e[14]=y):y=e[14];const S=o==="incognito"&&"font-medium";let C;e[15]!==S?(C=q("md:text-base",S),e[15]=S,e[16]=C):C=e[16];let w;e[17]!==d||e[18]!==r||e[19]!==y||e[20]!==C?(w=i.jsx(Se,{color:"primary",onClick:y,disabled:r,className:C,children:d}),e[17]=d,e[18]=r,e[19]=y,e[20]=C,e[21]=w):w=e[21];let k;e[22]!==a?(k=()=>a("signedInAccounts"),e[22]=a,e[23]=k):k=e[23];const E=o==="signedInAccounts"&&"font-medium";let T;e[24]!==E?(T=q("md:text-base",E),e[24]=E,e[25]=T):T=e[25];let M;e[26]!==r||e[27]!==f||e[28]!==k||e[29]!==T?(M=i.jsx(Se,{color:"primary",onClick:k,disabled:r,className:T,children:f}),e[26]=r,e[27]=f,e[28]=k,e[29]=T,e[30]=M):M=e[30];let A;e[31]!==M||e[32]!==b||e[33]!==w?(A=i.jsxs("div",{className:"flex flex-col-reverse gap-2 md:flex-row md:justify-end",children:[b,w,M]}),e[31]=M,e[32]=b,e[33]=w,e[34]=A):A=e[34];let I;return e[35]!==n||e[36]!==s||e[37]!==A||e[38]!==x?(I=i.jsxs(en,{isOpen:n,onClose:s,testId:"modal-aura-agent-session-mode-nux",size:"xlarge",contentClassName:"flex flex-col gap-6 p-8",children:[x,A]}),e[35]=n,e[36]=s,e[37]=A,e[38]=x,e[39]=I):I=e[39],I}function Nut(t){"use forget";const e=D.c(11),{isAgentHintActive:n}=t;let s;e[0]===Symbol.for("react.memo_cache_sentinel")?(s=as(),e[0]=s):s=e[0];const o=s,r=X(ot.agentSafeModeHasSeenNux$),[a,l]=v.useState(!1),c=v.useRef(null),u=o&&n&&r!==!0;let d;e[1]===Symbol.for("react.memo_cache_sentinel")?(d=()=>{l(!1),c.current=null},e[1]=d):d=e[1];const f=d;let m;e[2]!==u?(m=y=>u?(c.current=y,l(!0),!0):!1,e[2]=u,e[3]=m):m=e[3];const p=m;let g;e[4]===Symbol.for("react.memo_cache_sentinel")?(g=y=>{const S=c.current;if(c.current=null,!S)return;const C=()=>S(y);typeof queueMicrotask=="function"?queueMicrotask(C):Promise.resolve().then(C)},e[4]=g):g=e[4];const h=g;let _;e:{if(!o||!n||!a){_=null;break e}let y;e[5]!==a?(y=i.jsx(i6e,{isOpen:a,onClose:f,onModeSelected:h}),e[5]=a,e[6]=y):y=e[6],_=y}const x=_;let b;return e[7]!==x||e[8]!==p||e[9]!==a?(b={agentSessionModeNuxModal:x,closeAgentSessionModeNux:f,ensureAgentSessionModeNux:p,isAgentSessionModeNuxOpen:a},e[7]=x,e[8]=p,e[9]=a,e[10]=b):b=e[10],b}function Iut(t){const e=hs();v.useEffect(()=>{if(e)return Z9(()=>ot.wantsClearComposer$(),()=>{ot.wantsClearComposer$.set(!1),Bo(Vt(t),"")})},[e,t])}function jut(){const[t,e]=wo(),n=as();v.useEffect(()=>{if(!(!n||_c()))return Ar(()=>Q9(),s=>{let o;if(s==="mainPage"||s==="new_page_view")o=BJ,LJ();else if(s==="sidebar"||s==="sidebar_view")o=FJ,DJ();else return;t.get(o.name)!==o.value&&e(r=>{const a=new URLSearchParams(r);return a.set(o.name,o.value),a},{replace:!0})},{fireImmediately:!0})},[n,t,e])}function Put(t){"use forget";const e=D.c(5);let n;e[0]===Symbol.for("react.memo_cache_sentinel")?(n=hs(),e[0]=n):n=e[0];const s=n,{setTargetedContent:o}=vf();let r,a;e[1]!==t||e[2]!==o?(r=()=>{if(s)return Ar(c6e,l=>{if(!l)return;ot.wantsPopulatePrompt$.set(!1);const c=ot.populatePrompt;c&&(c.userMessage&&Bo(Vt(t),c.userMessage),setTimeout(()=>{o(c.targetedReply?{type:"text",label:c.targetedReply,createNewCompletionParams:u=>{if(!c.targetedReply)return u;const d=Sp(c.targetedReply);return G(N({},u),{promptMessage:vi(u.promptMessage,{metadata:{targeted_reply:c.targetedReply}}),appendMessages:u.appendMessages==null?[d]:[...u.appendMessages,d]})}}:void 0)},0))},{fireImmediately:!0})},a=[s,t,o],e[1]=t,e[2]=o,e[3]=r,e[4]=a):(r=e[3],a=e[4]),v.useEffect(r,a)}function c6e(){return ot.wantsPopulatePrompt$()}const J5=re(me,"817971",20,20),LS=re(me,"25eafd",20,20,!0),u6e=Object.freeze(Object.defineProperty({__proto__:null,default:LS},Symbol.toStringTag,{value:"Module"})),d6e=re(me,"c7ea4d",20,20);function X5(t,e){return t.connector===e.connector&&t.type===e.type}const f6e=()=>tn((t,e)=>({_messages:[],_dismissedMessages:[],getFirstMessage:()=>{var s;return(s=e()._messages[0])!=null?s:null},appendMessageIfNotDismissed:n=>{t(s=>s._messages.some(o=>X5(o,n))||s._dismissedMessages.some(o=>X5(o,n))?s:G(N({},s),{_messages:[...s._messages,n]}))},dismissMessage:n=>{t(s=>s._messages.includes(n)?G(N({},s),{_messages:s._messages.filter(o=>o!==n),_dismissedMessages:[...s._dismissedMessages,n]}):s)},clearMessages:()=>{t(n=>n._messages.length||n._dismissedMessages.length?G(N({},n),{_messages:[],_dismissedMessages:[]}):n)}})),m6e=f6e(),p6e=v.createContext(m6e);function v0(){const t=v.useContext(p6e);return f3(t)}const DS="open-connector";function g6e(){const t=bt(),e=jn(),[n]=wo(),s=n.get(DS),o=v.useCallback(()=>{const a=new URLSearchParams(e.search);a.delete(DS),t(G(N({},e),{search:a.toString()}),{replace:!0})},[e,t]);return{connector:Object.values(qt).find(a=>a===s),clearParam:o}}async function h6e(t,e,n,s){if(!e)return;n();let o="";s===_d.Picker&&(o="".concat(DS,"=").concat(e.type)),t!=null||(t="/"),o&&(t.includes("?")?t+="&".concat(o):t+="?".concat(o)),UJ({id:e.id},HJ(s),"".concat(window.location.origin,"/ccc/").concat(e.id,"/oauth/callback"),t)}function NG(t,e=0){return!t.access_token||t.expires_at==null?!1:t.expires_at*1e3-e<=Date.now()}function _6e(t,e){NG(t)&&sa.expiredAccessTokenUsed(t.type,e)}function x6e(t,e,n,s,o,r,a,l){Sr.uploadFile(t,ti(e),e,l!=null?l:io.Retrieval,n,s,o,{gizmoId:a},r)}function y6e(t,e,n,s,o,r,a,l,c){let u=e.title;n===qt.GDRIVE&&(u=e.syntheticExtension?"".concat(e.title,".").concat(e.syntheticExtension):e.title);const d=e.mimeType.split(";")[0],f=d.startsWith("image/");if((o==null?void 0:o.includes(d))===!1||f&&!s.includes(d)){c.danger(l.formatMessage(eI.unsupportedFileType,{fileName:u}),G(N({},$J),{toastId:"ccc_upload_file",loggingTitle:eI.unsupportedFileType.defaultMessage,loggingDescription:"Unsupported file type"}));return}Sr.uploadFile(t,e.id,new File([],u,{type:d}),io.Retrieval,s,l,c,{gizmoId:a},r,{contextConnector:n,sourceUrl:e.url,syntheticExtension:e.syntheticExtension,type:_d.Picker,o365DriveId:e.o365DriveId})}const eI=we({unsupportedFileType:{id:"ContextConnectorUtils.unsupportedFileType",defaultMessage:"{fileName} is not a supported file type"}}),Wa={uploadFile:x6e,uploadPickedFile:y6e,doContextConnectorOauthRedirect:h6e,isAccessTokenExpired:NG,logAttemptIfAccessTokenIsExpired:_6e};function Rut({onOauthRedirect:t}){const{connectorConfig:e,isLoading:n}=GJ(),s=v0(),o=xe("1242184140"),{getFirstMessage:r}=s,a=r(),l=a?e.get(a.connector):null,c=n||!l,u=o?b6e:v6e,d=v.useMemo(()=>{if(c||!a)return null;switch(a.type){case"not-connected":return i.jsx(u,{unconnectedMessage:a,onOauthRedirect:t,entry:l})}},[u,c,l,a,t]),{dismissMessage:f}=v0(),m=v.useCallback(p=>{!p&&a&&!c&&f(a)},[c,f,a]);return i.jsx($E,{size:"none",open:!c,onOpenChange:m,side:"top",sideOffset:4,triggerButton:i.jsx("button",{type:"button",name:"context-connector-pasted-link-popover-trigger",suppressHydrationWarning:!0,className:"invisible absolute self-center","aria-hidden":!0,tabIndex:-1}),children:d})}function b6e({unconnectedMessage:t,onOauthRedirect:e,entry:n}){const{dismissMessage:s}=v0(),o=te(),r=k1(t.connector,o),a=S6e(t.connector),l=()=>{sa.oauthUpsellButtonClick(n.type,"link"),Wa.doContextConnectorOauthRedirect(location.pathname+location.search+location.hash,n,e,_d.Link)},c=()=>{sa.oauthUpsellButtonClick(n.type,"not-now"),s(t)};return i.jsxs("div",{className:"flex w-[294px] max-w-full flex-col p-2 sm:w-[384px]",children:[i.jsxs("div",{className:"mb-5 flex flex-row gap-2",children:[i.jsx(w6e,{icon:a}),i.jsx("span",{className:"text-sm font-bold",children:i.jsx(P,G(N({},$i.connectTo),{values:{connectorName:r}}))})]}),i.jsx("span",{className:"text-token-text-secondary mb-5 text-sm",children:i.jsx(P,G(N({},$i.description),{values:{connectorName:r}}))}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx(Se,{color:"primary",onClick:l,children:i.jsx(P,N({},$i.connect))}),i.jsx(Se,{color:"secondary",onClick:c,children:i.jsx(P,N({},$i.notNow))})]})]})}function v6e({unconnectedMessage:t,onOauthRedirect:e,entry:n}){const{dismissMessage:s}=v0(),o=te(),r=k1(t.connector,o),{icon1:a,icon2:l,icon3:c,icon4:u}=C6e(t.connector);return i.jsxs("div",{className:"flex w-[294px] max-w-full flex-col p-4 sm:w-[384px]",children:[i.jsxs("div",{className:"mb-3 flex flex-row gap-2 self-center",children:[i.jsx(Th,{icon:a,rotation:-6}),i.jsx(Th,{icon:l,rotation:6}),i.jsx(Th,{icon:c,rotation:-6}),i.jsx(Th,{icon:u,rotation:6})]}),i.jsx("span",{className:"mb-3 text-lg font-semibold",children:i.jsx(P,G(N({},$i.connectTo),{values:{connectorName:r}}))}),i.jsx("span",{className:"text-token-text-secondary mb-4 text-sm",children:i.jsx(P,G(N({},$i.description),{values:{connectorName:r}}))}),i.jsxs("div",{className:"flex flex-row-reverse gap-3 self-end",children:[i.jsx(Se,{color:"primary",onClick:()=>{sa.oauthUpsellButtonClick(n.type,"link"),Wa.doContextConnectorOauthRedirect(location.pathname+location.search+location.hash,n,e,_d.Link)},children:i.jsx(P,N({},$i.connect))}),i.jsx(Se,{color:"secondary",onClick:()=>{sa.oauthUpsellButtonClick(n.type,"not-now"),s(t)},children:i.jsx(P,N({},$i.notNow))})]})]})}function S6e(t){switch(t){case qt.CONFLUENCE:return i.jsx(e7,{width:20,height:20});case qt.GDRIVE:return i.jsx(Ys,{width:20,height:20});case qt.JIRA:return i.jsx(X9,{width:20,height:20});case qt.NOTION_OPEN_CONNECTOR:return i.jsx(sc,{width:20,height:20});case qt.O365:case qt.O365_BUSINESS:case qt.O365_PERSONAL:return i.jsx(J9,{width:20,height:20});case qt.SLACK_OPEN_CONNECTOR:return i.jsx(c_,{width:20,height:20})}t7(t)}function C6e(t){switch(t){case qt.GDRIVE:return{icon1:i.jsx(Ys,{}),icon2:i.jsx(w9,{}),icon3:i.jsx(c3,{}),icon4:i.jsx(S1,{})};case qt.O365:case qt.O365_BUSINESS:case qt.O365_PERSONAL:return{icon1:i.jsx(J9,{}),icon2:i.jsx(j9,{}),icon3:i.jsx(I9,{}),icon4:i.jsx(P9,{})};case qt.CONFLUENCE:case qt.JIRA:case qt.NOTION_OPEN_CONNECTOR:return{icon1:i.jsx(d6e,{}),icon2:i.jsx(J5,{}),icon3:i.jsx(vo,{}),icon4:i.jsx(LS,{})};case qt.SLACK_OPEN_CONNECTOR:return{icon1:i.jsx(c_,{}),icon2:i.jsx(J5,{}),icon3:i.jsx(vo,{}),icon4:i.jsx(LS,{})}}t7(t)}const w6e=({icon:t})=>i.jsx("div",{className:q("flex h-[20px] w-[20px]"),children:i.jsx("div",{className:"object-contain",children:t})});function Th({rotation:t,icon:e}){return i.jsx("div",{className:q("flex h-[44px] w-[44px] items-center justify-center rounded-xl border border-[#EDEDF2] bg-white shadow-[0_1px_12px_0px_#0000000B]"),style:{transform:"rotate(".concat(t,"deg)")},children:i.jsx("div",{className:"object-contain",children:e})})}const $i=we({connectTo:{id:"ContextConnectorPastedLinkPopover.connectTo",defaultMessage:"Connect to {connectorName}"},description:{id:"ContextConnectorPastedLinkPopover.description",defaultMessage:"Connect ChatGPT to {connectorName} to reference the content from this link."},notNow:{id:"ContextConnectorPastedLinkPopover.notNow",defaultMessage:"Not now"},connect:{id:"ContextConnectorPastedLinkPopover.connect",defaultMessage:"Connect"},addFromGdriveDescription:{id:"ContextConnectorPastedLinkPopover.addFromDriveDescription",defaultMessage:"To add files from Google Drive, upload them directly to your message."},addFromGdriveNotNow:{id:"ContextConnectorPastedLinkPopover.addFromDriveNotNow",defaultMessage:"Not now"},addFromGdriveUploadFile:{id:"ContextConnectorPastedLinkPopover.addFromDriveUploadFile",defaultMessage:"Upload file"}}),k6e="77377267392",IG="AIzaSyAOHzpLbFWAcLwrOn1IvQeVd0jHRntTlPk";var E6e=(t=>(t.OneDrive_BUSINESS_DRIVE_ITEMS="https://graph.microsoft.com/v1.0/me/drive/items",t.OneDrive_BUSINESS_DRIVE_ROOT="https://graph.microsoft.com/v1.0/me/drive/root",t.OneDrive_BUSINESS_SHARES="https://graph.microsoft.com/v1.0/shares",t.OneDrive_PERSONAL_DRIVE_ITEMS="https://api.onedrive.com/v1.0/drives",t.OneDrive_PERSONAL_SHARES="https://api.onedrive.com/v1.0/shares",t))(E6e||{});let lb=null;function jG(t){return lb==null&&(lb=T6e().then(()=>(gapi.client.setToken({access_token:t}),gapi.client.init({apiKey:IG,scope:"https://www.googleapis.com/auth/drive.file",discoveryDocs:["https://www.googleapis.com/discovery/v1/apis/drive/v3/rest"]})))),lb}function T6e(){return new Promise((t,e)=>{const n=document.createElement("script");n.src="https://apis.google.com/js/api.js",n.onload=t,n.onerror=e,document.documentElement.appendChild(n)}).then(()=>Promise.all([new Promise(t=>gapi.load("client",t)),new Promise(t=>gapi.load("client:picker",t))]))}async function M6e(t,e,n,s){await jG(n);async function o(d){switch(d.action){case google.picker.Action.PICKED:{sa.filePickerPicked(qt.GDRIVE,d.docs.length);const f=d.docs.map(m=>({connector:e,id:m.id,title:m.name,mimeType:m.mimeType,url:m.url,syntheticExtension:m.type==="document"?VJ(m.mimeType):null}));s(f);break}case google.picker.Action.CANCEL:sa.filePickerCancelled(qt.GDRIVE);return;case"loaded":{sa.filePickerLoaded(qt.GDRIVE);return}}}const r=new google.picker.DocsView(google.picker.ViewId.DOCS).setIncludeFolders(!0).setSelectFolderEnabled(!1).setMode(google.picker.DocsViewMode.LIST);let a="en";tI.includes(t)?a=t:tI.includes(t.split("-")[0])&&(a=t.split("-")[0]);const l=new google.picker.PickerBuilder().enableFeature(google.picker.Feature.MULTISELECT_ENABLED).enableFeature(google.picker.Feature.SUPPORT_DRIVES).setDeveloperKey(IG).setAppId(k6e).setOAuthToken(n).addView(r).setCallback(o).setLocale(a).build();sa.filePickerStarted(qt.GDRIVE),l.setVisible(!0);const c=A6e(),u=()=>{sa.filePickerCancelled(qt.GDRIVE),l.setVisible(!1),c==null||c.removeEventListener("click",u)};c==null||c.addEventListener("click",u)}function A6e(){var e;if(typeof window>"u")return null;const t=(e=window.document.body.querySelector("div.picker-dialog-bg"))!=null?e:window.document.body.querySelector("div.oai-picker-dialog-bg");return t==null||t.classList.add("oai-picker-dialog-bg","bg-black/50","dark:bg-black/80","absolute","inset-0","z-1000"),t==null||t.classList.remove("picker-dialog-bg"),t}const tI=["af","am","ar","bg","bn","ca","cs","da","de","el","en","en-GB","es","es-419","et","eu","fa","fi","fil","fr","fr-CA","gl","gu","hi","hr","hu","id","is","it","iw","ja","kn","ko","lt","lv","ml","mr","ms","nl","no","pl","pt-BR","pt-PT","ro","ru","sk","sl","sr","sv","sw","ta","te","th","tr","uk","ur","vi","zh-CN","zh-HK","zh-TW","zu"],N6e=je(()=>Me(()=>import("./d396ee8a-2hjk9ntict5w2yu8.js"),__vite__mapDeps([260,1,2,3])).then(t=>t.GoogleDriveOAuthModal)),I6e=je(()=>Me(()=>import("./3fb363ee-k3g51vgb0r1snqg0.js"),__vite__mapDeps([261,1,2,3])).then(t=>t.OneDrivePickerModal));function Out({modelSupportedImageMimeTypes:t,modelAcceptedMimeTypes:e,attachmentsProductFeature:n,onOauthRedirect:s}){"use no forget";var y,S;const o=te(),r=Dt(),a=Nt(),l=nf(),{getGizmoId:c}=n7(),u=(S=(y=X0())==null?void 0:y.enabled)!=null?S:!1,[d,f]=v.useState();v.useEffect(()=>{c?c().then(C=>f(C)):f(void 0)},[c]);const m=(C,w)=>Wa.uploadPickedFile(l,C,w,t,e,n,d,o,r),p=v.useRef(!1),g=C=>{if(C.type===qt.GDRIVE&&u&&!p.current){rt(N6e,{onContinue:()=>{p.current=!0,g(C)}});return}Wa.doContextConnectorOauthRedirect(location.pathname+location.search+location.hash,C,s,_d.Picker),s()},h=C=>{Wa.uploadPickedFile(l,C,qt.GDRIVE,t,e,n,d,o,r)},_=C=>C===qt.GDRIVE?"Google Drive":"OneDrive",x=async C=>{if(!Wa.isAccessTokenExpired(C))return C;try{const k=(await a.fetchQuery(G(N({},zJ(Array.from(WJ))),{staleTime:0}))).find(E=>E.type===C.type);if(k!=null&&k.access_token)return k}catch(w){Ve.addError(w)}return r.danger(o.formatMessage({id:"eJctJR",defaultMessage:"Unable to fetch {provider} credentials"},{provider:_(C.type)})),null};return{onSelectConnector:C=>{const{access_token:w}=C;if(!w){g(C);return}Wa.logAttemptIfAccessTokenIsExpired(C,_d.Picker),(async()=>{const k=await x(C);if(k!=null&&k.access_token)switch(k.type){case qt.GDRIVE:M6e(is().locale,k.type,k.access_token,E=>E.forEach(h));break;case qt.O365_PERSONAL:case qt.O365_BUSINESS:k.onedrive_endpoint_hint&&rt(I6e,{accessToken:k.access_token,oneDriveURL:k.onedrive_endpoint_hint,uploadPickedFile:m});break}})()},onConnectorOauthRedirect:g}}function Lut(t,e){"use forget";const n=D.c(6),{connector:s,clearParam:o}=g6e();let r,a;n[0]!==o||n[1]!==s||n[2]!==t||n[3]!==e?(r=()=>{const l=s!=null&&Array.from(t.values()).find(c=>c.type===s&&!!c.access_token);l&&(e(l),o())},a=[t,s,o,e],n[0]=o,n[1]=s,n[2]=t,n[3]=e,n[4]=r,n[5]=a):(r=n[4],a=n[5]),v.useEffect(r,a)}function j6e({isOpen:t,onClose:e,markAsViewed:n}){const s=te();return i.jsx(en,{testId:"modal-memory-alpha",isOpen:t,onClose:e,showCloseButton:!0,size:"custom",type:"success",className:"max-w-xl",title:s.formatMessage({id:"MoonshineAlphaAnnouncement.title",defaultMessage:"You're testing memory improvements"}),footerContent:i.jsxs("div",{className:"ms-1 mt-4 flex w-full justify-between",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(_F,{className:"icon text-token-text-secondary me-1.5 inline-block"}),i.jsx("a",{href:"https://help.openai.com/en/articles/10303002-how-does-memory-use-past-conversations",target:"_blank",rel:"noopener noreferrer",onClick:()=>{n&&n(),e()},className:"text-token-text-secondary font-medium",children:s.formatMessage({id:"MoonshineAlphaAnnouncement.secondaryButton",defaultMessage:"Learn more"})})]}),i.jsx("div",{children:i.jsx(Es.Button,{title:s.formatMessage({id:"MoonshineAlphaAnnouncement.primaryButton",defaultMessage:"Got it"}),color:"secondary",className:"text-base",onClick:e})})]}),children:i.jsxs("div",{className:"flex flex-col gap-4",children:[i.jsxs("div",{className:"flex items-start",children:[i.jsx(bl,{className:"icon-lg text-token-text-secondary me-3 mt-1 inline-block"}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx("span",{className:"font-medium",children:i.jsx(P,{id:"MoonshineAlphaAnnouncement.chatTitle",defaultMessage:"ChatGPT now uses all past chats"})}),i.jsx("span",{className:"text-token-text-secondary font-normal",children:i.jsx(P,{id:"MoonshineAlphaAnnouncement.chatText",defaultMessage:"All past chats will inform responses, not just saved memories."})})]})]}),i.jsxs("div",{className:"flex items-start",children:[i.jsx(wd,{className:"icon-lg text-token-text-secondary me-3 mt-1 inline-block"}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx("span",{className:"font-medium",children:i.jsx(P,{id:"MoonshineAlphaAnnouncement.optInTitle",defaultMessage:"You're in control"})}),i.jsx("span",{className:"text-token-text-secondary font-normal",children:i.jsx(P,{id:"MoonshineAlphaAnnouncement.optInText",defaultMessage:"Use temporary chats for topics you don't want remembered."})})]})]}),i.jsxs("div",{className:"flex items-start",children:[i.jsx(f_,{className:"icon-lg text-token-text-secondary me-3 mt-1 inline-block"}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx("span",{className:"font-medium",children:i.jsx(P,{id:"MoonshineAlphaAnnouncement.optOutText",defaultMessage:"Opt out any time"})}),i.jsx("span",{className:"text-token-text-secondary font-normal",children:i.jsx(P,{id:"MoonshineAlphaAnnouncement.settingsLink",defaultMessage:"Visit {settingsLink} to turn off improved memory.",values:{settingsLink:i.jsx(ko,{to:Fd(Ts.Personalization),onClick:()=>{n&&n()},className:"underline",children:i.jsx(P,{id:"MoonshineAlphaAnnouncement.settingsLinkWord",defaultMessage:"Settings"})})}})})]})]})]})})}const S0=We.hasSeenMoonshineNux;function Dut(){"use forget";const t=D.c(12),[e,n]=v.useState(!1),s=R6e;let o;t[0]===Symbol.for("react.memo_cache_sentinel")?(o=()=>{n(!0)},t[0]=o):o=t[0];const r=o;let a;t[1]===Symbol.for("react.memo_cache_sentinel")?(a=()=>{n(!1)},t[1]=a):a=t[1];const l=a;let c;t[2]===Symbol.for("react.memo_cache_sentinel")?(c=[],t[2]=c):c=t[2],v.useEffect(P6e,c);let u,d,f;t[3]===Symbol.for("react.memo_cache_sentinel")?(u=()=>{r(),Fe.count(Ue.MOONSHINE,"announcement.learn_more_clicked"),V.logEventWithStatsig("ChatGPT Moonshine: CTA Clicked","chatgpt_moonshine_announcement_cta_clicked")},d=i.jsx(P,{id:"MoonshineAnnouncement.secondaryCtaText",defaultMessage:"Learn more"}),f=()=>{Fe.count(Ue.MOONSHINE,"announcement.close_clicked"),V.logEventWithStatsig("ChatGPT Moonshine: Announcement Closed","chatgpt_moonshine_announcement_closed"),s()},t[3]=u,t[4]=d,t[5]=f):(u=t[3],d=t[4],f=t[5]);let m;t[6]===Symbol.for("react.memo_cache_sentinel")?(m=i.jsxs("div",{className:"flex items-center gap-2 font-bold",children:[i.jsx(P,{id:"MoonshineAnnouncement.heading",defaultMessage:"You're testing memory improvements"}),i.jsx(qJ,{})]}),t[6]=m):m=t[6];let p;t[7]===Symbol.for("react.memo_cache_sentinel")?(p=i.jsx(hn,{onSecondaryCtaClick:u,secondaryCtaText:d,onDismiss:f,content:i.jsxs("div",{className:"grow",children:[m,i.jsx("span",{className:"text-token-text-secondary",children:i.jsx(P,{id:"MoonshineAnnouncement.description",defaultMessage:"ChatGPT can now reference past chats, not just saved memories."})})]})}),t[7]=p):p=t[7];let g;t[8]!==e?(g=e&&i.jsx(j6e,{isOpen:e,markAsViewed:s,onClose:()=>{l(),s()}}),t[8]=e,t[9]=g):g=t[9];let h;return t[10]!==g?(h=i.jsxs(i.Fragment,{children:[p,g]}),t[10]=g,t[11]=h):h=t[11],h}function P6e(){Fe.count(Ue.MOONSHINE,"nux.shown"),V.logEventWithStatsig("ChatGPT Moonshine: Announcement Shown","chatgpt_moonshine_announcement_shown"),V.logUpsellOrModalEvent(qn,{eventId:"moonshine_announcement_banner_shown",type:Kn.UPSELL_OR_MODAL_TYPE_NUX_BANNER})}function R6e(){return kt(S0)}function O6e(){"use forget";const t=w_(),{eligible:e,isLoading:n}=Ct(S0);return t&&e&&!n}function But(){"use forget";const t=D.c(3),e=w_(),{eligible:n}=Ct(S0);let s;return t[0]!==n||t[1]!==e?(s=()=>{!e||!n||(Fe.count(Ue.MOONSHINE,"nux.implicit_close"),kt(S0))},t[0]=n,t[1]=e,t[2]=s):s=t[2],s}const L6e=re(me,"546a9a",20,20),XE=t=>{"use forget";const e=D.c(61),{pressed:n,disabled:s,icon:o,label:r,ariaLabel:a,animatedLabel:l,showLabel:c,onClick:u,splitButtonDropdownContent:d,showSplitButton:f,dropdownContent:m,dataTestid:p,splitSecondaryButton:g,tooltip:h,as:_}=t,x=f===void 0?!0:f,b=_===void 0?"popover":_,[y,S]=v.useState(!1),[C,w]=v.useState(!1),k=KJ(),E=!s&&n;let T;e[0]!==r?(T=r&&i.jsx("div",{className:"ps-1 pe-1 font-semibold whitespace-nowrap [[data-collapse-labels]_&]:sr-only",children:r}),e[0]=r,e[1]=T):T=e[1];const M=T,A=!!d;let I;e[2]!==A?(I=q("flex h-full min-w-8 items-center justify-center p-2",{"pe-1.5":A}),e[2]=A,e[3]=I):I=e[3];let j;e[4]===Symbol.for("react.memo_cache_sentinel")?(j=()=>w(!1),e[4]=j):j=e[4];let R;e[5]!==m||e[6]!==u?(R=Pe=>{m||(w(!0),u(Pe))},e[5]=m,e[6]=u,e[7]=R):R=e[7];const O=!l&&c?M:null;let L;e[8]!==l||e[9]!==M||e[10]!==k||e[11]!==c?(L=l&&i.jsx(In,{initial:!1,children:c&&i.jsx(wt.span,{initial:{x:-10,width:0,opacity:0},animate:{x:0,width:"fit-content",opacity:1},exit:{x:-10,width:0,opacity:0},transition:{ease:"easeOut",duration:k?0:.15},children:M})}),e[8]=l,e[9]=M,e[10]=k,e[11]=c,e[12]=L):L=e[12];let B;e[13]!==a||e[14]!==p||e[15]!==s||e[16]!==o||e[17]!==n||e[18]!==I||e[19]!==R||e[20]!==O||e[21]!==L?(B=i.jsxs("button",{className:I,"data-testid":p,"aria-pressed":n,"aria-label":a,disabled:s,onTransitionEnd:j,onClick:R,children:[o,O,L]}),e[13]=a,e[14]=p,e[15]=s,e[16]=o,e[17]=n,e[18]=I,e[19]=R,e[20]=O,e[21]=L,e[22]=B):B=e[22];const U=B;let H;e[23]!==U||e[24]!==h?(H=h?h(U):U,e[23]=U,e[24]=h,e[25]=H):H=e[25];const $=H;let F;e[26]!==y?(F=y?i.jsx(L6e,{className:"icon"}):i.jsx(ng,{className:"icon"}),e[26]=y,e[27]=F):F=e[27];const z=F;let W;e[28]===Symbol.for("react.memo_cache_sentinel")?(W={type:"tween",duration:.15,ease:"easeInOut"},e[28]=W):W=e[28];const Y=W;let K;e[29]!==k?(K=k?UF:{opacity:{delay:.1},default:Y},e[29]=k,e[30]=K):K=e[30];const Z=K;let J;e[31]!==b||e[32]!==m||e[33]!==d?(J=d||m?b==="popover"?i.jsx(Ml,{children:i.jsx(b3,{className:"p-0",$as:Al,side:"bottom",align:"start",collisionPadding:10,sideOffset:8,children:m!=null?m:d})}):i.jsx(ee.Portal,{children:i.jsx(ee.Content,{children:m!=null?m:d})}):null,e[31]=b,e[32]=m,e[33]=d,e[34]=J):J=e[34];const Q=J;let ne;e[35]!==b||e[36]!==$?(ne=b==="popover"?i.jsx(ba,{asChild:!0,children:$}):i.jsx(ee.Trigger,{asChild:!0,children:$}),e[35]=b,e[36]=$,e[37]=ne):ne=e[37];const ie=ne;let fe;e[38]!==Z||e[39]!==b||e[40]!==z||e[41]!==s||e[42]!==E?(fe=b==="popover"?i.jsx(ba,{asChild:!0,children:i.jsx("button",{className:"border-token-border-default border-s p-2",style:{borderColor:E?"#0285FF0D":void 0},disabled:s,children:z})}):i.jsx(wt.div,{initial:{width:0,opacity:0,padding:0},animate:{width:"auto",opacity:1,padding:"0.5rem"},exit:{width:0,opacity:0,padding:0,borderInlineStart:"unset"},transition:Z,style:{overflow:"hidden",border:"unset",borderInlineStart:"solid 1px",borderColor:E?"#0285FF0D":"var(--border-default)"},children:i.jsx(ee.Trigger,{asChild:!0,children:i.jsx("button",{style:{padding:0,backgroundColor:"transparent",height:"100%",borderRadius:"unset",color:E?"var(--interactive-label-accent-default)":void 0},disabled:s,children:z})})}),e[38]=Z,e[39]=b,e[40]=z,e[41]=s,e[42]=E,e[43]=fe):fe=e[43];const ae=fe,le=!n,pe=!!E,_e=!E;let Ce;e[44]!==s||e[45]!==C||e[46]!==le||e[47]!==pe||e[48]!==_e?(Ce=q("radix-state-open:bg-black/10 inline-flex h-9 rounded-full border text-[13px] font-medium",{"duration-75 motion-safe:transition-all":C,"text-token-text-secondary":le,"text-token-interactive-label-accent-default bg-token-composer-blue-bg border-transparent hover:bg-[#BDDCF4] dark:bg-[#2A4A6D] dark:text-[#48AAFF] dark:hover:bg-[#1A416A]":pe,"border-token-border-default hover:bg-token-main-surface-secondary focus-visible:outline-black dark:focus-visible:outline-white":_e,"opacity-30":s}),e[44]=s,e[45]=C,e[46]=le,e[47]=pe,e[48]=_e,e[49]=Ce):Ce=e[49];const ge=m?ie:$,Re=!m&&d&&x?ae:null;let ke;e[50]!==Re?(ke=i.jsx(In,{children:Re}),e[50]=Re,e[51]=ke):ke=e[51];let he;e[52]!==g||e[53]!==Ce||e[54]!==ge||e[55]!==ke?(he=i.jsxs("div",{className:Ce,children:[ge,ke,g]}),e[52]=g,e[53]=Ce,e[54]=ge,e[55]=ke,e[56]=he):he=e[56];const Ee=he;if(d||m){let Pe;return e[57]!==b||e[58]!==Ee||e[59]!==Q?(Pe=b==="popover"?i.jsxs(Tl,{onOpenChange:Ae=>S(Ae),children:[i.jsx(OF,{asChild:!0,children:Ee}),Q]}):i.jsxs(ee.Root,{onOpenChange:Ae=>S(Ae),children:[Ee,Q]}),e[57]=b,e[58]=Ee,e[59]=Q,e[60]=Pe):Pe=e[60],Pe}else return Ee};var D6e=(t=>(t.ModelNotSupported="modelNotSupported",t.HasReachedMaxFiles="hasReachedMaxFiles",t.RateLimitReached="rateLimitReached",t.SteeringAsyncTaskPending="steeringAsyncTaskPending",t))(D6e||{}),eT=(t=>(t.General="general",t.ModelNotSupported="modelNotSupported",t.GizmoNotSupported="gizmoNotSupported",t.HasAttachedFiles="hasAttachedFiles",t))(eT||{});function Fut(t){"use forget";var E,T;const e=D.c(9),{account:n,clientBootstrapFlags:s,features:o,clientThreadId:r,currentModelConfig:a,composerController:l,isDisabled:c,gizmoId:u}=t,d=TL(r),f=gl(u);let m;e[0]!==(a==null?void 0:a.enabledTools)?(m=(E=a==null?void 0:a.enabledTools)==null?void 0:E.includes(Ep.Search),e[0]=a==null?void 0:a.enabledTools,e[1]=m):m=e[1];const p=m,g=d==null||(d==null?void 0:d.kind)===Bt.PrimaryAssistant||(d==null?void 0:d.kind)===Bt.GizmoInteraction&&f,h=!mt(),_=X(B6e),x=!h&&(n==null||n.isFree());if(p===!1||h&&(s!=null&&s.includes(gv.AnonSearchHoldout))||x&&s!=null&&s.includes(gv.FreeSearchHoldout)||!_||!h&&(n==null||n.isEnterprisey())&&!(o!=null&&o.includes(Qs.BrowsingAvailable))||!g)return null;let y;e[2]===Symbol.for("react.memo_cache_sentinel")?(y={viewTransitionName:"var(--vt-composer-".concat(Ke.Search,"-action)")},e[2]=y):y=e[2];const S=!!c||!p,C=p?void 0:eT.ModelNotSupported,w=(T=a==null?void 0:a.title)!=null?T:"";let k;return e[3]!==r||e[4]!==l||e[5]!==S||e[6]!==C||e[7]!==w?(k=i.jsx("div",{"data-testid":"system-hint-search",style:y,children:i.jsx(F6e,{clientThreadId:r,composerController:l,isDisabled:S,disabledReason:C,currentModelName:w})},"system-hint-".concat(Ke.Search)),e[3]=r,e[4]=l,e[5]=S,e[6]=C,e[7]=w,e[8]=k):k=e[8],k}function B6e(){return YJ(Ke.Search)}function F6e(t){"use forget";const e=D.c(28),{clientThreadId:n,composerController:s,isDisabled:o,disabledReason:r,currentModelName:a}=t,l=te();let c;e[0]!==l?(c=l.formatMessage({id:"TbHx8d",defaultMessage:"Search"}),e[0]=l,e[1]=c):c=e[1];const u=c,d=Is(),f=Jo(),m=d===Ke.Search;let p,g;e[2]!==n||e[3]!==o||e[4]!==m||e[5]!==f?(p=()=>{o&&m&&f(null,{analyticsMetadata:{clientThreadId:n}})},g=[o,m,f,n],e[2]=n,e[3]=o,e[4]=m,e[5]=f,e[6]=p,e[7]=g):(p=e[6],g=e[7]),v.useEffect(p,g);let h;e[8]!==n||e[9]!==s||e[10]!==m||e[11]!==f?(h=w=>{w.stopPropagation(),w.preventDefault(),f(m?null:Ke.Search,{analyticsMetadata:{clientThreadId:n}}),m||So(Vt(s)),V.logEventWithStatsig("Composer Search Button Clicked","composer_search_button_clicked",{clientThreadId:n}),m&&ZJ(Vt(s),/^search\b/i)},e[8]=n,e[9]=s,e[10]=m,e[11]=f,e[12]=h):h=e[12];const _=h;let x;e[13]!==n?(x={clientThreadId:n},e[13]=n,e[14]=x):x=e[14];const b=o!=null?o:!1;let y;e[15]===Symbol.for("react.memo_cache_sentinel")?(y=i.jsx(xi,{className:"icon"}),e[15]=y):y=e[15];let S;e[16]!==_||e[17]!==m||e[18]!==u||e[19]!==b?(S=i.jsx(XE,{pressed:m,disabled:b,icon:y,label:u,ariaLabel:u,animatedLabel:!0,showLabel:!0,onClick:_,dataTestid:"composer-button-search"}),e[16]=_,e[17]=m,e[18]=u,e[19]=b,e[20]=S):S=e[20];let C;return e[21]!==a||e[22]!==r||e[23]!==o||e[24]!==m||e[25]!==x||e[26]!==S?(C=i.jsx(H6e,{analyticsMetadata:x,isThreadUsingSearchMode:m,isDisabled:o,disabledReason:r,currentModelName:a,children:S}),e[21]=a,e[22]=r,e[23]=o,e[24]=m,e[25]=x,e[26]=S,e[27]=C):C=e[27],C}function U6e(){"use forget";const t=O6e(),e=Ct(We.hasSeenComposerSearchButtonTooltip);return!e.isLoading&&e.eligible&&!t}function H6e(t){"use forget";const e=D.c(14),{children:n,analyticsMetadata:s,isThreadUsingSearchMode:o,isDisabled:r,disabledReason:a,currentModelName:l}=t;if(!(U6e()&&!o)){let m;e[0]!==l||e[1]!==a||e[2]!==r?(m=r?a===eT.ModelNotSupported?i.jsx(P,{id:"GZemJe",defaultMessage:"Search disabled for {modelName}",values:{modelName:"".concat(l)}}):i.jsx(P,{id:"GpDAWD",defaultMessage:"Search is unavailable"}):i.jsx(P,{id:"c+4o2s",defaultMessage:"Search the web"}),e[0]=l,e[1]=a,e[2]=r,e[3]=m):m=e[3];let p;e[4]!==s?(p=h=>{h&&V.logEventWithStatsig("Composer Search Button Hovered","composer_search_button_hovered",s)},e[4]=s,e[5]=p):p=e[5];let g;return e[6]!==n||e[7]!==m||e[8]!==p?(g=i.jsx("div",{children:i.jsx(St,{className:"inline-block",label:m,side:"bottom",onOpenChange:p,children:n})}),e[6]=n,e[7]=m,e[8]=p,e[9]=g):g=e[9],g}let u;e[10]===Symbol.for("react.memo_cache_sentinel")?(u=i.jsx(P,{id:"Yjduqi",defaultMessage:"Search the web"}),e[10]=u):u=e[10];let d;e[11]===Symbol.for("react.memo_cache_sentinel")?(d=i.jsx(P,{id:"W51Aei",defaultMessage:"Get fast answers with trusted sources. {learnMore}",values:{learnMore:i.jsx(Fs,{href:"https://openai.com/index/introducing-chatgpt-search",className:"underline",children:i.jsx(P,{id:"stA7F4",defaultMessage:"Learn more"})})}}),e[11]=d):d=e[11];let f;return e[12]!==n?(f=i.jsx(hf,{announcementKey:We.hasSeenComposerSearchButtonTooltip,side:"right",show:!0,theme:"bright",dismissOnOutsideClick:!0,badge:"new",title:u,onDismiss:$6e,sideOffset:0,className:"xs:max-w-sm! max-w-2xs!",description:d,children:i.jsx("div",{children:n})}),e[12]=n,e[13]=f):f=e[13],f}function $6e(){return kt(We.hasSeenComposerSearchButtonTooltip)}const G6e=t=>"hazelnut-enable-".concat(t),tT=t=>"type"in t.content&&t.content.type==="hazelnut_enable_prompt",PG=t=>t.tree.nodes.find(e=>tT(e.message)),BS=(t,e)=>{fo.updateTree(t,(n,s)=>{var a;const o=n.messageIdToExistingNodeId(e);if(!o)return;const r=(a=n.getParent(o))==null?void 0:a.id;if(n.deleteNode(o),s===o)return r!=null?r:n.rootId})},V6e=t=>({id:G6e(t.id),author:{role:dt.Assistant},content:{content_type:vt.SystemMessage,type:"hazelnut_enable_prompt",hazelnut_id:t.id,name:t.name,text:"hazelnut_enable_prompt"},metadata:{is_hazelnut_enable_prompt:!0}}),z6e=(t,e)=>{const n=PG(t);if(!e){n&&BS(t,n.id);return}if(n){const s=n.message.content;if(tT(n.message)&&s.hazelnut_id===e.id){s.name!==e.name&&fo.updateTree(t,o=>{o.updateNodeMessage(n.id,G(N({},n.message),{content:G(N({},s),{name:e.name})}))});return}BS(t,n.id)}fo.updateTree(t,(s,o)=>s.addMessageNode(o,V6e(e)))},nI=(t,e)=>{pt(t,n=>{z6e(n,e)})},Uut=(t,e)=>{pt(t,n=>{const s=PG(n);s&&tT(s.message)&&s.message.content.hazelnut_id===e&&BS(n,s.id)})},W6e=t=>{"use forget";const e=D.c(18),{conversationId:n,selectedHazelnutIds:s}=t,{data:o}=DE();let r;e[0]===Symbol.for("react.memo_cache_sentinel")?(r=rk(),e[0]=r):r=e[0];const a=r;let l;e[1]!==s?(l=[...s].sort(),e[1]=s,e[2]=l):l=e[2];const c=l,u=Ze(n,ve.hasUserMessage);let d;e:{if(!(o!=null&&o.hazelnuts)){d=null;break e}let x;e[3]!==o.hazelnuts?(x=new Map(o.hazelnuts.map(q6e)),e[3]=o.hazelnuts,e[4]=x):x=e[4],d=x}const f=d;let m;if(e[5]!==f||e[6]!==c){e:{if(!f){m=null;break e}for(const x of c){const b=f.get(x);if(b&&b.enabled===!1){m=b;break e}}m=null}e[5]=f,e[6]=c,e[7]=m}else m=e[7];const p=m;let g;e[8]!==n||e[9]!==p||e[10]!==u||e[11]!==(o==null?void 0:o.hazelnuts)?(g=()=>{if(!(!(o!=null&&o.hazelnuts)||!a)){if(!u){nI(n,null);return}nI(n,p)}},e[8]=n,e[9]=p,e[10]=u,e[11]=o==null?void 0:o.hazelnuts,e[12]=g):g=e[12];const h=o==null?void 0:o.hazelnuts;let _;e[13]!==n||e[14]!==p||e[15]!==u||e[16]!==h?(_=[n,p,h,a,u],e[13]=n,e[14]=p,e[15]=u,e[16]=h,e[17]=_):_=e[17],v.useEffect(g,_)};function Hut({selectedHazelnutIds:t,conversationId:e}){return W6e({conversationId:e,selectedHazelnutIds:t}),null}function q6e(t){return[t.id,t]}const $ut=we({promptPlaceholder:{defaultMessage:"Shop for anything",id:"composer.placeholder.mercuryMode"}}),Gut=async({filePickerStore:t,event:e,intl:n,toaster:s,conversationMode:o,clientThreadId:r,currentModelConfig:a,getEditorGizmoId:l,modelSupportedImageMimeTypes:c,activeSystemHintType:u,contextScopes:d,uploadSource:f})=>{var k,E,T,M;const m=mt(),p=is().flags,g=p==null?void 0:p.includes(gv.NoAuthEnableFileUploads),h=V9(a,o,u),_=c.length>0;V.logEvent("Pasted to Composer",{client_thread_id:r});const{clipboardData:x}=e,b=W9(a,o),y=!m&&g?c:(k=b==null?void 0:b.attachments)==null?void 0:k.accepted_mime_types,S=!m&&g?!1:(E=b==null?void 0:b.attachments)==null?void 0:E.can_accept_all_mime_types,C=N(N(N({},g&&{isUnauthenticated:!m}),m&&d&&d.length>0?{contextScopes:d}:{}),f?{uploadSource:f}:{});if(_&&x&&x.files.length>0){const A=x.files[0],I=A.name.match(/\.[^.]+$/),j=I?"".concat(fa()).concat(I[0]):fa(),R=new File([A],j,{type:A.type,lastModified:A.lastModified});if(y!==void 0&&!y.includes(R.type)&&S!==!0){s.danger(n.formatMessage(jo.unsupportedFileType,{file_type:QJ(R)}),{toastId:"paste_unsupported_file_type",loggingTitle:jo.unsupportedFileType.defaultMessage,loggingDescription:"Unsupported file type"}),e.preventDefault();return}if(As.hideThreadHeader(),V.logEvent("Upload File",{client:"web",eventSource:"paste"}),l!=null){l().then(O=>Sr.uploadFile(t,ti(R),R,h,c,n,s,N({gizmoId:O},C)));return}Sr.uploadFile(t,ti(R),R,h,c,n,s,C,b==null?void 0:b.attachments)}if(x&&x.types.includes("text/plain")){const A=x.getData("text");if(A&&JJ(A)){e.preventDefault();const I=t.getState().files.filter(B=>B.isBigPaste).length,j="text/plain",R=n.formatMessage({id:"FileTile.pastedText.count",defaultMessage:"{count, plural, one {Pasted text.txt} other {Pasted text ({count}).txt}}"},{count:I+1}),O=new Blob([A],{type:j}),L=new File([O],R,{type:j});await di.yield(),Sr.uploadFile(t,ti(L),L,h,c,n,s,G(N({},C),{isBigPaste:!0})),V.logEventWithStatsig("Big Paste","chatgpt_web_big_paste",{text_length:K6e(A.length)})}Fe.hist(Ue.DEFAULT,"chatgpt_web_paste_text_length",[{key:"plan_type",value:(M=(T=Et())==null?void 0:T.planType)!=null?M:"unknown"}],A.length)}},K6e=t=>t<500?"under 500":t<=1e3?"500-1000":t<=5e3?"1001-5000":t<=1e4?"5000-10000":"10000+",Vut=(t,{canSubmit:e,isTextContentTooLong:n,toaster:s,requestCompletion:o})=>t.shiftKey||t.altKey||XJ()&&s7(t)?!1:(e?(t.preventDefault(),o(t)):n&&s.danger("The message you submitted was too long, please submit something shorter.",{hasCloseButton:!0}),!0),zut=(t,{isAutocompletionActive:e,clearAutocompletions:n,canAbortCompletion:s,clientThreadId:o,abortCompletion:r,isEmpty:a,hasTargetedContent:l,clearTargetedContent:c,hasSystemHint:u,removeSystemHint:d,hasSelectedTarget:f,removeSelectedTarget:m,hasNonDefaultModel:p,removeNonDefaultModel:g})=>s?(r(),V.logEventWithStatsig("Pause Completion","chatgpt_pause_completion",{threadId:Lt(o),currentLeafId:ve.getCurrentNode(At(o)).message.id,eventSource:"keyboard"}),!0):e!=null&&e()?(n(),!0):u?(d(),!0):p?(g(),!0):a&&l?(c(),!0):f?(m(),!0):!1,Y6e="916292397";function Z6e(t){const e=tt.getItem(Ie.FirstSeenCocoonAnnouncementBannerAt);if(e==null)return!1;const n=Number(e);if(Number.isNaN(n))return!1;const s=Or(n);return Ho(new Date,s)>t}function Q6e(t){const e=tt.getItem(Ie.CocoonBannerAnnouncementImpressions);if(e==null)return!1;const n=Number(e);return Number.isNaN(n)?!1:n>=t}function J6e(){const t=tt.getItem(Ie.LastSeenCocoonAnnouncementBannerAt);if(t==null)return!1;const e=Number(t);if(Number.isNaN(e))return!1;const n=Or(e);return Ho(new Date,n)<1}function X6e(){const t=mn(Y6e),e=t.get("max_days_visible",-1);if(e>=0&&Z6e(e))return!0;const n=t.get("max_impressions",-1);return!!(n>=0&&Q6e(n)||t.get("limit_one_impression_per_day",!1)&&J6e())}function eje(){return tt.getItem(Ie.HasDismissedCocoonAnnouncementBanner)!=null}function tje(){tt.setItem(Ie.HasDismissedCocoonAnnouncementBanner,!0)}function nje(){const t=tt.getItem(Ie.CocoonBannerAnnouncementImpressions),e=Number(t),n=Number.isNaN(e)?1:e+1;tt.setItem(Ie.CocoonBannerAnnouncementImpressions,n);const s=pa(new Date);tt.setItem(Ie.LastSeenCocoonAnnouncementBannerAt,s),tt.getItem(Ie.FirstSeenCocoonAnnouncementBannerAt)==null&&tt.setItem(Ie.FirstSeenCocoonAnnouncementBannerAt,s)}var cb,sI;function sje(){if(sI)return cb;sI=1;var t="Expected a function",e=NaN,n="[object Symbol]",s=/^\s+|\s+$/g,o=/^[-+]0x[0-9a-f]+$/i,r=/^0b[01]+$/i,a=/^0o[0-7]+$/i,l=parseInt,c=typeof zg=="object"&&zg&&zg.Object===Object&&zg,u=typeof self=="object"&&self&&self.Object===Object&&self,d=c||u||Function("return this")(),f=Object.prototype,m=f.toString,p=Math.max,g=Math.min,h=function(){return d.Date.now()};function _(C,w,k){var E,T,M,A,I,j,R=0,O=!1,L=!1,B=!0;if(typeof C!="function")throw new TypeError(t);w=S(w)||0,x(k)&&(O=!!k.leading,L="maxWait"in k,M=L?p(S(k.maxWait)||0,w):M,B="trailing"in k?!!k.trailing:B);function U(J){var Q=E,ne=T;return E=T=void 0,R=J,A=C.apply(ne,Q),A}function H(J){return R=J,I=setTimeout(z,w),O?U(J):A}function $(J){var Q=J-j,ne=J-R,ie=w-Q;return L?g(ie,M-ne):ie}function F(J){var Q=J-j,ne=J-R;return j===void 0||Q>=w||Q<0||L&&ne>=M}function z(){var J=h();if(F(J))return W(J);I=setTimeout(z,$(J))}function W(J){return I=void 0,B&&E?U(J):(E=T=void 0,A)}function Y(){I!==void 0&&clearTimeout(I),R=0,E=j=T=I=void 0}function K(){return I===void 0?A:W(h())}function Z(){var J=h(),Q=F(J);if(E=arguments,T=this,j=J,Q){if(I===void 0)return H(j);if(L)return I=setTimeout(z,w),U(j)}return I===void 0&&(I=setTimeout(z,w)),A}return Z.cancel=Y,Z.flush=K,Z}function x(C){var w=typeof C;return!!C&&(w=="object"||w=="function")}function b(C){return!!C&&typeof C=="object"}function y(C){return typeof C=="symbol"||b(C)&&m.call(C)==n}function S(C){if(typeof C=="number")return C;if(y(C))return e;if(x(C)){var w=typeof C.valueOf=="function"?C.valueOf():C;C=x(w)?w+"":w}if(typeof C!="string")return C===0?C:+C;C=C.replace(s,"");var k=r.test(C);return k||a.test(C)?l(C.slice(2),k?2:8):o.test(C)?e:+C}return cb=_,cb}var oje=sje();const oI=ps(oje);var nT=typeof window<"u"?v.useLayoutEffect:v.useEffect;function rje(t,e,n,s){const o=v.useRef(e);nT(()=>{o.current=e},[e]),v.useEffect(()=>{const r=window;if(!(r&&r.addEventListener))return;const a=l=>{o.current(l)};return r.addEventListener(t,a,s),()=>{r.removeEventListener(t,a,s)}},[t,n,s])}var aje=typeof window>"u";function yg(t,{defaultValue:e=!1,initializeWithValue:n=!0}={}){const s=l=>aje?e:window.matchMedia(l).matches,[o,r]=v.useState(()=>n?s(t):e);function a(){r(s(t))}return nT(()=>{const l=window.matchMedia(t);return a(),l.addListener?l.addListener(a):l.addEventListener("change",a),()=>{l.removeListener?l.removeListener(a):l.removeEventListener("change",a)}},[t]),o}function ije(t){const e=v.useRef(t);e.current=t,v.useEffect(()=>()=>{e.current()},[])}function lje(t,e=500,n){const s=v.useRef();ije(()=>{s.current&&s.current.cancel()});const o=v.useMemo(()=>{const r=oI(t,e,n),a=(...l)=>r(...l);return a.cancel=()=>{r.cancel()},a.isPending=()=>!!s.current,a.flush=()=>r.flush(),a},[t,e,n]);return v.useEffect(()=>{s.current=oI(t,e,n)},[t,e,n]),o}function Wut({threshold:t=0,root:e=null,rootMargin:n="0%",freezeOnceVisible:s=!1,initialIsIntersecting:o=!1,onChange:r}={}){var a;const[l,c]=v.useState(null),[u,d]=v.useState(()=>({isIntersecting:o,entry:void 0})),f=v.useRef();f.current=r;const m=((a=u.entry)==null?void 0:a.isIntersecting)&&s;v.useEffect(()=>{if(!l||!("IntersectionObserver"in window)||m)return;const h=new IntersectionObserver(_=>{const x=Array.isArray(h.thresholds)?h.thresholds:[h.thresholds];_.forEach(b=>{const y=b.isIntersecting&&x.some(S=>b.intersectionRatio>=S);d({isIntersecting:y,entry:b}),f.current&&f.current(y,b)})},{threshold:t,root:e,rootMargin:n});return h.observe(l),()=>{h.disconnect()}},[l,JSON.stringify(t),e,n,m,s]);const p=v.useRef(null);v.useEffect(()=>{var h;!l&&((h=u.entry)!=null&&h.target)&&!s&&!m&&p.current!==u.entry.target&&(p.current=u.entry.target,d({isIntersecting:o,entry:void 0}))},[l,u.entry,s,m,o]);const g=[c,!!u.isIntersecting,u.entry];return g.ref=g[0],g.isIntersecting=g[1],g.entry=g[2],g}function cje(){const t=v.useRef(!1);return v.useEffect(()=>(t.current=!0,()=>{t.current=!1}),[]),v.useCallback(()=>t.current,[])}var rI={width:void 0,height:void 0};function qut(t){const{ref:e,box:n="content-box"}=t,[{width:s,height:o},r]=v.useState(rI),a=cje(),l=v.useRef(N({},rI)),c=v.useRef(void 0);return c.current=t.onResize,v.useEffect(()=>{if(!e.current||typeof window>"u"||!("ResizeObserver"in window))return;const u=new ResizeObserver(([d])=>{const f=n==="border-box"?"borderBoxSize":n==="device-pixel-content-box"?"devicePixelContentBoxSize":"contentBoxSize",m=aI(d,f,"inlineSize"),p=aI(d,f,"blockSize");if(l.current.width!==m||l.current.height!==p){const h={width:m,height:p};l.current.width=m,l.current.height=p,c.current?c.current(h):a()&&r(h)}});return u.observe(e.current,{box:n}),()=>{u.disconnect()}},[n,e,a]),{width:s,height:o}}function aI(t,e,n){return t[e]?Array.isArray(t[e])?t[e][0][n]:t[e][n]:e==="contentBoxSize"?t.contentRect[n==="inlineSize"?"width":"height"]:void 0}var uje=typeof window>"u";function Kut(t={}){let{initializeWithValue:e=!0}=t;uje&&(e=!1);const[n,s]=v.useState(()=>e?{width:window.innerWidth,height:window.innerHeight}:{width:void 0,height:void 0}),o=lje(s,t.debounceDelay);function r(){(t.debounceDelay?o:s)({width:window.innerWidth,height:window.innerHeight})}return rje("resize",r),nT(()=>{r()},[]),n}const iI=er((t,e)=>st(!1),t=>t!=null?t:"default");function dje(t){"use forget";const e=D.c(9),n=vn(),s=t!=null?t:"default";let o;e[0]!==n||e[1]!==s?(o=()=>iI(n,s),e[0]=n,e[1]=s,e[2]=o):o=e[2];const r=X(o);let a;e[3]!==n||e[4]!==s?(a=()=>iI.set(n,s,!0),e[3]=n,e[4]=s,e[5]=a):a=e[5];const l=a;let c;return e[6]!==l||e[7]!==r?(c={isDismissed:r,dismiss:l},e[6]=l,e[7]=r,e[8]=c):c=e[8],c}function Yut(t){"use forget";return RG(t).shouldShow}function RG(t){"use forget";const e=D.c(7),{clientThreadId:n,entrypointData:s,isNewThread:o}=t,r=vn(),{isDismissed:a,dismiss:l}=dje(n),[c,u]=Ze(n,fje);let d;e[0]===Symbol.for("react.memo_cache_sentinel")?(d=xe("2095603192"),e[0]=d):d=e[0];const f=d,m=yg("(max-height: 660px)");let p;e[1]===Symbol.for("react.memo_cache_sentinel")?(p=eje(),e[1]=p):p=e[1];const g=p;let h;e[2]!==r?(h=r!=null&&X6e(),e[2]=r,e[3]=h):h=e[3];const x=!!s&&!!n&&!!o&&f&&!a&&!g&&!h&&!m&&!c&&!u;let b;return e[4]!==l||e[5]!==x?(b={shouldShow:x,dismiss:l},e[4]=l,e[5]=x,e[6]=b):b=e[6],b}function fje(t){var e;return[ve.hasUserMessage(t),(e=t==null?void 0:t.isLoading)!=null?e:!1]}const Zut=t=>{"use forget";const e=D.c(33),{entrypointData:n,clientThreadId:s,className:o,isNewThread:r}=t;let a;e[0]!==s||e[1]!==n||e[2]!==r?(a={clientThreadId:s,entrypointData:n,isNewThread:r},e[0]=s,e[1]=n,e[2]=r,e[3]=a):a=e[3];const{dismiss:l,shouldShow:c}=RG(a);let u,d;e[4]!==c?(u=()=>{c&&(nje(),V.logEventWithStatsig("ChatGPT Web Cocoon Announcement Banner Shown","chatgpt_web_cocoon_announcement_banner_shown"),Fe.count(Ue.COCOON,"chatgpt_web_cocoon_announcement_banner_shown"))},d=[c],e[4]=c,e[5]=u,e[6]=d):(u=e[5],d=e[6]),v.useEffect(u,d);let f;e[7]!==l?(f=()=>{l(),tje(),V.logEventWithStatsig("ChatGPT Web Cocoon Announcement Banner Dismissed","chatgpt_web_cocoon_announcement_banner_dismissed"),Fe.count(Ue.COCOON,"chatgpt_web_cocoon_announcement_banner_dismissed")},e[7]=l,e[8]=f):f=e[8];const m=f;let p;e[9]!==n.conversationId?(p=()=>{V.logEventWithStatsig("ChatGPT Web Cocoon Announcement Banner CTA Clicked","chatgpt_web_cocoon_announcement_banner_cta_clicked"),Fe.count(Ue.COCOON,"chatgpt_web_cocoon_announcement_banner_cta_clicked"),Qd("/c/"+n.conversationId)},e[9]=n.conversationId,e[10]=p):p=e[10];const g=p;if(!c)return null;let h;e[11]!==n.videoUrl?(h=i.jsx("div",{className:"relative h-16 w-16 overflow-hidden rounded-full bg-neutral-100",children:i.jsx("video",{src:n.videoUrl,autoPlay:!0,loop:!0,muted:!0,playsInline:!0,className:"absolute inset-0 h-full w-full object-cover"})}),e[11]=n.videoUrl,e[12]=h):h=e[12];let _;e[13]!==n.title?(_=i.jsx("div",{className:"flex items-center gap-1",children:i.jsx("p",{className:"text-token-text-primary text-base font-semibold",children:n.title})}),e[13]=n.title,e[14]=_):_=e[14];let x;e[15]!==n.caption?(x=i.jsx("p",{className:"text-token-text-primary text-sm",children:n.caption}),e[15]=n.caption,e[16]=x):x=e[16];let b;e[17]!==_||e[18]!==x?(b=i.jsxs("div",{children:[_,x]}),e[17]=_,e[18]=x,e[19]=b):b=e[19];let y;e[20]!==h||e[21]!==b?(y=i.jsx("div",{className:"flex w-full flex-wrap items-center gap-6 md:flex-nowrap",children:i.jsx("div",{className:"flex min-w-0 flex-1 items-center gap-6",children:i.jsxs("div",{className:"flex min-w-0 items-center gap-3 space-y-[2px]",children:[h,b]})})}),e[20]=h,e[21]=b,e[22]=y):y=e[22];const S=y;let C;e[23]===Symbol.for("react.memo_cache_sentinel")?(C=i.jsx(P,{id:"YB8gk2",defaultMessage:"Try it"}),e[23]=C):C=e[23];let w;e[24]!==g?(w=i.jsx(Se,{size:"large",color:"primary",onClick:g,children:C}),e[24]=g,e[25]=w):w=e[25];const k=w;let E;e[26]!==o?(E=q("w-full",o),e[26]=o,e[27]=E):E=e[27];let T;return e[28]!==S||e[29]!==k||e[30]!==m||e[31]!==E?(T=i.jsx(i.Fragment,{children:i.jsx(hn,{className:E,contentClassName:"flex-row items-center justify-between gap-4 md:gap-8",content:S,customCtas:k,onDismiss:m,verticalCta:!1})}),e[28]=S,e[29]=k,e[30]=m,e[31]=E,e[32]=T):T=e[32],T},Qut={PromptTextareaHeader:"z-20"},ai=t=>{var r;if(!t)return{conversationId:void 0,messageId:null};const e=Pt(t),n=At(e.id),s=ve.getLastAssistantMessage(n),o=e.serverId$();return o?{conversationId:o,messageId:(r=s==null?void 0:s.id)!=null?r:null}:{conversationId:void 0,messageId:null}};function OG({beaconId:t,metadata:e}){const{conversationId:n,messageId:s}=e!=null?e:{conversationId:void 0,messageId:null};return ue.safePost("/beacons/event",{requestBody:{beacon_id:t,event_type:w3.VIEW,conversation_id:n,message_id:s}})}function bg(t){"use forget";const e=D.c(2);let n;return e[0]!==t?(n={mutationFn:s=>OG({beaconId:s,metadata:t==null?void 0:t()})},e[0]=t,e[1]=n):n=e[1],zt(n)}function LG({beaconId:t,eventCtaId:e,metadata:n}){const{conversationId:s,messageId:o}=n!=null?n:{conversationId:void 0,messageId:null};return ue.safePost("/beacons/event",{requestBody:{beacon_id:t,event_type:w3.CLICK,event_cta_id:e,conversation_id:s,message_id:o}})}function sT(t){"use forget";const e=D.c(2);let n;return e[0]!==t?(n={mutationFn:s=>{const{beaconId:o,eventCtaId:r}=s;return LG({beaconId:o,eventCtaId:r,metadata:t==null?void 0:t()})}},e[0]=t,e[1]=n):n=e[1],zt(n)}function DG({beaconId:t,metadata:e}){const{conversationId:n,messageId:s}=e!=null?e:{conversationId:void 0,messageId:null};return ue.safePost("/beacons/event",{requestBody:{beacon_id:t,event_type:w3.DISMISS,conversation_id:n,message_id:s}})}function vg(t){"use forget";const e=D.c(2);let n;return e[0]!==t?(n={mutationFn:s=>DG({beaconId:s,metadata:t==null?void 0:t()})},e[0]=t,e[1]=n):n=e[1],zt(n)}function BG(t){"use forget";const e=D.c(18),{imageStyles:n,title:s,description:o,ctaText:r,onCtaClick:a,onDismiss:l}=t;let c;e[0]!==o?(c=i.jsx("p",{className:"mb-3",children:o}),e[0]=o,e[1]=c):c=e[1];let u;e[2]!==r||e[3]!==a?(u=i.jsx(Se,{color:"primary",onClick:a,children:r}),e[2]=r,e[3]=a,e[4]=u):u=e[4];let d;e[5]!==c||e[6]!==u?(d=i.jsxs("div",{className:"relative",children:[c,u]}),e[5]=c,e[6]=u,e[7]=d):d=e[7];const f=d;let m;e[8]===Symbol.for("react.memo_cache_sentinel")?(m=q("hidden flex-1 flex-row gap-2 @lg/images-promo-banner:flex @lg/images-promo-banner:[&>*:nth-child(n+3)]:hidden @2xl/images-promo-banner:[&>*:nth-child(n+3)]:flex @2xl/images-promo-banner:[&>*:nth-child(n+5)]:hidden"),e[8]=m):m=e[8];let p;e[9]!==n?(p=n.map(mje),e[9]=n,e[10]=p):p=e[10];let g;e[11]!==p?(g=i.jsx("div",{className:m,children:p}),e[11]=p,e[12]=g):g=e[12];const h=g;let _;return e[13]!==f||e[14]!==h||e[15]!==l||e[16]!==s?(_=i.jsx(hn,{className:"@container/images-promo-banner max-w-[768px]",contentClassName:"md:!gap-4 gap-4 flex-row items-center",title:s,content:f,customCtas:h,onDismiss:l}),e[13]=f,e[14]=h,e[15]=l,e[16]=s,e[17]=_):_=e[17],_}function mje(t){const{id:e,imageUrl:n,title:s}=t;return i.jsx(pje,{id:e,imageUrl:n,title:s},e)}function pje(t){"use forget";const e=D.c(8),{imageUrl:n,title:s}=t;let o;e[0]!==n||e[1]!==s?(o=i.jsx("img",{className:"corner-superellipse/1.1 aspect-square h-20 w-20 rounded-lg object-cover",src:n,alt:s,width:80,height:80}),e[0]=n,e[1]=s,e[2]=o):o=e[2];let r;e[3]!==s?(r=i.jsx("span",{className:"text-body-small text-token-text-primary opacity-50",children:s}),e[3]=s,e[4]=r):r=e[4];let a;return e[5]!==o||e[6]!==r?(a=i.jsxs("div",{className:"flex max-w-24 flex-col items-center gap-2 text-center",children:[o,r]}),e[5]=o,e[6]=r,e[7]=a):a=e[7],a}const i1="images_homepage_promo",gje="Images Homepage Promo Banner",hje="container",lI={beacon_id:i1,beacon_name:gje,beacon_type:hje},ub=we({title:{id:"j081C7",defaultMessage:"Better, faster image creation is here"},body:{id:"E4fwCv",defaultMessage:"Give it a whirl with one of our curated styles or imagine something from scratch."},cta:{id:"EiNplX",defaultMessage:"Start creating"}});function Jut(t){"use forget";var b,y,S,C;const e=D.c(17),{clientThreadId:n}=t,s=X(yje);let o;e[0]!==((b=s.data)==null?void 0:b.styles)?(o=(S=(y=s.data)==null?void 0:y.styles)==null?void 0:S.filter(xje).map(_je),e[0]=(C=s.data)==null?void 0:C.styles,e[1]=o):o=e[1];const r=o,a=s.status==="success"&&r&&r.length!==0,l=v.useRef(!1);let c,u;if(e[2]!==n||e[3]!==a?(c=()=>{!a||l.current||(V.logStructuredEvent(E1,{type:T1.CHATGPT_IMAGE_HOME_NUX_TYPE_IMPRESSION}),OG({beaconId:i1,metadata:ai(n)}),l.current=!0)},u=[a,n],e[2]=n,e[3]=a,e[4]=c,e[5]=u):(c=e[4],u=e[5]),v.useEffect(c,u),!a)return null;let d;e[6]!==n?(d=()=>{V.logStructuredEvent(E1,{type:T1.CHATGPT_IMAGE_HOME_NUX_TYPE_CLICK}),Qd("/images",{state:{source:a3.CHATGPT_IMAGE_HOME_NAVIGATION_SOURCE_TYPE_HOME_NUX}}),V.logEventWithStatsig("Web Beacon Clicked","chatgpt_web_beacon_clicked",G(N({},lI),{action_id:"images_homepage_promo_cta_click",action_type:"primary",action_enum:"primary"})),LG({beaconId:i1,eventCtaId:"images_homepage_promo_cta_click",metadata:ai(n)}),Wo.dismiss()},e[6]=n,e[7]=d):d=e[7];const f=d;let m;e[8]!==n?(m=()=>{V.logEventWithStatsig("Web Beacon Dismissed","chatgpt_web_beacon_dismissed",lI),DG({beaconId:i1,metadata:ai(n)}),Wo.dismiss()},e[8]=n,e[9]=m):m=e[9];const p=m;let g,h,_;e[10]===Symbol.for("react.memo_cache_sentinel")?(g=i.jsx(P,N({},ub.title)),h=i.jsx(P,N({},ub.body)),_=i.jsx(P,N({},ub.cta)),e[10]=g,e[11]=h,e[12]=_):(g=e[10],h=e[11],_=e[12]);let x;return e[13]!==f||e[14]!==p||e[15]!==r?(x=i.jsx(BG,{imageStyles:r,title:g,description:h,ctaText:_,onCtaClick:f,onDismiss:p}),e[13]=f,e[14]=p,e[15]=r,e[16]=x):x=e[16],x}function _je(t){var e,n,s,o;return{id:t.id,imageUrl:(s=(n=(e=t.variants)==null?void 0:e[0])==null?void 0:n.url)!=null?s:"",title:(o=t.title)!=null?o:""}}function xje(t){return t.variants&&t.variants.length>0&&t.title}function yje(){return sx()}const bje="/cdn/assets/logo-b4qsr7qc.webp",vje={src:bje},Sje=()=>{"use forget";const t=D.c(8),e=X(o7),n=te();let s;t[0]!==n?(s=n.formatMessage(cI.separateModeSetting),t[0]=n,t[1]=s):s=t[1];let o;t[2]!==n?(o=n.formatMessage(cI.separateModeSettingDescription),t[2]=n,t[3]=o):o=t[3];let r;return t[4]!==e||t[5]!==s||t[6]!==o?(r=i.jsx(Wi,{label:s,enabled:e,onChange:Cje,description:o}),t[4]=e,t[5]=s,t[6]=o,t[7]=r):r=t[7],r},cI=we({separateModeSetting:{id:"settings.voice.separateModeSetting",defaultMessage:"Separate Voice"},separateModeSettingDescription:{id:"settings.voice.separateModeSettingDescription",defaultMessage:"Keep ChatGPT Voice in a separate full screen, without real time transcripts and visuals."}});function Cje(t){Ut.settings.separateModeChanged({separateMode:t}),o7.set(t)}function wje({voice:t,voiceSpeed:e}){const[n,s]=v.useState(!1),o=h3(),r=t.voice,a=t.preview_url,l=v.useRef({playPromise:null}).current,c=_3(p=>p.isPlaying&&p.sourceUrl===a);v.useEffect(()=>{o&&o.setSpeed(e)},[o,e]);const u=Dt(),d=v.useCallback(async()=>{if(!o)return;const p={voice:r,source:a};Ut.previews.click(p);try{s(!0),o.changeSource(a),l.playPromise=o.play(),s(!1)}catch(g){Ut.previews.error(g,p),u.danger(qe({id:"DeIYxH",defaultMessage:"Something went wrong playing preview"}),{toastId:"voice_preview_player_play_error"})}},[o,a,r,l,u]),f=v.useCallback(()=>{o&&(l.playPromise?l.playPromise.then(()=>{o.stop(),l.playPromise=null}):o.stop())},[o,l]),m=v.useCallback(()=>{c?f():n||d()},[f,d,n,c]);return v.useEffect(()=>()=>{c&&f()},[t,c,f]),i.jsx(Se,{onClick:m,color:"secondary",className:"flex flex-row flex-nowrap items-center gap-1 border-none font-normal",loading:n,icon:c?qwe:Q$,children:c?i.jsx(P,{id:"yGpEMJ",defaultMessage:"Stop"}):i.jsx(P,{id:"JwYDVp",defaultMessage:"Play"})})}const FS=.5,US=2,FG=.1,UG=Math.round((US-FS)/FG),kje=Array.from({length:UG+1},(t,e)=>e),HG=2,l1=8,uI=(l1-HG)/2,Eje=t=>{const e=Number(t);return isNaN(e)?1:e};function Tje(){return xe("174366048")}function Mje(){return xe("3302173089")}const oT=()=>{const{value:t}=Cf(Ft.VoiceEnabled);return t!==!1};function Xut(){const t=Tje(),e=fl(),n=Mje(),{isLoading:s,value:o,setValue:r}=Cf(Ft.VoiceSpeed),a=Eje(o),l=oT(),c=eX();if(!t)return null;const u=(e==null?void 0:e.length)&&!(e!=null&&e.includes(Qs.VideoScreenSharing));return i.jsxs(i.Fragment,{children:[l&&i.jsxs(i.Fragment,{children:[i.jsx(hr,{children:i.jsx(Ije,{})}),i.jsx(hr,{children:i.jsx(Aje,{voiceSpeed:a})}),c&&i.jsx(hr,{children:i.jsx(Sje,{})})]}),n&&l&&i.jsx(hr,{children:i.jsx(Nje,{voiceSpeed:a,setVoiceSpeed:r,isLoading:s})}),u&&i.jsx(hr,{children:i.jsx(jje,{})})]})}function Cf(t,e=!1){const{data:n,isLoading:s}=bo(t)||{},o=pl(e);return{isLoading:s,value:n,setValue:r=>{o.mutate({setting:t,value:r})}}}function Aje({voiceSpeed:t}){const{isLoading:e,value:n,setValue:s}=Cf(Ft.VoiceName),o=q$(),r=W$(),a=e?"":K$(n,r),l=o.find(({voice:c})=>c===a);return i.jsx(i.Fragment,{children:i.jsx("div",{className:"flex flex-col flex-nowrap gap-2",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("div",{children:i.jsx(P,{id:"speechSettings.content.voice",defaultMessage:"Voice"})}),i.jsxs("div",{className:"flex flex-row flex-nowrap items-center gap-1",children:[l?i.jsxs(i.Fragment,{children:[i.jsx(wje,{voice:l,voiceSpeed:t}),i.jsx("div",{className:"h-4 border-s"})]}):null,i.jsxs(sn.Root,{value:a,onValueChange:c=>s(c),disabled:e,children:[i.jsxs(sn.Trigger,{children:[i.jsx(sn.Value,{}),i.jsx(sn.Icon,{})]}),i.jsx(sn.Portal,{children:i.jsx(sn.Content,{children:o.map(({voice:c,name:u})=>i.jsx(sn.Item,{value:c,children:u},c))})})]})]})]})})})}function Nje({voiceSpeed:t,setVoiceSpeed:e,isLoading:n}){const[s,o]=v.useState(t);return v.useEffect(()=>o(t),[t]),i.jsxs("div",{className:"flex w-full flex-col gap-2",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("div",{children:i.jsx(P,{id:"speechSettings.content.voiceSpeed",defaultMessage:"Voice speed"})}),i.jsx("div",{className:"text-token-text-secondary tabular-nums",children:i.jsx(P,{id:"speechSettings.content.voiceSpeed.current",defaultMessage:"{value}x",values:{value:s.toFixed(1)}})})]}),i.jsx("div",{className:"w-full",children:i.jsx("div",{className:"flex items-center gap-3",children:i.jsxs(VE,{className:"relative flex w-full items-center",min:FS,max:US,step:FG,value:[s],disabled:n,onValueChange:r=>o(r[0]),onValueCommit:r=>{const a=r[0],l=Math.min(US,Math.max(FS,a));e(l.toString())},children:[i.jsxs(zE,{className:"relative h-[4px] grow rounded-full",children:[i.jsx("div",{className:"bg-token-text-tertiary/30 absolute top-0 bottom-0 rounded-full",style:{left:uI,right:uI}}),i.jsx("div",{className:"pointer-events-none absolute top-0 bottom-0",style:{left:l1/2,right:l1/2},children:kje.map(r=>i.jsx("div",{className:"bg-token-text-secondary/30 absolute top-[-2px] bottom-[-2px] rounded",style:{width:HG,left:"".concat(r/UG*100,"%"),transform:"translateX(-50%)"}},r))})]}),i.jsx(WE,{className:"bg-token-bg-primary border-token-bg-secondary block h-[24px] cursor-pointer rounded-full border focus:outline-none",style:{width:l1}})]})})})]})}function Ije(){const{isLoading:t,value:e,setValue:n}=Cf(Ft.VoiceMainLanguage);return i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("div",{children:i.jsx(P,{id:"speechSettings.content.language",defaultMessage:"Spoken language"})}),i.jsxs(sn.Root,{value:t?"":e!=null?e:rm.Auto,onValueChange:s=>n(s),disabled:t,children:[i.jsxs(sn.Trigger,{children:[i.jsx(sn.Value,{}),i.jsx(sn.Icon,{})]}),i.jsx(sn.Portal,{children:i.jsxs(sn.Content,{position:"popper",style:{maxHeight:"calc(var(--radix-select-content-available-height) - 5rem)"},children:[i.jsx(sn.Item,{value:rm.Auto,children:i.jsx(P,{id:"speechSettings.content.autoDetect",defaultMessage:"Auto-detect"})}),Object.entries(rm).filter(([s,o])=>o!==rm.Auto).map(([s,o])=>i.jsx(sn.Item,{value:o,className:"capitalize",children:s},o))]})})]})]}),i.jsx(tX,{children:i.jsx(P,{id:"speechSettings.content.autoDetectDescription",defaultMessage:"For best results, select the language you mainly speak. If it's not listed, it may still be supported via auto-detection."})})]})}function jje(){const t=te();return i.jsx(Wi,{label:t.formatMessage(dI.voiceAndScreenSharing),enabled:!1,onChange:()=>{},disabled:!0,description:t.formatMessage(dI.voiceAndScreenSharingDescription)})}const dI=we({voiceAndScreenSharing:{id:"9dnywk",defaultMessage:"Voice and screen sharing"},voiceAndScreenSharingDescription:{id:"wjwSas",defaultMessage:"Sharing your screen and video while in voice mode has been disabled by your workspace administrator."}}),Pje=()=>{"use forget";const t=D.c(12),{value:e,setValue:n,isLoading:s}=Cf(Ft.VoiceEnabled),o=te();let r;t[0]!==o?(r=o.formatMessage(fI.voiceEnabledSetting),t[0]=o,t[1]=r):r=t[1];const a=e!=null?e:!0;let l;t[2]!==n?(l=d=>{n(d)},t[2]=n,t[3]=l):l=t[3];let c;t[4]!==o?(c=o.formatMessage(fI.voiceEnabledSettingDescription),t[4]=o,t[5]=c):c=t[5];let u;return t[6]!==s||t[7]!==r||t[8]!==a||t[9]!==l||t[10]!==c?(u=i.jsx(Wi,{label:r,isLoading:s,enabled:a,onChange:l,description:c}),t[6]=s,t[7]=r,t[8]=a,t[9]=l,t[10]=c,t[11]=u):u=t[11],u};function edt({disabledTools:t,onDisabledToolsChanged:e}){var _;v.useEffect(()=>{V.logEvent("User Context GPT-4 Capabilities Shown")},[]);const n=Et(),s=(_=n==null?void 0:n.isEnterprisey())!=null?_:!1,o=!b1(Qs.BrowsingAvailable)&&s,r=!xe("934056609"),a=xe("3199592968"),l=te(),c=x=>{const b=t.includes(x)?t.filter(y=>y!==x):[...t,x];e(b)},u=fl(),d=!b1(Qs.Canvas)&&s;var f;u!=null&&u.includes(Qs.SearchTool)&&!u.includes(Qs.SearchToolHoldout)?f=Vf({tool:ds.BROWSER,label:l.formatMessage({id:"userContextModal.tools.web",defaultMessage:"Web search"}),disabledTooltipLabel:l.formatMessage({id:"4WldgK",defaultMessage:"Web search is disabled by your organization"}),description:l.formatMessage({id:"userContexModal.tools.webSearchTooltip",defaultMessage:"Let ChatGPT automatically search the web for answers."}),enabled:!t.includes(ds.BROWSER)&&!o,handleToolClick:c,disabled:o}):f=Vf({tool:ds.BROWSER,label:l.formatMessage({id:"userContextModal.tools.browse",defaultMessage:"Browsing"}),disabledTooltipLabel:l.formatMessage({id:"5SuA2c",defaultMessage:"Browsing is disabled by your organization"}),description:l.formatMessage({id:"userContexModal.tools.browserTooltip",defaultMessage:"Let ChatGPT browse the internet to find answers."}),enabled:!t.includes(ds.BROWSER)&&!o,handleToolClick:c,disabled:o});const m=a?null:Vf({tool:ds.PYTHON,label:l.formatMessage({id:"userContextModal.tools.codeInterpreter.1",defaultMessage:"Code"}),description:l.formatMessage({id:"userContextModal.tools.codeInterpreterTooltip",defaultMessage:"Let ChatGPT execute code using Code Interpreter."}),enabled:!t.includes(ds.PYTHON),handleToolClick:c}),p=Vf({tool:ds.CANMORE,label:l.formatMessage({id:"FW2C7Y",defaultMessage:"Canvas"}),description:l.formatMessage({id:"zPYZ4h",defaultMessage:"Collaborate with ChatGPT on text and code."}),enabled:!t.includes(ds.CANMORE),handleToolClick:c}),g=Vf({tool:ds.ADVANCED_VOICE,label:l.formatMessage({id:"eHCnkb",defaultMessage:"Advanced voice"}),description:l.formatMessage({id:"J8Xfwe",defaultMessage:"Have more natural conversations in Voice."}),enabled:!t.includes(ds.ADVANCED_VOICE),handleToolClick:c}),h=oT();return i.jsxs(i.Fragment,{children:[f,m,!d&&p,i.jsx(hr,{children:i.jsx(Pje,{})}),r&&h&&g]})}function Vf({tool:t,label:e,disabledTooltipLabel:n,description:s,enabled:o,handleToolClick:r,disabled:a}){return i.jsx(hr,{children:i.jsx(Wi,{label:e,enabled:o,onChange:()=>r(t),toggleTooltip:a&&n,description:s,disabled:a})})}const fI=we({voiceEnabledSetting:{id:"oFt0Pe",defaultMessage:"ChatGPT Voice"},voiceEnabledSettingDescription:{id:"4Q4oh4",defaultMessage:"Enable Voice in ChatGPT"}}),Rje=we({separateModeLabel:{id:"IntegratedVoiceMode.settings.separateModeLabel",defaultMessage:"Separate mode"}}),Oje=()=>!tt.getItem("hasSeenIntegratedVoiceNuxBefore"),Lje=()=>{tt.setItem("hasSeenIntegratedVoiceNuxBefore",!0)},tdt=()=>{"use forget";const t=D.c(3),[e,n]=v.useState(Bje);let s;t[0]===Symbol.for("react.memo_cache_sentinel")?(s=()=>{n(!1),Lje()},t[0]=s):s=t[0];const o=s;let r;return t[1]!==e?(r=e?i.jsx(Dje,{markAsViewed:o}):null,t[1]=e,t[2]=r):r=t[2],r};function Dje(t){"use forget";const e=D.c(9),{markAsViewed:n}=t,s=te();let o;e[0]!==s?(o=s.formatMessage(Rje.separateModeLabel),e[0]=s,e[1]=o):o=e[1];const r=o;let a;e[2]===Symbol.for("react.memo_cache_sentinel")?(a=i.jsx("div",{className:"flex-column flex min-w-6 pt-0.5",children:i.jsx("img",{className:"h-6 w-6",src:vje.src,alt:""})}),e[2]=a):a=e[2];let l;e[3]===Symbol.for("react.memo_cache_sentinel")?(l=i.jsx("div",{className:"text-md mb-0.5 font-semibold",children:i.jsx(P,N({},mI.integratedVoiceModeNuxBannerTitle))}),e[3]=l):l=e[3];let c;e[4]!==r?(c=i.jsxs("div",{className:"flex flex-row gap-4",children:[a,i.jsxs("div",{className:"flex-column",children:[l,i.jsx("span",{className:"text-token-text-secondary",children:i.jsx(P,G(N({},mI.integratedVoiceModeNuxBannerDescription),{values:{separateModeLabel:r}}))})]})]}),e[4]=r,e[5]=c):c=e[5];const u=c;let d;return e[6]!==u||e[7]!==n?(d=i.jsx(hn,{type:"info",onDismiss:n,content:u}),e[6]=u,e[7]=n,e[8]=d):d=e[8],d}const mI=we({integratedVoiceModeNuxBannerTitle:{id:"IntegratedVoiceMode.nux.banner.title",defaultMessage:"Voice is now integrated in chat"},integratedVoiceModeNuxBannerDescription:{id:"IntegratedVoiceMode.nux.banner.description",defaultMessage:"Follow the conversation in real time with transcripts and visuals like links, maps, and weather. Switch back anytime by selecting {separateModeLabel} in Settings."}});function Bje(){return Oje()}function ndt(){const t=bt();return i.jsx(hn,{primaryCtaText:i.jsx(P,{id:"k/qPdM",defaultMessage:"Manage tasks"}),onPrimaryCtaClick:()=>{t("/tasks")},title:i.jsx(P,{id:"mYNRrn",defaultMessage:"Youve reached your limit for scheduled tasks."}),content:i.jsx(P,{id:"Bwsb55",defaultMessage:"To schedule new ones, pause some of your existing tasks first."})})}const sdt=re(me,"48c914",20,20,!0),HS=We.hasSeenGoldenHourAnnouncement;function Fje(){"use forget";var S,C,w;const t=D.c(6);let e;t[0]===Symbol.for("react.memo_cache_sentinel")?(e=hs(),t[0]=e):e=t[0];const n=e,s=Et(),o=_n();let r;t[1]!==o?(r=o!=null&&J0(o),t[1]=o,t[2]=r):r=t[2];const a=r,{eligible:l,isLoading:c}=Ct(HS),u=yl();let d;t[3]===Symbol.for("react.memo_cache_sentinel")?(d=oO(),t[3]=d):d=t[3];const f=d;let m;t[4]!==u?(m={includeMemoryEntries:!1,enabled:u},t[4]=u,t[5]=m):m=t[5];const{data:p}=Vp(m),g=(S=p==null?void 0:p.memoryFullPct)!=null?S:0,h=(C=s==null?void 0:s.isFree())!=null?C:!1,_=(w=s==null?void 0:s.isGo())!=null?w:!1,y=a||g>=(h||_?95:90);return l&&!c&&f&&y&&!n}function odt(){"use forget";const t=D.c(3),e=Fje(),{eligible:n}=Ct(HS);let s;return t[0]!==e||t[1]!==n?(s=()=>{!e||!n||(Fe.count(Ue.GOLDEN_HOUR,"announcement_banner.implicit_close"),kt(HS))},t[0]=e,t[1]=n,t[2]=s):s=t[2],s}const $G=We.HasSeenAdvancedVoiceOnMobile,Uje="https://chatgpt.com/update-app",pI="https://chatgpt.com/update-app?origin=qr";function Hje(){const t=Et(),e=xe("989108178");return t!=null&&e}function rdt(t){var a;const e=Hje(),{eligible:n,isLoading:s}=Ct($G);return{eligible:!(!e||!n||((a=t.conversationMode)==null?void 0:a.kind)!==Bt.PrimaryAssistant)&&!s}}const $je=3;function Gje(t){let e=tt.getItem(Ie.AdvancedVoiceOnMobileAnnouncementCount);Array.isArray(e)||(e=[]);const n=new Set(e);return t&&n.add(t),e=[...n],tt.setItem(Ie.AdvancedVoiceOnMobileAnnouncementCount,e),e.length}function adt({onClose:t,clientThreadId:e}){const n=v.useCallback(()=>{kt($G)},[]),s=Un(e);v.useEffect(()=>{const l=Gje(s);l>$je&&(n(),ft.logEvent("chatgpt_advanced_voice_on_mobile_announcement_limit_reached",l)),V.logEvent("Advanced Voice on Mobile: Announcement Shown"),ft.logEvent("chatgpt_advanced_voice_on_mobile_announcement_shown"),V.logUpsellOrModalEvent(qn,{eventId:"advanced_voice_on_mobile_announcement_shown",type:Kn.UPSELL_OR_MODAL_TYPE_NUX_BANNER})},[s,n]);const o=v.useCallback(()=>{n(),V.logEvent("Advanced Voice on Mobile: Dismissed Announcement"),ft.logEvent("chatgpt_advanced_voice_on_mobile_announcement_dismissed"),t&&t()},[n,t]),a={markAsDownloaded:v.useCallback(()=>{V.logEvent("Advanced Voice on Mobile: Link Clicked"),ft.logEvent("chatgpt_advanced_voice_on_mobile_announcement_download_clicked"),n(),t&&t()},[n,t]),markAsViewed:o};return i.jsx(zje,N({},a))}function Vje(){window.open(Uje,"_blank")}function zje({markAsDownloaded:t,markAsViewed:e}){const n=te(),[s,o]=v.useState(!1),r=v.useCallback(()=>{Vje(),t()},[t]),a=i.jsx("div",{className:"grow flex-row",children:i.jsxs("div",{className:"flex-column",children:[i.jsx("div",{className:"mb-0.5 font-semibold",children:i.jsx(P,N({},_u.advancedVoiceOnMobileBannerTitle))}),i.jsx("span",{className:"text-token-text-secondary",children:i.jsx(P,N({},_u.advancedVoiceOnMobileBannerDescription))})]})}),l=!Ap(),c=Gd();let u;return l?c?u=Object.freeze({primaryCtaQrLink:pI,onPrimaryCtaQrClick:()=>o(!0)}):u=Object.freeze({onSecondaryCtaClick:()=>o(!0),secondaryCtaText:n.formatMessage(_u.advancedVoiceOnMobileButtonScanCode)}):u=Object.freeze({onPrimaryCtaClick:r,primaryCtaText:n.formatMessage(_u.advancedVoiceOnMobileButtonDownload)}),i.jsxs(i.Fragment,{children:[i.jsx(hn,G(N({},u),{onDismiss:e,content:a})),l&&i.jsx(en,{testId:"modal-advanced-voice-on-mobile-qr",size:"custom",className:"w-[328px] max-w-[328px]",title:n.formatMessage(_u.advancedVoiceOnMobileQRModalTitle),isOpen:s,showCloseButton:!0,onClose:()=>o(!1),type:"success",children:i.jsxs("div",{className:"flex flex-col items-center",children:[i.jsx(cH,{className:"m-[24px] mt-[0px]",size:280,value:pI}),i.jsx("div",{className:"text-token-text-primary text-start",children:i.jsx(P,N({},_u.advancedVoiceOnMobileQRModalDescription))})]})})]})}const _u=we({advancedVoiceOnMobileBannerTitle:{id:"AdvancedVoiceOnMobile.banner.title",defaultMessage:"Download the latest iOS or Android app to try Voice"},advancedVoiceOnMobileBannerDescription:{id:"AdvancedVoiceOnMobile.banner.description",defaultMessage:"Get more natural, real-time conversations with advanced voice. Senses and responds to humor, sarcasm, interruptions, and more."},advancedVoiceOnMobileButtonDownload:{id:"AdvancedVoiceOnMobile.button.download",defaultMessage:"Download"},advancedVoiceOnMobileButtonScanCode:{id:"AdvancedVoiceOnMobile.button.scancode",defaultMessage:"Scan code"},advancedVoiceOnMobileButtonClose:{id:"AdvancedVoiceOnMobile.button.close",defaultMessage:"Close"},advancedVoiceOnMobileQRModalTitle:{id:"AdvancedVoiceOnMobile.qrmodal.title",defaultMessage:"Download the app"},advancedVoiceOnMobileQRModalDescription:{id:"AdvancedVoiceOnMobile.qrmodal.description",defaultMessage:"Scan the QR code on your phone to download the ChatGPT app."}}),GG="1696863369",Wje=We.UseSidekick,qje=We.SidekickLauncherOnboarding,Kje="https://help.openai.com/en/articles/9275200",Yje="https://persistent.oaistatic.com/sidekick/public/ChatGPT_Desktop_public_latest.dmg",VG="1697140512",Zje=We.UseSidetron,Qje=We.hasSeenWindowsAppOnboarding,Jje="https://help.openai.com/en/articles/9982051",Xje="https://apps.microsoft.com/detail/9nt1r1c2hh7j",zG="download";function WG(t,e){const n=Et(),s=Je(t).get(e,!1);return n!=null&&s}function ePe(){return WG(GG,"has_sidekick_access")}function tPe(){return WG(VG,"can_download_sidetron")}function rT(){const t=ePe(),e=tPe();return{isSidekickAvailable:t,isSidetronAvailable:e,isDesktopAppAvailable:t||e}}function nPe(t){return t===zG}function sPe(){const t=bt(),{hash:e}=jn(),n=nPe(e.slice(1));return{openModal:()=>{t({hash:zG})},closeModal:()=>{t({hash:""})},isOpen:n}}function idt(t){var m;const e=rT(),{isDesktopAppAvailable:n}=e,s=aT(e),r=Je(s.statsigLayerName).get("show_nux_banner",!1),{eligible:a,isLoading:l}=Ct(s.downloadAnnouncement),{eligible:c,isLoading:u}=Ct(s.onboardingAnnouncement);return{eligible:!(!a||!c||!n||((m=t.conversationMode)==null?void 0:m.kind)!==Bt.PrimaryAssistant)&&r,isLoading:u||l}}function ldt({onClose:t}){const e=rT(),n=aT(e);v.useEffect(()=>{V.logEvent(n.analyticsBannerShown),ft.logEvent(n.statsigBannerShown),V.logUpsellOrModalEvent(qn,{eventId:"".concat(n.downloadAnnouncement,"_banner_shown"),type:Kn.UPSELL_OR_MODAL_TYPE_NUX_BANNER})},[n.analyticsBannerShown,n.statsigBannerShown,n.downloadAnnouncement]);const s=v.useCallback(()=>{kt(n.downloadAnnouncement),V.logEvent(n.analyticsBannerDismissed),ft.logEvent(n.statsigBannerDismissed),t&&t()},[t,n.analyticsBannerDismissed,n.statsigBannerDismissed,n.downloadAnnouncement]),o=v.useCallback(()=>{V.logEvent(n.analyticsBannerDownloadClicked),ft.logEvent(n.statsigBannerDownloadClicked),kt(n.downloadAnnouncement),t&&t()},[t,n.analyticsBannerDownloadClicked,n.statsigBannerDownloadClicked,n.downloadAnnouncement]),r=G(N({},n),{isAppAvailable:e.isDesktopAppAvailable,markAsDownloaded:o,markAsViewed:s});return i.jsx(aPe,N({},r))}function oPe(t){window.open(t,"_blank")}function aT(t){return t.isSidekickAvailable?dPe:fPe}function rPe(t){return t.bannerTitle}function cdt(){const{closeModal:t,isOpen:e}=sPe(),n=rT(),{isDesktopAppAvailable:s}=n,o=aT(n),r=v.useMemo(()=>({isDesktopAppAvailable:s}),[s]),a=()=>{V.logEvent(o.analyticsModalClosed,r),ft.logEvent(o.statsigModalClosed),t()},l=()=>{V.logEvent(o.analyticsModalDownloadClicked,r),ft.logEvent(o.statsigModalDownloadClicked),t()};if(v.useEffect(()=>{e&&(V.logEvent(o.analyticsModalShown,N({},r)),ft.logEvent(o.statsigModalShown))},[r,e,o.analyticsModalShown,o.statsigModalShown]),!e)return null;const c=G(N({},o),{isAppAvailable:n.isDesktopAppAvailable,markAsDownloaded:l,markAsViewed:a});return i.jsx(iPe,N({},c))}function aPe({downloadUrl:t,markAsDownloaded:e,markAsViewed:n,messages:s,learnMoreUrl:o}){const r=te(),a=v.useCallback(()=>{oPe(t),e()},[e,t]),l=i.jsx(P,N({},rPe(s))),c=i.jsx(P,N({},s.bannerContent)),u=i.jsxs("div",{className:"grow",children:[i.jsx("div",{className:"mb-0.5 font-semibold",children:l}),i.jsx("span",{className:"text-token-text-secondary",children:c}),i.jsxs(Fs,{href:o,className:"ms-2 gap-1 font-medium",children:[i.jsx(P,N({},s.learnMore)),i.jsx(_p,{className:"icon-sm inline-block"})]})]});return i.jsx(hn,{onPrimaryCtaClick:a,primaryCtaText:r.formatMessage(s.download),onDismiss:n,content:u})}function iPe({downloadUrl:t,markAsDownloaded:e,markAsViewed:n,isAppAvailable:s,messages:o,learnMoreUrl:r}){const a=o.modalTitle,l=i.jsx(P,N({},a)),c=i.jsx(P,N({},o.modalContent)),u=i.jsx("div",{className:"mt-2",children:i.jsxs(Fs,{href:r,className:"flex items-center gap-1 font-medium",children:[i.jsx(P,N({},o.learnMore)),i.jsx(_p,{className:"icon-sm"})]})}),d=i.jsx(Se,{as:"link",to:t,color:"primary",onClick:e,openNewTab:!0,children:i.jsx(P,N({},o.download))}),f=i.jsx(Se,{color:"secondary",onClick:n,children:i.jsx(P,N({},uPe.close))}),m=s?d:f,p=s?f:void 0;return i.jsx(I8,{onClose:n,title:l,description:c,actionButton:m,cancelButton:p,moreInfoLink:u})}const lPe=we({bannerTitle:{id:"SidekickOnboarding.bannerTitle",defaultMessage:"ChatGPT is now available for macOS 14+ with Apple Silicon"},bannerContent:{id:"SidekickOnboarding.banner_content_3",defaultMessage:"Get faster access to ChatGPT with the Option + Space shortcut, and use Voice to get hands-free answers while you work."},modalTitle:{id:"SidekickOnboarding.modalTitle",defaultMessage:"ChatGPT is available for macOS 14+ with Apple Silicon"},modalContent:{id:"SidekickOnboarding.modal_content_eligible",defaultMessage:"Quickly access ChatGPT from anywhere on your computer with the Option + Space shortcut. Share screenshots, upload files, and use Voice to chat with your computer and get hands-free answers while you work."},learnMore:{id:"SidekickOnboarding.learn_more",defaultMessage:"Learn more"},download:{id:"SidekickOnboarding.download",defaultMessage:"Download"}}),cPe=we({bannerTitle:{id:"SidetronOnboarding.bannerTitle",defaultMessage:"ChatGPT is now available for Windows 10+"},bannerContent:{id:"SidetronOnboarding.banner_content_3",defaultMessage:"Get faster access to ChatGPT with the Alt + Space shortcut, and use Voice to get hands-free answers while you work."},modalTitle:{id:"SidetronOnboarding.modalTitle",defaultMessage:"ChatGPT is available for Windows 10+"},modalContent:{id:"SidetronOnboarding.modal_content_eligible",defaultMessage:"Quickly access ChatGPT from anywhere on your computer with the Alt + Space shortcut. Share screenshots, upload files, and use Voice to chat with your computer and get hands-free answers while you work."},learnMore:{id:"SidetronOnboarding.learn_more",defaultMessage:"Learn more"},download:{id:"SidetronOnboarding.download",defaultMessage:"Download on Microsoft Store"}}),uPe=we({close:{id:"SidekickOnboarding.close",defaultMessage:"Close"}}),dPe={downloadUrl:Yje,messages:lPe,learnMoreUrl:Kje,analyticsModalShown:"Sidekick: Download Modal Shown",analyticsModalClosed:"Sidekick: Download Modal Closed",analyticsModalDownloadClicked:"Sidekick: Download Modal Downloaded",analyticsBannerShown:"Sidekick: Announcement Shown",analyticsBannerDismissed:"Sidekcik: Dismissed Announcement",analyticsBannerDownloadClicked:"Sidekick: Clicked Announcement Link",statsigLayerName:GG,statsigModalShown:"chatgpt_sidekick_modal_shown",statsigModalClosed:"chatgpt_sidekick_modal_closed",statsigModalDownloadClicked:"chatgpt_sidekick_modal_download_clicked",statsigBannerShown:"chatgpt_sidekick_announcement_shown",statsigBannerDismissed:"chatgpt_sidekick_announcement_closed",statsigBannerDownloadClicked:"chatgpt_sidekick_announcement_download_clicked",downloadAnnouncement:Wje,onboardingAnnouncement:qje},fPe={downloadUrl:Xje,messages:cPe,learnMoreUrl:Jje,analyticsModalShown:"Sidetron: Download Modal Shown",analyticsModalClosed:"Sidetron: Download Modal Closed",analyticsModalDownloadClicked:"Sidetron: Download Modal Downloaded",analyticsBannerShown:"Sidetron: Announcement Shown",analyticsBannerDismissed:"Sidetron: Dismissed Announcement",analyticsBannerDownloadClicked:"Sidetron: Clicked Announcement Link",statsigLayerName:VG,statsigModalShown:"chatgpt_sidetron_modal_shown",statsigModalClosed:"chatgpt_sidetron_modal_closed",statsigModalDownloadClicked:"chatgpt_sidetron_modal_download_clicked",statsigBannerShown:"chatgpt_sidetron_announcement_shown",statsigBannerDismissed:"chatgpt_sidetron_announcement_closed",statsigBannerDownloadClicked:"chatgpt_sidetron_announcement_download_clicked",downloadAnnouncement:Zje,onboardingAnnouncement:Qje};function qG({country:t,currentAccount:e,location:n,pricingPlanIsTypeBusiness:s,shouldUsePaidSubscriptionBillingCurrency:o=!0}){const{data:r,isLoading:a,error:l}=SF({countryCode:t}),[c,u]=v.useState(()=>gI({country:t,currentAccount:e,location:n,shouldUsePaidSubscriptionBillingCurrency:o,checkoutPricingConfig:r,pricingPlanIsTypeBusiness:s}));return v.useEffect(()=>{u(gI({country:t,currentAccount:e,location:n,shouldUsePaidSubscriptionBillingCurrency:o,checkoutPricingConfig:r,pricingPlanIsTypeBusiness:s}))},[t,e,n,o,r,a,l,s]),c}function KG({initialCountryCode:t}={}){const e=is(),n="userCountry"in e?e.userCountry:null,[s,o]=v.useState(t&&pw(t)?t:_le({country:n,shouldUseDefaultCountryCode:!1}));return{country:s,setCountry:o,userCountry:n}}function gI({country:t,currentAccount:e,location:n,shouldUsePaidSubscriptionBillingCurrency:s,checkoutPricingConfig:o,pricingPlanIsTypeBusiness:r}){if(o){const a=o.currencyConfig.symbol_code;if(e!=null&&e.hasPaidSubscription()&&s){const l=e==null?void 0:e.mustGetSubscriptionBillingCurrency(n);if(l!==a)return{currency:l}}return r&&o.currencyConfig.business_currency_override?{country:t,currency:o.currencyConfig.business_currency_override}:{country:t,currency:a}}else return null}function udt(){sessionStorage.removeItem(pPe),sessionStorage.removeItem(mPe),sessionStorage.removeItem(gPe)}const YG="promoCode",ddt="referralCode",mPe="oai/apps/closedReferralCode",pPe="oai/apps/closedPromoCode",gPe="oai/apps/closedPromoMetadata",hPe="oai/apps/promoEligibleUpsellSuppression",_Pe=t=>{"use forget";var k,E,T;const e=D.c(25),{promoCode:n,referralCode:s}=t,o=n?"promo":s?"referral":void 0,r=n||s||"",a=!!r;let l;e[0]!==r?(l=["promotionEligibility",r],e[0]=r,e[1]=l):l=e[1];let c;e[2]!==r||e[3]!==o?(c=()=>ue.safeGet("/promotions/eligibility/{code}",{parameters:{query:{type:o},path:{code:r}}}),e[2]=r,e[3]=o,e[4]=c):c=e[4];let u;e[5]!==a||e[6]!==l||e[7]!==c?(u={enabled:a,queryKey:l,queryFn:c},e[5]=a,e[6]=l,e[7]=c,e[8]=u):u=e[8];const{data:d,isLoading:f}=ut(u),m=!!r&&(d==null?void 0:d.is_eligible);let p;e[9]!==r?(p=["promotionMetadata",r],e[9]=r,e[10]=p):p=e[10];let g;e[11]!==r||e[12]!==o?(g=()=>ue.safeGet("/promotions/metadata/{code}",{parameters:{query:{type:o},path:{code:r}}}),e[11]=r,e[12]=o,e[13]=g):g=e[13];let h;e[14]!==m||e[15]!==p||e[16]!==g?(h={enabled:m,queryKey:p,queryFn:g},e[14]=m,e[15]=p,e[16]=g,e[17]=h):h=e[17];const{data:_,isLoading:x}=ut(h),b=f||x,y=(d==null?void 0:d.ineligible_reason)&&(d&&!d.is_eligible&&(k=d.ineligible_reason)!=null?k:null),S=(E=d==null?void 0:d.is_eligible)!=null?E:!1,C=(T=_==null?void 0:_.metadata)!=null?T:null;let w;return e[18]!==b||e[19]!==n||e[20]!==y||e[21]!==s||e[22]!==C||e[23]!==S?(w={isEligible:S,isPromoLoading:b,promoCode:n,referralCode:s,promoError:y,promoMetadata:C},e[18]=b,e[19]=n,e[20]=y,e[21]=s,e[22]=C,e[23]=S,e[24]=w):w=e[24],w},$S=We.hasDismissedPromoRedemption,C0="month",ZG="year",QG="hour";function xPe(t){return t==="chatgptplusplan"?"Plus":t==="chatgptgoplan"?"Go":t==="chatgptteamplan"?"Business":(ws.warn("Unsupported plan name for promo redemption banner, falling back to Plus: ",{planName:t}),"Plus")}function fdt(){const{eligible:t}=Ct($S);return tt.getItem(Ie.PromoCode)?t:!1}function mdt(){const t=te(),e=bt(),n=Tn(),{country:s}=KG(),o=qG({country:s,currentAccount:n,location:"PromoRedemptionAnnouncementBanner",shouldUsePaidSubscriptionBillingCurrency:!0,pricingPlanIsTypeBusiness:!1}),r=tt.getItem(Ie.PromoCode),{promoMetadata:a}=_Pe({promoCode:r,referralCode:null}),l=a!=null&&!a.schedule&&a.plan_name!=="chatgptteamplan",c=(a==null?void 0:a.plan_name)&&xPe(a.plan_name)||"",{data:u,isLoading:d,error:f}=SF({countryCode:o==null?void 0:o.country,currency:o==null?void 0:o.currency,enabled:o!==null});if(v.useEffect(()=>{l&&(V.logEvent("Promo Redemption Banner Shown",{promoCode:r}),ft.logEvent("chatgpt_promo_redemption_banner_shown"),V.logUpsellOrModalEvent(qn,{eventId:"promo_redemption_announcement_banner_shown",type:Kn.UPSELL_OR_MODAL_TYPE_NUX_BANNER}))},[l,r]),!l)return null;let m,p;o&&u&&!d&&!f&&(m=bPe(t,o,a,c,u),p=vPe(t,o,a,u));const g=i.jsxs("div",{className:"grow",children:[i.jsx("div",{className:"mb-0.5 font-semibold",children:m!=null?m:""}),i.jsx("span",{className:"text-token-text-secondary",children:p!=null?p:""})]});return i.jsx(hn,{onPrimaryCtaClick:()=>{const h=tt.getItem(Ie.PromoCode);tt.removeItem(Ie.PromoCode),kt($S),e("/p/".concat(h,"#pricing")),V.logEvent("Promo Redemption Banner Redeem Button Clicked",{promoCode:h}),ft.logEvent("chatgpt_promo_redemption_banner_redeem_button_clicked")},primaryCtaText:t.formatMessage(ra.bannerPrimaryCta),onDismiss:()=>kt($S),content:g})}function yPe({planName:t,checkoutPricingConfig:e}){return tS(e,t==="chatgptgoplan"?K_e:Y_e,X1.Month).amount}function JG(t,e){const{discount:n}=t;let s=yPe({planName:t.plan_name,checkoutPricingConfig:e});if("percentage"in n){const o=(n==null?void 0:n.percentage)/100;s=s*(1-o)}else if("value"in n){const o=n==null?void 0:n.value;s-=o}return s}function bPe(t,e,n,s,o){var d,f;const{discount:r,duration:a}=n,l=Jd(e.currency),c=a?a.period:C0,u=a?a.num_periods:1;if("percentage"in r){const m=r==null?void 0:r.percentage;return t.formatMessage(ra.bannerTitleForPercentageDiscount,{discount:"".concat(m),planName:s})}else if("value"in r){const m=JG(n,o),p=(f=(d=l.code.defaultMessage)==null?void 0:d.toString())!=null?f:Np,g=t.formatNumber(m,{style:"currency",currency:p,minimumFractionDigits:0,maximumFractionDigits:2});let h;switch(c){case C0:u===1?h=t.formatMessage(ra.bannerTitleForSingleMonth,{cost:g,planName:s}):h=t.formatMessage(ra.bannerTitleForPluralMonths,{cost:g,num_months:u,planName:s});break;case ZG:u===1?h=t.formatMessage(ra.bannerTitleForSingleYear,{cost:g,planName:s}):h=t.formatMessage(ra.bannerTitleForPluralYears,{cost:g,num_years:u,planName:s});break;case QG:throw new Error("Period 'hour' is not supported")}return h}}function vPe(t,e,n,s){var m,p;const{duration:o}=n,r=Jd(e.currency),a=o?o.period:C0,l=o?o.num_periods:1,c=(p=(m=r.code.defaultMessage)==null?void 0:m.toString())!=null?p:Np,u=JG(n,s),d=t.formatNumber(u,{style:"currency",currency:c,minimumFractionDigits:0,maximumFractionDigits:2});let f;switch(a){case C0:l===1?f=t.formatMessage(ra.bannerContentForSingleMonth,{cost:d}):f=t.formatMessage(ra.bannerContentForPluralMonths,{num_months:l,cost:d});break;case ZG:l===1?f=t.formatMessage(ra.bannerContentForSingleYear,{cost:d}):f=t.formatMessage(ra.bannerContentForPluralYears,{num_years:l,cost:d});break;case QG:throw new Error("Period 'hour' is not supported")}return f}const ra=we({bannerTitleForPluralMonths:{id:"promoRedemptionBannerTitleForPluralMonths",defaultMessage:"Get {planName} for {cost}/month for the first {num_months} months"},bannerTitleForSingleMonth:{id:"promoRedemptionBannerTitleForSingleMonth",defaultMessage:"Get {planName} for {cost}/month for the first month"},bannerTitleForPluralYears:{id:"promoRedemptionBannerTitleForPluralYears",defaultMessage:"Get {planName} for {cost}/year for the first {num_years} years"},bannerTitleForSingleYear:{id:"promoRedemptionBannerTitleForSingleYear",defaultMessage:"Get {planName} for {cost}/year for the first year"},bannerTitleForPercentageDiscount:{id:"promoRedemptionBannerTitleForPercentageDiscount",defaultMessage:"Finish redeeming your {discount}% off code for {planName}"},bannerContentForPluralMonths:{id:"promoRedemptionBannerContentForPluralMonths",defaultMessage:"Get {num_months} months of expanded access for only {cost} per month."},bannerContentForSingleMonth:{id:"promoRedemptionBannerContentForSingleMonth",defaultMessage:"Get 1 month of expanded access for only {cost} per month."},bannerContentForPluralYears:{id:"promoRedemptionBannerContentForPluralYears",defaultMessage:"Get {num_years} years of expanded access for only {cost} per year."},bannerContentForSingleYear:{id:"promoRedemptionBannerContentForSingleYear",defaultMessage:"Get 1 year of expanded access for only {cost} per year."},bannerPrimaryCta:{id:"promoRedemptionBannerPrimaryCta",defaultMessage:"Redeem"}}),Oo=window.localStorage,hI=tn(ls(()=>{var n;const t=(n=Oo==null?void 0:Oo.getItem(Ie.NoAuthBannerDisclaimerClientThreadId))!=null?n:null,e=(Oo==null?void 0:Oo.getItem(Ie.NoAuthHasAcceptedFooterDisclaimer))==="true";return{bannerDisclaimerClientThreadId:t,hasAcceptedFooterDisclaimer:e}})),XG={updateBannerDisclaimerClientThreadId(t){hI.setState(e=>{e.bannerDisclaimerClientThreadId=t}),Oo==null||Oo.setItem(Ie.NoAuthBannerDisclaimerClientThreadId,t)},updateHasAcceptedFooterDisclaimer(){hI.setState(t=>{t.hasAcceptedFooterDisclaimer=!0}),Oo==null||Oo.setItem(Ie.NoAuthHasAcceptedFooterDisclaimer,"true")}},eV=re(me,"6e8e3f",20,20),_I=we({medicalDisclaimer:{id:"potion.footerDisclaimer.medicalDisclaimer",defaultMessage:"ChatGPT can make mistakes and isn't intended for diagnosis or treatment. Consult a doctor for medical advice."},medicalDisclaimerWithCookiePreferences:{id:"potion.footerDisclaimer.medicalDisclaimerWithCookiePreferences",defaultMessage:"ChatGPT can make mistakes and isn't intended for diagnosis or treatment. Consult a doctor for medical advice. See <cookiePreferencesLink>Cookie Preferences</cookiePreferencesLink>."}}),SPe=()=>xe("1639821169"),CPe=()=>xe("1831960162"),Mh=t=>{"use forget";const e=D.c(2),{children:n}=t;let s;return e[0]!==n?(s=i.jsx("div",{className:"pointer-events-auto",children:n}),e[0]=n,e[1]=s):s=e[1],s};function wPe({clientThreadId:t}){const e=m_(t);return e!=null?i.jsx(kPe,{clientThreadId:t,gizmoId:e}):i.jsx(tV,{clientThreadId:t})}function kPe({clientThreadId:t,gizmoId:e}){const n=gi(e).data,s=Ze(t,ve.getThreadCreateTime),o=(n==null?void 0:n.gizmo.updated_at)!=null?new Date(n.gizmo.updated_at):void 0;return(n==null?void 0:n.gizmo.gizmo_type)===r7.PROJECT||(n==null?void 0:n.gizmo.short_url)==null||o==null||s==null||o<=s?i.jsx(tV,{clientThreadId:t,gizmoResource:n}):i.jsxs("div",{className:"text-token-text-tertiary",children:[i.jsx(eV,{className:"text-token-secondary me-1 mb-1 inline-block h-4 w-4 stroke-0"}),i.jsx(P,G(N({},Ln.outdatedGptDisclaimer),{values:{link:r=>i.jsx(ko,{to:$9(n.gizmo.short_url),className:"underline",children:r},"gizmo-link-".concat(n.gizmo.short_url)),bold:r=>i.jsx("span",{className:"text-token-secondary font-semibold",children:r},"gizmo-bold-".concat(n.gizmo.short_url))}}))]})}function tV({clientThreadId:t,gizmoResource:e}){var C,w,k,E;const n=Et(),s=Tn(),o=!mt(),r=fi.useStore(),a=Ze(t,ve.hasUserMessage),l=X(r9),u=X(()=>i_())&&!a,[d,f]=v.useState(!u),[m,p]=v.useState(!1),g=v.useRef(u);if(v.useEffect(()=>{g.current=u,u&&f(!1)},[u]),v.useEffect(()=>{p(!0)},[]),n!=null&&n.isWorkspaceAccount()){if(s==null)return null;const T=(E=(k=(C=s.isK12)==null?void 0:C.call(s))!=null?k:(w=n==null?void 0:n.isK12)==null?void 0:w.call(n))!=null?E:!1;if(s.workspaceType==="early-access")return i.jsx(Mh,{children:s.name!=null?i.jsx(P,G(N({},Ln.earlyAccessBusinessDisclaimer),{values:{workspaceName:s.name}})):i.jsx(P,N({},Ln.earlyAccessBusinessDisclaimerNoName))});if(u)return i.jsx(Mh,{children:i.jsx(P,N({},Ln.workspaceTempChatDisclaimer))});const A=s.data.ekmConfig!=null;return i.jsx(Mh,{children:A?s.name!=null?i.jsx(P,G(N({},T?Ln.k12BusinessDisclaimerWithEncryption:Ln.businessDisclaimerWithEncryption),{values:{workspaceName:s.name}})):i.jsx(P,N({},T?Ln.k12BusinessDisclaimerWithEncryptionNoName:Ln.businessDisclaimerWithEncryptionNoName)):s.name!=null?i.jsx(P,G(N({},T?Ln.k12BusinessDisclaimer:Ln.businessDisclaimer),{values:{workspaceName:s.name}})):i.jsx(P,N({},T?Ln.k12BusinessDisclaimerNoName:Ln.businessDisclaimerNoName))})}if(o&&!a){const M=Je("1677443372").get("is_disclaimer_optimized",!1);return i.jsx(nV,{clientThreadId:t,isDisclaimerOptimized:M})}const h=Q3(n);let _=Ln.mayProduceInaccurateInformation;CPe()||!(l!=null&&l.is_adult)&&SPe()?_=Ln.mayProduceInaccurateInformationAIService:ui(e)?_=h?_I.medicalDisclaimerWithCookiePreferences:_I.medicalDisclaimer:h&&(_=Ln.mayProduceInaccurateInformationWithCookieConsent);const x=T=>i.jsx(P,G(N({},T),{values:{cookiePreferencesLink:M=>i.jsx("a",{onClick:A=>{A.preventDefault(),V.logEventWithStatsig("Footer Disclaimer Cookie Preferences Link Clicked","chatgpt_footer_disclaimer_cookie_preferences_link_clicked",{isAuthenticated:!0}),r.openModal()},className:"text-token-text-primary decoration-token-text-primary cursor-pointer underline",children:M})}})),b=x(_),y=x(Ln.mayProduceInaccurateInformationTemporaryChat),S=d&&!u;return i.jsxs(Mh,{children:[S&&i.jsx("div",{children:b},"default-disclaimer"),i.jsx(In,{initial:!1,onExitComplete:()=>{g.current||f(!0)},children:u&&i.jsx(wt.div,{initial:m?{height:0,opacity:0,marginTop:0}:!1,animate:{height:"auto",opacity:1,marginTop:32},exit:{height:0,opacity:0,marginTop:0},transition:m?{duration:.2,ease:"easeInOut"}:{duration:0},className:"overflow-hidden",children:y},"temp-chat-disclaimer")})]})}function nV({clientThreadId:t,variant:e="default",isDisclaimerOptimized:n=!1}){const s=Et(),{country:o}=Rc();let r=e==="default"?o==="KR"?Ln.mayProduceInaccurateInformationNoAuthKorea:Ln.mayProduceInaccurateInformationNoAuthV2:o==="KR"?Ln.agreeToTermsNoAuthKorea:Ln.agreeToTermsNoAuthV2;const a=fi.useStore();Q3(s)&&(r=e==="default"?o==="KR"?Ln.mayProduceInaccurateInformationNoAuthKoreaWithCookieConsent:Ln.mayProduceInaccurateInformationNoAuthV2WithCookieConsent:o==="KR"?Ln.agreeToTermsNoAuthKoreaWithCookieConsent:Ln.agreeToTermsNoAuthV2WithCookieConsent),v.useEffect(()=>()=>{ve.hasUserMessage(At(t))&&XG.updateHasAcceptedFooterDisclaimer()},[t]);const l=q(n?"text-token-text-secondary":"text-token-text-primary","decoration-token-text-primary underline");return i.jsx("span",{className:q("pointer-events-auto",n?"text-token-text-secondary px-2 text-xs leading-3.5":"text-sm",e==="byContinuing"||n?void 0:"leading-none"),children:i.jsx(P,G(N({},r),{values:{privacyLink:c=>i.jsx("a",{href:"https://openai.com/privacy",target:"_blank",className:l,onClick:()=>{ft.logEvent("chatgpt_footer_disclaimer_privacy_link_clicked"),V.logEvent("Footer Disclaimer Privacy Link Clicked")},rel:"noreferrer",children:c},"privacy_link"),termsLink:c=>i.jsx("a",{href:"https://openai.com/terms",target:"_blank",className:l,onClick:()=>{ft.logEvent("chatgpt_footer_disclaimer_terms_link_clicked"),V.logEvent("Footer Disclaimer Terms Link Clicked")},rel:"noreferrer",children:c},"terms_link"),koreaAddendumLink:c=>i.jsx("a",{href:"https://openai.com/ko/policies/kr-privacy-policy-addendum",target:"_blank",className:l,onClick:()=>{ft.logEvent("chatgpt_footer_disclaimer_korea_addendum_link_clicked"),V.logEvent("Footer Disclaimer Korea Addendum Link Clicked")},rel:"noreferrer",children:c},"addendum_link"),cookiePreferencesLink:c=>i.jsx("a",{onClick:u=>{u.preventDefault(),a.openModal(),V.logEventWithStatsig("Footer Disclaimer Cookie Preferences Link Clicked","chatgpt_footer_disclaimer_cookie_preferences_link_clicked",{isAuthenticated:!1})},className:q(l,"cursor-pointer"),children:c},"cookie_preferences_link")}}))})}const Ln=we({mayProduceInaccurateInformation:{id:"thread.chatgptMayProduceInaccurateInformation-oct-30",defaultMessage:"ChatGPT can make mistakes. Check important info."},mayProduceInaccurateInformationTemporaryChat:{id:"thread.chatgptMayProduceInaccurateInformationTemporaryChat-jan-15-2026",defaultMessage:"For safety, we may keep a copy of this chat for up to 30 days."},mayProduceInaccurateInformationAIService:{id:"thread.chatgptMayProduceInaccurateInformationAIService-dec-16",defaultMessage:"ChatGPT is AI and can make mistakes. Check important info."},mayProduceInaccurateInformationWithCookieConsent:{id:"thread.chatgptMayProduceInaccurateInformationWithCookieConsent-may-12",defaultMessage:"ChatGPT can make mistakes. Check important info. See <cookiePreferencesLink>Cookie Preferences</cookiePreferencesLink>."},mayProduceInaccurateInformationNoAuthV2:{id:"thread.chatgptMayProduceInaccurateInformationNoAuth-may-06",defaultMessage:"By messaging ChatGPT, an AI chatbot, you agree to our <termsLink>Terms</termsLink> and have read our <privacyLink>Privacy Policy</privacyLink>."},agreeToTermsNoAuthV2:{id:"thread.agreeToTermsNoAuth-may-06",defaultMessage:"By continuing, you agree to our <termsLink>Terms</termsLink> and have read our <privacyLink>Privacy Policy</privacyLink>."},mayProduceInaccurateInformationNoAuthV2WithCookieConsent:{id:"thread.chatgptMayProduceInaccurateInformationNoAuthV2WithCookieConsent-may-12",defaultMessage:"By messaging ChatGPT, an AI chatbot, you agree to our <termsLink>Terms</termsLink> and have read our <privacyLink>Privacy Policy</privacyLink>. See <cookiePreferencesLink>Cookie Preferences</cookiePreferencesLink>."},agreeToTermsNoAuthV2WithCookieConsent:{id:"thread.agreeToTermsNoAuthV2WithCookieConsent-may-12",defaultMessage:"By continuing, you agree to our <termsLink>Terms</termsLink> and have read our <privacyLink>Privacy Policy</privacyLink>. See <cookiePreferencesLink>Cookie Preferences</cookiePreferencesLink>."},mayProduceInaccurateInformationNoAuthKorea:{id:"thread.chatgptMayProduceInaccurateInformationNoAuthKorea-may-06",defaultMessage:"By messaging ChatGPT, an AI chatbot, you agree to our <termsLink>Terms</termsLink> and have read our <privacyLink>Privacy Policy</privacyLink> and its <koreaAddendumLink>Korea addendum</koreaAddendumLink>."},agreeToTermsNoAuthKorea:{id:"thread.agreeToTermsNoAuthKorea-may-06",defaultMessage:"By continuing, you agree to our <termsLink>Terms</termsLink> and have read our <privacyLink>Privacy Policy</privacyLink> and its <koreaAddendumLink>Korea addendum</koreaAddendumLink>."},mayProduceInaccurateInformationNoAuthKoreaWithCookieConsent:{id:"thread.chatgptMayProduceInaccurateInformationNoAuthKoreaWithCookieConsent-may-12",defaultMessage:"By messaging ChatGPT, an AI chatbot, you agree to our <termsLink>Terms</termsLink> and have read our <privacyLink>Privacy Policy</privacyLink> and its <koreaAddendumLink>Korea addendum</koreaAddendumLink>. See <cookiePreferencesLink>Cookie Preferences</cookiePreferencesLink>."},agreeToTermsNoAuthKoreaWithCookieConsent:{id:"thread.agreeToTermsNoAuthKoreaWithCookieConsent-may-12",defaultMessage:"By continuing, you agree to our <termsLink>Terms</termsLink> and have read our <privacyLink>Privacy Policy</privacyLink> and its <koreaAddendumLink>Korea addendum</koreaAddendumLink>. See <cookiePreferencesLink>Cookie Preferences</cookiePreferencesLink>."},businessDisclaimer:{id:"thread.businessDisclaimer-jan-17",defaultMessage:"ChatGPT can make mistakes. OpenAI doesn't use {workspaceName} workspace data to train its models."},k12BusinessDisclaimer:{id:"thread.k12BusinessDisclaimer-dec-09-24",defaultMessage:"ChatGPT for Teachers can make mistakes. OpenAI doesn't use {workspaceName} workspace data to train its models."},businessDisclaimerNoName:{id:"thread.businessDisclaimerNoName-jan-17",defaultMessage:"ChatGPT can make mistakes. OpenAI doesn't use your workspace data to train its models."},k12BusinessDisclaimerNoName:{id:"thread.k12BusinessDisclaimerNoName-dec-09-24",defaultMessage:"ChatGPT for Teachers can make mistakes. OpenAI doesn't use your workspace data to train its models."},businessDisclaimerWithEncryption:{id:"thread.businessDisclaimerWithEncryption-jan-17",defaultMessage:"ChatGPT can make mistakes. OpenAI doesn't use {workspaceName} workspace data to train its models. The content of this workspace is encrypted with your organization managed keys."},k12BusinessDisclaimerWithEncryption:{id:"thread.k12BusinessDisclaimerWithEncryption-dec-09-24",defaultMessage:"ChatGPT for Teachers can make mistakes. OpenAI doesn't use {workspaceName} workspace data to train its models. The content of this workspace is encrypted with your organization managed keys."},businessDisclaimerWithEncryptionNoName:{id:"thread.businessDisclaimerWithEncryptionNoName-jan-17",defaultMessage:"ChatGPT can make mistakes. OpenAI doesn't use your workspace data to train its models. The content of this workspace is encrypted with your organization managed keys."},k12BusinessDisclaimerWithEncryptionNoName:{id:"thread.k12BusinessDisclaimerWithEncryptionNoName-dec-09-24",defaultMessage:"ChatGPT for Teachers can make mistakes. OpenAI doesn't use your workspace data to train its models. The content of this workspace is encrypted with your organization managed keys."},workspaceTempChatDisclaimer:{id:"thread.workspaceTempChatDisclaimer-jan-16-2026",defaultMessage:"OpenAI doesn't use OpenAI workspace data to train its models. For safety, we may keep a copy of this chat for up to 30 days."},outdatedGptDisclaimer:{id:"thread.outdatedGptDisclaimer.0",defaultMessage:"<bold>New version of GPT available</bold> - Continue chatting to use the old version, or start a <link>new chat</link> for the latest version."},earlyAccessBusinessDisclaimer:{id:"thread.earlyAccessBusinessDisclaimer",defaultMessage:"ChatGPT can make mistakes. OpenAI uses {workspaceName} workspace data to train its models."},earlyAccessBusinessDisclaimerNoName:{id:"thread.earlyAccessBusinessDisclaimerNoName",defaultMessage:"ChatGPT can make mistakes. OpenAI uses your workspace data to train its models."}});function pdt({threadId:t}){const e=te(),[n,s]=v.useState(!1);v.useEffect(()=>{XG.updateBannerDisclaimerClientThreadId(t),ft.logEvent("chatgpt_unauthenticated_legal_banner"),V.logEvent("Unauthenticated Legal Banner",{threadId:t})},[t]);const o=nX()?km.bannerTermsDisclaimer:km.bannerTermsDisclaimerSafetyAndAbuse;return n?null:i.jsx(hn,{onDismiss:()=>{s(!0),V.logEventWithStatsig("Unauthenticated Legal Banner Dismissed Clicked","chatgpt_unauthenticated_legal_banner_dismissed")},content:i.jsxs(i.Fragment,{children:[i.jsx(nV,{clientThreadId:t}),i.jsx("br",{}),e.formatMessage(o,{learnMoreLink:r=>i.jsx("a",{href:"https://help.openai.com/en/articles/5722486-how-your-data-is-used-to-improve-model-performance",target:"_blank",className:"text-token-text-primary underline",onClick:()=>{ft.logEvent("chatgpt_unauthenticated_banner_learn_more_clicked"),V.logEvent("Unauthenticated Signup Banner Learn More Clicked",{threadId:t})},children:r})})]})})}function gdt({threadId:t,showSignUp:e}){const n=te(),o=Je("2118136551").get("sign_up_button_has_the_word_free",!0);return v.useEffect(()=>{ft.logEvent("chatgpt_unauthenticated_login_banner"),V.logEvent("Unauthenticated Login Banner",{threadId:t})},[t]),i.jsx(hn,{content:n.formatMessage(km.bannerSignup),onPrimaryCtaClick:()=>{fn({fallbackScreenHint:"login",callback:r=>{ft.logEvent("chatgpt_unauthenticated_banner_login_button_clicked"),_o({location:"Chat Stage Login Banner",provider:r},Jt.ACCESS_FLOW_ENTRY_POINT_CHAT_STAGE_LOGIN_BANNER)},skipLoginModal:!1})},primaryCtaText:n.formatMessage(yn.logInButtonText),onSecondaryCtaClick:e?()=>{fn({fallbackScreenHint:"signup",callback:r=>{ft.logEvent("chatgpt_unauthenticated_banner_signup_button_clicked"),ci({location:"Chat Stage Login Banner",provider:r},Jt.ACCESS_FLOW_ENTRY_POINT_CHAT_STAGE_LOGIN_BANNER)},skipLoginModal:!1})}:void 0,secondaryCtaText:e?o?n.formatMessage(km.bannerSignupButtonWithFree):n.formatMessage(km.bannerSignupButton):void 0})}const km=we({bannerTermsDisclaimer:{id:"bannerTermsDisclaimer",defaultMessage:"Don't share sensitive info. Chats may be reviewed and used to train our models. <learnMoreLink>Learn more</learnMoreLink>"},bannerTermsDisclaimerSafetyAndAbuse:{id:"pDsoLk",defaultMessage:"Don't share sensitive information. Chats may be reviewed for safety and abuse prevention. <learnMoreLink>Learn more</learnMoreLink>"},bannerSignup:{id:"4qlPtW",defaultMessage:"Get smarter responses, upload files and images, and more."},bannerSignupButton:{id:"hedgehog.banner_signup_button",defaultMessage:"Sign up"},bannerSignupButtonWithFree:{id:"xL5gsL",defaultMessage:"Sign up for free"}}),xI={logCouponCheck(t,e){Fe.count(Ue.TEAMS,"promo_campaign.web.check_coupon",[{key:"coupon",value:t},{key:"outcome",value:e}]),V.logEvent("Promo Campaign: Check Coupon",{coupon:t,outcome:e})},logCouponApplied(t){Fe.count(Ue.TEAMS,"promo_campaign.web.coupon_applied",[{key:"coupon",value:t}]),V.logEvent("Promo Campaign: Coupon Applied",{coupon:t})}},EPe=t=>{var e,n,s,o,r;return G(N({},t),{redeemed_at:(e=t.redeemed_at)!=null?e:null,user_redeemed_at:(n=t.user_redeemed_at)!=null?n:null,workspace_redeemed_at:(s=t.workspace_redeemed_at)!=null?s:null,promotion_length_days:(o=t.promotion_length_days)!=null?o:null,expires_at:(r=t.expires_at)!=null?r:null})},TPe=t=>({coupon:t.coupon,state:t.state,redemption:t.redemption?EPe(t.redemption):null}),MPe=(t,e)=>{"use forget";const n=D.c(16),s=!!e;let o;n[0]!==t||n[1]!==s?(o=["promoCampaignEligibility",t,s],n[0]=t,n[1]=s,n[2]=o):o=n[2];let r;n[3]!==t||n[4]!==e?(r=async()=>{const f=await ue.safeGet("/promo_campaign/check_coupon",{parameters:{query:{coupon:t,is_coupon_from_query_param:e}},authOption:Ot.SendIfAvailable});return TPe(f)},n[3]=t,n[4]=e,n[5]=r):r=n[5];const a=!!t;let l;n[6]!==o||n[7]!==r||n[8]!==a?(l={queryKey:o,queryFn:r,enabled:a},n[6]=o,n[7]=r,n[8]=a,n[9]=l):l=n[9];const c=ut(l);let u,d;return n[10]!==t||n[11]!==c.data||n[12]!==c.isError||n[13]!==c.isSuccess?(u=()=>{c.isSuccess&&c.data?xI.logCouponCheck(t,c.data.state):c.isError&&xI.logCouponCheck(t,"error")},d=[c.isSuccess,c.isError,c.data,t],n[10]=t,n[11]=c.data,n[12]=c.isError,n[13]=c.isSuccess,n[14]=u,n[15]=d):(u=n[14],d=n[15]),v.useEffect(u,d),c},GS=25,APe=GS/100,NPe="team_seats_promo";function sV(t){return t==null||!Number.isFinite(t)?null:Math.ceil(t*APe)}function hdt(t){const{data:e}=MPe(NPe),n=(e==null?void 0:e.state)==="eligible",s=v.useMemo(()=>sV(t),[t]);return v.useMemo(()=>{const o=e!=null?e:null,r=n&&s!=null?s:null;return{eligible:n,seatThresholdGap:r,promoEligibility:o}},[e,n,s])}function _dt(){const t=bt(),{data:e}=q3(),n=e==null?void 0:e.seats_entitled,s=v.useMemo(()=>sV(n),[n]);return v.useEffect(()=>{Fe.count(Ue.TEAMS,"teams.web.teamSeatsPromo.impressionAnnouncementBanner"),V.logEvent("Teams: Show Team Seats Promo Announcement Banner"),V.logUpsellOrModalEvent(qn,{eventId:"team_seats_promo_announcement_banner_shown",type:Kn.UPSELL_OR_MODAL_TYPE_NUX_BANNER})},[]),s==null?null:i.jsx(hn,{icon:i.jsx(AD,{className:"h-6 w-6 text-[#4338CA]","aria-hidden":"true"}),title:i.jsx(P,{id:"components.pricing.teams.teamSeatsPromoAnnouncement.title.withThreshold",defaultMessage:"Add {seatsCount, plural, one {# seat} other {# seats}}, get {discount}% off",values:{discount:GS,seatsCount:s}}),content:i.jsx(P,{id:"components.pricing.teams.teamSeatsPromoAnnouncement.content.withThreshold",defaultMessage:"Invite team members to work with you in ChatGPT and save {discount}% for a month when you add {seatsCount, plural, one {# seat} other {# seats}}.",values:{discount:GS,seatsCount:s}}),primaryCtaColor:"purple",className:"border-[#DDD8FF] bg-[#F2F0FF]",primaryCtaText:i.jsx(P,{id:"components.pricing.teams.teamSeatsPromoAnnouncement.primaryCta",defaultMessage:"Add Seats"}),onPrimaryCtaClick:()=>{Fe.count(Ue.TEAMS,"teams.web.teamSeatsPromo.clickAnnouncementBannerPrimaryCta"),V.logEvent("Teams: Click Team Seats Promo Announcement Banner"),kt(We.hasSeenTeamSeatsPromoAnnouncement),t("/admin/billing")},onDismiss:()=>{Fe.count(Ue.TEAMS,"teams.web.teamSeatsPromo.dismissAnnouncementBanner"),V.logEvent("Teams: Close Team Seats Promo Announcement Banner"),kt(We.hasSeenTeamSeatsPromoAnnouncement)}})}function IPe(){return xe("878458344")}const xdt=t=>{const e=IPe(),{eligible:n}=Ct(We.hasSeenTeamsContextualAnswersUpsell),s=_n(),o=s!=null&&t9(s),a=!!Ze(t,c=>ve.findNode(c,u=>u.message.author.role===dt.Tool&&u.message.author.name===ds.MYFILES_BROWSER));return e&&n&&o&&a};function ydt(){const t=bt();return v.useEffect(()=>{Fe.count(Ue.TEAMS,"teams.web.caUpsell.impressionAnnouncementBanner"),V.logEvent("Teams: Show CA Upsell Announcement Banner"),V.logUpsellOrModalEvent(qn,{eventId:"teams_contextual_upsell_announcement_banner_shown",type:Kn.UPSELL_OR_MODAL_TYPE_NUX_BANNER})},[]),i.jsx(hn,{title:i.jsx(P,{id:"components.pricing.teams.contextualUpsellAnnouncement.title",defaultMessage:"Connect to Google Drive directly with the Business plan"}),content:i.jsx(P,{id:"components.pricing.teams.contextualUpsellAnnouncement.content",defaultMessage:"Summarize, analyze, and get smarter answers from your teams docs."}),primaryCtaText:i.jsx(P,{id:"components.pricing.teams.contextualUpsellAnnouncement.primaryCtaText",defaultMessage:"Get Business"}),onPrimaryCtaClick:()=>{Fe.count(Ue.TEAMS,"teams.web.caUpsell.clickAnnouncementBannerPrimaryCta"),V.logEvent("Teams: Click CA Upsell Announcement Banner"),kt(We.hasSeenTeamsContextualAnswersUpsell),t({hash:$p,search:window.location.search},{state:{[j_]:"CA upsell announcement banner"}})},onDismiss:()=>{Fe.count(Ue.TEAMS,"teams.web.caUpsell.dismissAnnouncementBanner"),V.logEvent("Teams: Close CA Upsell Announcement Banner"),kt(We.hasSeenTeamsContextualAnswersUpsell)}})}function bdt({onDismissSideEffect:t,onPrimaryCtaClickSideEffect:e}){var u;const n=te(),s=bt(),o=is(),{locale:r,usedDefault:a}=oV((u=o.cfIpCity)!=null?u:""),l=n.formatMessage(RPe[r]),c=n.formatMessage({id:"language-upsell-banner.query",defaultMessage:"Talk to me in {language}"},{language:l});return v.useEffect(()=>{V.logEventWithStatsig("Language Upsell Banner Shown","chatgpt_web_language_upsell_banner_shown",{inferred_locale:r,used_default:a})},[r,a]),i.jsx(hn,{title:n.formatMessage({id:"language-upsell-banner.title",defaultMessage:"{hello} Want to chat in {language}?"},{hello:PPe[r],language:l}),content:a?n.formatMessage({id:"language-upsell-banner.content.default",defaultMessage:"ChatGPT speaks many languages. Give it a try, just by typing."}):n.formatMessage({id:"language-upsell-banner.content.language",defaultMessage:"ChatGPT speaks your local language  give it a try, just by typing."}),primaryCtaText:n.formatMessage({id:"language-upsell-banner.primary-cta",defaultMessage:"Try it"}),onPrimaryCtaClick:()=>{e(),s("/?q=".concat(encodeURIComponent(c)))},onDismiss:t})}const jPe=Sa(Ie.HasManuallyClosedLanguageUpsellBanner,()=>!1,{coerceStoredValue:Ba});function vdt(t){var l,c;const e=Ze(t,(l=ve.getIsNewConversation)!=null?l:(()=>!1)),n=is(),{country:s}=Rc(),o=Je("723297404"),r=n.locale,{locale:a}=oV((c=n.cfIpCity)!=null?c:"");return X(()=>e&&(s==null?void 0:s.toUpperCase())==="IN"&&r!==a&&o.get("show_india_language_upsell_banner",!1)&&!jPe())}function oV(t){return t in yI?{locale:yI[t],usedDefault:!1}:{locale:"hi-IN",usedDefault:!0}}const yI={Bengaluru:"kn-IN",Mumbai:"mr-IN",Hyderabad:"te-IN",Chennai:"ta-IN",Pune:"mr-IN","New Delhi":"hi-IN",Delhi:"hi-IN",Kolkata:"bn-BD",Ahmedabad:"gu-IN",Kochi:"ml",Jaipur:"hi-IN",Lucknow:"hi-IN",Indore:"hi-IN",Patna:"hi-IN",Guwahati:"as",Coimbatore:"ta-IN",Chandigarh:"pa",Bhopal:"hi-IN",Surat:"gu-IN",Bhubaneswar:"or",Gurugram:"hi-IN",Nagpur:"mr-IN",Noida:"hi-IN",Ludhiana:"pa",Dehradun:"hi-IN",Thrissur:"ml",Agra:"hi-IN",Visakhapatnam:"te-IN",Vadodara:"gu-IN",Thiruvananthapuram:"ml",Mangalore:"kn-IN",Ranchi:"hi-IN",Ghaziabad:"hi-IN",Kanpur:"hi-IN",Vijayawada:"te-IN",Madurai:"ta-IN",Varanasi:"hi-IN",Srinagar:"hi-IN",Salem:"ta-IN",Faridabad:"hi-IN",Jodhpur:"hi-IN",Raipur:"hi-IN",Jammu:"hi-IN",Sopur:"hi-IN",Nashik:"mr-IN","Navi Mumbai":"mr-IN",Rajkot:"gu-IN",Prayagraj:"hi-IN",Meerut:"hi-IN",Thane:"mr-IN",Kozhikode:"ml",Jabalpur:"hi-IN"},PPe={"kn-IN":"!","mr-IN":"!","te-IN":"!","ta-IN":"!","hi-IN":"!","bn-BD":"!","gu-IN":"!",ml:"!",as:"!",pa:"  !",or:"!"},RPe=we({"kn-IN":{id:"language-upsell-banner.locale.kn",defaultMessage:"Kannada"},"mr-IN":{id:"language-upsell-banner.locale.mr",defaultMessage:"Marathi"},"te-IN":{id:"language-upsell-banner.locale.te",defaultMessage:"Telugu"},"ta-IN":{id:"language-upsell-banner.locale.ta",defaultMessage:"Tamil"},"hi-IN":{id:"language-upsell-banner.locale.hi",defaultMessage:"Hindi"},"bn-BD":{id:"language-upsell-banner.locale.bn",defaultMessage:"Bengali"},"gu-IN":{id:"language-upsell-banner.locale.gu",defaultMessage:"Gujarati"},ml:{id:"language-upsell-banner.locale.ml",defaultMessage:"Malayalam"},as:{id:"language-upsell-banner.locale.as",defaultMessage:"Assamese"},pa:{id:"language-upsell-banner.locale.pa",defaultMessage:"Punjabi"},or:{id:"language-upsell-banner.locale.or",defaultMessage:"Odia"}});function Sdt(t){return X(()=>e3(Fn(Pt(t)).id))}function Cdt(t){return null}const bI=We.DesktopOperatorAnnouncement;function wdt(){v.useEffect(()=>{V.logEventWithStatsig("Operator Announcement Banner Shown","chatgpt_operator_announcement_banner_shown"),V.logUpsellOrModalEvent(qn,{eventId:"operator_announcement_banner_shown",type:Kn.UPSELL_OR_MODAL_TYPE_NUX_BANNER})},[]);const t=i.jsxs("div",{className:"grow",children:[i.jsx("div",{className:"mb-0.5 font-semibold",children:i.jsx(P,{id:"/bPUPL",defaultMessage:"Delegate daily tasks with Operator"})}),i.jsx("span",{className:"text-token-text-secondary",children:i.jsx(P,{id:"ODMLVJ",defaultMessage:"With the Pro plan, you can try the Operator research preview  an agent that browses the web to handle tasks for you."})})]});return i.jsx(hn,{onPrimaryCtaClick:()=>{kt(bI),V.logEventWithStatsig("Operator Announcement Banner Try Operator Button Clicked","chatgpt_operator_announcement_banner_try_operator_button_clicked"),window.open("".concat(sX,"?utm_source=chatgpt"),"_blank")},primaryCtaText:i.jsx(P,{id:"eDZIyV",defaultMessage:"Try Operator"}),onDismiss:()=>{kt(bI),V.logEventWithStatsig("Operator Announcement Banner Dismissed","chatgpt_operator_announcement_banner_dismissed")},content:t})}const OPe=20,LPe=7;function kdt(){const t=bt();return v.useEffect(()=>{V.logEventWithStatsig("Plus Upsell Banner Shown","chatgpt_plus_upsell_banner_shown"),V.logUpsellOrModalEvent(qn,{eventId:"plus_upsell_banner_shown",type:Kn.UPSELL_OR_MODAL_TYPE_NUX_BANNER})},[]),i.jsx(hn,{onPrimaryCtaClick:()=>{V.logEventWithStatsig("Plus Upsell Banner Get Plus Button Clicked","chatgpt_plus_upsell_banner_get_plus_button_clicked"),xs(t,"Plus upsell banner"),vI()},primaryCtaText:i.jsx(P,N({},B_())),onDismiss:()=>{V.logEventWithStatsig("Plus Upsell Banner Dismissed","chatgpt_plus_upsell_banner_dismissed"),vI()},title:i.jsx(P,{id:"CEHXxQ",defaultMessage:"Unlock more with Plus"}),content:i.jsx(P,{id:"s+Afdr",defaultMessage:"ChatGPT Plus gives you higher limits, smarter models, and Sora for video."})})}const rV=tn(ls(()=>({lastSeenPlusUpsellBannerAt:DPe()})));function vI(){const t=new Date;rV.setState(e=>{e.lastSeenPlusUpsellBannerAt=t}),localStorage.setItem(Ie.LastSeenPlusUpsellBannerAt,String(pa(new Date)))}function DPe(){const t=localStorage.getItem(Ie.LastSeenPlusUpsellBannerAt);return t?Or(Number(t)):null}function Edt(){const t=fw(Qie),e=rV(a=>a.lastSeenPlusUpsellBannerAt),n=Tn(),s=!!(n!=null&&n.isFree()&&(n!=null&&n.features.includes("plus_upsell"))),o=t>=OPe,r=e==null||Ho(Date.now(),e)>=LPe;return s&&o&&r}const BPe=({className:t,children:e})=>i.jsx(wt.div,{className:t,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0,transition:{duration:.1,delay:0}},transition:{type:"tween",duration:.3,delay:.2},children:e});function Tdt(t){"use forget";const e=D.c(6),{canContinue:n,onContinueGenerating:s}=t;let o;e[0]!==s?(o=c=>{s(c),sD()},e[0]=s,e[1]=o):o=e[1];const r=o;let a=null;if(n){let c;e[2]!==r?(c=i.jsx(UPe,{onHandleContinueGenerating:r}),e[2]=r,e[3]=c):c=e[3],a=c}if(!a)return a;let l;return e[4]!==a?(l=i.jsx("div",{className:"flex h-full w-full items-center justify-end gap-0 py-4 md:gap-2",children:a}),e[4]=a,e[5]=l):l=e[5],l}function FPe({className:t}){return i.jsx(lE,{className:q("-rotate-180",t)})}const UPe=t=>{"use forget";const e=D.c(3),{onHandleContinueGenerating:n}=t;let s;e[0]===Symbol.for("react.memo_cache_sentinel")?(s=i.jsx(P,N({},jo.continueGenerating)),e[0]=s):s=e[0];let o;return e[1]!==n?(o=i.jsx(BPe,{children:i.jsx(Se,{as:"button",color:"secondary",onClick:n,className:"py-2 whitespace-nowrap",icon:FPe,size:"small",children:s})}),e[1]=n,e[2]=o):o=e[2],o},aV={small:24,medium:36,large:48},HPe="small",$Pe=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),GPe=t=>t&&$Pe(aV,t)?t:HPe,iV=({bannerIconImageUrl:t,bannerIconSize:e,icon:n})=>{if(n)return n;if(!t)return null;const s=aV[GPe(e)];return i.jsx("img",{src:t,alt:"",style:{width:s,height:s,objectFit:"contain"}})},Ym=t=>{"use forget";var T,M;const e=D.c(34),{actions:n,title:s,description:o,onDismiss:r,onInteract:a,primaryButtonColor:l,primaryButtonClassName:c,secondaryButtonColor:u,bannerIconImageUrl:d,bannerIconSize:f,icon:m}=t,p=te();let g;e[0]!==n||e[1]!==p?(g=(T=n==null?void 0:n.primaryAction)!=null&&T.text?typeof n.primaryAction.text=="string"?n.primaryAction.text:p.formatMessage(n.primaryAction.text):void 0,e[0]=n,e[1]=p,e[2]=g):g=e[2];const h=g;let _;e[3]!==n||e[4]!==p?(_=(M=n==null?void 0:n.secondaryAction)!=null&&M.text?typeof n.secondaryAction.text=="string"?n.secondaryAction.text:p.formatMessage(n.secondaryAction.text):void 0,e[3]=n,e[4]=p,e[5]=_):_=e[5];const x=_,b=n==null?void 0:n.customActions;let y;e[6]!==d||e[7]!==f||e[8]!==m?(y=iV({icon:m,bannerIconImageUrl:d,bannerIconSize:f}),e[6]=d,e[7]=f,e[8]=m,e[9]=y):y=e[9];let S;e[10]!==o?(S=o?i.jsx("div",{dangerouslySetInnerHTML:{__html:o}}):null,e[10]=o,e[11]=S):S=e[11];let C;e[12]!==r||e[13]!==a?(C=r?()=>{a==null||a(),r()}:void 0,e[12]=r,e[13]=a,e[14]=C):C=e[14];let w;e[15]!==(n==null?void 0:n.primaryAction)||e[16]!==a?(w=()=>{var A,I;a==null||a(),(I=(A=n==null?void 0:n.primaryAction)==null?void 0:A.onClick)==null||I.call(A)},e[15]=n==null?void 0:n.primaryAction,e[16]=a,e[17]=w):w=e[17];let k;e[18]!==(n==null?void 0:n.secondaryAction)||e[19]!==a?(k=()=>{var A,I;a==null||a(),(I=(A=n==null?void 0:n.secondaryAction)==null?void 0:A.onClick)==null||I.call(A)},e[18]=n==null?void 0:n.secondaryAction,e[19]=a,e[20]=k):k=e[20];let E;return e[21]!==b||e[22]!==c||e[23]!==l||e[24]!==h||e[25]!==u||e[26]!==x||e[27]!==y||e[28]!==S||e[29]!==C||e[30]!==w||e[31]!==k||e[32]!==s?(E=i.jsx(hn,{icon:y,iconContainerClassName:"hidden md:flex shrink-0",title:s,content:S,onDismiss:C,customCtas:b,primaryCtaText:h,primaryCtaColor:l,primaryCtaClassName:c,onPrimaryCtaClick:w,secondaryCtaText:x,secondaryCtaColor:u,onSecondaryCtaClick:k,isElevated:!0}),e[21]=b,e[22]=c,e[23]=l,e[24]=h,e[25]=u,e[26]=x,e[27]=y,e[28]=S,e[29]=C,e[30]=w,e[31]=k,e[32]=s,e[33]=E):E=e[33],E};function VPe(){"use forget";const t=D.c(2),e=S3();let n;return t[0]!==e?(n=Js!=null&&e.has(Js),t[0]=e,t[1]=n):n=t[1],n}const zPe=t=>zo(t.trim());function WPe(t){"use forget";const e=D.c(50),{onThennableClick:n,text:s}=t,o=n!=null?n:zPe,r=te();let a;e[0]!==r||e[1]!==s?(a=typeof s=="string"?s:r.formatMessage(s),e[0]=r,e[1]=s,e[2]=a):a=e[2];const l=a;let c;e[3]!==r?(c=r.formatMessage(Ah.copy),e[3]=r,e[4]=c):c=e[4];const u=c;let d;e[5]!==r?(d=r.formatMessage(Ah.copied),e[5]=r,e[6]=d):d=e[6];const f=d,[m,p]=v.useState(!1),g=v.useRef(null),h=v.useRef(null),[_,x]=v.useState();let b;e[7]===Symbol.for("react.memo_cache_sentinel")?(b=()=>{var Q,ne,ie,fe;const K=(ne=(Q=g.current)==null?void 0:Q.offsetWidth)!=null?ne:0,Z=(fe=(ie=h.current)==null?void 0:ie.offsetWidth)!=null?fe:0,J=Math.max(K,Z);x(J===0?void 0:J)},e[7]=b):b=e[7];let y;e[8]!==f||e[9]!==u?(y=[u,f],e[8]=f,e[9]=u,e[10]=y):y=e[10],bs(b,y);let S,C;e[11]!==m?(S=()=>{if(!m)return;const K=window.setTimeout(()=>{p(!1)},5e3);return()=>{window.clearTimeout(K)}},C=[m],e[11]=m,e[12]=S,e[13]=C):(S=e[12],C=e[13]),v.useEffect(S,C);let w;e[14]!==o||e[15]!==l?(w=()=>{o(l).then(()=>{p(!0)})},e[14]=o,e[15]=l,e[16]=w):w=e[16];const k=w;let E;e[17]===Symbol.for("react.memo_cache_sentinel")?(E=q("flex w-fit flex-row gap-1 text-center"),e[17]=E):E=e[17];let T;e[18]!==l?(T=i.jsx("code",{className:"max-w-[50vw] truncate sm:max-w-[300px] md:max-w-[200px] lg:max-w-[300px]",children:l}),e[18]=l,e[19]=T):T=e[19];let M;e[20]!==k||e[21]!==T?(M=i.jsx(Se,{color:"secondary",className:"w-fit max-w-[40vw] rounded-3xl border px-3 py-2 sm:max-w-[300px]",onClick:k,contentWrapperClassName:"flex justify-between! md:justify-center! w-full",children:T}),e[20]=k,e[21]=T,e[22]=M):M=e[22];const A=m?"primary-inverse":"primary";let I;e[23]!==_?(I=typeof _=="number"?{width:_}:void 0,e[23]=_,e[24]=I):I=e[24];let j;e[25]!==u?(j=i.jsx("span",{"aria-hidden":!0,className:"absolute -z-10 whitespace-nowrap opacity-0",children:i.jsx("span",{ref:g,children:u})}),e[25]=u,e[26]=j):j=e[26];let R;e[27]!==f?(R=i.jsx("span",{"aria-hidden":!0,className:"absolute -z-10 whitespace-nowrap opacity-0",children:i.jsx("span",{ref:h,children:f})}),e[27]=f,e[28]=R):R=e[28];const O=m?"copied":"copy";let L,B,U,H;e[29]===Symbol.for("react.memo_cache_sentinel")?(L={opacity:0,y:4},B={opacity:1,y:0},U={opacity:0,y:-4},H={duration:.2,ease:"easeInOut"},e[29]=L,e[30]=B,e[31]=U,e[32]=H):(L=e[29],B=e[30],U=e[31],H=e[32]);let $;e[33]!==m?($=m?i.jsx(P,N({},Ah.copied)):i.jsx(P,N({},Ah.copy)),e[33]=m,e[34]=$):$=e[34];let F;e[35]!==O||e[36]!==$?(F=i.jsx(In,{mode:"wait",initial:!1,children:i.jsx(wt.span,{initial:L,animate:B,exit:U,transition:H,className:"inline-flex whitespace-nowrap",children:$},O)}),e[35]=O,e[36]=$,e[37]=F):F=e[37];let z;e[38]!==I||e[39]!==j||e[40]!==R||e[41]!==F?(z=i.jsxs("span",{className:"relative inline-flex justify-center",style:I,children:[j,R,F]}),e[38]=I,e[39]=j,e[40]=R,e[41]=F,e[42]=z):z=e[42];let W;e[43]!==k||e[44]!==A||e[45]!==z?(W=i.jsx(Se,{color:A,className:"w-fit px-4 py-2 transition-all duration-200 ease-in-out",onClick:k,contentWrapperClassName:"flex justify-between! lg:justify-center! w-fit min-w-[40px] text-center",children:z}),e[43]=k,e[44]=A,e[45]=z,e[46]=W):W=e[46];let Y;return e[47]!==M||e[48]!==W?(Y=i.jsxs("div",{className:E,children:[M,W]}),e[47]=M,e[48]=W,e[49]=Y):Y=e[49],Y}const Ah=we({copy:{id:"beacon-banner-copy-to-clipboard.copy",defaultMessage:"Copy"},copied:{id:"beacon-banner-copy-to-clipboard.copied",defaultMessage:"Copied"}});function qPe(t){"use forget";const e=D.c(8),{beaconInfo:n,copyBeaconAction:s,trackBeaconDismissAndClearBeaconUIState:o}=t,{title:r,description:a}=n.ui_info;let l;e[0]!==s.onThennableClick||e[1]!==s.text?(l=i.jsx(WPe,{onThennableClick:s.onThennableClick,text:s.text}),e[0]=s.onThennableClick,e[1]=s.text,e[2]=l):l=e[2];let c;return e[3]!==a||e[4]!==l||e[5]!==r||e[6]!==o?(c=i.jsx(hn,{title:r,content:a,onDismiss:o,customCtas:l,contentClassName:"gap-1!"}),e[3]=a,e[4]=l,e[5]=r,e[6]=o,e[7]=c):c=e[7],c}const KPe={banner:{containerClassName:"flex w-full flex-col gap-2",triggerClassName:"w-full items-center justify-between gap-2 rounded-4xl! bg-[rgba(13,13,13,0.90)]! px-4 py-2 dark:bg-[rgba(255,255,255,0.90)]!",triggerTextClassName:"truncate font-medium text-white dark:text-[#0D0D0D]",chevronClassName:"icon-sm shrink-0 text-white dark:text-[#0D0D0D]",contentClassName:"border-token-border-subtle bg-token-bg-elevated-primary dark:border-token-border-muted w-[256px] max-w-[80vw] min-w-[220px] overflow-hidden rounded-2xl border p-1.5 shadow-lg",headerClassName:"text-token-text-tertiary m-0 p-2 text-[13px] leading-4.5 font-normal",itemsWrapperClassName:"flex flex-col gap-1",itemClassName:"m-0 py-1.5 ps-2.5 pe-0 [&>div]:h-6 [&>div]:w-6 [&>div>div]:h-6 [&>div>div]:w-6",itemTextClassName:"text-token-text-primary text-sm",iconClassName:"h-6 w-6 dark:border-token-border-muted dark:border dark:bg-white",fallbackTextClassName:"text-token-text-secondary text-sm font-medium",footerPlacement:"inline",footerClassName:"text-token-text-tertiary m-0 p-2 text-[13px] leading-4.5 font-normal",showLinkIcon:!1},modal:{containerClassName:"flex w-full flex-col gap-2",triggerClassName:"w-full h-11.5 items-center justify-between! gap-3 rounded-2xl! border-token-border-default! bg-token-bg-elevated-primary px-4 py-3 text-start dark:border-token-border-muted dark:bg-token-bg-elevated-secondary",triggerTextClassName:"truncate font-normal font-[14px] text-token-text-tertiary",chevronClassName:"icon-lg shrink-0 text-token-text-secondary",contentClassName:"border-token-border-subtle bg-token-bg-elevated-primary dark:border-token-border-muted w-full overflow-hidden rounded-2xl border p-1.5 shadow-xl w-[416px] sm:max-w-[416px]",headerClassName:"text-token-text-tertiary m-0 p-2 text-[13px] leading-4.5 font-normal",itemsWrapperClassName:"flex flex-col gap-1 px-1",itemClassName:"m-0 pe-2.5 py-1.5 ps-1.5 dark:ps-2.5 [&>div]:w-fit [&>div]:h-6 [&>div]:w-6 [&>div>div]:h-6 [&>div>div]:w-6",itemTextClassName:"text-token-text-primary text-sm",iconClassName:"flex h-6 w-6 items-center justify-center rounded-full dark:border-token-border-muted dark:border dark:bg-white",fallbackTextClassName:"text-token-text-secondary text-base font-semibold",footerPlacement:"below",footerClassName:"text-token-text-tertiary m-0 p-2 text-[13px] leading-4.5 font-normal",footerBelowClassName:"text-token-text-tertiary leading-4.5 text-center text-[13px]",showLinkIcon:!0}};function YPe(t){"use forget";const e=D.c(6),{dropdownAction:n,formatAction:s}=t;let o;e:{if(!n){let a;e[0]===Symbol.for("react.memo_cache_sentinel")?(a=[],e[0]=a):a=e[0],o=a;break e}let r;if(e[1]!==n.action_v2.items||e[2]!==s){let a;e[4]!==s?(a=l=>{const c=s(l);return c?{id:l.id,text:l.text,iconUrl:l.icon_url,action:c}:null},e[4]=s,e[5]=a):a=e[5],r=n.action_v2.items.map(a).filter(ZPe),e[1]=n.action_v2.items,e[2]=s,e[3]=r}else r=e[3];o=r}return o}function ZPe(t){return t!=null}function QPe(t){"use forget";const e=D.c(11),{iconUrl:n,label:s,className:o,fallbackTextClassName:r}=t;let a;e[0]!==s?(a=s.trim().slice(0,1).toUpperCase(),e[0]=s,e[1]=a):a=e[1];const l=a;let c;e[2]!==o?(c=q("flex items-center justify-center rounded-full",o),e[2]=o,e[3]=c):c=e[3];let u;e[4]!==l||e[5]!==r||e[6]!==n?(u=n?i.jsx("img",{src:n,alt:"",className:"h-4 w-4 object-contain",loading:"eager"}):i.jsx("span",{className:r,children:l}),e[4]=l,e[5]=r,e[6]=n,e[7]=u):u=e[7];let d;return e[8]!==c||e[9]!==u?(d=i.jsx("div",{className:c,"aria-hidden":"true",children:u}),e[8]=c,e[9]=u,e[10]=d):d=e[10],d}function JPe({item:t,beaconInfo:e,beaconClickEventMutation:n,variant:s,onClose:o}){var r,a,l;V.logEventWithStatsig("Web Beacon Clicked","chatgpt_web_beacon_clicked",{beacon_id:e.beacon_id,beacon_name:(r=e.beacon_name)!=null?r:"unknown",beacon_type:s,action_id:t.id}),n.mutate({beaconId:e.beacon_id,eventCtaId:t.id}),"onThennableClick"in t.action&&t.action.onThennableClick?t.action.onThennableClick():(l=(a=t.action).onClick)==null||l.call(a),s==="modal"&&o()}function XPe(t){"use forget";var O;const e=D.c(67),{beaconInfo:n,conversationId:s,dropdownAction:o,dropdownItems:r,variant:a,onClose:l}=t,c=a===void 0?"banner":a,u=te();let d;e[0]!==s?(d=()=>ai(s),e[0]=s,e[1]=d):d=e[1];const f=sT(d),m=KPe[c];let p=(O=o.action_v2.header_text)!=null?O:void 0;if(p&&typeof p!="string"){let L;e[2]!==u||e[3]!==p?(L=u.formatMessage(p),e[2]=u,e[3]=p,e[4]=L):L=e[4],p=L}let g;e[5]!==f||e[6]!==n||e[7]!==l||e[8]!==c?(g=L=>{JPe({item:L,beaconInfo:n,beaconClickEventMutation:f,variant:c,onClose:l})},e[5]=f,e[6]=n,e[7]=l,e[8]=c,e[9]=g):g=e[9];const h=g;if(r.length===0)return null;const _=m.containerClassName;let x;e[10]!==n||e[11]!==o.action_v2.action_enum||e[12]!==o.id||e[13]!==o.type||e[14]!==c?(x=L=>{var B;L&&V.logEventWithStatsig("Web Beacon Clicked","chatgpt_web_beacon_clicked",{beacon_id:n.beacon_id,beacon_name:(B=n.beacon_name)!=null?B:"unknown",beacon_type:c,action_id:o.id,action_type:o.type,action_enum:o.action_v2.action_enum})},e[10]=n,e[11]=o.action_v2.action_enum,e[12]=o.id,e[13]=o.type,e[14]=c,e[15]=x):x=e[15];let b;e[16]!==m.triggerTextClassName||e[17]!==o.text?(b=i.jsx("span",{className:m.triggerTextClassName,children:o.text}),e[16]=m.triggerTextClassName,e[17]=o.text,e[18]=b):b=e[18];let y;e[19]!==m.chevronClassName?(y=i.jsx($o,{className:m.chevronClassName}),e[19]=m.chevronClassName,e[20]=y):y=e[20];let S;e[21]!==m.triggerClassName||e[22]!==b||e[23]!==y?(S=i.jsx(ee.Trigger,{asChild:!0,children:i.jsxs("button",{type:"button",className:m.triggerClassName,children:[b,y]})}),e[21]=m.triggerClassName,e[22]=b,e[23]=y,e[24]=S):S=e[24];const C=m.contentClassName;let w;e[25]!==m.headerClassName||e[26]!==o.action_v2.header_text||e[27]!==p?(w=o.action_v2.header_text&&p?i.jsx("p",{className:m.headerClassName,children:p}):null,e[25]=m.headerClassName,e[26]=o.action_v2.header_text,e[27]=p,e[28]=w):w=e[28];const k=m.itemsWrapperClassName;let E;if(e[29]!==m.fallbackTextClassName||e[30]!==m.iconClassName||e[31]!==m.itemClassName||e[32]!==m.itemTextClassName||e[33]!==m.showLinkIcon||e[34]!==r||e[35]!==h){let L;e[37]!==m.fallbackTextClassName||e[38]!==m.iconClassName||e[39]!==m.itemClassName||e[40]!==m.itemTextClassName||e[41]!==m.showLinkIcon||e[42]!==h?(L=B=>i.jsx(ee.Item,{size:"large",className:m.itemClassName,icon:i.jsx(QPe,{iconUrl:B.iconUrl,label:B.text,className:m.iconClassName,fallbackTextClassName:m.fallbackTextClassName}),trailing:m.showLinkIcon?i.jsx(ka,{className:"text-token-text-primary"}):void 0,onSelect:()=>h(B),children:i.jsx("span",{className:m.itemTextClassName,children:B.text})},B.id),e[37]=m.fallbackTextClassName,e[38]=m.iconClassName,e[39]=m.itemClassName,e[40]=m.itemTextClassName,e[41]=m.showLinkIcon,e[42]=h,e[43]=L):L=e[43],E=r.map(L),e[29]=m.fallbackTextClassName,e[30]=m.iconClassName,e[31]=m.itemClassName,e[32]=m.itemTextClassName,e[33]=m.showLinkIcon,e[34]=r,e[35]=h,e[36]=E}else E=e[36];let T;e[44]!==m.itemsWrapperClassName||e[45]!==E?(T=i.jsx("div",{className:k,children:E}),e[44]=m.itemsWrapperClassName,e[45]=E,e[46]=T):T=e[46];let M;e[47]!==m.footerClassName||e[48]!==o.action_v2.footer_text?(M=o.action_v2.footer_text?i.jsx("p",{className:m.footerClassName,children:o.action_v2.footer_text}):null,e[47]=m.footerClassName,e[48]=o.action_v2.footer_text,e[49]=M):M=e[49];let A;e[50]!==m.contentClassName||e[51]!==w||e[52]!==T||e[53]!==M?(A=i.jsx(ee.Portal,{children:i.jsxs(ee.Content,{size:"auto",className:C,children:[w,T,M]})}),e[50]=m.contentClassName,e[51]=w,e[52]=T,e[53]=M,e[54]=A):A=e[54];let I;e[55]!==A||e[56]!==x||e[57]!==S?(I=i.jsxs(ee.Root,{onOpenChange:x,children:[S,A]}),e[55]=A,e[56]=x,e[57]=S,e[58]=I):I=e[58];let j;e[59]!==m.footerBelowClassName||e[60]!==m.footerPlacement||e[61]!==o.action_v2.footer_text?(j=m.footerPlacement==="below"&&o.action_v2.footer_text?i.jsx("p",{className:m.footerBelowClassName,children:o.action_v2.footer_text}):null,e[59]=m.footerBelowClassName,e[60]=m.footerPlacement,e[61]=o.action_v2.footer_text,e[62]=j):j=e[62];let R;return e[63]!==m.containerClassName||e[64]!==I||e[65]!==j?(R=i.jsxs("div",{className:_,children:[I,j]}),e[63]=m.containerClassName,e[64]=I,e[65]=j,e[66]=R):R=e[66],R}function eRe({beaconInfo:t,conversationId:e,dropdownAction:n,formatAction:s,trackBeaconDismissAndClearBeaconUIState:o}){"use no forget";const{title:r,description:a,icon_image_url:l,icon_image_size:c}=t.ui_info,u=YPe({dropdownAction:n,formatAction:s});if(u.length===0)return i.jsx(Ym,{bannerIconImageUrl:l,bannerIconSize:c,onDismiss:o,title:r,description:a});const d=i.jsx(XPe,{beaconInfo:t,conversationId:e,dropdownAction:n,dropdownItems:u,variant:"banner",onClose:()=>{}});return i.jsx(Ym,{bannerIconImageUrl:l,bannerIconSize:c,onDismiss:o,title:r,description:a,actions:{customActions:d}})}function tRe(t){switch(t){case Oi.PRIMARY:return"primary";case Oi.SECONDARY:return"secondary";case Oi.COPY:return"primary";case Oi.DROPDOWN:return"primary"}return"primary"}function Ad(t,e){const n={beacon_id:t.beacon_id,beacon_name:t.beacon_name,beacon_type:"container"};if(e==="show"){V.logEventWithStatsig("Web Beacon Shown","chatgpt_web_beacon_shown",n);return}V.logEventWithStatsig("Web Beacon Dismissed","chatgpt_web_beacon_dismissed",n)}function nRe(t){if(sRe.includes(t.beacon_id)){const e=(()=>{var n,s;if(t.beacon_id==="free_trial_upsell_modal_beacon")return((s=(n=t.action_items)==null?void 0:n[1])==null?void 0:s.id)==="plus_free_trial_upsell_modal_beacon_try_plus"?We.hasSeenFreeTrialUpsellModal:We.hasSeenGoFreeTrialUpsellModal;if(t.beacon_id==="tatertot_nux_modal_v2_beacon")return We.hasSeenTatertotNux})();if(!e)return;kt(e)}}const sRe=["free_trial_upsell_modal_beacon","tatertot_nux_modal_v2_beacon"],lV=t=>{"use forget";var j,R;const e=D.c(40),{actions:n,title:s,description:o,onDismiss:r,onInteract:a,primaryButtonColor:l,secondaryButtonColor:c,bannerIconImageUrl:u,bannerIconSize:d,icon:f,className:m,contentClassName:p}=t,g=te();let h;e[0]!==n||e[1]!==g?(h=(j=n==null?void 0:n.primaryAction)!=null&&j.text?typeof n.primaryAction.text=="string"?n.primaryAction.text:g.formatMessage(n.primaryAction.text):void 0,e[0]=n,e[1]=g,e[2]=h):h=e[2];const _=h;let x;e[3]!==n||e[4]!==g?(x=(R=n==null?void 0:n.secondaryAction)!=null&&R.text?typeof n.secondaryAction.text=="string"?n.secondaryAction.text:g.formatMessage(n.secondaryAction.text):void 0,e[3]=n,e[4]=g,e[5]=x):x=e[5];const b=x,y=n==null?void 0:n.customActions;let S;e[6]!==m?(S=q("relative -mb-9 ps-4! pe-2.5! pt-2.5 pb-9!","rounded-t-[32px] rounded-b-none border border-b-0","bg-token-bg-tertiary! dark:bg-token-bg-tertiary!","border-token-border-strong/60 dark:border-token-border-strong/60",m),e[6]=m,e[7]=S):S=e[7];let C;e[8]!==p?(C=q(p),e[8]=p,e[9]=C):C=e[9];let w;e[10]!==u||e[11]!==d||e[12]!==f?(w=iV({icon:f,bannerIconImageUrl:u,bannerIconSize:d}),e[10]=u,e[11]=d,e[12]=f,e[13]=w):w=e[13];let k;e[14]!==s?(k=s&&i.jsxs("span",{className:"font-medium",children:[s,s.toString().endsWith(".")?"":i.jsx(i.Fragment,{children:"."})]}),e[14]=s,e[15]=k):k=e[15];let E;e[16]!==o?(E=o?i.jsxs(i.Fragment,{children:["",i.jsx("span",{dangerouslySetInnerHTML:{__html:o}})]}):null,e[16]=o,e[17]=E):E=e[17];let T;e[18]!==k||e[19]!==E?(T=i.jsxs("div",{className:"text-token-text-secondary text-sm",children:[k,E]}),e[18]=k,e[19]=E,e[20]=T):T=e[20];let M;e[21]!==r||e[22]!==a?(M=r?()=>{a==null||a(),r==null||r()}:void 0,e[21]=r,e[22]=a,e[23]=M):M=e[23];let A;e[24]!==(n==null?void 0:n.primaryAction)||e[25]!==(n==null?void 0:n.secondaryAction)||e[26]!==y||e[27]!==a||e[28]!==l||e[29]!==_||e[30]!==c||e[31]!==b?(A=y!=null?y:i.jsxs("div",{className:"flex w-full shrink-0 flex-col items-stretch gap-2 pb-1 md:w-auto md:items-start md:pb-0",children:[_&&i.jsx(Se,{onClick:()=>{var O,L;a==null||a(),(L=(O=n==null?void 0:n.primaryAction)==null?void 0:O.onClick)==null||L.call(O)},color:l!=null?l:"secondary",className:q("text-[#5856D6] dark:text-[#DCDBF6]","min-h-8 w-full md:w-auto"),children:_}),b&&i.jsx(Se,{onClick:()=>{var O,L;a==null||a(),(L=(O=n==null?void 0:n.secondaryAction)==null?void 0:O.onClick)==null||L.call(O)},color:c!=null?c:"secondary",className:"w-full shrink-0 md:w-auto",children:b})]}),e[24]=n==null?void 0:n.primaryAction,e[25]=n==null?void 0:n.secondaryAction,e[26]=y,e[27]=a,e[28]=l,e[29]=_,e[30]=c,e[31]=b,e[32]=A):A=e[32];let I;return e[33]!==A||e[34]!==S||e[35]!==C||e[36]!==w||e[37]!==T||e[38]!==M?(I=i.jsx("div",{className:"relative",children:i.jsx(hn,{className:S,contentClassName:C,isElevated:!1,icon:w,title:void 0,content:T,onDismiss:M,customCtas:A})}),e[33]=A,e[34]=S,e[35]=C,e[36]=w,e[37]=T,e[38]=M,e[39]=I):I=e[39],I},zf=we({modalHeading:{id:"claimBusinessWorkspaceModal.modalHeading",defaultMessage:"One step closer to your free ChatGPT Business trial"},modalHeadingFreeWorkspace:{id:"claimBusinessWorkspaceModal.modalHeadingFreeWorkspace",defaultMessage:"One step closer to your free ChatGPT Business workspace"},modalSubheading:{id:"claimBusinessWorkspaceModal.modalSubheading",defaultMessage:"Continue with your work email to unlock a secure AI workspace trusted by millions of professionals"},primaryCta:{id:"claimBusinessWorkspaceModal.primaryCta",defaultMessage:"Log out to continue"},tertiaryCta:{id:"claimBusinessWorkspaceModal.tertiaryCta",defaultMessage:"Maybe later"}}),oRe="https://cdn.openai.com/chatgpt/team-interstitial-background.png",rRe="logout_account_hint",cV=t=>{"use forget";const e=D.c(25),{onClose:n}=t,s=te(),o=_n();let r;e[0]===Symbol.for("react.memo_cache_sentinel")?(r=Je("4038887252").get("enabled",!1),e[0]=r):r=e[0];const a=r;let l;e[1]!==n||e[2]!==o?(l=async()=>{if(ga("chatgpt_business_claim_workspace_modal_cta_click"),!(o!=null&&o.email))return;const S=a?"/business-free-workspace":"/team-sign-up",C=new URL(window.location.origin+S);C.searchParams.set(rRe,o.email);const w=C.toString();try{const k=await lK.signOut({redirect:!1,callbackUrl:w});k.url?window.location.href=k.url:window.location.assign(w)}catch(k){window.location.assign(w)}n==null||n()},e[1]=n,e[2]=o,e[3]=l):l=e[3];const c=l;let u;e[4]!==n?(u=()=>{ga("chatgpt_business_claim_workspace_modal_dismiss"),n==null||n()},e[4]=n,e[5]=u):u=e[5];const d=u;let f;e[6]===Symbol.for("react.memo_cache_sentinel")?(f=i.jsx("div",{"aria-hidden":!0,className:"absolute inset-x-0 top-0 z-0 h-[180px] w-full bg-cover bg-center",style:{backgroundImage:"url(".concat(oRe,")")}}),e[6]=f):f=e[6];let m;e[7]===Symbol.for("react.memo_cache_sentinel")?(m=i.jsx("div",{className:"text-token-text-primary text-2xl",children:i.jsx(P,N({},a?zf.modalHeadingFreeWorkspace:zf.modalHeading))}),e[7]=m):m=e[7];let p;e[8]===Symbol.for("react.memo_cache_sentinel")?(p=i.jsx("div",{className:"text-token-text-secondary text-sm",children:i.jsx(P,N({},zf.modalSubheading))}),e[8]=p):p=e[8];let g;e[9]!==s?(g=s.formatMessage(zf.primaryCta),e[9]=s,e[10]=g):g=e[10];let h;e[11]!==c||e[12]!==g?(h=i.jsx(Es.Button,{title:g,color:"primary",className:"w-full",onClick:c}),e[11]=c,e[12]=g,e[13]=h):h=e[13];let _;e[14]!==s?(_=s.formatMessage(zf.tertiaryCta),e[14]=s,e[15]=_):_=e[15];let x;e[16]!==d||e[17]!==_?(x=i.jsx(Es.Button,{title:_,color:"ghost",className:"w-full",onClick:d}),e[16]=d,e[17]=_,e[18]=x):x=e[18];let b;e[19]!==x||e[20]!==h?(b=i.jsxs("div",{className:"relative z-1 flex w-full flex-col items-center gap-4 px-9 pt-33 pb-4 text-center",children:[m,p,h,x]}),e[19]=x,e[20]=h,e[21]=b):b=e[21];let y;return e[22]!==n||e[23]!==b?(y=i.jsxs(en,{testId:"modal-claim-business-workspace",isOpen:!0,onClose:n,type:"success",size:"custom",className:"max-w-sm",contentClassName:"p-0! relative! overflow-hidden rounded-2xl",children:[f,b]}),e[22]=n,e[23]=b,e[24]=y):y=e[24],y},va=je(()=>Me(()=>import("./28922843-oxb61d6400uuxlhk.js"),__vite__mapDeps([262,1,2,3,150])).then(t=>t.CreatePromptModal));async function aRe({ctx:t,account:e}){var _,x,b,y,S;const n=e==null?void 0:e.normalizedAccountUserId,s=e==null?void 0:e.getWorkspaceId(),o=ip(t,{includeDisabledByAdmin:!0}),r=o==null?void 0:o.find(C=>C.id===pm),a=o==null?void 0:o.find(C=>C.id===Bu),l=(r==null?void 0:r.status)==="DISABLED_BY_ADMIN"||!r,c=(a==null?void 0:a.status)==="DISABLED_BY_ADMIN"||!a;if(!o)return ws.info("Connector nux recommendation: default_nux (connectors not yet loaded)"),{type:"default_nux"};let u=0,d=!1;if(n)try{const C=await ue.safePost("/aip/connectors/links/list_accessible",{requestBody:{principals:[{type:"USER",id:n}],link_refresh_strategy:"BLOCKING"}}),w=Zd((_=C==null?void 0:C.links)!=null?_:[],k=>k.connector_id);u=Object.keys(w).length}catch(C){d=!0,ws.error("Failed to load connector links for nux recommendation",{error:C})}if(!n||d)return ws.info("Connector nux recommendation: default_nux (missing user or fetch failed)",{normalizedAccountUserIdPresent:!!n,connectorLinkFetchFailed:d}),{type:"default_nux"};if(u>0)return ws.info("Connector nux recommendation: default_nux (already connected)",{connectedConnectorCount:u}),{type:"default_nux"};let f=0,m=0,p="undetermined";if(s)try{const C=await ue.safeGet("/aip/workspace/connector-stats"),w=(x=C==null?void 0:C.connector_stats)!=null?x:[];for(const k of w){const E=Number((b=k.unique_user_cnt)!=null?b:0);Number.isFinite(E)&&(k.connector_id===pm?f+=E:k.connector_id===Bu&&(m+=E))}f>m&&f>0?p="google_drive":m>f&&m>0&&(p="sharepoint")}catch(C){ws.error("Failed to load workspace connector stats for nux recommendation",{error:C})}return V.logStructuredEvent(oX,{connectedConnectorsCount:String(u),googledriveCount:String(f),sharepointCount:String(m),recommendation:p}),p==="undetermined"?(ws.info("Connector nux recommendation: default_nux (undetermined recommendation)"),{type:"default_nux"}):p==="google_drive"&&l?(ws.info("Connector nux recommendation: default_nux (google drive disabled by admin)",{status:r==null?void 0:r.status,connectorPresent:vr[(y=r==null?void 0:r.id)!=null?y:""]!=null}),{type:"default_nux"}):p==="sharepoint"&&c?(ws.info("Connector nux recommendation: default_nux (sharepoint disabled by admin)",{status:a==null?void 0:a.status,connectorPresent:vr[(S=a==null?void 0:a.id)!=null?S:""]!=null}),{type:"default_nux"}):Eo("2748612044").get("show_targetted_recommendation",!1)?{type:"add_connector_link",connectorId:p==="google_drive"?pm:Bu}:{type:"default_nux"}}const iRe="https://cdn.openai.com/chatgpt/gdrive_sp_nux_background.jpg",lRe=je(()=>Me(()=>import("./dde865c8-d0h8yqv6b3wp7ta4.js"),__vite__mapDeps([263,1,2,3,8,264])).then(t=>t.ConnectorsOnboardingModal)),cRe=je(()=>Me(()=>Promise.resolve().then(()=>vie),void 0).then(t=>t.AddConnectorLinkModal));function uRe(t){"use forget";const e=D.c(27),{clientThreadId:n,location:s,composerController:o,persistedSystemHintsStore:r,openFileDialog:a,beaconInfo:l}=t,c=vn(),u=Tn();let d;e[0]===Symbol.for("react.memo_cache_sentinel")?(d=mt(),e[0]=d):d=e[0];const f=!d,m=bt(),p=Un(n),g=p!=null?p:void 0;let h;e[1]!==n||e[2]!==s||e[3]!==g?(h={clientThreadId:n,serverThreadId:g,location:s},e[1]=n,e[2]=s,e[3]=g,e[4]=h):h=e[4];const{onShare:_}=J_(h);let x;e[5]!==n?(x={clientThreadId:n},e[5]=n,e[6]=x):x=e[6];const b=Zp(x);let y;e[7]!==n?(y=()=>ai(n),e[7]=n,e[8]=y):y=e[8];const{mutate:S}=sT(y),C=X(gRe);let w;e[9]!==u?(w=u==null?void 0:u.isWorkspaceAccount(),e[9]=u,e[10]=w):w=e[10];const k=w;let E;return e[11]!==C||e[12]!==l||e[13]!==n||e[14]!==o||e[15]!==c||e[16]!==u||e[17]!==k||e[18]!==s||e[19]!==m||e[20]!==_||e[21]!==a||e[22]!==r||e[23]!==b||e[24]!==p||e[25]!==S?(E=T=>{if(T===void 0)return;const M=l.ui_info.type==="beacon_banner_info"?"banner":"modal",A=typeof T=="object"&&"type"in T&&T.type?T.type:"unknown",I=()=>{var H,$,F;V.logEventWithStatsig("Web Beacon Clicked","chatgpt_web_beacon_clicked",{beacon_id:l.beacon_id,beacon_name:(H=l.beacon_name)!=null?H:"unknown",beacon_type:M,action_id:($=T.id)!=null?$:"unknown",action_type:A,action_enum:B.action_enum}),S({beaconId:l.beacon_id,eventCtaId:(F=T.id)!=null?F:"unknown"});const U=[Oi.PRIMARY,Oi.SECONDARY];A&&U.includes(A)&&Wo.dismiss()},j=U=>{if("onClick"in U&&U.onClick){const H=U.onClick;return G(N({},U),{onClick:()=>{I(),H()}})}if("onThennableClick"in U&&U.onThennableClick){const H=U.onThennableClick;return G(N({},U),{onThennableClick:()=>(I(),H())})}return U},R=()=>OM(r,o,Ke.Glaux,C,{analyticsMetadata:{clientThreadId:n}},k),{action_v2:O,text:L}=T,B=O;switch(B.action_enum){case Sn.FILE_UPLOAD:case Sn.PHOTO_UPLOAD:return j({text:L,onClick:()=>{if(a(),B.composer_text){const H=Vt(o);H.focus(),Bo(H,B.composer_text)}}});case Sn.SYSTEM_HINT:return j({text:L,onClick:()=>{const H=aX(B.hint)||(a7(B.hint)?B.hint:void 0);if(H){if(B.new_chat){const $=new URLSearchParams({[p_]:H});B.composer_text&&$.set("prompt",B.composer_text),Ea(m,{params:$})}else if(OM(r,o,H,C,{analyticsMetadata:{clientThreadId:n}},k),B.composer_text){const $=Vt(o);$.focus(),Bo($,B.composer_text)}}}});case Sn.INVITE_TEAM_MEMBERS:return u?j({text:L,onClick:()=>{rt(HF,{workspace:u})}}):void 0;case Sn.AUTHENTICATE_LOGIN:return j({text:L,onClick:pRe});case Sn.AUTHENTICATE_SIGNUP:return j({text:L,onClick:mRe});case Sn.GET_PRO:return j({text:L,onClick:()=>{if(f)fn({fallbackScreenHint:"login",shouldOpenPaymentModalOnAuth:!0});else{const H=B==null?void 0:B.promo_campaign_id;xs(m,s,D1,H,void 0,{ctaTab:"personal"})}}});case Sn.GET_PLUS:case Sn.GET_GO:case Sn.GET_TEAM:return j({text:L,onClick:()=>{if(f)fn({fallbackScreenHint:"login",shouldOpenPaymentModalOnAuth:!0});else{const H=B==null?void 0:B.promo_campaign_id;xs(m,s,D1,H)}}});case Sn.DISMISS:return j({text:L,onClick:()=>{if(B.composer_text){const H=Vt(o);H.focus(),Bo(H,B.composer_text)}}});case Sn.OPEN_URL:return j({text:L,onClick:()=>{window.open(B.url,"_blank","noopener noreferrer")}});case Sn.OPEN_LOCAL_URL:return j({text:L,onClick:()=>{m(B.web_url)}});case Sn.SHARE_CONVERSATION:return p?j({text:L,onClick:()=>{_()}}):void 0;case Sn.UPDATE_PERSONALITY_TRAIT:return j({text:L,onClick:()=>{const H=new Map,{conversationId:$,messageId:F}=ai(p),z=$===void 0?null:$,W=F===void 0?null:F;Object.entries(B.updated_trait_settings_dict).forEach(Y=>{const[K,Z]=Y;H.set(K,Z)}),rX(c,H,z,W,{optimistic:!0})}});case Sn.CREATE_PROMPT:return{text:L,onClick:()=>{var W,Y,K,Z,J,Q,ne,ie;if(B.open_in_modal===!1)return;const $=ve.getConversationTurns(At(n)).findLast(fRe),F=(J=(Z=(K=(Y=(W=$==null?void 0:$.messages)==null?void 0:W[0])==null?void 0:Y.metadata)==null?void 0:K.system_hints)==null?void 0:Z[0])!=null?J:"",z={name:(Q=B.prompt_name)!=null?Q:"",prompt:(ne=B.prompt_text)!=null?ne:"",description:(ie=B.prompt_description)!=null?ie:"",system_hint:F};rt(va,{prompt:z,referer:"prompt_template_beacon"})}};case Sn.OPEN_CONNECTORS_ONBOARDING_MODAL:return j({text:L,onClick:async()=>{const H=await aRe({ctx:c,account:u!=null?u:void 0});if(H.type==="default_nux"){rt(lRe,{onContinue:R});return}rt(cRe,{connectorId:H.connectorId,backgroundImageUrl:iRe,onComplete:R})}});case Sn.OPEN_CLAIM_BUSINESS_WORKSPACE_MODAL:return j({text:L,onClick:dRe});case Sn.COPY_TO_CLIPBOARD:{const U=B.copy_text;return j({text:U,onThennableClick:()=>{if(U.startsWith("$")){const $=U.slice(1);return zo($.trim())}else return zo(U.trim())}})}case Sn.DROPDOWN:return;case Sn.UPDATE_MODEL_PICKER:return j({text:L,onClick:()=>{if(pd(Pt(n),B.model_slug),B.composer_text){const H=Vt(o);H.focus(),Bo(H,B.composer_text)}}});case Sn.REGENERATE:{const U=ve.getCurrentLeafId(At(n));return j({text:L,onClick:()=>{B.update_model_picker&&pd(Pt(n),B.model_slug),b({sourceEvent:new Event("click"),nodeId:U,requestedModelId:B.model_slug})}})}}},e[11]=C,e[12]=l,e[13]=n,e[14]=o,e[15]=c,e[16]=u,e[17]=k,e[18]=s,e[19]=m,e[20]=_,e[21]=a,e[22]=r,e[23]=b,e[24]=p,e[25]=S,e[26]=E):E=e[26],E}function dRe(){rt(cV)}function fRe(t){return t.role==="user"}function mRe(){fn({fallbackScreenHint:"signup"})}function pRe(){fn({fallbackScreenHint:"login"})}function gRe(){return Ca()}const hRe=t=>{"use forget";var j;const e=D.c(38),{clientThreadId:n,beaconInfo:s,trackBeaconDismissAndClearBeaconUIState:o,onMount:r,openFileDialog:a}=t,{ui_info:l,action_items:c}=s,{title:u,description:d,icon_image_url:f,icon_image_url_dark:m,icon_image_size:p}=l,{isDarkMode:g}=iX(),h=(j=g?m:null)!=null?j:f,_="beacon-banner-".concat(s.beacon_id),x=te(),b=Ip(),y=Wd.useStore();let S;e[0]!==s||e[1]!==n||e[2]!==b||e[3]!==_||e[4]!==a||e[5]!==y?(S={clientThreadId:n,location:_,composerController:b,openFileDialog:a,persistedSystemHintsStore:y,beaconInfo:s},e[0]=s,e[1]=n,e[2]=b,e[3]=_,e[4]=a,e[5]=y,e[6]=S):S=e[6];const C=uRe(S);let w;e[7]!==r?(w=()=>{r==null||r()},e[7]=r,e[8]=w):w=e[8],ox(w);let k;e:{if(c==null){k=void 0;break e}let R;e[9]!==c?(R=c.find(_Re),e[9]=c,e[10]=R):R=e[10],k=R}const E=k;if(E){let R;return e[11]!==s||e[12]!==n||e[13]!==E||e[14]!==C||e[15]!==o?(R=i.jsx(eRe,{beaconInfo:s,conversationId:n,dropdownAction:E,formatAction:C,trackBeaconDismissAndClearBeaconUIState:o}),e[11]=s,e[12]=n,e[13]=E,e[14]=C,e[15]=o,e[16]=R):R=e[16],R}let T,M;if(e[17]!==c||e[18]!==s||e[19]!==C||e[20]!==x||e[21]!==o||e[22]!==l.web_design){M=Symbol.for("react.early_return_sentinel");e:{let R;e[25]!==C?(R=U=>{const H=C(U);return H?{action:U,formatted:H}:null},e[25]=C,e[26]=R):R=e[26];const O=(c!=null?c:[]).map(R).filter(xRe),L=O.find(yRe);if(L&&"onThennableClick"in L.formatted&&L.formatted.onThennableClick){const U={text:L.formatted.text,onThennableClick:L.formatted.onThennableClick};M=i.jsx(qPe,{beaconInfo:s,copyBeaconAction:U,trackBeaconDismissAndClearBeaconUIState:o});break e}const B=O.filter(bRe);t:{if(B.length===0){T=void 0;break t}let U;e[27]!==x||e[28]!==l.web_design?(U=H=>{const{action:$,formatted:F}=H,z=typeof F.text=="string"?F.text:x.formatMessage(F.text),W=()=>{var K;"onThennableClick"in F&&F.onThennableClick?F.onThennableClick():(K=F.onClick)==null||K.call(F)},Y=l.web_design===LM.COMPOSER?q("text-[#5856D6] dark:text-[#DCDBF6]","min-h-8"):"w-full sm:w-auto";return i.jsx(Se,{color:tRe($.type),onClick:W,className:Y,children:z},$.id)},e[27]=x,e[28]=l.web_design,e[29]=U):U=e[29],T=i.jsx("div",{className:"flex w-full flex-col gap-2 sm:flex-row sm:items-center sm:gap-3",children:B.map(U)})}}e[17]=c,e[18]=s,e[19]=C,e[20]=x,e[21]=o,e[22]=l.web_design,e[23]=T,e[24]=M}else T=e[23],M=e[24];if(M!==Symbol.for("react.early_return_sentinel"))return M;const A=T;let I;return e[30]!==h||e[31]!==A||e[32]!==d||e[33]!==p||e[34]!==u||e[35]!==o||e[36]!==l.web_design?(I=l.web_design===LM.COMPOSER?i.jsx(lV,{onDismiss:o,title:u,description:d,actions:A?{customActions:A}:void 0,bannerIconImageUrl:h,bannerIconSize:p!=null?p:void 0}):i.jsx(Ym,{bannerIconImageUrl:h,bannerIconSize:p!=null?p:void 0,onDismiss:o,title:u,description:d,actions:A?{customActions:A}:void 0}),e[30]=h,e[31]=A,e[32]=d,e[33]=p,e[34]=u,e[35]=o,e[36]=l.web_design,e[37]=I):I=e[37],I};function _Re(t){return(t==null?void 0:t.action_v2.action_enum)===Sn.DROPDOWN}function xRe(t){return t!=null}function yRe(t){const{action:e,formatted:n}=t;return e.type===Oi.COPY&&"onThennableClick"in n&&typeof n.onThennableClick=="function"}function bRe(t){const{action:e}=t;return e.type!==Oi.COPY}const uV="plus_free_trial_homepage_banner",Mdt=t=>{"use forget";const e=D.c(31),{clientThreadId:n,openFileDialog:s}=t,o=Ze(n,ve.getRequestId),r=Ze(n,ve.getCurrentLeafId),a=Dr(o);let l;e[0]!==n?(l=Pt(n),e[0]=n,e[1]=l):l=e[1];const c=l;let u;e[2]!==c?(u=()=>c.serverId$(),e[2]=c,e[3]=u):u=e[3];const d=X(u);let f;e[4]!==r||e[5]!==d?(f={serverThreadId:d,leafId:r},e[4]=r,e[5]=d,e[6]=f):f=e[6];const m=vw(f);let p;e[7]!==d?(p=()=>ai(d),e[7]=d,e[8]=p):p=e[8];const g=p,h=bg(g),_=vg(g);let x;e[9]!==(m==null?void 0:m.beacon_id)||e[10]!==(m==null?void 0:m.beacon_name)||e[11]!==(m==null?void 0:m.ui_info)||e[12]!==a?(x=()=>{var M,A;a&&(m==null?void 0:m.ui_info.dismiss_variant)!==_1.PERSISTENT&&(V.logEventWithStatsig("Web Beacon Ignored","chatgpt_web_beacon_ignored",{beacon_id:(M=m==null?void 0:m.beacon_id)!=null?M:"unknown",beacon_name:(A=m==null?void 0:m.beacon_name)!=null?A:"unknown",beacon_type:"banner"}),Wo.dismiss())},e[9]=m==null?void 0:m.beacon_id,e[10]=m==null?void 0:m.beacon_name,e[11]=m==null?void 0:m.ui_info,e[12]=a,e[13]=x):x=e[13];let b;e[14]!==m||e[15]!==a?(b=[a,m],e[14]=m,e[15]=a,e[16]=b):b=e[16],v.useEffect(x,b);const y=v.useRef(!1);let S;e[17]!==m||e[18]!==h?(S=()=>{y.current||m&&(V.logEventWithStatsig("Web Beacon Shown","chatgpt_web_beacon_shown",{beacon_id:m.beacon_id,beacon_name:m.beacon_name,beacon_type:"banner"}),h.mutate(m.beacon_id),m.beacon_id===uV&&kt(We.hasSeenPlusFreeTrialHomepageAnnouncementBanner),y.current=!0)},e[17]=m,e[18]=h,e[19]=S):S=e[19];const C=S;let w;e[20]!==m||e[21]!==_?(w=()=>{m&&(V.logEventWithStatsig("Web Beacon Dismissed","chatgpt_web_beacon_dismissed",{beacon_id:m.beacon_id,beacon_name:m.beacon_name,beacon_type:"banner"}),_.mutate(m.beacon_id)),Wo.dismiss()},e[20]=m,e[21]=_,e[22]=w):w=e[22];const k=w;let E;e[23]!==m||e[24]!==n||e[25]!==C||e[26]!==s||e[27]!==k?(E=m&&i.jsx(wt.div,{transition:{type:"tween",ease:"easeInOut",duration:.1},initial:{opacity:0,transform:"translateY(8px)"},animate:{opacity:1,transform:"translateY(0px)"},exit:{opacity:0,transform:"translateY(8px)"},children:i.jsx(hRe,{clientThreadId:n,beaconInfo:m,trackBeaconDismissAndClearBeaconUIState:k,onMount:C,openFileDialog:s})}),e[23]=m,e[24]=n,e[25]=C,e[26]=s,e[27]=k,e[28]=E):E=e[28];let T;return e[29]!==E?(T=i.jsx(In,{children:E}),e[29]=E,e[30]=T):T=e[30],T};function Adt(t){const e=Ze(t,ve.getRequestId),n=Dr(e),s=VPe(),o=Pt(t),r=X(()=>i7(o)),a=X(()=>o.serverId$()),l=Ze(t,ve.getCurrentLeafId),c=vw({serverThreadId:a,leafId:l}),u=Object.values(Sn),d=c!=null&&c.action_items.every(f=>u.includes(f.action_v2.action_enum)?f.action_v2.action_enum===Sn.DROPDOWN?f.action_v2.items.every(m=>u.includes(m.action_v2.action_enum)):f.action_v2.action_enum===Sn.CREATE_PROMPT?!r:!0:!1);return!s&&(!n||(c==null?void 0:c.ui_info.dismiss_variant)===_1.PERSISTENT)&&d}const vRe=3,SRe=3,db="oai/apps/connectorInContextUpsellBannerV1";function CRe(){return!!Je("3819205143",{disableExposureLog:!1}).get("enabled",!0)}function wRe(t){return t?new Date>bC(t,vRe):!0}function dV(t){var d;const[e,n]=op(db,null,f=>f!=null&&typeof f=="object"&&typeof f.messageId=="string"&&typeof f.lastSeenAt=="number"&&typeof f.interacted=="boolean"&&typeof f.viewCount=="number"&&typeof f.hasDismissed=="boolean"),s=CRe(),o=e?Or(e.lastSeenAt):null,r=e&&(d=e.viewCount)!=null?d:0,a=e?e.hasDismissed:!1;return{canBeSeen:t!==""&&!a&&s&&(!e||r<=SRe&&(wRe(o)||e.interacted===!1)),markSeen:f=>{const m={messageId:t,lastSeenAt:pa(new Date),interacted:f,viewCount:(e?e.viewCount:0)+(f?0:1),hasDismissed:a};Fe.count(Ue.DEFAULT,"connector_upsell_banner_shown"),n(m),window.localStorage.setItem(db,JSON.stringify(m))},markDismissed:()=>{const f={messageId:t,lastSeenAt:pa(new Date),interacted:!0,viewCount:0,hasDismissed:!0};Fe.count(Ue.DEFAULT,"connector_upsell_banner_dismissed"),n(f),window.localStorage.setItem(db,JSON.stringify(f))}}}const VS=30,kRe=3,ERe=1,zS=tn(ls(()=>({lastSeenInContextUpsellBannerAt:MRe()}))),WS=tn(ls(()=>({inContextUpsellBannerPeriodStartAt:fV()}))),qS=tn(ls(()=>({inContextUpsellBannerPeriodExposureCount:mV()}))),KS=tn(ls(()=>({inContextUpsellBannerInteractedInPeriod:ARe()}))),YS=tn(ls(()=>({inContextUpsellBannerLastSeenId:pV()})));function TRe(t){if(pV()===t)return;const n=fV(),s=mV();!n||!s||Ho(Date.now(),n)>=VS?ZS({lastSeenAt:new Date,periodStartAt:new Date,exposureCount:1,interactedInPeriod:!1,lastSeenId:t}):ZS({lastSeenAt:new Date,exposureCount:s+1,lastSeenId:t})}function ZS({lastSeenAt:t,periodStartAt:e,exposureCount:n,interactedInPeriod:s,lastSeenId:o}){t===void 0?t=zS.getState().lastSeenInContextUpsellBannerAt:zS.setState(a=>{a.lastSeenInContextUpsellBannerAt=t===void 0?null:t}),e===void 0?e=WS.getState().inContextUpsellBannerPeriodStartAt:WS.setState(a=>{a.inContextUpsellBannerPeriodStartAt=e===void 0?null:e}),n===void 0?n=qS.getState().inContextUpsellBannerPeriodExposureCount:qS.setState(a=>{a.inContextUpsellBannerPeriodExposureCount=n===void 0?null:n}),s===void 0?s=KS.getState().inContextUpsellBannerInteractedInPeriod:KS.setState(a=>{a.inContextUpsellBannerInteractedInPeriod=s===void 0?null:s}),o===void 0?o=YS.getState().inContextUpsellBannerLastSeenId:YS.setState(a=>{a.inContextUpsellBannerLastSeenId=o===void 0?null:o});const r={lastSeenInContextUpsellBannerAt:t?String(pa(t)):null,inContextUpsellBannerPeriodStartAt:e?String(pa(e)):null,inContextUpsellBannerPeriodExposureCount:n,inContextUpsellBannerInteractedInPeriod:s,inContextUpsellBannerLastSeenId:o};localStorage.setItem(Ie.O3MiniHighInContextUpsellBanner,JSON.stringify(r))}function Sg(){const t=localStorage.getItem(Ie.O3MiniHighInContextUpsellBanner);if(!t)return null;try{return JSON.parse(t)}catch(e){return null}}function MRe(){var e;const t=(e=Sg())==null?void 0:e.lastSeenInContextUpsellBannerAt;return t?Or(Number(t)):null}function fV(){var e;const t=(e=Sg())==null?void 0:e.inContextUpsellBannerPeriodStartAt;return t?Or(Number(t)):null}function mV(){var t,e;return(e=(t=Sg())==null?void 0:t.inContextUpsellBannerPeriodExposureCount)!=null?e:null}function ARe(){var t,e;return(e=(t=Sg())==null?void 0:t.inContextUpsellBannerInteractedInPeriod)!=null?e:null}function pV(){var t,e;return(e=(t=Sg())==null?void 0:t.inContextUpsellBannerLastSeenId)!=null?e:null}const NRe=[an.UPGRADE_TO_GO,an.GET_PLUS,an.GET_PRO,an.GET_BUSINESS_TRIAL,an.GET_PLUS_TRIAL,an.GET_BUSINESS];function gV(t){V.logEvent("Rate Limit: Click Upsell",t),ft.logEvent("chatgpt_rate_limit_get_plus_button_clicked",null,G(N({},t),{is_new_conversation:t.is_new_conversation?t.is_new_conversation.toString():"",is_hard_block:t.is_hard_block.toString()}))}function Wf(t){V.logEvent("Rate Limit: Click Upsell",t),ft.logEvent("chatgpt_rate_limit_upgrade_plan_button_clicked",null,G(N({},t),{is_new_conversation:t.is_new_conversation.toString(),is_hard_block:t.is_hard_block.toString()}))}const IRe=je(()=>Me(()=>Promise.resolve().then(()=>q$e),void 0).then(t=>t.TatertotNuxModal));function jRe({clientThreadId:t,rateLimitInfo:e,onDismiss:n,onInteract:s,onMount:o}){"use no forget";var ke;const r=Nt(),{name:a,title:l,call_to_action:c,description:u,icon_image_url:d}=e,f="metadata"in e&&e.metadata?e.metadata:{},m=Et(),{updateSystemHint:p}=Cl(),g=Ip(),h=lX(),_=Ze(t,ve.getIsNewConversation),x=(ke=m==null?void 0:m.planType)!=null?ke:"unknown",b=Bd(),y=he=>{switch(he.trim().toLowerCase()){case"image_gen":return Jt.ACCESS_FLOW_ENTRY_POINT_RATE_LIMIT_BANNER_IMAGE_GEN;case"send":return Jt.ACCESS_FLOW_ENTRY_POINT_RATE_LIMIT_BANNER_SEND;case"gizmo":return Jt.ACCESS_FLOW_ENTRY_POINT_RATE_LIMIT_BANNER_GIZMO;case"gizmo_tag":return Jt.ACCESS_FLOW_ENTRY_POINT_RATE_LIMIT_BANNER_GIZMO_TAG;case"dalle":case"dall_e":return Jt.ACCESS_FLOW_ENTRY_POINT_RATE_LIMIT_BANNER_DALLE;case"advanced_data_analysis":return Jt.ACCESS_FLOW_ENTRY_POINT_RATE_LIMIT_BANNER_ADAVANCED_DATA_ANALYSIS;case"gpt_4o":return Jt.ACCESS_FLOW_ENTRY_POINT_RATE_LIMIT_BANNER_GPT_4O;case"gpt_5_auto":return Jt.ACCESS_FLOW_ENTRY_POINT_RATE_LIMIT_BANNER_GPT_5_AUTO;case"progress_banner_gpt_5":return Jt.ACCESS_FLOW_ENTRY_POINT_RATE_LIMIT_BANNER_PROGRESS_BANNER_GPT_5;default:return Jt.ACCESS_FLOW_ENTRY_POINT_RATE_LIMIT_BANNER_TEMPLATE}},S=h&&"block_reason"in h?h.block_reason:null,C="banner_description",w=a===cX.FILE_UPLOAD,k="Prompt textarea rate limit banner",E=v.useMemo(()=>w?{isStorageUpsellActive:!0}:void 0,[w]),T=v.useMemo(()=>({type:a||"unknown",location:C,plan_type:x,is_new_conversation:_,is_hard_block:!!h,hard_block_reason:S!=null?S:"",call_to_action:c,title:l,description:u,icon_image_url:d}),[a,x,_,h,S,c,l,u,d]),M=bt(),A=v.useCallback(async({view:he}={view:void 0})=>{await r.invalidateQueries(FP()),xs(M,k,void 0,void 0,he)},[M,k,r]),I=!mt(),j=Hp(yn.signUpButtonText),{eligible:R,isLoading:O}=Ct(We.hasSeenTatertotNux),L=wF();let B=null;L.eligible&&(B=L.campaignId);const U=Je("1368081792"),H=Je("1417507197"),$=a9(),F=Vo({skip:a!=="agent-connector-in-context-upsell",fetchValidLinksOnly:!0,productSku:"n7jupd"}),z=Array.from(F.connectorLinks.values()).some(he=>he.some(Ee=>Ee.connector_id===(f==null?void 0:f.connector_id))),{addSource:W}=Yc(t),Y=he=>{switch(he){case an.CONNECT_CONNECTOR:return{text:yn.connect,onClick:()=>{V.logEventWithStatsig("Agent Connector In Context Upsell Banner CTA Clicked","chatgpt_agent_connector_in_context_upsell_banner_cta_clicked",{location:"Agent Connector In Context Upsell Banner CTA Clicked",eventProperties:T});const Ee=Lt(t),Pe=Ee?new URL(ia(Ee),window.location.origin):new URL(window.location.href);if(Pe.searchParams.set("oauth_success","true"),!!(f!=null&&f.connector_id))if(z){W(vr[f==null?void 0:f.connector_id]);return}else $({connectorId:f==null?void 0:f.connector_id,redirectAfter:Pe.toString(),systemHintType:Ke.Agent})}};case an.AUTHENTICATE:return{text:yn.logInButtonText,onClick:()=>{fn({fallbackScreenHint:"login",callback:Ee=>{_o({location:"Rate limit banner - ".concat(a),provider:Ee},y(a))},skipLoginModal:!Va()})}};case an.AUTHENTICATE_SECONDARY:return{text:j,onClick:()=>{fn({fallbackScreenHint:"signup",callback:Ee=>{ci({location:"Rate limit banner - ".concat(a),provider:Ee},y(a))},skipLoginModal:!Va()})}};case an.GET_PLUS:return{text:B_(),onClick:()=>{gV(T),I?fn({fallbackScreenHint:"login",shouldOpenPaymentModalOnAuth:!0,callback:Ee=>{_o({location:"Rate limit banner Get Plus upsell",provider:Ee},Jt.ACCESS_FLOW_ENTRY_POINT_RATE_LIMIT_BANNER_GET_PLUS_UPSELL)},skipLoginModal:!Va()}):!w&&H.get("rl_direct_to_checkout",!1)?M("/buy/plus"):xs(M,k,void 0,void 0,void 0,E)}};case an.NEW_CHAT:return{text:Ti.newChatButton,onClick:()=>{kl({location:C}),Ea(M)}};case an.DEEP_RESEARCH_IN_CONTEXT_UPSELL:{const Ee=ve.findNode(At(t),Ae=>k3(Ae.message)),Pe=Ee?Ss(Ee.message):void 0;return{text:Ti.tryItButton,onClick:()=>{V.logEventWithStatsig("In Context Upsell Banner Deep Research CTA Clicked","chatgpt_in_context_upsell_banner_deep_research_cta_clicked",{location:"In-context upsell deep research - Try it button",eventProperties:T}),p(Ke.Research,{clientThreadId:t});const Ae=Vt(g);Ae.focus(),Bo(Ae,Pe!=null?Pe:"")}}}case an.GET_PRO:return{text:Ime(),onClick:()=>{Wf(G(N({},T),{upgrade_plan_tye:"pro"})),I?fn({fallbackScreenHint:"login",shouldOpenPaymentModalOnAuth:!0,callback:Ee=>{_o({location:"Rate limit banner Get Pro upsell",provider:Ee},Jt.ACCESS_FLOW_ENTRY_POINT_RATE_LIMIT_BANNER_GET_PRO_UPSELL)},skipLoginModal:!Va()}):xs(M,"Prompt textarea rate limit banner")}};case an.UPGRADE_TO_GO:return{text:Ti.upgradeToGoButton,onClick:()=>{Wf(G(N({},T),{upgrade_plan_tye:"go"})),I?fn({fallbackScreenHint:"login",shouldOpenPaymentModalOnAuth:!0,callback:Ee=>{_o({location:"Rate limit banner Upgrade to Go upsell",provider:Ee},Jt.ACCESS_FLOW_ENTRY_POINT_RATE_LIMIT_BANNER_UPGRADE_TO_GO_UPSELL)},skipLoginModal:!Va()}):xs(M,k,void 0,void 0,void 0,E)}};case an.GET_BUSINESS:return{text:Ti.getBusinessButton,onClick:()=>{Wf(G(N({},T),{upgrade_plan_tye:"business"})),xs(M,k)}};case an.GET_BUSINESS_TRIAL:return{text:Ti.getBusinessTrialButton,onClick:async()=>{Wf(G(N({},T),{upgrade_plan_tye:"business"})),await A()}};case an.GET_PLUS_TRIAL:return{text:Ti.getPlusTrialButton,onClick:async()=>{if(Wf(G(N({},T),{upgrade_plan_tye:"plus"})),!w&&H.get("rl_direct_to_checkout",!1))if(B){const Ee=new URLSearchParams;Ee.set(gw,B);const Pe=Ee.toString();M("/buy/plus?"+Pe)}else M("/buy/plus");else await A({view:wle})}};case an.TRY_CODEX:return{text:Ti.tryCodexButton,onClick:()=>{V.logEventWithStatsig("In Context Upsell Banner Codex CTA Clicked","chatgpt_in_context_upsell_banner_codex_cta_clicked",{location:"In-context upsell codex - Try Codex button",eventProperties:T}),M("/codex")}};case an.TRY_TATERTOT:return{text:Ti.tryItButton,onClick:()=>{V.logEventWithStatsig("In Context Upsell Banner Tatertot CTA Clicked","chatgpt_in_context_upsell_banner_tatertot_cta_clicked",{location:"In-context upsell tatertot - Try it button",eventProperties:T}),Fe.count(Ue.TATERTOT,"tatertot_upsell_banner_try_it_clicked"),p(Ke.Tatertot,{clientThreadId:t}),!O&&R&&xe("1586944302")&&rt(IRe)}};case an.NOTIFY_ADMIN_FOR_CREDITS:case an.ADD_CREDITS:return null}};ox(()=>{!U.get("should_change_model_picker",!0)&&T.type==="o3-mini-high-in-context-upsell-plus"&&(T.type="o3-mini-high-in-context-upsell-plus-no-model-switch");let he,Ee;switch(T.type){case"account_sharing_degrade":he="Account Sharing Degrade: Show Info",Ee="chatgpt_account_sharing_degrade_banner_shown";break;case"image-gen-multi-stream-banner":he="Image Gen Multi Stream: Show Multitasking Banner",Ee="chatgpt_image_gen_multi_stream_banner_shown";break;case"pro-mode-async-banner":he="Pro Mode Async Banner: Show Multitasking Banner",Ee="chatgpt_pro_mode_async_banner_shown";break;case"deep-research-banner":he="Deep Research Banner: Show Multitasking Banner",Ee="chatgpt_deep_research_banner_shown";break;case"tatertot-in-context-upsell":case"o3-mini-high-in-context-upsell-free":case"o3-mini-high-in-context-upsell-plus":case"deep-research-in-context-upsell":case"deep-research-in-context-upsell-free":case"codex-in-context-upsell":case"codex-in-context-upsell-plus":he="In-Context Upsell Banner: Show Info",Ee="chatgpt_in_context_upsell_banner_shown";break;case"agent-connector-in-context-upsell":he="Agent Connector In Context Upsell Banner: Show Info",Ee="chatgpt_agent_connector_in_context_upsell_banner_shown";break;default:he="Rate Limit: Show Info",Ee="chatgpt_rate_limit_banner_shown";break}V.logEvent(he,T);const oe=T,{call_to_action:Pe}=oe,de=De(oe,["call_to_action"]);Pe==null||Pe.forEach((se,Oe)=>{de["call_to_action.".concat(Oe)]=se}),ft.logEvent(Ee,null,G(N({},de),{is_new_conversation:T.is_new_conversation.toString(),is_hard_block:T.is_hard_block.toString()})),o==null||o()});const[K,Z]=c!=null?c:[];let J=Z;K===an.AUTHENTICATE&&b&&(J=an.AUTHENTICATE_SECONDARY);const Q=xe("2861925050");let ne={};Q&&(K===an.NOTIFY_ADMIN_FOR_CREDITS||K===an.ADD_CREDITS)?K===an.ADD_CREDITS?ne={customActions:i.jsx(cF,{trigger:"prompt-textarea-rate-limit-banner"})}:K===an.NOTIFY_ADMIN_FOR_CREDITS&&(ne={customActions:i.jsx(uF,{creditConsumingProduct:W0e(a),trigger:"prompt-textarea-rate-limit-banner"})}):ne={primaryAction:Y(K),secondaryAction:Y(J)};const ie=f==null?void 0:f.connector_id,{platformConnectors:fe,isLoading:ae}=t_(!!ie),le=ie?fe.get(ie):void 0;let pe=null;const _e=Je("2206338824"),Ce=!_&&NRe.includes(K)?_e.get("web_design_style","control"):"control",ge=Ce==="composer_banner",Re=Ce==="purple_cta";if(v.useEffect(()=>{Wo.dismiss()},[]),a==="agent-connector-in-context-upsell"){if(ie===void 0||!le||ae)return null;pe=i.jsx(Vc,{connector:le,size:"xxlarge"})}return ge?i.jsx(lV,{onDismiss:n,title:l,description:u,actions:ne,onInteract:s,bannerIconImageUrl:d!=null?d:void 0,icon:pe}):i.jsx(Ym,{onDismiss:n,title:l,description:u,actions:ne,primaryButtonClassName:q({"bg-[#F1F1FB] text-[#5D5BD0] hover:bg-[#E4E4F6] dark:bg-[#373669] dark:text-[#DCDBF6] dark:hover:bg-[#414071]":Re}),onInteract:s,bannerIconImageUrl:d!=null?d:void 0,icon:pe})}const Ti=we({upgradeToGoButton:{id:"SuXEJy",defaultMessage:"Upgrade to Go"},newChatButton:{id:"7OvnJ5",defaultMessage:"New chat"},tryItButton:{id:"zPDzun",defaultMessage:"Try it"},tryCodexButton:{id:"KcWniZ",defaultMessage:"Try Codex"},getBusinessTrialButton:{id:"PMkLT4",defaultMessage:"Try Business free"},getBusinessButton:{id:"KorZ1v",defaultMessage:"Get Business"},getPlusTrialButton:{id:"H+N0ro",defaultMessage:"Try Plus free"}}),Ndt=t=>{"use forget";const e=D.c(29),{clientThreadId:n,composerController:s}=t,o=E3(),r=Ze(n,ve.getRequestId),a=Ze(n,ve.getCurrentLeafId),l=Dr(r),{markSeen:c}=l7(a),{markSeen:u,markDismissed:d}=dV(a);let f;e[0]===Symbol.for("react.memo_cache_sentinel")?(f=Je("1368081792"),e[0]=f):f=e[0];const m=f;let p;e[1]!==o||e[2]!==a||e[3]!==u||e[4]!==c?(p=o!=null&&o.name?()=>{e:switch(o.name){case"tatertot-in-context-upsell":{c(!1);break e}case"agent-connector-in-context-upsell":{u(!1);break e}case"o3-mini-high-in-context-upsell-free":case"o3-mini-high-in-context-upsell-plus":case"deep-research-in-context-upsell":case"deep-research-in-context-upsell-free":case"codex-in-context-upsell":case"codex-in-context-upsell-plus":TRe(a)}}:void 0,e[1]=o,e[2]=a,e[3]=u,e[4]=c,e[5]=p):p=e[5];const g=p,h=(o==null?void 0:o.name)==="gpt-4l";let _;e[6]!==l||e[7]!==h?(_=()=>{l&&!h&&w1.dismissBanner()},e[6]=l,e[7]=h,e[8]=_):_=e[8];let x;e[9]!==s||e[10]!==l||e[11]!==h?(x=[l,h,s],e[9]=s,e[10]=l,e[11]=h,e[12]=x):x=e[12],v.useEffect(_,x);let b;e[13]!==(o==null?void 0:o.is_dismissible)||e[14]!==(o==null?void 0:o.name)||e[15]!==d?(b=o!=null&&o.is_dismissible?()=>{(o==null?void 0:o.name)==="agent-connector-in-context-upsell"?V.logEventWithStatsig("Dismiss Agent Connector In Context Upsell Banner","chatgpt_agent_connector_in_context_upsell_banner_dismissed",{type:"agent-connector-in-context-upsell"}):V.logEventWithStatsig("Rate Limit: Dismiss Banner","chatgpt_rate_limit_banner_dismissed",{type:!m.get("should_change_model_picker",!0)&&(o==null?void 0:o.name)==="o3-mini-high-in-context-upsell-plus"?"o3-mini-high-in-context-upsell-plus-no-model-switch":o==null?void 0:o.name}),(o==null?void 0:o.name)==="agent-connector-in-context-upsell"&&d(),w1.dismissBanner()}:void 0,e[13]=o==null?void 0:o.is_dismissible,e[14]=o==null?void 0:o.name,e[15]=d,e[16]=b):b=e[16];const y=b;let S;e[17]!==(o==null?void 0:o.name)||e[18]!==u||e[19]!==c?(S=()=>{e:switch(o==null?void 0:o.name){case"o3-mini-high-in-context-upsell-free":case"o3-mini-high-in-context-upsell-plus":case"deep-research-in-context-upsell":case"deep-research-in-context-upsell-free":case"codex-in-context-upsell":case"codex-in-context-upsell-plus":{ZS({interactedInPeriod:!0});break e}case"tatertot-in-context-upsell":{c(!0);break e}case"agent-connector-in-context-upsell":{u(!0);break e}}},e[17]=o==null?void 0:o.name,e[18]=u,e[19]=c,e[20]=S):S=e[20];const C=S;if((o==null?void 0:o.name)==="precise-location-banner")return null;let w;e[21]!==o||e[22]!==n||e[23]!==y||e[24]!==C||e[25]!==g?(w=o&&i.jsx(wt.div,{transition:{type:"tween",ease:"easeInOut",duration:.1},initial:{opacity:0,transform:"translateY(8px)"},animate:{opacity:1,transform:"translateY(0px)"},exit:{opacity:0,transform:"translateY(8px)"},children:i.jsx(jRe,{clientThreadId:n,rateLimitInfo:o,onDismiss:y,onInteract:C,onMount:g})}),e[21]=o,e[22]=n,e[23]=y,e[24]=C,e[25]=g,e[26]=w):w=e[26];let k;return e[27]!==w?(k=i.jsx(In,{children:w}),e[27]=w,e[28]=k):k=e[28],k};function PRe(t,e,n,s,o,r,a,l,c,u,d,f,m){if(c||(t.name==="o3-mini-high-in-context-upsell-free"||t.name==="o3-mini-high-in-context-upsell-plus")&&(e.some(S=>S.model_slug==="o4-mini-high")||(n==null?void 0:n.id)==="o4-mini-high")||l&&a&&Ho(Date.now(),a)<VS)return!1;const g=s==null||Ho(Date.now(),s)>=ERe,h=o===u,_=a==null||r==null||Ho(Date.now(),a)>=VS||r<kRe;if(!(g&&_||h))return!1;switch(t.name){case"deep-research-in-context-upsell":return d("should_show_deep_research_upsell_banner",!1);case"deep-research-in-context-upsell-free":return d("should_show_deep_research_upsell_banner_free",!1);case"o3-mini-high-in-context-upsell-free":return d("should_show_o3_mini_high_upsell_banner_free_user_to_plus",!1);case"o3-mini-high-in-context-upsell-plus":return d("should_show_o3_mini_high_upsell_banner_plus_user",!1);case"codex-in-context-upsell":return f("should_show_codex_upsell_banner",!1);case"codex-in-context-upsell-plus":return m("should_show_codex_upsell_banner",!1);default:return!1}}function Idt(t){"use no forget";var C;const e=cp(),n=X(()=>Qo()),s=XC(),o=X(()=>Fn(Pt(t))),r=Ze(t,ve.getRequestId),a=Ze(t,ve.getCurrentLeafId),l=Dr(r),c=zS(w=>w.lastSeenInContextUpsellBannerAt),u=qS(w=>w.inContextUpsellBannerPeriodExposureCount),d=WS(w=>w.inContextUpsellBannerPeriodStartAt),f=YS(w=>w.inContextUpsellBannerLastSeenId),m=KS(w=>w.inContextUpsellBannerInteractedInPeriod),p=Je("1368081792"),g=Je("1738106734"),h=Je("3861158060"),_=Je("1092897457"),x=E3(),{canBeSeen:b}=l7(a),{canBeSeen:y}=dV(a);if(e||n)return!1;let S=!1;switch(x==null?void 0:x.name){case null:case void 0:break;case"o3-mini-high-in-context-upsell-free":case"o3-mini-high-in-context-upsell-plus":case"deep-research-in-context-upsell":case"deep-research-in-context-upsell-free":case"codex-in-context-upsell":case"codex-in-context-upsell-plus":S=PRe(x,s,o,c,f,u,d,m,l,a,p.get,g.get,h.get);break;case"tatertot-in-context-upsell":S=b&&_.get("is_tatertot_enabled",!0)&&_.get("is_upsell_banner_enabled",!0);break;case"agent-connector-in-context-upsell":S=y&&((C=x.metadata)==null?void 0:C.connector_id)!==void 0;break;case"precise-location-banner":S=!1;break;default:S=!0}return!l&&S}function jdt(t){"use forget";const e=D.c(2);if(!t.shouldRender)return null;let n;return e[0]!==t?(n=i.jsx(RRe,N({},t)),e[0]=t,e[1]=n):n=e[1],n}function RRe({contentArea:t,children:e}){"use no forget";const{store:n}=Ok(),s=v.useRef(null);return n.useContentAreaResizeObserver(t,s),i.jsx("div",{ref:s,className:"relative h-full w-full",children:e})}const Pdt=st(!1),iT=t=>{switch(t){case"thumbsDown":return"thumbs_down";case"thumbsUp":return"thumbs_up"}},ORe="ecosystem_app_feedback",LRe="ecosystem_suggestion_interaction";function Hr(t,e,n="CHAT"){return{signal_detail:{common_metadata:e},signal_type:t,signal_metadata:{},user_metadata:{},product_surface:n}}function $r(t){ue.safePost("/unified_user_signals",{requestBody:t,authOption:Ot.SendIfAvailable})}function DRe(t,e,n,s="CHAT",o){var r=Hr("message_feedback",N({conversation_id:e,message_id:n},o!=null&&o.originatingConversationId?{originating_conversation_id:o.originatingConversationId}:{}),s);r.signal_detail.message_feedback=t,$r(r)}function BRe(t,e,n,s="CHAT"){var o=Hr("conversation_rating",{conversation_id:e,message_id:n},s);o.signal_detail.conversation_rating=t,$r(o)}function Rdt(t,e,n,s,o={},r="CHAT"){const a=Hr(t,{conversation_id:e,message_id:n,image_generation_id:s},r);Object.assign(a.signal_detail,o),$r(a)}function lT(t,e,n,s="CHAT"){var o=Hr("turn_regeneration",{conversation_id:e,model_slug:n},s);o.signal_detail.turn_regeneration=t,$r(o)}function Odt(t,e,n="CHAT"){var s=Hr("active_branch_switch",{conversation_id:e},n);s.signal_detail.active_branch_switch=t,$r(s)}function FRe(t,e,n,s,o="CHAT"){return Hr(t,{conversation_id:e,message_id:n,model_slug:s},o)}function Ldt(t,e,n,s,o,r="CHAT"){if(!xe("2637496240"))return;const l=FRe(t==="accept"?"writing_block_magic_edit_accepted":"writing_block_magic_edit_rejected",n,s,o,r);t==="accept"?l.signal_detail.writing_block_magic_edit_accepted=e:l.signal_detail.writing_block_magic_edit_rejected=e,$r(l)}function URe(t,e,n="CHAT"){const s=Hr("survey_submission",{conversation_id:e},n);s.signal_detail.survey_submission=t,$r(s)}function HRe(t,e,n="CHAT"){const s=Hr("survey_seen",{conversation_id:e},n);s.signal_detail.survey_seen=t,$r(s)}function $Re(t,e,n="CHAT"){var o,r;const s=Hr("survey_dismissed",{conversation_id:e},n);s.signal_detail.survey_dismissed={survey_campaign_name:(o=t.survey_campaign_name)!=null?o:null,survey_election_id:(r=t.survey_election_id)!=null?r:null},$r(s)}function Ddt({rating:t,conversationId:e,messageId:n,suggestionMessageId:s,attributionId:o,widgetType:r,productSurface:a="CHAT"}){const l=Hr(ORe,{conversation_id:e!=null?e:null,message_id:n!=null?n:null},a);l.signal_detail.ecosystem_app_feedback={rating:iT(t),attribution_id:o!=null?o:null,widget_type:r!=null?r:null,suggestion_message_id:s!=null?s:null},$r(l)}function Bdt({conversationId:t,messageId:e,suggestionMessageId:n,connectorId:s,eventType:o,productSurface:r="CHAT"}){if(!t||!e||!s)return;const a=Hr(LRe,{conversation_id:t,message_id:e},r);a.signal_detail.ecosystem_suggestion_interaction={suggestion_message_id:n,connector_id:s,event_type:o},$r(a)}function Fdt(t){"use forget";const e=D.c(12),{clientThreadId:n,conversationMode:s,retryOption:o,sourceEvent:r}=t;let a;e[0]!==n||e[1]!==s?(a={clientThreadId:n,conversationMode:s},e[0]=n,e[1]=s,e[2]=a):a=e[2];const l=Zp(a);let c;e[3]===Symbol.for("react.memo_cache_sentinel")?(c={disablePerfDetector:!0},e[3]=c):c=e[3];const{lastAssistantMessageId:u,lastAssistantModelSlug:d,parentPromptId:f}=Ze(n,GRe,c);let m;return e[4]!==n||e[5]!==u||e[6]!==d||e[7]!==f||e[8]!==l||e[9]!==o||e[10]!==r?(m=()=>{if(!u||!f)return;const p=Lt(n);p&&d&&xe("3247947701")&&lT({retry_option:o,parent_prompt_id:f},p,d),l({nodeId:u,requestedModelId:d!=null?d:void 0,sourceEvent:r})},e[4]=n,e[5]=u,e[6]=d,e[7]=f,e[8]=l,e[9]=o,e[10]=r,e[11]=m):m=e[11],m}function GRe(t){var n,s,o,r;if(!t)return{lastAssistantMessageId:null,lastAssistantModelSlug:null,parentPromptId:null};const e=ve.getLastAssistantMessage(t);return e?{lastAssistantMessageId:e.id,lastAssistantModelSlug:(s=(n=e.metadata)==null?void 0:n.model_slug)!=null?s:null,parentPromptId:(r=(o=ve.getParentPromptNode(t,e.id))==null?void 0:o.id)!=null?r:null}:{lastAssistantMessageId:null,lastAssistantModelSlug:null,parentPromptId:null}}const VRe="2751188136";function zRe(t){const e=tt.getItem(Ie.FirstSeenPulseAnnouncementBannerAt);if(e==null)return!1;const n=Number(e);if(Number.isNaN(n))return!1;const s=Or(n);return Ho(new Date,s)>t}function WRe(t){const e=tt.getItem(Ie.PulseAnnouncementBannerImpressions);if(e==null)return!1;const n=Number(e);return Number.isNaN(n)?!1:n>=t}function qRe(){const t=tt.getItem(Ie.LastSeenPulseAnnouncementBannerAt);if(t==null)return!1;const e=Number(t);if(Number.isNaN(e))return!1;const n=Or(e);return Ho(new Date,n)<1}function KRe(){const t=mn(VRe),e=t.get("max_days_visible",-1);if(e>=0&&zRe(e))return!0;const n=t.get("max_impressions",-1);return!!(n>=0&&WRe(n)||t.get("limit_one_impression_per_day",!1)&&qRe())}function YRe(){return tt.getItem(Ie.HasDismissedPulseAnnouncementBanner)!=null}function ZRe(){tt.setItem(Ie.HasDismissedPulseAnnouncementBanner,!0)}function QRe(){const t=tt.getItem(Ie.PulseAnnouncementBannerImpressions),e=Number(t),n=Number.isNaN(e)?1:e+1;tt.setItem(Ie.PulseAnnouncementBannerImpressions,n);const s=pa(new Date);tt.setItem(Ie.LastSeenPulseAnnouncementBannerAt,s),tt.getItem(Ie.FirstSeenPulseAnnouncementBannerAt)==null&&tt.setItem(Ie.FirstSeenPulseAnnouncementBannerAt,s)}const JRe=70,SI="radial-gradient(circle at center, rgba(0,0,0,1) 70%, rgba(0,0,0,0) 99%)",hV=t=>{"use forget";var c,u;const e=D.c(5),{images:n}=t,o=X(M1)?28:21,r=o>n.length&&((c=n.at(0))==null?void 0:c.url)===((u=n.at(-1))==null?void 0:u.url)?o-1:o;let a;e[0]!==r?(a=Array.from({length:r}),e[0]=r,e[1]=a):a=e[1];let l;if(e[2]!==n||e[3]!==a){const d=a.map((f,m)=>n[m%n.length]);l=i.jsx(XRe,{images:d,imageSize:80}),e[2]=n,e[3]=a,e[4]=l}else l=e[4];return l},XRe=t=>{"use forget";const e=D.c(12),{images:n,imageSize:s}=t;let o;e[0]===Symbol.for("react.memo_cache_sentinel")?(o=q("flex h-45 w-full max-w-170 items-center justify-center transition-opacity duration-200 ease-in-out"),e[0]=o):o=e[0];let r,a,l;e[1]===Symbol.for("react.memo_cache_sentinel")?(r={maskImage:SI,WebkitMaskImage:SI,maskRepeat:"no-repeat",WebkitMaskRepeat:"no-repeat"},a=q("absolute start-1/2 top-0 aspect-square w-[190%] -translate-x-1/2 animate-spin"),l={animationDuration:"".concat(JRe,"s")},e[1]=r,e[2]=a,e[3]=l):(r=e[1],a=e[2],l=e[3]);let c;if(e[4]!==s||e[5]!==n){let d;e[7]!==s||e[8]!==n.length?(d=(f,m)=>{const p=m/n.length*360;return i.jsx("div",{className:"absolute inset-0 origin-center",style:{transform:"rotate(".concat(p,"deg)"),transformOrigin:"center"},children:i.jsx("div",{className:"absolute start-1/2 top-0 -translate-x-1/2",children:i.jsx("div",{style:{width:"".concat(s,"px"),height:"".concat(s,"px")},children:i.jsx(Tc,{src:f==null?void 0:f.url,fallbackSrc:f==null?void 0:f.fallback_url,className:"h-full w-full rounded-xl",shadow:!0})})})},"".concat(m,"-").concat(f==null?void 0:f.url))},e[7]=s,e[8]=n.length,e[9]=d):d=e[9],c=n.map(d),e[4]=s,e[5]=n,e[6]=c}else c=e[6];let u;return e[10]!==c?(u=i.jsx("div",{className:o,children:i.jsx("div",{className:"relative h-full w-full",style:r,children:i.jsx("div",{className:a,style:l,children:c})})}),e[10]=c,e[11]=u):u=e[11],u},QS=t=>{"use forget";const e=D.c(13),{firstRef:n,secondRef:s,firstSide:o,secondSide:r,threshold:a,absolute:l}=t,c=a===void 0?200:a,u=l===void 0?!0:l,[d,f]=v.useState(!1);let m;e[0]!==u||e[1]!==n||e[2]!==o||e[3]!==s||e[4]!==r||e[5]!==c?(m=()=>{const g=n.current,h=s.current;if(!g||!h){f(!1);return}const _=()=>{const y=g.getBoundingClientRect(),S=h.getBoundingClientRect(),C=y[o]-S[r];f(u?Math.abs(C)<=c:C<=c)};let x=null;const b=()=>{x!=null&&cancelAnimationFrame(x),x=requestAnimationFrame(()=>{x=null,_()})};return window.addEventListener("resize",b,{passive:!0}),_(),()=>{x!=null&&cancelAnimationFrame(x),window.removeEventListener("resize",b),window.removeEventListener("orientationchange",b)}},e[0]=u,e[1]=n,e[2]=o,e[3]=s,e[4]=r,e[5]=c,e[6]=m):m=e[6];let p;return e[7]!==n||e[8]!==o||e[9]!==s||e[10]!==r||e[11]!==c?(p=[n,s,o,r,c],e[7]=n,e[8]=o,e[9]=s,e[10]=r,e[11]=c,e[12]=p):p=e[12],bs(m,p),d},_V=Sa(Ie.HasSeenPulseOnboarding,()=>!1);function Udt(){"use forget";var j,R;const t=D.c(31),e=vn();let n;t[0]!==e?(n=()=>Zc(e),t[0]=e,t[1]=n):n=t[1];const{data:s}=X(n);let o;t[2]===Symbol.for("react.memo_cache_sentinel")?(o=[],t[2]=o):o=t[2],v.useEffect(s9e,o);let r;t[3]===Symbol.for("react.memo_cache_sentinel")?(r=[],t[3]=r):r=t[3],v.useEffect(n9e,r);let a;t[4]!==(s==null?void 0:s.onboarding_config)?(a=(j=s==null?void 0:s.onboarding_config)!=null?j:{},t[4]=s==null?void 0:s.onboarding_config,t[5]=a):a=t[5];const{image_urls:l,name:c}=a,u=t9e,d=v.useRef(null),f=v.useRef(null);let m;t[6]===Symbol.for("react.memo_cache_sentinel")?(m={firstRef:f,secondRef:d,firstSide:"top",secondSide:"top",threshold:50,absolute:!1},t[6]=m):m=t[6];const p=QS(m),g=e9e,h=p&&"sticky top-0";let _;t[7]!==h?(_=q("relative flex h-45 w-full items-center justify-center",h),t[7]=h,t[8]=_):_=t[8];let x;t[9]!==l?(x=(R=l==null?void 0:l.map(Hm))!=null?R:[],t[9]=l,t[10]=x):x=t[10];let b;t[11]!==x?(b=i.jsx(hV,{images:x}),t[11]=x,t[12]=b):b=t[12];let y;t[13]!==_||t[14]!==b?(y=i.jsx("div",{className:_,ref:f,children:b}),t[13]=_,t[14]=b,t[15]=y):y=t[15];const S=c?qf.greetingWithName:qf.greeting;let C;t[16]!==c?(C={name:c},t[16]=c,t[17]=C):C=t[17];let w;t[18]!==S||t[19]!==C?(w=i.jsx("div",{className:"text-xl font-medium",children:i.jsx(P,G(N({},S),{values:C}))}),t[18]=S,t[19]=C,t[20]=w):w=t[20];let k;t[21]===Symbol.for("react.memo_cache_sentinel")?(k=i.jsx("div",{className:"whitespace-pre-line",children:i.jsx(P,N({},qf.onboardingExplanation))}),t[21]=k):k=t[21];let E;t[22]!==w?(E=i.jsxs("div",{className:"flex flex-col gap-4",children:[w,k]}),t[22]=w,t[23]=E):E=t[23];let T;t[24]===Symbol.for("react.memo_cache_sentinel")?(T=i.jsx(Se,{size:"large",className:"w-1/2",onClick:g,children:i.jsx(P,N({},qf.next))}),t[24]=T):T=t[24];let M;t[25]===Symbol.for("react.memo_cache_sentinel")?(M=i.jsxs("div",{className:"flex w-full flex-col gap-2",children:[T,i.jsx("span",{className:"text-token-text-tertiary px-2 text-sm font-medium",children:i.jsx(P,G(N({},qf.learnMore),{values:{link:u}}))})]}),t[25]=M):M=t[25];let A;t[26]!==E?(A=i.jsxs("div",{className:"flex w-full flex-col justify-start gap-6 text-xl font-medium",children:[E,M]}),t[26]=E,t[27]=A):A=t[27];let I;return t[28]!==A||t[29]!==y?(I=i.jsxs("div",{className:"relative mx-auto mb-30 flex w-full max-w-170 flex-1 flex-col items-center justify-center gap-8 overflow-hidden px-4 py-6",children:[y,A]}),t[28]=A,t[29]=y,t[30]=I):I=t[30],I}function e9e(){_V.set(!0),ys().logEventWithStatsig("(Web) FYP Onboarding Completed","chatgpt_web_fyp_onboarding_completed")}function t9e(t){return i.jsx(Fs,{href:"https://help.openai.com/en/articles/12293630-chatgpt-pulse",target:"_blank",rel:"noreferrer",className:"text-token-text-secondary underline",children:t})}function n9e(){Fe.count(Ue.PULSE,"chatgpt_web_fyp_onboarding_shown")}function s9e(){Yye.prefetch()}const qf=we({greeting:{id:"6YsctG",defaultMessage:"Hi,"},greetingWithName:{id:"T8UqPO",defaultMessage:"Hi {name},"},onboardingExplanation:{id:"SbZL/F",defaultMessage:"I'm here to surface what's helpful to you once a day, every day. You decide what shows up  if you tell me what to focus on, I'll curate it for you tomorrow."},learnMore:{id:"Chvn9N",defaultMessage:"<link>Learn more</link> about how Pulse works"},next:{id:"U2jFjI",defaultMessage:"Next"}}),o9e=yp(t=>yt(()=>{var s,o,r;const e=Zc(t),n=(r=(o=(s=e==null?void 0:e.data)==null?void 0:s.onboarding_config)==null?void 0:o.image_urls)!=null?r:[];return new Set(n)})),r9e=()=>{"use forget";v.useEffect(l9e)};function a9e(t){const e=new Image;e.src=t}function i9e(){_V()||o9e().forEach(a9e)}function l9e(){return Hc(i9e)}const c9e=we({defaultTitle:{id:"pulse.entrypoint.defaultTitle",defaultMessage:"Today's pulse"},seenCaption:{id:"pulse.entrypoint.seenCaption",defaultMessage:"You're all caught up for today."}}),Hdt=t=>{"use forget";const e=D.c(7),{pulseId:n,caption:s,previewImages:o,onClick:r}=t;r9e();let a;e[0]!==s||e[1]!==r||e[2]!==o||e[3]!==n?(a=n&&i.jsx(wt.div,{initial:{opacity:0,y:20,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:20,scale:.95},transition:{duration:.1,ease:"easeInOut"},className:"mt-10 max-md:hidden",children:i.jsx(to,{className:"flex justify-center px-10",children:i.jsx(u9e,{previewImages:o,title:i.jsx(P,N({},c9e.defaultTitle)),caption:s,onClick:()=>{ys().logEventWithStatsig("(Web) FYP Entrypoint Tapped","chatgpt_web_fyp_entrypoint_tapped"),tx.set(Td.Chat),Fe.count(Ue.PULSE,"chatgpt_web_fyp_entrypoint_tapped"),r()}})})}),e[0]=s,e[1]=r,e[2]=o,e[3]=n,e[4]=a):a=e[4];let l;return e[5]!==a?(l=i.jsx(In,{children:a}),e[5]=a,e[6]=l):l=e[6],l};function u9e(t){"use forget";const e=D.c(17),{onClick:n,previewImages:s,title:o,caption:r}=t;let a;e[0]===Symbol.for("react.memo_cache_sentinel")?(a=[],e[0]=a):a=e[0],v.useEffect(d9e,a);let l;e[1]!==s?(l=i.jsx(cT,{previewImages:s}),e[1]=s,e[2]=l):l=e[2];let c;e[3]!==o?(c=i.jsx("div",{className:"text-sm font-semibold",children:o}),e[3]=o,e[4]=c):c=e[4];let u;e[5]===Symbol.for("react.memo_cache_sentinel")?(u=i.jsx(pg,{className:"h-4 w-4 flex-shrink-0"}),e[5]=u):u=e[5];let d;e[6]!==c?(d=i.jsxs("div",{className:"flex flex-shrink-0 items-center gap-1",children:[c,u]}),e[6]=c,e[7]=d):d=e[7];let f;e[8]!==l||e[9]!==d?(f=i.jsxs("div",{className:"flex flex-shrink-0 items-center gap-4",children:[l,d]}),e[8]=l,e[9]=d,e[10]=f):f=e[10];let m;e[11]!==r?(m=i.jsx("div",{className:"text-token-text-tertiary group-hover:text-token-text-secondary min-w-0 flex-shrink truncate text-sm whitespace-nowrap transition-colors",children:r}),e[11]=r,e[12]=m):m=e[12];let p;return e[13]!==n||e[14]!==f||e[15]!==m?(p=i.jsxs("div",{className:"group hover:bg-token-bg-tertiary inline-flex cursor-pointer items-center gap-2 overflow-hidden rounded-full px-4 py-2",onClick:n,children:[f,m]}),e[13]=n,e[14]=f,e[15]=m,e[16]=p):p=e[16],p}function d9e(){ys().logEventWithStatsig("(Web) FYP Entrypoint Shown","chatgpt_web_fyp_entrypoint_shown"),Fe.count(Ue.PULSE,"chatgpt_web_fyp_entrypoint_shown")}function cT(t){"use forget";var x,b,y,S;const e=D.c(15),{previewImages:n,size:s,className:o}=t,r=s===void 0?"sm":s,a=r==="lg"?"relative h-14 w-14":"relative h-7 w-7",l=r==="lg"?"absolute aspect-square h-14 w-14 translate-x-3 rounded-xl object-cover shadow-md transition-transform duration-200 ease-out group-hover:translate-x-3.5 group-hover:rotate-[3deg]":"absolute aspect-square h-7 w-7 translate-x-2 rounded-sm object-cover shadow-md transition-transform duration-200 ease-out group-hover:translate-x-2.5 group-hover:rotate-[3deg]",c=r==="lg"?"absolute aspect-square h-14 w-14 -rotate-[4deg] rounded-xl object-cover shadow-md transition-transform duration-200 ease-out group-hover:-translate-x-1.5 group-hover:-rotate-[8deg]":"absolute aspect-square h-7 w-7 -rotate-[6.5deg] rounded-sm object-cover shadow-md transition-transform duration-200 ease-out group-hover:-translate-x-1 group-hover:-rotate-[10deg]";let u;e[0]!==o||e[1]!==a?(u=q(a,o),e[0]=o,e[1]=a,e[2]=u):u=e[2];const d=(x=n[0])==null?void 0:x.url,f=(b=n[0])==null?void 0:b.fallback_url;let m;e[3]!==l||e[4]!==d||e[5]!==f?(m=i.jsx(Tc,{src:d,fallbackSrc:f,className:l}),e[3]=l,e[4]=d,e[5]=f,e[6]=m):m=e[6];const p=(y=n[1])==null?void 0:y.url,g=(S=n[1])==null?void 0:S.fallback_url;let h;e[7]!==c||e[8]!==p||e[9]!==g?(h=i.jsx(Tc,{src:p,fallbackSrc:g,className:c}),e[7]=c,e[8]=p,e[9]=g,e[10]=h):h=e[10];let _;return e[11]!==u||e[12]!==m||e[13]!==h?(_=i.jsxs("div",{className:u,children:[m,h]}),e[11]=u,e[12]=m,e[13]=h,e[14]=_):_=e[14],_}const CI=er((t,e)=>st(!1),t=>t!=null?t:"default");function f9e(t){"use forget";const e=D.c(9),n=vn(),s=t!=null?t:"default";let o;e[0]!==n||e[1]!==s?(o=()=>CI(n,s),e[0]=n,e[1]=s,e[2]=o):o=e[2];const r=X(o);let a;e[3]!==n||e[4]!==s?(a=()=>CI.set(n,s,!0),e[3]=n,e[4]=s,e[5]=a):a=e[5];const l=a;let c;return e[6]!==l||e[7]!==r?(c={isDismissed:r,dismiss:l},e[6]=l,e[7]=r,e[8]=c):c=e[8],c}function $dt(t){"use forget";return xV(t).shouldShow}function xV(t){"use forget";const e=D.c(6),{clientThreadId:n,entrypointData:s,isNewThread:o}=t,r=vn(),{isDismissed:a,dismiss:l}=f9e(n),[c,u]=Ze(n,m9e),d=yg("(max-height: 660px)");let f;e[0]===Symbol.for("react.memo_cache_sentinel")?(f=YRe(),e[0]=f):f=e[0];const m=f;let p;e[1]!==r?(p=r!=null&&KRe(),e[1]=r,e[2]=p):p=e[2];const h=!!s&&!!n&&!!o&&!a&&!m&&!p&&!d&&!c&&!u;let _;return e[3]!==l||e[4]!==h?(_={shouldShow:h,dismiss:l},e[3]=l,e[4]=h,e[5]=_):_=e[5],_}function m9e(t){var e;return[ve.hasUserMessage(t),(e=t==null?void 0:t.isLoading)!=null?e:!1]}const Gdt=t=>{"use forget";var j,R,O,L;const e=D.c(37),{entrypointData:n,clientThreadId:s,className:o,isNewThread:r}=t;let a;e[0]!==s||e[1]!==n||e[2]!==r?(a={clientThreadId:s,entrypointData:n,isNewThread:r},e[0]=s,e[1]=n,e[2]=r,e[3]=a):a=e[3];const{dismiss:l,shouldShow:c}=xV(a);let u;e[4]!==((j=n.onboarding_config)==null?void 0:j.onboarding_preview_items)?(u=((O=(R=n.onboarding_config)==null?void 0:R.onboarding_preview_items)!=null?O:[]).map(g9e).filter(h9e).map(_9e).slice(0,2),e[4]=(L=n.onboarding_config)==null?void 0:L.onboarding_preview_items,e[5]=u):u=e[5];const d=u;let f,m;e[6]!==d.length||e[7]!==c?(f=()=>{c&&(QRe(),V.logEventWithStatsig("ChatGPT Web Pulse Announcement Banner Shown","chatgpt_web_pulse_announcement_banner_shown",{preview_image_count:d.length}),Fe.count(Ue.PULSE,"chatgpt_web_pulse_announcement_banner_shown"))},m=[c,d.length],e[6]=d.length,e[7]=c,e[8]=f,e[9]=m):(f=e[8],m=e[9]),v.useEffect(f,m);let p;e[10]!==l?(p=()=>{l(),ZRe(),V.logEventWithStatsig("ChatGPT Web Pulse Announcement Banner Dismissed","chatgpt_web_pulse_announcement_banner_dismissed"),Fe.count(Ue.PULSE,"chatgpt_web_pulse_announcement_banner_dismissed")},e[10]=l,e[11]=p):p=e[11];const g=p;let h;e[12]!==n?(h=()=>{V.logEventWithStatsig("ChatGPT Web Pulse Announcement Banner CTA Clicked","chatgpt_web_pulse_announcement_banner_cta_clicked"),Fe.count(Ue.PULSE,"chatgpt_web_pulse_announcement_banner_cta_clicked"),nU({source:Td.AnnouncementBanner,entrypointData:n})},e[12]=n,e[13]=h):h=e[13];const _=h;if(!c)return null;let x;e[14]!==d?(x=i.jsx(cT,{previewImages:d,size:"lg",className:"flex-shrink-0"}),e[14]=d,e[15]=x):x=e[15];let b;e[16]===Symbol.for("react.memo_cache_sentinel")?(b=i.jsx(lg,{"aria-hidden":"true",className:"text-token-text-primary h-5 w-5 flex-shrink-0"}),e[16]=b):b=e[16];let y;e[17]!==n.cta_text?(y=i.jsxs("div",{className:"flex items-center gap-1",children:[b,i.jsx("p",{className:"text-token-text-primary text-base font-semibold",children:n.cta_text})]}),e[17]=n.cta_text,e[18]=y):y=e[18];let S;e[19]!==n.caption?(S=i.jsx("p",{className:"text-token-text-primary text-sm",children:n.caption}),e[19]=n.caption,e[20]=S):S=e[20];let C;e[21]!==S||e[22]!==y?(C=i.jsxs("div",{className:"min-w-0 space-y-[2px] ps-2",children:[y,S]}),e[21]=S,e[22]=y,e[23]=C):C=e[23];let w;e[24]!==C||e[25]!==x?(w=i.jsx("div",{className:"flex w-full flex-wrap items-center gap-6 md:flex-nowrap",children:i.jsxs("div",{className:"flex min-w-0 flex-1 items-center gap-6",children:[x,C]})}),e[24]=C,e[25]=x,e[26]=w):w=e[26];const k=w;let E;e[27]===Symbol.for("react.memo_cache_sentinel")?(E=i.jsx(P,N({},p9e.cta)),e[27]=E):E=e[27];let T;e[28]!==_?(T=i.jsx(Se,{size:"large",color:"primary",onClick:_,children:E}),e[28]=_,e[29]=T):T=e[29];const M=T;let A;e[30]!==o?(A=q("w-full",o),e[30]=o,e[31]=A):A=e[31];let I;return e[32]!==k||e[33]!==M||e[34]!==g||e[35]!==A?(I=i.jsx(i.Fragment,{children:i.jsx(hn,{className:A,contentClassName:"flex-row items-center justify-between gap-4 md:gap-8",content:k,customCtas:M,onDismiss:g,verticalCta:!1})}),e[32]=k,e[33]=M,e[34]=g,e[35]=A,e[36]=I):I=e[36],I},p9e=we({title:{defaultMessage:"Your plan now comes with Pulse",id:"pulse.announcement.banner.title"},body:{defaultMessage:"Proactive updates, reminders, and research made for you.",id:"pulse.announcement.banner.body"},cta:{defaultMessage:"Try it",id:"pulse.announcement.banner.cta"}});function g9e(t){return t.image_url}function h9e(t){return!!t}function _9e(t){return Hm(t)}const x9e="/cdn/assets/budget-k7x0kzms.webp",y9e={src:x9e},b9e="/cdn/assets/build_morning_routine-j1dgypfk.webp",v9e={src:b9e},S9e="/cdn/assets/redesign_house-j7tyooum.webp",C9e={src:S9e},w9e="/cdn/assets/simplify_meal_prep-odaxlo93.webp",k9e={src:w9e},uT=We.hasSeenPulseTasksNux;function Vdt(t){"use forget";return yV(t).shouldShow}function yV(t){"use forget";const e=D.c(5),{clientThreadId:n,isNewThread:s}=t,o=vn(),{eligible:r,isLoading:a}=Ct(uT),[l,c]=Ze(n,E9e),u=yg("(max-height: 660px)");let d;e[0]===Symbol.for("react.memo_cache_sentinel")?(d=cf(),e[0]=d):d=e[0];const f=d;let m;e[1]!==o?(m=()=>Zc(o,{useCache:!1}),e[1]=o,e[2]=m):m=e[2];const{data:p,isLoading:g}=X(m),h=(p==null?void 0:p.is_nux)===!0,_=!!n&&!!s&&h&&f&&r&&!a&&!g&&!u&&!l&&!c;let x;return e[3]!==_?(x={shouldShow:_},e[3]=_,e[4]=x):x=e[4],x}function E9e(t){var e;return[ve.hasUserMessage(t),(e=t==null?void 0:t.isLoading)!=null?e:!1]}const zdt=t=>{"use forget";const e=D.c(25),{clientThreadId:n,isNewThread:s,className:o}=t,r=bt();let a;e[0]!==n||e[1]!==s?(a={clientThreadId:n,isNewThread:s},e[0]=n,e[1]=s,e[2]=a):a=e[2];const{shouldShow:l}=yV(a),[c]=v.useState(T9e);let u,d;e[3]!==c.length||e[4]!==l?(u=()=>{l&&(V.logEventWithStatsig("ChatGPT Web Pulse Tasks Announcement Banner Shown","chatgpt_web_pulse_tasks_announcement_banner_shown",{preview_image_count:c.length}),Fe.count(Ue.PULSE,"chatgpt_web_pulse_tasks_announcement_banner_shown"))},d=[l,c.length],e[3]=c.length,e[4]=l,e[5]=u,e[6]=d):(u=e[5],d=e[6]),v.useEffect(u,d);const f=M9e;let m;e[7]!==r?(m=()=>{kt(uT),V.logEventWithStatsig("ChatGPT Web Pulse Tasks Announcement Banner CTA Clicked","chatgpt_web_pulse_tasks_announcement_banner_cta_clicked"),Fe.count(Ue.PULSE,"chatgpt_web_pulse_tasks_announcement_banner_cta_clicked"),tx.set(Td.Chat),r({pathname:"/pulse",search:cB("")})},e[7]=r,e[8]=m):m=e[8];const p=m;if(!l)return null;let g;e[9]!==c?(g=i.jsx(cT,{previewImages:c,size:"lg",className:"flex-shrink-0"}),e[9]=c,e[10]=g):g=e[10];let h;e[11]===Symbol.for("react.memo_cache_sentinel")?(h=i.jsx(lg,{"aria-hidden":"true",className:"text-token-text-primary h-5 w-5 flex-shrink-0"}),e[11]=h):h=e[11];let _;e[12]===Symbol.for("react.memo_cache_sentinel")?(_=i.jsxs("div",{className:"flex items-center gap-1",children:[h,i.jsx("p",{className:"text-token-text-primary text-base font-semibold",children:i.jsx(P,N({},fb.title))})]}),e[12]=_):_=e[12];let x;e[13]===Symbol.for("react.memo_cache_sentinel")?(x=i.jsxs("div",{className:"min-w-0 space-y-[2px] ps-2",children:[_,i.jsx("p",{className:"text-token-text-primary text-sm whitespace-pre-line",children:i.jsx(P,N({},fb.body))})]}),e[13]=x):x=e[13];let b;e[14]!==g?(b=i.jsx("div",{className:"flex w-full flex-wrap items-center gap-6 md:flex-nowrap",children:i.jsxs("div",{className:"flex min-w-0 flex-1 items-center gap-6",children:[g,x]})}),e[14]=g,e[15]=b):b=e[15];const y=b;let S;e[16]===Symbol.for("react.memo_cache_sentinel")?(S=i.jsx(P,N({},fb.cta)),e[16]=S):S=e[16];let C;e[17]!==p?(C=i.jsx(Se,{size:"large",color:"primary",onClick:p,children:S}),e[17]=p,e[18]=C):C=e[18];const w=C;let k;e[19]!==o?(k=q("w-full",o),e[19]=o,e[20]=k):k=e[20];let E;return e[21]!==y||e[22]!==w||e[23]!==k?(E=i.jsx(hn,{className:k,contentClassName:"flex-row items-center justify-between gap-4 md:gap-8",content:y,customCtas:w,onDismiss:f,verticalCta:!1}),e[21]=y,e[22]=w,e[23]=k,e[24]=E):E=e[24],E},fb=we({title:{defaultMessage:"Scheduled tasks, now in Pulse",id:"pulse.tasks.announcement.banner.title"},body:{defaultMessage:"Tell ChatGPT what you want to stay on top of and when to send updates.",id:"pulse.tasks.announcement.banner.body"},cta:{defaultMessage:"Try it",id:"pulse.tasks.announcement.banner.cta"}});function T9e(){const t=[v9e.src,C9e.src,y9e.src,k9e.src].filter(Boolean);if(t.length===0)return[];if(t.length===1)return t.map(Hm);const e=Math.floor(Math.random()*t.length);let n=Math.floor(Math.random()*t.length);for(;n===e;)n=Math.floor(Math.random()*t.length);return[t[e],t[n]].map(Hm)}function M9e(){kt(uT),V.logEventWithStatsig("ChatGPT Web Pulse Tasks Announcement Banner Dismissed","chatgpt_web_pulse_tasks_announcement_banner_dismissed"),Fe.count(Ue.PULSE,"chatgpt_web_pulse_tasks_announcement_banner_dismissed")}function Wdt(t){return"chatgpt.com/redeem/".concat(t)}function A9e(t){return"/?code=".concat(t,"#referrals")}function qdt(t,e,n){return t.formatNumber(e||0,{style:"currency",currency:n,minimumFractionDigits:0,maximumFractionDigits:2})}function N9e(t){return"/?program=".concat(t,"#referrals")}function Kdt(t){return"/refer/".concat(t)}function Ydt(){const t=bt(),{data:e}=KD();v.useEffect(()=>{e&&e.info&&(Qt.logShowReferralUpsellAnnouncementBanner(),V.logUpsellOrModalEvent(qn,{eventId:"referral_upsell_announcement_banner_shown",type:Kn.UPSELL_OR_MODAL_TYPE_NUX_BANNER}))},[e]);const n=e==null?void 0:e.info;return n?i.jsx(hn,{title:i.jsx(P,{id:"referralUpsellAnnouncementBanner.title",defaultMessage:"Get up to 12 free months of Plus when you refer classmates"}),content:i.jsx(P,{id:"referralUpsellAnnouncementBanner.content",defaultMessage:"Refer a friend to sign up for ChatGPT, and youll both get a $20 credit."}),primaryCtaText:i.jsx(P,{id:"referralUpsellAnnouncementBanner.primaryCtaText",defaultMessage:"Invite"}),onDismiss:()=>{kt(We.hasSeenReferralUpsellAnnouncement),Qt.logCloseReferralUpsellAnnouncementBanner()},onPrimaryCtaClick:async()=>{kt(We.hasSeenReferralUpsellAnnouncement),Qt.logClickReferralUpsellButton(),t(N9e(n.program_name))}}):null}const Zdt=t=>{var a,l,c,u,d,f,m,p;const{data:e,isLoading:n}=ut({enabled:!!t,queryKey:["referralMetadata",t],queryFn:async()=>Jp.getReferralProgramMetadata(t)}),s=e,o=(c=(l=(a=s==null?void 0:s.metadata)==null?void 0:a.program_name)!=null?l:t)!=null?c:null,r=(s==null?void 0:s.ineligible_reason)&&(s&&!s.is_eligible&&(u=s.ineligible_reason)!=null?u:null);return{isEligible:(d=s==null?void 0:s.is_eligible)!=null?d:!1,referralMetadata:(f=s==null?void 0:s.metadata)!=null?f:null,programName:o,isReferralLoading:n,referralCode:(m=s==null?void 0:s.referral_code)!=null?m:null,transactionId:(p=s==null?void 0:s.transaction_id)!=null?p:null,referralError:r}},I9e=t=>{var r,a,l,c,u,d;const{data:e,isLoading:n}=ut({enabled:!!t,queryKey:["referralMetadata",t],queryFn:async()=>t?Jp.getReferralCodeMetadata(t):{metadata:null,is_referrer:!1,ineligible_reason:null,should_forward_to_checkout:!1}}),s=e,o=(a=(r=s==null?void 0:s.metadata)==null?void 0:r.program_name)!=null?a:null;return{shouldForwardToCheckout:(l=s==null?void 0:s.should_forward_to_checkout)!=null?l:!1,isReferrer:(c=s==null?void 0:s.is_referrer)!=null?c:!1,ineligibleReason:(u=s==null?void 0:s.ineligible_reason)!=null?u:null,referralMetadata:(d=s==null?void 0:s.metadata)!=null?d:null,programName:o,isReferralLoading:n}},JS=We.hasDismissedRefereeRedemption,bV=()=>{const{eligible:t}=Ct(JS),{referralCode:e,discountValue:n,discountDuration:s}=j9e();return{shouldShowBanner:t&&e&&n&&s,referralCode:e,discountValue:n,discountDuration:s}},j9e=()=>{const t=tt.getItem(Ie.ReferralCode),{referralMetadata:e}=I9e(t);return{referralCode:t,discountValue:e==null?void 0:e.discount,discountDuration:e==null?void 0:e.duration}},Qdt=()=>{const t=xe("727502549"),e=xe("550432558"),{shouldShowBanner:n}=bV();return t&&e&&n},P9e=20;function Jdt(){const t=te(),e=bt(),{shouldShowBanner:n,referralCode:s,discountValue:o,discountDuration:r}=bV();if(v.useEffect(()=>{n&&s&&o&&r&&(Qt.logShowRefereeRedemptionBanner(s),V.logUpsellOrModalEvent(qn,{eventId:"referee_redemption_announcement_banner_shown",type:Kn.UPSELL_OR_MODAL_TYPE_NUX_BANNER}))},[n,s,o,r]),!n||!o||!r)return null;const a=R9e(t,o,r);return i.jsx(hn,{onPrimaryCtaClick:()=>{kt(JS),Qt.logClickRefereeRedeemButton(s),tt.removeItem(Ie.ReferralCode),e(A9e(s))},primaryCtaText:i.jsx(P,{id:"refereeRedemptionBannerPrimaryCta",defaultMessage:"Redeem"}),onDismiss:()=>{kt(JS),Qt.logCloseRefereeRedemptionBanner(s),tt.removeItem(Ie.ReferralCode)},title:a,content:i.jsx(P,{id:"xoQacW",defaultMessage:"Verify you are a student to get your first month of Plus for free."})})}function R9e(t,e,n){var a,l;const o=(l=(a=Jd(e.currency_code).code.defaultMessage)==null?void 0:a.toString())!=null?l:Np,r=t.formatNumber(e.value,{style:"currency",currency:o,minimumFractionDigits:0,maximumFractionDigits:2});return e.value===P9e?i.jsx(P,{id:"refereeRedemptionFree",defaultMessage:"Finish redeeming your free month of Plus"}):i.jsx(P,{id:"refereeRedemptionDiscount",defaultMessage:"Get ChatGPT Plus for {discount} off for the {months, plural, one {first month} other {first # months}}.",values:{discount:r,months:n.num_periods}})}async function O9e(t){return ue.safePost("/payments/checkout",{requestBody:t,additionalHeaders:Ew(null,null,null,await ede("chatgpt_checkout").catch(e=>{Ve.addError(e)}))})}async function L9e(t,e,n,s){V.logEvent("Account Pay: Payment Checkout Clicked",e),ft.logEvent("chatgpt_account_payment_modal_upgrade_button_click",et.PLUS);const o=await O9e(N(N({plan_name:"chatgptplusplan",billing_details:t},n&&{student_verification_id:n}),s&&{veterans_verification_id:s}));V.logEvent("Account Pay: Navigating to Payment Checkout",G(N({},e),{url:o.url})),ft.logEvent("chatgpt_account_payment_modal_navigating_to_checkout",et.PLUS,{url:o.url}),n&&tt.setItem(Ie.CheckoutFrom,"students"),s&&tt.setItem(Ie.CheckoutFrom,"veterans"),window.location.href=o.url}const D9e=t=>{var s;const{data:e,isLoading:n}=ut({queryKey:["referralDiscount",t],queryFn:async()=>t?await Jp.getReferralDiscount():{discount:null}});return{discount:(s=e==null?void 0:e.discount)!=null?s:null,isDiscountLoading:n}},XS=We.hasDismissedReferrerRedemption,vV=()=>{const{eligible:t}=Ct(XS),{discount:e,isDiscountLoading:n}=D9e(t);return{shouldShowBanner:t&&e&&!n,discountValue:e==null?void 0:e.value,discountDuration:e==null?void 0:e.duration}},Xdt=()=>{const t=xe("727502549"),e=xe("550432558"),{shouldShowBanner:n}=vV();return t&&e&&n},w0="month",SV="year";function eft(){const t=Tn(),e=te(),{country:n}=KG(),s=qG({country:n,currentAccount:t,location:"ReferrerRedemptionAvailableAnnouncementBanner",shouldUsePaidSubscriptionBillingCurrency:!0,pricingPlanIsTypeBusiness:!1}),o=v.useMemo(()=>G(N({},t==null?void 0:t.subscriptionAnalyticsParams),{referrer:document.referrer}),[t]);async function r(){try{if(!s)return;await L9e(s,o)}catch(m){}}const{shouldShowBanner:a,discountValue:l,discountDuration:c}=vV();if(v.useEffect(()=>{a&&l&&c&&(Qt.logShowReferrerRedemptionBanner(),V.logUpsellOrModalEvent(qn,{eventId:"referrer_redemption_announcement_banner_shown",type:Kn.UPSELL_OR_MODAL_TYPE_NUX_BANNER}))},[a,l,c]),!a||!l||!c||!s)return null;const u=B9e(e,s,l,c),d=F9e(e,s,l,c),f=i.jsxs("div",{className:"grow",children:[i.jsx("div",{className:"mb-0.5 font-semibold",children:u}),i.jsx("span",{className:"text-token-text-secondary",children:d})]});return i.jsx(hn,{onPrimaryCtaClick:()=>{kt(XS),Qt.logClickReferrerRedeemButton(),r()},primaryCtaText:i.jsx(P,N({},B_())),onDismiss:()=>{kt(XS),Qt.logCloseReferrerRedemptionBanner()},content:f})}function B9e(t,e,n,s){var d,f;const o=Jd(e.currency),r=s?s.period:w0,a=s?s.num_periods:1,l=(f=(d=o.code.defaultMessage)==null?void 0:d.toString())!=null?f:Np,c=t.formatNumber(n.value,{style:"currency",currency:l,minimumFractionDigits:0,maximumFractionDigits:2});let u;return r===w0?u=a===1?i.jsx(P,{id:"referrerRedemptionBannerTitleForSingleMonth",defaultMessage:"Your {discount} credit is ready",values:{discount:c}}):i.jsx(P,{id:"referrerRedemptionBannerTitleForPluralMonths",defaultMessage:"Redeem your {discount} referral reward",values:{discount:c}}):r===SV&&(u=a===1?i.jsx(P,{id:"referrerRedemptionBannerTitleForSingleYear",defaultMessage:"Redeem your {discount} referral reward",values:{discount:c}}):i.jsx(P,{id:"referrerRedemptionBannerTitleForPluralYears",defaultMessage:"Redeem your {discount} referral reward",values:{discount:c}})),u}function F9e(t,e,n,s){var d,f;const o=Jd(e.currency),r=s?s.period:w0,a=s?s.num_periods:1,l=(f=(d=o.code.defaultMessage)==null?void 0:d.toString())!=null?f:Np,c=t.formatNumber(n.value,{style:"currency",currency:l,minimumFractionDigits:0,maximumFractionDigits:2});let u;return r===w0?u=a===1?i.jsx(P,{id:"referrerRedemptionBannerContentForSingleMonth",defaultMessage:"Your referral link was used  claim your free month of Plus."}):i.jsx(P,{id:"referrerRedemptionBannerContentForPluralMonths",defaultMessage:"Your referral link earned you {discount} off {num_months} months of Plus.",values:{discount:c,num_months:a}}):r===SV&&(u=a===1?i.jsx(P,{id:"referrerRedemptionBannerContentForSingleYear",defaultMessage:"Your referral link earned you {discount} off a year of Plus.",values:{discount:c}}):i.jsx(P,{id:"referrerRedemptionBannerContentForPluralYears",defaultMessage:"Your referral link earned you {discount} off {num_years} years of Plus.",values:{discount:c,num_years:a}})),u}const mb={logDisabledAccess(t){Fe.count(Ue.STUDENTS,"students.web.disabled",{reason:t})},logLandingPageImpression(){Fe.count(Ue.STUDENTS,"students.web.landingPageImpression"),V.logEvent("Students: Landing Page Impression")},logClickLoginButton(t){Fe.count(Ue.STUDENTS,"students.web.clickLoginButton",{key:"source",value:t}),V.logEvent("Students: Click Login Button",{source:t})},logClickVerifyButton(t){Fe.count(Ue.STUDENTS,"students.web.clickVerifyButton",{key:"source",value:t}),V.logEvent("Students: Click Verify Button",{source:t})},logClickCheckoutButton(t){Fe.count(Ue.STUDENTS,"students.web.clickCheckoutButton",{key:"source",value:t}),V.logEvent("Students: Click Checkout Button",{source:t})},logShowNeedsVerificationModal(){Fe.count(Ue.STUDENTS,"students.web.showNeedsVerificationModal"),V.logEvent("Students: Show Needs Verification Modal")},logShowVerifiedModal(){Fe.count(Ue.STUDENTS,"students.web.showVerifiedModal"),V.logEvent("Students: Show Verified Modal")},logError(t){Fe.count(Ue.STUDENTS,"students.web.error",{key:"errorType",value:t})},logShowAnnouncementBanner(){Fe.count(Ue.STUDENTS,"students.web.showAnnouncementBanner"),V.logEvent("Students: Show Announcement Banner")},logClickAnnouncementBanner(){Fe.count(Ue.STUDENTS,"students.web.clickAnnouncementBanner"),V.logEvent("Students: Click Announcement Banner")},logCloseAnnouncementBanner(){Fe.count(Ue.STUDENTS,"students.web.closeAnnouncementBanner"),V.logEvent("Students: Close Announcement Banner")}},tft="redirectedFromAuth",wI="studentsPromotion";function kI(t){return t?"/students?".concat(t,"=true"):"/students"}function nft(t=!1){return t?"https://chatgpt.com/?".concat(wI,"=true"):"/?".concat(wI,"=true")}function sft(t){const e=t.hasPaidSubscription(),n=t.getLastActiveSubscription(),s=e&&[Ny.CHATGPT_IOS,Ny.SORA_IOS].includes(n.purchase_origin_platform),o=e&&n.purchase_origin_platform===Ny.MOBILE_ANDROID;return s||o}function oft(){const t=bt();return v.useEffect(()=>{mb.logShowAnnouncementBanner(),V.logUpsellOrModalEvent(qn,{eventId:"students_upsell_announcement_banner_shown",type:Kn.UPSELL_OR_MODAL_TYPE_NUX_BANNER})},[]),i.jsx(hn,{title:i.jsx(P,{id:"GA5kGX",defaultMessage:"Students can claim 2 months of Plus, free."}),content:i.jsx(P,{id:"WOGB1g",defaultMessage:"Get access to premium features when you verify youre a student in the US or Canada. {learnMoreLink}",values:{learnMoreLink:i.jsx("span",{className:"underline",children:i.jsx(ko,{to:kI(),children:i.jsx(P,{id:"0cZpUc",defaultMessage:"Learn more"})})})}}),primaryCtaText:i.jsx(P,{id:"uA26i5",defaultMessage:"Learn More"}),onPrimaryCtaClick:()=>{mb.logClickAnnouncementBanner(),kt(We.hasSeenStudentsUpsellAnnouncement),t(kI())},onDismiss:()=>{mb.logCloseAnnouncementBanner(),kt(We.hasSeenStudentsUpsellAnnouncement)}})}const EI=re(me,"77bc5f",20,20),rft=t=>c7([Bt.GizmoMagicCreate,Bt.GizmoTest],t==null?void 0:t.kind),aft=t=>c7([Bt.GizmoInteraction,Bt.GizmoMagicCreate,Bt.GizmoTest],t==null?void 0:t.kind);function ift(t){return[{title:t.formatMessage({id:"er580q",defaultMessage:"Create an image of a magazine cover of cute animals with headlines and text"}),body:"",type:xt.Autocomplete,prompt:t.formatMessage({id:"SKZKBN",defaultMessage:"Create an image of a photorealistic magazine cover for 'CUTE ANIMALS,' featuring three impossibly cute and stylishly accessorized pets, with realistic, catchy headlines and teaser text"}),theme:Cn.Image},{title:t.formatMessage({id:"ukPFbH",defaultMessage:"Create an image for a garden-themed birthday party invitation"}),body:"",type:xt.Autocomplete,prompt:t.formatMessage({id:"uYg5kL",defaultMessage:"Create an image of a colorful invitation for a garden-themed birthday party, including whimsical typography"}),theme:Cn.Image},{title:t.formatMessage({id:"mMiJxP",defaultMessage:"Create an image of an astronaut with an inflatable duck on Mars"}),body:"",type:xt.Autocomplete,prompt:t.formatMessage({id:"5nFWh4",defaultMessage:"Create a photorealistic image of an international astronaut on Mars, wearing a giant duck inflatable toy around its waist"}),theme:Cn.Image},{title:t.formatMessage({id:"+T7POI",defaultMessage:"Create an image of a tutorial for cooking pasta"}),body:"",type:xt.Autocomplete,prompt:t.formatMessage({id:"9N2bJ0",defaultMessage:"Create an image of a comic-book style tutorial for cooking pasta"}),theme:Cn.Image}]}const U9e=tf(()=>st(!1)),lft=tf(t=>{const e=st([],{equals:pp}),n=st([]),s=yt(()=>{const o=U9e(t),r=uX(Vt(t));return T3(t)&&!o()&&e().length>0&&!(r!=null&&r())},{getServerFallback:()=>!1});return{autocompletions$:e,shouldShowAutocomplete$:s,personalizedAutocompletePool$:n}}),H9e=tf(()=>{const t=st(!1);let e=null;const n=o=>{e&&(clearTimeout(e),e=null),t.set(o)};return{shouldHighlight$:t,setShouldHighlight:n,flashHighlight:(o=4e3)=>{n(!0),e=setTimeout(()=>{t.set(!1),e=null},o)}}});function cft(){"use forget";const t=D.c(3),{store:e}=Ok(),n=Jo();let s;return t[0]!==n||t[1]!==e?(s=(o,r,a,l)=>{const c=e.getSharedProps(),u=c==null?void 0:c.composerController;if(!u)return;const d=Au(r);if(d==null)return;const f="systemHints"in r?r.systemHints:void 0,m=f&&f.length>0?f[0]:void 0;if(m){const x=c!=null&&c.clientThreadId?{clientThreadId:c.clientThreadId}:void 0;n(m,N({},x?{analyticsMetadata:x}:{}))}if((r.type===xt.Starter||r.type===xt.Autocomplete||r.type===xt.Trending)&&r.requires_file_upload===!0){const{flashHighlight:x}=H9e(u);x()}const g=Hde(r);g.length>0&&(c!=null&&c.clientThreadId)&&pt(c.clientThreadId,x=>{var S;const b=(S=x.selectedHazelnuts)!=null?S:[],y=new Set(b);for(const C of g)y.add(C);x.selectedHazelnuts=Array.from(y)}),o.preventDefault();const h=Vt(u);Bo(h,d),h.focus();const _=c==null?void 0:c.clientThreadId;_&&zde(r,l,_)},t[0]=n,t[1]=e,t[2]=s):s=t[2],s}function dT(){return"virtualKeyboard"in navigator}const $9e=tn()(()=>({height:0,isKeyboardOpen:!1,scrollOffset:null,composerHeight:null}));function G9e(t){return t?t instanceof HTMLInputElement||t instanceof HTMLTextAreaElement||t instanceof HTMLElement&&t.isContentEditable:!1}function V9e(){document.documentElement.classList.add("keyboard-open")}function z9e(){document.documentElement.classList.remove("keyboard-open")}const W9e=Hn(()=>{const t=st(null),e=st(!1),n=st(null),s=st(0),o=st(!1),r=new EventTarget,a=f=>{r.dispatchEvent(new CustomEvent(f))},l=(f,m,p)=>{r.addEventListener(f,m,p)},c=(f,m,p)=>{r.removeEventListener(f,m,p)};setTimeout(()=>{o.set(dT())});function u(f){const m=new AbortController,p=t();if(!p)return;p.blur(),l("keyboard-closed",()=>{m.abort(),f==null||f()},{signal:m.signal});const g=window.setTimeout(()=>{f==null||f(),m.abort()},500);m.signal.addEventListener("abort",()=>{window.clearTimeout(g)})}return{closeKeyboard:u,events:{addEventListener:l,dispatch:a,removeEventListener:c},focusedElement:t,isKeyboardOpen:e,keyboardDimensions:n,keyboardHeight:s,reset:()=>{Nr(()=>{t.set(null),e.set(!1),n.set(null),s.set(0)})},supportsVirtualKeyboardApi$:o}});function uft(){if(!dT())return;const t=W9e();let e=!1;const n=navigator.virtualKeyboard.overlaysContent;function s(){if(e)return;t.reset(),document.removeEventListener("focusout",o),z9e(),document.body.style.removeProperty("--screen-keyboard-height"),navigator.virtualKeyboard.removeEventListener("geometrychange",r);let l;const c=u=>{u.target.boundingRect.height===0&&setTimeout(()=>{t.events.dispatch("keyboard-closed"),window.clearTimeout(l)},100)};l=window.setTimeout(()=>{navigator.virtualKeyboard.removeEventListener("geometrychange",c),t.events.dispatch("keyboard-closed")},500),navigator.virtualKeyboard.addEventListener("geometrychange",c)}const o=()=>{e=!1,t.isKeyboardOpen.set(!1),requestAnimationFrame(s)},r=l=>{document.body.style.setProperty("--screen-keyboard-height","".concat(l.target.boundingRect.height,"px")),V9e(),t.keyboardDimensions.set(l.target.boundingRect),t.keyboardHeight.set(l.target.boundingRect.height)},a=l=>{const c=l.target;G9e(c)&&(e=!0,t.focusedElement.set(c),t.isKeyboardOpen.set(!0),t.events.dispatch("keyboard-opened"),document.addEventListener("focusout",o),navigator.virtualKeyboard.addEventListener("geometrychange",r))};return navigator.virtualKeyboard.overlaysContent=!0,document.addEventListener("focusin",a),()=>{navigator.virtualKeyboard.overlaysContent=n,document.removeEventListener("focusin",a),s()}}var pb,TI;function q9e(){if(TI)return pb;TI=1;var t=Math.floor,e=Math.random;function n(s,o){return s+t(e()*(o-s+1))}return pb=n,pb}var gb,MI;function CV(){if(MI)return gb;MI=1;var t=q9e();function e(n,s){var o=-1,r=n.length,a=r-1;for(s=s===void 0?r:s;++o<s;){var l=t(o,a),c=n[l];n[l]=n[o],n[o]=c}return n.length=s,n}return gb=e,gb}var hb,AI;function K9e(){if(AI)return hb;AI=1;var t=f9(),e=CV();function n(s){return e(t(s))}return hb=n,hb}var _b,NI;function Y9e(){if(NI)return _b;NI=1;var t=dX();function e(n,s){return t(s,function(o){return n[o]})}return _b=e,_b}var xb,II;function Z9e(){if(II)return xb;II=1;var t=Y9e(),e=fX();function n(s){return s==null?[]:t(s,e(s))}return xb=n,xb}var yb,jI;function Q9e(){if(jI)return yb;jI=1;var t=CV(),e=Z9e();function n(s){return t(e(s))}return yb=n,yb}var bb,PI;function J9e(){if(PI)return bb;PI=1;var t=K9e(),e=Q9e(),n=i3();function s(o){var r=n(o)?t:e;return r(o)}return bb=s,bb}var X9e=J9e();const e7e=ps(X9e);function dft(t=8,e=null){return En({queryKey:["promptStarters",t,e],queryFn:async()=>{const n=await ue.safeGet("/prompt_library/",{parameters:{query:{limit:t,use_v2:!0,model_slug:e}},authOption:Ot.SendIfAvailable});return Ve.addFirstTiming("load.promptStarters"),n}})}const t7e="data:image/svg+xml,%3csvg%20width='20'%20height='20'%20viewBox='0%200%2020%2020'%20fill='currentColor'%20xmlns='http://www.w3.org/2000/svg'%20data-rtl-flip=''%20%3e%3cpath%20d='M16.3965%205.01128C16.3963%204.93399%2016.3489%204.87691%2016.293%204.85406L16.2354%204.84332C13.9306%204.91764%2012.5622%205.32101%2010.665%206.34722V16.3716C11.3851%2015.9994%2012.0688%2015.7115%2012.7861%2015.5015C13.8286%2015.1965%2014.9113%2015.0633%2016.2402%2015.0435L16.2979%2015.0308C16.353%2015.0063%2016.3965%2014.9483%2016.3965%2014.8755V5.01128ZM3.54492%2014.8765C3.54492%2014.9725%203.62159%2015.0422%203.70117%2015.0435L4.19629%2015.0562C5.94062%2015.1247%207.26036%2015.4201%208.65918%2016.0484C8.05544%2015.1706%207.14706%2014.436%206.17871%2014.1109V14.1099C5.56757%2013.9045%205.16816%2013.3314%205.16797%2012.6988V4.98882C4.86679%204.93786%204.60268%204.8999%204.28223%204.87457L3.72754%204.84429C3.62093%204.84079%203.54505%204.92417%203.54492%205.01226V14.8765ZM17.7266%2014.8755C17.7266%2015.6314%2017.1607%2016.2751%2016.4121%2016.3628L16.2598%2016.3736C15.0122%2016.3922%2014.0555%2016.5159%2013.1602%2016.7779C12.2629%2017.0404%2011.3966%2017.4508%2010.3369%2018.0738C10.129%2018.1959%209.87099%2018.1958%209.66309%2018.0738C7.71455%2016.9283%206.31974%2016.4689%204.12988%2016.3853L3.68164%2016.3736C2.85966%2016.3614%202.21484%2015.6838%202.21484%2014.8765V5.01226C2.21497%204.15391%202.93263%203.4871%203.77246%203.51519L4.39844%203.54937C4.67996%203.57191%204.92258%203.60421%205.16797%203.64214V2.51031C5.16797%201.44939%206.29018%200.645615%207.31055%201.15679L7.31152%201.15582C8.78675%201.89511%2010.0656%203.33006%2010.5352%204.91461C12.3595%203.98907%2013.8688%203.58817%2016.1924%203.51324L16.3506%203.51714C17.1285%203.5741%2017.7264%204.23496%2017.7266%205.01128V14.8755ZM6.49805%2012.6988C6.49824%2012.7723%206.5442%2012.8296%206.60254%2012.8492L6.96289%2012.9859C7.85245%2013.3586%208.68125%2013.9846%209.33496%2014.7496V5.5816C9.08794%204.37762%208.13648%203.1566%206.95801%202.47613L6.71582%202.34527C6.67779%202.32617%206.6337%202.32502%206.58301%202.35796C6.52946%202.39279%206.49805%202.44863%206.49805%202.51031V12.6988Z'%20/%3e%3c/svg%3e",n7e=re(me,"51d29d",20,20),s7e="/cdn/assets/brain-pro-d62yb9y6.svg",o7e="data:image/svg+xml,%3csvg%20width='20'%20height='20'%20viewBox='0%200%2020%2020'%20fill='currentColor'%20xmlns='http://www.w3.org/2000/svg'%20%3e%3cpath%20d='M16.0012%2014.4404C16.0011%2013.9504%2015.8513%2013.4739%2015.5735%2013.0742L15.4465%2012.9082L15.012%2012.3877C13.8614%2012.8911%2012.9152%2013.1121%2012.0618%2013.1562C11.1474%2013.2035%2010.3804%2013.0475%209.66528%2012.8857C8.94197%2012.7221%208.2815%2012.5562%207.4729%2012.5146C6.70029%2012.475%205.77576%2012.5504%204.5686%2012.8887L4.55298%2012.9082C4.19457%2013.3383%203.9984%2013.8806%203.99829%2014.4404C3.99829%2015.7627%205.07059%2016.835%206.39282%2016.835H13.6077C14.9298%2016.8349%2016.0012%2015.7626%2016.0012%2014.4404ZM11.8352%203.16504H8.16528V7.72949C8.16528%208.20671%208.01876%208.6713%207.74829%209.06055L7.62427%209.22266L5.93384%2011.25C6.52115%2011.1756%207.05045%2011.1614%207.54028%2011.1865C8.48665%2011.2351%209.26917%2011.432%209.95825%2011.5879C10.6556%2011.7456%2011.2718%2011.8653%2011.9924%2011.8281C12.5791%2011.7978%2013.2616%2011.6591%2014.1213%2011.3184L12.3752%209.22266C12.0261%208.80363%2011.8352%208.27494%2011.8352%207.72949V3.16504ZM13.1653%207.72949C13.1653%207.96372%2013.2468%208.19111%2013.3967%208.37109L16.468%2012.0566L16.6653%2012.3154C17.0974%2012.9371%2017.3312%2013.6782%2017.3313%2014.4404C17.3313%2016.4971%2015.6643%2018.1649%2013.6077%2018.165H6.39282C4.33605%2018.165%202.66821%2016.4972%202.66821%2014.4404C2.66832%2013.5694%202.97386%2012.7258%203.53149%2012.0566L6.60278%208.37109L6.65552%208.30176C6.77186%208.13447%206.83521%207.93464%206.83521%207.72949V3.16504H6.66626C6.29914%203.16486%206.00122%202.86716%206.00122%202.5C6.00122%202.13284%206.29914%201.83514%206.66626%201.83496H13.3333L13.467%201.84863C13.7702%201.91057%2013.9983%202.17857%2013.9983%202.5C13.9983%202.82143%2013.7702%203.08943%2013.467%203.15137L13.3333%203.16504H13.1653V7.72949Z'%20/%3e%3c/svg%3e",r7e="data:image/svg+xml,%3csvg%20width='20'%20height='20'%20viewBox='0%200%2020%2020'%20fill='currentColor'%20xmlns='http://www.w3.org/2000/svg'%20data-rtl-flip=''%20%3e%3cpath%20d='M5.69336%2011.0557C7.05891%2011.1944%208.12484%2012.3479%208.125%2013.75L8.11035%2014.0273C7.97144%2015.3928%206.81814%2016.459%205.41602%2016.459L5.13965%2016.4443C3.86514%2016.3149%202.85128%2015.3018%202.72168%2014.0273L2.70801%2013.75C2.70818%2012.2546%203.92061%2011.0423%205.41602%2011.042L5.69336%2011.0557ZM5.41602%2012.3721C4.65515%2012.3724%204.03826%2012.9891%204.03809%2013.75C4.03826%2014.5109%204.65515%2015.1286%205.41602%2015.1289C6.17714%2015.1289%206.79475%2014.5111%206.79492%2013.75C6.79475%2012.9889%206.17714%2012.3721%205.41602%2012.3721Z'%20/%3e%3cpath%20d='M16.8008%2013.0986C17.1036%2013.1608%2017.3311%2013.4288%2017.3311%2013.75C17.3311%2014.0712%2017.1036%2014.3392%2016.8008%2014.4014L16.666%2014.415H10.833C10.4659%2014.4149%2010.168%2014.1172%2010.168%2013.75C10.168%2013.3828%2010.4659%2013.0851%2010.833%2013.085H16.666L16.8008%2013.0986Z'%20/%3e%3cpath%20d='M5.69336%203.55566C7.05891%203.69438%208.12484%204.84789%208.125%206.25L8.11035%206.52734C7.97144%207.89281%206.81814%208.95898%205.41602%208.95898L5.13965%208.94434C3.86514%208.81489%202.85128%207.80181%202.72168%206.52734L2.70801%206.25C2.70818%204.75457%203.92061%203.5423%205.41602%203.54199L5.69336%203.55566ZM5.41602%204.87207C4.65515%204.87238%204.03826%205.48911%204.03809%206.25C4.03826%207.0109%204.65515%207.6286%205.41602%207.62891C6.17714%207.62891%206.79475%207.01109%206.79492%206.25C6.79475%205.48892%206.17714%204.87207%205.41602%204.87207Z'%20/%3e%3cpath%20d='M16.8008%205.59863C17.1036%205.66081%2017.3311%205.92879%2017.3311%206.25C17.3311%206.57121%2017.1036%206.83919%2016.8008%206.90137L16.666%206.91504H10.833C10.4659%206.91491%2010.168%206.61719%2010.168%206.25C10.168%205.88281%2010.4659%205.58509%2010.833%205.58496H16.666L16.8008%205.59863Z'%20/%3e%3c/svg%3e",a7e="data:image/svg+xml,%3csvg%20width='20'%20height='20'%20viewBox='0%200%2020%2020'%20fill='currentColor'%20xmlns='http://www.w3.org/2000/svg'%20%3e%3cpath%20d='M12.0303%204.11328C13.4406%202.70317%2015.7275%202.70305%2017.1377%204.11328C18.5474%205.52355%2018.5476%207.81056%2017.1377%209.2207L10.8457%2015.5117C10.522%2015.8354%2010.2868%2016.0723%2010.0547%2016.2627L9.82031%2016.4394C9.61539%2016.5794%209.39783%2016.7003%209.1709%2016.7998L8.94141%2016.8916C8.75976%2016.9582%208.57206%2017.0072%208.35547%2017.0518L7.59082%2017.1865L5.19727%2017.5859C5.05455%2017.6097%204.90286%2017.6358%204.77441%2017.6455C4.67576%2017.653%204.54196%2017.6555%204.39648%2017.6201L4.24707%2017.5703C4.02415%2017.4746%203.84119%2017.3068%203.72559%2017.0957L3.67969%2017.0029C3.59322%2016.8013%203.59553%2016.6073%203.60547%2016.4756C3.61519%2016.3473%203.6403%2016.1963%203.66406%2016.0537L4.06348%2013.6602C4.1638%2013.0582%204.22517%2012.6732%204.3584%2012.3096L4.45117%2012.0791C4.55073%2011.8521%204.67152%2011.6346%204.81152%2011.4297L4.9873%2011.1953C5.17772%2010.9632%205.4146%2010.728%205.73828%2010.4043L12.0303%204.11328ZM6.67871%2011.3447C6.32926%2011.6942%206.14542%2011.8803%206.01953%2012.0332L5.90918%2012.1797C5.81574%2012.3165%205.73539%2012.4618%205.66895%2012.6133L5.60742%2012.7666C5.52668%2012.9869%205.48332%2013.229%205.375%2013.8789L4.97656%2016.2725L4.97559%2016.2744H4.97852L7.37207%2015.875L8.08887%2015.749C8.25765%2015.7147%208.37336%2015.6839%208.4834%2015.6435L8.63672%2015.581C8.78817%2015.5146%208.93356%2015.4342%209.07031%2015.3408L9.2168%2015.2305C9.36965%2015.1046%209.55583%2014.9207%209.90527%2014.5713L14.8926%209.583L11.666%206.35742L6.67871%2011.3447ZM16.1963%205.05371C15.3054%204.16303%2013.8616%204.16305%2012.9707%205.05371L12.6074%205.41601L15.833%208.64257L16.1963%208.27929C17.0869%207.38844%2017.0869%205.94455%2016.1963%205.05371Z'%20/%3e%3cpath%20d='M5.13477%206.68139L5%206.6687H2.5C2.13273%206.6687%201.83496%206.96647%201.83496%207.33374C1.83518%207.70082%202.13286%207.99877%202.5%207.99877H5L5.13477%207.9851C5.4375%207.92299%205.66485%207.6548%205.66504%207.33374C5.66504%207.01249%205.43764%206.74352%205.13477%206.68139Z'%20/%3e%3cpath%20d='M8.46777%203.34838L8.33301%203.33471H2.5C2.13281%203.33471%201.8351%203.6326%201.83496%203.99975C1.83496%204.36702%202.13273%204.66479%202.5%204.66479H8.33301L8.46777%204.65112C8.77057%204.58893%208.99805%204.32094%208.99805%203.99975C8.99793%203.67864%208.77054%203.41052%208.46777%203.34838Z'%20/%3e%3c/svg%3e",i7e=re(me,"a94b02",20,21),l7e="data:image/svg+xml,%3csvg%20width='20'%20height='21'%20viewBox='0%200%2020%2021'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%20%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M5.4997%2012.0437C6.97146%2012.0437%208.16461%2013.237%208.16473%2014.7088C8.16473%2016.1806%206.97153%2017.3738%205.4997%2017.3738C4.02801%2017.3736%202.83466%2016.1805%202.83466%2014.7088C2.83479%2013.2372%204.02809%2012.0439%205.4997%2012.0437ZM5.4997%2013.3738C4.76263%2013.374%204.16486%2013.9717%204.16473%2014.7088C4.16473%2015.446%204.76255%2016.0436%205.4997%2016.0437C6.237%2016.0437%206.83466%2015.4461%206.83466%2014.7088C6.83453%2013.9716%206.23692%2013.3738%205.4997%2013.3738Z'%20fill='currentColor'%20/%3e%3cpath%20d='M17.1335%2014.0574C17.4365%2014.1193%2017.6646%2014.3874%2017.6647%2014.7088C17.6647%2015.0302%2017.4366%2015.2982%2017.1335%2015.3601L16.9997%2015.3738H10.9997C10.6326%2015.3736%2010.3347%2015.0759%2010.3347%2014.7088C10.3348%2014.3417%2010.6327%2014.0439%2010.9997%2014.0437H16.9997L17.1335%2014.0574Z'%20fill='currentColor'%20/%3e%3cpath%20d='M7.29755%204.50936C7.51786%204.21579%207.93544%204.15651%208.22919%204.37655C8.52287%204.59694%208.58232%205.01442%208.362%205.30819L5.362%209.30819C5.24633%209.46232%205.06887%209.5582%204.87665%209.57186C4.68455%209.58535%204.49525%209.51566%204.35907%209.37948L2.85907%207.87948L2.77411%207.77499C2.60385%207.5169%202.63194%207.16525%202.85907%206.93807C3.08624%206.7109%203.43788%206.68285%203.69598%206.85311L3.80048%206.93807L4.75751%207.8951L7.29755%204.50936Z'%20fill='currentColor'%20/%3e%3cpath%20d='M17.1335%206.45741C17.4365%206.51932%2017.6646%206.78745%2017.6647%207.10877C17.6647%207.4302%2017.4366%207.69821%2017.1335%207.76014L16.9997%207.77381H10.9997C10.6326%207.77364%2010.3347%207.47593%2010.3347%207.10877C10.3348%206.74172%2010.6327%206.44391%2010.9997%206.44374H16.9997L17.1335%206.45741Z'%20fill='currentColor'%20/%3e%3c/svg%3e",c7e="data:image/svg+xml,%3csvg%20width='20'%20height='20'%20viewBox='0%200%2020%2020'%20fill='currentColor'%20xmlns='http://www.w3.org/2000/svg'%20%3e%3cpath%20d='M3.502%2016.6663V13.3333C3.502%2012.9661%203.79977%2012.6683%204.16704%2012.6683H7.50004L7.63383%2012.682C7.93691%2012.7439%208.16508%2013.0119%208.16508%2013.3333C8.16508%2013.6547%207.93691%2013.9227%207.63383%2013.9847L7.50004%2013.9984H5.47465C6.58682%2015.2249%208.21842%2016.0013%2010%2016.0013C13.06%2016.0012%2015.5859%2013.711%2015.9551%2010.7513L15.9854%2010.6195C16.0845%2010.3266%2016.3785%2010.1334%2016.6973%2010.1732C17.0617%2010.2186%2017.3198%2010.551%2017.2745%2010.9154L17.2247%2011.2523C16.6301%2014.7051%2013.6224%2017.3313%2010%2017.3314C8.01103%2017.3314%206.17188%2016.5383%204.83208%2015.2474V16.6663C4.83208%2017.0335%204.53411%2017.3311%204.16704%2017.3314C3.79977%2017.3314%203.502%2017.0336%203.502%2016.6663ZM4.04497%209.24935C3.99936%209.61353%203.66701%209.87178%203.30278%209.8265C2.93833%209.78105%202.67921%209.44876%202.72465%209.08431L4.04497%209.24935ZM10%202.66829C11.9939%202.66833%2013.8372%203.46551%2015.1778%204.76204V3.33333C15.1778%202.96616%2015.4757%202.66844%2015.8428%202.66829C16.2101%202.66829%2016.5079%202.96606%2016.5079%203.33333V6.66634C16.5079%207.03361%2016.2101%207.33138%2015.8428%207.33138H12.5098C12.1425%207.33138%2011.8448%207.03361%2011.8448%206.66634C11.8449%206.29922%2012.1426%206.0013%2012.5098%206.0013H14.5254C13.4133%204.77488%2011.7816%203.99841%2010%203.99837C6.93998%203.99837%204.41406%206.28947%204.04497%209.24935L3.38481%209.16634L2.72465%209.08431C3.17574%205.46702%206.26076%202.66829%2010%202.66829Z'%20/%3e%3c/svg%3e",u7e="/cdn/assets/medical-records-drop-shadow-fc07kx7v.svg",vb=we({differentialDiagnosisTitle:{id:"restricted.healthPrompts.differentialDiagnosis.title",defaultMessage:"Differential diagnosis and diagnostic reasoning"},differentialDiagnosisBody:{id:"restricted.healthPrompts.differentialDiagnosis.body",defaultMessage:"Generate an example scenario and explain the diagnostic reasoning."},differentialDiagnosisPrompt:{id:"restricted.healthPrompts.differentialDiagnosis.prompt",defaultMessage:"Provide differential diagnosis and diagnostic reasoning for an example scenario. Curate the example based on my domain if you are aware of it."},diagnosticWorkupTitle:{id:"restricted.healthPrompts.diagnosticWorkup.title",defaultMessage:"Diagnostic workup and test selection"},diagnosticWorkupBody:{id:"restricted.healthPrompts.diagnosticWorkup.body",defaultMessage:"Propose a test strategy and ordering sequence for an example case."},diagnosticWorkupPrompt:{id:"restricted.healthPrompts.diagnosticWorkup.prompt",defaultMessage:"Provide a diagnostic workup and test selection for an example scenario. Curate the example based on my domain if you are aware of it."},assessmentPlanTitle:{id:"restricted.healthPrompts.assessmentPlan.title",defaultMessage:"Assessment and plan"},assessmentPlanBody:{id:"restricted.healthPrompts.assessmentPlan.body",defaultMessage:"Draft a structured assessment and plan for a sample case."},assessmentPlanPrompt:{id:"restricted.healthPrompts.assessmentPlan.prompt",defaultMessage:"Provide an assessment and plan for an example scenario. Curate the example based on my domain if you are aware of it."},documentationTitle:{id:"restricted.healthPrompts.documentation.title",defaultMessage:"Clinical documentation and note writing"},documentationBody:{id:"restricted.healthPrompts.documentation.body",defaultMessage:"Draft a clear clinical note based on an example encounter."},documentationPrompt:{id:"restricted.healthPrompts.documentation.prompt",defaultMessage:"Draft clinical documentation and note writing for an example scenario. Curate the example based on my domain if you are aware of it."},patientCounselingTitle:{id:"restricted.healthPrompts.patientCounseling.title",defaultMessage:"Patient counseling and after-visit instructions"},patientCounselingBody:{id:"restricted.healthPrompts.patientCounseling.body",defaultMessage:"Write patient-friendly counseling and after-visit instructions."},patientCounselingPrompt:{id:"restricted.healthPrompts.patientCounseling.prompt",defaultMessage:"Provide patient counseling and after-visit instructions for an example scenario. Curate the example based on my domain if you are aware of it."},careCoordinationTitle:{id:"restricted.healthPrompts.careCoordination.title",defaultMessage:"Care coordination and handoffs"},careCoordinationBody:{id:"restricted.healthPrompts.careCoordination.body",defaultMessage:"Provide a handoff summary and coordination plan."},careCoordinationPrompt:{id:"restricted.healthPrompts.careCoordination.prompt",defaultMessage:"Provide care coordination and handoffs for an example scenario. Curate the example based on my domain if you are aware of it."},guidelinesTitle:{id:"restricted.healthPrompts.guidelines.title",defaultMessage:"Evidence and guideline review"},guidelinesBody:{id:"restricted.healthPrompts.guidelines.body",defaultMessage:"Summarize evidence and guideline recommendations for a sample case."},guidelinesPrompt:{id:"restricted.healthPrompts.guidelines.prompt",defaultMessage:"Provide evidence and guideline review for an example scenario. Curate the example based on my domain if you are aware of it."}}),d7e={documentation_query:{icon:Rk,iconUrl:a7e},assessment_plan:{icon:i7e,iconUrl:l7e},patient_counseling:{icon:EE,iconUrl:t7e},care_coordination:{icon:vc,iconUrl:c7e},diagnostic_workup:{icon:Ek,iconUrl:o7e},latest_guidelines:{icon:sEe,iconUrl:r7e},differential_diagnosis:{icon:n7e,iconUrl:s7e}},f7e=[{id:"differential_diagnosis",kind:"differential_diagnosis",title:"differentialDiagnosisTitle",body:"differentialDiagnosisBody",prompt:"differentialDiagnosisPrompt"},{id:"diagnostic_workup",kind:"diagnostic_workup",title:"diagnosticWorkupTitle",body:"diagnosticWorkupBody",prompt:"diagnosticWorkupPrompt"},{id:"assessment_plan",kind:"assessment_plan",title:"assessmentPlanTitle",body:"assessmentPlanBody",prompt:"assessmentPlanPrompt"},{id:"documentation_query",kind:"documentation_query",title:"documentationTitle",body:"documentationBody",prompt:"documentationPrompt"},{id:"patient_counseling",kind:"patient_counseling",title:"patientCounselingTitle",body:"patientCounselingBody",prompt:"patientCounselingPrompt"},{id:"care_coordination",kind:"care_coordination",title:"careCoordinationTitle",body:"careCoordinationBody",prompt:"careCoordinationPrompt"},{id:"latest_guidelines",kind:"latest_guidelines",title:"guidelinesTitle",body:"guidelinesBody",prompt:"guidelinesPrompt"}];function m7e(t,e){var o;const n=d7e[e.kind],s=(o=n==null?void 0:n.iconUrl)!=null?o:u7e;return{type:xt.Starter,id:"health_".concat(e.id),title:t.formatMessage(vb[e.title]),body:t.formatMessage(vb[e.body]),prompt:t.formatMessage(vb[e.prompt]),icon:n!=null&&n.icon?v.createElement(n.icon,{className:"icon"}):void 0,iconImageUrl:s,iconThumbnailUrl:s,accentColor:"#0B6C79",source:"CURATED",category:"quorum_health",data:N({quorumHealth:!0,health_use_case:e.kind},e.hazelnutHint&&{hazelnut_hint:e.hazelnutHint})}}function fft({enabled:t}){const e=te();return v.useMemo(()=>t?{prompts:f7e.map(s=>m7e(e,s)),isReady:!0}:{prompts:[],isReady:!0},[t,e])}function mft({label:t,onClick:e,disabled:n=!1,icon:s,rightIcon:o}){return i.jsxs("button",{className:"group border-token-border-default enabled:hover:bg-token-main-surface-secondary relative flex h-[42px] items-center gap-1.5 rounded-full border px-3 py-2 text-start text-[13px] transition disabled:cursor-not-allowed xl:gap-2 xl:text-[14px]",disabled:n,onClick:e,children:[s,i.jsx("span",{className:"group-hover:text-token-text-primary max-w-full whitespace-nowrap text-gray-600 transition select-none dark:text-gray-500",children:t}),o]})}const Cg=re(me,"102c34",20,20),p7e=je(()=>Me(()=>import("./e19d9367-hjerg984x6xr8atp.js"),__vite__mapDeps([265,1,266,2,3,267,148,149])).then(t=>t.default)),RI=we({bannerBody:{id:"gqtTeH",defaultMessage:"Work smarter and better with coworkers in your organization"},dismissBanner:{id:"hbc/Bs",defaultMessage:"Dismiss banner"}});function pft(t){"use forget";const e=D.c(12),{clientThreadId:n,canShowBanner:s}=t,o=s===void 0?!1:s;let r;e[0]===Symbol.for("react.memo_cache_sentinel")?(r=mt(),e[0]=r):r=e[0];const a=r;let l;e[1]!==n?(l=hi(n),e[1]=n,e[2]=l):l=e[2];const c=l,u=Ze(n,_7e),{eligible:d}=Ct(We.hasSeenJoinWorkspaceBanner),f=c&&!u,m=_n(),p=(m==null?void 0:m.email_domain_type)==="professional",g=a&&p&&o&&f&&c&&!u&&d,{data:h,isLoading:_}=Uc();let x;e[3]!==(h==null?void 0:h.accountItems)?(x=h==null?void 0:h.accountItems.some(h7e),e[3]=h==null?void 0:h.accountItems,e[4]=x):x=e[4];const b=!!x;let y;e[5]===Symbol.for("react.memo_cache_sentinel")?(y=Je("3217430380",{disableExposureLog:!0}).get("enable_workspace_discovery",!1),e[5]=y):y=e[5];const C=!_&&!b&&y&&g;let w;if(e[6]===Symbol.for("react.memo_cache_sentinel")){const $=tt.getItem(Ie.WorkspaceDiscoveryInfo),F=mn("2801792036").get("cache_ttl_ms",6048e5);w=dse($,F),e[6]=w}else w=e[6];const{isFresh:k,hasWorkspacesToJoin:E}=w;let T;e[7]===Symbol.for("react.memo_cache_sentinel")?(T=xe("69563813"),e[7]=T):T=e[7];const A=!k&&T&&C,{data:I,isFetching:j}=fse(A),R=I==null?void 0:I.workspaces.some(g7e);if(!(!j&&(k?!!E:!!R)&&C)){let $;return e[8]===Symbol.for("react.memo_cache_sentinel")?($={shouldShow:!1},e[8]=$):$=e[8],$}let B;e[9]===Symbol.for("react.memo_cache_sentinel")?(B=Je("1200251816").get("enable-join-workspaces-banner",!1),e[9]=B):B=e[9];const U=B;let H;return e[10]!==U?(H={shouldShow:U},e[10]=U,e[11]=H):H=e[11],H}function g7e(t){return!t.requested}function h7e(t){return t.isEnterprisey()}function _7e(t){return ve.hasUserMessage(t)}function gft(){"use forget";const t=D.c(10),e=y7e;let n;t[0]===Symbol.for("react.memo_cache_sentinel")?(n=()=>{V.logEventWithStatsig("Thread Join Workspace Banner Button Dismissed","chatgpt_thread_join_workspace_banner_button_dismissed"),e()},t[0]=n):n=t[0];const s=n;let o;t[1]===Symbol.for("react.memo_cache_sentinel")?(o=[],t[1]=o):o=t[1],v.useEffect(x7e,o);let r;t[2]===Symbol.for("react.memo_cache_sentinel")?(r=()=>{V.logEventWithStatsig("Thread Join Workspace Banner Button Clicked","chatgpt_thread_join_workspace_banner_button_clicked"),e(),rt(p7e,{mode:"dismissible",section:"both",source:"join_workspace_banner"})},t[2]=r):r=t[2];const a=r;let l;t[3]===Symbol.for("react.memo_cache_sentinel")?(l=q("group flex w-full items-center justify-center gap-1.5 rounded-full py-2 ps-3 sm:justify-start sm:gap-2","bg-primary shadow-short","hover:bg-token-surface-hover motion-safe:transition-colors motion-safe:duration-150 motion-safe:ease-out","focus-visible:ring-token-text-tertiary focus-visible:ring-2 focus-visible:ring-offset-1 focus-visible:ring-offset-transparent focus-visible:outline-hidden","pe-7"),t[3]=l):l=t[3];let c;t[4]===Symbol.for("react.memo_cache_sentinel")?(c=i.jsx("span",{className:"hidden text-[#5856D6] sm:inline",children:i.jsx(Cg,{className:"icon-sm","aria-hidden":"true"})}),t[4]=c):c=t[4];let u;t[5]===Symbol.for("react.memo_cache_sentinel")?(u=i.jsxs("button",{type:"button",onClick:a,className:l,children:[i.jsxs("span",{className:"flex items-center gap-1.5",children:[c,i.jsx("span",{className:"text-token-text-primary text-[13px] leading-[18px] sm:text-sm sm:leading-5",children:i.jsx(P,N({},RI.bannerBody))})]}),i.jsx("span",{className:q("inline-flex items-center gap-1 text-sm font-medium","text-[#5856D6]"),children:i.jsx("span",{children:i.jsx(P,{id:"V/M/bo",defaultMessage:"Find Workspaces"})})})]}),t[5]=u):u=t[5];let d,f,m;t[6]===Symbol.for("react.memo_cache_sentinel")?(d=g=>{g.stopPropagation(),s()},f=q("mt-0.15 absolute end-1.5 top-1/2 -translate-y-1/2 rounded-full p-1","text-token-text-secondary hover:bg-token-main-surface-tertiary","focus-visible:ring-token-text-tertiary focus-visible:ring-2 focus-visible:ring-offset-1 focus-visible:ring-offset-transparent focus-visible:outline-hidden"),m=i.jsx(zw,{className:"icon-xs","aria-hidden":"true"}),t[6]=d,t[7]=f,t[8]=m):(d=t[6],f=t[7],m=t[8]);let p;return t[9]===Symbol.for("react.memo_cache_sentinel")?(p=i.jsxs("div",{className:"relative",children:[u,i.jsxs("button",{type:"button",onClick:d,className:f,children:[m,i.jsx("span",{className:"sr-only",children:i.jsx(P,N({},RI.dismissBanner))})]})]}),t[9]=p):p=t[9],p}function x7e(){V.logEventWithStatsig("Thread Join Workspace Banner Button Shown","chatgpt_thread_join_workspace_banner_button_shown")}function y7e(){kt(We.hasSeenJoinWorkspaceBanner)}const b7e="/cdn/assets/image-gen-style-muppet-n2ibo32s.webp",v7e={src:b7e},S7e="/cdn/assets/image-gen-style-prismatic-nfskhy16.webp",C7e={src:S7e},w7e="/cdn/assets/image-gen-style-stencil-o3ei6xcu.webp",k7e={src:w7e},E7e="/cdn/assets/image-gen-style-vintage-b4hknhkn.webp",T7e={src:E7e},M7e={vintage:{id:"vintage",title:"Vintage",imageUrl:T7e.src,width:640,height:960,label:qe({id:"ydZalp",defaultMessage:"Vintage"}),textToImagePrompt:qe({id:"QLRC2p",defaultMessage:"Create an image with warm film-inspired tones, a subtle grain overlay, and soft contrast reminiscent of a vintage portrait from the 1970s."}),imageToImagePrompt:qe({id:"oVNStw",defaultMessage:"Restyle this image so it feels vintage: warm film-inspired tones, subtle grain, gentle highlights, and a nostalgic analog finish."})},prismatic:{id:"prismatic",title:"Prismatic",imageUrl:C7e.src,width:640,height:960,label:qe({id:"TEbVxP",defaultMessage:"Prismatic"}),textToImagePrompt:qe({id:"7RS+tT",defaultMessage:"Create an image lit by refracted prism light: iridescent rainbows, sharp beams, crystalline highlights, and dark negative space for contrast."}),imageToImagePrompt:qe({id:"1T27lc",defaultMessage:"Restyle this image with prismatic lighting: refracted rainbow beams, crystalline flares, and dramatic contrast between light and shadow."})},muppet:{id:"muppet",title:"Muppet",imageUrl:v7e.src,width:600,height:600,label:qe({id:"tsCLc1",defaultMessage:"Muppet"}),textToImagePrompt:qe({id:"J8Kj1D",defaultMessage:"Create a playful puppet portrait inspired by classic Muppets: felt textures, stitched seams, button-style eyes, and studio lighting that keeps the tone cheerful."}),imageToImagePrompt:qe({id:"0qfchV",defaultMessage:"Restyle this image as a playful felt puppet: visible stitching, button-style eyes, expressive mouth shapes, and brightly lit studio vibes."})},stencil:{id:"stencil",title:"Stencil",imageUrl:k7e.src,width:600,height:900,label:qe({id:"MX4EIB",defaultMessage:"Stencil"}),textToImagePrompt:qe({id:"wIgcaq",defaultMessage:"Create a bold stencil print: high-contrast monochrome layers, cutout shapes, subtle spray-paint texture, and poster-like composition."}),imageToImagePrompt:qe({id:"wHguJk",defaultMessage:"Restyle this image as a stencil print: graphic cutout shapes, sharp edges, layered spray textures, and bold high-contrast color blocking."})}},A7e=1e3*60*60*24,wV=3,N7e=1e3*60*60*24*7,I7e=1e3*60*60*24*14,Zm=Sa(Ie.ImageGenV2PromoBannerState,()=>({shownAt:null,dismissedAt:null,clickedAt:null,shownCount:null}));function kV(t){if(!t)return!1;let e=!1;t.shownAt&&(e=Date.now()<t.shownAt+A7e);let n=!1;t.shownCount&&t.shownCount>=wV&&(n=!0);let s=!1;t.dismissedAt&&(s=Date.now()<t.dismissedAt+N7e);let o=!1;return t.clickedAt&&(o=Date.now()<t.clickedAt+I7e),e&&n||s||o}const Sb=we({title:{id:"HA0Vh3",defaultMessage:"Create your first image"},body:{id:"N/ecLg",defaultMessage:"Got an idea? Try one of our new curated styles and filters or imagine something from scratch."},cta:{id:"H39eD5",defaultMessage:"Try now"}});function hft(){"use forget";var C,w,k,E;const t=D.c(15),e=X(F7e);let n;t[0]!==((C=e.data)==null?void 0:C.styles)?(n=(k=(w=e.data)==null?void 0:w.styles)==null?void 0:k.filter(B7e).map(D7e),t[0]=(E=e.data)==null?void 0:E.styles,t[1]=n):n=t[1];const s=n;let o;t[2]!==s?(o=s!=null?s:Object.values(M7e),t[2]=s,t[3]=o):o=t[3];const r=o,a=X(L7e);let l;t[4]!==a?(l=kV(a),t[4]=a,t[5]=l):l=t[5];const c=l,[u,d]=v.useState(c),f=e.status!=="pending"&&r.length>0&&!u;let m,p;if(t[6]!==f?(m=()=>{f&&(Zm.set(O7e),V.logStructuredEvent(E1,{type:T1.CHATGPT_IMAGE_HOME_NUX_TYPE_IMPRESSION}))},p=[f],t[6]=f,t[7]=m,t[8]=p):(m=t[7],p=t[8]),v.useEffect(m,p),!f)return null;const g=P7e;let h;t[9]===Symbol.for("react.memo_cache_sentinel")?(h=()=>{Zm.set(j7e),v.startTransition(()=>{d(!0)})},t[9]=h):h=t[9];const _=h;let x,b,y;t[10]===Symbol.for("react.memo_cache_sentinel")?(x=i.jsx(P,N({},Sb.title)),b=i.jsx(P,N({},Sb.body)),y=i.jsx(P,N({},Sb.cta)),t[10]=x,t[11]=b,t[12]=y):(x=t[10],b=t[11],y=t[12]);let S;return t[13]!==r?(S=i.jsx(BG,{imageStyles:r,title:x,description:b,ctaText:y,onCtaClick:g,onDismiss:_}),t[13]=r,t[14]=S):S=t[14],S}function j7e(t){return G(N({},t),{dismissedAt:Date.now()})}function P7e(){V.logStructuredEvent(E1,{type:T1.CHATGPT_IMAGE_HOME_NUX_TYPE_CLICK}),Zm.set(R7e),xe("4219931330")?Qd("/images",{state:{source:a3.CHATGPT_IMAGE_HOME_NAVIGATION_SOURCE_TYPE_HOME_NUX}}):fn({fallbackScreenHint:"login_or_signup",skipLoginModal:!1,callbackUrl:"/images"})}function R7e(t){return G(N({},t),{clickedAt:Date.now()})}function O7e(t){let e=1;return t!=null&&t.shownCount&&t.shownCount<wV&&(e=t.shownCount+1),{shownAt:Date.now(),dismissedAt:null,clickedAt:null,shownCount:e}}function L7e(){return Zm()}function D7e(t){var e,n,s,o;return{id:t.id,imageUrl:(s=(n=(e=t.variants)==null?void 0:e[0])==null?void 0:n.url)!=null?s:"",title:(o=t.title)!=null?o:""}}function B7e(t){return t.variants&&t.variants.length>0&&t.title}function F7e(){return sx()}function _ft(){if(mt())return!1;const e=Zm();return kV(e)?!1:Je("10373540").get("images_noauth_homepage_promo_enabled",!1)}const xft=()=>jn().pathname==="/new-tab-page",EV=re(me,"f8aa74",20,20);function TV(t,e=0){return new Promise(n=>{requestAnimationFrame(()=>{setTimeout(()=>{n(t())},e)})})}class fT{constructor(e){ye(this,"namespace","Voice");e&&(this.namespace=e.namespace)}log(e,...n){}info(...e){this.log("log",...e)}debug(...e){this.log("debug",...e)}error(...e){this.log("error",...e)}createChild(e){return new fT({namespace:"".concat(this.namespace,":").concat(e)})}}const ul=new fT,mT=st({},{name:"voiceTaskStatus",equals:()=>!1}),Xu=st([]),pT=(t,e)=>{mT.set(n=>{const s=n[t],o=typeof e=="function"?e(s):e;return o===void 0?delete n[t]:n[t]=o,n})},yft=()=>X(()=>{const e=Xu()[0];if(e)return mT()[e.id]==="pending"?e:void 0}),bft=t=>{let e=!1;return pT(t,n=>n==="pending"?(e=!0,"running"):n),e},vft=t=>{const e=Kt(()=>Xu());e.find(s=>t===s.id)&&(pT(t,"complete"),Xu.set(e.filter(s=>s.id!==t)))},gT=t=>{const e=fa(),n={id:e,command:t,timestamp:Date.now()};return TV(()=>{Xu.set([...Xu(),n]),ul.debug("Current voice queue",Xu()),pT(e,"pending")}),Z9(()=>mT()[e]==="complete")},U7e=re(me,"e01b66",20,20),hT=re(me,"455a38",20,20),H7e=re(me,"3cf414",20,20),Qm=t=>{"use forget";var h,_,x,b,y;const e=D.c(29);let n,s,o;e[0]!==t?(h=t,{hint:n,isNextToLabel:s}=h,o=De(h,["hint","isNextToLabel"]),e[0]=t,e[1]=n,e[2]=s,e[3]=o):(n=e[1],s=e[2],o=e[3]);let r;e[4]!==n?(r=$7e(n),e[4]=n,e[5]=r):r=e[5];const a=r,l=a&&(_=n.connectorLogoUrl)!=null?_:null,c=a&&(x=n.connectorLogoUrlDark)!=null?x:null,u=n.isConnector&&a;let d;e[6]!==l||e[7]!==c||e[8]!==u?(d={lightLogoUrl:l,darkLogoUrl:c,enabled:u},e[6]=l,e[7]=c,e[8]=u,e[9]=d):d=e[9];const f=ow(d);if(n.isConnector){if((b=f.data)!=null&&b.url){const w=(y=f.data)==null?void 0:y.url,k=s?"":n.name;let E;return e[10]!==o||e[11]!==w||e[12]!==k?(E=i.jsx("img",N({src:w,alt:k,className:"icon"},o)),e[10]=o,e[11]=w,e[12]=k,e[13]=E):E=e[13],E}if(n.logo&&!f.isLoading&&!f.error){const w=s?"":n.name;let k;return e[14]!==n.logo||e[15]!==o||e[16]!==w?(k=i.jsx(DM,N({svgString:n.logo,className:"icon","aria-label":w},o)),e[14]=n.logo,e[15]=o,e[16]=w,e[17]=k):k=e[17],k}const S=s?"":n.name;let C;return e[18]!==o||e[19]!==S?(C=i.jsx(Ir,N({className:"icon","aria-label":S},o)),e[18]=o,e[19]=S,e[20]=C):C=e[20],C}let m;e[21]!==n.systemHint?(m=ed(n.systemHint),e[21]=n.systemHint,e[22]=m):m=e[22];const p=m;let g;return e[23]!==p||e[24]!==n.logo||e[25]!==n.name||e[26]!==s||e[27]!==o?(g=p?i.jsx(p,N({className:"icon","aria-label":s?"":n.name},o)):i.jsx(DM,N({svgString:n.logo,className:"icon","aria-label":s?"":n.name},o)),e[23]=p,e[24]=n.logo,e[25]=n.name,e[26]=s,e[27]=o,e[28]=g):g=e[28],g};function ed(t){switch(t){case Ke.Search:return xi;case Ke.Think:return P_;case Ke.Research:return mi;case Ke.Canvas:return ll;case Ke.Picture:case Ke.PictureV2:return nx;case Ke.Video:return H7e;case Ke.Slurm:case Ke.ApiTool:return Ir;case Ke.Agent:return U7e;case Ke.Tatertot:return EE;case Ke.Glaux:return hT;default:return}}function $7e(t){return"connectorLogoUrl"in t||"connectorLogoUrlDark"in t}function Sft({intl:t,clientThreadId:e,composerController:n,openFileDialog:s,shouldUseFeatureTiles:o,messages:r}){const a=Jo(),l=ed(Ke.Search),c=ed(Ke.PictureV2),u=v.useMemo(()=>[{type:xt.Starter,id:"starter-prompt-feature-upload-file",category:"upload_file",title:t.formatMessage(r.featureUploadFile),body:"",prompt:"",icon:i.jsx(Kc,{className:"icon"})},{type:xt.Starter,id:"starter-prompt-feature-create-image",category:"create_image",title:t.formatMessage(r.featureCreateImage),body:"",prompt:"",icon:c?i.jsx(c,{className:"icon"}):void 0},{type:xt.Starter,id:"starter-prompt-feature-web-search",category:"web_search",title:t.formatMessage(r.featureWebSearch),body:"",prompt:"",icon:l?i.jsx(l,{className:"icon"}):void 0},{type:xt.Starter,id:"starter-prompt-feature-start-voice-chat",category:"voice_chat",title:t.formatMessage(r.featureStartVoiceChat),body:"",prompt:"",icon:i.jsx(EV,{className:"icon"})}],[c,l,t,r]),d=v.useCallback(h=>{h.preventDefault(),h.stopPropagation(),s==null||s()},[s]),f=v.useCallback(h=>{h.preventDefault(),h.stopPropagation(),gT({type:"START"})},[]),m=v.useCallback(h=>{h.preventDefault(),h.stopPropagation(),a(Ke.PictureV2,{analyticsMetadata:{clientThreadId:e}}),n&&So(Vt(n))},[e,n,a]),p=v.useCallback(h=>{h.preventDefault(),h.stopPropagation(),a(Ke.Search,{analyticsMetadata:{clientThreadId:e}}),n&&So(Vt(n))},[e,n,a]),g=v.useMemo(()=>o?{"starter-prompt-feature-upload-file":d,"starter-prompt-feature-create-image":m,"starter-prompt-feature-start-voice-chat":f,"starter-prompt-feature-web-search":p}:{},[m,f,p,d,o]);return{featureTiles:u,featureTileClickOverrides:g}}const ct=window.sessionStorage,MV=4320*60*1e3,AV=1440*60*1e3;function G7e(){const t=(ct==null?void 0:ct.getItem(Ie.MemoryFullBannerDismissed))==="true",e=ct==null?void 0:ct.getItem(Ie.MemoryFullBannerDismissedTimestamp);if(!t)return e!=null&&(ct==null||ct.removeItem(Ie.MemoryFullBannerDismissedTimestamp)),{dismissed:!1,timestamp:null};if(!e)return ct==null||ct.removeItem(Ie.MemoryFullBannerDismissed),{dismissed:!1,timestamp:null};const n=Number.parseInt(e,10),s=Number.isFinite(n)&&n>=0?n:null;return s==null?(ct==null||ct.removeItem(Ie.MemoryFullBannerDismissed),ct==null||ct.removeItem(Ie.MemoryFullBannerDismissedTimestamp),{dismissed:!1,timestamp:null}):Date.now()-s>=AV?(ct==null||ct.removeItem(Ie.MemoryFullBannerDismissed),ct==null||ct.removeItem(Ie.MemoryFullBannerDismissedTimestamp),{dismissed:!1,timestamp:null}):{dismissed:!0,timestamp:s}}function V7e(){const t=(ct==null?void 0:ct.getItem(Ie.MemoryAlmostFullBannerDismissed))==="true",e=ct==null?void 0:ct.getItem(Ie.MemoryAlmostFullBannerDismissedTimestamp);if(!t)return e!=null&&(ct==null||ct.removeItem(Ie.MemoryAlmostFullBannerDismissedTimestamp)),{dismissed:!1,timestamp:null};if(!e)return ct==null||ct.removeItem(Ie.MemoryAlmostFullBannerDismissed),{dismissed:!1,timestamp:null};const n=Number.parseInt(e,10),s=Number.isFinite(n)&&n>=0?n:null;return s==null?(ct==null||ct.removeItem(Ie.MemoryAlmostFullBannerDismissed),ct==null||ct.removeItem(Ie.MemoryAlmostFullBannerDismissedTimestamp),{dismissed:!1,timestamp:null}):Date.now()-s>=MV?(ct==null||ct.removeItem(Ie.MemoryAlmostFullBannerDismissed),ct==null||ct.removeItem(Ie.MemoryAlmostFullBannerDismissedTimestamp),{dismissed:!1,timestamp:null}):{dismissed:!0,timestamp:s}}const Gi=tn(ls(()=>{const{dismissed:t,timestamp:e}=G7e(),{dismissed:n,timestamp:s}=V7e();return{memoryFullBannerDismissed:t,memoryFullBannerDismissedTimestamp:e,memoryAlmostFullBannerDismissed:n,memoryAlmostFullBannerDismissedTimestamp:s}})),dc={dismissBanner(){const t=Date.now();Gi.setState(e=>{e.memoryFullBannerDismissed=!0,e.memoryFullBannerDismissedTimestamp=t}),ct==null||ct.setItem(Ie.MemoryFullBannerDismissed,"true"),ct==null||ct.setItem(Ie.MemoryFullBannerDismissedTimestamp,t.toString())},dismissAlmostFullBanner(){const t=Date.now();Gi.setState(e=>{e.memoryAlmostFullBannerDismissed=!0,e.memoryAlmostFullBannerDismissedTimestamp=t}),ct==null||ct.setItem(Ie.MemoryAlmostFullBannerDismissed,"true"),ct==null||ct.setItem(Ie.MemoryAlmostFullBannerDismissedTimestamp,t.toString())},clearDismissedBanner(){Gi.setState(t=>{t.memoryFullBannerDismissed=!1,t.memoryFullBannerDismissedTimestamp=null}),ct==null||ct.removeItem(Ie.MemoryFullBannerDismissed),ct==null||ct.removeItem(Ie.MemoryFullBannerDismissedTimestamp)},clearAlmostFullDismissedBanner(){Gi.setState(t=>{t.memoryAlmostFullBannerDismissed=!1,t.memoryAlmostFullBannerDismissedTimestamp=null}),ct==null||ct.removeItem(Ie.MemoryAlmostFullBannerDismissed),ct==null||ct.removeItem(Ie.MemoryAlmostFullBannerDismissedTimestamp)}};function Cft(t){var R,O;const e=m_(t),n=Hs(),s=k_(),{data:o}=Vp({gizmoId:e,includeMemoryEntries:!1,enabled:s}),r=yl(),a=ww(o==null?void 0:o.memoryFullPct,!0),l=typeof a=="object"?a.layer:"control",c=typeof a=="object"?a.threshold:Zl,u=Ze(t,L=>ve.findNode(L,B=>B.message.author.role===dt.Tool&&B.message.author.name==="bio")),f=Ze(t,L=>!L||L.isLoading)&&!!t,m=(R=u==null?void 0:u.message.metadata)==null?void 0:R.memory_percentage_used,p=v.useRef(void 0),g=v.useRef(!1),[h,_]=v.useState(!1);v.useEffect(()=>{if(f)return;const L=u==null?void 0:u.message.id;if(!g.current){p.current=L!=null?L:null,g.current=!0;return}L&&L!==p.current&&Promise.resolve().then(()=>_(!0))},[f,u==null?void 0:u.message.id]);const x=m!=null?m*100:null,b=(O=o==null?void 0:o.memoryFullPct)!=null?O:null,y=h?x!=null:b!=null,S=h?x!=null?x:0:b!=null?b:0,C=y&&S>=c,[w,k]=v.useState(!C);v.useEffect(()=>{h&&k(!0)},[h]);const[E,T]=v.useState(!1),M=v.useRef(null),A=v.useRef(!1);v.useEffect(()=>{var B;if(!y)return;const L=(B=M.current)!=null?B:-1/0;M.current=S,L<Zl&&S>=Zl&&(A.current=!0,Promise.resolve().then(()=>T(!0))),S<Zl&&A.current&&(A.current=!1,Promise.resolve().then(()=>T(!1)),Promise.resolve().then(()=>k(!0)))},[y,S,E]);const I=Gi(L=>L.memoryAlmostFullBannerDismissed),j=Gi(L=>L.memoryAlmostFullBannerDismissedTimestamp);switch(v.useEffect(()=>{if(!I||j==null)return;const L=Date.now()-j,B=MV-L;if(B<=0){dc.clearAlmostFullDismissedBanner();return}const U=window.setTimeout(()=>{dc.clearAlmostFullDismissedBanner()},B);return()=>{window.clearTimeout(U)}},[I,j]),l){case"control":return{shouldShowMemoryAlmostFull:!1};case"treatment_upsell_on_convo_start":return{shouldShowMemoryAlmostFull:!n&&r&&C&&w&&!I&&S<100};case"treatment_upsell_on_bio_tool":return{shouldShowMemoryAlmostFull:!n&&r&&C&&h&&w&&!I&&S<100};default:return{shouldShowMemoryAlmostFull:!1}}}function wft(t){"use forget";var W,Y;const e=D.c(30),n=m_(t),s=Hs(),o=k_();let r;e[0]!==n||e[1]!==o?(r={gizmoId:n,includeMemoryEntries:!1,enabled:o},e[0]=n,e[1]=o,e[2]=r):r=e[2];const{data:a}=Vp(r),l=yl(),c=ww(a==null?void 0:a.memoryFullPct),u=Ze(t,Y7e),f=Ze(t,K7e)&&!!t,m=(W=u==null?void 0:u.message.metadata)==null?void 0:W.memory_percentage_used,p=v.useRef(void 0),g=v.useRef(!1),[h,_]=v.useState(!1),x=m!=null?m*100:null,b=(Y=a==null?void 0:a.memoryFullPct)!=null?Y:null,y=h?x!=null:b!=null,S=h?x!=null?x:0:b!=null?b:0,C=y&&S>=ih,[w,k]=v.useState(!C),[E,T]=v.useState(!1),M=v.useRef(null),A=v.useRef(!1);let I,j;e[3]!==h?(I=()=>{h&&k(!0)},j=[h],e[3]=h,e[4]=I,e[5]=j):(I=e[4],j=e[5]),v.useEffect(I,j);let R;e[6]!==(u==null?void 0:u.message.id)||e[7]!==f?(R=()=>{if(f)return;const K=u==null?void 0:u.message.id;if(!g.current){p.current=K!=null?K:null,g.current=!0;return}K&&K!==p.current&&Promise.resolve().then(()=>_(!0))},e[6]=u==null?void 0:u.message.id,e[7]=f,e[8]=R):R=e[8];const O=u==null?void 0:u.message.id;let L;e[9]!==f||e[10]!==O?(L=[f,O],e[9]=f,e[10]=O,e[11]=L):L=e[11],v.useEffect(R,L);let B;e[12]!==S||e[13]!==y?(B=()=>{var Z;if(!y)return;const K=(Z=M.current)!=null?Z:-1/0;M.current=S,K<ih&&S>=ih&&(A.current=!0,Promise.resolve().then(()=>T(!0))),S<ih&&A.current&&(A.current=!1,Promise.resolve().then(()=>T(!1)),Promise.resolve().then(()=>k(!0)))},e[12]=S,e[13]=y,e[14]=B):B=e[14];let U;e[15]!==S||e[16]!==y||e[17]!==E?(U=[y,S,E],e[15]=S,e[16]=y,e[17]=E,e[18]=U):U=e[18],v.useEffect(B,U);const H=Gi(q7e),$=Gi(W7e);let F,z;switch(e[19]!==H||e[20]!==$?(F=()=>{if(!H||$==null)return;const K=Date.now()-$,Z=AV-K;if(Z<=0){dc.clearDismissedBanner();return}const J=window.setTimeout(z7e,Z);return()=>{window.clearTimeout(J)}},z=[H,$],e[19]=H,e[20]=$,e[21]=F,e[22]=z):(F=e[21],z=e[22]),v.useEffect(F,z),c){case"control":{const K=!s&&l?C&&w&&!H:!1;let Z;return e[23]!==K?(Z={shouldShowMemoryFull:K},e[23]=K,e[24]=Z):Z=e[24],Z}case"treatment_upsell_on_convo_start":{const K=!s&&l?C&&!H:!1;let Z;return e[25]!==K?(Z={shouldShowMemoryFull:K},e[25]=K,e[26]=Z):Z=e[26],Z}case"treatment_upsell_on_bio_tool":{const K=!s&&l?C&&h&&!H:!1;let Z;return e[27]!==K?(Z={shouldShowMemoryFull:K},e[27]=K,e[28]=Z):Z=e[28],Z}default:{let K;return e[29]===Symbol.for("react.memo_cache_sentinel")?(K={shouldShowMemoryFull:!1},e[29]=K):K=e[29],K}}}function z7e(){dc.clearDismissedBanner()}function W7e(t){return t.memoryFullBannerDismissedTimestamp}function q7e(t){return t.memoryFullBannerDismissed}function K7e(t){return!t||t.isLoading}function Y7e(t){return ve.findNode(t,Z7e)}function Z7e(t){return t.message.author.role===dt.Tool&&t.message.author.name==="bio"}function kft({memoryAlmostFullVariant:t}={}){const e=te(),{openSettings:n}=X3(),s=bt(),o=Et(),r=(o==null?void 0:o.isFree())||(o==null?void 0:o.isFreeWorkspace()),a=tue(!0),l=a!=="control",c=e.formatMessage(ar.getMore),u=()=>{var f;if(typeof window<"u")try{(f=window.sessionStorage)==null||f.setItem(WD,"true")}catch(m){}};v.useEffect(()=>{t?l&&V.logEventWithStatsig("Memory Banner Almost Full Shown","chatgpt_memory_banner_almost_full_shown",{variant:a,threshold:Zl}):V.logEventWithStatsig("Memory Banner Full Shown","chatgpt_memory_banner_full_shown",{variant:a})},[l,t,a]);const d=f=>{V.logEventWithStatsig("Memory Banner Upgrade Clicked","chatgpt_memory_banner_upgrade_clicked",{variant:a,surface:f}),xs(s,"Memory Full Banner")};if(t){if(!r||!l)return null;const f=i.jsxs("div",{className:"flex flex-col gap-2 md:flex-row",children:[i.jsx(Se,{color:"secondary",onClick:()=>{V.logEventWithStatsig("Memory Banner Manage Clicked","chatgpt_memory_banner_manage_clicked",{variant:a,surface:"almost_full"}),u(),n(Ts.Personalization)},children:e.formatMessage(ar.memoryManageButton)}),i.jsx(Se,{color:"primary",onClick:()=>d("almost_full"),children:c})]});return i.jsx(wt.div,{initial:{opacity:0},animate:{opacity:1},children:i.jsx(hn,{title:e.formatMessage(ar.memoryAlmostFullTitleTreatment),icon:i.jsx(Sm,{className:"h-6 w-6"}),content:e.formatMessage(ar.memoryAlmostFullTreatmentBody),customCtas:f,onDismiss:()=>dc.dismissAlmostFullBanner()})})}if(l){const f=i.jsxs("div",{className:"flex flex-col gap-2 md:flex-row",children:[i.jsx(Se,{color:"secondary",onClick:()=>{V.logEventWithStatsig("Memory Banner Manage Clicked","chatgpt_memory_banner_manage_clicked",{variant:a,surface:"almost_full"}),u(),n(Ts.Personalization)},children:e.formatMessage(ar.memoryManageButton)}),i.jsx(Se,{color:"primary",onClick:()=>d("almost_full"),children:c})]});return i.jsx(wt.div,{initial:{opacity:0},animate:{opacity:1},children:i.jsx(hn,{icon:i.jsx(Sm,{className:"h-6 w-6"}),title:e.formatMessage(ar.memoryFullTitleTreatment),content:e.formatMessage(ar.memoryFullTreatmentBody),customCtas:f,onDismiss:()=>dc.dismissBanner()})})}return i.jsx(wt.div,{initial:{opacity:0},animate:{opacity:1},children:i.jsx(hn,{title:e.formatMessage(ar.memoryFullTitleControl),content:e.formatMessage(ar.memoryFullTooltipControl,ar.memoryFullTooltipControl.values),primaryCtaText:e.formatMessage(ar.memoryManageButton),onPrimaryCtaClick:()=>{V.logEventWithStatsig("Memory Banner Manage Clicked","chatgpt_memory_banner_manage_clicked",{variant:a,surface:"full"}),n(Ts.Personalization)},onDismiss:()=>dc.dismissBanner()})})}const ar=we({memoryFullTitleControl:{id:"xzFgrm",defaultMessage:"ChatGPT's out of space for saved memories"},memoryFullTitleTreatment:{id:"61wRTj",defaultMessage:"Memory full"},memoryFullTreatmentBody:{id:"bGCh/f",defaultMessage:"Responses may feel less personalized. Upgrade to expand memory, or manage existing memories."},getMore:{id:"LdblxY",defaultMessage:"Get more"},getMoreTreatment:{id:"zq5dLI",defaultMessage:"Upgrade"},memoryManageButton:{id:"a5A88o",defaultMessage:"Manage"},memoryAlmostFullTitleTreatment:{id:"2IibCN",defaultMessage:"Memory almost full"},memoryAlmostFullTreatmentBody:{id:"2wtxF6",defaultMessage:"Once memory is full, responses will feel less personalized. Upgrade to expand memory, or manage existing memories."},memoryTooltipVariant:{id:"h72m3Z",defaultMessage:"<link>Manage</link> saved memories or upgrade to {planType} to get more.",values:{link:t=>i.jsx(ko,{to:Fd(Ts.Personalization),className:"underline",children:t})}},memoryFullTooltipControl:{id:"I1DjDy",defaultMessage:"New memories wont be added until you make space. <a>Learn more</a>",values:{a:t=>i.jsx("a",{href:Zce,target:"_blank",rel:"noopener noreferrer",className:"underline",children:t})}}});function Eft(t){const e=O$(),n=Xp(tg.getMaxBannerClientThreadId);return!(!e||n!==t)}let Ia="";const OI={setSessionId(t){Ia=t},logImpression(){Fe.count(Ue.JAWBONE,"jawbone_notifications_banner.impression"),Ve.addAction("tasks.notification.impression"),V.logEvent("tasks:notification.impression",{logging_session_id:Ia})},logNotNow(){Fe.count(Ue.JAWBONE,"jawbone_notifications_banner.not_now"),Ve.addAction("tasks.notification.not_now"),V.logEvent("tasks:notification.not_now",{logging_session_id:Ia})},logAllow(){Fe.count(Ue.JAWBONE,"jawbone_notifications_banner.allow"),Ve.addAction("tasks.notification.allow"),V.logEvent("tasks:notification.allow",{logging_session_id:Ia})},logSystemDeny(){Fe.count(Ue.JAWBONE,"jawbone_notifications_banner.system_deny"),Ve.addAction("tasks.notification.system_deny"),V.logEvent("tasks:notification.system_deny",{logging_session_id:Ia})},logSystemAllow(){Fe.count(Ue.JAWBONE,"jawbone_notifications_banner.system_allow"),Ve.addAction("tasks.notification.system_allow"),V.logEvent("tasks:notification.system_allow",{logging_session_id:Ia})},logSystemSuccess(){Fe.count(Ue.JAWBONE,"jawbone_notifications_banner.system_success"),Ve.addAction("tasks.notification.system_success"),V.logEvent("tasks:notification.system_success",{logging_session_id:Ia})},logRegistration(){Fe.count(Ue.JAWBONE,"jawbone_notifications_banner.registration"),Ve.addAction("tasks.notification.registration"),V.logEvent("tasks:notification.registration",{logging_session_id:Ia})},logErrorDismissed(){Fe.count(Ue.JAWBONE,"jawbone_notifications_banner.error_dismissed"),Ve.addAction("tasks.notification.error_dismissed"),V.logEvent("tasks:notification.error_dismissed",{logging_session_id:Ia})}},td=window.localStorage,_T=tn(ls(()=>{var t;return{initialized:!1,requestingClientThreadId:null,previouslyRequestedClientThreadIds:new Set,lastRequestTime:(t=td==null?void 0:td.getItem("oai/apps/jawboneNotificationLastRequestTime"))!=null?t:null,permission:typeof window<"u"&&"Notification"in window?Notification.permission:"default"}})),c1=_T.getState,Nh=_T.setState,Tft={initIfNeeded:(t=c1())=>{var e;t.initialized||(Nh({initialized:!0}),typeof window<"u"&&"Notification"in window&&((e=navigator.permissions)==null||e.query({name:"notifications"}).then(n=>{n.onchange=()=>{switch(Notification.permission){case"granted":OI.logSystemAllow();break;case"denied":OI.logSystemDeny();break}Nh({permission:Notification.permission})}})))},setRequestingClientThreadId:t=>{Nh(e=>{e.previouslyRequestedClientThreadIds.has(t)||(e.requestingClientThreadId=t,e.previouslyRequestedClientThreadIds.add(t))})},clearNotificationRequest:()=>{Nh(t=>{if(t.requestingClientThreadId){const e=new Date().toISOString();t.lastRequestTime=e,td==null||td.setItem("oai/apps/jawboneNotificationLastRequestTime",e)}t.requestingClientThreadId=null})}},Q7e={getRequestingClientThreadId:(t=c1())=>t.requestingClientThreadId,getLastRequestTime:(t=c1())=>t.lastRequestTime,getPermission:(t=c1())=>t.permission};function Mft(t){const{requestingClientThreadId:e}=_T(s=>({requestingClientThreadId:Q7e.getRequestingClientThreadId(s)}));return!(!O$()||t!==e)}const J7e="o4-mini";function Aft(t,e){return!(tt.getItem(Ie.TasksHasSeenProjectDisclaimerBanner)!=null)&&t===J7e&&M3(e)&&e.files.length>0}const LI=je(()=>Me(()=>import("./f7ad4b2f-chlkletok286hoqp.js"),__vite__mapDeps([268,1,2,3])).then(t=>t.BeaconModal));function Nft(t){"use forget";const e=D.c(17),{clientThreadId:n,composerController:s,openFileDialog:o}=t,r=Un(n),a=Ze(n,ve.getCurrentLeafId);let l;e[0]!==a||e[1]!==r?(l={serverThreadId:r,leafId:a},e[0]=a,e[1]=r,e[2]=l):l=e[2];const c=Dce(l);let u;e[3]!==n?(u=()=>ai(n),e[3]=n,e[4]=u):u=e[4];const d=u,f=bg(d),m=vg(d),p=v.useRef(!1),g=Wd.useStore();let h;e[5]===Symbol.for("react.memo_cache_sentinel")?(h=()=>{p.current=!1},e[5]=h):h=e[5];let _;e[6]!==a?(_=[a],e[6]=a,e[7]=_):_=e[7],v.useEffect(h,_);let x,b;e[8]!==m||e[9]!==f||e[10]!==n||e[11]!==s||e[12]!==c||e[13]!==o||e[14]!==g?(x=()=>{if(!c||p.current||cv(LI))return;p.current=!0,V.logEventWithStatsig("Web Beacon Shown","chatgpt_web_beacon_shown",{beacon_id:c.beacon_id,beacon_name:c.beacon_name,beacon_type:"modal"}),f.mutate(c.beacon_id),rt(LI,{trackBeaconDismissAndClearBeaconUIState:()=>{V.logEventWithStatsig("Web Beacon Dismissed","chatgpt_web_beacon_dismissed",{beacon_id:c.beacon_id,beacon_name:c.beacon_name,beacon_type:"modal"}),m.mutate(c.beacon_id),Wo.dismiss(),nRe(c)},modalInfo:c,clientThreadId:n,composerController:s,persistedSystemHintsStore:g,openFileDialog:o})},b=[c,f,m,n,s,g,o],e[8]=m,e[9]=f,e[10]=n,e[11]=s,e[12]=c,e[13]=o,e[14]=g,e[15]=x,e[16]=b):(x=e[15],b=e[16]),v.useEffect(x,b)}function Ift(){var a;const t=xe("727502549"),e=xe("550432558"),{eligible:n}=Ct(We.hasSeenReferralUpsellAnnouncement),{data:s}=KD(n),o=Je("1976075658"),r=((a=s==null?void 0:s.info)==null?void 0:a.program_name)==="colombia"?o.get("show_banner",!1):!0;return t&&e&&r&&n&&!!(s!=null&&s.info)}function jft(){var c;const t=xe("3148583717"),e=xe("3362382575"),n=mn("1087852479").value,{eligible:s}=Ct(We.hasSeenStudentsUpsellAnnouncement),o=_n(),r=o==null?void 0:o.email,a=(c=n==null?void 0:n.blacklist)!=null?c:[];return Array.isArray(a)&&r&&a.some(u=>r.endsWith(u))?!1:(r==null?void 0:r.endsWith(".edu"))&&s&&t&&e}function Pft(t){"use forget";const e=D.c(12),[n,s]=v.useState(!1);let o;e[0]!==t?(o=Pt(t),e[0]=t,e[1]=o):o=e[1];const r=o;let a;e[2]!==r?(a=()=>{var p;return((p=zd(r))==null?void 0:p.value)===Nn.REALTIME},e[2]=r,e[3]=a):a=e[3];const l=X(a);let c;e[4]!==l?(c=()=>{l&&s(!0)},e[4]=l,e[5]=c):c=e[5];const u=c;let d,f;e[6]!==l?(d=()=>{l||s(!1)},f=[l],e[6]=l,e[7]=d,e[8]=f):(d=e[7],f=e[8]),v.useEffect(d,f);let m;return e[9]!==n||e[10]!==u?(m={maybeSetWaitingForRealtimeOnAbort:u,isWatingForRealtimeStatusChange:n},e[9]=n,e[10]=u,e[11]=m):m=e[11],m}function Rft(){const t=gX(),e=xe("1416952492");return v.useMemo(()=>{const n=[];for(const s of t){const o=hX(s.name);o&&n.push(o)}return e&&!n.includes(Ke.Research)&&n.push(Ke.Research),n},[t,e])}function X7e(t){const e=te(),n=Et(),s=(n==null?void 0:n.isSelfServeBusiness())||(n==null?void 0:n.isEnterpriseCBP()),o=D9(_=>_.bySystemHint(t)),r=mX(pX(t)),a=r&&s,l=t===Ke.Research?e8e(e.locale,o,s):pc(t)?t8e(e.locale,o,s):null,c=l!=null&&!r,u=t===Ke.Research&&xe("1416952492"),d=pc(t)&&xe("926440545"),f=u||d,m=f||r!=null,p=f?i.jsx(P,{id:"composer.skills.unavailable",defaultMessage:"Temporarily unavailable"}):r&&!s?i.jsx(P,{id:"composer.skills.rateLimited",defaultMessage:"{limit} more available on {resetDate}",values:{limit:r.limit,resetDate:new Date(r.resets_after).toLocaleDateString(e.locale,{month:"long",day:"numeric"})}}):void 0;let g,h;return(a||c)&&(g=a?r.title:l==null?void 0:l.label,h=a?r.description:l==null?void 0:l.secondaryLabel),{isBlocked:m,blockedLabel:p,remainingLabel:g,remainingLabelSecondary:h}}function NV(t,e){return new Date(e.reset_after).toLocaleDateString(t,{month:"long",day:"numeric"})}function e8e(t,e,n){return n||!e?null:{label:i.jsx(P,{id:"m6JsYD",defaultMessage:"{remaining} left",values:{remaining:e.remaining}}),secondaryLabel:i.jsx(P,{id:"8V98un",defaultMessage:"More available on {resetDate}",values:{resetDate:NV(t,e)}})}}function t8e(t,e,n){return n||!e?null:{label:i.jsx(P,{id:"nD45w8",defaultMessage:"{remaining} left",values:{remaining:e.remaining}}),secondaryLabel:i.jsx(P,{id:"eBZSNV",defaultMessage:"More available on {resetDate}",values:{resetDate:NV(t,e)}})}}function Oft(t,e,n){const s=t.slice(),o=s.splice(e,1)[0];return s.splice(n,0,o),s}function Lft(){var p;const t=X(ln),e=g_(),n=X(ot.sidebarUrlTrayOpen$),s=X(ot.context$),o=X(ot.contextCollection$),r=X(ot.activeTabContextItemIds$),a=h_(o,r),l=e?a.length>0:n&&!!s,c=(p=o==null?void 0:o[0])!=null?p:s,u=Is(),d=Jo(),f=v.useRef(u);v.useEffect(()=>{if(!t)return;const g=f.current;if(f.current=u,u===Ke.Agent&&g!==Ke.Agent&&c){if(e){a.some(_=>_.id===c.id)||u7(c.id);return}n||A3(!0)}},[t,u,e,n,s,a,c]);const m=v.useRef(l);v.useEffect(()=>{if(!t)return;const g=l,h=m.current;m.current=g,h&&!g&&u===Ke.Agent&&d(null,{ifPrevSystemHint:Ke.Agent})},[t,e,l,u,d])}var n8e=(t=>(t.ConfigureRepos="configure-repos",t.SyncRepos="sync-repos",t.IndexRepos="index-repos",t))(n8e||{});const s8e=je(()=>Me(()=>import("./52989639-hl6vrc4o7p5m5r9e.js"),__vite__mapDeps([87,2,1,3,88])).then(t=>t.ContextConnectorDocumentParser));function Dft({composerController:t,parsedDocumentHandler:e}){const{gdriveLinkStatus:n,o365BusinessLinkStatus:s,o365PersonalLinkStatus:o}=_X();return n==="false"&&s==="false"&&o==="false"?null:i.jsx(s8e,{composerController:t,parsedDocumentHandler:e})}const IV=re(me,"1685a9",20,20),o8e=re(me,"a18c10",20,20),Bft=re(me,"f735f6",20,20),Fft=re(me,"712359",20,20),Uft=re(me,"d09e06",20,20),r8e="webp",a8e=222,i8e=160,l8e="srgb",c8e=3,u8e="uchar",d8e=72,f8e=!1,m8e=8,p8e=!1,g8e=!1,h8e="/cdn/assets/example_bg_1-grdr084h.webp",Hft={format:r8e,width:a8e,height:i8e,space:l8e,channels:c8e,depth:u8e,density:d8e,isProgressive:f8e,paletteBitDepth:m8e,hasProfile:p8e,hasAlpha:g8e,src:h8e},_8e="webp",x8e=222,y8e=160,b8e="srgb",v8e=3,S8e="uchar",C8e=72,w8e=!1,k8e=8,E8e=!1,T8e=!1,M8e="/cdn/assets/example_bg_2-bh3fby76.webp",$ft={format:_8e,width:x8e,height:y8e,space:b8e,channels:v8e,depth:S8e,density:C8e,isProgressive:w8e,paletteBitDepth:k8e,hasProfile:E8e,hasAlpha:T8e,src:M8e},A8e="webp",N8e=222,I8e=160,j8e="srgb",P8e=3,R8e="uchar",O8e=72,L8e=!1,D8e=8,B8e=!1,F8e=!1,U8e="/cdn/assets/example_bg_3-ogafarpd.webp",Gft={format:A8e,width:N8e,height:I8e,space:j8e,channels:P8e,depth:R8e,density:O8e,isProgressive:L8e,paletteBitDepth:D8e,hasProfile:B8e,hasAlpha:F8e,src:U8e},Vft=t=>v.createElement("svg",N({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),v.createElement("g",{id:"Icon"},v.createElement("path",{id:"vector",fillRule:"evenodd",clipRule:"evenodd",d:"M7.9082 1.33328C7.93833 1.3333 7.96889 1.33332 7.99992 1.33332C8.03094 1.33332 8.06151 1.3333 8.09164 1.33328C8.6219 1.333 9.01567 1.33278 9.35677 1.42418C10.277 1.67076 10.9958 2.38955 11.2424 3.3098C11.2974 3.51505 11.3192 3.73937 11.3278 4.00103C11.6471 4.00317 11.9259 4.00968 12.1678 4.02945C12.5425 4.06006 12.887 4.12577 13.2106 4.29063C13.7123 4.54629 14.1203 4.95424 14.3759 5.45601C14.5408 5.77957 14.6065 6.12403 14.6371 6.49877C14.6666 6.85956 14.6666 7.30246 14.6666 7.8391V10.1609C14.6666 10.6975 14.6666 11.1404 14.6371 11.5012C14.6065 11.8759 14.5408 12.2204 14.3759 12.544C14.1203 13.0457 13.7123 13.4537 13.2106 13.7093C12.887 13.8742 12.5425 13.9399 12.1678 13.9705C11.807 14 11.3641 14 10.8275 14H5.17237C4.63573 14 4.19283 14 3.83204 13.9705C3.4573 13.9399 3.11283 13.8742 2.78928 13.7093C2.28751 13.4537 1.87956 13.0457 1.6239 12.544C1.45904 12.2204 1.39333 11.8759 1.36271 11.5012C1.33324 11.1404 1.33324 10.6975 1.33325 10.1608V7.83912C1.33324 7.30247 1.33324 6.85956 1.36271 6.49877C1.39333 6.12403 1.45904 5.77957 1.6239 5.45601C1.87956 4.95424 2.28751 4.54629 2.78928 4.29063C3.11283 4.12577 3.4573 4.06006 3.83204 4.02945C4.07395 4.00968 4.35278 4.00317 4.67203 4.00103C4.68063 3.73937 4.70245 3.51505 4.75745 3.3098C5.00403 2.38955 5.72282 1.67076 6.64307 1.42418C6.98417 1.33278 7.37794 1.333 7.9082 1.33328ZM6.00649 3.99998H9.99334C9.98722 3.82827 9.97571 3.73408 9.95449 3.65489C9.8312 3.19477 9.4718 2.83537 9.01168 2.71208C8.86349 2.67238 8.66282 2.66665 7.99992 2.66665C7.33702 2.66665 7.13635 2.67238 6.98816 2.71208C6.52804 2.83537 6.16864 3.19477 6.04535 3.65489C6.02413 3.73408 6.01262 3.82827 6.00649 3.99998ZM3.94061 5.35835C3.64833 5.38223 3.49886 5.42551 3.3946 5.47864C3.14372 5.60647 2.93974 5.81045 2.81191 6.06133C2.75878 6.1656 2.7155 6.31506 2.69162 6.60734C2.6671 6.9074 2.66659 7.2956 2.66659 7.86665V10.1333C2.66659 10.7044 2.6671 11.0926 2.69162 11.3926C2.7155 11.6849 2.75878 11.8344 2.81191 11.9386C2.93974 12.1895 3.14372 12.3935 3.3946 12.5213C3.49886 12.5745 3.64833 12.6177 3.94061 12.6416C4.24067 12.6661 4.62887 12.6667 5.19992 12.6667H10.7999C11.371 12.6667 11.7592 12.6661 12.0592 12.6416C12.3515 12.6177 12.501 12.5745 12.6052 12.5213C12.8561 12.3935 13.0601 12.1895 13.1879 11.9386C13.2411 11.8344 13.2843 11.6849 13.3082 11.3926C13.3327 11.0926 13.3333 10.7044 13.3333 10.1333V7.86665C13.3333 7.2956 13.3327 6.9074 13.3082 6.60734C13.2843 6.31506 13.2411 6.1656 13.1879 6.06133C13.0601 5.81045 12.8561 5.60647 12.6052 5.47864C12.501 5.42551 12.3515 5.38223 12.0592 5.35835C11.7592 5.33383 11.371 5.33332 10.7999 5.33332H5.19992C4.62887 5.33332 4.24067 5.33383 3.94061 5.35835Z",fill:"currentcolor"})));function qa(t,e,{checkForDefaultPrevented:n=!0}={}){return function(o){if(t==null||t(o),n===!1||!o.defaultPrevented)return e==null?void 0:e(o)}}function jV(t,e=[]){let n=[];function s(r,a){const l=v.createContext(a),c=n.length;n=[...n,a];const u=f=>{var b;const x=f,{scope:m,children:p}=x,g=De(x,["scope","children"]),h=((b=m==null?void 0:m[t])==null?void 0:b[c])||l,_=v.useMemo(()=>g,Object.values(g));return i.jsx(h.Provider,{value:_,children:p})};u.displayName=r+"Provider";function d(f,m){var h;const p=((h=m==null?void 0:m[t])==null?void 0:h[c])||l,g=v.useContext(p);if(g)return g;if(a!==void 0)return a;throw new Error("`".concat(f,"` must be used within `").concat(r,"`"))}return[u,d]}const o=()=>{const r=n.map(a=>v.createContext(a));return function(l){const c=(l==null?void 0:l[t])||r;return v.useMemo(()=>({["__scope".concat(t)]:G(N({},l),{[t]:c})}),[l,c])}};return o.scopeName=t,[s,H8e(o,...e)]}function H8e(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const s=t.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(r){const a=s.reduce((l,{useScope:c,scopeName:u})=>{const f=c(r)["__scope".concat(u)];return N(N({},l),f)},{});return v.useMemo(()=>({["__scope".concat(e.scopeName)]:a}),[a])}};return n.scopeName=e.scopeName,n}var Ic=globalThis!=null&&globalThis.document?v.useLayoutEffect:()=>{},$8e=cK[" useInsertionEffect ".trim().toString()]||Ic;function G8e({prop:t,defaultProp:e,onChange:n=()=>{},caller:s}){const[o,r,a]=V8e({defaultProp:e,onChange:n}),l=t!==void 0,c=l?t:o;{const d=v.useRef(t!==void 0);v.useEffect(()=>{const f=d.current;if(f!==l){const m=f?"controlled":"uncontrolled",p=l?"controlled":"uncontrolled";console.warn("".concat(s," is changing from ").concat(m," to ").concat(p,". Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component."))}d.current=l},[l,s])}const u=v.useCallback(d=>{var f;if(l){const m=z8e(d)?d(t):d;m!==t&&((f=a.current)==null||f.call(a,m))}else r(d)},[l,t,r,a]);return[c,u]}function V8e({defaultProp:t,onChange:e}){const[n,s]=v.useState(t),o=v.useRef(n),r=v.useRef(e);return $8e(()=>{r.current=e},[e]),v.useEffect(()=>{var a;o.current!==n&&((a=r.current)==null||a.call(r,n),o.current=n)},[n,o]),[n,s,r]}function z8e(t){return typeof t=="function"}var W8e="Arrow",PV=v.forwardRef((t,e)=>{const a=t,{children:n,width:s=10,height:o=5}=a,r=De(a,["children","width","height"]);return i.jsx(jp.svg,G(N({},r),{ref:e,width:s,height:o,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:i.jsx("polygon",{points:"0,0 30,0 15,10"})}))});PV.displayName=W8e;var q8e=PV;function K8e(t){const[e,n]=v.useState(void 0);return Ic(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const s=new ResizeObserver(o=>{if(!Array.isArray(o)||!o.length)return;const r=o[0];let a,l;if("borderBoxSize"in r){const c=r.borderBoxSize,u=Array.isArray(c)?c[0]:c;a=u.inlineSize,l=u.blockSize}else a=t.offsetWidth,l=t.offsetHeight;n({width:a,height:l})});return s.observe(t,{box:"border-box"}),()=>s.unobserve(t)}else n(void 0)},[t]),e}var xT="Popper",[RV,OV]=jV(xT),[Y8e,LV]=RV(xT),DV=t=>{const{__scopePopper:e,children:n}=t,[s,o]=v.useState(null);return i.jsx(Y8e,{scope:e,anchor:s,onAnchorChange:o,children:n})};DV.displayName=xT;var BV="PopperAnchor",FV=v.forwardRef((t,e)=>{const c=t,{__scopePopper:n,virtualRef:s}=c,o=De(c,["__scopePopper","virtualRef"]),r=LV(BV,n),a=v.useRef(null),l=__(e,a);return v.useEffect(()=>{r.onAnchorChange((s==null?void 0:s.current)||a.current)}),s?null:i.jsx(jp.div,G(N({},o),{ref:l}))});FV.displayName=BV;var yT="PopperContent",[Z8e,Q8e]=RV(yT),UV=v.forwardRef((t,e)=>{var Q,ne,ie,fe,ae,le,pe,_e;const J=t,{__scopePopper:n,side:s="bottom",sideOffset:o=0,align:r="center",alignOffset:a=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:d=0,sticky:f="partial",hideWhenDetached:m=!1,updatePositionStrategy:p="optimized",onPlaced:g}=J,h=De(J,["__scopePopper","side","sideOffset","align","alignOffset","arrowPadding","avoidCollisions","collisionBoundary","collisionPadding","sticky","hideWhenDetached","updatePositionStrategy","onPlaced"]),_=LV(yT,n),[x,b]=v.useState(null),y=__(e,Ce=>b(Ce)),[S,C]=v.useState(null),w=K8e(S),k=(Q=w==null?void 0:w.width)!=null?Q:0,E=(ne=w==null?void 0:w.height)!=null?ne:0,T=s+(r!=="center"?"-"+r:""),M=typeof d=="number"?d:N({top:0,right:0,bottom:0,left:0},d),A=Array.isArray(u)?u:[u],I=A.length>0,j={padding:M,boundary:A.filter(X8e),altBoundary:I},{refs:R,floatingStyles:O,placement:L,isPositioned:B,middlewareData:U}=xX({strategy:"fixed",placement:T,whileElementsMounted:(...Ce)=>EX(...Ce,{animationFrame:p==="always"}),elements:{reference:_.anchor},middleware:[yX({mainAxis:o+E,alignmentAxis:a}),c&&bX(N({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?kX():void 0},j)),c&&vX(N({},j)),SX(G(N({},j),{apply:({elements:Ce,rects:ge,availableWidth:Re,availableHeight:ke})=>{const{width:he,height:Ee}=ge.reference,Pe=Ce.floating.style;Pe.setProperty("--radix-popper-available-width","".concat(Re,"px")),Pe.setProperty("--radix-popper-available-height","".concat(ke,"px")),Pe.setProperty("--radix-popper-anchor-width","".concat(he,"px")),Pe.setProperty("--radix-popper-anchor-height","".concat(Ee,"px"))}})),S&&CX({element:S,padding:l}),eOe({arrowWidth:k,arrowHeight:E}),m&&wX(N({strategy:"referenceHidden"},j))]}),[H,$]=GV(L),F=TX(g);Ic(()=>{B&&(F==null||F())},[B,F]);const z=(ie=U.arrow)==null?void 0:ie.x,W=(fe=U.arrow)==null?void 0:fe.y,Y=((ae=U.arrow)==null?void 0:ae.centerOffset)!==0,[K,Z]=v.useState();return Ic(()=>{x&&Z(window.getComputedStyle(x).zIndex)},[x]),i.jsx("div",{ref:R.setFloating,"data-radix-popper-content-wrapper":"",style:N(G(N({},O),{transform:B?O.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:K,"--radix-popper-transform-origin":[(le=U.transformOrigin)==null?void 0:le.x,(pe=U.transformOrigin)==null?void 0:pe.y].join(" ")}),((_e=U.hide)==null?void 0:_e.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}),dir:t.dir,children:i.jsx(Z8e,{scope:n,placedSide:H,onArrowChange:C,arrowX:z,arrowY:W,shouldHideArrow:Y,children:i.jsx(jp.div,G(N({"data-side":H,"data-align":$},h),{ref:y,style:G(N({},h.style),{animation:B?void 0:"none"})}))})})});UV.displayName=yT;var HV="PopperArrow",J8e={top:"bottom",right:"left",bottom:"top",left:"right"},$V=v.forwardRef(function(e,n){const l=e,{__scopePopper:s}=l,o=De(l,["__scopePopper"]),r=Q8e(HV,s),a=J8e[r.placedSide];return i.jsx("span",{ref:r.onArrowChange,style:{position:"absolute",left:r.arrowX,top:r.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[r.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[r.placedSide],visibility:r.shouldHideArrow?"hidden":void 0},children:i.jsx(q8e,G(N({},o),{ref:n,style:G(N({},o.style),{display:"block"})}))})});$V.displayName=HV;function X8e(t){return t!==null}var eOe=t=>({name:"transformOrigin",options:t,fn(e){var _,x,b,y,S;const{placement:n,rects:s,middlewareData:o}=e,a=((_=o.arrow)==null?void 0:_.centerOffset)!==0,l=a?0:t.arrowWidth,c=a?0:t.arrowHeight,[u,d]=GV(n),f={start:"0%",center:"50%",end:"100%"}[d],m=((b=(x=o.arrow)==null?void 0:x.x)!=null?b:0)+l/2,p=((S=(y=o.arrow)==null?void 0:y.y)!=null?S:0)+c/2;let g="",h="";return u==="bottom"?(g=a?f:"".concat(m,"px"),h="".concat(-c,"px")):u==="top"?(g=a?f:"".concat(m,"px"),h="".concat(s.floating.height+c,"px")):u==="right"?(g="".concat(-c,"px"),h=a?f:"".concat(p,"px")):u==="left"&&(g="".concat(s.floating.width+c,"px"),h=a?f:"".concat(p,"px")),{data:{x:g,y:h}}}});function GV(t){const[e,n="center"]=t.split("-");return[e,n]}var tOe=DV,nOe=FV,sOe=UV,oOe=$V,rOe="Portal",VV=v.forwardRef((t,e)=>{var c;const l=t,{container:n}=l,s=De(l,["container"]),[o,r]=v.useState(!1);Ic(()=>r(!0),[]);const a=n||o&&((c=globalThis==null?void 0:globalThis.document)==null?void 0:c.body);return a?uK.createPortal(i.jsx(jp.div,G(N({},s),{ref:e})),a):null});VV.displayName=rOe;function aOe(t,e){return v.useReducer((n,s)=>{const o=e[n][s];return o!=null?o:n},t)}var bT=t=>{const{present:e,children:n}=t,s=iOe(e),o=typeof n=="function"?n({present:s.isPresent}):v.Children.only(n),r=__(s.ref,lOe(o));return typeof n=="function"||s.isPresent?v.cloneElement(o,{ref:r}):null};bT.displayName="Presence";function iOe(t){const[e,n]=v.useState(),s=v.useRef(null),o=v.useRef(t),r=v.useRef("none"),a=t?"mounted":"unmounted",[l,c]=aOe(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return v.useEffect(()=>{const u=Ih(s.current);r.current=l==="mounted"?u:"none"},[l]),Ic(()=>{const u=s.current,d=o.current;if(d!==t){const m=r.current,p=Ih(u);t?c("MOUNT"):p==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(d&&m!==p?"ANIMATION_OUT":"UNMOUNT"),o.current=t}},[t,c]),Ic(()=>{var u;if(e){let d;const f=(u=e.ownerDocument.defaultView)!=null?u:window,m=g=>{const _=Ih(s.current).includes(g.animationName);if(g.target===e&&_&&(c("ANIMATION_END"),!o.current)){const x=e.style.animationFillMode;e.style.animationFillMode="forwards",d=f.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=x)})}},p=g=>{g.target===e&&(r.current=Ih(s.current))};return e.addEventListener("animationstart",p),e.addEventListener("animationcancel",m),e.addEventListener("animationend",m),()=>{f.clearTimeout(d),e.removeEventListener("animationstart",p),e.removeEventListener("animationcancel",m),e.removeEventListener("animationend",m)}}else c("ANIMATION_END")},[e,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:v.useCallback(u=>{s.current=u?getComputedStyle(u):null,n(u)},[])}}function Ih(t){return(t==null?void 0:t.animationName)||"none"}function lOe(t){var s,o;let e=(s=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(o=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:o.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var Cb,wx="HoverCard",[zV]=jV(wx,[OV]),kx=OV(),[cOe,Ex]=zV(wx),WV=t=>{const{__scopeHoverCard:e,children:n,open:s,defaultOpen:o,onOpenChange:r,openDelay:a=700,closeDelay:l=300}=t,c=kx(e),u=v.useRef(0),d=v.useRef(0),f=v.useRef(!1),m=v.useRef(!1),[p,g]=G8e({prop:s,defaultProp:o!=null?o:!1,onChange:r,caller:wx}),h=v.useCallback(()=>{clearTimeout(d.current),u.current=window.setTimeout(()=>g(!0),a)},[a,g]),_=v.useCallback(()=>{clearTimeout(u.current),!f.current&&!m.current&&(d.current=window.setTimeout(()=>g(!1),l))},[l,g]),x=v.useCallback(()=>g(!1),[g]);return v.useEffect(()=>()=>{clearTimeout(u.current),clearTimeout(d.current)},[]),i.jsx(cOe,{scope:e,open:p,onOpenChange:g,onOpen:h,onClose:_,onDismiss:x,hasSelectionRef:f,isPointerDownOnContentRef:m,children:i.jsx(tOe,G(N({},c),{children:n}))})};WV.displayName=wx;var qV="HoverCardTrigger",KV=v.forwardRef((t,e)=>{const a=t,{__scopeHoverCard:n}=a,s=De(a,["__scopeHoverCard"]),o=Ex(qV,n),r=kx(n);return i.jsx(nOe,G(N({asChild:!0},r),{children:i.jsx(jp.a,G(N({"data-state":o.open?"open":"closed"},s),{ref:e,onPointerEnter:qa(t.onPointerEnter,E0(o.onOpen)),onPointerLeave:qa(t.onPointerLeave,E0(o.onClose)),onFocus:qa(t.onFocus,o.onOpen),onBlur:qa(t.onBlur,o.onClose),onTouchStart:qa(t.onTouchStart,l=>l.preventDefault())}))}))});KV.displayName=qV;var vT="HoverCardPortal",[uOe,dOe]=zV(vT,{forceMount:void 0}),YV=t=>{const{__scopeHoverCard:e,forceMount:n,children:s,container:o}=t,r=Ex(vT,e);return i.jsx(uOe,{scope:e,forceMount:n,children:i.jsx(bT,{present:n||r.open,children:i.jsx(VV,{asChild:!0,container:o,children:s})})})};YV.displayName=vT;var k0="HoverCardContent",ZV=v.forwardRef((t,e)=>{const n=dOe(k0,t.__scopeHoverCard),a=t,{forceMount:s=n.forceMount}=a,o=De(a,["forceMount"]),r=Ex(k0,t.__scopeHoverCard);return i.jsx(bT,{present:s||r.open,children:i.jsx(fOe,G(N({"data-state":r.open?"open":"closed"},o),{onPointerEnter:qa(t.onPointerEnter,E0(r.onOpen)),onPointerLeave:qa(t.onPointerLeave,E0(r.onClose)),ref:e}))})});ZV.displayName=k0;var fOe=v.forwardRef((t,e)=>{const g=t,{__scopeHoverCard:n,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:r,onInteractOutside:a}=g,l=De(g,["__scopeHoverCard","onEscapeKeyDown","onPointerDownOutside","onFocusOutside","onInteractOutside"]),c=Ex(k0,n),u=kx(n),d=v.useRef(null),f=__(e,d),[m,p]=v.useState(!1);return v.useEffect(()=>{if(m){const h=document.body;return Cb=h.style.userSelect||h.style.webkitUserSelect,h.style.userSelect="none",h.style.webkitUserSelect="none",()=>{h.style.userSelect=Cb,h.style.webkitUserSelect=Cb}}},[m]),v.useEffect(()=>{if(d.current){const h=()=>{p(!1),c.isPointerDownOnContentRef.current=!1,setTimeout(()=>{var x;((x=document.getSelection())==null?void 0:x.toString())!==""&&(c.hasSelectionRef.current=!0)})};return document.addEventListener("pointerup",h),()=>{document.removeEventListener("pointerup",h),c.hasSelectionRef.current=!1,c.isPointerDownOnContentRef.current=!1}}},[c.isPointerDownOnContentRef,c.hasSelectionRef]),v.useEffect(()=>{d.current&&gOe(d.current).forEach(_=>_.setAttribute("tabindex","-1"))}),i.jsx(z0,{asChild:!0,disableOutsidePointerEvents:!1,onInteractOutside:a,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:qa(r,h=>{h.preventDefault()}),onDismiss:c.onDismiss,children:i.jsx(sOe,G(N(N({},u),l),{onPointerDown:qa(l.onPointerDown,h=>{h.currentTarget.contains(h.target)&&p(!0),c.hasSelectionRef.current=!1,c.isPointerDownOnContentRef.current=!0}),ref:f,style:G(N({},l.style),{userSelect:m?"text":void 0,WebkitUserSelect:m?"text":void 0,"--radix-hover-card-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-hover-card-content-available-width":"var(--radix-popper-available-width)","--radix-hover-card-content-available-height":"var(--radix-popper-available-height)","--radix-hover-card-trigger-width":"var(--radix-popper-anchor-width)","--radix-hover-card-trigger-height":"var(--radix-popper-anchor-height)"})}))})}),mOe="HoverCardArrow",pOe=v.forwardRef((t,e)=>{const r=t,{__scopeHoverCard:n}=r,s=De(r,["__scopeHoverCard"]),o=kx(n);return i.jsx(oOe,G(N(N({},o),s),{ref:e}))});pOe.displayName=mOe;function E0(t){return e=>e.pointerType==="touch"?void 0:t()}function gOe(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP});for(;n.nextNode();)e.push(n.currentNode);return e}var zft=WV,Wft=KV,qft=YV,Kft=ZV;const hOe=yp(()=>{const t=navigator.mediaDevices;let e=t?null:[];return x3(()=>e,n=>{if(!t)return()=>{};const s=()=>{var o;(o=t.enumerateDevices)==null||o.call(t).then(r=>{e=r.filter(a=>a.kind==="videoinput"),n()},r=>{})};return s(),Kd(t,{devicechange:s})})}),Yft=yt(()=>{if(!_Oe())return!1;const t=hOe();return t!=null&&t.length>0}),_Oe=d7(()=>{var t,e,n;return!Ap()&&typeof navigator<"u"&&typeof HTMLCanvasElement<"u"&&((t=navigator.mediaDevices)==null?void 0:t.getUserMedia)!=null&&((n=(e=navigator.mediaDevices).getSupportedConstraints)==null?void 0:n.call(e).facingMode)===!0}),Zft=je(()=>Me(()=>import("./81d33ce0-b36isibbd5va6a3w.js"),__vite__mapDeps([269,1,2,3,270])).then(t=>t.PhotoBoothModal));function xOe(t){return X(()=>Fn(Pt(t)).id)}const yOe=Hn(()=>xe("2783249450")),ST=()=>yOe(),bOe="https://chatgpt.com/voice",QV="https://realtime.chatgpt.com",JV="https://chatgpt.com",vOe=[/\[abort\]/,/The user aborted a request/,/Fetch is aborted/,/Request signal is aborted/],SOe="v=0\r\no=- 0 0 IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\na=ice-ufrag:foo\r\na=ice-pwd:barbazqux\r\na=fingerprint:sha-256 00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00\r\na=setup:actpass\r\na=msid-semantic: WMS\r\nm=audio 9 UDP/TLS/RTP/SAVPF 111\r\nc=IN IP4 0.0.0.0\r\na=rtpmap:111 opus/48000/2\r\na=mid:0\r\na=rtcp-mux\r\n",COe=t=>{const e=t instanceof Error?t.message:String(t);return vOe.some(n=>n.test(e))},CT=()=>xe("571174949"),DI=()=>{const t=CT(),e=t?JV:QV,n=t?"/realtime/status":"/v1/vp/status";return"".concat(e).concat(n)},wb=(t=!0)=>{const e=CT();let n,s;return e?(n=JV,s="/realtime/vp".concat(t?"":"s")):(n=QV,s="/v1/vp".concat(t?"":"s")),"".concat(n).concat(s)};async function BI(t,{payload:e,eventSource:n,url:s}){var a;const o={eventSource:n,voice:e.voice,voice_mode:(a=e.voice_mode)!=null?a:"undefined",voice_session_id:e.voice_session_id};performance.clearResourceTimings();const r=performance.now();Ut.getToken.request(o);try{const l=await t();TV(()=>{const u=performance.getEntriesByType("resource").filter(_=>_.name.includes(s))[0],{domainLookup:d,connect:f,secureConnection:m,request:p,response:g,latency:h}=nl()._getToken;if(u){const{domainLookupEnd:_,domainLookupStart:x,connectEnd:b,connectStart:y,secureConnectionStart:S,requestStart:C,responseStart:w,responseEnd:k,duration:E}=u;x>0&&d.setHighResStart(x),_>0&&d.setHighResEnd(_),y>0&&f.setHighResStart(y),b>0&&f.setHighResEnd(b),S>0&&m.setHighResMark(S),C>0&&p.setHighResStart(C),w>0&&g.setHighResStart(w),k>0&&g.setHighResEnd(k),E&&h.setLatency(E)}ul.debug({timing:nl()._getToken,entry:u})});const c=performance.now()-r;return Ut.getToken.success(G(N({},o),{durationMs:c})),l}catch(l){const c=performance.now()-r,u=COe(l);throw Ut.getToken.failure(G(N({},o),{durationMs:c,error:l instanceof Error?l.message:String(l),voice_session_id:e.voice_session_id,user_aborted:u})),l}}class eC{static startLivekitSession(e,n,s){const o="".concat(bOe,"/get_token");return BI(()=>nc.post(o,e,{additionalHeaders:s?{[vu.ProofToken]:s}:{}}),{payload:e,eventSource:n,url:o})}static startTransceiverSession({payload:e,accessToken:n,proofOfWorkAnswer:s,eventSource:o,signal:r,dataChannelId:a=0,offer:l}){const c=e.voice_mode==="advanced",u="".concat(wb(c),"?dcid=").concat(a),d=nl()._connect.authHeaders,f=nl()._connect.newForm;return BI(async()=>{const m=d.time(()=>fd({accessToken:n}));delete m["cf-timezone"];let p={};const g=f.time(()=>{const _=new FormData;return _.append("sdp",l.sdp),_.append("session",JSON.stringify(e)),_}),h=await fetch(u,{method:"POST",body:g,headers:N(N(N({},m),p),s?{[vu.ProofToken]:s}:{}),signal:r});if(!h.ok)throw new Error("Failed to create session: ".concat(h.statusText));return h},{payload:e,eventSource:o,url:u})}static prewarmRealtimeVoice(){if(CT())return;const e={[vu.ProofToken]:"dummy"},n=N(N({},fd({accessToken:"dummy"})),e),s=()=>{};nc.post(DI(),{requested_voice_mode:"prewarm"},{additionalHeaders:e}).catch(s);const o=()=>{const r=new FormData;return r.append("sdp",SOe),r.append("session",JSON.stringify({voice_mode:"prewarm"})),r};fetch("".concat(wb(!0),"?dcid=0"),{method:"POST",body:o(),headers:n}).catch(s),fetch("".concat(wb(!1),"?dcid=0"),{method:"POST",body:o(),headers:n}).catch(s)}static async getVoiceStatus(e,n){var r;const s={eventSource:n,requested_voice_mode:(r=e.requested_voice_mode)!=null?r:"null"},o=await ol.getRequirementsToken();return Ut.getVoiceStatus.request(s),ue.safePost("/conversation/voice/status",{requestBody:e,additionalHeaders:{[vu.ProofToken]:o}}).then(a=>(Ut.getVoiceStatus.success(s),a)).catch(a=>{throw Ut.getVoiceStatus.failure(G(N({},s),{error:a==null?void 0:a.message})),a})}static async getRealtimeVoiceStatus(e,n){var r;const s={eventSource:n,requested_voice_mode:(r=e.requested_voice_mode)!=null?r:"null"},o=await ol.getRequirementsToken();return Ut.getVoiceStatus.request(s),nc.post(DI(),e,{additionalHeaders:{[vu.ProofToken]:o}}).then(a=>(Ut.getVoiceStatus.success(s),a)).catch(a=>{throw Ut.getVoiceStatus.failure(G(N({},s),{error:a==null?void 0:a.message})),a})}}const wOe=()=>ST()?eC.getRealtimeVoiceStatus:eC.getVoiceStatus,XV=()=>[8,4,4,4,12].map(e=>Math.floor(Math.random()*Math.pow(10,e)).toString(16).padStart(e,"0").toUpperCase()).join("-");let kb;const kOe=()=>(kb||(kb=new TextEncoder),kb);async function ez({room:t,event:e,voiceStore:n}){const s=kOe();await t.localParticipant.publishData(s.encode(JSON.stringify(e))),n.setState(o=>{o.server.messages.push(G(N({},e),{timestamp:new Date,source:"local"}))})}function Qft(t,e,n,s){ez({room:t,voiceStore:e,event:{type:Li.TrackState,payload:{type:Li.TrackState,track_id:n==="camera_front"?"webcam":"screenshare",media_type:"video",media_source:n,state:s}}})}function EOe(t,e,n,s){ez({room:t,voiceStore:e,event:{type:Li.TrackState,payload:{type:Li.TrackState,track_id:"microphone",media_type:"audio",media_source:n,state:s}}})}class TOe{constructor(){ye(this,"logger",ul.createChild("VoiceTurnContext"));ye(this,"publish",async()=>{throw new Error("VoiceTurnContext does not have a set publisher.")});ye(this,"store",tn(xp(ls(()=>({parts:{},attachments:{}})))))}useState(e){return this.store(e||(n=>n))}setPublisher(e){this.publish=e}async add({parts:e,attachments:n}){if(!e&&!n)return;let s={},o={};n&&(s=Object.fromEntries(n.map(a=>[this.makeId("attachment"),a]))),e&&(o=Object.fromEntries(e.map(a=>[this.makeId("part"),a])));const r={type:Li.TurnContext,payload:{type:Li.TurnContext,action:BM.Add,attachments:s,parts:o}};await this.publish(r),this.store.setState(a=>{a.parts=Object.assign(a.parts,o),a.attachments=Object.assign(a.attachments,s)}),this.logger.info("Added",{payload:r})}async remove({parts:e,attachments:n}){if(!e&&!n)return;this.logger.info("Removing turn context attachment",{parts:e,attachments:n});const s={},o={},r=this.store.getState();n&&n.forEach(l=>{r.attachments[l]&&(s[l]=r.attachments[l])}),e&&e.forEach(l=>{r.parts[l]&&(o[l]=r.parts[l])});const a={type:Li.TurnContext,payload:{type:Li.TurnContext,action:BM.Remove,attachments:s,parts:o}};this.publish(a),this.store.setState(l=>{Object.keys(o).forEach(c=>{delete l.parts[c]}),Object.keys(s).forEach(c=>{delete l.attachments[c]})}),this.logger.info("Removed",{payload:a})}async clear(){this.store.setState(e=>{e.parts={},e.attachments={}}),this.logger.info("Cleared")}makeId(e){return"client:".concat(e?"".concat(e,":"):"").concat(Date.now(),"-").concat(Math.random().toString(36).substring(2,15))}}var MOe=(t=>(t.Starting="starting",t.Started="started",t.Stopping="stopping",t.Stopped="stopped",t))(MOe||{});const tz={earlyServerThreadId:null,hadConversationActivity:!1,conversationId:null,voiceSessionId:null,isActivityHalted:!1,isVoiceModeActive:!1,video:"stopped",screenshare:"stopped",dev:{room:null},credentials:{token:null,url:null,e2eeKey:null},server:{actions:null,connectionState:null,remoteState:null,messages:[],usage:null,toolUpdate:null,voiceConnectionQuality:null,turnContext:new TOe,relayReady:!1},disconnectPending:void 0,metrics:{totalLatencyMs:[],currentRttMs:[],numSpeaking:0,numThinking:0,numListening:0},hasConnectedOnce:!1},nz=t=>{const e=tn(xp(ls(()=>tz)));return t&&e.setState(t),e},AOe=nz(),sz=v.createContext(null),NOe=({children:t,initializer:e})=>{const n=v.useRef(void 0);return n.current||(n.current=nz(e)),i.jsx(sz.Provider,{value:n.current,children:t})};function wg(){const t=v.useContext(sz);return t!=null?t:AOe}function dl(t){return wg()(t)}function Jft(){const t=X(()=>x_()),e=dl(s=>!!(s.credentials.token&&s.credentials.url&&s.credentials.e2eeKey)),n=dl(s=>s.server.connectionState==="connected");return t==="livekit"?e:n}function IOe(){const{voiceName:t}=xx(),e=wOe();return v.useCallback(async function(s,o){var l;const r=XV(),a=await e(G(N({},s),{timezone_offset_min:new Date().getTimezoneOffset(),nonce:MX(),voice:(l=s.voice)!=null?l:t,voice_status_request_id:r}),o);return a!=null&&a.chatreq&&ol.startEnforcement(a==null?void 0:a.chatreq),G(N({},a),{voice_status_request_id:r})},[t,e])}function Xft(){const[t,e]=v.useState(!1),n=wg(),s=v.useCallback(async()=>{e(!0);const o=n.getState().dev.room;if(o){const r=o.localParticipant.isMicrophoneEnabled,a=r?"mute":"unmute";Ut.toggleMuteButton.click({toggleTo:a});try{await o.localParticipant.setMicrophoneEnabled(!r),EOe(o,n,"microphone",a==="mute"?"muted":"live")}finally{e(!1)}}},[n]);return{isMuting:t,toggleMute:s}}function emt(t,e){if(t){const{credentials:n,conversationId:s,voiceSessionId:o,voiceMode:r}=t;ul.debug("setting credentials",t),e.setState(a=>{a.conversationId=s,a.credentials=n,a.voiceSessionId=o,a.voiceMode=r});return}ul.debug("clearing credentials"),jOe(e)}function tmt(){const t=wg(),e=dl(o=>o.video),n=v.useCallback(o=>{t.setState(r=>{const a=r.video?"off":"on";Ut.toggleVideoButton.click({eventSource:o,toggleTo:a}),r.video==="stopped"?(r.screenshare==="started"&&(r.screenshare="stopping"),r.video="starting"):r.video="stopping"})},[t]),s=v.useCallback(o=>{t.setState(r=>{r.video=o})},[t]);return{cameraTrackState:e,finalizeCameraState:s,toggleCamera:n}}function nmt(){const t=dl(o=>o.screenshare),e=wg(),n=v.useCallback(o=>{e.setState(r=>{const a=r.screenshare?"off":"on";Ut.toggleScreenShareButton.click({eventSource:o,toggleTo:a}),r.screenshare==="stopped"?(r.video==="started"&&(r.video="stopping"),r.screenshare="starting"):r.screenshare="stopping"})},[e]),s=v.useCallback(o=>{e.setState(r=>{r.screenshare=o})},[e]);return{screenshareTrackState:t,toggleScreenShare:n,finalizeScreenshareState:s}}function jOe(t){t.setState(e=>G(N({},tz),{isVoiceModeActive:e.isVoiceModeActive,hasConnectedOnce:e.hasConnectedOnce}))}function POe(t){const e=t.default_voice_mode,n=t.modes.find(s=>s.mode===e);if(!n)throw new Error("Voice status returned a default_voice_mode that does not exist in the modes array");return n}async function oz(){try{return(await navigator.permissions.query({name:"microphone"})).state}catch(t){return ul.info("Failed to check microphone permission state",t),"unknown"}}const ju=st(void 0),ROe=1e3*60*9,OOe=st([]),LOe=st([]),smt=st(void 0),FI=st([]),jh=st(!1);function DOe(t,e){return t.includes(e)?t:[...t,e]}function BOe(t,e){return t.includes(e)?t.filter(n=>n!==e):t}function T0(...t){ul.debug("[Status Cache]",...t)}function FOe(){const t=mn("2943229081");return{"require-voice-used-recently":t.get("require-voice-used-recently",!1),"voice-used-within-past-days":t.get("voice-used-within-past-days",7),"enable-cache-for-gpts":t.get("enable-cache-for-gpts",!1),"enable-cache-for-new-users":t.get("enable-cache-for-new-users",!1),"new-user-within-past-days":t.get("new-user-within-past-days",7),"voice-status-cache-ttl-ms":t.get("voice-status-cache-ttl-ms",ROe),"enable-cache-if-mic-granted":t.get("enable-cache-if-mic-granted",!1)}}function UOe(t,e){var l;const n=t["enable-cache-for-new-users"],s=t["new-user-within-past-days"];if(!n)return!1;const o=((l=e==null?void 0:e.created)!=null?l:0)*1e3,r=Date.now()-o;return Math.floor(r/(1e3*60*60*24))<s}function HOe(t,e){const n=t["require-voice-used-recently"],s=t["voice-used-within-past-days"],o=s*24*60*60*1e3;if(e&&!n)return T0("User using transceiver and recency not required, prefetch OK"),!0;const r=tt.getItem(Ie.VoiceLastUsed),a=r?new Date(r):null,l=a?a.getTime()>Date.now()-o:!1;return T0("User ".concat(l?"passes":"fails"," recency requirement, prefetch ").concat(l?"OK":"SKIP"),{voiceUsedWithinDays:s,lastUsedVoiceDate:a}),l}const omt=({conversationId:t})=>{var w;const{voiceName:e}=xx(),n=Un(t),s=IOe(),o=v.useRef(!1),r=dl(k=>k.isVoiceModeActive),a=a_(),l=(w=xOe(t))!=null?w:AX,c=ST(),u=v.useMemo(()=>FOe(),[]),d=_n(),f=u["voice-status-cache-ttl-ms"],m=xe("2209667701"),p=mt(),g=Ze(n,k=>!!(k&&k.isLoading===!1))||hi(t),h=v.useMemo(()=>{const k=u["enable-cache-for-gpts"],E=HOe(u,c),T=UOe(u,d),M=!!a,A=[];return A.push(!m&&"gate-disabled"),!E&&!T&&(A.push("not-voice-used-recently"),A.push("fails-new-user-requirement")),A.push(!k&&M&&"is-custom-gpt"),A.push(!p&&"logged-out"),A.filter(I=>typeof I=="string")},[a,c,u,d,m,p]),[_,x]=v.useState([]);v.useEffect(()=>{const k=u["enable-cache-if-mic-granted"];p&&m&&k?oz().then(E=>{x(E==="granted"?T=>DOe(T,"mic-granted"):T=>BOe(T,"mic-granted"))}):x(E=>E.length>0?[]:E)},[u,m,p]);const b=v.useMemo(()=>({conversation_id:n!=null?n:null,requested_voice_mode:"advanced",gizmo_id:a!=null?a:null,voice:e!=null?e:null,requested_default_model:l}),[n,e,a,l]),y=X(()=>jh()),S=v.useRef(void 0),C=v.useRef(void 0);return v.useEffect(()=>{jh.set(!0)},[b]),v.useEffect(()=>{if(!g)return;OOe.set(h),LOe.set(_),T0("Eligibility snapshot",{eligibleReasons:_,ineligibleReasons:h}),h.length>0&&_.length===0&&ju.set(void 0);const k=h.length===0||_.length>0,E=!r&&k&&y,T=o.current;!E||T||(o.current=!0,T0("Prefetching voice status"),s(b,"voice-status-cache").then(M=>{FI.set([]);const{chatreq:A}=M;ju.set(G(N({},M),{proofOfWorkPromise:new Promise((I,j)=>{A?ol.getEnforcementToken(A).then(I).catch(j):I(null)})})),S.current=Date.now(),jh.set(!1),clearTimeout(C.current),C.current=setTimeout(()=>{var j;const I=(j=S.current)!=null?j:0;Date.now()-I>=f&&(ju.set(void 0),jh.set(!0),Ve.addAction("voice-status-cache-stale",{conversationId:b.conversation_id,protocol:Kt(()=>x_()),ttlMs:f}))},f)}).catch(M=>{var A;M.code==="conversation_not_found"?Ve.addAction("voice-status-cache-conversation-not-found",{conversationId:b.conversation_id}):Ut.voiceStatusCache.error(M),FI.set([(A=M.code)!=null?A:"unknown error"]),ju.set(void 0)}).finally(()=>{o.current=!1}))},[s,b,h,_,r,y,f,g]),v.useEffect(()=>()=>{clearTimeout(C.current)},[]),null};function $Oe(){"use forget";return X(GOe)}function GOe(){return ju()}function VOe(){var n,s,o,r,a,l,c,u;const t=$Oe();if(!t)return{video:!1,screenshare:!1,file_uploads:!1,image_uploads:!1};const e=POe(t);return{video:(s=(n=e==null?void 0:e.features)==null?void 0:n.video)!=null?s:!1,screenshare:(r=(o=e==null?void 0:e.features)==null?void 0:o.screen_sharing)!=null?r:!1,file_uploads:(l=(a=e==null?void 0:e.features)==null?void 0:a.file_uploads)!=null?l:!1,image_uploads:(u=(c=e==null?void 0:e.features)==null?void 0:c.image_uploads)!=null?u:!1}}const rmt=()=>{"use forget";const t=D.c(6),e=$c(),n=VOe(),s=xe("4237780970");if(!e){let u;return t[0]===Symbol.for("react.memo_cache_sentinel")?(u={video:"not_applicable",screenshare:"not_applicable",file_uploads:"not_applicable",image_uploads:"not_applicable"},t[0]=u):u=t[0],u}const o=n.video?"allowed":"blocked",r=n.screenshare?"allowed":"blocked",a=n.file_uploads||s?"allowed":"blocked",l=n.image_uploads?"allowed":"blocked";let c;return t[1]!==o||t[2]!==r||t[3]!==a||t[4]!==l?(c={video:o,screenshare:r,file_uploads:a,image_uploads:l},t[1]=o,t[2]=r,t[3]=a,t[4]=l,t[5]=c):c=t[5],c},wT=re(me,"b7a3ee",20,20),rz=re(me,"8ea31d",20,20),zOe=Object.freeze(Object.defineProperty({__proto__:null,default:rz},Symbol.toStringTag,{value:"Module"})),WOe="224248639";function qOe(t=!1){const e=xe(WOe,{disableExposureLog:t});return{persistFilesToLibrary:e,showRecentFilesDropdown:e,doubleWriteFilesToLibrary:!1}}const Tx=Hn(()=>{const t=st(!1),e=st(!1),n=f7(),s=yt(()=>e()&&n.anySheetOpen$()),o=Sa(Ie.ComposerMenuSheetBounced,()=>!1),r=yt(()=>t()||s());return{hasBounced$:o,isSheetVisible$:r,isSheetOpen$:t,keepSheetOpen$:e}}),amt=t=>{"use forget";const e=D.c(24),{onCloseAutoFocus:n,children:s,items:o,fileUploadRateLimited:r}=t,a=X(JC);let l;e[0]===Symbol.for("react.memo_cache_sentinel")?(l=Tx(),e[0]=l):l=e[0];const c=l,{isSheetOpen$:u,keepSheetOpen$:d}=c,f=X(u),m=X(QOe),p=X(JOe),g=(p||m)&&am.getIsInExperiment()==="treatment"?"sheet":"dropdown";let h;e[1]===Symbol.for("react.memo_cache_sentinel")?(h=am.getDetentSize(),e[1]=h):h=e[1];const _=h;let x;e[2]===Symbol.for("react.memo_cache_sentinel")?(x=am.getBackClosesSheet(),e[2]=x):x=e[2];const b=x;let y;e[3]!==g?(y=g==="sheet"&&b?{behavior:"history",sheetName:"composer-plus-menu"}:{},e[3]=g,e[4]=y):y=e[4];const S=y;let C;e[5]===Symbol.for("react.memo_cache_sentinel")?(C=()=>tl(I=>{I!==0&&(c.hasBounced$.set(!0),V.logEventWithStatsig("Composer: Plus Menu Detent Change","chatgpt_web_composer_plus_menu_detent_change",{detent:I}))},1e3),e[5]=C):C=e[5];const[w]=v.useState(C),k=!a;let E;e[6]===Symbol.for("react.memo_cache_sentinel")?(E=_===""?void 0:[_],e[6]=E):E=e[6];let T;e[7]!==r||e[8]!==p||e[9]!==m||e[10]!==g?(T=I=>{const j=g==="sheet";Nr(()=>{const R=!hv||M1();I&&R&&m7().recordModeOpened$(g),c.isSheetOpen$.set(I),j&&I&&d.set(!1)}),I?(Ve.addAction("composer.plus_menu.open",{mode:g,isUsingSheet:j,forcedMode:p!=null?p:"auto",isBottomSheetEligible:m}),qOe(!1),Je("1092897457").get("is_tatertot_enabled",!0),p===void 0&&hv()&&!M1()&&am.getIsInExperimentWithExpsoure(),j&&V.logEventWithStatsig("Composer: Open Plus Menu","chatgpt_web_composer_plus_menu_open",r?{file_upload_disabled_reason:"rate_limit",mode:g}:{mode:g})):!I&&j&&V.logEventWithStatsig("Composer: Close Plus Menu","chatgpt_web_composer_plus_menu_close",{mode:g})},e[7]=r,e[8]=p,e[9]=m,e[10]=g,e[11]=T):T=e[11];let M;e[12]!==o||e[13]!==n?(M=i.jsx(ee.Portal,{children:i.jsx(KOe,{onCloseAutoFocus:n,children:o})}),e[12]=o,e[13]=n,e[14]=M):M=e[14];let A;return e[15]!==s||e[16]!==S||e[17]!==g||e[18]!==w||e[19]!==f||e[20]!==k||e[21]!==T||e[22]!==M?(A=i.jsxs(ee.Root,G(N({mode:g,open:f,store:c},S),{modal:k,detents:E,onActiveDetentChange:w,onOpenChange:T,children:[s,M]})),e[15]=s,e[16]=S,e[17]=g,e[18]=w,e[19]=f,e[20]=k,e[21]=T,e[22]=M,e[23]=A):A=e[23],A},KOe=t=>{"use forget";const e=D.c(15),{onCloseAutoFocus:n,children:s}=t,{fullyExpanded$:o,mode:r}=v.use(NX),a=X(o),{isCombinedList:l,showModelsInPlusMenu:c}=X(XOe);let u;e[0]===Symbol.for("react.memo_cache_sentinel")?(u=Tx(),e[0]=u):u=e[0];const{hasBounced$:d}=u;let f;e[1]===Symbol.for("react.memo_cache_sentinel")?(f=am.getCanBounce(),e[1]=f):f=e[1];const m=f,g=5.8+(xe("3814343233")?1:0)+(c?1.2:0),h=a&&"content-sheet-section:scrollable-content-section";let _;e[2]!==l||e[3]!==r?(_=r!=="sheet"&&mt()&&l&&"max-h-[min(var(--radix-dropdown-menu-content-available-height,50svh),--spacing(1.5)+var(--min-items,6.8)*var(--menu-item-height))]!",e[2]=l,e[3]=r,e[4]=_):_=e[4];let x;e[5]!==h||e[6]!==_?(x=q("content-sheet-section:flex content-sheet-section:flex-col content-sheet-section:gap-3",h,_),e[5]=h,e[6]=_,e[7]=x):x=e[7];let b;e[8]!==g?(b={"--min-items":g},e[8]=g,e[9]=b):b=e[9];const y=b;let S;return e[10]!==s||e[11]!==n||e[12]!==x||e[13]!==y?(S=i.jsx(ee.Content,{showHeader:!0,className:x,style:y,canBounce:m,hasBounced$:d,size:"auto",alignOffset:-7,loop:!0,onCloseAutoFocus:n,children:s}),e[10]=s,e[11]=n,e[12]=x,e[13]=y,e[14]=S):S=e[14],S},imt=t=>{"use forget";const e=D.c(2);let n;return e[0]!==t?(n=i.jsx(ee.BasicTrigger,{asChild:!0,children:i.jsx(YOe,N({},t))}),e[0]=t,e[1]=n):n=e[1],n},YOe=t=>{"use forget";var h;const e=D.c(20);let n,s,o;e[0]!==t?(h=t,{className:n,plusButtonIcon:s}=h,o=De(h,["className","plusButtonIcon"]),e[0]=t,e[1]=n,e[2]=s,e[3]=o):(n=e[1],s=e[2],o=e[3]);const{plusButtonLabel:r}=X(eLe),a=X(tLe),l=te(),c=a&&"composer-btn--desktopSidebar",u=r&&"border-token-border-medium me-1 gap-1.5 border-1 ps-2 pe-3.5";let d;e[4]!==n||e[5]!==c||e[6]!==u?(d=q("composer-btn",n,c,u),e[4]=n,e[5]=c,e[6]=u,e[7]=d):d=e[7];let f;e[8]!==l?(f=l.formatMessage({id:"composer.plusMenu.label",defaultMessage:"Add files and more"}),e[8]=l,e[9]=f):f=e[9];let m;e[10]!==s?(m=s!=null?s:i.jsx(pf,{className:"icon"}),e[10]=s,e[11]=m):m=e[11];let p;e[12]!==r?(p=r&&i.jsx("span",{inert:!0,children:i.jsx(P,{id:"uHQYgJ",defaultMessage:"Add"})}),e[12]=r,e[13]=p):p=e[13];let g;return e[14]!==o||e[15]!==d||e[16]!==f||e[17]!==m||e[18]!==p?(g=i.jsxs("button",G(N({type:"button",className:d,"data-testid":"composer-plus-btn","aria-label":f},o),{id:"composer-plus-btn",children:[m,p]})),e[14]=o,e[15]=d,e[16]=f,e[17]=m,e[18]=p,e[19]=g):g=e[19],g},kT=t=>{"use forget";const e=D.c(10),{layoutMode:n,children:s,menuKey:o,icon:r,label:a}=t;let l;e[0]!==r||e[1]!==a?(l=i.jsx(ee.SubMenuTrigger,{icon:r,label:a}),e[0]=r,e[1]=a,e[2]=l):l=e[2];const c=n==="bottom"?"end":"start";let u;e[3]!==s||e[4]!==c?(u=i.jsx(ee.Portal,{children:i.jsx(ee.SubContent,{align:c,children:s})}),e[3]=s,e[4]=c,e[5]=u):u=e[5];let d;return e[6]!==o||e[7]!==l||e[8]!==u?(d=i.jsxs(ee.Sub,{children:[l,u]},o),e[6]=o,e[7]=l,e[8]=u,e[9]=d):d=e[9],d},lmt=t=>{"use forget";const e=D.c(4),{layoutMode:n,children:s}=t;let o;e[0]===Symbol.for("react.memo_cache_sentinel")?(o=i.jsx(P,{id:"iORE28",defaultMessage:"More"}),e[0]=o):o=e[0];let r;return e[1]!==s||e[2]!==n?(r=i.jsx(kT,{layoutMode:n,menuKey:"more-tools-menu",icon:$s,label:o,children:s}),e[1]=s,e[2]=n,e[3]=r):r=e[3],r},cmt=t=>{"use forget";const e=D.c(4),{layoutMode:n,children:s}=t;let o;e[0]===Symbol.for("react.memo_cache_sentinel")?(o=i.jsx(P,{id:"gVFn9L",defaultMessage:"Tools"}),e[0]=o):o=e[0];let r;return e[1]!==s||e[2]!==n?(r=i.jsx(kT,{layoutMode:n,menuKey:"collapsed-tool-menu",icon:rz,label:o,children:s}),e[1]=s,e[2]=n,e[3]=r):r=e[3],r},umt=t=>{"use forget";const e=D.c(4),{layoutMode:n,children:s}=t;let o;e[0]===Symbol.for("react.memo_cache_sentinel")?(o=i.jsx(P,{id:"YYxk75",defaultMessage:"Bookmarked prompts"}),e[0]=o):o=e[0];let r;return e[1]!==s||e[2]!==n?(r=i.jsx(kT,{layoutMode:n,menuKey:"bookmarked-prompts-menu",icon:ff,label:o,children:s}),e[1]=s,e[2]=n,e[3]=r):r=e[3],r},ZOe=()=>e7e([{key:Ke.PictureV2,label:i.jsx(P,{id:"8CBFak",defaultMessage:"Create image"}),icon:ed(Ke.PictureV2)},{key:Ke.Research,label:i.jsx(P,{id:"EGM5w4",defaultMessage:"Deep research"}),icon:ed(Ke.Research)},{key:Ke.Think,label:i.jsx(P,{id:"V/wEA3",defaultMessage:"Think longer"}),icon:ed(Ke.Think)},{key:"gpt-5",label:"GPT-5",icon:wT},{key:"add-flies",label:i.jsx(P,{id:"dUwCPF",defaultMessage:"Add files"}),icon:eV}]).slice(0,3),dmt=()=>{"use forget";const t=D.c(1);let e;if(t[0]===Symbol.for("react.memo_cache_sentinel")){const n=ZOe(),s=nLe,o=r=>{fn({fallbackScreenHint:"login_or_signup",callback:a=>{jX({location:"Plus Menu ".concat(r),provider:a},s(r))},skipLoginModal:!1})};e=i.jsxs(ee.Group,{children:[i.jsx(ee.Label,{children:i.jsx(P,{id:"2SJWKf",defaultMessage:"Log in to use..."})}),n.map(r=>i.jsx(ee.Item,{label:r.label,icon:r.icon,"data-disabled":!0,onSelect:()=>{o(r.key)},highlightTrailing:i.jsx(IX,{to:"#",onClick:a=>{a.preventDefault(),o(r.key)},children:i.jsx(P,N({},yn.logInButtonText))})},r.key))]}),t[0]=e}else e=t[0];return e};function QOe(){return!M1()&&hv()}function JOe(){return m7().get$()}function XOe(){return Pp()}function eLe(){return Pp()}function tLe(){return ln()}function nLe(t){switch(t.trim().toLowerCase()){case"add_files":return Jt.ACCESS_FLOW_ENTRY_POINT_PLUS_MENU_OPTION_ADD_FILES;case"picture_v2":return Jt.ACCESS_FLOW_ENTRY_POINT_PLUS_MENU_OPTION_PICTURE_V2;case"gpt_5":return Jt.ACCESS_FLOW_ENTRY_POINT_PLUS_MENU_OPTION_GPT_5;case"research":return Jt.ACCESS_FLOW_ENTRY_POINT_PLUS_MENU_OPTION_RESEARCH;case"reason":return Jt.ACCESS_FLOW_ENTRY_POINT_PLUS_MENU_OPTION_REASON;default:return Jt.ACCESS_FLOW_ENTRY_POINT_PLUS_MENU_OPTION}}function fmt(t){"use forget";const e=D.c(29),{uploadType:n,modelSupportedImageMimeTypes:s,gizmo:o,attachmentsProductFeature:r,contextScopes:a,uploadSource:l}=t,c=te(),u=nf(),d=Dt();let f;e[0]!==r||e[1]!==a||e[2]!==u||e[3]!==(o==null?void 0:o.gizmo)||e[4]!==c||e[5]!==s||e[6]!==d||e[7]!==l||e[8]!==n?(f=(w,k)=>{w&&(Array.from(w).forEach(E=>{Sr.uploadFile(u,ti(E),E,n!=null?n:io.Retrieval,s,c,d,N(N({gizmoId:o==null?void 0:o.gizmo.id},a&&a.length>0?{contextScopes:a}:{}),l?{uploadSource:l}:{}),r)}),V.logEventWithStatsig("Upload File",k==="photos"?"chatgpt_web_photos_file_uploaded":"chatgpt_web_camera_file_uploaded",{intent:k,source:n,location:n===io.Retrieval?"retrieval":"context-connector-picker"}))},e[0]=r,e[1]=a,e[2]=u,e[3]=o==null?void 0:o.gizmo,e[4]=c,e[5]=s,e[6]=d,e[7]=l,e[8]=n,e[9]=f):f=e[9];const m=f;let p;e[10]!==n?(p=w=>{V.logEvent("Open File Viewer",{intent:w,source:n}),ft.logEvent("chatgpt_web_".concat(w,"_file_viewer_opened"),null,{location:n===io.Retrieval?"retrieval":"context-connector-picker"})},e[10]=n,e[11]=p):p=e[11];const g=p;let h;e[12]!==g?(h=()=>g("photos"),e[12]=g,e[13]=h):h=e[13];let _;e[14]!==m?(_=w=>{m(w.currentTarget.files,"photos")},e[14]=m,e[15]=_):_=e[15];let x;e[16]!==h||e[17]!==_?(x=i.jsx("input",{className:"sr-only",type:"file",tabIndex:-1,"aria-hidden":!0,id:"upload-photos",onClick:h,onChange:_,accept:"image/*",multiple:!0}),e[16]=h,e[17]=_,e[18]=x):x=e[18];let b;e[19]!==g?(b=()=>g("camera"),e[19]=g,e[20]=b):b=e[20];let y;e[21]!==m?(y=w=>{m(w.currentTarget.files,"camera")},e[21]=m,e[22]=y):y=e[22];let S;e[23]!==b||e[24]!==y?(S=i.jsx("input",{className:"sr-only",type:"file",tabIndex:-1,"aria-hidden":!0,id:"upload-camera",onClick:b,onChange:y,accept:"image/*",capture:"environment",multiple:!0}),e[23]=b,e[24]=y,e[25]=S):S=e[25];let C;return e[26]!==x||e[27]!==S?(C=i.jsxs(i.Fragment,{children:[x,S]}),e[26]=x,e[27]=S,e[28]=C):C=e[28],C}const mmt=t=>{"use forget";const e=D.c(10),{forMobileSheet:n,className:s}=t,o=n?ee.HeaderItemAs:ee.ItemAs;let r;e[0]!==n?(r=u=>{n?Tx().keepSheetOpen$.set(!0):az(u)},e[0]=n,e[1]=r):r=e[1];const a=n?"large":void 0;let l;e[2]!==n?(l=n?i.jsx(P,{id:"wWojoI",defaultMessage:"Camera"}):i.jsx(P,{id:"AjuCMV",defaultMessage:"Take photo"}),e[2]=n,e[3]=l):l=e[3];let c;return e[4]!==o||e[5]!==s||e[6]!==r||e[7]!==a||e[8]!==l?(c=i.jsx(o,{as:"label",htmlFor:"upload-camera",onPointerUp:r,className:s,icon:IV,size:a,label:l}),e[4]=o,e[5]=s,e[6]=r,e[7]=a,e[8]=l,e[9]=c):c=e[9],c},pmt=t=>{"use forget";const e=D.c(10),{forMobileSheet:n}=t,s=n?ee.HeaderItemAs:ee.ItemAs;let o;e[0]!==n?(o=d=>{if(!n){az(d);return}Tx().keepSheetOpen$.set(!0)},e[0]=n,e[1]=o):o=e[1];const r=o,a=n?"large":void 0,l=n?nx:dg;let c;e[2]!==n?(c=n?i.jsx(P,{id:"h453TK",defaultMessage:"Photos"}):i.jsx(P,{id:"kBmJ2X",defaultMessage:"Add photos"}),e[2]=n,e[3]=c):c=e[3];let u;return e[4]!==s||e[5]!==r||e[6]!==a||e[7]!==l||e[8]!==c?(u=i.jsx(s,{as:"label",htmlFor:"upload-photos",onPointerUp:r,size:a,icon:l,label:c}),e[4]=s,e[5]=r,e[6]=a,e[7]=l,e[8]=c,e[9]=u):u=e[9],u};function az(t){t.currentTarget.click()}function gmt(){"use forget";const t=D.c(5),e=te();let n;t[0]!==e?(n=e.formatMessage({id:"ebFfvg",defaultMessage:"Create image"}),t[0]=e,t[1]=n):n=t[1];const s=n,o=sLe;let r;t[2]===Symbol.for("react.memo_cache_sentinel")?(r=i.jsx(nx,{className:"icon"}),t[2]=r):r=t[2];let a;return t[3]!==s?(a=i.jsx(XE,{pressed:!1,disabled:!1,icon:r,label:s,ariaLabel:s,animatedLabel:!0,showLabel:!0,onClick:o,dataTestid:"composer-button-create-image"}),t[3]=s,t[4]=a):a=t[4],a}function sLe(t){t.preventDefault(),t.stopPropagation(),V.logEventWithStatsig("Composer Create Image Button Clicked","composer_create_image_button_clicked"),fn({fallbackScreenHint:"login_or_signup",skipLoginModal:!1,loginModalSubtitleVariant:"create-image"})}function hmt(t){"use forget";const e=D.c(12),{composerController:n,clientThreadId:s}=t,o=te(),r=Is(),a=Jo(),l=r===Ke.Tatertot;let c;e[0]!==o?(c=o.formatMessage({id:"bF9p2/",defaultMessage:"Study"}),e[0]=o,e[1]=c):c=e[1];const u=c;let d;e[2]!==s||e[3]!==n||e[4]!==l||e[5]!==a?(d=g=>{g.stopPropagation(),g.preventDefault(),a(l?null:Ke.Tatertot,{analyticsMetadata:{clientThreadId:s}}),l||So(Vt(n))},e[2]=s,e[3]=n,e[4]=l,e[5]=a,e[6]=d):d=e[6];const f=d;let m;e[7]===Symbol.for("react.memo_cache_sentinel")?(m=i.jsx(EE,{className:"h-[18px] w-[18px]"}),e[7]=m):m=e[7];let p;return e[8]!==f||e[9]!==l||e[10]!==u?(p=i.jsx(XE,{pressed:l,icon:m,label:u,ariaLabel:u,animatedLabel:!0,showLabel:!0,onClick:f,disabled:!1,dataTestid:"composer-button-study"}),e[8]=f,e[9]=l,e[10]=u,e[11]=p):p=e[11],p}const iz=st(!1,{name:"customSourceListEnabled",getServerFallback:()=>!1});function _mt(t){iz.set(t)}const lz=["deep-research","custom-source-list"],xmt="Custom source list";function oLe(t){"use forget";const e=D.c(4);let n;e[0]!==t?(n=t===void 0?{}:t,e[0]=t,e[1]=n):n=e[1];const{enabled:s}=n,o=s===void 0?!1:s;let r;return e[2]!==o?(r={queryKey:lz,queryFn:rLe,staleTime:3e5,enabled:o},e[2]=o,e[3]=r):r=e[3],ut(r)}function rLe(){return ue.safeGet("/custom_source_lists/default")}function ymt(){"use forget";const t=D.c(5),e=Nt();let n;t[0]!==e?(n={mutationFn:aLe,onSuccess:r=>{e.setQueryData(lz,r)}},t[0]=e,t[1]=n):n=t[1];const s=zt(n);let o;return t[2]!==s.isPending||t[3]!==s.mutateAsync?(o={upsertCustomSourceList:s.mutateAsync,isPending:s.isPending},t[2]=s.isPending,t[3]=s.mutateAsync,t[4]=o):o=t[4],o}function aLe(t){return ue.safePut("/custom_source_lists/default",{requestBody:t})}function bmt(t){"use forget";var p,g,h,_;const e=D.c(17),{enabled:n}=t,s=X(iLe),o=n;let r;e[0]!==o?(r={enabled:o},e[0]=o,e[1]=r):r=e[1];const{data:a}=oLe(r);if(!o||!a)return;let l;e[2]!==a.preferred_websites||e[3]!==a.restricted_websites?(l=((g=(p=a.restricted_websites)==null?void 0:p.length)!=null?g:0)>0?a.restricted_websites:(h=a.preferred_websites)!=null?h:[],e[2]=a.preferred_websites,e[3]=a.restricted_websites,e[4]=l):l=e[4];const c=l;let u;e[5]===Symbol.for("react.memo_cache_sentinel")?(u=[],e[5]=u):u=e[5];let d;e[6]!==a.disabled_websites?(d=(_=a.disabled_websites)!=null?_:[],e[6]=a.disabled_websites,e[7]=d):d=e[7];let f;e[8]!==a.display_name||e[9]!==a.is_default||e[10]!==c||e[11]!==d?(f={display_name:a.display_name,restricted_websites:c,preferred_websites:u,disabled_websites:d,is_default:a.is_default},e[8]=a.display_name,e[9]=a.is_default,e[10]=c,e[11]=d,e[12]=f):f=e[12];let m;return e[13]!==a.list_id||e[14]!==s||e[15]!==f?(m={enabled:s,custom_source_list_params:f,list_id:a.list_id},e[13]=a.list_id,e[14]=s,e[15]=f,e[16]=m):m=e[16],m}function iLe(){return iz()}var Ph={},UI;function lLe(){return UI||(UI=1,Ph.__esModule=!0,Ph.default=function(t,e){if(t&&e){var n=Array.isArray(e)?e:e.split(",");if(n.length===0)return!0;var s=t.name||"",o=(t.type||"").toLowerCase(),r=o.replace(/\/.*$/,"");return n.some(function(a){var l=a.trim().toLowerCase();return l.charAt(0)==="."?s.toLowerCase().endsWith(l):l.endsWith("/*")?r===l.replace(/\/.*$/,""):o===l})}return!0}),Ph}var cLe=lLe();const Eb=ps(cLe);function HI(t){return fLe(t)||dLe(t)||uz(t)||uLe()}function uLe(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function dLe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function fLe(t){if(Array.isArray(t))return tC(t)}function $I(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,s)}return n}function GI(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?$I(Object(n),!0).forEach(function(s){cz(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$I(Object(n)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}function cz(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Jm(t,e){return gLe(t)||pLe(t,e)||uz(t,e)||mLe()}function mLe(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function uz(t,e){if(t){if(typeof t=="string")return tC(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return tC(t,e)}}function tC(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,s=new Array(e);n<e;n++)s[n]=t[n];return s}function pLe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var s=[],o=!0,r=!1,a,l;try{for(n=n.call(t);!(o=(a=n.next()).done)&&(s.push(a.value),!(e&&s.length===e));o=!0);}catch(c){r=!0,l=c}finally{try{!o&&n.return!=null&&n.return()}finally{if(r)throw l}}return s}}function gLe(t){if(Array.isArray(t))return t}var hLe=typeof Eb=="function"?Eb:Eb.default,_Le="file-invalid-type",dz="file-too-large",xLe="file-too-small",fz="too-many-files",vmt={FileTooLarge:dz,TooManyFiles:fz},yLe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",n=e.split(","),s=n.length>1?"one of ".concat(n.join(", ")):n[0];return{code:_Le,message:"File type must be ".concat(s)}},VI=function(e){return{code:dz,message:"File is larger than ".concat(e," ").concat(e===1?"byte":"bytes")}},zI=function(e){return{code:xLe,message:"File is smaller than ".concat(e," ").concat(e===1?"byte":"bytes")}},Smt={code:fz,message:"Too many files"};function bLe(t,e){var n=t.type==="application/x-moz-file"||hLe(t,e);return[n,n?null:yLe(e)]}function vLe(t,e,n){if(ql(t.size))if(ql(e)&&ql(n)){if(t.size>n)return[!1,VI(n)];if(t.size<e)return[!1,zI(e)]}else{if(ql(e)&&t.size<e)return[!1,zI(e)];if(ql(n)&&t.size>n)return[!1,VI(n)]}return[!0,null]}function ql(t){return t!=null}function Cmt(t){var e=t.files,n=t.accept,s=t.minSize,o=t.maxSize,r=t.multiple,a=t.maxFiles,l=t.validator;return!r&&e.length>1||r&&a>=1&&e.length>a?!1:e.every(function(c){var u=bLe(c,n),d=Jm(u,1),f=d[0],m=vLe(c,s,o),p=Jm(m,1),g=p[0],h=l?l(c):null;return f&&g&&!h})}function WI(t){return typeof t.isPropagationStopped=="function"?t.isPropagationStopped():typeof t.cancelBubble<"u"?t.cancelBubble:!1}function wmt(t){return t.dataTransfer?Array.prototype.some.call(t.dataTransfer.types,function(e){return e==="Files"||e==="application/x-moz-file"}):!!t.target&&!!t.target.files}function kmt(t){t.preventDefault()}function SLe(t){return t.indexOf("MSIE")!==-1||t.indexOf("Trident/")!==-1}function CLe(t){return t.indexOf("Edge/")!==-1}function Emt(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return SLe(t)||CLe(t)}function Tmt(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(s){for(var o=arguments.length,r=new Array(o>1?o-1:0),a=1;a<o;a++)r[a-1]=arguments[a];return e.some(function(l){return!WI(s)&&l&&l.apply(void 0,[s].concat(r)),WI(s)})}}function Mmt(){return"showOpenFilePicker"in window}function Amt(t){if(ql(t)){var e=Object.entries(t).filter(function(n){var s=Jm(n,2),o=s[0],r=s[1],a=!0;return mz(o)||(console.warn('Skipped "'.concat(o,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),a=!1),(!Array.isArray(r)||!r.every(pz))&&(console.warn('Skipped "'.concat(o,'" because an invalid file extension was provided.')),a=!1),a}).reduce(function(n,s){var o=Jm(s,2),r=o[0],a=o[1];return GI(GI({},n),{},cz({},r,a))},{});return[{description:"Files",accept:e}]}return t}function Nmt(t){if(ql(t))return Object.entries(t).reduce(function(e,n){var s=Jm(n,2),o=s[0],r=s[1];return[].concat(HI(e),[o],HI(r))},[]).filter(function(e){return mz(e)||pz(e)}).join(",")}function Imt(t){return t instanceof DOMException&&(t.name==="AbortError"||t.code===t.ABORT_ERR)}function jmt(t){return t instanceof DOMException&&(t.name==="SecurityError"||t.code===t.SECURITY_ERR)}function mz(t){return t==="audio/*"||t==="video/*"||t==="image/*"||t==="text/*"||t==="application/*"||/\w+\/[-+.\w]+/g.test(t)}function pz(t){return/^.*\.[\w]+$/.test(t)}const Pmt=({className:t})=>i.jsxs(Vs,{width:"132",height:"108",viewBox:"0 0 132 108",fill:"none",className:t,children:[i.jsx("g",{clipPath:"url(#clip0_3605_64419)",children:i.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M25.2025 29.3514C10.778 33.2165 8.51524 37.1357 11.8281 49.4995L13.4846 55.6814C16.7975 68.0453 20.7166 70.308 35.1411 66.443L43.3837 64.2344C57.8082 60.3694 60.0709 56.4502 56.758 44.0864L55.1016 37.9044C51.7887 25.5406 47.8695 23.2778 33.445 27.1428L29.3237 28.2471L25.2025 29.3514ZM18.1944 42.7244C18.8572 41.5764 20.325 41.1831 21.4729 41.8459L27.3517 45.24C28.4996 45.9027 28.8929 47.3706 28.2301 48.5185L24.836 54.3972C24.1733 55.5451 22.7054 55.9384 21.5575 55.2757C20.4096 54.613 20.0163 53.1451 20.6791 51.9972L22.8732 48.1969L19.0729 46.0028C17.925 45.3401 17.5317 43.8723 18.1944 42.7244ZM29.4091 56.3843C29.066 55.104 29.8258 53.7879 31.1062 53.4449L40.3791 50.9602C41.6594 50.6172 42.9754 51.377 43.3184 52.6573C43.6615 53.9376 42.9017 55.2536 41.6214 55.5967L32.3485 58.0813C31.0682 58.4244 29.7522 57.6646 29.4091 56.3843Z",fill:"#AFC1FF"})}),i.jsx("g",{clipPath:"url(#clip1_3605_64419)",children:i.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M86.8124 13.4036C81.0973 11.8722 78.5673 13.2649 77.0144 19.0603L68.7322 49.97C67.1793 55.7656 68.5935 58.2151 74.4696 59.7895L97.4908 65.958C103.367 67.5326 105.816 66.1184 107.406 60.1848L115.393 30.379C115.536 29.8456 115.217 29.2959 114.681 29.16C113.478 28.8544 112.435 28.6195 111.542 28.4183C106.243 27.2253 106.22 27.2201 109.449 20.7159C109.73 20.1507 109.426 19.4638 108.816 19.3004L86.8124 13.4036ZM87.2582 28.4311C86.234 28.1567 85.1812 28.7645 84.9067 29.7888C84.6323 30.813 85.2401 31.8658 86.2644 32.1403L101.101 36.1158C102.125 36.3902 103.178 35.7824 103.453 34.7581C103.727 33.7339 103.119 32.681 102.095 32.4066L87.2582 28.4311ZM82.9189 37.2074C83.1934 36.1831 84.2462 35.5753 85.2704 35.8497L100.107 39.8252C101.131 40.0996 101.739 41.1524 101.465 42.1767C101.19 43.201 100.137 43.8088 99.1132 43.5343L84.2766 39.5589C83.2523 39.2844 82.6445 38.2316 82.9189 37.2074ZM83.2826 43.2683C82.2584 42.9939 81.2056 43.6017 80.9311 44.626C80.6567 45.6502 81.2645 46.703 82.2888 46.9775L89.7071 48.9652C90.7313 49.2396 91.7841 48.6318 92.0586 47.6076C92.333 46.5833 91.7252 45.5305 90.7009 45.256L83.2826 43.2683Z",fill:"#7989FF"})}),i.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M40.4004 71.8426C40.4004 57.2141 44.0575 53.5569 61.1242 53.5569H66.0004H70.8766C87.9432 53.5569 91.6004 57.2141 91.6004 71.8426V79.1569C91.6004 93.7855 87.9432 97.4426 70.8766 97.4426H61.1242C44.0575 97.4426 40.4004 93.7855 40.4004 79.1569V71.8426ZM78.8002 67.4995C78.8002 70.1504 76.6512 72.2995 74.0002 72.2995C71.3492 72.2995 69.2002 70.1504 69.2002 67.4995C69.2002 64.8485 71.3492 62.6995 74.0002 62.6995C76.6512 62.6995 78.8002 64.8485 78.8002 67.4995ZM60.7204 70.8597C60.2672 70.2553 59.5559 69.8997 58.8004 69.8997C58.045 69.8997 57.3337 70.2553 56.8804 70.8597L47.2804 83.6597C46.4851 84.72 46.7 86.2244 47.7604 87.0197C48.8208 87.8149 50.3251 87.6 51.1204 86.5397L58.8004 76.2997L66.4804 86.5397C66.8979 87.0962 67.5363 87.4443 68.2303 87.4936C68.9243 87.5429 69.6055 87.2887 70.0975 86.7967L74.8004 82.0938L79.5034 86.7967C80.4406 87.734 81.9602 87.734 82.8975 86.7967C83.8347 85.8595 83.8347 84.3399 82.8975 83.4026L76.4975 77.0026C75.5602 76.0653 74.0406 76.0653 73.1034 77.0026L68.6601 81.4459L60.7204 70.8597Z",fill:"#3C46FF"}),i.jsxs("defs",{children:[i.jsx("clipPath",{id:"clip0_3605_64419",children:i.jsx("rect",{width:"56",height:"56",fill:"white",transform:"translate(0 26.9939) rotate(-15)"})}),i.jsx("clipPath",{id:"clip1_3605_64419",children:i.jsx("rect",{width:"64",height:"64",fill:"white",transform:"translate(69.5645 0.5) rotate(15)"})})]})]}),Rmt=({className:t})=>i.jsxs(Vs,{width:"36",height:"36",viewBox:"0 0 36 36",fill:"none",className:t,children:[i.jsx("rect",{width:"36",height:"36",rx:"6",fill:"#10A37F"}),i.jsx("path",{d:"M15.5 10.5H12.1667C11.2462 10.5 10.5 11.2462 10.5 12.1667V13.5V18M15.5 10.5H23.8333C24.7538 10.5 25.5 11.2462 25.5 12.1667V13.5V18M15.5 10.5V25.5M15.5 25.5H18H23.8333C24.7538 25.5 25.5 24.7538 25.5 23.8333V18M15.5 25.5H12.1667C11.2462 25.5 10.5 24.7538 10.5 23.8333V18M10.5 18H25.5",stroke:"white",strokeWidth:"1.66667",strokeLinecap:"round",strokeLinejoin:"round"})]}),Omt=({className:t})=>i.jsxs(Vs,{width:"36",height:"36",viewBox:"0 0 36 36",fill:"none",className:t,children:[i.jsx("rect",{width:"36",height:"36",rx:"6",fill:"#FF5588"}),i.jsx("path",{d:"M19.6663 9.66663H12.9997C12.5576 9.66663 12.1337 9.84222 11.8212 10.1548C11.5086 10.4673 11.333 10.8913 11.333 11.3333V24.6666C11.333 25.1087 11.5086 25.5326 11.8212 25.8451C12.1337 26.1577 12.5576 26.3333 12.9997 26.3333H22.9997C23.4417 26.3333 23.8656 26.1577 24.1782 25.8451C24.4907 25.5326 24.6663 25.1087 24.6663 24.6666V14.6666L19.6663 9.66663Z",stroke:"white",strokeWidth:"1.66667",strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M19.667 9.66663V14.6666H24.667",stroke:"white",strokeWidth:"1.66667",strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M21.3337 18.8334H14.667",stroke:"white",strokeWidth:"1.66667",strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M21.3337 22.1666H14.667",stroke:"white",strokeWidth:"1.66667",strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M16.3337 15.5H15.5003H14.667",stroke:"white",strokeWidth:"1.66667",strokeLinecap:"round",strokeLinejoin:"round"})]}),Lmt=({className:t})=>i.jsxs(Vs,{width:"36",height:"36",viewBox:"0 0 36 36",fill:"none",className:t,children:[i.jsx("rect",{width:"36",height:"36",rx:"6",fill:"#0088FF"}),i.jsx("path",{d:"M18.833 9.66663H12.9997C12.5576 9.66663 12.1337 9.84222 11.8212 10.1548C11.5086 10.4673 11.333 10.8913 11.333 11.3333V24.6666C11.333 25.1087 11.5086 25.5326 11.8212 25.8451C12.1337 26.1577 12.5576 26.3333 12.9997 26.3333H22.9997C23.4417 26.3333 23.8656 26.1577 24.1782 25.8451C24.4907 25.5326 24.6663 25.1087 24.6663 24.6666V15.5L18.833 9.66663Z",stroke:"white",strokeWidth:"1.66667",strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M18.833 9.66663V15.5H24.6663",stroke:"white",strokeWidth:"1.66667",strokeLinecap:"round",strokeLinejoin:"round"})]}),Dmt=({className:t})=>i.jsxs(Vs,{width:"36",height:"36",viewBox:"0 0 36 36",fill:"none",className:t,children:[i.jsx("rect",{width:"36",height:"36",rx:"6",fill:"#FF6E3C"}),i.jsx("path",{d:"M21.333 23L26.333 18L21.333 13",stroke:"white",strokeWidth:"1.66667",strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M14.667 13L9.66699 18L14.667 23",stroke:"white",strokeWidth:"1.66667",strokeLinecap:"round",strokeLinejoin:"round"})]});var mP;const Bmt=Tt.button(mP||(mP=_t(["flex items-center justify-center "," rounded-full "," "," "," "," ",""])),({$isSmall:t})=>t?"h-[34px] focus-visible:-outline-offset-1":"h-9",({$hideBorder:t,$visualTreatment:e})=>e!=="composer-btn"&&!t&&"border border-token-border-default",({$visualTreatment:t})=>t!=="composer-btn"&&"text-token-text-secondary",({$showLabel:t,$isSmall:e})=>t?"min-w-8 w-auto p-2 text-[13px] font-semibold radix-state-open:bg-black/10 hover:bg-token-main-surface-secondary":e?"w-7":"w-9",({disabled:t})=>t?"opacity-50":"hover:bg-token-main-surface-secondary",({$open:t})=>t&&"bg-black/10");function Fmt(){const t=te();return i.jsx("span",{className:"ps-1 pe-1 whitespace-nowrap [[data-collapse-labels]_&]:sr-only",children:t.formatMessage({id:"PromptFilePicker.attachFilesLabel",defaultMessage:"Attach"})})}const nC=re(me,"b6a09f",20,20);function Mx({isFirstParty:t,gizmoId:e,src:n,alt:s,className:o,showLoading:r,simple:a}){const l=gl(e),[c,u]=v.useState(!1),[d,f]=v.useState(!0);if(c||!n){const p=t||l;return a?p?i.jsx(nv,{className:o,"aria-label":""}):i.jsx(nC,{className:o,"aria-label":""}):i.jsx("div",{className:o,children:i.jsx("div",{className:"gizmo-shadow-stroke bg-token-main-surface-primary text-token-text-primary relative flex h-full items-center justify-center rounded-full",children:i.jsx(wt.div,{className:"flex h-full w-full items-center justify-center",initial:{opacity:0},animate:{opacity:1,transition:{duration:.1}},children:p?i.jsx(nv,{className:"h-2/3 w-2/3"}):i.jsx(nC,{className:"h-2/3 w-2/3 text-gray-400"})})})})}const m=i.jsx("img",{src:n,className:"bg-token-tertiary h-full w-full",alt:s!=null?s:"GPT Icon",width:80,height:80,onError:()=>u(!0),onLoad:()=>f(!1)});return a?i.jsx("div",{className:q("overflow-hidden rounded-full",r&&d&&"animate-pulse",o),children:m}):i.jsx("div",{className:o,children:i.jsx("div",{className:q("gizmo-shadow-stroke overflow-hidden rounded-full",r&&d&&"animate-pulse"),children:m})})}function wLe({gizmoId:t,className:e}){var s,o;const{data:n}=gi(t);return i.jsx(Mx,{src:n==null?void 0:n.gizmo.display.profile_picture_url,gizmoId:t,isFirstParty:(o=(s=n==null?void 0:n.gizmo.tags)==null?void 0:s.includes(A1.FirstParty))!=null?o:!1,className:e})}const Umt=qe({id:"PromptTextarea.integratedVoiceModeTypePlaceholder",defaultMessage:"Type"}),kLe=qe({id:"SplashScreenV2.integratedVoiceModeHeadline",defaultMessage:"Start talking"}),ELe=qe({id:"SplashScreenV2.integratedVoiceModeHeadline.connecting",defaultMessage:"Connecting to voice"}),TLe=we({newChatPlaceholder:{id:"XyKSr5",defaultMessage:"Ask Health"},potionAgentInternal:{id:"2pQlaA",defaultMessage:"Health"}}),Hmt=we({healthReadyWhenYouAre:{id:"potion.title.greeting.howsYourHealth",defaultMessage:"Hows your health, {name}?"},healthWelcomeBack:{id:"potion.title.greeting.healthFocus",defaultMessage:"Whats your health focus today?"},healthCheckIn:{id:"potion.title.greeting.quickCheckIn",defaultMessage:"Ready for a quick check-in?"},healthSupport:{id:"potion.title.greeting.healthSupport",defaultMessage:"How can I support your health?"},healthSupportByName:{id:"potion.title.greeting.feelingByName",defaultMessage:"How are you feeling today, {name}?"},healthFeelingLately:{id:"potion.title.greeting.feelingLately",defaultMessage:"Howve you been feeling lately?"},healthAnythingOnYourMind:{id:"potion.title.greeting.anythingOnYourMind",defaultMessage:"Anything on your mind?"}}),MLe=["healthWelcomeBack","healthCheckIn","healthSupport","healthFeelingLately","healthAnythingOnYourMind"],ALe=["healthReadyWhenYouAre","healthSupportByName"],$mt=[...MLe,...ALe];function NLe({prompt:t,conversation:e,composerController:n,clientThreadId:s,setActiveSystemHintType:o,referer:r,trackPromptInvocation:a}){var p,g,h,_,x,b,y;const l=Vt(n),c=rk();i7.set(e,!0);const u=(g=(p=t.sources)==null?void 0:p.length)!=null?g:0,d=u>0;V.logEventWithStatsig("chatgpt_web_prompt_used","chatgpt_web_prompt_used",{referer:r,hint:(h=t.system_hint)!=null?h:"none",sources:((_=t.sources)!=null?_:[]).join(","),hasSources:d,sourceCount:u,agentSessionMode:(x=t.agent_session_mode)!=null?x:null});const f=as()?Kt(()=>ot.context$()):void 0,m=(f==null?void 0:f.url)!=null?{url:f.url,title:(b=f.title)!=null?b:""}:void 0;if(a({promptId:String(t.id),currentPage:m}),Bo(l,t.prompt),t.system_hint){if(o(t.system_hint),(y=t.sources)!=null&&y.length){const S=t.sources.map(E=>E.trim()).filter(PX),C=new Set(S.filter(E=>!Ga(E))),w=new Set(S.filter(Ga)),k=t.system_hint;pt(s,E=>{E.selectedSources=new Map([[k,C]]),E.selectedMCPSources=new Map([[k,w]]),E.hasModifiedSources=!0})}as()&&t.agent_session_mode&&t.system_hint===Ke.Agent&&ot.agentSessionMode$.set(t.agent_session_mode)}if(c&&t.skill_ids&&t.skill_ids.length>0){const S=t.skill_ids;pt(s,C=>{var w;C.selectedHazelnuts=Array.from(new Set([...(w=C.selectedHazelnuts)!=null?w:[],...S]))})}So(l)}const ILe=20,ET=({enabled:t=!0,limit:e=ILe})=>jc({queryKey:["prompt-templates",{limit:e}],enabled:t,initialPageParam:void 0,getNextPageParam:n=>{var s;return(s=n.query_continuation)!=null?s:void 0},queryFn:({pageParam:n})=>{const s={limit:e};return n&&(s.query_continuation=n),ue.safeGet("/templated_prompts/",{parameters:{query:s}})}}),jLe=20,PLe=({search:t,enabled:e=!0,limit:n=jLe})=>jc({queryKey:["prompt-templates-search",{limit:n,search:t}],enabled:e&&t.length>0,initialPageParam:void 0,getNextPageParam:s=>{var o;return(o=s.query_continuation)!=null?o:void 0},queryFn:async({pageParam:s})=>{const o={q:t,limit:n};return s&&(o.query_continuation=s),ue.safeGet("/templated_prompts/search",{parameters:{query:o}})}}),Gmt=({currentPage:t,enabled:e})=>{var n,s;return ut({queryKey:["sidechat-prompt-templates",{url:(n=t==null?void 0:t.url)!=null?n:null,title:(s=t==null?void 0:t.title)!=null?s:null}],enabled:e&&!!t,refetchOnWindowFocus:!1,queryFn:()=>{if(!t)throw new Error("Current page is required");return ue.safePost("/aura/prompts/sidechat",{requestBody:{current_page:t}})}})};function Ax(){var r;const t="3058946295",e="2236370269";return((r=xe("46455729"))!=null?r:!1)?!0:(Je(e),Eo(t).get("enabled",!1))}const Vmt=({onError:t,onSuccess:e})=>zt({mutationFn:n=>ue.safePost("/templated_prompts/",{requestBody:n}),onError:t,onSuccess:(n,s,o)=>{var r;(r=Ki())==null||r.triggerProductEvent("templatedPromptUpdated"),e==null||e(n)}}),zmt=({onError:t,onSuccess:e})=>zt({mutationFn:n=>ue.safePost("/templated_prompts/suggest_name",{requestBody:n}),onError:t,onSuccess:e}),Wmt=({onError:t,onSuccess:e})=>zt({mutationFn:({promptId:n,prompt:s})=>ue.safePatch("/templated_prompts/{prompt_id}",{parameters:{path:{prompt_id:n}},requestBody:s}),onError:t,onSuccess:(n,s,o)=>{var r;(r=Ki())==null||r.triggerProductEvent("templatedPromptUpdated"),e==null||e()}}),RLe=({onError:t,onSuccess:e})=>zt({mutationFn:n=>ue.safeDelete("/templated_prompts/{prompt_id}",{parameters:{path:{prompt_id:n}}}),onError:t,onSuccess:(n,s,o)=>{var r;(r=Ki())==null||r.triggerProductEvent("templatedPromptDeleted"),e==null||e()}}),OLe=({onError:t,onSuccess:e})=>zt({mutationFn:({promptId:n,currentPage:s})=>ue.safePost("/templated_prompts/{prompt_id}/increment_invocation",N({parameters:{path:{prompt_id:n}}},s?{requestBody:{current_page:s}}:{})),onError:t,onSuccess:e}),LLe=({onError:t,onSuccess:e}={})=>{const{mutate:n}=OLe({onError:t,onSuccess:e});return v.useCallback(s=>{n(s)},[n])};function qmt(t){"use forget";const e=D.c(5);let n;e[0]===Symbol.for("react.memo_cache_sentinel")?(n=Ws(),e[0]=n):n=e[0];const s=n,{setTargetedContent:o}=vf();let r,a;e[1]!==t||e[2]!==o?(r=()=>Hc(()=>{var u;if(!(s.isFeedbackViewOpen$()||s.selectedTaskReplyId$()!=null))return;const l=s.populatePrompt$();let c;e:switch(l==null?void 0:l.type){case"sugarboneReply":{c=BLe(l.taskId,l.taskName,s.clearPopulatePrompt,l.composerMessage);break e}case"surveyReply":{c=DLe(l.userMessage,l.targetedReply);break e}case"cardReply":{c=FLe(Zn().getQueryData(ts.pulseCard(l.cardId)));break e}default:c={userMessage:null,targetedReply:null}}Bo(Vt(t),(u=c.userMessage)!=null?u:""),setTimeout(()=>{var d;o((d=c.targetedReply)!=null?d:void 0)},0)}),a=[s,t,o],e[1]=t,e[2]=o,e[3]=r,e[4]=a):(r=e[3],a=e[4]),v.useEffect(r,a)}const DLe=(t,e)=>({userMessage:t,targetedReply:e?{type:"text",label:e,isFocusedViewContent:!1,createNewCompletionParams:n=>{var o;if(!e)return n;const s=Sp(e);return G(N({},n),{promptMessage:vi(n.promptMessage,{metadata:{targeted_reply:e}}),appendMessages:[...(o=n.appendMessages)!=null?o:[],s]})}}:null}),BLe=(t,e,n,s)=>({userMessage:s!=null?s:null,targetedReply:{type:"text",label:e,isFocusedViewContent:!1,onCleared:n,onCreateCompletion:n,shouldPersistAcrossMessages:!1,createNewCompletionParams:o=>G(N({},o),{extraStreamParams:G(N({},o.extraStreamParams),{pulseCompletionParams:{task_id:t,type:"feedback-conversation"}}),promptMessage:vi(o.promptMessage,{metadata:{targeted_reply:e}})})}}),FLe=t=>({userMessage:null,targetedReply:t!=null&&t.title?{type:"text",label:t.title,isFocusedViewContent:!1,createNewCompletionParams:e=>t.title?G(N({},e),{extraStreamParams:G(N({},e.extraStreamParams),{pulseCompletionParams:{feedback_card_id:t.id,type:"feedback-conversation"}}),promptMessage:vi(e.promptMessage,{metadata:{targeted_reply:t.title}})}):e}:null});function Kmt(){"use forget";const t=jn();return t.pathname==="/shopping"||t.pathname==="/shopping/preview"}function ULe(t,e,n){return t.get(e,n)}function Pu({globalOverride:t,layer:e,condition:n,paramName:s,defaultValue:o}){const r=v.useRef(n);return bs(()=>{r.current=n},[n]),v.useCallback(a=>!r.current||r.current()?t!==void 0&&!(a!=null&&a.skipOverride)?t:(a!=null&&a.override&&!a.skipOverride&&Ve.addError(new Error("override is not allowed in production")),ULe(e,s,o)):o,[e,s,o,t])}function gz(){const t=!mt(),e=Je("3434623093"),n=t;return{getShowUpsellReason:Pu({layer:e,condition:()=>n,paramName:"with-reason-upsell",defaultValue:!1}),getUpsellLabelType:Pu({layer:e,condition:()=>n,paramName:"labels",defaultValue:void 0}),getShowVoiceUpsell:Pu({layer:e,condition:()=>n,paramName:"with-voice-upsell",defaultValue:!1}),getUpsellShowsAttach:Pu({layer:e,condition:()=>n,paramName:"with-attach-upsell",defaultValue:!1})}}const HLe=(t,e,n=!1)=>t.role===dt.Root?!1:t.role===dt.System||t.role===dt.Developer||e.every(s=>{var o,r;return((o=s.metadata)==null?void 0:o.is_visually_hidden_from_conversation)&&!((r=s.metadata)!=null&&r.targeted_reply_label)})?n:!0,Ymt=(t,e)=>t.length===1&&t[0].author.name==="n7jupd.metadata"&&!e,hz=t=>t.some(e=>{if(!$Le(e))return!1;const n=e.content;return(n.content_type===vt.Text||n.content_type===vt.MultimodalText)&&n.parts.some(s=>typeof s=="string"&&s.length>0)}),$Le=t=>{var e,n;return!((e=t.metadata)!=null&&e.is_visually_hidden_from_conversation&&!((n=t.metadata)!=null&&n.targeted_reply_label)||t.author.role===dt.Tool||t.author.role===dt.System||t.recipient!=="all")};function Zmt(t,e,n){return!(n!=null&&n_(n))&&t.role!==dt.User&&hz(t.messages)&&t.messages.some(o=>{var l,c;const r=!!((c=(l=o.metadata)==null?void 0:l.content_references)!=null&&c.some(u=>u.type==="file"||u.type==="file_navlist")),a=e&&GLe(o);return r||a})}function Qmt(t,e,n){return!(e!=null&&n_(e))&&t.role!==dt.User&&hz(t.messages)&&t.messages.some(o=>{var r,a;return!!((a=(r=o.metadata)==null?void 0:r.content_references)!=null&&a.some(l=>l.type==="file"&&l.medical_file_reference!=null||n&&(l.type==="grouped_webpages"||l.type==="webpage_extended")))})}function GLe(t){return TT(t)&&t.content.result.length>0&&t.content.result.trim()!=="Visible: 0% - 100%"}function TT(t){return t.author.role===dt.Tool&&t.author.name==="file_search"&&t.content.content_type===vt.TetherBrowsingDisplay}function Jmt(t){return t.startsWith("ks--")}const Xmt=/^\[L\d+\] (.+)$/,ept=/"(text|description|content|snippet)":\s*\"(.*)\"/,VLe=tf(()=>{let t=qI;function e(o){t=o}function n(){e(qI)}function s(o){return G(N({},t),{dictationEdited:zLe(t,o)})}return{setData:e,resetData:n,getData:s}}),qI={usedDictation:!1,dictationOriginalText:null,dictationAssetPointer:null,dictationAssetTTL:null,dictationAssetFormat:null};function zLe(t,e){return t.usedDictation&&t.dictationOriginalText!=null&&!e.includes(t.dictationOriginalText)}const _z=tf(()=>{const t=st(!1),e=st(void 0);return{isWhisperActive$:t,waveformData$:e}});function tpt({children:t,className:e,showBackground:n}){return i.jsxs("div",{className:"relative",children:[t,n&&i.jsx(wt.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:260,damping:20},className:q("pointer-events-none absolute inset-0 rounded-full",e)})]})}const xz={"app-details":Qr.CHATGPT_APP_PAGE_NAME_APP_DETAILS,"app-directory":Qr.CHATGPT_APP_PAGE_NAME_APP_DIRECTORY,"app-workspace":Qr.CHATGPT_APP_PAGE_NAME_APP_WORKSPACE,"plus-menu":Qr.CHATGPT_APP_PAGE_NAME_PLUS_MENU,"settings-apps":Qr.CHATGPT_APP_PAGE_NAME_SETTINGS_APPS,"settings-browse-apps":Qr.CHATGPT_APP_PAGE_NAME_SETTINGS_APPS,sidebar:Qr.CHATGPT_APP_PAGE_NAME_SIDEBAR},WLe=t=>!!t&&typeof t=="object"&&"source"in t,yz=t=>{if(!WLe(t))return;const{source:e}=t;return e&&e in xz?e:void 0},bz=t=>({source:t});function vz(){"use forget";const t=jn();let e;e:{const n=yz(t.state);if(!n){e=Qr.CHATGPT_APP_PAGE_NAME_UNSPECIFIED;break e}e=xz[n]}return e}function npt(){"use forget";const t=D.c(6),e=jn();let n;e:{const u=yz(e.state);if(u==="settings-browse-apps"||u==="settings-apps"){n=Qg.CHATGPT_APP_DIRECTORY_ENTRYPOINT_SETTINGS;break e}if(u==="sidebar"){n=Qg.CHATGPT_APP_DIRECTORY_ENTRYPOINT_SIDEBAR;break e}if(u==="plus-menu"){n=Qg.CHATGPT_APP_DIRECTORY_ENTRYPOINT_PLUS_MENU;break e}n=Qg.CHATGPT_APP_DIRECTORY_ENTRYPOINT_UNSPECIFIED}const s=n;let o,r;t[0]!==s?(o=()=>{V.logStructuredEvent(RX,{entrypoint:s})},r=[s],t[0]=s,t[1]=o,t[2]=r):(o=t[1],r=t[2]),v.useEffect(o,r);const a=vz();let l,c;t[3]!==a?(l=()=>{V.logStructuredEvent(p7,{name:Qr.CHATGPT_APP_PAGE_NAME_APP_DIRECTORY,referrer:a})},c=[a],t[3]=a,t[4]=l,t[5]=c):(l=t[4],c=t[5]),v.useEffect(l,c)}function spt(t,e){"use forget";const n=D.c(5),s=vz();let o,r;n[0]!==e||n[1]!==t||n[2]!==s?(o=()=>{t&&e&&V.logStructuredEvent(p7,{name:Qr.CHATGPT_APP_PAGE_NAME_APP_DETAILS,referrer:s,connectorId:e})},r=[t,e,s],n[0]=e,n[1]=t,n[2]=s,n[3]=o,n[4]=r):(o=n[3],r=n[4]),v.useEffect(o,r)}function opt(t){V.logStructuredEvent(Rp,{name:Op.CHATGPT_APP_CLICK_TARGET_CONNECT,connectorId:t})}function rpt(t){V.logStructuredEvent(Rp,{name:Op.CHATGPT_APP_CLICK_TARGET_HEADER,connectorId:t})}function apt(t){V.logStructuredEvent(Rp,{name:Op.CHATGPT_APP_CLICK_TARGET_FILTER_CATEGORY,categoryId:t!=null?t:void 0})}function qLe(){V.logStructuredEvent(Rp,{name:Op.CHATGPT_APP_CLICK_TARGET_SUBMIT_SEARCH})}function ipt(t){V.logStructuredEvent(Rp,{name:Op.CHATGPT_APP_CLICK_TARGET_START_CHAT,connectorId:t})}function lpt(t){"use forget";const e=D.c(5);let n;e[0]!==t?(n=t.trim(),e[0]=t,e[1]=n):n=e[1];const s=n,o=v.useRef(""),r=v.useRef(null);let a,l;e[2]!==s?(a=()=>{if(r.current&&(clearTimeout(r.current),r.current=null),!s){o.current="";return}return r.current=setTimeout(()=>{o.current!==s&&(qLe(),o.current=s),r.current=null},1500),()=>{r.current&&(clearTimeout(r.current),r.current=null)}},l=[s],e[2]=s,e[3]=a,e[4]=l):(a=e[3],l=e[4]),v.useEffect(a,l)}const MT=re(me,"c8839f",20,20);function KLe({shortName:t,includeAction:e,entry:n,onClick:s}){v.useEffect(()=>{if(!open||n.type!==qt.GDRIVE)return;const u=n.access_token;u&&jG(u)},[n]);const o=OX(n.type),r=te(),a=!t&&(n.type===qt.O365_BUSINESS||n.type===qt.O365_PERSONAL)?k1(qt.O365,r,t):k1(n.type,r,t),l=t?void 0:n.type===qt.O365_BUSINESS?r.formatMessage(YI.workSchool):n.type===qt.O365_PERSONAL?r.formatMessage(YI.personal):void 0,c=!t&&n.type===qt.O365_BUSINESS?!0:!!l;return i.jsx(ee.Item,{onClick:s,icon:o,label:e?n.access_token?i.jsx(P,G(N({},KI.uploadFromMessage),{values:{connectorName:a}})):i.jsx(P,G(N({},KI.signinWithMessage),{values:{connectorName:a}})):a,secondary:c?[l,n.type===qt.O365_BUSINESS?r.formatMessage(LX.includesSharePoint):void 0].filter(Boolean).join(" - "):null},n.id)}const KI=we({signinWithMessage:{id:"ContextConnectorPickerDropdownItem.signInWithMessage",defaultMessage:"Connect {connectorName}"},uploadFromMessage:{id:"ContextConnectorPickerDropdownItem.uploadWithMessage",defaultMessage:"Add from {connectorName}"}}),YI=we({personal:{id:"ContextConnectorPickerDropdownItem.o365Personal",defaultMessage:"Personal"},workSchool:{id:"ContextConnectorPickerDropdownItem.o365WorkSchool",defaultMessage:"Work/School"}});function cpt({isLoadingConnectors:t,connectorConfig:e,onConnectorClick:n}){const s=!Gd(),r=v.useMemo(()=>Array.from(e.values()),[e]).filter(l=>l.access_token!=null),a=Dd();return r.length===0&&(!t||a)?null:i.jsxs(ee.Sub,{onOpenChange:l=>{l&&V.logEventWithStatsig("Composer: Open Context Connector Picker","chatgpt_composer_open_context_connector_picker")},children:[i.jsx(ee.SubMenuTrigger,{icon:o8e,children:i.jsx("div",{className:"line-clamp-1 text-ellipsis",children:i.jsx(P,N({},ZLe.addFromApps))})}),i.jsx(ee.Portal,{children:i.jsxs(ee.SubContent,{className:q(s&&"-translate-x-1/2 -translate-y-full"),children:[t&&i.jsxs(i.Fragment,{children:[i.jsx(ee.Shimmer,{}),i.jsx(ee.Shimmer,{}),i.jsx(ee.Shimmer,{})]}),i.jsx(YLe,{includeAction:!1,shortName:!1,connectorConfig:e,onConnectorClick:n})]})})]})}const YLe=({shortName:t,includeAction:e,connectorConfig:n,onConnectorClick:s})=>{const r=v.useMemo(()=>Array.from(n.values()),[n]).filter(a=>a.access_token!=null);return i.jsx(i.Fragment,{children:r.map(a=>i.jsx(KLe,{shortName:t,includeAction:e,entry:a,onClick:()=>s(a)},a.id))})},upt=()=>{"use forget";const t=D.c(2);let e;t[0]===Symbol.for("react.memo_cache_sentinel")?(e=bz("plus-menu"),t[0]=e):e=t[0];let n;return t[1]===Symbol.for("react.memo_cache_sentinel")?(n=i.jsx(ee.LinkItem,{icon:MT,to:"/apps",state:e,target:"_blank",rel:"noreferrer",label:i.jsx(P,{id:"6KwN28",defaultMessage:"Explore apps"})}),t[1]=n):n=t[1],n},ZLe=we({addFromApps:{id:"ContextConnectorPicker.addFromApps",defaultMessage:"Add from apps"}});function dpt(){var u,d;const t=DX(ln),e=g_(),n=X(ot.contextCollection$),s=X(ot.activeTabContextItemIds$),o=X(ot.sidebarUrlTrayOpen$),r=X(ot.context$),a=h_(n,s),l=new Set(a.map(f=>f.id)),c=(f,m)=>{var p,g;if(m){(p=Ki())==null||p.triggerProductEvent("removeTabContext"),g7(f);return}(g=Ki())==null||g.triggerProductEvent("addTabContext"),u7(f)};if(t&&e&&n){if(n.length===1){const f=n[0],m=((u=f.title)==null?void 0:u.trim())||f.url,p=l.has(f.id);return i.jsx(ee.Item,{icon:i.jsx(Qu,{base64:f.base64favicon,title:m,className:"h-4 w-4 rounded-[4px]"}),trailing:p?i.jsx(h1,{className:"icon-sm text-token-text-primary"}):void 0,onClick:()=>c(f.id,p),children:i.jsx(P,{id:"ahzsZx",defaultMessage:"Attach {label}",values:{label:m}})},"tab_context_".concat(f.id))}return i.jsxs(ee.Sub,{children:[i.jsx(ee.SubMenuTrigger,{icon:kk,label:i.jsx(P,{id:"64EqTf",defaultMessage:"Attach tab"})}),i.jsx(ee.Portal,{children:i.jsx(ee.SubContent,{children:n.map(f=>{var g;const m=((g=f.title)==null?void 0:g.trim())||f.url,p=l.has(f.id);return i.jsx(ee.Item,{icon:i.jsx(Qu,{base64:f.base64favicon,title:m,className:"h-4 w-4 rounded-[4px]"}),trailing:p?i.jsx(h1,{className:"icon-sm text-token-text-primary"}):void 0,onClick:()=>c(f.id,p),children:m},"tab_context_".concat(f.id))})})})]},"attach_tab_submenu")}if(t&&r){const f=o&&!!r;return i.jsx(ee.Item,{icon:i.jsx(Qu,{base64:r==null?void 0:r.base64favicon,title:(d=r==null?void 0:r.title)!=null?d:r==null?void 0:r.url,className:"h-4 w-4 rounded-[4px]"}),disabled:f,onClick:()=>{var m;(m=Ki())==null||m.triggerProductEvent("addTabContext"),A3(!0)},children:i.jsx("span",{children:i.jsx(P,{id:"+gYTJ0",defaultMessage:"Attach tab"})})},"tab_context")}return null}const Sz=re(me,"40114f",20,20),QLe={"image/jpeg":".jpg","image/png":".png"};function fpt({entry:t}){return i.jsx(ee.Item,{onClick:t.onClick,icon:t.icon,children:i.jsx(P,N({},t.label))},t.key)}function JLe(t){const e=te(),n=Dt(),s=nf();return v.useCallback(async r=>{const a="".concat(new Date().toISOString().replaceAll(":","-")).concat(QLe[r.mimeType]);Wa.uploadFile(s,new File([h0(r.data)],a,{type:r.mimeType}),t,e,n,void 0,void 0,io.Multimodal)},[s,e,n,t])}function mpt(t){const e=JLe(t),n=XLe(e),s=eDe(e);return{desktopConnectors:v.useMemo(()=>Uo?[n,s].filter(r=>r!==void 0):[],[n,s])}}function XLe(t){return v.useMemo(()=>({key:"takeScreenshot",label:Cz.takeScreenshot,icon:Sz,onClick:async()=>{const e=await BX();e&&(V.logEvent("Sidetron: Screenshot Attached"),await t(e))}}),[t])}function eDe(t){return v.useMemo(()=>({key:"takePhoto",label:Cz.takePhoto,icon:IV,onClick:async()=>{const e=await FX();e&&(V.logEvent("Sidetron: Photo Attached"),await t(e))}}),[t])}const Cz=we({takeScreenshot:{id:"ContextConnectorPickerDropdownItem.takeScreenshotDesktop",defaultMessage:"Take screenshot"},takePhoto:{id:"ContextConnectorPickerDropdownItem.takePhotoDesktop",defaultMessage:"Take photo"}});function ppt({modelSupportedImageMimeTypes:t}){const e=X(ln),n=nf(),s=Dt(),o=te();return e?i.jsx(ee.Item,{icon:Sz,onClick:async()=>{const r=await Me(()=>import("./cea1b4e7-or79j7jqobc1gmj2.js"),__vite__mapDeps([271,2,1,3])).then(a=>a.getTabScreenshot());if(r)try{const a=atob(r.base64image),l=a.length,c=new Uint8Array(l);for(let d=0;d<l;d++)c[d]=a.charCodeAt(d);const u=new File([c],r.filename,{type:r.mimetype});Wa.uploadFile(n,u,t,o,s,void 0,void 0,io.Multimodal)}catch(a){}},children:i.jsx(P,{id:"HiFPUD",defaultMessage:"Attach screenshot"})},"attach_screenshot"):null}const wz=je(()=>Me(()=>import("./ea02080b-jtu2i5m0wcsdp4e6.js"),__vite__mapDeps([272,1,2,3])).then(t=>t.ContextConnectorLibraryFileModal));function gpt(t){"use forget";const e=D.c(7),{onAttachLibraryFile:n,attachedFileIds:s}=t,o=!n;let r;e[0]!==s||e[1]!==n?(r=()=>{n&&rt(wz,{attachedFileIds:s,onClose:tDe,onAttachLibraryFile:n})},e[0]=s,e[1]=n,e[2]=r):r=e[2];const a=r;let l;e[3]===Symbol.for("react.memo_cache_sentinel")?(l=i.jsx("span",{className:"line-clamp-1 text-ellipsis",children:i.jsx(P,N({},nDe.addFromLibrary))}),e[3]=l):l=e[3];let c;return e[4]!==a||e[5]!==o?(c=i.jsx(ee.Item,{icon:vo,onClick:a,disabled:o,children:l}),e[4]=a,e[5]=o,e[6]=c):c=e[6],c}function tDe(){return Yn(wz)}const nDe=we({addFromLibrary:{id:"yaPgEv",defaultMessage:"Recent files"}});function sDe(t,e){var d;const n=X(()=>Ca()),s=Et(),o=X(()=>Fn(Pt(e))),[r,a]=Ze(e,f=>[f==null?void 0:f.mode,f==null?void 0:f.startedWithByoMcp]),l=Hs(),c=X(()=>qd()),u=(d=s==null?void 0:s.isWorkspaceAccount())!=null?d:!1;return v.useMemo(()=>{if(!n)return!0;const f=n.find(m=>m.systemHint===t);return f!=null&&Yw({systemHint:f,modelConfig:o,conversationMode:r,isTemporaryChat:l,isDeveloperMode:c,isWorkspaceTenant:u,startedWithByoMcp:a})},[n,t,o,r,l,c,u,a])}const oDe="https://help.openai.com/en/articles/11752874-chatgpt-agent#h_beedf96566",rDe="composer_system_hint",ja={segment:{shown:"Agent Nux Modal Shown",continueClicked:"Agent Nux Modal Continue Clicked",dismissed:"Agent Nux Modal Dismissed"},statsig:{shown:"chatgpt_agent_nux_modal_shown",continueClicked:"chatgpt_agent_nux_modal_continue_clicked",dismissed:"chatgpt_agent_nux_modal_dismissed"},datadog:{shown:"agent_nux_modal_shown",continueClicked:"agent_nux_modal_continue_clicked",dismissed:"agent_nux_modal_dismissed"}},Cu={title:i.jsx(P,{id:"jFh1/1",defaultMessage:"Welcome to agent mode"}),description:i.jsx(P,{id:"RJdktl",defaultMessage:"Let ChatGPT handle complex tasks from start to finish, from finding the perfect product to creating spreadsheets."}),privacy:i.jsx(P,{id:"AgLzPZ",defaultMessage:"Agent mode uses a remote browser and takes screenshots. You can take control anytime. Agent mode has privacy risks and is important to monitor. <learnMoreLink>Learn more</learnMoreLink>",values:{learnMoreLink:t=>i.jsx("a",{href:oDe,target:"_blank",rel:"noopener noreferrer",className:"cursor-pointer underline",children:t})}}),buttonText:i.jsx(P,{id:"RW8OC0",defaultMessage:"Get started"})},aDe=()=>{"use forget";const{eligible:t,isLoading:e}=Ct(We.hasSeenn7jupdNux),n=hs(),s=xe("3014776572"),o=sDe(fp,UX);return!s||!o||n?"hide":e?"loading":t?"show":"hide"},iDe=t=>{"use forget";const e=D.c(31),{onClose:n,clientThreadId:s,source:o}=t,r=o===void 0?rDe:o;let a,l;if(e[0]===Symbol.for("react.memo_cache_sentinel")){const A=mn("2302071098");a=A.get("videoUrl","https://persistent.oaistatic.com/deep-research/nuxx.070152025.mp4"),l=A.get("posterUrl","https://persistent.oaistatic.com/deep-research/nuxx.070152025.jpg"),e[0]=a,e[1]=l}else a=e[0],l=e[1];const c=l,[u,d]=v.useState(!1);let f;e[2]!==s||e[3]!==r?(f={client_thread_id:s,source:r},e[2]=s,e[3]=r,e[4]=f):f=e[4];const m=f;let p;e[5]!==m?(p=()=>{V.logEventWithStatsig(ja.segment.shown,ja.statsig.shown,m),Ve.addAction(ja.datadog.shown,m)},e[5]=m,e[6]=p):p=e[6];let g;e[7]!==m||e[8]!==s||e[9]!==r?(g=[m,s,r],e[7]=m,e[8]=s,e[9]=r,e[10]=g):g=e[10],v.useEffect(p,g);let h;e[11]!==m||e[12]!==n?(h=()=>{V.logEventWithStatsig(ja.segment.dismissed,ja.statsig.dismissed,m),Ve.addAction(ja.datadog.dismissed,m),kt(We.hasSeenn7jupdNux),n()},e[11]=m,e[12]=n,e[13]=h):h=e[13];const _=h;let x;e[14]!==m||e[15]!==n?(x=()=>{V.logEventWithStatsig(ja.segment.continueClicked,ja.statsig.continueClicked,m),Ve.addAction(ja.datadog.continueClicked,m),kt(We.hasSeenn7jupdNux),n()},e[14]=m,e[15]=n,e[16]=x):x=e[16];const b=x;let y;e[17]!==u?(y=!u&&i.jsx("img",{src:c,alt:"",className:"pointer-events-none absolute inset-0 h-full w-full object-cover object-bottom transition-opacity duration-300"}),e[17]=u,e[18]=y):y=e[18];let S;e[19]===Symbol.for("react.memo_cache_sentinel")?(S=i.jsx("video",{src:a,autoPlay:!0,loop:!0,muted:!0,playsInline:!0,className:"pointer-events-none h-full w-full object-cover object-bottom",onLoadedData:()=>d(!0)}),e[19]=S):S=e[19];let C;e[20]!==y?(C=i.jsxs("div",{className:"relative aspect-16/9 w-full",children:[y,S]}),e[20]=y,e[21]=C):C=e[21];let w,k,E;e[22]===Symbol.for("react.memo_cache_sentinel")?(w=i.jsx("div",{className:"text-xl font-medium",children:Cu.title}),k=i.jsx("div",{className:"text-token-text-secondary",children:Cu.description}),E=i.jsx("div",{className:"text-token-text-secondary text-xs",children:Cu.privacy}),e[22]=w,e[23]=k,e[24]=E):(w=e[22],k=e[23],E=e[24]);let T;e[25]!==b?(T=i.jsxs("div",{className:"flex flex-col gap-4 px-8 pt-6 pb-8 text-center",children:[w,k,E,i.jsx("div",{className:"mt-4 flex w-full justify-center gap-3",children:i.jsx("div",{className:"mx-auto flex w-fit max-w-full min-w-[260px] justify-center gap-3",children:i.jsx(Se,{color:"primary",onClick:b,className:"min-w-0 flex-1",children:Cu.buttonText})})})]}),e[25]=b,e[26]=T):T=e[26];let M;return e[27]!==_||e[28]!==C||e[29]!==T?(M=i.jsxs(en,{testId:"modal-agent-nux",isOpen:!0,noPadding:!0,onClose:_,showCloseButton:!0,size:"custom",type:"success",className:"max-w-md",title:Cu.title,visuallyHiddenHeader:!0,children:[C,T]}),e[27]=_,e[28]=C,e[29]=T,e[30]=M):M=e[30],M},hpt=Object.freeze(Object.defineProperty({__proto__:null,AgentNuxModal:iDe,agentModeWelcomeCopy:Cu,useAgentNuxModalState:aDe},Symbol.toStringTag,{value:"Module"}));function _pt(t){"use forget";const e=D.c(25),{conversation:n,composerController:s,clientThreadId:o,prompts:r}=t,a=te(),l=bt(),c=lDe;let u;e[0]!==l?(u=()=>{var y;if(ln()){const S="".concat(window.location.origin,"/bookmarked-prompts?referer=plus_menu");(y=N1())==null||y.handleLink(S,"_blank")}else l("/bookmarked-prompts?referer=plus_menu")},e[0]=l,e[1]=u):u=e[1];const d=u,f=Jo(),m=LLe();let p;e[2]!==o||e[3]!==s||e[4]!==n||e[5]!==f||e[6]!==m?(p=b=>{NLe({prompt:b,conversation:n,composerController:s,clientThreadId:o,setActiveSystemHintType:f,referer:"plus_menu",trackPromptInvocation:m})},e[2]=o,e[3]=s,e[4]=n,e[5]=f,e[6]=m,e[7]=p):p=e[7];const g=p;let h;e[8]===Symbol.for("react.memo_cache_sentinel")?(h=Ax(),e[8]=h):h=e[8];const _=h;let x;if(e[9]!==a||e[10]!==d||e[11]!==g||e[12]!==r){const b=_?r:[],y=b.slice(0,50);let S;e[14]!==a?(S=a.formatMessage({id:"hIwYjz",defaultMessage:"Create prompt"}),e[14]=a,e[15]=S):S=e[15];let C;e[16]===Symbol.for("react.memo_cache_sentinel")?(C=i.jsx(tr,{className:"icon"}),e[16]=C):C=e[16];let w;e[17]!==S?(w=i.jsx(ee.Item,{label:S,icon:C,onSelect:c}),e[17]=S,e[18]=w):w=e[18];let k;e[19]!==a?(k=a.formatMessage({id:"yl/fPv",defaultMessage:"Manage prompts"}),e[19]=a,e[20]=k):k=e[20];let E;e[21]===Symbol.for("react.memo_cache_sentinel")?(E=i.jsx(f_,{className:"icon"}),e[21]=E):E=e[21];let T;e[22]!==d||e[23]!==k?(T=i.jsx(ee.Item,{label:k,icon:E,onSelect:d}),e[22]=d,e[23]=k,e[24]=T):T=e[24],x=i.jsxs(ee.Group,{children:[w,T,b.length>0&&i.jsxs(i.Fragment,{children:[i.jsx(ee.Separator,{}),y.map((M,A)=>{var I;return i.jsx(ee.Item,{label:M.name,onSelect:()=>{g(M)}},(I=M.id)!=null?I:"prompt-".concat(A))})]})]}),e[9]=a,e[10]=d,e[11]=g,e[12]=r,e[13]=x}else x=e[13];return x}function lDe(){rt(va,{referer:"plus_menu"})}function cDe(){return xe("2688889402")}const xpt=t=>{"use forget";var W,Y,K,Z;const e=D.c(50),{conversation:n,layoutMode:s,selectedModelId:o,onSelectModelId:r}=t;let a;e[0]!==n?(a=()=>Lr(n),e[0]=n,e[1]=a):a=e[1];const l=X(a);let c;e[2]!==n?(c=()=>HX(n),e[2]=n,e[3]=c):c=e[3];const u=X(c);let d;e[4]!==l.categories?(d=(W=l.categories)!=null?W:[],e[4]=l.categories,e[5]=d):d=e[5];const f=d;let m;e[6]!==l.categories||e[7]!==l.models||e[8]!==o?(m=(Z=(Y=l.categories.find(J=>{var Q;return J.defaultModel===o||((Q=J.supportedModels)==null?void 0:Q.includes(o))}))==null?void 0:Y.label)!=null?Z:(K=l.models.get(o))==null?void 0:K.title,e[6]=l.categories,e[7]=l.models,e[8]=o,e[9]=m):m=e[9];const p=m;let g;e[10]!==f?(g=f.filter(uDe),e[10]=f,e[11]=g):g=e[11];const h=g;let _;e[12]!==f?(_=Zd(f.filter(dDe),"subcategory"),e[12]=f,e[13]=_):_=e[13];const x=_;let b;e[14]!==h||e[15]!==x?(b={primaryGroup:h,subGroups:x},e[14]=h,e[15]=x,e[16]=b):b=e[16];const{primaryGroup:y,subGroups:S}=b;if(!n9())return null;let w;e[17]===Symbol.for("react.memo_cache_sentinel")?(w=xe("3315017149"),e[17]=w):w=e[17];const k=w,E=3+(k?9:0)+12*y.length+2+9+3;let T;e[18]===Symbol.for("react.memo_cache_sentinel")?(T=i.jsx(P,{id:"RylQRg",defaultMessage:"Model"}),e[18]=T):T=e[18];let M;e[19]!==p?(M=i.jsx("span",{className:"max-w-40 truncate",children:p}),e[19]=p,e[20]=M):M=e[20];const A=!u;let I;e[21]!==M||e[22]!==A?(I=i.jsx(ee.SubMenuTrigger,{icon:wT,label:T,trailing:M,disabled:A}),e[21]=M,e[22]=A,e[23]=I):I=e[23];const j=s==="center"?"start":"end",R="min(var(--radix-dropdown-menu-content-available-height),calc(var(--spacing)*".concat(E,"))");let O;e[24]!==R?(O={maxHeight:R},e[24]=R,e[25]=O):O=e[25];let L;e[26]!==l.title?(L=k&&i.jsx(ee.Label,{children:l.title}),e[26]=l.title,e[27]=L):L=e[27];let B;if(e[28]!==y||e[29]!==o){let J;e[31]!==o?(J=Q=>i.jsx(ZI,{category:Q,isSelected:o===Q.defaultModel},Q.defaultModel),e[31]=o,e[32]=J):J=e[32],B=y.map(J),e[28]=y,e[29]=o,e[30]=B}else B=e[30];let U;e[33]!==o||e[34]!==S?(U=Object.entries(S).map(J=>{const[Q,ne]=J;return i.jsxs(ee.Group,{children:[i.jsx(ee.Label,{children:Q}),ne.map(ie=>i.jsx(ZI,{category:ie,isSelected:o===ie.defaultModel},ie.defaultModel))]},Q)}),e[33]=o,e[34]=S,e[35]=U):U=e[35];let H;e[36]!==r||e[37]!==o||e[38]!==L||e[39]!==B||e[40]!==U?(H=i.jsxs(ee.RadioGroup,{value:o,onValueChange:r,children:[L,B,U]}),e[36]=r,e[37]=o,e[38]=L,e[39]=B,e[40]=U,e[41]=H):H=e[41];let $;e[42]===Symbol.for("react.memo_cache_sentinel")?($=!1,e[42]=$):$=e[42];let F;e[43]!==j||e[44]!==O||e[45]!==H?(F=i.jsx(ee.Portal,{children:i.jsxs(ee.SubContent,{align:j,style:O,children:[H,$]})}),e[43]=j,e[44]=O,e[45]=H,e[46]=F):F=e[46];let z;return e[47]!==I||e[48]!==F?(z=i.jsxs(ee.Sub,{children:[I,F]},"models-menu"),e[47]=I,e[48]=F,e[49]=z):z=e[49],z},ZI=t=>{"use forget";const e=D.c(12),{category:n,isSelected:s}=t,o=te();let r;e[0]!==n.isAlpha||e[1]!==n.isBeta||e[2]!==n.modelBadge||e[3]!==o?(r=n.isBeta?o.formatMessage({id:"Mu+7v6",defaultMessage:"Beta"}):n.isAlpha?o.formatMessage({id:"chDss2",defaultMessage:"Alpha"}):n.modelBadge,e[0]=n.isAlpha,e[1]=n.isBeta,e[2]=n.modelBadge,e[3]=o,e[4]=r):r=e[4];const a=r,l=s?"selected":"default";let c;e[5]===Symbol.for("react.memo_cache_sentinel")?(c=i.jsx(ee.RadioItemCheck,{}),e[5]=c):c=e[5];let u;return e[6]!==a||e[7]!==n.defaultModel||e[8]!==n.description||e[9]!==n.label||e[10]!==l?(u=i.jsx(ee.RadioItem,{value:n.defaultModel,color:l,trailing:c,label:n.label,secondary:n.description,badge:a,disabled:!1}),e[6]=a,e[7]=n.defaultModel,e[8]=n.description,e[9]=n.label,e[10]=l,e[11]=u):u=e[11],u};function uDe(t){return t.subcategory==null}function dDe(t){return t.subcategory!=null}function sC(t){"use forget";const e=D.c(7),{systemHint:n}=t;let s;e[0]!==n?(s=fDe(n),e[0]=n,e[1]=s):s=e[1];const o=s;if(!o)return null;const r=n.isDangerous&&"text-token-interactive-label-danger-secondary-default border-token-border-status-error";let a;e[2]!==r?(a=q(r),e[2]=r,e[3]=a):a=e[3];let l;return e[4]!==o||e[5]!==a?(l=i.jsx(md,{className:a,children:o}),e[4]=o,e[5]=a,e[6]=l):l=e[6],l}function fDe(t){if(t.badgeText!=null)return t.badgeText;switch(t.badgeType){case FM.DEV:return i.jsx(P,{defaultMessage:"Dev",id:"allConnectors.dev.mcp"});case FM.INTERNAL:return i.jsx(P,{defaultMessage:"Internal",id:"allConnectors.internal.mcp"})}if(t.isDangerous)return i.jsx(P,{id:"w+mmPI",defaultMessage:"DEV"})}const oC="connector_2b0a9009c9c64bf9933a3dae3f2b1254",mDe=3e4,kz="Less than 3 months synced";function pDe(t){return t<2160*60*60?kz:"Past ".concat(3*Math.floor(t/(2160*60*60))," months synced")}const gDe=t=>En({queryKey:["stride-sync-progress"],enabled:t,queryFn:async()=>{const e=await ue.safeGet("/stride/sync_progress",{});return{message:pDe(e.progress_seconds)}},refetchInterval:mDe,refetchOnWindowFocus:!0,retry:!1}),hDe=er((t,e)=>Gs(()=>gDe(e),{skipPrefetchOnMount:!0})),_De=[],xDe=we({connectOnMobileTooltip:{id:"XrV8h1",defaultMessage:"Connect on your iPhone or iPad"}});function ypt(t){"use forget";const e=D.c(48),{composerController:n,activeSystemHintType:s,systemHints:o,clientThreadId:r,disabled:a}=t,l=a===void 0?!1:a,c=Jo(),u=S3();let d;e[0]!==r||e[1]!==c?(d=Y=>{c(Y,{analyticsMetadata:{clientThreadId:r}})},e[0]=r,e[1]=c,e[2]=d):d=e[2];const f=d;let m;e[3]!==r?(m={clientThreadId:r},e[3]=r,e[4]=m):m=e[4];const p=m;let g;e[5]!==p?(g=function(){V.logEventWithStatsig("Composer System Hint Button Hovered","composer_system_hint_button_hovered",p)},e[5]=p,e[6]=g):g=e[6];const h=g;let _;e[7]!==p?(_=function(){Je("1092897457").get("is_tatertot_enabled",!0),V.logEventWithStatsig("Composer System Hint Button Clicked","composer_system_hint_button_clicked",p)},e[7]=p,e[8]=_):_=e[8];const x=_;let b;e[9]!==n?(b=()=>{requestAnimationFrame(()=>{requestAnimationFrame(()=>{So(Vt(n))})})},e[9]=n,e[10]=b):b=e[10];const y=b,S=te(),[C,w]=v.useState(!1),k=s!=null,E=!k,T=v.useRef(!1),M=v.useRef(!1);let A;e[11]!==x||e[12]!==y?(A=Y=>{w(Y),Y?x==null||x():requestAnimationFrame(()=>{requestAnimationFrame(()=>{T.current&&(T.current=!1,y())})})},e[11]=x,e[12]=y,e[13]=A):A=e[13];let I;e[14]!==C?(I=Dm(C),e[14]=C,e[15]=I):I=e[15];let j;e[16]!==S?(j=S.formatMessage({id:"mJYhKI",defaultMessage:"Choose tool"}),e[16]=S,e[17]=j):j=e[17];let R;e[18]===Symbol.for("react.memo_cache_sentinel")?(R=i.jsx(Exe,{"aria-label":"",className:"icon"}),e[18]=R):R=e[18];let O;e[19]!==E?(O=E&&i.jsx("span",{className:"ms-1.5 me-0.5",children:i.jsx(P,{id:"mNL7WC",defaultMessage:"Tools"})}),e[19]=E,e[20]=O):O=e[20];let L;e[21]!==l||e[22]!==h||e[23]!==O||e[24]!==I||e[25]!==j?(L=i.jsxs(ee.BasicTrigger,{className:"composer-btn px-2","data-opened":I,"aria-label":j,id:"system-hint-button",disabled:l,onPointerOver:h,onClick:bDe,onFocusCapture:yDe,children:[R,O]}),e[21]=l,e[22]=h,e[23]=O,e[24]=I,e[25]=j,e[26]=L):L=e[26];let B;e[27]!==l||e[28]!==k||e[29]!==L?(B=i.jsx(CDe,{disabled:l,hintSelected:k,children:L}),e[27]=l,e[28]=k,e[29]=L,e[30]=B):B=e[30];let U,H;e[31]===Symbol.for("react.memo_cache_sentinel")?(U=()=>{M.current=!0},H=Y=>{var K;if(!M.current||T.current){Y.preventDefault();return}(K=document.querySelector("#system-hint-button"))==null||K.focus()},e[31]=U,e[32]=H):(U=e[31],H=e[32]);let $;e[33]!==E?($=!E&&i.jsx(ee.Label,{children:i.jsx(P,{id:"KSn3Jr",defaultMessage:"Tools"})}),e[33]=E,e[34]=$):$=e[34];let F;e[35]!==u||e[36]!==s||e[37]!==f||e[38]!==o?(F=i.jsx(vDe,{systemHints:o,activeConnectorSystemHintTypes:u,selectedHintType:s,onSelectHintType:f,isLoadingConnectorsForSystemHints:!1}),e[35]=u,e[36]=s,e[37]=f,e[38]=o,e[39]=F):F=e[39];let z;e[40]!==$||e[41]!==F?(z=i.jsx(ee.Portal,{children:i.jsxs(ee.Content,{size:"auto",alignOffset:-7,onEscapeKeyDown:U,onCloseAutoFocus:H,children:[$,F]})}),e[40]=$,e[41]=F,e[42]=z):z=e[42];let W;return e[43]!==C||e[44]!==B||e[45]!==z||e[46]!==A?(W=i.jsxs(ee.Root,{open:C,onOpenChange:A,children:[B,z]}),e[43]=C,e[44]=B,e[45]=z,e[46]=A,e[47]=W):W=e[47],W}function yDe(t){t.stopPropagation()}function bDe(t){t.preventDefault()}const vDe=({systemHints:t,activeConnectorSystemHintTypes:e,selectedHintType:n,onSelectHintType:s,isLoadingConnectorsForSystemHints:o,isFirstPartyProject:r=!1,onConnectHint:a})=>{var p,g;const{connectorLinks:l,isLoading:c}=Vo({fetchValidLinksOnly:!0}),u=c||((g=(p=l.get(oC))==null?void 0:p.length)!=null?g:0)>0,d=Oc(),f=h=>d_(h.systemHint)===oC,m=X(()=>hDe(d,r));return i.jsx(ee.RadioGroup,{value:n!=null?n:void 0,onValueChange:h=>{const _=t==null?void 0:t.find(x=>x.systemHint===h);if(_&&!_.isConnected&&_.canConnect&&_.isConnector&&r&&n!==h){a==null||a(_);return}s(h===n?null:h)},children:t?i.jsxs(i.Fragment,{children:[t.map(h=>{var _;return i.jsx(SDe,{hint:h,isSelected:n===h.systemHint||C3(n)&&(e==null?void 0:e.has(h.systemHint)),isFirstPartyProject:r,connectionStatus:f(h)&&u?(_=m.data)==null?void 0:_.message:void 0,isStrideConnected:u},h.systemHint)}),o&&i.jsxs(i.Fragment,{children:[i.jsx(ee.Shimmer,{size:"short"}),i.jsx(ee.Shimmer,{size:"short"})]})]}):i.jsxs(i.Fragment,{children:[i.jsx(ee.Shimmer,{size:"short"}),i.jsx(ee.Shimmer,{size:"short"})]})})},SDe=t=>{"use forget";var M;const e=D.c(32),{hint:n,isSelected:s,isFirstPartyProject:o,isStrideConnected:r,connectionStatus:a}=t,l=te(),c=X7e(n.systemHint);let u;e[0]!==n.systemHint?(u=_De.includes(n.systemHint),e[0]=n.systemHint,e[1]=u):u=e[1];const d=u;let f;e[2]!==n.systemHint?(f=a7(n.systemHint)&&$X(n.systemHint)===oC,e[2]=n.systemHint,e[3]=f):f=e[3];const p=f&&!r,g=o&&n.isConnector&&n.canConnect&&!n.isConnected&&!s&&!p;if(n.hideFromInitialSelection&&!s&&!g&&!p)return null;let h;e[4]!==a||e[5]!==l||e[6]!==p||e[7]!==c.remainingLabel?(h=p?a||l.formatMessage(xDe.connectOnMobileTooltip):c.remainingLabel,e[4]=a,e[5]=l,e[6]=p,e[7]=c.remainingLabel,e[8]=h):h=e[8];const _=h,x=p?void 0:c.remainingLabelSecondary,b=c.isBlocked||p,y=s?"selected":"default";let S;e[9]!==n?(S=i.jsx(Qm,{hint:n,isNextToLabel:!0}),e[9]=n,e[10]=S):S=e[10];let C;e[11]!==a||e[12]!==g?(C=g?i.jsx("span",{className:"text-token-text-tertiary",children:i.jsx(P,{id:"4eq5DT",defaultMessage:"Connect"})}):a===kz?i.jsx("span",{className:"text-token-text-tertiary",children:i.jsx(P,{id:"fY1/Mw",defaultMessage:"Partially synced"})}):a?i.jsx("span",{className:"text-token-text-tertiary",children:i.jsx(P,{id:"mdZ/fK",defaultMessage:"Synced"})}):i.jsx(ee.RadioItemCheck,{}),e[11]=a,e[12]=g,e[13]=C):C=e[13];const w=(M=n.actionLabel)!=null?M:n.name;let k;e[14]!==n||e[15]!==d?(k=d?i.jsx(md,{children:i.jsx(P,{id:"composer.skills.new",defaultMessage:"New"})}):i.jsx(sC,{systemHint:n}),e[14]=n,e[15]=d,e[16]=k):k=e[16];let E;e[17]!==n.systemHint||e[18]!==c.blockedLabel||e[19]!==b||e[20]!==y||e[21]!==S||e[22]!==C||e[23]!==w||e[24]!==k?(E=i.jsx(ee.RadioItem,{value:n.systemHint,disabled:b,color:y,icon:S,trailing:C,label:w,secondary:c.blockedLabel,children:k}),e[17]=n.systemHint,e[18]=c.blockedLabel,e[19]=b,e[20]=y,e[21]=S,e[22]=C,e[23]=w,e[24]=k,e[25]=E):E=e[25];const T=E;if(_||x){const A=c.isBlocked?"left":"center",I=_||x,j=_?x:void 0,R=c.isBlocked?void 0:null;let O;return e[26]!==T||e[27]!==A||e[28]!==I||e[29]!==j||e[30]!==R?(O=i.jsx(St,{side:"right",labelTextAlign:A,label:I,secondaryLabel:j,contentClassName:"cant-hover:hidden",triggerAs:R,children:T}),e[26]=T,e[27]=A,e[28]=I,e[29]=j,e[30]=R,e[31]=O):O=e[31],O}return T},CDe=({disabled:t,children:e,hintSelected:n})=>{const s=Ct(We.hasSeenComposerSystemHintButtonTooltip),o=wDe(),r=!t&&!o.isLoading&&o.eligible,a=!t&&!s.isLoading&&s.eligible,l=v.useMemo(()=>{if(r)return{announcementKey:We.hasSeenConnectorsSourcesPillTooltip,title:i.jsx(P,{id:"qgvuHg",defaultMessage:"Search connected apps"}),onDismiss:()=>kt(We.hasSeenConnectorsSourcesPillTooltip),description:i.jsx(P,{id:"bJE6uS",defaultMessage:"Get insights across Google Drive, SharePoint, Dropbox, and more."})};if(a)return{announcementKey:We.hasSeenComposerSystemHintButtonTooltip,title:i.jsx(P,{id:"tTydhk",defaultMessage:"All your tools, in one handy place"}),onDismiss:()=>kt(We.hasSeenComposerSystemHintButtonTooltip),description:i.jsx(P,{id:"Kgb5fv",defaultMessage:"Create an image, research report, and more."})}},[a,r]);if(v.useEffect(()=>{l&&(l.announcementKey===We.hasSeenComposerSystemHintButtonTooltip?V.logUpsellOrModalEvent(qn,{eventId:"composer_system_hint_button_tooltip_shown",type:Kn.UPSELL_OR_MODAL_TYPE_NUX_TOOLTIP}):l.announcementKey===We.hasSeenConnectorsSourcesPillTooltip&&V.logUpsellOrModalEvent(qn,{eventId:"connectors_sources_pill_tooltip_shown",type:Kn.UPSELL_OR_MODAL_TYPE_NUX_TOOLTIP}))},[l]),!n&&!r)return e;if(l)return i.jsx(hf,G(N({show:!0,side:"bottom",theme:"bright",dismissOnOutsideClick:!0,badge:"new",sideOffset:0,className:"xs:max-w-sm! max-w-2xs!"},l),{children:e}));let c;return t?c=i.jsx(P,{id:"uw9x80",defaultMessage:"Tools unavailable"}):c=i.jsx(P,{id:"Yr1zf1",defaultMessage:"Choose tool"}),i.jsx(St,{side:"bottom",label:c,children:e})},wDe=()=>{var u;const t=X(()=>Ca()),{data:e,isLoading:n}=Ld(),{eligible:s,markAsViewedDontInvalidateCache:o,isLoading:r}=Ct(We.hasSeenConnectorsSourcesPillTooltip),a=(u=e==null?void 0:e.announcements)==null?void 0:u[We.hasSeenConnectorsNuxModal],l=!!(a&&HR(new Date,new Date(a))>=1);return{eligible:s&&l&&t!=null&&t.some(d=>d.systemHint===Ke.Slurm),isLoading:n||r,markAsViewedDontInvalidateCache:o}},kDe=new Map([[za.clickup_sync_connector,ud[Te.CLICKUP_CONNECTOR].access],[za.asana_sync_connector,ud[Te.ASANA_CONNECTOR].access]]),QI=t=>{var n;const e=d_(t.systemHint);return(n=e==null?void 0:e.endsWith("_sync_connector"))!=null?n:!1},EDe=t=>{var n;const e=d_(t.systemHint);return e?(n=kDe.get(e))!=null?n:e:t.systemHint},bpt=t=>r3([...t].sort((e,n)=>{const s=QI(e),o=QI(n);return s===o?0:s?1:-1}),EDe),TDe=350,MDe=150;function AT(t){"use forget";const e=D.c(36),{favicon:n,heading:s,title:o,quoteHeading:r,quoteText:a,snippet:l,isContentBlocked:c,contentContainerClassName:u,theme:d,disabled:f,children:m}=t,[p,g]=v.useState(!1),h=v.useRef(null),_=v.useRef(null),x=v.useRef(!1),b=r!=null||a!=null;let y;e[0]===Symbol.for("react.memo_cache_sentinel")?(y=()=>{h.current&&clearTimeout(h.current)},e[0]=y):y=e[0];const S=y;let C;e[1]===Symbol.for("react.memo_cache_sentinel")?(C=()=>{_.current&&clearTimeout(_.current)},e[1]=C):C=e[1];const w=C;let k;e[2]===Symbol.for("react.memo_cache_sentinel")?(k=()=>{g(!1)},e[2]=k):k=e[2];const E=k;let T;e[3]===Symbol.for("react.memo_cache_sentinel")?(T=Z=>{Z.stopPropagation(),x.current=!0,w(),h.current=setTimeout(()=>{x.current&&g(!0)},TDe)},e[3]=T):T=e[3];const M=T;let A;e[4]===Symbol.for("react.memo_cache_sentinel")?(A=Z=>{Z.stopPropagation(),x.current=!1,S(),_.current=setTimeout(()=>{E()},MDe)},e[4]=A):A=e[4];const I=A;let j,R;e[5]!==p?(j=()=>{p&&w()},R=[p,w],e[5]=p,e[6]=j,e[7]=R):(j=e[6],R=e[7]),v.useEffect(j,R);let O;e[8]===Symbol.for("react.memo_cache_sentinel")?(O={onBlur:I,onMouseLeave:I,onMouseEnter:M,onFocus:M},e[8]=O):O=e[8];const L=O;if(f)return m;let B;e[9]!==m?(B=i.jsx(ba,G(N({asChild:!0},L),{children:m})),e[9]=m,e[10]=B):B=e[10];const U=d==="grey"&&"bg-token-bg-primary!";let H;e[11]!==u||e[12]!==U?(H=q(GX,U,"relative w-64 text-sm focus:outline-none",u),e[11]=u,e[12]=U,e[13]=H):H=e[13];let $;e[14]!==s?($=i.jsx("span",{className:"text-token-text-secondary truncate text-xs",children:s}),e[14]=s,e[15]=$):$=e[15];let F;e[16]!==n||e[17]!==$?(F=i.jsxs("div",{className:"flex items-center gap-2",children:[n,$]}),e[16]=n,e[17]=$,e[18]=F):F=e[18];let z;e[19]!==b||e[20]!==c||e[21]!==r||e[22]!==a||e[23]!==l||e[24]!==o?(z=c?i.jsx("div",{className:"mt-2",children:i.jsx(P,{id:"iGylAw",defaultMessage:"ChatGPT is unable to access the contents of this website."})}):i.jsxs(i.Fragment,{children:[o&&i.jsx("div",{className:"mt-2 line-clamp-2 leading-snug font-semibold text-ellipsis",children:o}),b&&i.jsxs("div",{className:"border-token-border-default mt-2 flex flex-col gap-1 border-s-2 ps-2 text-xs",children:[r&&i.jsx("div",{className:"text-token-link text-xs font-semibold",children:r}),a&&i.jsx("div",{className:"text-token-text-secondary line-clamp-2 overflow-hidden text-xs leading-snug text-ellipsis",children:a})]}),l&&i.jsx("div",{className:"mt-2 line-clamp-4 text-sm select-text",children:l})]}),e[19]=b,e[20]=c,e[21]=r,e[22]=a,e[23]=l,e[24]=o,e[25]=z):z=e[25];let W;e[26]!==F||e[27]!==z?(W=i.jsxs("div",{className:"rounded-xl px-3 py-1.5 text-sm",children:[F,z]}),e[26]=F,e[27]=z,e[28]=W):W=e[28];let Y;e[29]!==H||e[30]!==W?(Y=i.jsx(Ml,{children:i.jsx(Al,G(N({side:"top",align:"start",sideOffset:4},L),{onOpenAutoFocus:IDe,onCloseAutoFocus:NDe,className:H,collisionPadding:8,onPointerDown:ADe,children:W}))}),e[29]=H,e[30]=W,e[31]=Y):Y=e[31];let K;return e[32]!==p||e[33]!==Y||e[34]!==B?(K=i.jsxs(Tl,{open:p,children:[B,Y]}),e[32]=p,e[33]=Y,e[34]=B,e[35]=K):K=e[35],K}function ADe(t){return t.stopPropagation()}function NDe(t){return t.preventDefault()}function IDe(t){return t.preventDefault()}const JI=150;function vpt(){"use forget";const t=D.c(14),e=g_(),n=X(ot.contextCollection$),s=X(ot.activeTabContextItemIds$),o=X(ot.context$);if(!X(ot.sidebarUrlTrayOpen$))return null;if(e&&n){let l,c,u,d;if(t[0]!==s||t[1]!==n){d=Symbol.for("react.early_return_sentinel");e:{const p=h_(n,s);if(p.length===0){d=null;break e}u="relative px-3 pt-3",l="flex w-full gap-2 overflow-x-auto py-0.5",c=p.map(PDe)}t[0]=s,t[1]=n,t[2]=l,t[3]=c,t[4]=u,t[5]=d}else l=t[2],c=t[3],u=t[4],d=t[5];if(d!==Symbol.for("react.early_return_sentinel"))return d;let f;t[6]!==l||t[7]!==c?(f=i.jsx("div",{className:l,children:c}),t[6]=l,t[7]=c,t[8]=f):f=t[8];let m;return t[9]!==u||t[10]!==f?(m=i.jsx("div",{className:u,children:f}),t[9]=u,t[10]=f,t[11]=m):m=t[11],m}if(!o)return null;let a;return t[12]!==o?(a=i.jsx("div",{className:"relative px-3 pt-3",children:i.jsx("div",{className:"flex w-full gap-2 overflow-x-auto py-0.5",children:i.jsx(Ez,{item:o,onClose:jDe})})}),t[12]=o,t[13]=a):a=t[13],a}function jDe(){var t;(t=Ki())==null||t.triggerProductEvent("removeTabContext"),A3(!1)}function PDe(t){return i.jsx(Ez,{item:t,onClose:()=>{var e;(e=Ki())==null||e.triggerProductEvent("removeTabContext"),g7(t.id)}},t.id)}function Ez(t){"use forget";var ie,fe,ae;const e=D.c(59),{item:n,onClose:s}=t,o=te(),l=Is()===Ke.Agent?void 0:n.selection,c=RDe(l),u=c>0;let d,f;if(n.url){let le;if(e[0]!==n.url){let pe;e[2]===Symbol.for("react.memo_cache_sentinel")?(pe=/^[a-zA-Z][a-zA-Z\d+\-.]*:\/\//,e[2]=pe):pe=e[2],le=n.url.replace(pe,""),e[0]=n.url,e[1]=le}else le=e[1];f=le;try{let pe;e[3]!==n.url?(pe=new URL(n.url),e[3]=n.url,e[4]=pe):pe=e[4],d=pe.host}catch(pe){}}let m;e[5]!==n.title?(m=(ie=n.title)==null?void 0:ie.trim(),e[5]=n.title,e[6]=m):m=e[6];const p=m,g=(fe=f&&f.length>0?f:n.url)!=null?fe:void 0,h=p&&p.length>0?p:g,_=!!(n!=null&&n.blocked),x=v.useRef(null),b=v.useRef(null),[y,S]=v.useState(!1),[C,w]=v.useState(!1);let k;e[7]===Symbol.for("react.memo_cache_sentinel")?(k=()=>{const le=x.current;le&&S(le.scrollWidth>le.clientWidth)},e[7]=k):k=e[7];let E;e[8]!==n.title||e[9]!==n.url||e[10]!==l?(E=[n.title,n.url,l,x],e[8]=n.title,e[9]=n.url,e[10]=l,e[11]=E):E=e[11],v.useEffect(k,E);let T;e[12]===Symbol.for("react.memo_cache_sentinel")?(T=()=>{const le=b.current;if(!le){w(!1);return}if(typeof ResizeObserver>"u"){w(le.offsetWidth>=JI-.5);return}const pe=new ResizeObserver(_e=>{var ge,Re;const Ce=(Re=(ge=_e[0])==null?void 0:ge.contentRect.width)!=null?Re:le.offsetWidth;w(Ce>=JI-.5)});return pe.observe(le),()=>pe.disconnect()},e[12]=T):T=e[12];let M;e[13]!==n.id?(M=[n.id],e[13]=n.id,e[14]=M):M=e[14],v.useEffect(T,M);const A=h!=null?h:n.url;let I;e[15]!==n.base64favicon||e[16]!==A?(I=i.jsx(Qu,{base64:n.base64favicon,title:A,className:"h-4 w-4 flex-shrink-0 rounded-[4px]"}),e[15]=n.base64favicon,e[16]=A,e[17]=I):I=e[17];const j=(ae=d!=null?d:g)!=null?ae:n.url,R=h!=null?h:n.url;let O;e[18]!==u||e[19]!==c?(O=u?i.jsx(P,{id:"EwD8lK",defaultMessage:"Selected text ({count} words)",values:{count:c}}):null,e[18]=u,e[19]=c,e[20]=O):O=e[20];const L=u&&l!=null?l:null,B=_?"bg-[rgba(255,214,10,0.1)]":u?"bg-token-interactive-bg-accent-default":"bg-[rgba(0,0,0,0.03)] hover:bg-[rgba(0,0,0,0.08)] dark:bg-[rgba(255,255,255,0.05)] dark:hover:bg-[rgba(255,255,255,0.1)]";let U;e[21]!==B?(U=q("group flex h-[36px] w-fit max-w-[150px] flex-shrink-0 cursor-default items-center gap-[6px] rounded-xl px-2 pe-3 transition-all",B),e[21]=B,e[22]=U):U=e[22];let H;e[23]!==h||e[24]!==_||e[25]!==n.base64favicon||e[26]!==n.url?(H=_?i.jsx(h7,{className:"text-token-icon-status-warning block h-4 w-4 group-hover:hidden"}):i.jsx(Qu,{base64:n.base64favicon,title:h!=null?h:n.url,className:"block h-4 w-4 rounded-[4px] group-hover:hidden"}),e[23]=h,e[24]=_,e[25]=n.base64favicon,e[26]=n.url,e[27]=H):H=e[27];let $;e[28]!==o?($=o.formatMessage({id:"Px7S/2",defaultMessage:"Close"}),e[28]=o,e[29]=$):$=e[29];let F;e[30]===Symbol.for("react.memo_cache_sentinel")?(F=i.jsx(ms,{className:"h-4 w-4 text-[rgba(0,0,0,0.6)] dark:text-[rgba(255,255,255,0.7)]"}),e[30]=F):F=e[30];let z;e[31]!==s||e[32]!==$?(z=i.jsx("button",{onClick:s,className:"absolute start-0 top-0 hidden group-hover:block","aria-label":$,children:F}),e[31]=s,e[32]=$,e[33]=z):z=e[33];let W;e[34]!==H||e[35]!==z?(W=i.jsxs("div",{className:"relative h-4 w-4 flex-shrink-0",children:[H,z]}),e[34]=H,e[35]=z,e[36]=W):W=e[36];const Y=y&&!u&&C&&"[mask-image:linear-gradient(to_right,black_85%,transparent_100%)] [-webkit-mask-image:linear-gradient(to_right,black_85%,transparent_100%)]";let K;e[37]!==Y?(K=q("overflow-hidden text-xs whitespace-nowrap select-none",Y),e[37]=Y,e[38]=K):K=e[38];let Z;e[39]!==h||e[40]!==u||e[41]!==_||e[42]!==n.url?(Z=u&&!_?i.jsx(P,{id:"DaC6ra",defaultMessage:"Selected text"}):h?i.jsx("span",{className:"text-[rgba(0,0,0,0.6)] dark:text-[rgba(255,255,255,0.7)]",children:h}):i.jsx("span",{className:"text-[rgba(0,0,0,0.6)] dark:text-[rgba(255,255,255,0.7)]",children:n.url}),e[39]=h,e[40]=u,e[41]=_,e[42]=n.url,e[43]=Z):Z=e[43];let J;e[44]!==K||e[45]!==Z?(J=i.jsx("span",{ref:x,className:K,children:Z}),e[44]=K,e[45]=Z,e[46]=J):J=e[46];let Q;e[47]!==U||e[48]!==W||e[49]!==J?(Q=i.jsxs("div",{ref:b,className:U,children:[W,J]}),e[47]=U,e[48]=W,e[49]=J,e[50]=Q):Q=e[50];let ne;return e[51]!==_||e[52]!==L||e[53]!==Q||e[54]!==I||e[55]!==j||e[56]!==R||e[57]!==O?(ne=i.jsx(AT,{favicon:I,heading:j,title:R,quoteHeading:O,quoteText:L,snippet:null,isContentBlocked:_,theme:"grey",children:Q}),e[51]=_,e[52]=L,e[53]=Q,e[54]=I,e[55]=j,e[56]=R,e[57]=O,e[58]=ne):ne=e[58],ne}function RDe(t){if(!t)return 0;const e=t.trim();if(!e)return 0;if(typeof Intl.Segmenter=="function")try{const n=new Intl.Segmenter(void 0,{granularity:"word"}).segment(e);return Array.from(n).reduce((s,o)=>s+(o.isWordLike?1:0),0)}catch(n){}return e.split(/\s+/).filter(Boolean).length}const Spt=(t,e)=>{var o;const n=(o=N3(t))==null?void 0:o.tree;if(!n)return null;const s=n.getNodeIfExists(e);return s==null?void 0:s.message},Tz=(t,e)=>Ya(t).at(e),ODe=[],Mz=(t,e)=>{var s;const n=Tz(t,e);return(s=n==null?void 0:n.messages)!=null?s:ODe},LDe=t=>{const e=N3(t);if(e)return ve.getLastAssistantMessage(e)},DDe=(t,e)=>Mz(t,e).flatMap(Tp).filter(bp),BDe=(t,e)=>{const n=Tz(t,e),s=n==null?void 0:n.messages.at(-1);return!(s!=null&&!_7(s.id)&&s.end_turn)&&!VX(t)};function Cpt(t){"use forget";const e=D.c(3),n=Is();let s;return e[0]!==t||e[1]!==n?(s=()=>{const o=t!=null?t:n;return ln()&&o===Ke.Agent&&xe("1315820596")},e[0]=t,e[1]=n,e[2]=s):s=e[2],X(s)}function wpt({clientThreadId:t,isStreaming:e}){const n=t?Pt(t):null;if(!n)return{shouldShowResumeOneClick:!1};const s=LDe(n);return{shouldShowResumeOneClick:!e&&s!=null&&s.end_turn!==!0}}function kpt({clientThreadId:t,disableMotion:e=!1,activeSystemHintType:n,isNewConversation:s}){const o=X(ln),r=Is(),a=Z4e(t),l=cEe(t),c=r===Ke.Agent||n===Ke.Agent,u=xe("1315820596"),d=o&&c&&u,f=d?s?"agent":a!=null?"watch":l?"incognito":"loggedIn":null,[m,p]=v.useState(f),[g,h]=v.useState(e?!!f:!1),[_,x]=v.useState(null),[b,y]=v.useState(f==null);v.useEffect(()=>{if(e){v.startTransition(()=>{p(f),h(!!f),x(null),y(f==null)});return}if(f===m){if(x(null),f&&!g){const C=requestAnimationFrame(()=>{v.startTransition(()=>{h(!0)})});return()=>cancelAnimationFrame(C)}!f&&g&&v.startTransition(()=>{h(!1)}),y(f==null);return}if(!f){x(null),v.startTransition(()=>{h(!1)}),y(!0);return}if(!m){v.startTransition(()=>{p(f),h(!1),x(null),y(!1)});const C=requestAnimationFrame(()=>{v.startTransition(()=>{h(!0)})});return()=>cancelAnimationFrame(C)}x(f),y(!1),v.startTransition(()=>{h(!1)})},[f,m,e,g]);const S=v.useCallback(()=>{if(_){v.startTransition(()=>{p(_),x(null),h(!0)});return}b&&v.startTransition(()=>{p(null),y(!1)})},[_,b]);return{displayedVariant:m,isVisible:g,onTransitionEnd:S}}const Nx=t=>{"use forget";const e=D.c(41),{icon:n,removable:s,label:o,content:r,dropdownContent:a,onRemove:l,onOpenChange:c,onCloseAutoFocus:u}=t,d=te();let f;e[0]!==d||e[1]!==o?(f=d.formatMessage({id:"giCR14",defaultMessage:"{selectedMode}, click to remove"},{selectedMode:o}),e[0]=d,e[1]=o,e[2]=f):f=e[2];const m=f,p=FDe;let g;e[3]!==l?(g=E=>{const T=E.changedTouches[0];E.target===E.currentTarget&&E.currentTarget.contains(document.elementFromPoint(T.clientX,T.clientY))&&(E.preventDefault(),l==null||l(E))},e[3]=l,e[4]=g):g=e[4];let h;e[5]!==l||e[6]!==g?(h={onClick:l,onTouchStart:UDe,onTouchEnd:g},e[5]=l,e[6]=g,e[7]=h):h=e[7];const _=h;let x;e[8]!==n?(x=typeof n=="function"?i.jsx(n,{}):n,e[8]=n,e[9]=x):x=e[9];let b;e[10]!==x?(b=i.jsx("div",{className:"__composer-pill-icon",inert:!0,children:x}),e[10]=x,e[11]=b):b=e[11];const y=b,S=r!=null?r:o;let C;e[12]!==S?(C=i.jsx("span",{className:"max-w-40 truncate [[data-collapse-labels]_&]:sr-only",ref:p,children:S}),e[12]=S,e[13]=C):C=e[13];const w=C;if(a){let E;e[14]===Symbol.for("react.memo_cache_sentinel")?(E=i.jsx($o,{className:"icon-sm -me-0.5 h-3.5 w-3.5",inert:!0}),e[14]=E):E=e[14];let T;e[15]!==y||e[16]!==w?(T=i.jsxs(ee.BasicTrigger,{className:"__composer-pill group/pill",children:[y,w,E]}),e[15]=y,e[16]=w,e[17]=T):T=e[17];let M;e[18]!==a||e[19]!==u?(M=i.jsx(ee.Portal,{children:i.jsx(ee.Content,{size:"auto",align:"start",alignOffset:-8,onCloseAutoFocus:u,children:a})}),e[18]=a,e[19]=u,e[20]=M):M=e[20];let A;e[21]!==c||e[22]!==M||e[23]!==T?(A=i.jsxs(ee.Root,{modal:!1,onOpenChange:c,children:[T,M]}),e[21]=c,e[22]=M,e[23]=T,e[24]=A):A=e[24];const I=A;if(s){let j;e[25]===Symbol.for("react.memo_cache_sentinel")?(j=i.jsx(Om,{className:"icon-sm",inert:!0}),e[25]=j):j=e[25];let R;e[26]!==_||e[27]!==m?(R=i.jsx("button",G(N({type:"button",className:"__composer-pill-remove","aria-label":m},_),{children:j})),e[26]=_,e[27]=m,e[28]=R):R=e[28];let O;return e[29]!==I||e[30]!==R?(O=i.jsxs("div",{className:"__composer-pill-composite group relative",children:[R,I]}),e[29]=I,e[30]=R,e[31]=O):O=e[31],O}return I}if(s){let E;e[32]===Symbol.for("react.memo_cache_sentinel")?(E=i.jsx("div",{className:"__composer-pill-remove",inert:!0,children:i.jsx(Om,{className:"icon-sm"})}),e[32]=E):E=e[32];let T;return e[33]!==y||e[34]!==_||e[35]!==m||e[36]!==w?(T=i.jsxs("button",G(N({type:"button",className:"__composer-pill group","aria-label":m},_),{children:[y,w,E]})),e[33]=y,e[34]=_,e[35]=m,e[36]=w,e[37]=T):T=e[37],T}let k;return e[38]!==y||e[39]!==w?(k=i.jsxs("div",{className:"__composer-pill",children:[y,w]}),e[38]=y,e[39]=w,e[40]=k):k=e[40],k};function FDe(t){t!=null&&t.parentElement&&t.textContent&&t.scrollWidth>t.clientWidth&&(t.parentElement.title=t.textContent)}function UDe(t){t.preventDefault()}const Ept=t=>{"use forget";const e=D.c(7),{label:n,tooltipLabel:s,onRemoveModel:o}=t,r=s==null;let a;e[0]!==n||e[1]!==o?(a=i.jsx(Nx,{icon:wT,label:n,removable:!0,onRemove:o}),e[0]=n,e[1]=o,e[2]=a):a=e[2];let l;return e[3]!==r||e[4]!==a||e[5]!==s?(l=i.jsx(St,{label:s,disabled:r,children:a}),e[3]=r,e[4]=a,e[5]=s,e[6]=l):l=e[6],l};function Az({repoName:t,onClose:e}){const n=te();return i.jsxs(en,{isOpen:!0,onClose:e,shouldIgnoreClickOutside:!0,testId:"modal-github-indexing",type:"success",size:"custom",className:"max-w-[420px]",headerClassName:"pt-0 pb-0 pe-2",showCloseButton:!0,hideSeparator:!0,title:i.jsx("span",{}),children:[i.jsx("div",{className:"mt-0 mb-4 flex justify-center",children:i.jsx("div",{className:"bg-tertiary border-token-border-subtle rounded-lg border p-3",children:i.jsx(wp,{className:"h-10 w-10"})})}),i.jsx("h2",{className:"mb-4 px-4 text-center text-xl font-semibold",children:n.formatMessage({id:"ejqREp",defaultMessage:"{repoName} is not indexed yet"},{repoName:t})}),i.jsx("p",{className:"text-token-text-secondary mb-6 px-6 text-center text-sm leading-relaxed",children:n.formatMessage({id:"KkmieM",defaultMessage:"This repository can't be accessed by ChatGPT until it's indexed by GitHub. You can trigger indexing by searching the repository's code on GitHub. After about 510 minutes, you can use it in ChatGPT."})}),i.jsxs(Se,{className:"w-full",size:"large",onClick:()=>{const s="https://github.com/search?q=repo:".concat(t,"&type=code");window.open(s,"_blank"),e()},children:[n.formatMessage({id:"yUeuLL",defaultMessage:"Trigger indexing on GitHub"}),i.jsx(ka,{className:"icon-sm ms-2 inline-block"})]})]})}const Nz=({items:t,searchTerm:e,setSearchTerm:n,selectedItems:s,searchPlaceholder:o,handleSelectItem:r,showSelectAllRepos:a,loading:l,onEndScroll:c,maxRepos:u,contentRef:d,subContentRef:f})=>{var C;const m=zX("installations/select_target"),p=v.useRef(null),g=v.useRef(null),h=v.useRef(null),_=v.useCallback(w=>{if(!c)return;const k=w.currentTarget;k.scrollHeight-k.scrollTop-k.clientHeight<=24&&c()},[c]),x=a&&(s==null?void 0:s.includes("$all_accessible_repos")),b=(C=s==null?void 0:s.filter(w=>w!=="$all_accessible_repos").length)!=null?C:0,y=u!==void 0&&b>=u,S=u===1;return v.useEffect(()=>{requestAnimationFrame(()=>{var w;(w=p.current)==null||w.focus()})},[]),v.useEffect(()=>{const w=M=>{p.current&&document.activeElement!==p.current&&(x7(M)||M.key==="Enter"||M.ctrlKey||M.metaKey||M.key.length!==1&&!y7(M)||(M.stopPropagation(),p.current.focus()))},k=M=>{if(M)return M.addEventListener("keydown",w),()=>{M.removeEventListener("keydown",w)}},E=d&&k(d==null?void 0:d.current),T=f&&k(f==null?void 0:f.current);return()=>{E==null||E(),T==null||T()}},[]),v.useEffect(()=>{var T,M,A;const w=g.current;if(!w)return;const k=(A=(M=(T=h.current)!=null?T:f==null?void 0:f.current)!=null?M:d==null?void 0:d.current)!=null?A:null,E=new IntersectionObserver(I=>{I[0].isIntersecting&&(c==null||c())},k?{root:k}:void 0);return E.observe(w),()=>E.disconnect()},[d,f,c]),i.jsxs(i.Fragment,{children:[i.jsx(ee.InputItem,{selectAllOnFocus:!1,border:!1,ref:p,value:e,onChange:w=>n(w.target.value),placeholder:o,name:"github-submenu-dropdown-input"}),i.jsxs("div",{className:"max-h-60 overflow-y-auto",ref:h,onScroll:_,children:[t==null?void 0:t.map(w=>{const k=s==null?void 0:s.includes(w.name),E=u!==void 0&&!k&&y&&!S;return i.jsx(ee.Item,{onClick:M=>{M.preventDefault(),r(w)},secondary:i.jsx("span",{className:"line-clamp-2",children:w.description}),trailing:k&&Pr,className:q((E||!w.indexed)&&"text-token-text-tertiary opacity-50"),disabled:E,children:i.jsx("div",{className:"truncate",children:w.name})},w.name)}),i.jsx("div",{className:"w-auto",ref:g}),!l&&t.length===0&&i.jsx(ee.Item,{className:"text-token-text-tertiary pointer-events-none",children:i.jsx(P,{id:"LRA3gT",defaultMessage:"No repositories found"})}),l&&i.jsx("div",{className:"text-token-text-tertiary mx-1.5 px-2 py-2.5 text-sm",role:"alert","aria-busy":"true",children:i.jsx(P,{id:"HvTGRC",defaultMessage:"Loading..."})})]}),a&&u===void 0&&i.jsx(ee.Item,{onClick:w=>{w.preventDefault(),r({name:"$all_accessible_repos"}),x&&!e&&HDe(w.currentTarget)},secondary:i.jsx(P,{id:"EhTGqu",defaultMessage:"Select all repositories accessible to ChatGPT"}),trailing:x&&Pr,children:i.jsx(P,{id:"pJnTxe",defaultMessage:"All Repositories"})}),i.jsx(ee.Separator,{}),i.jsx(ee.Item,{onClick:()=>{window.open(m,"_blank")},trailing:i.jsx(ka,{className:"icon-sm"}),children:i.jsx(P,{id:"ICVOEb",defaultMessage:"Configure Repositories"})}),i.jsx(ee.Separator,{}),i.jsxs("div",{className:"text-token-text-tertiary mx-1.5 px-2.5 py-2 text-xs",children:[u&&i.jsx(P,{id:"k/9Fjt",defaultMessage:"Choose up to {maxRepos} {maxRepos, plural, one {repository} other {repositories}}. To search more, use deep research.",values:{maxRepos:u}}),i.jsx(P,{id:"XVk/l2",defaultMessage:"Not indexed or not seeing a repository? {helpLink}",values:{helpLink:i.jsx(i.Fragment,{children:i.jsx("a",{href:"https://help.openai.com/en/articles/11145903-chatgpt-connectors",target:"_blank",rel:"noopener noreferrer",className:"underline",children:i.jsx(P,{id:"sVuhcw",defaultMessage:"Learn more"})})})}})]})]})};function HDe(t){const e=t.closest("[role=menuitem]");if(!e)return;let n=e.nextElementSibling;for(;n&&n.getAttribute("role")!=="menuitem";)n=n.nextElementSibling;if(!n)for(n=e.previousElementSibling;n&&n.getAttribute("role")!=="menuitem";)n=n.previousElementSibling;n instanceof HTMLElement&&n.focus()}const $De=30,GDe=25;function Iz(t){"use forget";var ze,Qe,Le;const e=D.c(71),{clientThreadId:n,allowSelectAllRepos:s,linkId:o,syncConnectionId:r,githubSyncEnabled:a,enabled:l,onSelectAllRepos:c,selectionScope:u}=t,d=s===void 0?!1:s,f=a===void 0?!1:a,m=l===void 0?!0:l,{selectedRepos:p,setSelectedRepos:g}=_k(n,u);let h;e[0]!==p?(h=xk(p),e[0]=p,e[1]=h):h=e[1];const _=h,[x]=v.useState(p),[b,y]=v.useState(""),S=bE(b,300),{maxRepos:C}=hk(),[w,k]=v.useState(null),E=C!=null?C:20,T=b.length>0?S:"";let M;e[2]!==E||e[3]!==o||e[4]!==T?(M=["github-repos-unified",o,E,T],e[2]=E,e[3]=o,e[4]=T,e[5]=M):M=e[5];const A=m&&!!o;let I;e[6]!==S||e[7]!==E||e[8]!==o||e[9]!==b.length?(I=async ce=>{const{pageParam:be}=ce,He=be===void 0?1:be;return b.length>0?await ue.safePost("/aip/connectors/github/search_repos_v2",{requestBody:{query:S,limit:E,page:He,link_id:o!=null?o:"",include_search_index_status:!0}}):await ue.safePost("/aip/connectors/github/list_repos",{requestBody:{link_id:o!=null?o:"",limit:E,page:He,include_search_index_status:!0}})},e[6]=S,e[7]=E,e[8]=o,e[9]=b.length,e[10]=I):I=e[10];let j;e[11]!==E?(j=(ce,be)=>{if(ce.next_token!==null&&ce.next_token!==void 0||ce.repos.length===E)return be.length+1},e[11]=E,e[12]=j):j=e[12];let R;e[13]!==M||e[14]!==A||e[15]!==I||e[16]!==j?(R={queryKey:M,enabled:A,initialPageParam:1,queryFn:I,getNextPageParam:j,retry:1},e[13]=M,e[14]=A,e[15]=I,e[16]=j,e[17]=R):R=e[17];const O=jc(R),L=O.data,B=O.isFetching,U=O.isFetchingNextPage,H=(ze=O.isError)!=null?ze:!1,$=O.fetchNextPage,F=O.hasNextPage,z=m&&f&&!!(r!=null&&r.length),W=r!=null?r:"";let Y;e[18]!==z||e[19]!==W?(Y={enabled:z,connectionInstanceId:W},e[18]=z,e[19]=W,e[20]=Y):Y=e[20];const{data:K,isFetching:Z}=gk(Y);let J;e:{if(!(K!=null&&K.sync_enabled_objects)){let be;e[21]===Symbol.for("react.memo_cache_sentinel")?(be=[],e[21]=be):be=e[21],J=be;break e}let ce;e[22]!==K.sync_enabled_objects?(ce=K.sync_enabled_objects.filter(zDe).map(VDe),e[22]=K.sync_enabled_objects,e[23]=ce):ce=e[23],J=ce}const Q=J;let ne;if(e[24]!==S||e[25]!==f||e[26]!==x||e[27]!==L||e[28]!==Q){const ce=new Map;S.length===0&&((Qe=x.selectedRepos)==null||Qe.forEach(be=>{ce.set(be,{repository_full_name:be,description:null,is_code_search_indexed:!0,synced:!1})})),f&&Q&&Q.forEach(be=>{var He;ce.set(be.repository_full_name,{repository_full_name:be.repository_full_name,description:(He=be.description)!=null?He:null,is_code_search_indexed:!0,synced:!0})}),L&&L.pages.forEach(be=>{be.repos.forEach(He=>{var nt,at,Xe;const Ge=ce.get(He.repository_full_name);ce.set(He.repository_full_name,{repository_full_name:He.repository_full_name,description:(nt=He.description)!=null?nt:null,is_code_search_indexed:(at=He.is_code_search_indexed)!=null?at:void 0,synced:(Xe=Ge==null?void 0:Ge.synced)!=null?Xe:!1})})}),S.length>0&&ce.forEach(be=>{var He;!be.repository_full_name.toLowerCase().includes(S.toLowerCase())&&!((He=be.description)!=null&&He.toLowerCase().includes(S.toLowerCase()))&&ce.delete(be.repository_full_name)}),ne=Array.from(ce.values()),e[24]=S,e[25]=f,e[26]=x,e[27]=L,e[28]=Q,e[29]=ne}else ne=e[29];const ie=ne;let fe;e[30]!==f||e[31]!==ie?(fe=ie.map(ce=>{const be=!!ce.is_code_search_indexed||ce.synced&&f;return{name:ce.repository_full_name,description:ce.description,indexed:be,synced:ce.synced}}),e[30]=f,e[31]=ie,e[32]=fe):fe=e[32];const ae=fe;let le;e[33]!==C||e[34]!==c||e[35]!==p.selectedAllRepos||e[36]!==p.selectedRepos||e[37]!==g?(le=ce=>{var at,Xe,gt,ht,Zt;const be=ce.name;if(!ce.indexed&&!ce.synced){k(ce.name);return}if(be==="$all_accessible_repos"){const It=!p.selectedAllRepos;g({selectedRepos:[],selectedAllRepos:It}),It&&(c==null||c());return}const He=(at=p.selectedRepos)==null?void 0:at.includes(be),Ge=(gt=(Xe=p.selectedRepos)==null?void 0:Xe.length)!=null?gt:0;if(C!==void 0&&C>1&&!He&&Ge>=C)return;if(C!==void 0&&C===1&&!He){g({selectedRepos:[be],selectedAllRepos:!1});return}const nt=He?((ht=p.selectedRepos)!=null?ht:[]).filter(It=>It!==be):[...(Zt=p.selectedRepos)!=null?Zt:[],be];g({selectedRepos:nt,selectedAllRepos:!1})},e[33]=C,e[34]=c,e[35]=p.selectedAllRepos,e[36]=p.selectedRepos,e[37]=g,e[38]=le):le=e[38];const pe=le;let _e;e[39]!==p.selectedRepos?(_e=(Le=p.selectedRepos)!=null?Le:[],e[39]=p.selectedRepos,e[40]=_e):_e=e[40];let Ce;e[41]!==p.selectedAllRepos?(Ce=p.selectedAllRepos?["$all_accessible_repos"]:[],e[41]=p.selectedAllRepos,e[42]=Ce):Ce=e[42];let ge;e[43]!==_e||e[44]!==Ce?(ge=[..._e,...Ce],e[43]=_e,e[44]=Ce,e[45]=ge):ge=e[45];const Re=ge,ke=v.useRef(0);let he;e[46]!==m||e[47]!==$||e[48]!==F||e[49]!==U?(he=()=>{m&&F&&(U||ke.current<1&&$())},e[46]=m,e[47]=$,e[48]=F,e[49]=U,e[50]=he):he=e[50];const Ee=he;let Pe;e[51]===Symbol.for("react.memo_cache_sentinel")?(Pe=()=>{ke.current=0},e[51]=Pe):Pe=e[51];let Ae;e[52]!==S?(Ae=[S],e[52]=S,e[53]=Ae):Ae=e[53],v.useEffect(Pe,Ae);let de,oe;e[54]!==U||e[55]!==H?(de=()=>{H?ke.current=ke.current+1:!U&&!H&&(ke.current=0)},oe=[U,H],e[54]=U,e[55]=H,e[56]=de,e[57]=oe):(de=e[56],oe=e[57]),v.useEffect(de,oe);const se=m&&B||U||Z,Oe=m&&(f||!!o);let Ne;return e[58]!==d||e[59]!==ae||e[60]!==pe||e[61]!==_||e[62]!==w||e[63]!==se||e[64]!==C||e[65]!==Ee||e[66]!==b||e[67]!==Re||e[68]!==p||e[69]!==Oe?(Ne={isAvailable:Oe,allowSelectAllRepos:d,dropdownItems:ae,handleSelectItem:pe,indexModalRepo:w,setIndexModalRepo:k,loading:se,maxRepos:C,onEndScroll:Ee,searchTerm:b,setSearchTerm:y,selectedItemNames:Re,selectedRepos:p,hasRepos:_},e[58]=d,e[59]=ae,e[60]=pe,e[61]=_,e[62]=w,e[63]=se,e[64]=C,e[65]=Ee,e[66]=b,e[67]=Re,e[68]=p,e[69]=Oe,e[70]=Ne):Ne=e[70],Ne}function VDe(t){var e;return{repository_full_name:t.object_name,description:(e=t.object_description)!=null?e:null}}function zDe(t){return t.object_type==="repository"&&t.object_name}function WDe(t){"use forget";const e=D.c(23),{state:n,searchPlaceholder:s,notIndexedLabel:o,contentRef:r,subContentRef:a}=t;let l;if(e[0]!==o||e[1]!==n.dropdownItems){let m;e[3]!==o?(m=p=>G(N({},p),{description:!p.indexed&&!p.synced?o:p.description}),e[3]=o,e[4]=m):m=e[4],l=n.dropdownItems.map(m),e[0]=o,e[1]=n.dropdownItems,e[2]=l}else l=e[2];const c=l;let u;e[5]!==n?(u=n.indexModalRepo&&i.jsx(Az,{repoName:n.indexModalRepo,onClose:()=>n.setIndexModalRepo(null)}),e[5]=n,e[6]=u):u=e[6];let d;e[7]!==r||e[8]!==c||e[9]!==s||e[10]!==n.allowSelectAllRepos||e[11]!==n.handleSelectItem||e[12]!==n.loading||e[13]!==n.maxRepos||e[14]!==n.onEndScroll||e[15]!==n.searchTerm||e[16]!==n.selectedItemNames||e[17]!==n.setSearchTerm||e[18]!==a?(d=i.jsx(Nz,{items:c,searchTerm:n.searchTerm,setSearchTerm:n.setSearchTerm,selectedItems:n.selectedItemNames,searchPlaceholder:s,handleSelectItem:n.handleSelectItem,showSelectAllRepos:n.allowSelectAllRepos,loading:n.loading,onEndScroll:n.onEndScroll,maxRepos:n.maxRepos,contentRef:r,subContentRef:a}),e[7]=r,e[8]=c,e[9]=s,e[10]=n.allowSelectAllRepos,e[11]=n.handleSelectItem,e[12]=n.loading,e[13]=n.maxRepos,e[14]=n.onEndScroll,e[15]=n.searchTerm,e[16]=n.selectedItemNames,e[17]=n.setSearchTerm,e[18]=a,e[19]=d):d=e[19];let f;return e[20]!==u||e[21]!==d?(f=i.jsxs(i.Fragment,{children:[u,d]}),e[20]=u,e[21]=d,e[22]=f):f=e[22],f}function qDe(t){"use forget";var L,B,U,H;const e=D.c(34),{clientThreadId:n,allowSelectAllRepos:s,linkId:o,syncConnectionId:r,githubSyncEnabled:a,contentRef:l,selectionScope:c}=t,u=s===void 0?!1:s,d=a===void 0?!1:a,f=te(),m=v.useRef(null),{addSource:p}=Yc(n);let g;e[0]!==p?(g=()=>{p(Te.GITHUB_CONNECTOR)},e[0]=p,e[1]=g):g=e[1];let h;e[2]!==u||e[3]!==n||e[4]!==d||e[5]!==o||e[6]!==c||e[7]!==r||e[8]!==g?(h={clientThreadId:n,allowSelectAllRepos:u,linkId:o,syncConnectionId:r,githubSyncEnabled:d,enabled:!0,onSelectAllRepos:g,selectionScope:c},e[2]=u,e[3]=n,e[4]=d,e[5]=o,e[6]=c,e[7]=r,e[8]=g,e[9]=h):h=e[9];const _=Iz(h),x=_.hasRepos,[b,y]=v.useState(!x);let S,C;e[10]!==x?(S=()=>{x||y(!0)},C=[x],e[10]=x,e[11]=S,e[12]=C):(S=e[11],C=e[12]),v.useEffect(S,C);let w;e:{if((B=(L=_.selectedRepos)==null?void 0:L.selectedRepos)!=null&&B.length&&((H=(U=_.selectedRepos)==null?void 0:U.selectedRepos)==null?void 0:H.length)>=1){const $=_.selectedRepos.selectedRepos;let F=$[0];if(F.length>$De){const W=(GDe-3)/2;F=F.slice(0,Math.floor(W))+"..."+F.slice(Math.floor(-W))}const z=$.length-1;w=z>0?"".concat(F," +").concat(z):F;break e}w=void 0}const k=w;if(!_.isAvailable)return null;const E=!x||b;let T;e[13]!==x?(T=$=>{x&&y($)},e[13]=x,e[14]=T):T=e[14];let M;e[15]!==f||e[16]!==k?(M=k!=null?k:f.formatMessage({id:"sDCihQ",defaultMessage:"Repositories"}),e[15]=f,e[16]=k,e[17]=M):M=e[17];let A;e[18]!==M?(A=i.jsx(ee.SubMenuTrigger,{className:"ps-4",icon:Rr,children:M}),e[18]=M,e[19]=A):A=e[19];let I;e[20]!==f?(I=f.formatMessage({id:"o4McNz",defaultMessage:"Search repositories"}),e[20]=f,e[21]=I):I=e[21];let j;e[22]!==f?(j=f.formatMessage({id:"oFTjZm",defaultMessage:"Not indexed"}),e[22]=f,e[23]=j):j=e[23];let R;e[24]!==l||e[25]!==_||e[26]!==I||e[27]!==j?(R=i.jsx(ee.Portal,{children:i.jsx(ee.SubContent,{ref:m,children:i.jsx(WDe,{state:_,searchPlaceholder:I,notIndexedLabel:j,contentRef:l,subContentRef:m})})}),e[24]=l,e[25]=_,e[26]=I,e[27]=j,e[28]=R):R=e[28];let O;return e[29]!==A||e[30]!==R||e[31]!==E||e[32]!==T?(O=i.jsxs(ee.Sub,{open:E,onOpenChange:T,children:[A,R]}),e[29]=A,e[30]=R,e[31]=E,e[32]=T,e[33]=O):O=e[33],O}const KDe=30,YDe=25,ZDe=t=>{"use forget";const e=D.c(11),{enabled:n,debouncedSearchTerm:s,linkId:o,limit:r}=t,a=n===void 0?!0:n,l=r===void 0?20:r;let c;e[0]!==s||e[1]!==o?(c=["github-repos",s,o],e[0]=s,e[1]=o,e[2]=c):c=e[2];let u;e[3]!==s||e[4]!==l||e[5]!==o?(u=async f=>{const{pageParam:m}=f,p=m===void 0?void 0:m;return await ue.safePost("/aip/connectors/github/search_repos",{requestBody:{query:s,limit:l,next_token:p,link_id:o}})},e[3]=s,e[4]=l,e[5]=o,e[6]=u):u=e[6];let d;return e[7]!==a||e[8]!==c||e[9]!==u?(d={queryKey:c,enabled:a,queryFn:u,getNextPageParam:eBe,initialPageParam:null,retry:1},e[7]=a,e[8]=c,e[9]=u,e[10]=d):d=e[10],jc(d)};function jz(t){"use forget";var de,oe;const e=D.c(59),{clientThreadId:n,allowSelectAllRepos:s,linkId:o,syncConnectionId:r,githubSyncEnabled:a,enabled:l,onSelectAllRepos:c,selectionScope:u}=t,d=s===void 0?!1:s,f=a===void 0?!1:a,m=l===void 0?!0:l,{selectedRepos:p,setSelectedRepos:g}=_k(n,u);let h;e[0]!==p?(h=xk(p),e[0]=p,e[1]=h):h=e[1];const _=h,[x]=v.useState(p),[b,y]=v.useState(""),S=bE(b,300),{maxRepos:C}=hk(),[w,k]=v.useState(null),E=m&&!!o,T=o!=null?o:"";let M;e[2]!==S||e[3]!==E||e[4]!==T?(M={enabled:E,debouncedSearchTerm:S,linkId:T},e[2]=S,e[3]=E,e[4]=T,e[5]=M):M=e[5];const{data:A,isFetching:I,isFetchingNextPage:j,isError:R,hasNextPage:O,fetchNextPage:L}=ZDe(M),B=m&&f&&!!(r!=null&&r.length),U=r!=null?r:"";let H;e[6]!==B||e[7]!==U?(H={enabled:B,connectionInstanceId:U},e[6]=B,e[7]=U,e[8]=H):H=e[8];const{data:$,isFetching:F}=gk(H);let z;e:{if(!($!=null&&$.sync_enabled_objects)){let Oe;e[9]===Symbol.for("react.memo_cache_sentinel")?(Oe=[],e[9]=Oe):Oe=e[9],z=Oe;break e}let se;e[10]!==$.sync_enabled_objects?(se=$.sync_enabled_objects.filter(JDe).map(QDe),e[10]=$.sync_enabled_objects,e[11]=se):se=e[11],z=se}const W=z;let Y;if(e[12]!==S||e[13]!==f||e[14]!==x||e[15]!==A||e[16]!==W){const se=new Map;S.length===0&&((de=x.selectedRepos)==null||de.forEach(Oe=>{se.set(Oe,{repository_full_name:Oe,description:null,is_code_search_indexed:!0,synced:!1})})),f&&W&&W.forEach(Oe=>{var Ne;se.set(Oe.repository_full_name,{repository_full_name:Oe.repository_full_name,description:(Ne=Oe.description)!=null?Ne:null,is_code_search_indexed:!0,synced:!0})}),A&&A.pages.forEach(Oe=>{Oe.repos.forEach(Ne=>{var Qe,Le,ce;const ze=se.get(Ne.repository_full_name);se.set(Ne.repository_full_name,{repository_full_name:Ne.repository_full_name,description:(Qe=Ne.description)!=null?Qe:null,is_code_search_indexed:(Le=Ne.is_code_search_indexed)!=null?Le:void 0,synced:(ce=ze==null?void 0:ze.synced)!=null?ce:!1})})}),S.length>0&&se.forEach(Oe=>{var Ne;!Oe.repository_full_name.toLowerCase().includes(S.toLowerCase())&&!((Ne=Oe.description)!=null&&Ne.toLowerCase().includes(S.toLowerCase()))&&se.delete(Oe.repository_full_name)}),Y=Array.from(se.values()),e[12]=S,e[13]=f,e[14]=x,e[15]=A,e[16]=W,e[17]=Y}else Y=e[17];const K=Y;let Z;e[18]!==f||e[19]!==K?(Z=K.map(se=>{const Oe=!!se.is_code_search_indexed||se.synced&&f;return{name:se.repository_full_name,description:se.description,indexed:Oe,synced:se.synced}}),e[18]=f,e[19]=K,e[20]=Z):Z=e[20];const J=Z;let Q;e[21]!==C||e[22]!==c||e[23]!==p.selectedAllRepos||e[24]!==p.selectedRepos||e[25]!==g?(Q=se=>{var Le,ce,be,He,Ge;const Oe=se.name;if(!se.indexed&&!se.synced){k(se.name);return}if(Oe==="$all_accessible_repos"){const nt=!p.selectedAllRepos;g({selectedRepos:[],selectedAllRepos:nt}),nt&&(c==null||c());return}const Ne=(Le=p.selectedRepos)==null?void 0:Le.includes(Oe),ze=(be=(ce=p.selectedRepos)==null?void 0:ce.length)!=null?be:0;if(C!==void 0&&C>1&&!Ne&&ze>=C)return;if(C!==void 0&&C===1&&!Ne){g({selectedRepos:[Oe],selectedAllRepos:!1});return}const Qe=Ne?((He=p.selectedRepos)!=null?He:[]).filter(nt=>nt!==Oe):[...(Ge=p.selectedRepos)!=null?Ge:[],Oe];g({selectedRepos:Qe,selectedAllRepos:!1})},e[21]=C,e[22]=c,e[23]=p.selectedAllRepos,e[24]=p.selectedRepos,e[25]=g,e[26]=Q):Q=e[26];const ne=Q;let ie;e[27]!==p.selectedRepos?(ie=(oe=p.selectedRepos)!=null?oe:[],e[27]=p.selectedRepos,e[28]=ie):ie=e[28];let fe;e[29]!==p.selectedAllRepos?(fe=p.selectedAllRepos?["$all_accessible_repos"]:[],e[29]=p.selectedAllRepos,e[30]=fe):fe=e[30];let ae;e[31]!==ie||e[32]!==fe?(ae=[...ie,...fe],e[31]=ie,e[32]=fe,e[33]=ae):ae=e[33];const le=ae,pe=v.useRef(0);let _e;e[34]!==m||e[35]!==L||e[36]!==O||e[37]!==j?(_e=()=>{!m||!O||j||pe.current<1&&L()},e[34]=m,e[35]=L,e[36]=O,e[37]=j,e[38]=_e):_e=e[38];const Ce=_e;let ge;e[39]===Symbol.for("react.memo_cache_sentinel")?(ge=()=>{pe.current=0},e[39]=ge):ge=e[39];let Re;e[40]!==S?(Re=[S],e[40]=S,e[41]=Re):Re=e[41],v.useEffect(ge,Re);let ke,he;e[42]!==j||e[43]!==R?(ke=()=>{R?pe.current=pe.current+1:!j&&!R&&(pe.current=0)},he=[j,R],e[42]=j,e[43]=R,e[44]=ke,e[45]=he):(ke=e[44],he=e[45]),v.useEffect(ke,he);const Ee=m&&I||j||F,Pe=m&&(f||!!o);let Ae;return e[46]!==d||e[47]!==J||e[48]!==ne||e[49]!==_||e[50]!==w||e[51]!==Ee||e[52]!==C||e[53]!==Ce||e[54]!==b||e[55]!==le||e[56]!==p||e[57]!==Pe?(Ae={isAvailable:Pe,allowSelectAllRepos:d,dropdownItems:J,handleSelectItem:ne,indexModalRepo:w,setIndexModalRepo:k,loading:Ee,maxRepos:C,onEndScroll:Ce,searchTerm:b,setSearchTerm:y,selectedItemNames:le,selectedRepos:p,hasRepos:_},e[46]=d,e[47]=J,e[48]=ne,e[49]=_,e[50]=w,e[51]=Ee,e[52]=C,e[53]=Ce,e[54]=b,e[55]=le,e[56]=p,e[57]=Pe,e[58]=Ae):Ae=e[58],Ae}function QDe(t){var e;return{repository_full_name:t.object_name,description:(e=t.object_description)!=null?e:null}}function JDe(t){return t.object_type==="repository"&&t.object_name}function M0(t){"use forget";const e=D.c(23),{state:n,searchPlaceholder:s,notIndexedLabel:o,contentRef:r,subContentRef:a}=t;let l;if(e[0]!==o||e[1]!==n.dropdownItems){let m;e[3]!==o?(m=p=>G(N({},p),{description:!p.indexed&&!p.synced?o:p.description}),e[3]=o,e[4]=m):m=e[4],l=n.dropdownItems.map(m),e[0]=o,e[1]=n.dropdownItems,e[2]=l}else l=e[2];const c=l;let u;e[5]!==n?(u=n.indexModalRepo&&i.jsx(Az,{repoName:n.indexModalRepo,onClose:()=>n.setIndexModalRepo(null)}),e[5]=n,e[6]=u):u=e[6];let d;e[7]!==r||e[8]!==c||e[9]!==s||e[10]!==n.allowSelectAllRepos||e[11]!==n.handleSelectItem||e[12]!==n.loading||e[13]!==n.maxRepos||e[14]!==n.onEndScroll||e[15]!==n.searchTerm||e[16]!==n.selectedItemNames||e[17]!==n.setSearchTerm||e[18]!==a?(d=i.jsx(Nz,{items:c,searchTerm:n.searchTerm,setSearchTerm:n.setSearchTerm,selectedItems:n.selectedItemNames,searchPlaceholder:s,handleSelectItem:n.handleSelectItem,showSelectAllRepos:n.allowSelectAllRepos,loading:n.loading,onEndScroll:n.onEndScroll,maxRepos:n.maxRepos,contentRef:r,subContentRef:a}),e[7]=r,e[8]=c,e[9]=s,e[10]=n.allowSelectAllRepos,e[11]=n.handleSelectItem,e[12]=n.loading,e[13]=n.maxRepos,e[14]=n.onEndScroll,e[15]=n.searchTerm,e[16]=n.selectedItemNames,e[17]=n.setSearchTerm,e[18]=a,e[19]=d):d=e[19];let f;return e[20]!==u||e[21]!==d?(f=i.jsxs(i.Fragment,{children:[u,d]}),e[20]=u,e[21]=d,e[22]=f):f=e[22],f}function Tpt(t){"use forget";const e=D.c(16),{clientThreadId:n,allowSelectAllRepos:s,linkId:o,syncConnectionId:r,githubSyncEnabled:a,contentRef:l,selectionScope:c}=t,u=s===void 0?!1:s,d=a===void 0?!1:a;if(xe("4290909311")){let p;return e[0]!==u||e[1]!==n||e[2]!==l||e[3]!==d||e[4]!==o||e[5]!==c||e[6]!==r?(p=i.jsx(qDe,{clientThreadId:n,allowSelectAllRepos:u,linkId:o,syncConnectionId:r,githubSyncEnabled:d,contentRef:l,selectionScope:c}),e[0]=u,e[1]=n,e[2]=l,e[3]=d,e[4]=o,e[5]=c,e[6]=r,e[7]=p):p=e[7],p}let m;return e[8]!==u||e[9]!==n||e[10]!==l||e[11]!==d||e[12]!==o||e[13]!==c||e[14]!==r?(m=i.jsx(XDe,{clientThreadId:n,allowSelectAllRepos:u,linkId:o,syncConnectionId:r,githubSyncEnabled:d,contentRef:l,selectionScope:c}),e[8]=u,e[9]=n,e[10]=l,e[11]=d,e[12]=o,e[13]=c,e[14]=r,e[15]=m):m=e[15],m}function XDe(t){"use forget";var L,B,U,H;const e=D.c(34),{clientThreadId:n,allowSelectAllRepos:s,linkId:o,syncConnectionId:r,githubSyncEnabled:a,contentRef:l,selectionScope:c}=t,u=s===void 0?!1:s,d=a===void 0?!1:a,f=te(),m=v.useRef(null),{addSource:p}=Yc(n);let g;e[0]!==p?(g=()=>{p(Te.GITHUB_CONNECTOR)},e[0]=p,e[1]=g):g=e[1];let h;e[2]!==u||e[3]!==n||e[4]!==d||e[5]!==o||e[6]!==c||e[7]!==r||e[8]!==g?(h={clientThreadId:n,allowSelectAllRepos:u,linkId:o,syncConnectionId:r,githubSyncEnabled:d,enabled:!0,onSelectAllRepos:g,selectionScope:c},e[2]=u,e[3]=n,e[4]=d,e[5]=o,e[6]=c,e[7]=r,e[8]=g,e[9]=h):h=e[9];const _=jz(h),x=_.hasRepos,[b,y]=v.useState(!x);let S,C;e[10]!==x?(S=()=>{x||y(!0)},C=[x],e[10]=x,e[11]=S,e[12]=C):(S=e[11],C=e[12]),v.useEffect(S,C);let w;e:{if((B=(L=_.selectedRepos)==null?void 0:L.selectedRepos)!=null&&B.length&&((H=(U=_.selectedRepos)==null?void 0:U.selectedRepos)==null?void 0:H.length)>=1){const $=_.selectedRepos.selectedRepos;let F=$[0];if(F.length>KDe){const W=(YDe-3)/2;F=F.slice(0,Math.floor(W))+"..."+F.slice(Math.floor(-W))}const z=$.length-1;w=z>0?"".concat(F," +").concat(z):F;break e}w=void 0}const k=w;if(!_.isAvailable)return null;const E=!x||b;let T;e[13]!==x?(T=$=>{x&&y($)},e[13]=x,e[14]=T):T=e[14];let M;e[15]!==f||e[16]!==k?(M=k!=null?k:f.formatMessage({id:"sDCihQ",defaultMessage:"Repositories"}),e[15]=f,e[16]=k,e[17]=M):M=e[17];let A;e[18]!==M?(A=i.jsx(ee.SubMenuTrigger,{className:"ps-4",icon:Rr,children:M}),e[18]=M,e[19]=A):A=e[19];let I;e[20]!==f?(I=f.formatMessage({id:"o4McNz",defaultMessage:"Search repositories"}),e[20]=f,e[21]=I):I=e[21];let j;e[22]!==f?(j=f.formatMessage({id:"oFTjZm",defaultMessage:"Not indexed"}),e[22]=f,e[23]=j):j=e[23];let R;e[24]!==l||e[25]!==_||e[26]!==I||e[27]!==j?(R=i.jsx(ee.Portal,{children:i.jsx(ee.SubContent,{ref:m,children:i.jsx(M0,{state:_,searchPlaceholder:I,notIndexedLabel:j,contentRef:l,subContentRef:m})})}),e[24]=l,e[25]=_,e[26]=I,e[27]=j,e[28]=R):R=e[28];let O;return e[29]!==A||e[30]!==R||e[31]!==E||e[32]!==T?(O=i.jsxs(ee.Sub,{open:E,onOpenChange:T,children:[A,R]}),e[29]=A,e[30]=R,e[31]=E,e[32]=T,e[33]=O):O=e[33],O}function eBe(t){var e;return(e=t.next_token)!=null?e:void 0}const nd="connector:".concat(b7),tBe=t=>{"use forget";const e=D.c(16),{clientThreadId:n,activeConnectorSystemHints:s,githubMenuState:o,githubLabels:r}=t,a=te(),l=v3(),c=v.useRef(null),u=v.useRef(null);let d;e[0]===Symbol.for("react.memo_cache_sentinel")?(d=i.jsx(Ir,{}),e[0]=d):d=e[0];let f;e[1]!==s.length||e[2]!==a?(f=a.formatMessage({id:"composer.apps.multiple",defaultMessage:"{count} apps"},{count:s.length}),e[1]=s.length,e[2]=a,e[3]=f):f=e[3];let m;e[4]!==s||e[5]!==n||e[6]!==r||e[7]!==o||e[8]!==a||e[9]!==l?(m=s.map(h=>{var x,b,y,S;return h.systemHint===nd&&(o!=null&&o.isAvailable)?i.jsxs(ee.Sub,{children:[i.jsx(ee.SubMenuTrigger,{icon:i.jsx(Qm,{hint:h,isNextToLabel:!0}),label:(x=h.actionLabel)!=null?x:h.name,trailing:i.jsx(ee.RadioItemCheck,{}),highlightTrailing:i.jsx("button",{type:"button",className:"text-token-text-tertiary hover:bg-tertiary hover:text-token-text-secondary flex h-6 w-6 items-center justify-center rounded transition","aria-label":a.formatMessage({id:"wpLHSw",defaultMessage:"Remove {connector}"},{connector:(b=h.actionLabel)!=null?b:h.name}),onClick:C=>{C.preventDefault(),C.stopPropagation(),l(nd,{analyticsMetadata:{clientThreadId:n}})}}),onSelect:oBe,children:i.jsx(sC,{systemHint:h})}),i.jsx(ee.Portal,{children:i.jsx(ee.SubContent,{ref:u,children:i.jsx(M0,{state:o,searchPlaceholder:r.searchPlaceholder,notIndexedLabel:r.notIndexedLabel,contentRef:c,subContentRef:u})})})]},h.systemHint):i.jsx(ee.RadioGroup,{value:(y=h.systemHint)!=null?y:void 0,onValueChange:C=>{l(C,{analyticsMetadata:{clientThreadId:n}})},children:i.jsx(ee.RadioItem,{value:h.systemHint,color:"default",icon:i.jsx(Qm,{hint:h,isNextToLabel:!0}),label:(S=h.actionLabel)!=null?S:h.name,trailing:i.jsx(ee.RadioItemCheck,{}),onSelect:rBe,children:i.jsx(sC,{systemHint:h})},h.systemHint)},h.systemHint)}),e[4]=s,e[5]=n,e[6]=r,e[7]=o,e[8]=a,e[9]=l,e[10]=m):m=e[10];let p;e[11]!==m?(p=i.jsx("div",{className:"min-w-48",ref:c,children:m}),e[11]=m,e[12]=p):p=e[12];let g;return e[13]!==f||e[14]!==p?(g=i.jsx(Nx,{icon:d,label:f,removable:!1,dropdownContent:p}),e[13]=f,e[14]=p,e[15]=g):g=e[15],g},Mpt=t=>{"use forget";var he,Ee,Pe,Ae;const e=D.c(57),{clientThreadId:n,activeSystemHint:s,activeSystemHintType:o,activeConnectorSystemHints:r,locked:a,onRemoveSystemHint:l,deepResearchModelVariant:c,onChangeDeepResearchModelVariant:u}=t,d=c===void 0?WX:c,f=te(),{pathname:m}=jn(),p=v3(),{connectorLinks:g}=Vo(),h=OC();let _;e[0]!==h?(_=()=>{if(h)return VR().data},e[0]=h,e[1]=_):_=e[1];const x=X(_);let b;e[2]!==(x==null?void 0:x.connection_statuses)?(b=x==null?void 0:x.connection_statuses.find(aBe),e[2]=x==null?void 0:x.connection_statuses,e[3]=b):b=e[3];const y=b;let S;e[4]!==g?(S=(Ee=(he=g.get(b7))==null?void 0:he[0])==null?void 0:Ee.id,e[4]=g,e[5]=S):S=e[5];const C=S,w=y==null?void 0:y.user_connection_details.connection_instance_id,k=!!(h&&w);let E;e[6]!==r?(E=r.some(iBe),e[6]=r,e[7]=E):E=e[7];const M=E||(s==null?void 0:s.systemHint)===nd;let A;e[8]===Symbol.for("react.memo_cache_sentinel")?(A=xe("4290909311"),e[8]=A):A=e[8];const I=A,j=k?w:void 0;let R;e[9]!==n||e[10]!==C||e[11]!==k||e[12]!==j?(R={clientThreadId:n,allowSelectAllRepos:!1,linkId:C,syncConnectionId:j,githubSyncEnabled:k,selectionScope:Z_},e[9]=n,e[10]=C,e[11]=k,e[12]=j,e[13]=R):R=e[13];const O=R,L=M&&I;let B;e[14]!==O||e[15]!==L?(B=G(N({},O),{enabled:L}),e[14]=O,e[15]=L,e[16]=B):B=e[16];const U=Iz(B),H=M&&!I;let $;e[17]!==O||e[18]!==H?($=G(N({},O),{enabled:H}),e[17]=O,e[18]=H,e[19]=$):$=e[19];const F=jz($),z=I?U:F;let W;e[20]!==f?(W=f.formatMessage({id:"o4McNz",defaultMessage:"Search repositories"}),e[20]=f,e[21]=W):W=e[21];let Y;e[22]!==f?(Y=f.formatMessage({id:"oFTjZm",defaultMessage:"Not indexed"}),e[22]=f,e[23]=Y):Y=e[23];let K;e[24]!==W||e[25]!==Y?(K={searchPlaceholder:W,notIndexedLabel:Y},e[24]=W,e[25]=Y,e[26]=K):K=e[26];const Z=K,J=v.useRef(null);let Q,ne=s,ie=l;const fe=v.useRef(null);if(o&&C3(o))if((r==null?void 0:r.length)===0)ne=s;else if((r==null?void 0:r.length)===1){ne=r[0];let de;if(e[27]!==r[0]||e[28]!==n||e[29]!==p?(de=()=>p(r[0].systemHint,{analyticsMetadata:{clientThreadId:n}}),e[27]=r[0],e[28]=n,e[29]=p,e[30]=de):de=e[30],ie=de,ne.systemHint===nd&&z.isAvailable){let oe;e[31]!==Z.notIndexedLabel||e[32]!==Z.searchPlaceholder||e[33]!==z?(oe=i.jsx("div",{ref:J,children:i.jsx(M0,{state:z,searchPlaceholder:Z.searchPlaceholder,notIndexedLabel:Z.notIndexedLabel,contentRef:J})}),e[31]=Z.notIndexedLabel,e[32]=Z.searchPlaceholder,e[33]=z,e[34]=oe):oe=e[34],Q=oe}}else{let de;return e[35]!==r||e[36]!==n||e[37]!==Z||e[38]!==z?(de=i.jsx(tBe,{activeConnectorSystemHints:r,clientThreadId:n,githubMenuState:z,githubLabels:Z}),e[35]=r,e[36]=n,e[37]=Z,e[38]=z,e[39]=de):de=e[39],de}if(!Q&&(ne==null?void 0:ne.systemHint)===nd&&z.isAvailable){let de;e[40]!==Z.notIndexedLabel||e[41]!==Z.searchPlaceholder||e[42]!==z?(de=i.jsx("div",{ref:fe,children:i.jsx(M0,{state:z,searchPlaceholder:Z.searchPlaceholder,notIndexedLabel:Z.notIndexedLabel,contentRef:fe})}),e[40]=Z.notIndexedLabel,e[41]=Z.searchPlaceholder,e[42]=z,e[43]=de):de=e[43],Q=de}if(!ne)return null;const ae=(Ae=(Pe=ne.shortLabel)!=null?Pe:ne.name)!=null?Ae:"",le=Js&&ne.systemHint===Js;let pe;e[44]!==m?(pe=m.includes("/deep-research"),e[44]=m,e[45]=pe):pe=e[45];const Ce=!a&&!(pe&&le);if(le&&u){let de;e[46]!==d||e[47]!==u?(de=i.jsx(nBe,{selectedVariant:d,onChangeVariant:u}),e[46]=d,e[47]=u,e[48]=de):de=e[48],Q=de}let ge;e[49]!==ne?(ge=i.jsx(Qm,{hint:ne,isNextToLabel:!0}),e[49]=ne,e[50]=ge):ge=e[50];const Re=Ce?ie:void 0;let ke;return e[51]!==Q||e[52]!==Ce||e[53]!==ae||e[54]!==ge||e[55]!==Re?(ke=i.jsx(Nx,{icon:ge,label:ae,removable:Ce,onRemove:Re,dropdownContent:Q}),e[51]=Q,e[52]=Ce,e[53]=ae,e[54]=ge,e[55]=Re,e[56]=ke):ke=e[56],ke};function nBe({selectedVariant:t,onChangeVariant:e}){const n=te();return i.jsxs(ee.RadioGroup,{value:t,onValueChange:s=>e(s),children:[i.jsx(ee.Label,{children:i.jsx(P,N({},rC.deepResearchDropdownHeader))}),qX.map(s=>i.jsx(ee.RadioItem,{value:s,label:sBe(s,n)},s))]})}const rC=we({deepResearchDropdownHeader:{id:"bo/jeh",defaultMessage:"Version"},deepResearchPillLabel:{id:"F1QAek",defaultMessage:"{variant}"},deepResearchVariantStandard:{id:"8wTBr8",defaultMessage:"Deep research"},deepResearchVariantStandardMini:{id:"i+xQw8",defaultMessage:"Deep Research Mini"},deepResearchVariantLegacy:{id:"8Nmp98",defaultMessage:"Legacy"},deepResearchVariantLegacyMini:{id:"GC0soh",defaultMessage:"Legacy Deep Research Mini"}});function sBe(t,e){switch(t){case"standard":return e.formatMessage(rC.deepResearchVariantStandard);case"legacy":return e.formatMessage(rC.deepResearchVariantLegacy)}}function oBe(t){t.preventDefault()}function rBe(t){t.preventDefault()}function aBe(t){return t.user_connection_details.knowledge_connector_type==="github"&&["partially_activated","activated"].includes(t.user_connection_details.activation_status)&&!!t.user_connection_details.connection_instance_id&&!!t.user_connection_details.backing_link_id}function iBe(t){return t.systemHint===nd}function lBe(t){"use forget";const e=D.c(61),{selectedMode:n,onSelectMode:s,disabled:o,showLeadingDivider:r}=t,a=o===void 0?!1:o,l=r===void 0?!1:r,c=te(),u=n!=null?n:"signedInAccounts";let d;e[0]!==c?(d=c.formatMessage(Ds.signedInMenuLabel),e[0]=c,e[1]=d):d=e[1];const f=d;let m;e[2]!==c?(m=c.formatMessage(Ds.incognitoMenuLabel),e[2]=c,e[3]=m):m=e[3];const p=m,g=u==="signedInAccounts"?f:p;let h;e[4]!==u?(h=u==="signedInAccounts"?i.jsx(AG,{className:"icon"}):i.jsx(jH,{className:"icon"}),e[4]=u,e[5]=h):h=e[5];const _=h;let x;e[6]!==a||e[7]!==u||e[8]!==s?(x=K=>{a||K!==u&&(s==null||s(K))},e[6]=a,e[7]=u,e[8]=s,e[9]=x):x=e[9];const b=x,y=l&&"group/trigger";let S;e[10]!==y?(S=q("composer-btn -ms-2 ps-3.5 pe-2 disabled:cursor-not-allowed disabled:opacity-60",y),e[10]=y,e[11]=S):S=e[11];const C=S;let w;e[12]!==l?(w=l?i.jsx("span",{className:"bg-token-border-medium -me-3 hidden h-6 w-px min-[420px]:inline-block"}):null,e[12]=l,e[13]=w):w=e[13];let k;e[14]!==_?(k=i.jsx("span",{className:"hidden items-center [[data-collapse-labels]_&]:me-1.5 [[data-collapse-labels]_&]:inline-flex",children:_}),e[14]=_,e[15]=k):k=e[15];let E;e[16]!==f?(E=i.jsx("span",{"aria-hidden":!0,className:"invisible col-start-1 row-start-1 whitespace-nowrap",children:f}),e[16]=f,e[17]=E):E=e[17];let T;e[18]!==p?(T=i.jsx("span",{"aria-hidden":!0,className:"invisible col-start-1 row-start-1 whitespace-nowrap",children:p}),e[18]=p,e[19]=T):T=e[19];let M;e[20]!==g?(M=i.jsx("span",{className:"col-start-1 row-start-1 whitespace-nowrap",children:g}),e[20]=g,e[21]=M):M=e[21];let A;e[22]!==E||e[23]!==T||e[24]!==M?(A=i.jsxs("span",{className:"relative grid [[data-collapse-labels]_&]:sr-only",children:[E,T,M]}),e[22]=E,e[23]=T,e[24]=M,e[25]=A):A=e[25];let I;e[26]===Symbol.for("react.memo_cache_sentinel")?(I=i.jsx($o,{className:"icon-sm ms-1"}),e[26]=I):I=e[26];let j;e[27]!==a||e[28]!==k||e[29]!==A||e[30]!==C?(j=i.jsxs("button",{type:"button",className:C,disabled:a,children:[k,A,I]}),e[27]=a,e[28]=k,e[29]=A,e[30]=C,e[31]=j):j=e[31];let R;e[32]!==a||e[33]!==j?(R=i.jsx(ee.BasicTrigger,{asChild:!0,disabled:a,children:j}),e[32]=a,e[33]=j,e[34]=R):R=e[34];let O;e[35]!==a||e[36]!==b?(O=K=>{a||(K==="incognito"||K==="signedInAccounts")&&b(K)},e[35]=a,e[36]=b,e[37]=O):O=e[37];let L;e[38]!==c?(L=c.formatMessage(Ds.signedInMenuLabel),e[38]=c,e[39]=L):L=e[39];let B;e[40]===Symbol.for("react.memo_cache_sentinel")?(B=i.jsx(P,N({},Ds.signedInDescription)),e[40]=B):B=e[40];let U;e[41]!==a||e[42]!==L?(U=i.jsx(ee.RadioItem,{value:"signedInAccounts",disabled:a,label:L,secondary:B}),e[41]=a,e[42]=L,e[43]=U):U=e[43];let H;e[44]!==c?(H=c.formatMessage(Ds.incognitoMenuLabel),e[44]=c,e[45]=H):H=e[45];let $;e[46]===Symbol.for("react.memo_cache_sentinel")?($=i.jsx(P,N({},Ds.incognitoDescription)),e[46]=$):$=e[46];let F;e[47]!==a||e[48]!==H?(F=i.jsx(ee.RadioItem,{value:"incognito",disabled:a,label:H,secondary:$}),e[47]=a,e[48]=H,e[49]=F):F=e[49];let z;e[50]!==u||e[51]!==O||e[52]!==U||e[53]!==F?(z=i.jsx(ee.Portal,{children:i.jsx(ee.Content,{size:"auto",alignOffset:-7,children:i.jsxs(ee.RadioGroup,{value:u,onValueChange:O,children:[U,F]})})}),e[50]=u,e[51]=O,e[52]=U,e[53]=F,e[54]=z):z=e[54];let W;e[55]!==R||e[56]!==z?(W=i.jsxs(ee.Root,{children:[R,z]}),e[55]=R,e[56]=z,e[57]=W):W=e[57];let Y;return e[58]!==W||e[59]!==w?(Y=i.jsxs(i.Fragment,{children:[w,W]}),e[58]=W,e[59]=w,e[60]=Y):Y=e[60],Y}function Apt(t){"use forget";const e=D.c(9),{disabled:n,showLeadingDivider:s}=t,o=n===void 0?!1:n,r=s===void 0?!1:s,a=X(ot.agentSessionMode$),l=X(ln);let c;e[0]!==l?(c=l?{"data-collapse-labels":""}:void 0,e[0]=l,e[1]=c):c=e[1];const u=c;let d;e[2]!==o||e[3]!==a||e[4]!==r?(d=i.jsx(lBe,{selectedMode:a,onSelectMode:MG,disabled:o,showLeadingDivider:r}),e[2]=o,e[3]=a,e[4]=r,e[5]=d):d=e[5];let f;return e[6]!==u||e[7]!==d?(f=i.jsx("div",G(N({className:"contents"},u),{children:d})),e[6]=u,e[7]=d,e[8]=f):f=e[8],f}const Npt=t=>{"use forget";const e=D.c(21);let n;e[0]!==t?(n=t===void 0?{}:t,e[0]=t,e[1]=n):n=e[1];const{includeDisabledByAdmin:s,isDeveloperMode:o}=n,r=o===void 0?!1:o;let a;e[2]===Symbol.for("react.memo_cache_sentinel")?(a=Oc(),e[2]=a):a=e[2];const l=a;let c;e[3]===Symbol.for("react.memo_cache_sentinel")?(c=JP(),e[3]=c):c=e[3];const{enabled:u,availableConnectorsType:d}=c;let f;e[4]!==s?(f=()=>{if(u)return ip(l,{includeDisabledByAdmin:s,skipLogos:!1})},e[4]=s,e[5]=f):f=e[5];const m=X(f),p=u&&!m;let g;e:{if(!m){let k;e[6]===Symbol.for("react.memo_cache_sentinel")?(k=[],e[6]=k):k=e[6],g=k;break e}let w;if(e[7]!==m){let k;e[9]===Symbol.for("react.memo_cache_sentinel")?(k=E=>d.includes(E.type),e[9]=k):k=e[9],w=m.filter(k),e[7]=m,e[8]=w}else w=e[8];g=w}const h=g,_=xe("2047578466");let x;e[10]!==s?(x={includeDisabledByAdmin:s},e[10]=s,e[11]=x):x=e[11];const b=AC(x);if(!_)return b;if(!u){let w;return e[12]===Symbol.for("react.memo_cache_sentinel")?(w={enabled:!1,availableConnectors:[],isLoading:!1},e[12]=w):w=e[12],w}let y;if(e[13]!==h||e[14]!==r){let w;e[16]!==r?(w=k=>{switch(k.connector_type){case"SERVICE":return!0;case"MCP":switch(k.developer_type){case"OAI":case"TRUSTED_PARTNER":return!0;case"UNTRUSTED":return r;default:return!1}default:return!1}},e[16]=r,e[17]=w):w=e[17],y=h.filter(w),e[13]=h,e[14]=r,e[15]=y}else y=e[15];const S=y;let C;return e[18]!==S||e[19]!==p?(C={enabled:!0,availableConnectors:S,isLoading:p},e[18]=S,e[19]=p,e[20]=C):C=e[20],C};function Ipt(){return i.jsx("div",{className:"border-token-text-quartenary text-token-text-secondary dark:border-token-border-heavy dark:text-token-text-tertiary items-center rounded-full border px-1 py-0.5 text-[8px] leading-3 font-semibold uppercase",children:i.jsx(P,{id:"mP0mrm",defaultMessage:"Beta"})})}const jpt=t=>{"use forget";const e=D.c(2),{children:n}=t;let s;return e[0]!==n?(s=i.jsx("span",{className:"border-token-text-quartenary text-token-text-secondary dark:border-token-border-heavy dark:text-token-text-tertiary items-center rounded-full border px-1 py-0.5 text-[8px] leading-3 font-semibold uppercase",children:n}),e[0]=n,e[1]=s):s=e[1],s};function cBe(){"use forget";const t=D.c(1);let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=i.jsx("div",{className:"text-token-interactive-label-danger-secondary-default border-token-border-status-error items-center rounded-full border px-1 py-0.5 text-[8px] leading-3 font-semibold uppercase",children:i.jsx(P,{id:"w+mmPI",defaultMessage:"DEV"})}),t[0]=e):e=t[0],e}const uBe=()=>{"use forget";const t=D.c(1);let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=i.jsx("span",{className:"border-token-text-quartenary text-token-text-secondary dark:border-token-border-heavy dark:text-token-text-tertiary items-center rounded-full border px-1 py-0.5 text-[8px] leading-3 font-semibold uppercase",children:i.jsx(P,{defaultMessage:"Internal",id:"allConnectors.internal"})}),t[0]=e):e=t[0],e};function Ppt(t){"use forget";const e=D.c(2),{connector:n}=t;if(n.connector_type!=="MCP"||n.developer_type==="TRUSTED_PARTNER")return null;if(n.status==="ONLY_ME"){let s;return e[0]===Symbol.for("react.memo_cache_sentinel")?(s=i.jsx(cBe,{}),e[0]=s):s=e[0],s}if(n.status==="ENABLED"){let s;return e[1]===Symbol.for("react.memo_cache_sentinel")?(s=i.jsx(uBe,{}),e[1]=s):s=e[1],s}return null}const dBe=re(me,"b6e0e5",20,20),XI=re(me,"39dcc8",20,20),Rpt=({connection:t,onClose:e})=>{var l;const n=te(),s=t.user_connection_details.activation_status,o=s==="activating"?[{icon:wc,label:n.formatMessage(Yr.initialTime)},{icon:XI,label:n.formatMessage(Yr.response)},{icon:vc,label:n.formatMessage(Yr.future)}]:[{icon:dBe,label:n.formatMessage(Yr.search)},{icon:wc,label:n.formatMessage(Yr.fullSyncTime)},{icon:XI,label:n.formatMessage(Yr.response)},{icon:vc,label:n.formatMessage(Yr.future)}],r=s==="activating"?n.formatMessage(Yr.titleSyncing):n.formatMessage(Yr.titlePartialSyncing),a=t.connection_display_info.display_name;return i.jsx(fBe,{iconUrl:(l=t.connection_display_info.icon_url)!=null?l:void 0,iconAlt:t.connection_display_info.display_name,footerLogo:s==="activating"?i.jsx(UM,{sizeOverride:18,percentage:40,className:"text-token-text-tertiary"}):i.jsx(UM,{sizeOverride:18,percentage:60,className:"text-blue-400"}),bulletPoints:o,onClose:e,title:r,description:a})},fBe=({title:t,iconUrl:e,iconAlt:n,footerLogo:s,description:o,bulletPoints:r,onClose:a})=>{const l=te();return i.jsxs(en,{testId:"modal-ca-nux",isOpen:!0,noPadding:!0,onClose:a,shouldIgnoreClickOutside:!0,size:"custom",type:"success",className:"z-[10000] max-w-sm",children:[i.jsx("div",{className:"relative h-12",children:i.jsx(Wn,{onClick:a,className:"absolute end-0 top-0 z-10 me-2 mt-2 text-black"})}),i.jsxs("div",{className:"flex flex-col p-6 pb-5 text-center",children:[i.jsx("div",{className:"flex justify-center",children:i.jsxs("div",{className:"relative",children:[i.jsx("img",{src:e,alt:n,className:"h-12 w-12 rounded-full"}),i.jsx("div",{className:"bg-token-bg-primary absolute end-0 bottom-0 z-10 flex items-center justify-center rounded-full",children:s})]})}),i.jsx("div",{className:"text-md mt-6 font-medium",children:t}),i.jsx("div",{className:"text-token-text-tertiary text-sm",children:o}),i.jsx("div",{className:"mt-5 mb-9 flex flex-col justify-center gap-3",children:r.map(c=>i.jsxs("div",{className:"text-token-text-secondary flex items-start gap-2",children:[i.jsx(c.icon,{className:"icon"}),i.jsx("span",{className:"text-body-small-regular text-start",children:c.label})]},c.label))}),i.jsx("div",{children:i.jsx(Se,{color:"secondary",onClick:a,children:i.jsx("span",{className:"px-4",children:l.formatMessage(Yr.gotIt)})})})]})]})},Yr=we({titleSyncing:{id:"contextual-answers.status-modal.title-syncing",defaultMessage:"Sync in progress..."},titlePartialSyncing:{id:"contextual-answers.status-modal.title-partial-syncing",defaultMessage:"Last 30 days synced. Still syncing..."},search:{id:"contextual-answers.status-modal.search",defaultMessage:"The last 30 days are ready to search."},initialTime:{id:"contextual-answers.status-modal.initial-time",defaultMessage:"The initial sync may take 8 hours or longer, based on workspace size."},fullSyncTime:{id:"contextual-answers.status-modal.full-time",defaultMessage:"Full sync may take up to 16 hours or longer, based on workspace size."},response:{id:"contextual-answers.status-modal.response",defaultMessage:"Syncing enables instant ChatGPT responses about your data."},future:{id:"contextual-answers.status-modal.future",defaultMessage:"Future changes are available in real-time."},gotIt:{id:"contextual-answers.status-modal.got-it",defaultMessage:"Got it"}}),Opt=re(me,"6fd435",20,20),Lpt=re(me,"0ccbd9",20,20),Dpt="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%20%3e%3cpath%20d='M3.51105%2018.4269L4.39307%2019.9615C4.57634%2020.2846%204.8398%2020.5384%205.14908%2020.723L8.29914%2015.2307H1.99902C1.99902%2015.5884%202.09066%2015.9461%202.27394%2016.2692L3.51105%2018.4269Z'%20fill='%230066DA'%20/%3e%3cpath%20d='M11.999%208.76916L8.84897%203.27686C8.53969%203.46147%208.27623%203.71532%208.09295%204.03839L2.27394%2014.1922C2.09403%2014.5083%201.99926%2014.8663%201.99902%2015.2307H8.29914L11.999%208.76916Z'%20fill='%2300AC47'%20/%3e%3cpath%20d='M18.8492%2020.723C19.1585%2020.5384%2019.422%2020.2846%2019.6053%2019.9615L19.9718%2019.3269L21.7244%2016.2692C21.9077%2015.9461%2021.9993%2015.5884%2021.9993%2015.2307H15.6987L17.0394%2017.8846L18.8492%2020.723Z'%20fill='%23EA4335'%20/%3e%3cpath%20d='M11.9982%208.76923L15.1483%203.27692C14.839%203.09231%2014.4839%203%2014.1173%203H9.87907C9.51252%203%209.15742%203.10385%208.84814%203.27692L11.9982%208.76923Z'%20fill='%2300832D'%20/%3e%3cpath%20d='M15.6983%2015.2307H8.29849L5.14844%2020.723C5.45772%2020.9076%205.81281%2020.9999%206.17937%2020.9999H17.8174C18.1839%2020.9999%2018.539%2020.8961%2018.8483%2020.723L15.6983%2015.2307Z'%20fill='%232684FC'%20/%3e%3cpath%20d='M18.8146%209.11532L15.9051%204.03839C15.7218%203.71532%2015.4584%203.46147%2015.1491%203.27686L11.999%208.76916L15.6989%2015.2307H21.9876C21.9876%2014.873%2021.8959%2014.5153%2021.7127%2014.1922L18.8146%209.11532Z'%20fill='%23FFBA00'%20/%3e%3c/svg%3e",mBe=re(me,"7a0ff2",16,16),pBe=je(()=>Me(()=>import("./6b630373-2jzwiexvfug90jgv.js"),__vite__mapDeps([273,1,2,3])).then(t=>t.AgentConnectorsSafetyModal));function gBe({connector:t,clientThreadId:e,activeSystemHintType:n,account:s}){rt(pBe,{connector:t,alreadyViewed:!0,onClose:()=>{},onConfirm:()=>{},onTurnOffConnectors:()=>{pt(e,o=>{var r,a;(r=o.selectedSources)!=null||(o.selectedSources=new Map),o.selectedSources.set(n,new Set(["web"])),(a=o.selectedMCPSources)!=null||(o.selectedMCPSources=new Map),o.selectedMCPSources.set(n,new Set),o.mentionedSources=new Set,YR({selectedSourcesMap:o.selectedSources,selectedMCPSourcesMap:o.selectedMCPSources,scope:{userId:s==null?void 0:s.authUserId,workspaceId:s==null?void 0:s.id}})})}})}function Bpt(t){"use forget";var S;const e=D.c(20),{clientThreadId:n,activeSystemHintType:s,layoutMode:o}=t,r=te();let a;e[0]===Symbol.for("react.memo_cache_sentinel")?(a=Et(),e[0]=a):a=e[0];const l=a,c=Ct(We.hasSeenOdysseyConnectorsModal),{platformConnectors:u}=t_(),{selectedSources:d}=Yc(n);if(c.isLoading||c.eligible)return null;let f,m;if(e[1]!==u||e[2]!==d){m=Symbol.for("react.early_return_sentinel");e:{const C=Array.from(d!=null?d:[]).find(hBe);if(!(C!=null)){m=null;break e}if(C){const k=(S=un[C])!=null?S:C;f=u.get(k)}if(!f&&u.size>0){let k;e[5]!==u?(k=Array.from(u.values()),e[5]=u,e[6]=k):k=e[6],f=k[0]}}e[1]=u,e[2]=d,e[3]=f,e[4]=m}else f=e[3],m=e[4];if(m!==Symbol.for("react.early_return_sentinel"))return m;if(!f)return null;let p;e[7]!==s||e[8]!==n||e[9]!==f?(p=()=>{gBe({connector:f,clientThreadId:n,activeSystemHintType:s,account:l})},e[7]=s,e[8]=n,e[9]=f,e[10]=p):p=e[10];const g=p;let h;e[11]!==r?(h=r.formatMessage(_Be.tooltip),e[11]=r,e[12]=h):h=e[12];const _=o==="center"?"bottom":"top";let x;e[13]===Symbol.for("react.memo_cache_sentinel")?(x=i.jsx(mBe,{className:"icon-sm text-[#E25507] dark:text-[#FF9E6C]"}),e[13]=x):x=e[13];let b;e[14]!==g?(b=i.jsx("button",{type:"button",onClick:g,className:"-ms-1 flex h-9 items-center justify-center p-1.5",children:x}),e[14]=g,e[15]=b):b=e[15];let y;return e[16]!==h||e[17]!==_||e[18]!==b?(y=i.jsx(St,{label:h,side:_,delayDuration:300,children:b}),e[16]=h,e[17]=_,e[18]=b,e[19]=y):y=e[19],y}function hBe(t){return t!=="web"&&t!=="cloud"}const _Be=we({tooltip:{id:"IK9l6I",defaultMessage:"Learn more about privacy risks with connectors"}}),Fpt=t=>{"use forget";var I,j;const e=D.c(18),{modelLabel:n,modelSlug:s,modelConfig:o,thinkingEffort:r,onChangeThinkingEffort:a,onRemoveModel:l,onCloseAutoFocus:c}=t,u=te(),d=Ece(s,o!=null?o:void 0),f=Tce(o!=null?o:void 0),m=d.map(R=>N({effort:R},SL(u,R,f))),p=m.length>0,g=(I=m.find(R=>{const{effort:O}=R;return O===r}))!=null?I:m[0],h=(j=g==null?void 0:g.effort)!=null?j:r;if(Od.useEffect(()=>{p&&h!==r&&a(h)},[p,h,r,a]),!p||!g)return null;const{filledIcon:_,fullLabel:x}=g,b=Nx,y=h==="standard"?n:x,S=!0,C=yBe,w=ee;let k;e[0]!==s||e[1]!==a?(k=R=>{const O=R;Mce(s,O),a(O)},e[0]=s,e[1]=a,e[2]=k):k=e[2];let E;e[3]===Symbol.for("react.memo_cache_sentinel")?(E=i.jsx(ee.Label,{children:i.jsx(P,{id:"YhWabo",defaultMessage:"Thinking time"})}),e[3]=E):E=e[3];const T=m.map(bBe);let M;e[4]!==h||e[5]!==w.RadioGroup||e[6]!==k||e[7]!==E||e[8]!==T?(M=i.jsxs(w.RadioGroup,{value:h,onValueChange:k,children:[E,T]}),e[4]=h,e[5]=w.RadioGroup,e[6]=k,e[7]=E,e[8]=T,e[9]=M):M=e[9];let A;return e[10]!==b||e[11]!==_||e[12]!==c||e[13]!==l||e[14]!==y||e[15]!==C||e[16]!==M?(A=i.jsx(b,{icon:_,label:y,removable:S,onRemove:l,onCloseAutoFocus:c,onOpenChange:C,dropdownContent:M}),e[10]=b,e[11]=_,e[12]=c,e[13]=l,e[14]=y,e[15]=C,e[16]=M,e[17]=A):A=e[17],A};function xBe({config:t}){return i.jsx(St,{side:"right",labelTextAlign:"left",contentClassName:"cant-hover:hidden",labelClassName:"[text-wrap:pretty]",label:t.description,triggerAs:null,children:i.jsx(ee.RadioItem,{value:t.effort,icon:t.progressIcon,label:t.shortLabel})})}function yBe(t){t&&V.logEventWithStatsig("ChatGPT Composer Thinking Effort Opened","chatgpt_composer_thinking_effort_opened")}function bBe(t){return i.jsx(xBe,{config:t},t.effort)}const Upt=({selectedHazelnutIds:t,conversationId:e})=>{const n=te(),{data:s}=DE({scope:"personal"}),o=v.useMemo(()=>t.map(c=>s==null?void 0:s.hazelnuts.find(u=>u.id===c)).filter(c=>!!c),[s==null?void 0:s.hazelnuts,t]),r=o.length>0,a=v.useMemo(()=>o.length===1?o[0].name:n.formatMessage({defaultMessage:"{count} skills",id:"composer.hazelnuts.pillCount"},{count:o.length}),[n,o]),l=v.useCallback(()=>{pt(e,c=>{c.selectedHazelnuts=[]})},[e]);return{hasSelectedHazelnuts:r,hazelnutPillLabel:a,clearSelectedHazelnuts:l}},vBe=re(me,"5065a3",20,20);function NT(t,{allowOverride:e=!0}={}){const n=nl().session.isStarted();if(e||!n){const s=KX();YX(),oz().then(r=>{ZX.set(r)}),s.session.start(),s.surfaceToStart.start(),QX.set(t);const o=XV();JX.set(o)}}function Hpt(){nl().session.reset()}const SBe=({clientThreadId:t})=>{"use no forget";const e=Pt(t),n=Lp(),s=X(()=>Fn(e).id),{setValue:o}=Cf(Ft.VoiceName),r=mt(),a=Un(t),l=a!=null?a:t;return v.useEffect(()=>{const c=sessionStorage.getItem("selectedVoiceName");if(c&&r){o(c),NT(I3.LoggedOut);try{sessionStorage.removeItem("selectedVoiceName");const u={voice:c,conversation_id:void 0,eventSource:"login_page",voice_mode:"advanced",clientThreadId:XX(),gizmo_id:ve.getGizmoId(At(l)),requested_default_model:s!=null?s:void 0,skipCacheReason:"login-direct-to-voice-mode"};gT({type:"START",args:u})}catch(u){Ve.addError("Failed to start voice mode after voice picker: ".concat(u),{protocol:n})}}},[l,r,s,n,o]),null};function Pz(){"use forget";const t=Ct(We.hasSeenAdvancedVoiceNuxFullPage);return!t.isLoading&&t.eligible}function Rz(){Ut.voiceAdvancedDisclosureShown.success(),v7({showVoiceNuxFullPage:!0})}const Oz=t=>{"use forget";const e=D.c(11),{disabled:n}=t,s=n===void 0?!1:n,o=Pz(),r=te();let a;e[0]!==r?(a=r.formatMessage(CBe.startVoiceMode),e[0]=r,e[1]=a):a=e[1];const l=a,c=Lp();let u;e[2]!==c||e[3]!==o?(u=()=>{V.logEventWithStatsig("Composer Speech Button Clicked","composer_speech_button_clicked",{protocol:c,integratedMode:!0}),o?Rz():(NT(I3.Composer),gT({type:"START"}))},e[2]=c,e[3]=o,e[4]=u):u=e[4];let d,f;e[5]===Symbol.for("react.memo_cache_sentinel")?(d={viewTransitionName:"var(--vt-composer-speech-button)"},f=i.jsx(EV,{className:"h-5 w-5"}),e[5]=d,e[6]=f):(d=e[5],f=e[6]);let m;return e[7]!==s||e[8]!==l||e[9]!==u?(m=i.jsx("div",{className:"relative",children:i.jsx("button",{type:"button",disabled:s,onClick:u,"aria-label":l,className:"composer-submit-button-color text-submit-btn-text flex h-9 w-9 items-center justify-center rounded-full transition-colors hover:opacity-70 focus-visible:outline-black focus-visible:outline-none disabled:text-[#f4f4f4] disabled:opacity-30 dark:focus-visible:outline-white",style:d,children:f})}),e[7]=s,e[8]=l,e[9]=u,e[10]=m):m=e[10],m},CBe=we({startVoiceMode:{id:"integratedux.startVoiceMode",defaultMessage:"Start Voice"}}),wBe=je(()=>Me(()=>import("./ad867923-hs74rs87uvjlgla7.js"),__vite__mapDeps([274,1,275,2,3,276,277,278,279,280,281,282,283,68,26,27,28,33,69,284,285,286])).then(t=>t.SpeechActiveContainer)),kBe=t=>{"use forget";const e=D.c(9),{clientThreadId:n,isFocused:s,onComposerSubmit:o}=t,r=s===void 0?!1:s,a=dl(EBe);let l;e[0]!==n||e[1]!==r||e[2]!==o?(l=i.jsx(wBe,{clientThreadId:n,isFocused:r,onComposerSubmit:o}),e[0]=n,e[1]=r,e[2]=o,e[3]=l):l=e[3];let c;e[4]!==a?(c=!a&&i.jsx(Oz,{}),e[4]=a,e[5]=c):c=e[5];let u;return e[6]!==l||e[7]!==c?(u=i.jsxs(i.Fragment,{children:[l,c]}),e[6]=l,e[7]=c,e[8]=u):u=e[8],u};function EBe(t){return t.isVoiceModeActive}const TBe=t=>{"use forget";const e=D.c(10),{clientThreadId:n,isFocused:s,onComposerSubmit:o,isWebRTCSupported:r}=t;if(!r){let d;return e[0]===Symbol.for("react.memo_cache_sentinel")?(d=i.jsx(Oz,{disabled:!0}),e[0]=d):d=e[0],d}const a=MBe;let l;e[1]!==n?(l=i.jsx(SBe,{clientThreadId:n}),e[1]=n,e[2]=l):l=e[2];let c;e[3]!==n||e[4]!==s||e[5]!==o?(c=i.jsx(kBe,{clientThreadId:n,isFocused:s,onComposerSubmit:o}),e[3]=n,e[4]=s,e[5]=o,e[6]=c):c=e[6];let u;return e[7]!==l||e[8]!==c?(u=i.jsx("div",{onMouseDown:a,onClick:a,children:i.jsxs(NOe,{children:[l,c]})}),e[7]=l,e[8]=c,e[9]=u):u=e[9],u};function MBe(t){t.preventDefault(),t.stopPropagation()}function ABe(t){"use forget";return Ze(t,NBe)}function NBe(t){var e,n,s,o,r,a;return!!(t!=null&&t.interruptionInProgress)&&(!!((n=(e=ve.getCurrentNode(t))==null?void 0:e.message.metadata)!=null&&n.n7jupd_message)||!!((a=(r=(o=(s=ve.getCurrentNode(t))==null?void 0:s.message.metadata)==null?void 0:o.invoked_resource)==null?void 0:r.resource_uri)!=null&&a.includes("connector_openai_shopping")))}const Lz=t=>t.messages.some(e=>{var n;return(n=e.metadata)==null?void 0:n.chime_version}),$pt=t=>{var e;return t.role===dt.Assistant&&Lz(t)&&!((e=t.messages.at(-1))!=null&&e.end_turn)},IBe=t=>{var e;return t.role===dt.Assistant&&Lz(t)&&((e=t.messages.at(-1))==null?void 0:e.channel)!=="final"},jBe="2461452859";function Dz(){return xe(jBe)}const PBe=je(()=>Me(()=>import("./7ae37b3b-fkf1t59mw0nfvuag.js"),__vite__mapDeps([287,1,281,277,2,3,275,276,278,279,280,282,283,68,26,27,28,33,69,288,286])).then(t=>t.VoiceModeLayout)),RBe=je(()=>Me(()=>import("./1f1b50d3-es7wb8g1s10a9dx0.js"),__vite__mapDeps([289,1,2,3,290])).then(t=>t.VoiceConversationRating));function OBe(){return Lp()==="transceiver"}function IT(){const t=OBe(),e=oT(),n=Dz();return!e||Ap()&&!n?!1:S7()?t:!0}function Gpt(t){return IT()?i.jsx(PBe,N({},t)):null}function LBe(t){return IT()?i.jsx(RBe,N({},t)):null}const DBe="/cdn/assets/pcm-player-processor-Bnki682T.js";var Xr,ea,np,id,gr,$l,Bz;class e6 extends eee.EventEmitter{constructor({sampleRate:n=24e3,channels:s=1}={}){super();zr(this,gr);zr(this,Xr);zr(this,ea,null);zr(this,np);zr(this,id);Si(this,Xr,new AudioContext({sampleRate:n,latencyHint:"playback"})),Si(this,np,s),Si(this,ea,null),Si(this,id,!1)}async preload(){return await Ci(this,gr,$l).call(this),this}async stream(n){const s=await Ci(this,gr,$l).call(this);let o=0,r=await n.read();for(;!r.done;)this.emit("ready"),s.port.postMessage({type:"push",payload:{chunk:r.value}}),o+=r.value.byteLength,r=await n.read();Si(this,id,!0),o===0&&this.emit("error")}async play(){Xn(this,Xr).state==="suspended"&&await Xn(this,Xr).resume(),(await Ci(this,gr,$l).call(this)).port.postMessage({type:"play"})}async pause(){(await Ci(this,gr,$l).call(this)).port.postMessage({type:"pause"})}async seek(n){(await Ci(this,gr,$l).call(this)).port.postMessage({type:"seek",payload:{seconds:n}})}async reset(){(await Ci(this,gr,$l).call(this)).port.postMessage({type:"reset"})}destroy(){this.removeAllListeners(),Xn(this,ea)&&(Xn(this,ea).disconnect(),Si(this,ea,null)),Xn(this,Xr).close()}}Xr=new WeakMap,ea=new WeakMap,np=new WeakMap,id=new WeakMap,gr=new WeakSet,$l=async function(){if(Xn(this,ea))return Xn(this,ea);await Xn(this,Xr).audioWorklet.addModule(DBe);const n=new AudioWorkletNode(Xn(this,Xr),"pcm-player");return n.connect(Xn(this,Xr).destination),n.port.postMessage({type:"init",payload:{channels:Xn(this,np)}}),n.port.onmessage=Ci(this,gr,Bz).bind(this),Si(this,ea,n),n},Bz=function(n){switch(n.data.type){case"timeupdate":{this.emit("timeupdate",{seconds:n.data.payload.seconds,totalSeconds:n.data.payload.totalSeconds}),Xn(this,id)&&n.data.payload.seconds>=n.data.payload.totalSeconds&&this.emit("ended");break}}};const A0=Symbol("both-are-bad"),BBe=({serverThreadId:t})=>OR(ls((e,n)=>{const s=(o,r)=>e(a=>{const l=a.paragens.find(c=>c.id===o);l&&r(l)});return{serverThreadId:t,paragens:[],playingId:null,selectedId:null,shouldShowAudioParagenPrompt:!1,shouldShowThankYouTooltip:!1,actions:{createAudioParagen:async o=>{var y,S,C;const{serverThreadId:r}=n();if(!r){const w=new Error("thread id is not set");throw Ve.addError(w),w}const a=fa(),l=fa();e(w=>{w.paragens[0]={id:a},w.paragens[1]={id:l}});const{forceParagen:c,forceParagenModel:u}=dp(),[d,f,m]=await Promise.all([ue.safePost("/generate_audio_paragen",{requestBody:N({conversation_id:r,message_id:o,paragen_ids:[a,l]},c?{force_paragen:!0,force_paragen_model_slug:u.value}:{}),skipJsonTransform:!0}),new e6().preload(),new e6().preload()]),p=(y=d.body)==null?void 0:y.getReader();if(!d.ok||!p){for(const w of[a,l])s(w,k=>{k.error=new Error("Failed to create audio paragen: ".concat(d.statusText))});return}const g={},h=w=>new ReadableStream({start(k){g[w]=k}}),_=(w,k)=>{w.on("ready",()=>s(k,E=>{E.player=w})).on("error",()=>s(k,E=>{E.error=!0}))};_(f,a),_(m,l),f.stream(h(a).getReader()),m.stream(h(l).getReader());const x=new TextDecoder;let b="";for(;;){const{value:w,done:k}=await p.read();if(k)break;b+=x.decode(w,{stream:!0});let E=b.indexOf("\n");for(;E!==-1;){const T=b.slice(0,E).trim();if(b=b.slice(E+1),T)try{const M=JSON.parse(T),A=M.paragen_id;if(M.chunk){const I=Uint8Array.from(atob(M.chunk),j=>j.charCodeAt(0));(S=g[A])==null||S.enqueue(I)}M.done&&((C=g[A])==null||C.close())}catch(M){}E=b.indexOf("\n")}}},playParagen:o=>{V.logEventWithStatsig("Audio Paragen: Play","chatgpt_audio_paragen_play",{paragen_id:o}),e(r=>{r.playingId=o})},pauseParagen:(o,r=!1)=>{r&&V.logEventWithStatsig("Audio Paragen: Pause","chatgpt_audio_paragen_pause",{paragen_id:o}),e(a=>{a.playingId===o&&(a.playingId=null)})},selectParagen:o=>{V.logEventWithStatsig("Audio Paragen: Select Option","chatgpt_audio_paragen_select_option",{paragen_id:o}),e(r=>{r.playingId=null,r.selectedId=o})},submitParagenResults:async(o,r,a)=>{const{paragens:l,selectedId:c,serverThreadId:u}=n();if(!u){const f=new Error("thread id is not set");throw Ve.addError(f),f}V.logEventWithStatsig("Audio Paragen: Submit Results","chatgpt_audio_paragen_submit_results");const d=await ue.safePost("/paragen_audio_submission",{requestBody:{conversation_id:u,user_prompt_message_id:o,displayed_paragen_ids:l.map(f=>f.id),selected_paragen_id:c===A0?null:c,reviews:r,stream_type:"stream",freeform_feedback:a},skipJsonTransform:!0});if(!d.ok){const f=new Error("Failed to create audio paragen: ".concat(d.statusText));throw Ve.addError(f,{conversationId:u,messageId:o}),f}},setShouldShowThankYouTooltip:o=>{e(r=>{r.shouldShowThankYouTooltip=o})},resetStore:()=>{e(o=>{var r;for(const a of o.paragens)(r=a.player)==null||r.destroy();o.paragens=[],o.playingId=null,o.selectedId=null})}}}}),Ji),Ix=v.createContext(null);Ix.displayName="AudioParagenStore";function FBe(){const t=v.useContext(Ix);if(!t)throw new Error("useAudioParagenState must be used within a AudioParagenStoreProvider");return t}function UBe(t,e){const n=v.useContext(Ix);if(n)return n(t,e)}function Nd(t,e){const n=FBe(),s=tee(n,t,e);if(s===n.getState())throw new Error("Selector cannot return the entire state. Please select a specific part of the state.");return s}function jx(){return Nd(t=>t.actions)}function Vpt(t,e){const{createAudioParagen:n,resetStore:s}=jx(),{paragens:o}=Nd(r=>({paragens:r.paragens}));return v.useEffect(()=>{if(!(!e||!t))return n(t),()=>{s()}},[n,e,t,s]),o.every(r=>r.player&&!r.error)}function zpt({children:t,serverThreadId:e}){const n=v.useRef(null);return n.current==null&&(n.current=BBe({serverThreadId:e})),v.useEffect(()=>{const s=n.current;s&&!s.getState().serverThreadId&&e&&s.setState(o=>{o.serverThreadId=e})},[e]),i.jsx(Ix.Provider,{value:n.current,children:t})}const Fz=new Set;function Wpt(t){return t?Fz.has(t):!1}function HBe(t){Fz.add(t)}const $Be=1e3,GBe=t=>{"use forget";const e=D.c(8),{children:n}=t,s=v.useRef(!0),o=v.useRef(void 0),r=dl(VBe),a=$c(),l=r||a;let c;e[0]!==l?(c=()=>{!l&&s.current&&(s.current=!1,eC.prewarmRealtimeVoice())},e[0]=l,e[1]=c):c=e[1];const u=c;let d;e[2]===Symbol.for("react.memo_cache_sentinel")?(d=()=>{o.current||(o.current=window.setTimeout(()=>{s.current=!0,o.current=void 0},$Be))},e[2]=d):d=e[2];const f=d;let m,p;e[3]===Symbol.for("react.memo_cache_sentinel")?(m=()=>()=>{window.clearTimeout(o.current)},p=[],e[3]=m,e[4]=p):(m=e[3],p=e[4]),v.useEffect(m,p);let g;return e[5]!==n||e[6]!==u?(g=i.jsx("div",{onMouseEnter:u,onMouseLeave:f,children:n}),e[5]=n,e[6]=u,e[7]=g):g=e[7],g};function VBe(t){return t.isVoiceModeActive}const zBe=je(()=>Me(()=>import("./ba21b03a-jtweffof6rs3f582.js").then(t=>t.a),__vite__mapDeps([291,1,2,3,292,288,276,277,286])).then(t=>t.AdvancedVoiceWebNuxFullPage)),WBe=je(()=>Me(()=>import("./ffa880af-cge8ei4b2o19wp22.js"),__vite__mapDeps([293,1,2,3,282,291,292,288,276,277,286])).then(t=>t.VoiceModals)),t6=t=>{"use forget";const e=D.c(25),{disableTooltip:n,children:s,isWebRTCSupported:o,clientThreadId:r,type:a}=t,l=n===void 0?!1:n,c=UBe(KBe),u=te(),d=Lp(),f=gd(YBe);if(c){let y;e[0]!==s?(y=i.jsx(qBe,{children:s}),e[0]=s,e[1]=y):y=e[1];let S;return e[2]!==o||e[3]!==y?(S=i.jsx(n6,{isWebRTCSupported:o,children:y}),e[2]=o,e[3]=y,e[4]=S):S=e[4],S}const m=l?!1:void 0;let p;e[5]!==u||e[6]!==o?(p=o?u.formatMessage(N0.defaultTooltipLabel):u.formatMessage(N0.webRTCNotSupportedLabel),e[5]=u,e[6]=o,e[7]=p):p=e[7];let g;e[8]!==d?(g=y=>{y&&(V.logEvent("Composer Speech Button Hovered",{protocol:d}),Ut.composerSpeechButton.hover())},e[8]=d,e[9]=g):g=e[9];let h;e[10]!==s||e[11]!==m||e[12]!==p||e[13]!==g?(h=i.jsx(St,{open:m,label:p,side:"bottom",onOpenChange:g,children:s}),e[10]=s,e[11]=m,e[12]=p,e[13]=g,e[14]=h):h=e[14];let _;e[15]!==o||e[16]!==h?(_=i.jsx(n6,{isWebRTCSupported:o,children:h}),e[15]=o,e[16]=h,e[17]=_):_=e[17];let x;e[18]!==r||e[19]!==f||e[20]!==a?(x=a==="integrated"&&f?i.jsx(zBe,{conversationId:r}):i.jsx(WBe,{clientThreadId:r}),e[18]=r,e[19]=f,e[20]=a,e[21]=x):x=e[21];let b;return e[22]!==_||e[23]!==x?(b=i.jsxs(i.Fragment,{children:[_,x]}),e[22]=_,e[23]=x,e[24]=b):b=e[24],b};function n6(t){"use forget";const e=D.c(3),{children:n,isWebRTCSupported:s}=t;let o;return e[0]!==n||e[1]!==s?(o=s?i.jsx(GBe,{children:n}):n,e[0]=n,e[1]=s,e[2]=o):o=e[2],o}function qBe(t){"use forget";const e=D.c(7),{children:n}=t,{setShouldShowThankYouTooltip:s}=jx();let o,r;e[0]!==s?(o=()=>{const u=setTimeout(()=>{s(!1)},5e3);return()=>clearTimeout(u)},r=[s],e[0]=s,e[1]=o,e[2]=r):(o=e[1],r=e[2]),v.useEffect(o,r);let a,l;e[3]===Symbol.for("react.memo_cache_sentinel")?(a=i.jsx(P,N({},N0.audioParagenThankYouLabelHeader)),l=i.jsx(P,N({},N0.audioParagenThankYouLabelSubheader)),e[3]=a,e[4]=l):(a=e[3],l=e[4]);let c;return e[5]!==n?(c=i.jsx(St,{open:!0,label:a,secondaryLabel:l,side:"top",withArrow:!0,children:n}),e[5]=n,e[6]=c):c=e[6],c}const N0=we({audioParagenThankYouLabelHeader:{id:"ComposerSpeechButton.audioParagenThankYouLabelHeader",defaultMessage:"Thank you for your feedback!"},audioParagenThankYouLabelSubheader:{id:"ComposerSpeechButton.audioParagenThankYouLabelSubheader",defaultMessage:"Continue chatting with Voice"},defaultTooltipLabel:{id:"ComposerSpeechButton.defaultTooltipLabel",defaultMessage:"Use Voice"},webRTCNotSupportedLabel:{id:"ComposerSpeechButton.webRTCNotSupportedLabel",defaultMessage:"Voice unsupported"}});function KBe(t){return t.shouldShowThankYouTooltip}function YBe(t){return t.showVoiceNuxFullPage}function ZBe(t,e,n){return q("relative flex h-9 items-center justify-center rounded-full",t?"min-w-8 p-2":e?"w-7":"w-9",e&&"h-7!",n?"btn-primary border border-transparent disabled:cursor-not-allowed disabled:opacity-50":"composer-secondary-button-color hover:opacity-80 disabled:text-gray-50 disabled:opacity-30")}function QBe(){"use forget";const t=D.c(4),e=te();let n;t[0]!==e?(n=e.formatMessage({id:"composerSpeechUpsell.voiceLabel",defaultMessage:"Voice"}),t[0]=e,t[1]=n):n=t[1];let s;return t[2]!==n?(s=i.jsx("span",{className:"ps-1 pe-1 text-[13px] font-semibold whitespace-nowrap [[data-collapse-labels]_&]:sr-only",children:n}),t[2]=n,t[3]=s):s=t[3],s}const JBe=()=>{"use forget";const t=D.c(5),e=wg();let n;t[0]===Symbol.for("react.memo_cache_sentinel")?(n=mt(),t[0]=n):n=t[0];const s=!n,o=Pz(),r=Lp();let a;return t[1]!==r||t[2]!==o||t[3]!==e?(a=()=>{if(V.logEventWithStatsig("Composer Speech Button Clicked","composer_speech_button_clicked",{protocol:r}),s){Ut.voiceSelectionShown.click(s?{isUnauthenticated:!0,eventSource:"composerSpeechButton"}:{}),v7({showVoicePicker:!0});return}if(o)return Rz();NT(I3.Composer),e.setState(eFe)},t[1]=r,t[2]=o,t[3]=e,t[4]=a):a=t[4],a},XBe=t=>{"use forget";const e=D.c(19),{isSmall:n,isWebRTCSupported:s}=t,o=n===void 0?!1:n,r=te();let a;e[0]!==r?(a=r.formatMessage({id:"0S1Tfr",defaultMessage:"Start Voice"}),e[0]=r,e[1]=a):a=e[1];const l=a,c=dl(tFe),{loggedOutVoiceLabel:u,voiceButtonUsesPrimaryStyle:d}=X(nFe),{getUpsellLabelType:f}=gz();let m;e[2]!==f||e[3]!==u?(m=mt()?f()==="all":u,e[2]=f,e[3]=u,e[4]=m):m=e[4];const p=m,g=JBe(),h=!s||c;let _;e[5]!==o||e[6]!==p||e[7]!==d?(_=ZBe(p,o,d),e[5]=o,e[6]=p,e[7]=d,e[8]=_):_=e[8];let x;e[9]===Symbol.for("react.memo_cache_sentinel")?(x={viewTransitionName:"var(--vt-composer-speech-button)"},e[9]=x):x=e[9];let b;e[10]===Symbol.for("react.memo_cache_sentinel")?(b=i.jsx("div",{className:"flex items-center justify-center",children:i.jsx(OH,{className:"icon"})}),e[10]=b):b=e[10];let y;e[11]!==p?(y=p&&i.jsx(QBe,{}),e[11]=p,e[12]=y):y=e[12];let S;return e[13]!==g||e[14]!==l||e[15]!==h||e[16]!==_||e[17]!==y?(S=i.jsxs("button",{"data-testid":"composer-speech-button",onClick:g,"aria-label":l,disabled:h,className:_,style:x,children:[b,y]}),e[13]=g,e[14]=l,e[15]=h,e[16]=_,e[17]=y,e[18]=S):S=e[18],S};function eFe(t){t.isVoiceModeActive=!0}function tFe(t){return t.isVoiceModeActive}function nFe(){return Pp()}function sFe(){return typeof RTCPeerConnection<"u"&&typeof RTCPeerConnection.generateCertificate=="function"}function oFe(t){"use forget";var $,F;const e=D.c(4),n=!mt(),o=w7(aFe).length>0;let r;e[0]!==t.composerController?(r=()=>!Bm(t.composerController),e[0]=t.composerController,e[1]=r):r=e[1];const a=X(r),l=!o&&!a,{browseMode:c}=gd(),u=Dd(),d=Ap()&&!u,f=Dz(),m=Hs(),p=xe("2360528850"),g=m&&!p,h=$c(),_=t.disableAdvancedVoiceMode?!1:h,x=xe("3728856343"),b=Et(),y=fl(),S=hs(),C=see(),w=X(ln),{isSingleLine:k}=X(rFe),{getShowVoiceUpsell:E}=gz(),T=Un(t.clientThreadId),M=j3(T),A=Ze(t.clientThreadId,ve.getSteeringAsyncTaskId);let I;e[2]!==A?(I=z=>A?z.tasks[A]:null,e[2]=A,e[3]=I):I=e[3];const j=Zo(I),R=(($=j==null?void 0:j.taskId)==null?void 0:$.startsWith("promode"))&&hp(j),O=xe("2036503533"),L=L0(),B=C_(L,"images-app");if(_)return"speech";if(t.inputState==="disabled"&&t.disableReason!=="pimBlock")return"disabled";const U=b!=null&&(!S||C)&&((F=y==null?void 0:y.includes(Qs.AllowVoiceUse))!=null?F:!1);return(!n&&U||n&&(x||E()))&&l&&(t.state==="disabled"||t.state==="streaming"&&M.length>0&&!(R&&O))&&t.clientThreadId&&c!=="gizmo-editor"&&(!d||f)&&!g&&!B?"speech":w&&k&&l&&t.state!=="streaming"?C&&!g&&t.clientThreadId?"speech":"disabled":"submit"}function rFe(){return Pp()}function aFe(t){return t.files}function qpt(t){"use forget";const e=D.c(24),n=nee(),s=$c(),o=ABe(t.clientThreadId),r=oFe(t),a=IT();let l;e[0]!==t.composerController?(l=()=>T3(t.composerController),e[0]=t.composerController,e[1]=l):l=e[1];const c=X(l),u=C7()?sFe():!0,d=t.disableAdvancedVoiceMode?!1:n,f=t.disableAdvancedVoiceMode?!1:s;if(r==="disabled"&&!o)return null;const m=t.state==="disabled",p=t.state==="streaming";let g;e[2]!==t.clientThreadId||e[3]!==t.composerController||e[4]!==t.disableReason||e[5]!==t.excessFileCount||e[6]!==t.forceStopButton||e[7]!==t.isSmall||e[8]!==t.onSubmit||e[9]!==t.remainingFileUploads||e[10]!==t.useStartButtonText||e[11]!==o||e[12]!==m||e[13]!==p?(g=i.jsx(iFe,{isSmall:t.isSmall,isDisabled:m,isStreaming:p,showSpinner:o,onSubmit:t.onSubmit,disableReason:t.disableReason,useStartButtonText:t.useStartButtonText,composerController:t.composerController,clientThreadId:t.clientThreadId,forceStopButton:t.forceStopButton,excessFileCount:t.excessFileCount,remainingFileUploads:t.remainingFileUploads}),e[2]=t.clientThreadId,e[3]=t.composerController,e[4]=t.disableReason,e[5]=t.excessFileCount,e[6]=t.forceStopButton,e[7]=t.isSmall,e[8]=t.onSubmit,e[9]=t.remainingFileUploads,e[10]=t.useStartButtonText,e[11]=o,e[12]=m,e[13]=p,e[14]=g):g=e[14];const h=g,_=r==="speech"&&a;if(t.clientThreadId&&(f||_&&!0)){const b=!!(f||t.disableTooltip);let y;return e[15]!==d||e[16]!==b||e[17]!==c||e[18]!==u||e[19]!==t.clientThreadId||e[20]!==t.disableTooltip||e[21]!==t.isSmall||e[22]!==t.onSubmit?(y=d?i.jsx(t6,{disableTooltip:b,isWebRTCSupported:u,clientThreadId:t.clientThreadId,type:"integrated",children:i.jsx(TBe,{clientThreadId:t.clientThreadId,isFocused:c,onComposerSubmit:t.onSubmit,isWebRTCSupported:u})}):i.jsx("div",{className:t.isSmall?"min-w-7":"min-w-9","data-testid":"composer-speech-button-container",children:i.jsx(t6,{disableTooltip:t.disableTooltip,isWebRTCSupported:u,clientThreadId:t.clientThreadId,type:"separate",children:i.jsx(XBe,{isSmall:t.isSmall,isWebRTCSupported:u})})}),e[15]=d,e[16]=b,e[17]=c,e[18]=u,e[19]=t.clientThreadId,e[20]=t.disableTooltip,e[21]=t.isSmall,e[22]=t.onSubmit,e[23]=y):y=e[23],y}return h}function iFe(t){"use forget";var ie,fe;const e=D.c(42),{onSubmit:n,isStreaming:s,isDisabled:o,showSpinner:r,disableReason:a,useStartButtonText:l,composerController:c,isSmall:u,clientThreadId:d,forceStopButton:f,excessFileCount:m,remainingFileUploads:p}=t;let g;e[0]!==c?(g=()=>Bm(c),e[0]=c,e[1]=g):g=e[1];const h=X(g),_=$ge(d),x=Un(d),b=j3(x),y=Ze(d,ve.getSteeringAsyncTaskId);let S;e[2]!==y?(S=ae=>y?ae.tasks[y]:null,e[2]=y,e[3]=S):S=e[3];const C=Zo(S);let w;e[4]!==C?(w=((ie=C==null?void 0:C.taskId)==null?void 0:ie.startsWith("promode"))&&hp(C),e[4]=C,e[5]=w):w=e[5];const k=w;let E;e[6]===Symbol.for("react.memo_cache_sentinel")?(E=xe("2036503533"),e[6]=E):E=e[6];const T=E,M=Ze(d,cFe);let A;e[7]!==b.length||e[8]!==f||e[9]!==h||e[10]!==_||e[11]!==k||e[12]!==s||e[13]!==M?(A=(b.length===0||k&&T)&&s&&(!_||h||f)&&(h||!M||!IBe(M)),e[7]=b.length,e[8]=f,e[9]=h,e[10]=_,e[11]=k,e[12]=s,e[13]=M,e[14]=A):A=e[14];const I=A,R=X(lFe).sendButtonUsesPaperplaneIcon?vBe:AH,O=r?Us:I?yE:R,L=te(),B=BH(),U=o||r;let H;e[15]!==L||e[16]!==I?(H=I?L.formatMessage(Kr.stopStreamingLabel):L.formatMessage(Kr.sendPromptLabel),e[15]=L,e[16]=I,e[17]=H):H=e[17];const $=I?"stop-button":"send-button",F=I?"composer-secondary-button-color":"composer-submit-button-color",z=u?"h-7":"h-9",W=l&&!I?"w-fit px-3":u?"w-7":"w-9";let Y;e[18]!==z||e[19]!==W||e[20]!==F?(Y=q("composer-submit-btn",F,z,W),e[18]=z,e[19]=W,e[20]=F,e[21]=Y):Y=e[21];let K;e[22]!==O||e[23]!==I||e[24]!==l?(K=l&&!I?i.jsx("p",{className:"text-md font-medium",children:i.jsx(P,{id:"q2Rxh8",defaultMessage:"Start"})}):i.jsx(O,{className:"icon"}),e[22]=O,e[23]=I,e[24]=l,e[25]=K):K=e[25];let Z;e[26]!==n||e[27]!==Y||e[28]!==K||e[29]!==U||e[30]!==H||e[31]!==$?(Z=i.jsx("button",{onClick:n,disabled:U,id:"composer-submit-button","aria-label":H,"data-testid":$,className:Y,children:K}),e[26]=n,e[27]=Y,e[28]=K,e[29]=U,e[30]=H,e[31]=$,e[32]=Z):Z=e[32];const J=Z;let Q;if(e[33]!==B||e[34]!==a||e[35]!==m||e[36]!==L||e[37]!==p){e:{if(!a){Q=void 0;break e}const ae=a==="file_upload_pending"?L.formatMessage(Kr.fileUploadPendingLabel):a==="rate_limit_hard_block"?L.formatMessage(Kr.rateLimitHardBlockLabel):a==="exceeds_remaining_file_uploads"?p===0?L.formatMessage(Kr.exceedsRemainingUploadsLabelNone):p===1?L.formatMessage(Kr.exceedsRemainingUploadsLabelSingle,{excessFileCount:m!=null?m:0}):L.formatMessage(Kr.exceedsRemainingUploadsLabelPlural,{excessFileCount:m!=null?m:0,remainingFileUploads:p!=null?p:0}):a==="empty_text_content"?L.formatMessage(Kr.emptyTextContentLabel):a==="async_task_pending"?L.formatMessage(Kr.asyncTaskInProgressLabel):a==="no_source_selected_dr"?B.caterpillarNoneSelectedMessage:a==="text_content_too_long"?L.formatMessage(Kr.textContentTooLongLabel):void 0;if(ae){Q=ae;break e}const le=(fe=Wde(a))==null?void 0:fe.placeholder;if(le){Q=L.formatMessage(le);break e}Q=void 0}e[33]=B,e[34]=a,e[35]=m,e[36]=L,e[37]=p,e[38]=Q}else Q=e[38];const ne=Q;if(a&&o){let ae;return e[39]!==J||e[40]!==ne?(ae=ne?i.jsx(St,{sideOffset:14,label:ne,side:"bottom",children:J}):J,e[39]=J,e[40]=ne,e[41]=ae):ae=e[41],ae}return J}function lFe(){return Pp()}function cFe(t){return ve.getConversationLastTurn(t)}const Kr=we({stopStreamingLabel:{id:"+yfm/p",defaultMessage:"Stop streaming"},sendPromptLabel:{id:"xfIykB",defaultMessage:"Send prompt"},emptyTextContentLabel:{id:"LCVL2q",defaultMessage:"Message is empty"},textContentTooLongLabel:{id:"kDrqDJ",defaultMessage:"Message is too long"},fileUploadPendingLabel:{id:"Qv7jQN",defaultMessage:"File upload pending"},exceedsRemainingUploadsLabelPlural:{id:"DNR9+U",defaultMessage:"You can send up to {remainingFileUploads} files. Remove {excessFileCount} to continue."},exceedsRemainingUploadsLabelSingle:{id:"4xXbQa",defaultMessage:"You can send up to 1 file. Remove {excessFileCount} to continue."},exceedsRemainingUploadsLabelNone:{id:"NDddsV",defaultMessage:"You've reached your upload limit. Remove all files to continue."},rateLimitHardBlockLabel:{id:"YhP4bh",defaultMessage:"Messages limit reached"},asyncTaskInProgressLabel:{id:"a959Km",defaultMessage:"Disabled"},bigBoxSubmitShortcutWindows:{id:"v8kTwt",defaultMessage:"Ctrl + Enter to send"},bigBoxSubmitShortcutMac:{id:"DC5el0",defaultMessage:" Enter to send"}}),uFe=re(me,"5bb75d",20,20),dFe=({textdocId:t,userCreatedTextdoc:e,isCanvasOpen:n=!1,isFocused:s=!1})=>i.jsxs("div",{className:"group/file-tile relative",children:[i.jsx("button",{onClick:()=>{bH.removeTempTextdoc(t),Qw()},className:"dark:border-token-main-surface-secondary absolute -start-1 -top-1 z-10 hidden rounded-full border-[3px] border-[#f4f4f4] bg-black p-[2px] text-white group-hover/file-tile:block dark:bg-white dark:text-black",children:i.jsx(ms,{className:"icon-xs"})}),i.jsx(hve,{textdocId:t,clientThreadId:void 0,name:e.title,tag:e.type,icon:i.jsx(uFe,{className:"icon"}),size:"small",isCanvasOpen:n,isFocused:s,isInlinePreview:!0,isInferring:e.status===Po.INFERRING,onClick:()=>al(t),children:i.jsx("div",{className:q("px-4 whitespace-pre",s0(e.type)&&"font-mono"),children:e.content})})]}),fFe=({textdocId:t,userCreatedTextdoc:e})=>{const n=Xw(t),s=Qp();return i.jsx(dFe,{textdocId:t,userCreatedTextdoc:e,isFocused:n,isCanvasOpen:s})};function mFe({selectedApp:t}){const e=te(),n=we({removeItem:{id:"WorkWithAppsTile.removeItem",defaultMessage:"Remove"}});return i.jsxs("div",{className:"group border-token-border-default bg-token-main-surface-primary text-token-text-primary relative inline-block rounded-xl border p-2 text-sm",children:[i.jsxs("div",{className:"grid h-full grid-cols-[auto_1fr] items-center gap-2",children:[i.jsx("div",{className:"icon relative overflow-hidden",children:i.jsx(gFe,{app:t,className:"h-full w-full"})}),i.jsx("div",{className:"truncate font-semibold",children:hFe(t.name)})]}),i.jsx("button",{className:"dark:border-token-main-surface-secondary absolute end-1 top-1 translate-x-1/2 -translate-y-1/2 rounded-full border-[3px] border-[#f4f4f4] bg-black p-[2px] text-white transition-colors dark:bg-white dark:text-black",children:i.jsx(St,{label:e.formatMessage(n.removeItem),side:"top",children:i.jsx(ms,{className:"icon-xs"})})})]})}const pFe=i.jsx("span",{className:"pe-2 text-2xl",children:i.jsx(P,{id:"WorkWithAppsTile.defaultIcon",defaultMessage:""})});function gFe({app:t,className:e}){const[n,s]=v.useState(null);return v.useEffect(()=>{if(!t||!t.icon){s(null);return}const o=new Blob([h0(t.icon.data)],{type:t.icon.mimeType}),r=URL.createObjectURL(o);return s(r),()=>{URL.revokeObjectURL(r)}},[t]),n?i.jsx("img",{src:n,alt:"",className:e}):pFe}function hFe(t){if(!t)return"";if(t.length<=32)return t;const n=t.substring(0,20),s=t.substring(t.length-9);return"".concat(n,"...").concat(s)}function _Fe(t){if(t.length!==1)return!1;const{file:e,fileId:n}=t[0],s=ri(e)&&!!(e!=null&&e.type)&&e.type.startsWith("image/"),o=n!=null&&!!e&&kp(e.name);return s||o}function Kpt(t){"use forget";const e=D.c(38),{files:n,selectedApps:s,className:o,activeSystemHintType:r,disableEditButton:a,forceSmallView:l}=t;let c;e[0]!==s?(c=s===void 0?[]:s,e[0]=s,e[1]=c):c=e[1];const u=c,d=a===void 0?!1:a,f=l===void 0?!1:l,m=Ko(),p=nf(),g=cS.useStore(),{updateSystemHint:h}=Cl(),_=mo(),x=X(ln),b=L0();let y;e[2]!==b?(y=C_(b,"images-app"),e[2]=b,e[3]=y):y=e[3];const S=y;let C;e[4]!==n?(C=_Fe(n),e[4]=n,e[5]=C):C=e[5];const w=C,k=!d&&w&&r!==Ke.PictureV2,E=dke();let T;e[6]!==E?(T=E.map(yFe),e[6]=E,e[7]=T):T=e[7];let M;e[8]!==u?(M=u.map(xFe),e[8]=u,e[9]=M):M=e[9];let A;if(e[10]!==_||e[11]!==n||e[12]!==f||e[13]!==x||e[14]!==S||e[15]!==m||e[16]!==g||e[17]!==k||e[18]!==w||e[19]!==p||e[20]!==h){let j;e[22]!==_||e[23]!==f||e[24]!==x||e[25]!==S||e[26]!==m||e[27]!==g||e[28]!==k||e[29]!==w||e[30]!==p||e[31]!==h?(j=R=>{var O;return i.jsx(QU,{borderRadius:"2xl",filepickerStore:p,width:m?"normal":"wide",disableEditButton:S,onRemoveFileClick:()=>{Sr.remove(p,R.tempId,"none"),g.removeFile(R.tempId)},isBigPaste:R.isBigPaste,mode:R.mode,useLargeImageThumbnailStyle:w&&!x&&!f,onImageEditClick:k?()=>{_&&h(Ke.PictureV2,{clientThreadId:_.id})}:void 0,file:R.file,fileId:(O=R.fileId)!=null?O:void 0,tempId:R.tempId,contextConnectorInfo:R.contextConnectorInfo,loadingPercentage:R.status===oee.Uploading?R.progress:void 0},R.tempId)},e[22]=_,e[23]=f,e[24]=x,e[25]=S,e[26]=m,e[27]=g,e[28]=k,e[29]=w,e[30]=p,e[31]=h,e[32]=j):j=e[32],A=n.map(j),e[10]=_,e[11]=n,e[12]=f,e[13]=x,e[14]=S,e[15]=m,e[16]=g,e[17]=k,e[18]=w,e[19]=p,e[20]=h,e[21]=A}else A=e[21];let I;return e[33]!==o||e[34]!==T||e[35]!==M||e[36]!==A?(I=i.jsxs("div",{className:o,children:[T,M,A]}),e[33]=o,e[34]=T,e[35]=M,e[36]=A,e[37]=I):I=e[37],I}function xFe(t){return i.jsx(mFe,{selectedApp:t},t.id)}function yFe(t){return i.jsx(fFe,{textdocId:t.tempTextdocId,userCreatedTextdoc:t},t.tempTextdocId)}const Ypt=t=>{"use forget";const e=D.c(4),{replyRegions:n}=t;let s;e[0]!==n?(s=n.map(kFe),e[0]=n,e[1]=s):s=e[1];let o;return e[2]!==s?(o=i.jsx("div",{className:"divide-token-border-default bg-token-main-surface-primary mx-1 mt-1 flex cursor-auto flex-col divide-y overflow-hidden rounded-t-[24px] rounded-b-lg",children:s}),e[2]=s,e[3]=o):o=e[3],o};function bFe(t){"use forget";const e=D.c(9),{value:n,hideQuotes:s,onRemoveRegion:o,onLabelClick:r}=t;let a;e[0]===Symbol.for("react.memo_cache_sentinel")?(a=i.jsx(OT,{children:i.jsx(Rr,{className:"icon"})}),e[0]=a):a=e[0];const l=s?n:"".concat(n,"");let c;e[1]!==r||e[2]!==l?(c=i.jsx(PT,{onLabelClick:r,children:l}),e[1]=r,e[2]=l,e[3]=c):c=e[3];let u;e[4]!==o?(u=o&&i.jsx(jT,{onClick:o}),e[4]=o,e[5]=u):u=e[5];let d;return e[6]!==c||e[7]!==u?(d=i.jsxs(RT,{className:"text-token-text-secondary",children:[a,c,u]}),e[6]=c,e[7]=u,e[8]=d):d=e[8],d}function vFe(t){"use forget";const e=D.c(9),{value:n,onRemoveRegion:s,onLabelClick:o}=t;let r;e[0]===Symbol.for("react.memo_cache_sentinel")?(r=i.jsx(OT,{children:i.jsx(Rr,{className:"icon"})}),e[0]=r):r=e[0];let a;e[1]!==o||e[2]!==n?(a=i.jsx(PT,{className:"font-semibold",onLabelClick:o,children:n}),e[1]=o,e[2]=n,e[3]=a):a=e[3];let l;e[4]!==s?(l=i.jsx(jT,{onClick:s}),e[4]=s,e[5]=l):l=e[5];let c;return e[6]!==a||e[7]!==l?(c=i.jsxs(RT,{className:"text-blue-400",children:[r,a,l]}),e[6]=a,e[7]=l,e[8]=c):c=e[8],c}function SFe(t){"use forget";const e=D.c(11),{value:n,icon:s,onRemoveRegion:o,onLabelClick:r}=t;let a;e[0]!==s?(a=i.jsx(OT,{className:"mt-0",children:s}),e[0]=s,e[1]=a):a=e[1];let l;e[2]!==r||e[3]!==n?(l=i.jsx(PT,{className:"text-token-text-primary font-semibold",onLabelClick:r,children:n}),e[2]=r,e[3]=n,e[4]=l):l=e[4];let c;e[5]!==o?(c=i.jsx(jT,{onClick:o}),e[5]=o,e[6]=c):c=e[6];let u;return e[7]!==a||e[8]!==l||e[9]!==c?(u=i.jsxs(RT,{children:[a,l,c]}),e[7]=a,e[8]=l,e[9]=c,e[10]=u):u=e[10],u}function jT(t){"use forget";const e=D.c(6),{onClick:n}=t,s=te();let o;e[0]!==s?(o=s.formatMessage({id:"PlVqJ1",defaultMessage:"Remove"}),e[0]=s,e[1]=o):o=e[1];let r;e[2]===Symbol.for("react.memo_cache_sentinel")?(r=i.jsx(ms,{className:"icon"}),e[2]=r):r=e[2];let a;return e[3]!==n||e[4]!==o?(a=i.jsx("button",{onClick:n,type:"button",className:"text-token-text-secondary flex h-9 w-9 shrink-0 items-center justify-center","aria-label":o,children:r}),e[3]=n,e[4]=o,e[5]=a):a=e[5],a}var pP;const CFe=Tt.span(pP||(pP=_t(["flex-1 line-clamp-3 py-2"])));var gP;const wFe=Tt.button(gP||(gP=_t(["flex-1 line-clamp-3 py-2 text-start focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-token-border-brand rounded bg-transparent cursor-pointer"])));function PT(t){"use forget";const e=D.c(10),{children:n,className:s,onLabelClick:o}=t,r=te();if(o){let l;e[0]!==r?(l=r.formatMessage({id:"YVD9GV",defaultMessage:"More about replied content"}),e[0]=r,e[1]=l):l=e[1];let c;return e[2]!==n||e[3]!==s||e[4]!==o||e[5]!==l?(c=i.jsx(wFe,{type:"button",onClick:o,className:s,"aria-label":l,children:n}),e[2]=n,e[3]=s,e[4]=o,e[5]=l,e[6]=c):c=e[6],c}let a;return e[7]!==n||e[8]!==s?(a=i.jsx(CFe,{className:s,children:n}),e[7]=n,e[8]=s,e[9]=a):a=e[9],a}var hP;const RT=Tt.div(hP||(hP=_t(["bg-token-main-surface-secondary dark:bg-token-main-surface-tertiary flex items-start py-1 gap-1.5 px-1.5 text-sm"])));var _P;const OT=Tt.span(_P||(_P=_t(["shrink-0 w-9 h-9 flex justify-center items-center"])));function kFe(t,e){switch(t.type){case"text":return i.jsx(bFe,{value:t.value,hideQuotes:t.hideQuotes,onRemoveRegion:t.onRemoveRegion,onLabelClick:t.onLabelClick},e);case"object":return i.jsx(vFe,{value:t.value,onRemoveRegion:t.onRemoveRegion,onLabelClick:t.onLabelClick},e);case"mention":case"system_hint":return i.jsx(SFe,{value:t.value,icon:t.icon,onRemoveRegion:t.onRemoveRegion,onLabelClick:t.onLabelClick},e)}return null}const EFe="wcDTda_fallbackTextarea",s6={fallbackTextarea:EFe,"prosemirror-parent":"wcDTda_prosemirror-parent"},Zpt=({composerController:t,placeholder:e,disableAutoFocus:n=!1,disabled:s=!1,textareaMaxHeightClassName:o="max-h-[max(30svh,5rem)]",fontSize:r="base"})=>{"use no forget";const a=v.useRef(null),l=v.useRef(null),c=v.useRef(!1),u=P3(),d=X(u.composer.autofocusDisabled$),f=v.useRef(n||d||s);return bs(()=>{if(c.current||!a.current)return;const m=Vt(t);c.current=!0;const p=l.current;if(p!=null){const{value:g,selectionStart:h,selectionEnd:_}=p;m.dispatch(m.state.tr.insertText(g)),m.dispatch(m.state.tr.setSelection(k7.create(m.state.doc,h+1,_+1))),p.style.display="none",p.value=""}a.current.appendChild(m.dom),m.dom.id=$1,m.dom.dataset.virtualkeyboard="true",Yde(m.dom),f.current||So(Vt(t))},[t]),v.useEffect(()=>{const m=a.current;if(!m)return;const p=Vt(t);return Qc({target:p.dom,axis:"height",onChange:({height:g,previousHeight:h})=>{if(Kt(()=>HM(t))&&h!=null&&g>h)return;const _=document.createElement("span");_.textContent="",_.inert=!0;const x=getComputedStyle(p.dom);for(const y of["font-size","line-height","padding-top","padding-bottom"])_.style.setProperty(y,x.getPropertyValue(y));_.style.position="absolute",m.appendChild(_);const b=_.offsetHeight;m.removeChild(_),HM.set(t,g>b)}})},[t]),v.useEffect(()=>{ree(Vt(t),e)},[e,t]),v.useEffect(()=>{Vt(t).setProps({editable:()=>!s})},[t,s]),v.useEffect(()=>{Ve.addFirstTiming("chatgpt.web.chatPage.prompttextarea.modern.mounted",{serialTimingGroup:"pageLoad"})},[]),i.jsxs("div",{ref:a,onKeyDown:()=>{di.postTask(()=>{Cr.prefetch()},{priority:"background"})},className:q([s6["prosemirror-parent"],"text-token-text-primary",o,"max-h-52","min-h-[var(--deep-research-composer-extra-height,unset)]","flex-1 overflow-auto [scrollbar-width:thin]",S7()?"firefox":"default-browser"],"vertical-scroll-fade-mask"),"data-size":r!=="base"?r:void 0,children:[i.jsx("textarea",{className:s6.fallbackTextarea,name:$1,autoFocus:!f.current,placeholder:e,ref:l,"data-virtualkeyboard":!0}),i.jsx(mve,{scriptSrc:"window.__oai_logHTML?window.__oai_logHTML():window.__oai_SSR_HTML=window.__oai_SSR_HTML||Date.now();requestAnimationFrame((function(){window.__oai_logTTI?window.__oai_logTTI():window.__oai_SSR_TTI=window.__oai_SSR_TTI||Date.now()}))"})]})};function Qpt(t){"use forget";var b,y;const e=D.c(22),{product:n,onOpen:s,onRemove:o}=t,r=(b=n.title)!=null?b:"Selected product",a=te();let l;e[0]!==a||e[1]!==r?(l=a.formatMessage({id:"giCR14",defaultMessage:"{selectedMode}, click to remove"},{selectedMode:r}),e[0]=a,e[1]=r,e[2]=l):l=e[2];const c=l,u=TFe,d=(y=n.image_urls)==null?void 0:y[0];let f;e[3]!==r||e[4]!==d?(f=i.jsx(MFe,{imageUrl:d,label:r}),e[3]=r,e[4]=d,e[5]=f):f=e[5];let m;e[6]!==r?(m=i.jsx("span",{className:"max-w-[130px] truncate [[data-collapse-labels]_&]:sr-only",ref:u,children:r}),e[6]=r,e[7]=m):m=e[7];let p;e[8]!==r||e[9]!==s||e[10]!==f||e[11]!==m?(p=i.jsxs("button",{type:"button",className:"group focus-visible:ring-token-focus flex min-w-0 items-center gap-x-2 rounded-full pe-1 text-[14px] leading-5 font-medium tracking-[-0.18px] focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:outline-none","aria-label":r,onClick:s,children:[f,m]}),e[8]=r,e[9]=s,e[10]=f,e[11]=m,e[12]=p):p=e[12];let g;e[13]!==o?(g=S=>{S.preventDefault(),S.stopPropagation(),o()},e[13]=o,e[14]=g):g=e[14];let h;e[15]===Symbol.for("react.memo_cache_sentinel")?(h=i.jsx(Om,{className:"h-3.5 w-3.5",inert:!0}),e[15]=h):h=e[15];let _;e[16]!==c||e[17]!==g?(_=i.jsx("button",{type:"button",className:"text-token-text-tertiary hover:bg-token-bg-tertiary hover:text-token-text-primary focus-visible:ring-token-focus flex h-5 w-5 shrink-0 items-center justify-center rounded-full transition focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:outline-none","aria-label":c,onClick:g,children:h}),e[16]=c,e[17]=g,e[18]=_):_=e[18];let x;return e[19]!==p||e[20]!==_?(x=i.jsxs("div",{className:"border-token-interactive-border-secondary-default bg-token-bg-primary dark:bg-token-bg-elevated-primary text-token-interactive-label-secondary-default inline-flex max-w-full items-center gap-2 rounded-full border px-2 py-2",children:[p,_]}),e[19]=p,e[20]=_,e[21]=x):x=e[21],x}function TFe(t){t!=null&&t.parentElement&&t.textContent&&t.scrollWidth>t.clientWidth&&(t.parentElement.title=t.textContent)}function MFe({imageUrl:t,label:e}){return i.jsx("div",{className:"bg-token-bg-primary flex h-5 w-5 items-center justify-center overflow-hidden rounded-full",children:t?i.jsx("img",{src:t,alt:e,className:"m-0 block h-full w-full rounded-full object-cover"}):i.jsx(dg,{className:"text-token-text-tertiary h-3.5 w-3.5"})})}const AFe=4,Uz=.0025;function Jpt(n){var s=n,{composerController:t}=s,e=De(s,["composerController"]);const{waveformData$:o}=_z(t),r=X(o);return r?i.jsx(NFe,N({waveform:r},e)):null}function NFe({waveform:t,progressPercentage:e,barWidth:n=AFe,normalize:s=!1,scaleFactor:o=10,initialValue:r=Uz,silentColor:a,activeColor:l,className:c}){const u=v.useRef(null),d=Yo(),f=a!=null?a:d?"#000":"#CCC",m=l!=null?l:d?"#CCC":"#000",[p,g]=v.useState(300);v.useEffect(()=>{u.current&&g(u.current.clientWidth)},[]);const{soundBars:h,firstAudioBarIndex:_}=v.useMemo(()=>{const x=t.length,b=Math.floor(p/n),y=x/b;let S=-1;const C=[];for(let k=0;k<b;k++){const E=Math.floor(k*y),T=Math.min(Math.floor((k+1)*y),x);if(E>=T){C.push(0);continue}let M=0;for(let I=E;I<T;I++)M+=Math.abs(t[I]);const A=M/(T-E);S===-1&&A>r&&(S=k),C.push(A)}let w=C;if(s){const E=1/(Math.max(...w)||1);w=w.map(T=>{const M=T*E;return Math.max(Math.min(M,.92),.08)})}return{soundBars:w,firstAudioBarIndex:S}},[t,p,n,s,r]);return v.useEffect(()=>{const x=u.current,b=x==null?void 0:x.getContext("2d");if(!x||!b)return;const y=window.devicePixelRatio,{clientHeight:S,clientWidth:C}=x;x.width=C*y,x.height=S*y,b.clearRect(0,0,x.width,x.height);const w=S*y*.5;b.translate(0,w);const k=x.width/h.length;for(let E=0;E<h.length;E++){let T=h[E];s||(T*=o);const M=T*w,A=E*k;if(typeof e=="number"){const j=(h.length-E)/h.length<e;b.fillStyle=j?m:f}else{const I=_===-1||E<_?f:m;b.fillStyle=I}b.fillRect(A,-M,k/2,M*2)}},[h,p,f,m,s,o,_,e]),i.jsx("canvas",{ref:u,className:q("h-8 w-full",c)})}const u1=st("unknown"),Xpt=300,egt=async(t=1)=>{let e=0,n;return new Promise(s=>{const o=r=>(n||(n=r),r-n<t*1e3?(e+=1,requestAnimationFrame(o)):s(Math.floor(e/t)));requestAnimationFrame(o)})},tgt=t=>{const e=v.useRef(t),n=v.useCallback(s=>{(e.current[0]!==s.width||e.current[1]!==s.height)&&(e.current=[s.width,s.height])},[]);return{canvasSizeRef:e,handleCanvasSizeUpdate:n}},ngt=t=>{var a,l,c,u,d,f,m,p,g;const{voiceSessionId:e,server:n,voiceMode:s,audioInputDevice:o}=t,r=Kt(()=>ju());return{voice_session_id:e!=null?e:"(none)",server_messages:n.messages.map(h=>h.type).join(","),rate_limit_message:(l=JSON.stringify((a=n.usage)==null?void 0:a.rate_limit_message))!=null?l:"(none)",audio_s:(u=(c=n.usage)==null?void 0:c.audio_s)!=null?u:"(none)",tool_update:(f=(d=n.toolUpdate)==null?void 0:d.type)!=null?f:"(none)",voice_connection_quality:(m=n.voiceConnectionQuality)!=null?m:"(none)",voice_mode:s!=null?s:"(none)",audio_input_device:(p=o==null?void 0:o.label)!=null?p:"(none)",voice_status:(g=JSON.stringify(r))!=null?g:"(none)"}};function Hz(t){return t instanceof DOMException&&t.name==="NotAllowedError"?(Ut.permissions.denied({message:t.message}),!0):!1}const On=class On{static getAudioDeviceId(e){var o,r;const s=((r=(o=e.getAudioTracks)==null?void 0:o.call(e))!=null?r:[])[0];return s==null?void 0:s.getSettings().deviceId}static getExactAudioDeviceIdFromConstraints(e){const n=e==null?void 0:e.audio;if(!(!n||n===!0)&&typeof n=="object"){const s=n.deviceId;if(!s)return;if(typeof s=="string")return s;if(Array.isArray(s))return;if(typeof s=="object"&&"exact"in s){const o=s.exact;return typeof o=="string"?o:void 0}}}static stopAndClearCachedAudioStreamForHandoff(){const e=On.cachedAudioStreamForHandoff;e&&(e.timeoutId&&clearTimeout(e.timeoutId),e.stream.getTracks().forEach(n=>{n.readyState==="live"&&n.stop()}),On.cachedAudioStreamForHandoff=null)}static cacheAudioStreamForHandoff(e){On.stopAndClearCachedAudioStreamForHandoff();const n=On.getAudioDeviceId(e),s=setTimeout(()=>{On.stopAndClearCachedAudioStreamForHandoff()},On.AUDIO_STREAM_HANDOFF_TTL_MS);On.cachedAudioStreamForHandoff={stream:e,deviceId:n,timeoutId:s}}static consumeCachedAudioStreamForHandoff(e){const n=On.cachedAudioStreamForHandoff;return!n||e&&(!n.deviceId||n.deviceId!==e)?null:(n.timeoutId&&clearTimeout(n.timeoutId),On.cachedAudioStreamForHandoff=null,n.stream)}static consumeUserMedia(...e){const n=e[0],s=!!(n!=null&&n.video);if(!!(n!=null&&n.audio)&&!s){const r=On.getExactAudioDeviceIdFromConstraints(n),a=r&&r!==""?On.consumeCachedAudioStreamForHandoff(r):On.consumeCachedAudioStreamForHandoff();if(a)return Ut.voiceMode.microphoneCacheHit(),aee.set(!0),On.mediaDevicesPromises.push(Promise.resolve(a)),Promise.resolve(a)}return On.getUserMedia(...e)}static getUserMedia(...e){const n=navigator.mediaDevices.getUserMedia(...e);return On.mediaDevicesPromises.push(n),n}static getDisplayMedia(...e){const n=navigator.mediaDevices.getDisplayMedia(...e);return On.mediaDevicesPromises.push(n),n}static closeAllStreams(){On.stopAndClearCachedAudioStreamForHandoff();const e=On.mediaDevicesPromises.map(n=>n.then(s=>{s.getTracks().forEach(o=>{o.readyState==="live"&&o.stop()})}));return On.mediaDevicesPromises=[],Promise.all(e)}};ye(On,"mediaDevicesPromises",[]),ye(On,"AUDIO_STREAM_HANDOFF_TTL_MS",2e3),ye(On,"cachedAudioStreamForHandoff",null);let Xm=On;const Mm=class Mm{constructor(){ye(this,"userMediaPromiseMap",new Map)}static getLocalDevices(e,n=!0){return Mm.instance.getDevices(e,n)}async getDevices(e,n=!0){if(this.userMediaPromiseMap.size>0)try{e?await this.userMediaPromiseMap.get(e):await Promise.all(Array.from(this.userMediaPromiseMap.values()))}catch(o){console.warn("error waiting for media permissions",o)}let s=await navigator.mediaDevices.enumerateDevices();if(n&&!(E7()&&this.hasDeviceInUse(e))&&(s.filter(r=>r.kind===e).length===0||s.some(r=>{const a=r.label==="",l=e?r.kind===e:!0;return a&&l}))){const r={video:e!=="audioinput"&&e!=="audiooutput",audio:e!=="videoinput"},a=await Xm.getUserMedia(r);s=await navigator.mediaDevices.enumerateDevices(),a.getTracks().forEach(l=>{l.stop()})}return e&&(s=s.filter(o=>o.kind===e)),s}hasDeviceInUse(e){return e?this.userMediaPromiseMap.has(e):this.userMediaPromiseMap.size>0}};ye(Mm,"instance",new Mm);let aC=Mm;async function IFe(t){let e;try{e=await aC.getLocalDevices(t)}catch(o){Hz(o),ul.debug("Error fetching local devices",o);return}const n={};for(const o of e)o.kind===t&&(n[o.groupId]||(n[o.groupId]=[]),n[o.groupId].push(o));for(const o in n){const r=n[o];if(r.length>1&&r.find(l=>l.deviceId==="default")){const l=r.find(c=>c.deviceId!=="default");if(l)return l}}let s;for(const o of e)if(o.kind===t){if(o.deviceId==="default")return o;s||(s=o)}return s}async function jFe(){var r,a;const e=(await navigator.mediaDevices.enumerateDevices()).filter(l=>l.kind==="audioinput"),n=e.find(l=>l.deviceId==="default"),s=e.find(l=>l.label.toLowerCase().includes("iphone")),o=e.find(l=>{const c=!!(s&&s.label!==l.label),u=!!(n&&l.deviceId===n.deviceId);return c||u});return(a=o==null?void 0:o.deviceId)!=null?a:(r=e[0])==null?void 0:r.deviceId}const PFe=()=>{const t=R3()&&Uo,e=xe("4165208614");return async(n={})=>{if(t)return await iee();try{const s=await jFe(),o=await Xm.getUserMedia({audio:s!==""?{deviceId:{exact:s}}:!0,video:!1}),a=(await navigator.mediaDevices.enumerateDevices()).some(l=>l.kind==="audioinput"&&l.label!=="");return n.cacheStreamForHandoff&&a&&e?Xm.cacheAudioStreamForHandoff(o):o.getTracks().forEach(l=>l.stop()),a}catch(s){if(!Hz(s))throw s;return!1}}};function Tb({type:t,microphoneAvailable:e}){var o;const n=nl();n._microphonePermissions.request.isStarted()&&(n._microphonePermissions.request.end(),Ut.voiceMode.microphoneLatency({durationMs:(o=n._microphonePermissions.request.getDuration())!=null?o:"unknown",type:t,microphoneAvailable:e}))}function RFe(t){const e=v.useRef(void 0),n=xe("507173417");v.useEffect(()=>{if(!(R3()&&Uo||!navigator.permissions))return n||navigator.permissions.query({name:"microphone"}).then(o=>{e.current=o,o.onchange=()=>{t(o.state==="granted")}}).catch(()=>{}),()=>{e.current&&(e.current.onchange=null)}},[t,n])}const OFe=()=>{const[t,e]=v.useState(!1),[n,s]=v.useState(!1),[o,r]=v.useState(),a=X(()=>u1()),l=v.useCallback(f=>{e(f)},[]);RFe(l);const c=PFe(),u=v.useCallback(async()=>{const f=nl();if(f.startToMicRequest.end(),f._microphonePermissions.request.forceStart(),a==="granted")return e(!0),s(!0),Tb({type:"skipped",microphoneAvailable:!0}),!0;if(!n)try{const m=await c({cacheStreamForHandoff:!0});return e(m),Tb({type:"requested",microphoneAvailable:m}),m}finally{s(!0)}return Tb({type:"alreadyRequested",microphoneAvailable:t}),t},[c,n,t,a]);return v.useEffect(()=>{t&&LFe().then(f=>{r(f)})},[t]),{permissionsRequested:n,requestMicrophonePermissions:u,userDeclinedMicrophonePermissions:n&&!t,microphoneAvailable:t,microphoneLabel:o}},LFe=async()=>{var t;try{const e=await IFe("audioinput");return(t=e==null?void 0:e.label)!=null?t:""}catch(e){const n=x_();return Ve.addError("Failed to fetch default media device",{error:e,protocol:n}),"Error accessing microphone devices"}},DFe={status:"idle"},BFe=tn()(xp(ls(()=>N({},DFe)))),$z=q("flex items-center justify-center rounded-full"),Gz=q($z,"border border-token-border-default p-1 text-token-text-secondary","focus-visible:outline-black dark:text-token-text-secondary dark:focus-visible:outline-white","bg-transparent dark:bg-transparent"),Vz=q("hover:bg-token-main-surface-tertiary"),zz=q($z,"bg-transparent text-token-text-secondary transition-colors","hover:bg-token-main-surface-tertiary focus-visible:outline-black","disabled:text-[#f4f4f4] disabled:opacity-30","dark:bg-transparent dark:text-token-text-secondary dark:hover:bg-token-main-surface-tertiary dark:focus-visible:outline-white","h-8 w-8"),FFe=t=>{const{requestMicrophonePermissions:e}=OFe(),s=te().formatMessage({id:"vONrv3",defaultMessage:"Enable mic access to dictate"}),o=Dt();return async()=>{if(V.logEvent("Whisper on Web/Windows: Clicked to start dictation"),ft.logEvent("chatgpt_composer_whisper_button_clicked_start"),!await e())return o.danger(s,{toastId:"whisper_icon_button_click_failure"});t()}},UFe=c=>{var u=c,{size:t="medium",disabled:e,onExit:n,buttonClassName:s,invertColor:o,disableTooltip:r=!1,visualTreatment:a}=u,l=De(u,["size","disabled","onExit","buttonClassName","invertColor","disableTooltip","visualTreatment"]);const d=te(),f=BFe(h=>h.status),m=FFe(n);f==="error"&&(V.logEvent("Whisper on Web/Windows: Error"),ft.logEvent("chatgpt_composer_whisper_button_error"));const p=i.jsx(z$,{"aria-label":"",className:"icon",fontSize:"inherit"}),g=X(ln);return i.jsx(HFe,{disabled:r,children:a==="composer-btn"||a==="codex"?i.jsx("button",G(N({},l),{"aria-label":d.formatMessage({id:"QFVCwl",defaultMessage:"Dictate button"}),type:"button",onClick:m,disabled:e,className:q("composer-btn",g&&"composer-btn--desktopSidebar"),children:p})):i.jsx(Se,G(N({},l),{"aria-label":d.formatMessage({id:"QFVCwl",defaultMessage:"Dictate button"}),size:t,type:"button",onClick:m,disabled:e,className:q(o?zz:Gz,"[view-transition-name:var(--vt-composer-whisper-button)]",e?"opacity-30":!o&&Vz,"dark:hover:bg-transparent dark:hover:opacity-100",s),children:p}))})};function HFe({children:t,disabled:e=!1}){const n=te();return i.jsx(St,{open:e?!1:void 0,label:n.formatMessage({id:"abw2XH",defaultMessage:"Dictate"}),side:"bottom",onOpenChange:s=>{s&&(V.logEvent("Whisper on Web/Windows: Button hover to see tooltip"),ft.logEvent("chatgpt_composer_whisper_button_hovered"))},children:t})}function $Fe(t){return mt()?i.jsx(UFe,N({},t)):null}function GFe(t){return t.visualTreatment==="codex"?i.jsxs("div",{className:"flex gap-x-1.5",children:[i.jsx(Se,{type:"button",color:"ghost",size:"small",icon:ms,children:i.jsx(P,{id:"wham.whisperModeControlsLoading.cancel",defaultMessage:"Cancel"})}),i.jsx(Se,{type:"button",color:"secondary",size:"small",icon:Pr,children:i.jsx(P,{id:"wham.whisperModeControlsLoading.done",defaultMessage:"Done"})})]}):i.jsxs("div",{className:"flex gap-x-1.5",children:[i.jsx("div",{className:q(Gz,Vz,t.buttonClassName),children:i.jsx(ms,{className:"icon"})}),i.jsx("div",{className:q(zz,t.buttonClassName),children:i.jsx(Pr,{className:"icon-lg"})})]})}const VFe=je(()=>Me(()=>import("./f6a9ca70-lw5s0huv4u3sohpp.js"),__vite__mapDeps([294,1,2,3])).then(t=>t.WhisperModeControls),{loading:t=>i.jsx(GFe,N({},t))});function zFe(t){return i.jsx(VFe,N({},t))}function sgt({composerController:t,composerType:e,disabled:n=!1,disableTooltip:s=!1}){const{waveformData$:o,isWhisperActive$:r}=_z(t),a=X(r),l=v.useCallback((c,u,d,f)=>{const m=Vt(t),p=m.state.selection.ranges[0].$from.pos;r.set(!1),requestAnimationFrame(()=>{m.focus(),m.dispatch(m.state.tr.insertText(c,p,p)),m.dispatch(m.state.tr.setSelection(k7.create(m.state.doc,p+c.length)).scrollIntoView()),VLe(t).setData({usedDictation:!0,dictationOriginalText:c!=null?c:null,dictationAssetPointer:u!=null?u:null,dictationAssetTTL:d!=null?d:null,dictationAssetFormat:f!=null?f:null})})},[t,r]);return a?i.jsx(zFe,{initialValue:Uz,onSuccess:l,onWaveformDataUpdate:o.set,onExit:()=>{r.set(!1)},disabled:n,visualTreatment:e,buttonClassName:"h-9 min-h-9 w-9 min-w-9"}):i.jsx($Fe,{size:"small",onExit:()=>{r.set(!0)},visualTreatment:e,buttonClassName:"h-9 min-h-9 w-9 min-w-9",disabled:n,disableTooltip:s||n})}const WFe=re(me,"308fea",20,20),Wz={cyberpunk:{id:"cyberpunk",title:"Cyberpunk",imageUrl:"https://cdn.openai.com/API/images/image-picker-styles/v2/cyberpunk.webp",label:qe({id:"EoebyJ",defaultMessage:"Cyberpunk"}),textToImagePrompt:qe({id:"Deq9he",defaultMessage:"Create an image in a cyberpunk aesthetic: vivid neon accents, futuristic textures, glowing details, and high-contrast lighting."}),imageToImagePrompt:qe({id:"omZTK1",defaultMessage:"Restyle this image with a cyberpunk aesthetic: vivid neon accents, futuristic textures, glowing details, and high-contrast lighting."})},"coloring-book":{id:"coloring-book",title:"Coloring Book",imageUrl:"https://cdn.openai.com/API/images/image-picker-styles/v2/coloring-book.webp",label:qe({id:"Ma5v0R",defaultMessage:"Coloring Book"}),textToImagePrompt:qe({id:"PWjYK/",defaultMessage:"Create an image in a children's coloring book style: bold, even black outlines on white, no shading or tone. Simplify textures into playful, easily recognizable shapes."}),imageToImagePrompt:qe({id:"U6fwpJ",defaultMessage:"Restyle this image in a children's coloring book style: bold, even black outlines on white, no shading or tone. Simplify textures into playful, easily recognizable shapes."})},anime:{id:"anime",title:"Anime",imageUrl:"https://cdn.openai.com/API/images/image-picker-styles/v2/anime.webp",label:qe({id:"U/Qrsc",defaultMessage:"Anime"}),textToImagePrompt:qe({id:"gCogZd",defaultMessage:"Create an image in a detailed anime aesthetic: expressive eyes, smooth cel-shaded coloring, and clean linework. Emphasize emotion and character presence, with a sense of motion or atmosphere typical of anime scenes."}),imageToImagePrompt:qe({id:"jZIKG9",defaultMessage:"Restyle this image with a detailed anime aesthetic: expressive eyes, smooth cel-shaded coloring, and clean linework. Emphasize emotion and character presence, with a sense of motion or atmosphere typical of anime scenes."})},"classic-anime":{id:"classic-anime",title:"Classic Anime",imageUrl:"https://cdn.openai.com/API/images/image-picker-styles/v2/classic-anime.webp",label:qe({id:"jLkVYJ",defaultMessage:"Classic Anime"}),textToImagePrompt:qe({id:"7SgRKH",defaultMessage:"Create an image in a classic 2D anime style with flat cel shading, clear black outlines, and stylized charactersmixing realism with fantasy in a heartfelt, nostalgic tone."}),imageToImagePrompt:qe({id:"r6UnyO",defaultMessage:"Restyle this image in a classic 2D anime style with flat cel shading, clear black outlines, and stylized charactersmixing realism with fantasy in a heartfelt, nostalgic tone."})},"dramatic-headshot":{id:"dramatic-headshot",title:"Dramatic Headshot",imageUrl:"https://cdn.openai.com/API/images/image-picker-styles/v2/dramatic-headshot.webp",label:qe({id:"p4IJX5",defaultMessage:"Dramatic Headshot"}),textToImagePrompt:qe({id:"L2OTSr",defaultMessage:"Create an ultra-realistic high-contrast black-and-white headshot, close up, black shadow background, 35mm lens, 4K quality, aspect ratio 4:3."}),imageToImagePrompt:qe({id:"HwR32X",defaultMessage:"Restyle this photo into a high-contrast black-and-white headshot, close up, black shadow background, 35mm lens, 4K quality, aspect ratio 4:3."})},"photo-shoot":{id:"photo-shoot",title:"Photo Shoot",imageUrl:"https://cdn.openai.com/API/images/image-picker-styles/v2/photo-shoot.webp",label:qe({id:"ZmdPZ5",defaultMessage:"Photo Shoot"}),textToImagePrompt:qe({id:"APWtsI",defaultMessage:"Create an ultra-realistic professional photo shoot with soft lighting."}),imageToImagePrompt:qe({id:"ugvh1K",defaultMessage:"Make a professional photo shoot with soft lighting based on this photo."})},"retro-cartoon":{id:"retro-cartoon",title:"Retro Cartoon",imageUrl:"https://cdn.openai.com/API/images/image-picker-styles/v2/retro-cartoon.webp",label:qe({id:"GAjF4n",defaultMessage:"Retro Cartoon"}),textToImagePrompt:qe({id:"46xB6P",defaultMessage:"Create a retro 1950s cartoon style image, minimal vector art, Art Deco inspired, clean flat colors, geometric shapes, mid-century modern design, elegant silhouettes, UPA style animation, smooth lines, limited color palette (black, red, beige, brown, white), grainy paper texture background, vintage jazz club atmosphere, subtle lighting, slightly exaggerated character proportions, classy and stylish mood."}),imageToImagePrompt:qe({id:"ozicEm",defaultMessage:"Restyle this photo in a retro 1950s cartoon style, minimal vector art, Art Deco inspired, clean flat colors, geometric shapes, mid-century modern design, elegant silhouettes, UPA style animation, smooth lines, limited color palette (black, red, beige, brown, white), grainy paper texture background, vintage jazz club atmosphere, subtle lighting, slightly exaggerated character proportions, classy and stylish mood."})},"80s-glam":{id:"80s-glam",title:"80s Glam",imageUrl:"https://cdn.openai.com/API/images/image-picker-styles/v2/80s-glam.webp",label:qe({id:"fDejVt",defaultMessage:"80s Glam"}),textToImagePrompt:qe({id:"W7Od8r",defaultMessage:"Create a selfie styled like a cheesy 1980s mall glamour shot, foggy soft lighting, teal and magenta lasers in the background, feathered hair, shoulder pads, portrait studio vibes, ironic glam 4 life caption."}),imageToImagePrompt:qe({id:"sL7kY5",defaultMessage:"Turn this photo into a selfie styled like a cheesy 1980s mall glamour shot, foggy soft lighting, teal and magenta lasers in the background, feathered hair, shoulder pads, portrait studio vibes, ironic glam 4 life caption."})},"art-nouveau":{id:"art-nouveau",title:"Art Nouveau",imageUrl:"https://cdn.openai.com/API/images/image-picker-styles/v2/art-nouveau.webp",label:qe({id:"JNecL3",defaultMessage:"Art Nouveau"}),textToImagePrompt:qe({id:"Kdl/EG",defaultMessage:"Create an image in an Art Nouveau style: flowing lines, organic shapes, floral motifs, and soft, decorative elegance."}),imageToImagePrompt:qe({id:"IicReU",defaultMessage:"Restyle this image in an Art Nouveau style: flowing lines, organic shapes, floral motifs, and soft, decorative elegance."})},synthwave:{id:"synthwave",title:"Synthwave",imageUrl:"https://cdn.openai.com/API/images/image-picker-styles/v2/synthwave.webp",label:qe({id:"Db9V0o",defaultMessage:"Synthwave"}),textToImagePrompt:qe({id:"t8FH1X",defaultMessage:"Create an image in a synthwave aesthetic: retro-futuristic 1980s vibe with neon grids, glowing sunset, vibrant magenta-and-cyan gradients, chrome highlights, and a nostalgic outrun atmosphere."}),imageToImagePrompt:qe({id:"CnZDU9",defaultMessage:"Restyle this image with a synthwave aesthetic: retro-futuristic 1980s vibe with neon grids, glowing sunset, vibrant magenta-and-cyan gradients, chrome highlights, and a nostalgic outrun atmosphere."})},"tiranga-portrait-2025":{id:"tiranga-portrait-2025",title:"Tiranga Portrait",imageUrl:"https://cdn.openai.com/API/images/image-picker-styles/v2/tiranga-portrait-2025.webp",label:qe({id:"eHhV1D",defaultMessage:"Tiranga Portrait"}),textToImagePrompt:qe({id:"V7BzQx",defaultMessage:"Create a photorealistic photo on a clean background with soft key lighting. Add saffron-white-green rim light and a subtle Ashoka Chakra halo behind the head. Blend one soft overlay  Red Fort or India Gate skyline, India map contour, or Ayodhya Ram Mandir silhouette  into the shoulders/background. Include light tricolor bokeh or smoke and a gentle khadi/paper micro-texture. Crisp detail, no text, no flag as clothing."}),imageToImagePrompt:qe({id:"AJ1btA",defaultMessage:'Restyle this photo in a "Tiranga double-exposure" look: preserve identity and pose, add saffron-white-green rim light and a subtle Ashoka Chakra halo. Blend one overlay - Red Fort or India Gate skyline, India map contour, or Ayodhya Ram Mandir silhouette - plus soft tricolor bokeh/smoke and gentle khadi/paper micro-texture. Photo real, balanced saturation. No text, don\'t use the flag as clothing'})}},qz=Object.values(Wz);function ogt({composerController:t}){const e=w7(u=>u.files.some(d=>kp(d.file.name))),{targetedContent:n}=vf(),s=e||(n==null?void 0:n.subtype)===jS,o=te(),l=mn("3961845717").get("styles",qz.map(u=>u.id)).map(u=>Wz[u]).filter(Boolean);v.useEffect(()=>{V.logEventWithStatsig("chatgpt_imagegen_style_picker_shown","chatgpt_imagegen_style_picker_shown")},[]);const c=v.useCallback(u=>{const d=s?o.formatMessage(u.imageToImagePrompt):o.formatMessage(u.textToImagePrompt);KFe(d,t,o),V.logEventWithStatsig("chatgpt_imagegen_preset_style_selected","chatgpt_imagegen_preset_style_selected",{style_id:u.id})},[t,o,s]);return i.jsxs(Tl,{onOpenChange:u=>{u&&V.logEventWithStatsig("chatgpt_imagegen_style_picker_opened","chatgpt_imagegen_style_picker_opened")},children:[i.jsx(ba,{asChild:!0,children:i.jsxs("button",{type:"button",className:"composer-btn px-2",children:[i.jsx(WFe,{className:"icon"}),i.jsx("span",{className:"ms-1.5 [[data-collapse-labels]_&]:sr-only",children:i.jsx(P,{id:"X850uz",defaultMessage:"Styles"})}),i.jsx($o,{className:"icon-sm xs:ms-1.5 ms-1"})]})}),i.jsx(Ml,{children:i.jsx(b3,{className:"z-[51] max-h-[294px] w-[345px] overflow-y-auto bg-clip-border px-3 py-4",$as:Al,side:"bottom",align:"start",collisionPadding:10,sideOffset:8,children:i.jsx("div",{className:"grid grid-cols-3 gap-x-2 gap-y-4",children:l.map(u=>i.jsx(qFe,{style:u,onClick:()=>c(u)},u.id))})})})]})}function qFe({style:t,onClick:e}){const n=te();return i.jsxs("button",{onClick:e,className:"hover:bg-token-bg-secondary focus-visible:ring-ring flex flex-col items-center gap-2.5 rounded-md p-1 text-xs focus-visible:ring-1 focus-visible:ring-offset-1 focus-visible:outline-none",children:[i.jsx("img",{src:t.imageUrl,alt:n.formatMessage(t.label),className:"aspect-square w-4/5 rounded-full object-cover"}),i.jsx("span",{children:n.formatMessage(t.label)})]})}function KFe(t,e,n){const s=Vt(e),o=oU(e);if(o.trim()===""){l9(s,t);return}const r=o.toLowerCase();for(const{textToImagePrompt:a,imageToImagePrompt:l}of qz){const u=[n.formatMessage(a),n.formatMessage(l)].map(d=>{const f=r.indexOf(d.toLowerCase());return f===-1?null:{start:f,end:f+d.length}}).filter(Boolean);if(u.length){const d=Math.min(...u.map(p=>p.start)),f=Math.max(...u.map(p=>p.end)),m=o.substring(d,f).trimEnd();c9(s,m,t);return}}u9(s,t)}function YFe(){const t=C7(),e=X(XR);return t&&e&&qP()&&dT()}function ZFe(t){const a=t,{ref:e,children:n,className:s}=a,o=De(a,["ref","children","className"]),r=YFe();return i.jsx("div",G(N({},o),{className:q(r&&"keyboard-open:fixed keyboard-open:bottom-[var(--screen-keyboard-height,0)] keyboard-open:start-3 keyboard-open:end-3 keyboard-open:z-50 keyboard-open:w-auto! keyboard-open:-translate-y-2",s),ref:l=>{if(typeof e=="function"?e(l):e!=null&&(e.current=l),!!r)return Qc({axis:"height",target:l,onChange:({height:c})=>{$9e.setState(u=>G(N({},u),{composerHeight:c}))}})},children:n}))}const QFe=t=>{"use forget";const e=D.c(90),{viewTransitionName:n,isTemporaryChat:s,isDeveloperMode:o,isNewConversation:r,composerController:a,children:l,expanded:c,onSubmit:u,shouldUseRelaxedRadius:d,shouldUseTightRadius:f,canCollapseWithInput:m,canCollapseWithFooterActions:p,expandOnMultilineInput:g,backgroundClassName:h,ariaLabel:_,ref:x,disableMotion:b}=t,y=n===void 0?"var(--vt-composer)":n,S=d===void 0?!1:d,C=f===void 0?!1:f;let w=m===void 0?!1:m,k=p===void 0?!0:p;const E=g===void 0?!1:g,T=b===void 0?!1:b,M=X(ln);let A,I,j,R,O,L,B;e[0]!==l?(O=null,L=null,R=null,A=[],B=[],I=[],j=[],v.Children.forEach(l,rn=>{if(v.isValidElement(rn)){if(rn.type===Kz){if(O!=null)throw new Error("PromptTextareaComposer only accepts a single primary content");O=rn}if(rn.type===Yz){if(L!=null)throw new Error("PromptTextareaComposer only accepts a single submit button");L=rn}else if(rn.type===Zz){if(R!=null)throw new Error("PromptTextareaComposer only accepts a single leading action");R=rn}else rn.type===Jz||rn.type===Qz?A.push(rn):rn.type===Xz?B.push(rn):rn.type===eW?I.push(rn):rn.type===tW&&j.push(rn)}}),e[0]=l,e[1]=A,e[2]=I,e[3]=j,e[4]=R,e[5]=O,e[6]=L,e[7]=B):(A=e[1],I=e[2],j=e[3],R=e[4],O=e[5],L=e[6],B=e[7]),E&&(w=!0,k=!1);const U=A.length>0,H=B.length>0,$=H||L!=null,F=lee(),z=!mt(),W=X(()=>!U&&!$?!1:c!=null?c:E&&cee(a)||!E&&uee(a)||!w&&!Bm(a)||!k&&U),Y=JFe;let K;e[8]!==u?(K=rn=>{rn.preventDefault(),u(rn)},e[8]=u,e[9]=K):K=e[9];const Z=K,[J,Q]=v.useState(!1);let ne;e[10]===Symbol.for("react.memo_cache_sentinel")?(ne=()=>{Q(!0),setTimeout(()=>{Q(!1)},250)},e[10]=ne):ne=e[10];const ie=ne;let fe;e[11]!==J||e[12]!==F?(fe=J?{duration:0}:F?UF:Qxe,e[11]=J,e[12]=F,e[13]=fe):fe=e[13];const ae=fe,le=te();let pe;e[14]!==le?(pe=le.formatMessage({id:"U6PwZd",defaultMessage:"Developer mode"}).toLocaleUpperCase(),e[14]=le,e[15]=pe):pe=e[15];const _e=pe,Ce=o&&!r&&"relative";let ge;e[16]!==Ce?(ge=q("group/composer w-full",Ce),e[16]=Ce,e[17]=ge):ge=e[17];const Re=y!=null?y:void 0;let ke;e[18]!==Re?(ke={viewTransitionName:Re},e[18]=Re,e[19]=ke):ke=e[19];const he=ke;let Ee;e[20]!==W?(Ee=Dm(W),e[20]=W,e[21]=Ee):Ee=e[21];const Pe="unified-composer";let Ae;e[22]!==a?(Ae=dee(a),e[22]=a,e[23]=Ae):Ae=e[23];const de=T7(Ae,x);let oe;e[24]!==_e||e[25]!==o||e[26]!==r?(oe=o&&!r&&i.jsx(Hd,{href:"#settings/Connectors/Advanced",underline:!1,className:"absolute end-12 top-0 -translate-y-full rounded-t-xl bg-orange-400 px-2 text-xs font-medium text-white transition-colors hover:bg-orange-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-orange-500",children:_e}),e[24]=_e,e[25]=o,e[26]=r,e[27]=oe):oe=e[27];let se;e[28]!==j?(se=j.length>0&&i.jsx("div",{className:"hidden",children:j}),e[28]=j,e[29]=se):se=e[29];const Oe=ZFe;let Ne;e[30]!==a?(Ne=rn=>{!T3(a)&&!rn.defaultPrevented&&(f7().anySheetOpen$()||So(Vt(a)))},e[30]=a,e[31]=Ne):Ne=e[31];const ze=xu,Qe=!0,Le=M&&"dark:bg-token-bg-primary",ce=s&&"dark",be=!o&&"shadow-short",He=o&&"relative shadow-sm outline-2 outline-orange-400";let Ge;e[32]!==h||e[33]!==Le||e[34]!==ce||e[35]!==be||e[36]!==He?(Ge=q("bg-token-bg-primary corner-superellipse/1.1 cursor-text overflow-clip bg-clip-padding p-2.5 contain-inline-size motion-safe:transition-colors motion-safe:duration-200 motion-safe:ease-in-out dark:bg-[#303030]","grid grid-cols-[auto_1fr_auto] [grid-template-areas:'header_header_header'_'leading_primary_trailing'_'._footer_.'] group-data-expanded/composer:[grid-template-areas:'header_header_header'_'primary_primary_primary'_'leading_footer_trailing']",Le,ce,be,He,h),e[32]=h,e[33]=Le,e[34]=ce,e[35]=be,e[36]=He,e[37]=Ge):Ge=e[37];const nt="true",at=M?"0":C?"var(--radius-xl)":S?"20px":"28px";let Xe;e[38]!==at?(Xe={borderRadius:at},e[38]=at,e[39]=Xe):Xe=e[39];let gt;e[40]!==T||e[41]!==W||e[42]!==O||e[43]!==ae?(gt=i.jsx(xu,{disableMotion:T,layout:"position",layoutDependency:W,transition:ae,className:"-my-2.5 flex min-h-14 items-center overflow-x-hidden px-1.5 [grid-area:primary] group-data-expanded/composer:mb-0 group-data-expanded/composer:px-2.5",children:O}),e[40]=T,e[41]=W,e[42]=O,e[43]=ae,e[44]=gt):gt=e[44];let ht;e[45]!==T||e[46]!==W||e[47]!==R||e[48]!==ae?(ht=R&&i.jsx(xu,{disableMotion:T,layout:"position",layoutDependency:W,transition:ae,className:"[grid-area:leading]",children:R}),e[45]=T,e[46]=W,e[47]=R,e[48]=ae,e[49]=ht):ht=e[49];const Zt=U&&i.jsx(xu,{disableMotion:T,layout:"position",layoutDependency:W,transition:ae,"data-testid":"composer-footer-actions",className:q("-m-1 max-w-full overflow-x-auto p-1 [grid-area:footer] [scrollbar-width:none]",k&&"group-not-data-expanded/composer:-mb-12"),inert:!W,initial:{translateY:W?0:"calc(-6*var(--spacing))"},animate:{translateY:0},children:i.jsx("div",{className:q("flex min-w-fit items-center",z?"gap-1.5 ps-0 pe-1.5":"cant-hover:px-1.5 cant-hover:gap-1.5"),ref:Y,children:A})});let It;e[50]!==T||e[51]!==$||e[52]!==H||e[53]!==W||e[54]!==L||e[55]!==B||e[56]!==ae?(It=$&&i.jsxs(xu,{disableMotion:T,layout:"position",layoutDependency:W,transition:ae,className:"flex items-center gap-2 [grid-area:trailing]",children:[H&&i.jsx("div",{className:"relative ms-1",children:B}),L]}),e[50]=T,e[51]=$,e[52]=H,e[53]=W,e[54]=L,e[55]=B,e[56]=ae,e[57]=It):It=e[57];let lt;e[58]!==T||e[59]!==I||e[60]!==W||e[61]!==ae?(lt=I.length>0&&i.jsx(xu,{disableMotion:T,layout:"position",layoutDependency:W,transition:ae,className:"-mx-2.5 -mt-2.5 mb-2.5 flex flex-col [grid-area:header]",children:I}),e[58]=T,e[59]=I,e[60]=W,e[61]=ae,e[62]=lt):lt=e[62];let Mt;e[63]!==ze||e[64]!==T||e[65]!==W||e[66]!==Ge||e[67]!==Xe||e[68]!==gt||e[69]!==ht||e[70]!==Zt||e[71]!==It||e[72]!==lt||e[73]!==ae?(Mt=i.jsxs(ze,{disableMotion:T,layout:Qe,layoutDependency:W,transition:ae,className:Ge,"data-composer-surface":nt,style:Xe,children:[gt,ht,Zt,It,lt]}),e[63]=ze,e[64]=T,e[65]=W,e[66]=Ge,e[67]=Xe,e[68]=gt,e[69]=ht,e[70]=Zt,e[71]=It,e[72]=lt,e[73]=ae,e[74]=Mt):Mt=e[74];let Yt;e[75]!==Oe||e[76]!==Ne||e[77]!==Mt?(Yt=i.jsx(Oe,{onClick:Ne,children:Mt}),e[75]=Oe,e[76]=Ne,e[77]=Mt,e[78]=Yt):Yt=e[78];let nn;return e[79]!==_||e[80]!==ie||e[81]!==Z||e[82]!==ge||e[83]!==he||e[84]!==Ee||e[85]!==de||e[86]!==oe||e[87]!==se||e[88]!==Yt?(nn=i.jsxs("form",{onPaste:ie,className:ge,style:he,"data-expanded":Ee,onSubmit:Z,"data-type":Pe,"aria-label":_,ref:de,children:[oe,se,Yt]}),e[79]=_,e[80]=ie,e[81]=Z,e[82]=ge,e[83]=he,e[84]=Ee,e[85]=de,e[86]=oe,e[87]=se,e[88]=Yt,e[89]=nn):nn=e[89],nn},xu=t=>{"use forget";var f;const e=D.c(20);let n,s,o,r,a,l,c,u;if(e[0]!==t?(f=t,{disableMotion:o,layout:a,layoutDependency:l,transition:u,initial:r,animate:n,children:s}=f,c=De(f,["disableMotion","layout","layoutDependency","transition","initial","animate","children"]),e[0]=t,e[1]=n,e[2]=s,e[3]=o,e[4]=r,e[5]=a,e[6]=l,e[7]=c,e[8]=u):(n=e[1],s=e[2],o=e[3],r=e[4],a=e[5],l=e[6],c=e[7],u=e[8]),o){let m;return e[9]!==s||e[10]!==c?(m=i.jsx("div",G(N({},c),{children:s})),e[9]=s,e[10]=c,e[11]=m):m=e[11],m}let d;return e[12]!==n||e[13]!==s||e[14]!==r||e[15]!==a||e[16]!==l||e[17]!==c||e[18]!==u?(d=i.jsx(wt.div,G(N({layout:a,layoutDependency:l,transition:u,initial:r,animate:n},c),{children:s})),e[12]=n,e[13]=s,e[14]=r,e[15]=a,e[16]=l,e[17]=c,e[18]=u,e[19]=d):d=e[19],d},Kz=t=>{"use forget";const e=D.c(2),{children:n}=t;let s;return e[0]!==n?(s=i.jsx(i.Fragment,{children:n}),e[0]=n,e[1]=s):s=e[1],s},Yz=t=>{"use forget";const e=D.c(2),{children:n}=t;let s;return e[0]!==n?(s=i.jsx("div",{className:"ms-auto flex items-center gap-1.5",onPointerDown:XFe,children:n}),e[0]=n,e[1]=s):s=e[1],s},Zz=t=>{"use forget";const e=D.c(2),{children:n}=t;let s;return e[0]!==n?(s=i.jsx(i.Fragment,{children:n}),e[0]=n,e[1]=s):s=e[1],s},Qz=t=>{"use forget";const e=D.c(2),{children:n}=t;let s;return e[0]!==n?(s=n?i.jsx(i.Fragment,{children:n}):null,e[0]=n,e[1]=s):s=e[1],s},Jz=t=>{"use forget";const e=D.c(2),{children:n}=t;let s;return e[0]!==n?(s=i.jsx("div",{onPointerDown:eUe,children:n}),e[0]=n,e[1]=s):s=e[1],s},Xz=t=>{"use forget";const e=D.c(2),{children:n}=t;let s;return e[0]!==n?(s=i.jsx("div",{onPointerDown:tUe,children:n}),e[0]=n,e[1]=s):s=e[1],s},eW=t=>{"use forget";const e=D.c(5),{children:n,width:s}=t,r=(s===void 0?"full":s)==="fit"?"w-fit":"w-full";let a;e[0]!==r?(a=q(r),e[0]=r,e[1]=a):a=e[1];let l;return e[2]!==n||e[3]!==a?(l=i.jsx("div",{className:a,onPointerDown:nUe,children:n}),e[2]=n,e[3]=a,e[4]=l):l=e[4],l},tW=t=>{"use forget";const e=D.c(2),{children:n}=t;let s;return e[0]!==n?(s=i.jsx(i.Fragment,{children:n}),e[0]=n,e[1]=s):s=e[1],s};function JFe(t){const e=t==null?void 0:t.parentElement;if(!t||!e)return;const n=()=>{const o=M7(t,"data-collapse-labels");o&&t.removeAttribute("data-collapse-labels");const r=e.clientWidth-t.scrollWidth,a=r<0||o&&r<8;rc(t,"data-collapse-labels",a)},s=new ResizeObserver(n);return s.observe(t),s.observe(e),()=>s.disconnect()}function XFe(t){return t.stopPropagation()}function eUe(t){return t.stopPropagation()}function tUe(t){return t.stopPropagation()}function nUe(t){return t.stopPropagation()}const rgt=Object.freeze(Object.defineProperty({__proto__:null,BaseFooterAction:Qz,Composer:QFe,FooterAction:Jz,HeaderSlot:eW,HiddenFormInput:tW,LeadingAction:Zz,PrimaryContent:Kz,SubmitButton:Yz,TrailingFooterAction:Xz},Symbol.toStringTag,{value:"Module"})),agt=Bn(t=>yt(()=>{var d,f;if(!sUe(t))return[];const e=Fn(t),n=ug(t),s=n!=null?y3(n):void 0,r=fee()?mee(t.ctx,s):Ca(),a=i_(),l=qd(),c=(f=(d=Et())==null?void 0:d.isWorkspaceAccount())!=null?f:!1,u=pee(t);return r==null?void 0:r.filter(m=>!(!Yw({systemHint:m,modelConfig:e,conversationMode:n,isTemporaryChat:a,isDeveloperMode:l,isWorkspaceTenant:c,startedWithByoMcp:u})||m.systemHint===Ke.Agent&&!oUe(t)||m.systemHint===Ke.Slurm&&!rUe(t)))},{equals:Ji})),sUe=Bn(t=>yt(()=>{const e=ug(t);return e==null||e.kind===Bt.PrimaryAssistant||e.kind===Bt.GizmoInteraction&&gl(y3(e))})),oUe=Bn(t=>yt(()=>{var o,r,a;if(!xe("3084799213")||A7(t))return!0;const n=N7(t,l=>k3(l.message));return(a=(r=(o=n==null?void 0:n.message.metadata)==null?void 0:o.system_hints)==null?void 0:r.includes(Ke.Agent))!=null?a:!1})),rUe=Bn(t=>yt(()=>{const e=ug(t);return(e==null?void 0:e.kind)!==Bt.GizmoInteraction||!e.gizmo||M3(e.gizmo)&&!O3(e.gizmo)})),igt=t=>{"use forget";var c;const e=D.c(2),{clientThreadId:n,accountUserId:s}=t,o=Ze(n,aUe);if(!((o==null?void 0:o.id)!=null&&o.id!==s))return null;const a=(c=o==null?void 0:o.name)!=null?c:"the owner";let l;return e[0]!==a?(l=i.jsx("div",{className:"bg-token-main-surface-secondary text-token-text-secondary mb-3 flex w-full items-center justify-start rounded-2xl px-3 py-3 text-start text-xs md:p-4",children:i.jsx("p",{className:"m-0",children:i.jsx(P,{id:"thread.sharedProjectConversationOwnerNotice",defaultMessage:"This is a conversation between ChatGPT and {name}. Responding will create a branch.",values:{name:a}})})}),e[0]=a,e[1]=l):l=e[1],l};function aUe(t){return t==null?void 0:t.sharedProjectConversationOwner}function lgt(){const t=te();return i.jsx(Se,{onClick:()=>{As.openModal(Nm.SharedConversationModeration)},className:"w-1/3",children:t.formatMessage({id:"thread.sharedConversation.moderate",defaultMessage:"Moderate conversation"})})}function cgt(){const[t,e]=v.useState({undoStack:[],currentIndex:-1});function n(a){e(l=>({undoStack:[...l.undoStack.slice(0,l.currentIndex+1),a],currentIndex:l.currentIndex+1}))}function s(){e(a=>({undoStack:a.undoStack,currentIndex:Math.max(a.currentIndex-1,-1)}))}function o(){e(a=>({undoStack:a.undoStack,currentIndex:Math.min(a.currentIndex+1,a.undoStack.length-1)}))}function r(){e({undoStack:[],currentIndex:-1})}return{currentDrawnShape:t.undoStack.length>0?t.undoStack[t.currentIndex]:null,onNewDrawnShape:n,canUndoDrawing:t.currentIndex>=0,undoDrawing:s,canRedoDrawing:t.currentIndex<t.undoStack.length-1,redoDrawing:o,clearAllDrawings:r}}const iUe=je(()=>Me(()=>import("./885bfdd1-h026pk65i0sud4j4.js"),__vite__mapDeps([295,1,2,3,296,297])).then(t=>t.DynamicDrawingCanvas)),lUe=136;function ugt({image:t,drawingState:e,drawingCanvasRef:n}){return i.jsx("div",{className:"pointer-events-none absolute inset-0 z-[60] overflow-visible",children:i.jsx("div",{className:"pointer-events-auto absolute inset-0",children:i.jsx(iUe,{drawingCanvasRef:n,color:"rgba(0, 122, 255, 0.5)",dashedOutlineColor:"rgba(255, 255, 255, 0.65)",cursorWidth:lUe,canvasWidth:t.width,canvasHeight:t.height,currentDrawnShape:e.currentDrawnShape,onNewDrawnShape:e.onNewDrawnShape})})})}function cUe(s){var o=s,{className:t,children:e}=o,n=De(o,["className","children"]);return i.jsx(_O,G(N({className:t},n),{children:e}))}const uUe=o=>{var r=o,{value:t,className:e,label:n}=r,s=De(r,["value","className","label"]);return i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(E_,N({id:t,value:t,className:q("border-token-text-tertiary hover:bg-token-main-surface-tertiary h-4 w-4 shrink-0 gap-2 rounded-full border bg-transparent shadow-sm outline-hidden",e)},s)),i.jsx("label",{htmlFor:t,className:"w-full cursor-pointer",children:n})]})},dUe=n=>{var s=n,{className:t}=s,e=De(s,["className"]);return i.jsx(T_,N({className:q("after:bg-token-text-primary relative flex h-full w-full items-center justify-center after:block after:h-2 after:w-2 after:rounded-[50%] after:content-['']",t)},e))},Mb={Root:cUe,Item:uUe,Indicator:dUe};function nW(n){var s=n,{className:t}=s,e=De(s,["className"]);return i.jsx("textarea",N({className:q("form-textarea border-token-border-default bg-token-main-surface-secondary text-token-text-primary focus:border-token-text-primary focus:ring-token-text-primary w-full rounded-lg border text-sm focus:shadow-none focus:outline-hidden",t)},e))}function fUe(t){var e,n;return((n=(e=t.sub_reasons)==null?void 0:e.length)!=null?n:0)===0&&t.details_placeholder==null&&t.link_attachment==null&&t.subtext==null}function dgt(t,e,n,s,o={},r,a,l){const c=Dt(),u={};return r&&Bs(r)&&a&&(u["chatgpt-project-id"]=r,u["chatgpt-conv-owner-id"]=a),l&&(u["chatgpt-conv-message-id"]=l),zt({mutationFn:d=>{var m,p;return mt()?ue.safePost("/report_flow/report",{requestBody:G(N({},d),{entity_type:n,entity_id:e,additional_fields_values:N(N({},(m=d.additional_fields_values)!=null?m:{}),o!=null?o:{}),product_area:s}),additionalHeaders:u,authOption:Ot.SendIfAvailable}):t3.safePost("/report_flow/report",{requestBody:G(N({},d),{entity_type:n,entity_id:e,additional_fields_values:N(N({},(p=d.additional_fields_values)!=null?p:{}),o!=null?o:{}),product_area:s}),authOption:Ot.Anonymous})},onError:d=>{var f;Ve.addError(new Error("Error occurred while reporting",{cause:d}),{entityType:n,id:e}),c.danger(t.formatMessage({id:"report.submitError",defaultMessage:"Error reporting: {detail}"},{detail:d.message}),{toastId:"report_mutation_failed_to_report",loggingTitle:String((f=d==null?void 0:d.message)!=null?f:""),loggingDescription:"Error message when submitting a report fails"})}})}function fgt(t){return ut({queryKey:["reportReasons",{entityType:t}],queryFn:()=>mt()?ue.safeGet("/report_flow/reasons/{entity_type}",{parameters:{path:{entity_type:t}},authOption:Ot.SendIfAvailable}):t3.safeGet("/report_flow/reasons/{entity_type}",{parameters:{path:{entity_type:t}},authOption:Ot.Anonymous})})}var xP;Tt.div(xP||(xP=_t(["divide-y overflow-hidden rounded-md border border-token-border-medium"])));var yP;Tt.button(yP||(yP=_t(["w-full border-token-border-medium p-2 text-start text-sm hover:bg-token-main-surface-secondary"])));var bP;const mUe=Tt.div(bP||(bP=_t(["text-md"])));var vP;const pUe=Tt.div(vP||(vP=_t(["text-sm text-token-text-secondary"])));function Kf({header:t,subHeader:e}){return t==null&&e==null?null:i.jsxs("div",{className:"mb-4",children:[t!=null&&i.jsx(mUe,{children:t}),e!=null&&i.jsx(pUe,{children:e})]})}function gUe({reasons:t,setSelectedReason:e,selectedReason:n}){var s;return i.jsx(Mb.Root,{value:(s=n==null?void 0:n.id)!=null?s:"",onValueChange:o=>e(t.find(r=>r.id===o)),className:"flex flex-col gap-3",children:t.map(o=>i.jsx(Mb.Item,{value:o.id,label:o.cta,children:i.jsx(Mb.Indicator,{})},o.id))})}function hUe({reason:t,details:e,setDetails:n,name:s,setName:o,email:r,setEmail:a,showName:l,showEmail:c}){const u=l||c,d=te(),f=d.formatMessage({id:"report.loggedOut.name",defaultMessage:"Your name"}),m=d.formatMessage({id:"report.loggedOut.email",defaultMessage:"Your email address"}),p=d.formatMessage({id:"report.loggedOut.details",defaultMessage:"Add details"});return i.jsxs("div",{className:"flex flex-col gap-4",children:[u&&i.jsxs("div",{className:"flex flex-col gap-4 text-sm",children:[l&&i.jsxs("div",{className:"flex flex-col gap-1",children:[f,i.jsx(xd,{ariaLabel:f,name:"name",type:"text",value:s,onChange:g=>o(g.target.value)})]}),c&&i.jsxs("div",{className:"flex flex-col gap-1",children:[m,i.jsx(xd,{ariaLabel:m,name:"email",type:"email",value:r,onChange:g=>a(g.target.value)})]})]}),i.jsxs("div",{className:"flex flex-col gap-1 text-sm",children:[u&&p,i.jsx(nW,{"aria-label":u?p:void 0,value:e,onChange:g=>n(g.target.value),placeholder:!u&&t.details_placeholder?t.details_placeholder:void 0,autoFocus:!0,className:"bg-token-main-surface-primary!"})]}),t.subtext!=null&&i.jsx("div",{className:"text-token-text-secondary text-sm",children:t.subtext})]})}function mgt(t){"use forget";var Y,K;const e=D.c(67),{reasons:n,submitReport:s,title:o,onClose:r,header:a,footerSecondaryButton:l}=t,c=te();let u;e[0]===Symbol.for("react.memo_cache_sentinel")?(u=[],e[0]=u):u=e[0];const[d,f]=v.useState(u);let m=n,p;for(const Z of d)p=m.find(J=>J.id===Z.id),m=(Y=p==null?void 0:p.sub_reasons)!=null?Y:[];const[g,h]=v.useState(),_=g!=null&&fUe(g),[x,b]=v.useState(""),[y,S]=v.useState(""),[C,w]=v.useState(""),k=(K=p==null?void 0:p.additional_fields)==null?void 0:K.map(xUe),E=k==null?void 0:k.includes($M.UserName),T=k==null?void 0:k.includes($M.UserEmail);let M;if(_){let Z;e[1]!==g.id||e[2]!==s?(Z=()=>{s.mutateAsync({reason:{id:g.id}})},e[1]=g.id,e[2]=s,e[3]=Z):Z=e[3];const J=!g||s.isPending;let Q;e[4]===Symbol.for("react.memo_cache_sentinel")?(Q=i.jsx(P,{id:"report.submitReport",defaultMessage:"Submit"}),e[4]=Q):Q=e[4];let ne;e[5]!==s.isPending||e[6]!==Z||e[7]!==J?(ne=i.jsx(Se,{color:"primary",onClick:Z,disabled:J,loading:s.isPending,children:Q}),e[5]=s.isPending,e[6]=Z,e[7]=J,e[8]=ne):ne=e[8],M=ne}else{let Z;e[9]!==g?(Z=()=>{g&&(f(ie=>[...ie,g]),h(void 0))},e[9]=g,e[10]=Z):Z=e[10];const J=!g;let Q;e[11]===Symbol.for("react.memo_cache_sentinel")?(Q=i.jsx(P,{id:"z5fExR",defaultMessage:"Next"}),e[11]=Q):Q=e[11];let ne;e[12]!==Z||e[13]!==J?(ne=i.jsx(Se,{color:"primary",onClick:Z,disabled:J,children:Q}),e[12]=Z,e[13]=J,e[14]=ne):ne=e[14],M=ne}let A=p!=null?i.jsx(Se,{onClick:()=>{if(d.length>0){const Z=d[d.length-1];f(_Ue),h(Z)}},color:"secondary",children:i.jsx(P,{id:"xJnONr",defaultMessage:"Back"})}):l;const I=(p==null?void 0:p.subtext)!=null&&i.jsx("div",{className:"text-token-text-secondary text-sm",children:p.subtext});let j;e[15]!==c?(j=c.formatMessage({id:"report.submittedModal.header.2",defaultMessage:"Thanks for your report"}),e[15]=c,e[16]=j):j=e[16];const R=j;let O;e[17]!==c?(O=c.formatMessage({id:"report.submittedModal.subHeader.2",defaultMessage:"We appreciate you taking the time to share this. Our team will review the content to determine if it violates our policies."}),e[17]=c,e[18]=O):O=e[18];const L=O;let B;e[19]!==c?(B=c.formatMessage({id:"report.linkAttachmentHeader",defaultMessage:"We need a few more details"}),e[19]=c,e[20]=B):B=e[20];const U=B;let H;e[21]!==c?(H=c.formatMessage({id:"report.linkAttachmentSubHeader",defaultMessage:"Help us take a closer look by filing out a short form."}),e[21]=c,e[22]=H):H=e[22];const $=H;let F,z=s.isSuccess?R:o;if(s.isSuccess){A=void 0;let Z;e[23]===Symbol.for("react.memo_cache_sentinel")?(Z=i.jsx(P,{id:"Y+ALYr",defaultMessage:"Close"}),e[23]=Z):Z=e[23];let J;e[24]!==r?(J=i.jsx(Se,{color:"primary",onClick:r,children:Z}),e[24]=r,e[25]=J):J=e[25],M=J;let Q,ne;e[26]===Symbol.for("react.memo_cache_sentinel")?(Q=i.jsx("br",{}),ne=i.jsx("br",{}),e[26]=Q,e[27]=ne):(Q=e[26],ne=e[27]);let ie;e[28]===Symbol.for("react.memo_cache_sentinel")?(ie=i.jsx("a",{href:"https://openai.com/transparency-and-content-moderation/",target:"_blank",rel:"noreferrer",className:"break-words underline",children:i.jsx(P,{id:"report.submittedModal.link.2",defaultMessage:"Learn how reports are handled"})}),e[28]=ie):ie=e[28];let fe;e[29]!==L?(fe=i.jsx(i.Fragment,{children:i.jsxs("div",{className:"text-sm",children:[L,Q,ne,ie]})}),e[29]=L,e[30]=fe):fe=e[30],F=fe}else if((p==null?void 0:p.details_placeholder)!=null){let Z;e[31]===Symbol.for("react.memo_cache_sentinel")?(Z=i.jsx(P,{id:"report.submitReport",defaultMessage:"Submit"}),e[31]=Z):Z=e[31],M=i.jsx(Se,{color:"primary",onClick:()=>{let pe;(E||T)&&(pe={},E&&(pe.user_name=y),T&&(pe.user_email=C)),s.mutateAsync({reason:{id:p.id,details:x},additional_fields_values:pe})},disabled:s.isPending,loading:s.isPending,children:Z});const J=p;let Q;e[32]!==J.cta?(Q=i.jsx(Kf,{header:J.cta}),e[32]=J.cta,e[33]=Q):Q=e[33];const ne=p,ie=E!=null?E:!1,fe=T!=null?T:!1;let ae;e[34]!==x||e[35]!==C||e[36]!==y||e[37]!==ie||e[38]!==fe||e[39]!==ne?(ae=i.jsx(hUe,{reason:ne,showName:ie,showEmail:fe,details:x,setDetails:b,name:y,setName:S,email:C,setEmail:w}),e[34]=x,e[35]=C,e[36]=y,e[37]=ie,e[38]=fe,e[39]=ne,e[40]=ae):ae=e[40];let le;e[41]!==ae||e[42]!==Q?(le=i.jsxs(i.Fragment,{children:[Q,ae]}),e[41]=ae,e[42]=Q,e[43]=le):le=e[43],F=le}else if((p==null?void 0:p.link_attachment)!=null){const Z=p.link_attachment;let J;e[44]===Symbol.for("react.memo_cache_sentinel")?(J=i.jsx(P,{id:"report.viewForm",defaultMessage:"View form"}),e[44]=J):J=e[44],M=i.jsx(Se,{color:"primary",onClick:()=>{window.open(Z,"_blank")},children:J}),z=U;let Q;e[45]!==$?(Q=i.jsx(Kf,{header:$}),e[45]=$,e[46]=Q):Q=e[46];let ne;e[47]!==I||e[48]!==Q?(ne=i.jsxs(i.Fragment,{children:[Q,I]}),e[47]=I,e[48]=Q,e[49]=ne):ne=e[49],F=ne}else if(m.length>0){let Z;e[50]!==a?(Z=i.jsx(Kf,{header:a}),e[50]=a,e[51]=Z):Z=e[51];const J=m.length>0&&i.jsx(gUe,{reasons:m,selectedReason:g,setSelectedReason:h});let Q;e[52]!==I||e[53]!==Z||e[54]!==J?(Q=i.jsxs(i.Fragment,{children:[Z,J,I]}),e[52]=I,e[53]=Z,e[54]=J,e[55]=Q):Q=e[55],F=Q}else if((p==null?void 0:p.subtext)!=null){M=void 0;let Z;e[56]!==a?(Z=i.jsx(Kf,{header:a}),e[56]=a,e[57]=Z):Z=e[57],F=i.jsxs(i.Fragment,{children:[Z,i.jsx("div",{className:"text-sm",children:p==null?void 0:p.subtext})]})}else{Ve.addError("Reporting: arrived at empty leaf reason",p),M=void 0,A=void 0;let Z;e[58]!==R||e[59]!==L?(Z=i.jsx(Kf,{header:R,subHeader:L}),e[58]=R,e[59]=L,e[60]=Z):Z=e[60],F=Z}let W;return e[61]!==F||e[62]!==z||e[63]!==r||e[64]!==M||e[65]!==A?(W=i.jsx(en,{testId:"modal-report-reason-selection",title:z,onClose:r,isOpen:!0,showCloseButton:!0,type:"success",secondaryButton:A,primaryButton:M,children:F}),e[61]=F,e[62]=z,e[63]=r,e[64]=M,e[65]=A,e[66]=W):W=e[66],W}function _Ue(t){return t.slice(0,-1)}function xUe(t){return t.id}const yUe="https://openai.com/form/report-content/",pgt=({areButtonsFullWidth:t,post:e,setIsReportModalOpen:n})=>{const s=!mt(),o=te(),r=e.attachments.every(a=>a.kind==="media_generation");return i.jsx("div",{className:"border-token-border-default flex w-full justify-center border-b-[0.5px] px-2 sm:px-6",children:i.jsx("div",{className:q("flex w-full items-center justify-between gap-4 py-4",!t&&"max-w-[1200px]"),children:i.jsxs("div",{children:[i.jsx(St,{align:"start",theme:"primary",labelTextAlign:"left",wide:!0,contentClassName:"![&>*]:font-normal *:font-normal",label:o.formatMessage({id:"rZHri8",defaultMessage:"The content youre seeing was made by a ChatGPT user. It may be unverified or contain potentially unsafe content that doesnt reflect the views of OpenAI."}),children:i.jsx("h1",{className:"text-token-text-primary line-clamp-1 text-base font-semibold",children:e.text})}),i.jsxs("div",{className:"text-token-text-secondary xs:flex-col flex flex-col gap-1.5 text-xs sm:flex-row",children:[!r&&i.jsx("div",{className:"cursor-default",children:o.formatMessage(Ab.madeWithCanvas)}),i.jsx("div",{children:s?i.jsx("a",{className:"underline",href:yUe,target:"_blank",rel:"noreferrer",onClick:()=>{},children:o.formatMessage(Ab.report)}):i.jsx("button",{className:"underline",onClick:()=>{n(!0)},children:o.formatMessage(Ab.report)})})]})]})})})},Ab=we({report:{id:"DHsq+d",defaultMessage:"Report"},editWithChatGPT:{id:"DrcR8S",defaultMessage:"Edit with ChatGPT"},edit:{id:"PpEliN",defaultMessage:"Edit"},madeWithCanvas:{id:"h8SGou",defaultMessage:"Youre viewing user-generated content that may be unverified or unsafe."}}),bUe=t=>v.createElement("svg",N({width:357,height:62,viewBox:"0 0 357 62",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),v.createElement("path",{d:"M30.8694 50.7428C19.9894 50.7428 12.4244 42.4978 12.4244 31.1078C12.4244 19.7178 19.9894 11.4728 30.6994 11.4728C38.5194 11.4728 44.5544 16.0628 46.3394 21.6728H58.4944C56.3694 9.43281 44.8944 0.507812 30.5294 0.507812C13.2744 0.507812 0.609375 14.1928 0.609375 31.1078C0.609375 48.0228 12.9344 61.7078 30.6144 61.7078C45.2344 61.7078 56.4544 52.9528 58.7494 40.5428H46.6794C44.6394 46.2378 38.6894 50.7428 30.8694 50.7428Z",fill:"currentColor"}),v.createElement("path",{d:"M88.586 17.5094C82.976 17.5094 78.556 19.9744 76.091 23.3744V1.35938H65.041V60.8594H76.091V37.9944C76.091 31.3644 79.661 27.0294 85.441 27.0294C90.711 27.0294 93.686 31.1094 93.686 36.8044V60.8594H104.736V35.0194C104.736 24.4794 98.276 17.5094 88.586 17.5094Z",fill:"currentColor"}),v.createElement("path",{d:"M150.04 33.1478C150.04 23.4578 143.41 17.5078 131.17 17.5078C121.14 17.5078 113.15 23.1178 111.79 31.2778H122.925C123.775 28.4728 126.835 26.2628 131.085 26.2628C136.61 26.2628 139.245 29.1528 139.245 34.1678V34.4228L128.45 35.3578C117.145 36.2928 110.855 40.8828 110.855 49.5528C110.855 56.8628 117.145 61.7078 125.9 61.7078C131.765 61.7078 137.46 59.4128 139.84 55.5878C139.84 57.4578 140.01 59.1578 140.35 60.8578H150.635C150.21 58.1378 150.04 54.9928 150.04 51.3378V33.1478ZM139.245 43.2628C139.245 48.2778 135.505 53.3778 127.94 53.3778C123.86 53.3778 121.65 51.4228 121.65 48.5328C121.65 45.3878 123.775 43.4328 128.535 43.0078L139.245 42.0728V43.2628Z",fill:"currentColor"}),v.createElement("path",{d:"M173.245 4.58984H162.195V18.3598H153.355V27.2848H162.195V48.1948C162.195 56.2698 166.36 60.8598 175.285 60.8598H184.125V51.6798H178.515C174.775 51.6798 173.245 50.4048 173.245 46.9198V27.2848H184.125V18.3598H173.245V4.58984Z",fill:"currentColor"}),v.createElement("path",{d:"M239.033 29.0678H219.993V38.5878H236.228C235.123 46.4928 227.728 51.2528 219.483 51.2528C207.583 51.2528 200.613 42.4978 200.613 31.1078C200.613 19.7178 208.433 11.3878 219.143 11.3878C226.453 11.3878 232.403 15.6378 233.933 20.3978H246.088C243.793 8.58281 232.913 0.507812 218.973 0.507812C201.803 0.507812 189.053 14.3628 189.053 31.1928C189.053 48.0228 200.783 61.7078 218.293 61.7078C226.283 61.7078 233.508 58.1378 236.738 53.2928V60.8578H246.598V36.6328C246.598 31.7878 243.878 29.0678 239.033 29.0678Z",fill:"currentColor"}),v.createElement("path",{d:"M281.703 1.35938H255.354V60.8594H266.573V38.5044H281.789C293.519 38.5044 301.849 31.6194 301.849 20.0594C301.849 8.49937 293.518 1.35938 281.703 1.35938ZM280.939 28.6444H266.573V11.5594H280.939C286.719 11.5594 290.458 14.8744 290.458 20.0594C290.458 25.2444 286.719 28.6444 280.939 28.6444Z",fill:"currentColor"}),v.createElement("path",{d:"M304.652 1.35938V11.5594H324.967V60.8594H336.187V11.5594H356.587V1.35938H304.652Z",fill:"currentColor"}));function vUe({className:t}){const e=te();return i.jsx(bUe,{className:q("h-6 w-24",t),"aria-label":e.formatMessage({id:"VJmCc9",defaultMessage:"ChatGPT logo"}),role:"img"})}const sW=je(()=>Me(()=>import("./3df9b3d9-nm0twn9ejs0h860k.js"),__vite__mapDeps([298,1,2,3,299,300,237,301,302,75,218,303,304,227,62,238,240,236,220,239,77,305,61,306,307,60,63,64,26,27,28,36,24,25,29,30,35,65,59,66,33,70,100,101,18,19,102,308,309,219,221,310,311,312,313,314,112,113,315,156,147,157,153,21,22,139])).then(t=>t.AttachmentContent));function SUe(){sW.prefetch()}function oW({attachments:t,variant:e,className:n,clientThreadId:s}){return i.jsx(i.Fragment,{children:t.map((o,r)=>i.jsx("div",{className:n,children:i.jsx(sW,{attachment:o,caption:"",variant:e,hasActiveRequest:!1,clientThreadId:s})},r))})}function CUe({attachments:t,clientThreadId:e,className:n}){var o;const s=((o=t[0])==null?void 0:o.kind)==="media_generation";return i.jsx(gee,{conversation:Pt(e),children:i.jsxs("div",{className:q("bg-token-primary relative m-0 box-border w-full overflow-hidden",n),"data-testid":"sharing-post-unfurl-view",children:[i.jsx(oW,{attachments:t,variant:"unfurl",className:"h-full w-full",clientThreadId:e}),i.jsx("div",{className:q("absolute start-0 end-0 bottom-0 z-10 h-40 bg-gradient-to-t to-transparent",s?"from-black/35":"from-token-main-surface-primary")}),i.jsx("div",{className:"absolute end-5 bottom-5 z-10 inline-flex flex-shrink-0 items-end justify-end",children:i.jsx(vUe,{className:q("inline h-4 w-24 text-end",s&&"text-white")})})]})})}const wUe=Object.freeze(Object.defineProperty({__proto__:null,PostListPreview:oW,PostUnfurlPreview:CUe,prefetchPostPreviewContentComponent:SUe},Symbol.toStringTag,{value:"Module"})),kUe=je(()=>Me(()=>import("./83c51868-dkyaj3i48j89gbni.js"),__vite__mapDeps([316,1,317,72,30,29,69,2,3])).then(t=>({default:t.HighlightProvider})),{loading:({children:t})=>i.jsx(i.Fragment,{children:t})}),ggt=t=>{"use forget";var r;const e=D.c(6);let n,s;e[0]!==t?(r=t,{children:n}=r,s=De(r,["children"]),e[0]=t,e[1]=n,e[2]=s):(n=e[1],s=e[2]);let o;return e[3]!==n||e[4]!==s?(o=i.jsx(kUe,G(N({},s),{children:n})),e[3]=n,e[4]=s,e[5]=o):o=e[5],o},EUe=t=>{"use forget";var $;const e=D.c(56),{onPromptSelected:n,onManagePrompts:s}=t,o=te(),[r,a]=v.useState(!1);let l;e[0]===Symbol.for("react.memo_cache_sentinel")?(l=Ax(),e[0]=l):l=e[0];const c=l;let u;e[1]===Symbol.for("react.memo_cache_sentinel")?(u={enabled:c},e[1]=u):u=e[1];const{data:d,isLoading:f,hasNextPage:m,isFetchingNextPage:p,fetchNextPage:g}=ET(u),h=TUe;let _;e[2]!==s?(_=()=>{s("sidechat-suggestions")},e[2]=s,e[3]=_):_=e[3];const x=_;let b,y;e[4]!==g||e[5]!==m||e[6]!==p||e[7]!==r?(b=()=>{!r||!m||p||g()},y=[g,m,p,r],e[4]=g,e[5]=m,e[6]=p,e[7]=r,e[8]=b,e[9]=y):(b=e[8],y=e[9]),v.useEffect(b,y);let S;e[10]!==(d==null?void 0:d.pages)?(S=($=d==null?void 0:d.pages.flatMap(MUe))!=null?$:[],e[10]=d==null?void 0:d.pages,e[11]=S):S=e[11];const C=S;let w,k,E,T,M,A,I,j,R,O,L;if(e[12]!==C||e[13]!==x||e[14]!==o||e[15]!==p||e[16]!==f||e[17]!==n){j=Symbol.for("react.early_return_sentinel");e:{const F=C.slice(0,50);if(E=f||p,!c){j=null;break e}k=Xo,T="top",M="start",A=a,e[29]===Symbol.for("react.memo_cache_sentinel")?(I=i.jsx("button",{type:"button",className:"text-token-text-secondary rounded-lg px-2 py-1 text-xs transition hover:bg-black/5 dark:hover:bg-white/5",children:i.jsx(P,{id:"qnrqAq",defaultMessage:"Bookmarks"})}),e[29]=I):I=e[29],w=ee.Group;let z;e[30]!==o?(z=o.formatMessage({id:"hIwYjz",defaultMessage:"Create prompt"}),e[30]=o,e[31]=z):z=e[31];let W;e[32]===Symbol.for("react.memo_cache_sentinel")?(W=i.jsx(tr,{className:"icon"}),e[32]=W):W=e[32],e[33]!==z?(R=i.jsx(ee.Item,{label:z,icon:W,onSelect:h}),e[33]=z,e[34]=R):R=e[34];let Y;e[35]!==o?(Y=o.formatMessage({id:"yl/fPv",defaultMessage:"Manage prompts"}),e[35]=o,e[36]=Y):Y=e[36];let K;e[37]===Symbol.for("react.memo_cache_sentinel")?(K=i.jsx(f_,{className:"icon"}),e[37]=K):K=e[37],e[38]!==x||e[39]!==Y?(O=i.jsx(ee.Item,{label:Y,icon:K,onSelect:x}),e[38]=x,e[39]=Y,e[40]=O):O=e[40],L=F.length>0&&i.jsxs(i.Fragment,{children:[i.jsx(ee.Separator,{}),F.map((Z,J)=>{var Q;return i.jsx(ee.Item,{label:Z.name,onSelect:()=>{n(Z,"sidechat-suggestions")}},(Q=Z.id)!=null?Q:"prompt-".concat(J))})]})}e[12]=C,e[13]=x,e[14]=o,e[15]=p,e[16]=f,e[17]=n,e[18]=w,e[19]=k,e[20]=E,e[21]=T,e[22]=M,e[23]=A,e[24]=I,e[25]=j,e[26]=R,e[27]=O,e[28]=L}else w=e[18],k=e[19],E=e[20],T=e[21],M=e[22],A=e[23],I=e[24],j=e[25],R=e[26],O=e[27],L=e[28];if(j!==Symbol.for("react.early_return_sentinel"))return j;let B;e[41]!==E?(B=E&&i.jsxs(i.Fragment,{children:[i.jsx(ee.Separator,{}),i.jsx(ee.Shimmer,{size:"long"}),i.jsx(ee.Shimmer,{size:"short"}),i.jsx(ee.Shimmer,{size:"long"})]}),e[41]=E,e[42]=B):B=e[42];let U;e[43]!==w||e[44]!==B||e[45]!==R||e[46]!==O||e[47]!==L?(U=i.jsxs(w,{children:[R,O,L,B]}),e[43]=w,e[44]=B,e[45]=R,e[46]=O,e[47]=L,e[48]=U):U=e[48];let H;return e[49]!==k||e[50]!==T||e[51]!==M||e[52]!==A||e[53]!==I||e[54]!==U?(H=i.jsx(k,{side:T,contentAlign:M,onOpenChange:A,triggerButton:I,children:U}),e[49]=k,e[50]=T,e[51]=M,e[52]=A,e[53]=I,e[54]=U,e[55]=H):H=e[55],H};function TUe(){rt(va,{referer:"sidechat-suggestions"})}function MUe(t){var e;return(e=t.prompts)!=null?e:[]}const rW=t=>{"use forget";const e=D.c(25),{title:n,prompt:s,leftIcon:o,onClick:r,action:a,showPromptTooltip:l}=t,c=l===void 0?!0:l,u=v.useRef(null);let d;e[0]!==s?(d=s?i.jsx("div",{ref:u,className:"text-token-text-secondary min-w-0 flex-1 truncate text-sm",children:s}):null,e[0]=s,e[1]=d):d=e[1];const f=d;let m;e[2]===Symbol.for("react.memo_cache_sentinel")?(m=q("relative w-full rounded-md px-3.5 py-1.5 text-start","transition-colors hover:bg-black/5 dark:hover:bg-white/5","pe-9 group-hover:bg-black/5 dark:group-hover:bg-white/5"),e[2]=m):m=e[2];let p;e[3]!==o?(p=i.jsx("div",{className:"flex h-4 w-4 shrink-0 items-center justify-center","aria-hidden":!0,children:o}),e[3]=o,e[4]=p):p=e[4];let g;e[5]!==n?(g=i.jsx("div",{className:"text-token-text-primary max-w-[45%] truncate text-sm",children:n}),e[5]=n,e[6]=g):g=e[6];const h=s?f:null;let _;e[7]!==g||e[8]!==h?(_=i.jsxs("div",{className:"flex min-w-0 flex-1 items-center gap-2",children:[g,h]}),e[7]=g,e[8]=h,e[9]=_):_=e[9];let x;e[10]!==p||e[11]!==_?(x=i.jsxs("div",{className:"flex items-center gap-2 overflow-hidden",children:[p,_]}),e[10]=p,e[11]=_,e[12]=x):x=e[12];let b;e[13]!==r||e[14]!==x?(b=i.jsx("button",{type:"button",onClick:r,className:m,children:x}),e[13]=r,e[14]=x,e[15]=b):b=e[15];const y=b;let S;e[16]!==y||e[17]!==s||e[18]!==c?(S=c&&s?i.jsx(St,{label:s,triggerAs:null,delayDuration:1e3,side:"top",children:y}):y,e[16]=y,e[17]=s,e[18]=c,e[19]=S):S=e[19];let C;e[20]!==a?(C=a?i.jsx(St,{label:a.label,triggerAs:null,side:"top",children:i.jsx("button",{type:"button",className:"text-token-text-secondary pointer-events-none absolute end-2 top-1/2 -translate-y-1/2 rounded-md p-1 opacity-0 transition-opacity group-hover:pointer-events-auto group-hover:opacity-100 hover:bg-black/5 dark:hover:bg-white/5","aria-label":a.label,onClick:k=>{k.preventDefault(),k.stopPropagation(),a.onClick(k)},children:a.icon})}):null,e[20]=a,e[21]=C):C=e[21];let w;return e[22]!==S||e[23]!==C?(w=i.jsxs("li",{className:"group relative w-full",children:[S,C]}),e[22]=S,e[23]=C,e[24]=w):w=e[24],w},AUe=t=>{"use forget";var _,x;const e=D.c(18),{prompt:n,onPromptClick:s,onEdit:o}=t,r=te();let a;e[0]!==r?(a=r.formatMessage({id:"maSoKN",defaultMessage:"Edit prompt"}),e[0]=r,e[1]=a):a=e[1];const l=a,c=(_=n.name)!=null?_:"",u=(x=n.prompt)!=null?x:"";let d;e[2]===Symbol.for("react.memo_cache_sentinel")?(d=i.jsx(ff,{className:"text-token-text-primary block h-4 w-4"}),e[2]=d):d=e[2];let f;e[3]!==s||e[4]!==n?(f=()=>s(n,"sidechat-suggestions"),e[3]=s,e[4]=n,e[5]=f):f=e[5];let m;e[6]===Symbol.for("react.memo_cache_sentinel")?(m=i.jsx(tr,{className:"text-token-text-secondary h-3.5 w-3.5"}),e[6]=m):m=e[6];let p;e[7]!==o||e[8]!==n?(p=()=>o(n,"sidechat-suggestions"),e[7]=o,e[8]=n,e[9]=p):p=e[9];let g;e[10]!==l||e[11]!==p?(g={icon:m,label:l,onClick:p},e[10]=l,e[11]=p,e[12]=g):g=e[12];let h;return e[13]!==c||e[14]!==u||e[15]!==f||e[16]!==g?(h=i.jsx(rW,{title:c,prompt:u,leftIcon:d,onClick:f,action:g}),e[13]=c,e[14]=u,e[15]=f,e[16]=g,e[17]=h):h=e[17],h},NUe=re(me,"b0d0b9",20,20),IUe=t=>{"use forget";var S;const e=D.c(28),{action:n,onItemClick:s,starter:o,index:r,hint:a}=t;let l,c,u;if(e[0]!==n.action_type||e[1]!==n.message||e[2]!==n.subtitle||e[3]!==n.system_hint||e[4]!==n.title||e[5]!==n.url){e:switch(n.action_type){case"chat":{u=n.title,l=n.message,c=(S=n.system_hint)!=null?S:void 0;break e}case"navigation":u=n.title,l=n.subtitle||n.url}e[0]=n.action_type,e[1]=n.message,e[2]=n.subtitle,e[3]=n.system_hint,e[4]=n.title,e[5]=n.url,e[6]=l,e[7]=c,e[8]=u}else l=e[6],c=e[7],u=e[8];const d=te();let f;e[9]===Symbol.for("react.memo_cache_sentinel")?(f=Ax(),e[9]=f):f=e[9];const m=f;let p;e[10]!==d?(p=d.formatMessage({id:"5qIUYz",defaultMessage:"Bookmark prompt"}),e[10]=d,e[11]=p):p=e[11];const g=p,h=l!=null?l:"";if(!u)return null;let _;e[12]===Symbol.for("react.memo_cache_sentinel")?(_=i.jsx(NUe,{className:"text-token-interactive-icon-tertiary-default block h-3 w-3"}),e[12]=_):_=e[12];let x;e[13]!==a||e[14]!==r||e[15]!==s||e[16]!==o?(x=C=>s(C,o,r,a),e[13]=a,e[14]=r,e[15]=s,e[16]=o,e[17]=x):x=e[17];let b;e[18]!==g||e[19]!==h||e[20]!==c||e[21]!==u?(b=m?{icon:i.jsx(ff,{className:"h-3.5 w-3.5"}),label:g,onClick:()=>{rt(va,{prompt:N({name:u!=null?u:"",prompt:h},c?{system_hint:c}:{}),referer:"sidechat-suggestions"})}}:void 0,e[18]=g,e[19]=h,e[20]=c,e[21]=u,e[22]=b):b=e[22];let y;return e[23]!==l||e[24]!==x||e[25]!==b||e[26]!==u?(y=i.jsx(rW,{title:u,prompt:l,leftIcon:_,onClick:x,action:b}),e[23]=l,e[24]=x,e[25]=b,e[26]=u,e[27]=y):y=e[27],y},jUe=t=>{"use forget";const e=D.c(17),{bookmarkedPrompts:n,onBookmarkedPromptClick:s,onBookmarkedPromptEdit:o,suggestedActions:r,suggestedStarters:a,onSuggestedActionClick:l}=t,c=n.length>0,u=r.length>0;if(!c&&!u)return null;let d;if(e[0]!==n||e[1]!==s||e[2]!==o){let p;e[4]!==s||e[5]!==o?(p=(g,h)=>{var _;return i.jsx(AUe,{prompt:g,onPromptClick:s,onEdit:o},(_=g.id)!=null?_:"bookmarked-prompt-".concat(h))},e[4]=s,e[5]=o,e[6]=p):p=e[6],d=n.map(p),e[0]=n,e[1]=s,e[2]=o,e[3]=d}else d=e[3];let f;if(e[7]!==l||e[8]!==r||e[9]!==a){let p;e[11]!==l||e[12]!==a?(p=(g,h)=>{var b,y;const _=a[h];if(!_)return null;const x=g.action_type==="chat"&&(b=g.system_hint)!=null?b:null;return i.jsx(IUe,{action:g,onItemClick:l,starter:_,index:h,hint:x},(y=g.id)!=null?y:g.title)},e[11]=l,e[12]=a,e[13]=p):p=e[13],f=r.map(p),e[7]=l,e[8]=r,e[9]=a,e[10]=f}else f=e[10];let m;return e[14]!==d||e[15]!==f?(m=i.jsx(hee,{children:i.jsx("div",{className:"relative",children:i.jsxs("ul",{className:"flex w-full flex-col gap-1","data-suggested-prompts-list":!0,children:[d,f]})})}),e[14]=d,e[15]=f,e[16]=m):m=e[16],m},hgt=t=>{"use forget";const e=D.c(14),{bookmarkedPrompts:n,onBookmarkedPromptClick:s,onBookmarkedPromptEdit:o,onManagePrompts:r,suggestedActions:a,suggestedStarters:l,onSuggestedActionClick:c}=t;if(!(n.length>0||a.length>0))return null;let d;e[0]===Symbol.for("react.memo_cache_sentinel")?(d=i.jsx("div",{className:"text-token-text-primary text-base font-normal",children:i.jsx(P,{id:"/LBzU9",defaultMessage:"Suggested"})}),e[0]=d):d=e[0];let f;e[1]!==s||e[2]!==r?(f=i.jsxs("div",{className:"flex items-center justify-between gap-2 ps-3.5 pe-3",children:[d,i.jsx("div",{className:"flex items-center gap-2",children:i.jsx(EUe,{onPromptSelected:s,onManagePrompts:r})})]}),e[1]=s,e[2]=r,e[3]=f):f=e[3];let m;e[4]!==n||e[5]!==s||e[6]!==o||e[7]!==c||e[8]!==a||e[9]!==l?(m=i.jsx(jUe,{bookmarkedPrompts:n,onBookmarkedPromptClick:s,onBookmarkedPromptEdit:o,suggestedActions:a,suggestedStarters:l,onSuggestedActionClick:c}),e[4]=n,e[5]=s,e[6]=o,e[7]=c,e[8]=a,e[9]=l,e[10]=m):m=e[10];let p;return e[11]!==f||e[12]!==m?(p=i.jsxs("div",{className:"flex w-full flex-col gap-3",children:[f,m]}),e[11]=f,e[12]=m,e[13]=p):p=e[13],p};class PUe{static async getOnPageSuggestions({current_page:e}){return await ue.safePost("/aura/suggestions/sidechat",{requestBody:{current_page:e}})}}const aW=300*1e3,iW=1800*1e3,RUe=Hn(()=>{const t=mn("2712016364"),e=t.get("staleTimeMs",aW),n=t.get("gcTimeMs",iW);return{staleTime:e,gcTime:n}}),OUe=(t,e,n,s)=>N({queryKey:["aura","sidechatSuggestions",n!=null?n:"anon",t],enabled:!!t&&!!e,staleTime:aW,gcTime:iW,refetchOnWindowFocus:!1,queryFn:async()=>{if(!t||!e)throw new Error("Missing url or title for on-page suggestions request.");return await PUe.getOnPageSuggestions({current_page:{url:t,title:e}})}},s!=null?s:{});function _gt(t){"use forget";var l;const e=D.c(5),{url:n,title:s,isBlocked:o}=t;let r,a;if(e[0]!==o||e[1]!==s||e[2]!==n){const c=Et(),u=(l=c==null?void 0:c.id)!=null?l:void 0,{staleTime:d,gcTime:f}=RUe();r=ut,a=OUe(n,s,u,{enabled:!!(n&&s&&!o),staleTime:d,gcTime:f}),e[0]=o,e[1]=s,e[2]=n,e[3]=r,e[4]=a}else r=e[3],a=e[4];return r(a)}function xgt(t,e,n){V.logEventWithStatsig("kaur1br5: Suggested Action Displayed","chatgpt_suggested_action_displayed",LT(t,e,n))}function ygt(t,e,n){V.logEventWithStatsig("kaur1br5: Suggested Action Selected","chatgpt_suggested_action_selected",LT(t,e,n))}function bgt(t,e){V.logEventWithStatsig("kaur1br5: Suggested Actions Panel Displayed","chatgpt_suggested_actions_panel_displayed",LUe(t,e))}function vgt(t,e,n){V.logEventWithStatsig("kaur1br5: Suggested Actions Panel Clicked","chatgpt_suggested_actions_panel_clicked",LT(t,e,n))}function lW(t){const e={location:t.location,impression_id:t.impression_id};return t.page_classification_domain&&(e.page_classification_domain=t.page_classification_domain),t.page_classification_type&&(e.page_classification_type=t.page_classification_type),e}function LT(t,e,n){var o;const s=G(N({},lW(n)),{suggestion_index:e,suggestion_id:(o=t.id)!=null?o:null,suggestion_type:t.action_type});return t.action_type==="chat"&&t.system_hint&&(s.system_hint=t.system_hint),s}function LUe(t,e){return G(N({},lW(e)),{suggestions_count:t})}const DUe=je(()=>Me(()=>import("./4813494d-di0bpg5zidu9s57f.js").then(t=>t.F2),__vite__mapDeps([2,1,3])).then(t=>t.OpenaiLogo));function Sgt(){return i.jsx("div",{className:"flex h-full items-center justify-center",children:i.jsx(DUe,{className:"h-11 w-11 opacity-40"})})}function Cgt(){const t=hs(),e=X(ot.wantsAttachUserFile$),n=te(),s=Dt(),o=nf();v.useEffect(()=>{if(!t||!e)return;ot.wantsAttachUserFile$.set(!1);const r=ot.attachUserFileRequest;if(ot.attachUserFileRequest=void 0,!!r)try{const a=new Uint8Array(r.bytes),l=new File([a],r.name,{type:r.mimeType}),c=ti(l),u=(l.type||r.mimeType).startsWith("image/"),d=u?io.Multimodal:io.Retrieval;Sr.uploadFile(o,c,l,d,u?[r.mimeType]:[],n,s)}catch(a){ws.error("failed to attach file",{error:a})}},[t,e,n,s,o])}function wgt(){const t=as(),e=X(ln);v.useEffect(()=>{if(!t||!e)return;const n=r=>{var f,m;const a=r.target;if(!a)return;const l=a.closest("a");if(!l||l.closest("[data-desktop-skip-link-handler]"))return;const c=l.getAttribute("href");if(!c)return;const u=(f=l.getAttribute("target"))!=null?f:"",d=GM(c,document.baseURI);d&&(_ee(r)||(r.preventDefault(),(m=N1())==null||m.handleLink(d.href,u)))};document.addEventListener("click",n,{capture:!0});const s=window.open,o=(r,a,l)=>{var d;const c=typeof r=="string"?r:r==null?void 0:r.toString();if(!c)return s.call(window,r,a,l);const u=GM(c,document.baseURI);return u?((d=N1())==null||d.handleLink(u.href,a!=null?a:""),null):s.call(window,r,a,l)};return window.open=o,()=>{document.removeEventListener("click",n,{capture:!0}),window.open=s}},[t,e])}const BUe=fD.getTracer("aura"),o6=1e4,FUe="aura.request_completion.span.timeout_waiting_for_server_thread_id",UUe="aura.request_completion.router_navigation";function HUe({conversation:t}){let e=null,n=null,s=null,o=null;function r(){n&&(n(),n=null)}function a(){s&&(s(),s=null)}function l(){o!=null&&(globalThis.clearTimeout(o),o=null)}function c(g){l(),o=globalThis.setTimeout(()=>{(e==null?void 0:e.span)===g&&(g.addEvent("aura.request_completion.timeout_server_thread_id",{timeoutMs:o6}),u({code:ym.ERROR,message:FUe}))},o6)}function u(g){if(!e){r(),a(),l();return}const{span:h,disposeServerWatcher:_}=e;e=null,g&&h.setStatus(g),h.end(),_(),r(),a(),l()}function d(g){r();let h=0,_=0;const x=y=>{(e==null?void 0:e.span)===g&&(h+=1,g.addEvent("window.error",{message:y.message,filename:y.filename,lineno:y.lineno,colno:y.colno}),g.setAttribute("aura.window_error_count",h),y.error instanceof Error?g.recordException(y.error):g.recordException({name:"WindowError",message:y.message}))},b=y=>{if((e==null?void 0:e.span)!==g)return;_+=1;const S=y.reason instanceof Error?y.reason:{name:"UnhandledRejection",message:String(y.reason)};g.addEvent("window.unhandled_rejection",{message:S instanceof Error?S.message:String(y.reason)}),g.setAttribute("aura.window_unhandled_rejection_count",_),g.recordException(S)};window.addEventListener("error",x),window.addEventListener("unhandledrejection",b),n=()=>{window.removeEventListener("error",x),window.removeEventListener("unhandledrejection",b)}}function f(g){var C;a();const h=window.__reactRouterDataRouter;if(!h||typeof h.subscribe!="function")return;let _=(C=h.state.location)==null?void 0:C.key,x=h.state.location,b=0;const y=w=>{var M;if((e==null?void 0:e.span)!==g)return;const k=(M=w.location)==null?void 0:M.key;if(!k)return;if(_===void 0){_=k,x=w.location;return}if(k===_){x=w.location;return}const E=w.location,T=x;_=k,x=E,b+=1,g.addEvent(UUe,{pathname:E.pathname,search:E.search,hash:E.hash,previousPathname:T==null?void 0:T.pathname,previousSearch:T==null?void 0:T.search,previousHash:T==null?void 0:T.hash,historyAction:w.historyAction}),g.setAttribute("aura.router_navigation_count",b)},S=h.subscribe(y);s=()=>{S()}}function m({promptOrigin:g,systemHints:h,modelSlug:_,hasAttachments:x,hasTabContext:b,conduitToken:y,n7jupdLocalSafeMode:S}={}){if(Kt(()=>t.serverId$())!=null){u();return}u({code:ym.ERROR,message:"aura.request_completion.span_replaced_before_completion"});const w={"aura.prompt_origin":g!=null?g:"unknown"};h!=null&&h.length&&(w["aura.system_hints"]=h),_&&(w["aura.model_slug"]=_),typeof x=="boolean"&&(w["aura.has_attachments"]=x),typeof b=="boolean"&&(w["aura.has_tab_context"]=b),typeof y=="string"&&y&&(w["aura.conduit_token"]=y),typeof S=="boolean"&&(w["aura.n7jupd_local_safe_mode"]=S);const k=BUe.startSpan("aura.request_completion",{attributes:w});e={span:k,disposeServerWatcher:()=>{}};const E=Hc(()=>{const T=t.serverId$();T&&(e==null?void 0:e.span)===k&&(k.setAttribute("aura.server_thread_id",T),u())});(e==null?void 0:e.span)===k?(e.disposeServerWatcher=()=>{E()},d(k),f(k),c(k)):E()}function p(){u({code:ym.ERROR,message:"aura.request_completion.span.cleanup_without_server_thread_id"})}return{start:m,dispose:p}}function $Ue(t){return t.width!==void 0&&t.height!==void 0}function GUe(t,e){var a;const n=(a=e==null?void 0:e.filter($Ue))!=null?a:[];if(n.length===0)return{content_type:vt.Text,parts:[t]};const s=n.map(l=>{var c,u;return{content_type:el.ImageAssetPointer,asset_pointer:mv((c=l.id)!=null?c:""),size_bytes:(u=l.size)!=null?u:0,width:l.width,height:l.height}}),o=t,r=[...s,o];return{content_type:vt.MultimodalText,parts:r}}function kgt(t,e){"use forget";const n=D.c(26);let s;n[0]!==t?(s=Pt(t),n[0]=t,n[1]=s):s=n[1];const o=s,r=X(VUe),a=X(ot.wantsRequestCompletion$),l=X(ot.sidebarUrlTrayOpen$),c=X(ot.contextCollection$),u=X(ot.activeTabContextItemIds$),d=bt(),f=jn();let m;n[2]===Symbol.for("react.memo_cache_sentinel")?(m=g_(),n[2]=m):m=n[2];const p=m;let g;n[3]!==u||n[4]!==c?(g=h_(c,u),n[3]=u,n[4]=c,n[5]=g):g=n[5];const h=g;let _;n[6]!==u||n[7]!==c?(_=xee(c,u),n[6]=u,n[7]=c,n[8]=_):_=n[8];const x=_;let b;n[9]!==o?(b=HUe({conversation:o}),n[9]=o,n[10]=b):b=n[10];const y=b;let S,C;n[11]!==y?(S=()=>()=>{y.dispose()},C=[y],n[11]=y,n[12]=S,n[13]=C):(S=n[12],C=n[13]),v.useEffect(S,C);let w,k;n[14]!==y||n[15]!==t||n[16]!==x||n[17]!==r||n[18]!==f.search||n[19]!==d||n[20]!==e||n[21]!==l||n[22]!==h||n[23]!==a?(w=()=>{var L,B,U,H;if(!r||!a)return;ot.wantsRequestCompletion$.set(!1);const E=ot.requestCompletion;if(!E)return;ot.requestCompletionId&&(ot.requestCompletionAckId=ot.requestCompletionId,ot.requestCompletionAckId$.set(ot.requestCompletionId));const T=!!((L=ot.attachments)!=null&&L.length),M=p?h.length>0:!!((B=ot.tabContext)!=null&&B.length);y.start({promptOrigin:ot.promptOrigin,systemHints:E.systemHints,modelSlug:E.modelSlug,hasAttachments:T,hasTabContext:M,conduitToken:(U=ot.prepareConversationDetails)==null?void 0:U.conduitToken,n7jupdLocalSafeMode:(H=E.n7jupdLocalSafeMode)!=null?H:void 0});const A=_E({namespace:fg.CompletionRequest,opts:{debug:!1}});A.reset();const I=function(F){F&&pd(Pt(t),F)},j=function(F){if(!F)return;const{prepareState:z,lastPrepareTimestamp:W,conduitToken:Y}=F;pt(t,K=>{K.prepareState=z,K.lastPrepareTimestamp=W,K.conduitToken=Y!=null?Y:null})},R=async function(F,z,W,Y,K){var Ce,ge,Re,ke;const Z=p?h.length>0:l,J=p?x:(Ce=ot.tabContext)==null?void 0:Ce[0],Q=Z?p?h:J:void 0,ne=GUe(F,ot.attachments),ie=N(N(N(N({},z.length>0&&{system_hints:z}),((ge=ot.attachments)==null?void 0:ge.length)&&{attachments:ot.attachments}),await q9(Q,(Re=ot.promptOrigin)!=null?Re:"unknown","user",z)),Y!==void 0&&{n7jupd_local_safe_mode:Y}),fe=Dc(ne,ie),ae=Z?await vee(J,(ke=ot.promptOrigin)!=null?ke:"unknown",z,t):void 0,le={kind:Bt.PrimaryAssistant},pe=N({conversationMode:le},z.length>0&&{systemHints:z});return{promptMessage:fe,prependMessages:ae&&ae.length>0?ae:void 0,requestedModelId:W!==""?W:void 0,completionMetadata:pe,eventSource:"url",conduitToken:K}},O=function(){ot.requestCompletion=void 0,ot.attachments=void 0,ot.prepareConversationDetails=void 0,ot.whisperContent=void 0,ot.promptOrigin=void 0};I(E.modelSlug),j(ot.prepareConversationDetails),(async()=>{var z;const $=await R(E.prompt,E.systemHints,E.modelSlug,E.n7jupdLocalSafeMode,(z=ot.prepareConversationDetails)==null?void 0:z.conduitToken);$.profiler=A;const F=_c()&&ot.promptOrigin!=="ntp"?!0:void 0;if(O(),_c()){const W=new URLSearchParams(f.search);W.set(yee,bee.value),d({pathname:"/",search:W.toString()},{replace:F})}e($)})()},k=[r,a,t,e,l,h,x,p,f.search,d,y],n[14]=y,n[15]=t,n[16]=x,n[17]=r,n[18]=f.search,n[19]=d,n[20]=e,n[21]=l,n[22]=h,n[23]=a,n[24]=w,n[25]=k):(w=n[24],k=n[25]),v.useEffect(w,k)}function VUe(){return hs()}function Egt(t){"use forget";const e=D.c(25);let n;e[0]===Symbol.for("react.memo_cache_sentinel")?(n=hs(),e[0]=n):n=e[0];const s=n,o=jn(),r=bt(),a=X(t.serverId$),l=Nt(),c=X(ot.wantsModelSlug$),u=X(ot.selectedConversationId$),d=X(ot.wantsNewConversation$),f=X(ot.newConversationGizmoId$),m=VD();let p;e[1]!==o.pathname||e[2]!==r?(p=k=>{Ea(r,{replace:o.pathname==="/",config:k})},e[1]=o.pathname,e[2]=r,e[3]=p):p=e[3];const g=_s(p);let h,_;e[4]!==f||e[5]!==g||e[6]!==d?(h=()=>{if(!s||!d)return;ot.wantsNewConversation$.set(!1),g(f?{urlGizmoId:f}:void 0)},_=[s,d,f,g],e[4]=f,e[5]=g,e[6]=d,e[7]=h,e[8]=_):(h=e[7],_=e[8]),v.useEffect(h,_);let x;e[9]!==m?(x=()=>{!s||!m||ot.selectedConversationId$.set(void 0)},e[9]=m,e[10]=x):x=e[10];let b;e[11]!==m||e[12]!==g?(b=[s,m,g],e[11]=m,e[12]=g,e[13]=b):b=e[13],v.useEffect(x,b);let y,S;e[14]!==r||e[15]!==m||e[16]!==l||e[17]!==u||e[18]!==a?(y=()=>{s&&u&&(_c()&&m||u!==a&&xL(r,l,u))},S=[s,u,m,r,l,a],e[14]=r,e[15]=m,e[16]=l,e[17]=u,e[18]=a,e[19]=y,e[20]=S):(y=e[19],S=e[20]),v.useEffect(y,S);let C,w;e[21]!==t||e[22]!==c?(C=()=>{s&&c&&(ot.wantsModelSlug$.set(void 0),pd(t,c))},w=[s,c,t],e[21]=t,e[22]=c,e[23]=C,e[24]=w):(C=e[23],w=e[24]),v.useEffect(C,w)}const zUe=()=>{"use forget";const t=D.c(3),e=a0e(),{hasSeenOnboardingDate:n}=kle();let s;return t[0]!==n||t[1]!==e?(s=xe("1424158285")||e||n===!1,t[0]=n,t[1]=e,t[2]=s):s=t[2],!!s},wf=()=>mn("1535193150"),Tgt=t=>{const e=wf();return t&&e.get("journal_homepage_url_icon_enabled",!1)},Mgt=t=>{const e=wf();return t&&e.get("show_web_page_file_refs",!1)},Agt=t=>{const e=wf();return t&&!e.get("show_turn_search_sources",!0)},Ngt=t=>{const e=wf();return t?e.get("file_ref_type_order",[]):[]},Igt=t=>{const e=wf();return!!(t&&e.get("render_web_results_like_files",!1))},jgt=t=>{const e=wf();return t?e.get("custom_thread_classes",""):""};function Nb(t){Vd().then(e=>{t(e.getHost())}).catch(()=>{})}function Pgt(t){const e=yt(()=>{const o=Ya(t);return o?o.filter(r=>r.role===dt.User).length:0}),n=yt(()=>{var a,l;const o=Ya(t);if(!o)return{hasNonSearchSystemHint:!1,lastVisibleLength:0};let r=0;for(const c of o)if(c.role===dt.User)for(const u of c.messages){if((a=u.metadata)!=null&&a.is_visually_hidden_from_conversation)continue;r=Ss(u,{shouldGetTextFromContentReferences:!1,shouldGetVisibleText:!0}).length;const d=(l=u.metadata)==null?void 0:l.system_hints;if(d!=null&&d.length&&d.some(f=>f!=null&&f!==Ke.Search))return{hasNonSearchSystemHint:!0,lastVisibleLength:r}}return{hasNonSearchSystemHint:!1,lastVisibleLength:r}});let s;return Hc(()=>{if(!Qo()){s=void 0;return}if(!hi(t.id)){s=void 0;return}const o=t.serverId$();if(!o){s=void 0;return}(s==null?void 0:s.conversationId)!==o&&(s=void 0);const r=e(),{hasNonSearchSystemHint:a,lastVisibleLength:l}=n();if(r>0&&a){if((s==null?void 0:s.status)==="enqueued"&&s.conversationId===o){const u=o;Nb(d=>d.cancelConversationArchive(u))}else(s==null?void 0:s.status)!=="cancelled"||s.conversationId;s={conversationId:o,status:"cancelled"};return}if(r===1){if(l>100||(s==null?void 0:s.status)==="enqueued")return;s={conversationId:o,status:"enqueued"};const c=o;Nb(u=>u.enqueueConversationArchive(c));return}if(r>1&&(s==null?void 0:s.status)==="enqueued"&&s.conversationId===o){s={conversationId:o,status:"cancelled"};const c=o;Nb(u=>u.cancelConversationArchive(c))}})}const r6=Hn(()=>({status:void 0}));function Rgt(){if(!(R3()&&Uo||!navigator.permissions))return navigator.permissions.query({name:"microphone"}).then(e=>{r6().status=e,u1.set(e.state),e.onchange=()=>{u1.set(e.state)},Ut.voiceMode.microphoneStatusAvailable({state:e.state})}).catch(e=>{Ut.voiceMode.microphoneStatusUnavailable(e)}),()=>{const e=r6().status;e&&(e.onchange=null),u1.set("unknown")}}function WUe(t){return En({queryKey:["conversation",t,"stream-status"],queryFn:async()=>{var s,o;if(!t)return null;const e=(o=(s=At(t))==null?void 0:s.turnTraceId)!=null?o:void 0;return await ue.safeGet("/conversation/{conversation_id}/stream_status",N({parameters:{path:{conversation_id:t}}},e?{additionalHeaders:{"x-oai-turn-trace-id":e}}:{}))}})}function Ogt(t){return Gs(()=>WUe(t))}const qUe=t=>{"use forget";const e=D.c(19),{title:n,link:s,children:o,className:r,sectionClassName:a}=t;let l;e[0]!==a?(l=q("my-6 space-y-4",a),e[0]=a,e[1]=l):l=e[1];let c;e[2]!==r?(c=q("flex items-center justify-between gap-4",r),e[2]=r,e[3]=c):c=e[3];let u;e[4]!==n?(u=i.jsx("h2",{className:"text-token-text-primary text-base",children:n}),e[4]=n,e[5]=u):u=e[5];let d;e[6]!==s||e[7]!==n?(d=s?i.jsxs(Hd,{href:s,underline:!1,className:"text-mkt-p2 text-token-interactive-label-accent-default can-hover:hover:text-token-interactive-label-accent-hover focus-visible:outline-token-border-strong focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2",children:[i.jsx(P,{id:"fPS6dA",defaultMessage:"View all"}),i.jsx("span",{className:"sr-only",children:i.jsx(P,{id:"Jxfn0o",defaultMessage:" for {sectionTitle}",values:{sectionTitle:n}})})]}):null,e[6]=s,e[7]=n,e[8]=d):d=e[8];let f;e[9]!==c||e[10]!==u||e[11]!==d?(f=i.jsxs("header",{className:c,children:[u,d]}),e[9]=c,e[10]=u,e[11]=d,e[12]=f):f=e[12];let m;e[13]!==o?(m=i.jsx("div",{children:o}),e[13]=o,e[14]=m):m=e[14];let p;return e[15]!==l||e[16]!==f||e[17]!==m?(p=i.jsxs("section",{className:l,children:[f,m]}),e[15]=l,e[16]=f,e[17]=m,e[18]=p):p=e[18],p},KUe="my-recent-deep-research-reports",YUe=4;function ZUe(t){"use forget";const e=D.c(2);let n;return e[0]!==t?(n={queryKey:[KUe,t],queryFn:()=>ue.safeGet("/my/recent/deep_research_reports",{parameters:{query:{limit:t}}}),staleTime:3e5},e[0]=t,e[1]=n):n=e[1],ut(n)}const QUe=t=>{"use forget";var w;const e=D.c(27),{className:n,limit:s}=t,o=s===void 0?YUe:s,r=te(),a=X(I7),l=X(j7),u=a&&!l?Math.min(o,4):o,{data:d,isLoading:f}=ZUe(u);let m,p,g,h,_,x,b,y;if(e[0]!==n||e[1]!==(d==null?void 0:d.items)||e[2]!==u||e[3]!==r||e[4]!==f){y=Symbol.for("react.early_return_sentinel");e:{const k=(w=d==null?void 0:d.items)!=null?w:[];let E;e[13]!==r?(E=r.formatMessage({id:"w3bo5Q",defaultMessage:"Recent reports"}),e[13]=r,e[14]=E):E=e[14];const T=E;if(!f&&k.length===0){y=null;break e}m=qUe,_=T,x="ms-5",b="mt-0 mb-0 space-y-0",e[15]!==n?(p=q("grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-4 xl:grid-cols-4",n),e[15]=n,e[16]=p):p=e[16],g=f?!0:void 0,h=f?Array.from({length:4}).map(JUe):k.slice(0,u).map(M=>{var O;const A=(O=M.title)!=null?O:M.snippet,I=M.conversation_id,j=I?"/c/".concat(I):null,R=(()=>{if(!M.created_at)return null;const L=new Date(M.created_at);if(Number.isNaN(L.getTime()))return null;try{return r.formatDate(L,{dateStyle:"medium"})}catch(B){return L.toLocaleDateString(void 0,{month:"short",day:"numeric",year:"numeric"})}})();return i.jsxs("li",{className:"flex h-full flex-col items-center gap-2",children:[i.jsx("a",{href:j!=null?j:void 0,onClick:L=>{j&&(L.preventDefault(),Qd(j),Ve.addAction("deep-research-landing-page.recent-report-click"))},className:"block h-full w-full",children:i.jsxs("article",{className:q("border-thin border-token-border-light shadow-elevation-03 bg-token-bg-primary border-token-border-default relative flex max-h-[273px] min-h-[273px] w-full flex-1 shrink-0 flex-col justify-between overflow-hidden rounded-[30px] border p-[20px]",j&&"cursor-pointer"),children:[i.jsx("div",{className:"from-token-bg-primary via-token-bg-primary/80 pointer-events-none absolute start-0 bottom-0 h-[80px] w-full bg-gradient-to-t from-0% via-60% to-transparent to-100%"}),i.jsxs("div",{className:"flex h-full flex-col gap-3",children:[i.jsx("h3",{className:"text-footnote-emphasized text-token-text-primary text-medium line-clamp-3 font-medium",children:A}),i.jsx("p",{className:"text-mkt-p2 text-token-text-secondary mt-2 text-[10px]",children:M.snippet})]})]})}),R?i.jsx("span",{className:"text-mkt-p2 text-token-text-secondary mt-2 text-center text-[13px]",children:R}):null]},M.id)})}e[0]=n,e[1]=d==null?void 0:d.items,e[2]=u,e[3]=r,e[4]=f,e[5]=m,e[6]=p,e[7]=g,e[8]=h,e[9]=_,e[10]=x,e[11]=b,e[12]=y}else m=e[5],p=e[6],g=e[7],h=e[8],_=e[9],x=e[10],b=e[11],y=e[12];if(y!==Symbol.for("react.early_return_sentinel"))return y;let S;e[17]!==p||e[18]!==g||e[19]!==h?(S=i.jsx("ul",{className:p,"aria-busy":g,children:h}),e[17]=p,e[18]=g,e[19]=h,e[20]=S):S=e[20];let C;return e[21]!==m||e[22]!==_||e[23]!==x||e[24]!==b||e[25]!==S?(C=i.jsx(m,{title:_,className:x,sectionClassName:b,children:S}),e[21]=m,e[22]=_,e[23]=x,e[24]=b,e[25]=S,e[26]=C):C=e[26],C};function JUe(t,e){return i.jsx("li",{className:"flex h-full flex-col items-center gap-2","aria-hidden":!0,children:i.jsx("div",{className:"block h-full w-full",children:i.jsx("div",{className:"border-thin border-token-border-light shadow-elevation-03 bg-token-bg-primary border-token-border-default relative flex h-full max-h-[273px] min-h-[273px] w-full flex-1 shrink-0 overflow-hidden rounded-[30px] border",children:i.jsx(dS,{className:"h-full w-[500px] flex-1 shrink-0 rounded-none"})})})},e)}const XUe="venus-suggested-prompts",cW=4,eHe=10;function tHe(t){if(Number.isNaN(t))return cW;const e=Math.trunc(t);return Math.min(Math.max(1,e),eHe)}function a6(t){const e=new Set,n=[];for(const s of t)!s||e.has(s)||(e.add(s),n.push(s));return n}const nHe={box:"Box",dropbox:"Dropbox",github:"GitHub",gmail:"Gmail",google_calendar:"Google Calendar",google_contacts:"Google Contacts",google_drive:"Google Drive",hubspot:"HubSpot",intercom:"Intercom",notion:"Notion",linear:"Linear",outlook_calendar:"Outlook Calendar",outlook_email:"Outlook Email",sharepoint:"SharePoint",teams:"Microsoft Teams",canva:"Canva",slack:"Slack",healthkit:"HealthKit"};function sHe(t){var e;return(e=nHe[t])!=null?e:t}function oHe(t){var n,s,o;const e=(n=t.prompt_summary)==null?void 0:n.trim();return e&&e.length>0?e:(o=(s=t.prompt_string)==null?void 0:s.trim())!=null?o:""}function rHe(t){var n;const e=a6((n=t.suggested_connectors)!=null?n:[]);return{title:t.title,content:oHe(t),sources:a6(e.map(sHe)),connectorTypes:e}}const aHe=je(()=>Me(()=>import("./10eb558d-uby80mvcklfyq7ep.js"),__vite__mapDeps([318,1,2,3])).then(t=>t.SuggestedConnectorsModal));function iHe(t){"use forget";const e=D.c(2);let n;return e[0]!==t?(n={queryKey:[XUe,t],queryFn:()=>ue.safeGet("/venus_suggested_prompts",{parameters:{query:{limit:t}}}),staleTime:3e5},e[0]=t,e[1]=n):n=e[1],ut(n)}const lHe=t=>t.replace(/_/g," "),cHe=t=>t in un,uHe=t=>{"use forget";var R;const e=D.c(25),{className:n,limit:s}=t,o=s===void 0?cW:s,r=Ip(),a=mo();let l;e[0]!==a?(l=cd(a),e[0]=a,e[1]=l):l=e[1];const c=l,u=Jo(),{addSource:d,deleteSource:f,selectedSources:m,selectedMCPSources:p}=Yc(c.id);let g;e[2]===Symbol.for("react.memo_cache_sentinel")?(g={fetchValidLinksOnly:!0},e[2]=g):g=e[2];const{connectorLinks:h,isLoading:_}=Vo(g);let x;e[3]!==o?(x=tHe(o),e[3]=o,e[4]=x):x=e[4];const b=x,{data:y}=iHe(b),S=((R=y==null?void 0:y.items)!=null?R:[]).map(rHe).filter(dHe),C=te(),w=S;if(w.length===0){let O;return e[5]===Symbol.for("react.memo_cache_sentinel")?(O=i.jsx("div",{className:"h-2 w-full bg-transparent"}),e[5]=O):O=e[5],O}let k;e[6]!==C?(k=C.formatMessage({id:"PFfUBj",defaultMessage:"Suggested prompts"}),e[6]=C,e[7]=k):k=e[7];let E;e[8]!==n?(E=q("mb-2",n),e[8]=n,e[9]=E):E=e[9];const T="flex flex-col";let M;e[10]!==d||e[11]!==r||e[12]!==h||e[13]!==f||e[14]!==_||e[15]!==p||e[16]!==m||e[17]!==u?(M=(O,L)=>i.jsx("li",{children:i.jsxs("button",{type:"button",onClick:()=>{const B=Vt(r);if(Bo(B,O.content),So(B),u(Js),O.connectorTypes.length===0){for(const U of m!=null?m:[])U!=="web"&&U!=="cloud"&&f(U);for(const U of p!=null?p:[])f(U)}else{const U=new Set(O.connectorTypes.map(fHe).filter(mHe));for(const H of m!=null?m:[])H!=="web"&&H!=="cloud"&&(U.has(H)||f(H));for(const H of p!=null?p:[])U.has(H)||f(H);for(const H of U)d(H);!_&&U.size>0&&Array.from(U).filter($=>cHe($)&&!h.has(un[$])).length>0&&rt(aHe,{connectorTypes:Array.from(U),onClose:pHe})}Ve.addAction("deep-research-landing-page.suggested-prompt-click")},className:"can-hover:hover:bg-token-bg-tertiary focus-visible:outline-token-border-strong flex w-full cursor-pointer items-center gap-3 rounded-xl px-[19px] py-3 text-start focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2",children:[i.jsx(mi,{className:"icon-sm text-token-text-tertiary h-5 w-5 shrink-0"}),i.jsxs("span",{className:"flex w-full items-center gap-2 overflow-hidden pb-0.5",children:[i.jsx("span",{className:"text-token-text-primary text-sm font-medium whitespace-nowrap",style:{flex:"0 0 auto",lineHeight:"20px"},children:O.title}),i.jsx("span",{className:"text-token-text-secondary text-mkt-p2 line-clamp-1 w-fit truncate text-ellipsis",children:O.content})]})]})},"".concat(O.title,"-").concat(L)),e[10]=d,e[11]=r,e[12]=h,e[13]=f,e[14]=_,e[15]=p,e[16]=m,e[17]=u,e[18]=M):M=e[18];const A=w.slice(0,b).map(M);let I;e[19]!==A?(I=i.jsx("ul",{className:T,children:A}),e[19]=A,e[20]=I):I=e[20];let j;return e[21]!==I||e[22]!==k||e[23]!==E?(j=i.jsx("section",{"aria-label":k,className:E,children:I}),e[21]=I,e[22]=k,e[23]=E,e[24]=j):j=e[24],j};function dHe(t){return t.content.length>0}function fHe(t){return R9[lHe(t)]}function mHe(t){return!!t}function pHe(){}function Lgt(){"use forget";const t=D.c(5),e=L3(),n=X(gHe);if(!e)return null;const s=n?"mt-8":"mt-2";let o;t[0]!==s?(o=q("flex w-full flex-1 flex-col gap-4 self-stretch",s),t[0]=s,t[1]=o):o=t[1];let r;t[2]===Symbol.for("react.memo_cache_sentinel")?(r=i.jsx(l0,{verticalMargin:"none",verticalPadding:"none",horizontalPadding:"standard",children:i.jsxs(to,{className:"flex flex-col gap-4 pb-12",children:[i.jsx(uHe,{}),i.jsx(QUe,{})]})}),t[2]=r):r=t[2];let a;return t[3]!==o?(a=i.jsx("div",{className:o,children:r}),t[3]=o,t[4]=a):a=t[4],a}function gHe(){return BC()}const uW=re(Cp,"d7c1fd",14,14),dW=re(Cp,"f6f554",12,12),hHe=je(()=>Me(()=>import("./b5857047-exe9fqi6peyx0193.js"),__vite__mapDeps([319,1,2,3,320,111])));function Dgt({selectedDomain:t,verifiedDomains:e,domains:n,onChangeDomain:s}){const[o,r]=v.useState(!1),a=e.length>0,l=Et(),c=l==null?void 0:l.id,u=l==null?void 0:l.isEnterprisey(),{mutateAsync:d}=Yne(c);return i.jsxs("div",{className:"font-normal",children:[i.jsxs(ee.Root,{children:[i.jsx(See,{children:i.jsxs("span",{className:"flex items-center gap-2 py-2",children:[t!=null?t:i.jsx(P,N({},iC.selectADomain)),i.jsx(ng,{className:"icon"})]})}),i.jsx(ee.Portal,{children:i.jsxs(ee.Content,{children:[i.jsx(ee.RadioGroup,{value:t,onValueChange:f=>{f!==t&&s(f)},children:e.map(({id:f,hostname:m})=>i.jsx(ee.RadioItem,{value:m,children:i.jsxs("div",{className:"flex flex-row",children:[i.jsx("span",{children:m}),i.jsx("span",{onClick:()=>{d({domainId:f}),s("")},children:i.jsx(yi,{className:"icon-sm fixed end-4"})})]})},f))}),a&&i.jsx(ee.Separator,{}),i.jsx(ee.Item,{onClick:()=>{r(!0)},icon:pf,children:i.jsx(P,N({},iC.addDomain))})]})})]}),c&&!u&&i.jsx(hHe,{domains:n,isOpen:o,onClose:()=>r(!1),workspaceId:c,showUnverifiedDomains:!0,onVerifyDomain:f=>{s(f.hostname)}})]})}function _He(){const t=Nt();return zt({mutationFn:({verifierType:e})=>D3.unverifySocialAuth(e),onSuccess:()=>{t.refetchQueries({queryKey:["builderProfile"]})}})}function xHe({socialData:t}){const{type:e,display_name:n,verified_data:s}=t,o=e==="linkedin"?dW:e==="github"?uW:null;return o?i.jsxs("div",{className:"flex w-full flex-row items-center justify-between",children:[i.jsxs("div",{className:"text-token-text-primary flex flex-row items-center space-x-2",children:[o({className:"icon"}),i.jsx("span",{children:n})]}),(s==null?void 0:s.link_to)&&i.jsx("a",{target:"_blank",rel:"noopener noreferrer",href:s.link_to,className:"text-token-text-tertiary text-sm hover:cursor-pointer",children:i.jsx(ka,{className:"icon-sm"})})]}):null}function Bgt({socialData:t,icon:e}){const{id:n,type:s,display_name:o,verified:r,verified_data:a}=t,[l,c]=v.useState(!1),u=_He();return i.jsxs("div",{className:"flex flex-row items-center justify-between space-y-1",children:[i.jsxs("div",{className:q("flex items-center space-x-2"),children:[i.jsx(e,{className:"icon-sm"}),i.jsx("span",{children:o}),r&&(a==null?void 0:a.username)&&i.jsx("a",{target:"_blank",rel:"noopener noreferrer",href:a.link_to,className:"text-token-text-tertiary text-sm hover:cursor-pointer",children:a==null?void 0:a.username})]}),r?i.jsx("div",{className:"py-1 font-semibold hover:cursor-pointer",onClick:()=>{u.mutate({verifierType:s})},children:u.isPending?i.jsx(Us,{}):i.jsx(ms,{className:"icon-sm text-token-text-tertiary"})}):i.jsx(Se,{size:"small",color:"secondary",loading:l,onClick:async()=>{c(!0),await Cee({id:n},"#settings/".concat(Ts.Account)),c(!1)},children:i.jsx(P,N({},iC.verify))})]})}const iC=we({verify:{defaultMessage:"Add",id:"GizmoSocialRow.add"},addDomain:{id:"GizmoSocialRow.addDomain",defaultMessage:"Verify new domain"},selectADomain:{id:"GizmoSocialRow.selectADomain",defaultMessage:"Select a domain"}});var SP;const yHe=Tt.div(SP||(SP=_t(["text-sm text-token-text-tertiary"]))),bHe="community builder";function vHe(t){const[e,n]=v.useState(t),s=v.useRef(null),o=(r,a)=>{s.current&&clearTimeout(s.current),s.current=setTimeout(()=>{n(r),s.current=null},a)};return v.useEffect(()=>()=>{s.current&&clearTimeout(s.current)},[]),[e,o]}function SHe(t){return"gizmo"in t}function Fgt({gizmo:t,builderName:e,builderUrl:n,className:s,socials:o,hideLink:r=!1}){const a=xe("2256850471");let l,c;t&&SHe(t)?(l=t.gizmo.author.display_name,c=t.gizmo.author.link_to):(l=e,c=n),(l===""||l==null)&&(l=bHe);const u=o==null?void 0:o.filter(f=>f.verified),d=i.jsxs("div",{className:"w-48 space-y-4 text-sm",children:[c&&i.jsxs("div",{className:"flex w-full flex-row items-center justify-between",children:[i.jsxs("div",{className:"text-token-text-primary flex flex-row items-center space-x-2",children:[i.jsx(xi,{className:"icon"}),i.jsx("span",{children:i.jsx(P,{id:"gizmo.author.websiteLabel",defaultMessage:"Website"})})]}),i.jsx("a",{target:"_blank",rel:"noopener noreferrer",href:c,className:"text-token-text-tertiary hover:cursor-pointer",children:i.jsx(ka,{className:"icon-sm"})})]}),a&&(u==null?void 0:u.map((f,m)=>f.verified?i.jsx(xHe,{socialData:f},m):null)),i.jsxs("div",{className:"text-token-text-tertiary text-xs",children:[(c||u&&u.length>0)&&i.jsx("hr",{className:"border-token-border-default my-2"}),i.jsx(P,{id:"gizmo.author.cannotViewLabel",defaultMessage:"The builder of this GPT cannot view your conversations."})]})]});return i.jsxs("div",{className:"flex flex-row items-center space-x-1",children:[i.jsx(yHe,{className:s,children:i.jsx(P,{id:"gizmo.author.byLabel",defaultMessage:"By {displayName}",values:{displayName:l}})}),!r&&i.jsx(CHe,{socials:o,website:c,children:d})]})}function CHe({website:t,socials:e,children:n}){const[s,o]=vHe(!1);let r=[];t&&r.push(i.jsx(xi,{className:"icon-xs text-token-text-secondary"})),e&&e.forEach(l=>{l.verified&&(l.type==="linkedin"?r.push(i.jsx(dW,{className:"icon-xs text-token-text-secondary"})):l.type==="github"&&r.push(i.jsx(uW,{className:"icon-xs text-token-text-secondary"})))});const a=r.length-2;return r=r.slice(0,2),a>0&&r.push(i.jsxs("span",{className:"text-token-text-secondary text-xs font-semibold",children:["+",a]},"overflow")),i.jsx(Tl,{open:s,onOpenChange:l=>o(l,0),children:i.jsxs("div",{onPointerLeave:()=>o(!1,300),children:[i.jsx(ba,{asChild:!0,children:i.jsx("div",{onPointerEnter:()=>o(!0,0),className:"cursor-pointer",children:r.length>0?i.jsx("div",{className:"bg-token-main-surface-secondary flex items-center gap-1 rounded-xl px-2 py-1",children:r}):i.jsx(wee,{className:"icon-xs text-token-text-secondary"})})}),i.jsx(Ml,{children:i.jsx(Al,{side:"top",sideOffset:8,align:"center",className:"bg-token-main-surface-primary z-10 rounded-lg p-4 drop-shadow-md",children:i.jsx("div",{onPointerEnter:()=>o(!0,0),children:n})})})]})})}function wHe(t){var n,s,o,r;const e=ve.getTree(t).findNode(a=>{var l;return((l=a.message.metadata)==null?void 0:l.greenwich)!==void 0},ve.getCurrentLeafId(t));return[(s=(n=e==null?void 0:e.message.metadata)==null?void 0:n.greenwich)==null?void 0:s.text,(r=(o=e==null?void 0:e.message.metadata)==null?void 0:o.greenwich)==null?void 0:r.link]}function Ugt({clientThreadId:t}){const[e,n]=Ze(t,wHe);return!e||!n?null:i.jsx("div",{className:"flex w-full items-center justify-center p-2 text-center text-xs",children:i.jsx("a",{href:n,target:"_blank",rel:"noreferrer",className:"hover:text-token-text-primary text-token-text-tertiary hover:underline",children:e})})}function Hgt(t){"use forget";const e=D.c(8),n=jn(),[,s]=wo();let o;e[0]!==n.search||e[1]!==n.state||e[2]!==s?(o=c=>{const u=new URLSearchParams(n.search),d=u.get(Jg);!c&&!u.has(Jg)||c&&d===c||s(p=>(c?p.set(Jg,c):p.delete(Jg),p),{replace:!0,state:n.state})},e[0]=n.search,e[1]=n.state,e[2]=s,e[3]=o):o=e[3];const r=_s(o);let a,l;e[4]!==t||e[5]!==r?(a=()=>Ar(()=>{if(A7(t)){const c=Fn(t);if(Lr(t).groups.some(d=>d.modelIds.includes(c.id)))return c.id}},r),l=[t,r],e[4]=t,e[5]=r,e[6]=a,e[7]=l):(a=e[6],l=e[7]),v.useEffect(a,l)}function $gt(){const t=kee(Nm.NoAuthNewChat),e=cp();return t&&!e?i.jsx(kHe,{onClose:()=>{As.closeModal(Nm.NoAuthNewChat)}}):null}function kHe({onClose:t}){const e=bt(),n=r=>{r.preventDefault(),fn({fallbackScreenHint:"signup",callback:a=>{ft.logEvent("chatgpt_new_chat_modal_sign_up_link_clicked"),ci({location:"New chat modal",provider:a},Jt.ACCESS_FLOW_ENTRY_POINT_NEW_CHAT_MODAL)},skipLoginModal:!Va()})},s=r=>{r.preventDefault(),fn({fallbackScreenHint:"login",callback:a=>{ft.logEvent("chatgpt_new_chat_modal_log_in_link_clicked"),_o({location:"New chat modal",provider:a},Jt.ACCESS_FLOW_ENTRY_POINT_NEW_CHAT_MODAL)},skipLoginModal:!Va()})},o=()=>{ft.logEvent("chatgpt_new_chat_modal_new_chat_button_clicked"),kl({location:"New Chat Modal New Chat Button"}),Ea(e),t()};return v.useEffect(()=>{ft.logEvent("chatgpt_new_chat_modal_shown"),V.logEvent("New Chat Modal Shown")},[]),i.jsx(en,{testId:"modal-no-auth-new-chat",isOpen:!0,type:"success",onClose:t,noPadding:!0,size:"custom",className:"max-w-sm",children:i.jsxs("div",{className:"flex flex-col justify-center p-6",children:[i.jsxs("div",{className:"mb-2 grid w-full grid-cols-[1fr_auto_1fr] items-center",children:[i.jsx("div",{}),i.jsx("div",{className:"text-xl font-medium",children:i.jsx(P,{id:"d+R7z5",defaultMessage:"Clear current chat?"})}),i.jsx("div",{className:"flex justify-end",children:i.jsx(Wn,{onClick:t})})]}),i.jsx("p",{className:"text-token-text-secondary mb-6 text-center",children:i.jsx(P,{id:"+Olycu",defaultMessage:"To start a new chat, your current conversation will be discarded. <signup>Sign up</signup> or <login>log in</login> to save chats.",values:{signup:r=>i.jsx("a",{href:"#",className:"text-token-text-primary font-medium",onClick:n,children:r}),login:r=>i.jsx("a",{href:"#",className:"text-token-text-primary font-medium",onClick:s,children:r})}})}),i.jsx(Se,{className:"mb-3",color:"primary",size:"large",onClick:o,children:i.jsx(P,{id:"cBGbrD",defaultMessage:"Clear chat"})}),i.jsx(Se,{size:"large",onClick:()=>{fn({fallbackScreenHint:"login",callback:r=>{_o({location:"New chat modal",provider:r},Jt.ACCESS_FLOW_ENTRY_POINT_NEW_CHAT_MODAL)},skipLoginModal:!Va()})},color:"secondary",children:i.jsx(P,N({},yn.logInButtonText))})]})})}const Ggt=je(()=>Me(()=>import("./8ce7b8d5-jq4c954fjl3dhtxg.js"),__vite__mapDeps([321,1,2,3,141,142,22,18,19,190,191,192,193,322,17,146,144,147,148,149,150])).then(t=>t.ProjectHomePage)),lC=(t,e,n,s=!1)=>{const o=Ws();ys().logEventWithStatsig("(Web) FYP Feed Survey Tapped","chatgpt_web_fyp_feed_survey_tapped",{isAutoSend:s,type:e}),s?Nr(()=>{o.autoSendCompletion={userMessage:Bv(t),targetedReply:n!=null?n:null},o.shouldAutoSendCompletion$.set(!0),o.openFeedbackView({type:zn.Conversation})}):o.openFeedbackView({type:zn.Preview,populatePrompt:{type:"surveyReply",userMessage:Bv(t),targetedReply:n!=null?n:null}})},EHe=t=>{"use forget";const e=D.c(16),{question:n,suggestions:s}=t;let o;e[0]!==s?(o=s.every(THe),e[0]=s,e[1]=o):o=e[1];const r=o;let a;e[2]!==s?(a=s.every(MHe),e[2]=s,e[3]=a):a=e[3];const l=a;let c;if(e[4]!==n||e[5]!==s){let f;e[7]!==n?(f=(m,p)=>{const{text:g,is_auto_send:h,prompt:_,type:x}=m,b=x==="sugar_task";return i.jsx(Se,{icon:b?xg:h?null:ll,color:"secondary",contentWrapperClassName:"justify-start px-2 py-3 gap-4",iconClassName:"text-token-text-secondary",onClick:()=>lC(_!=null?_:g,x,b?null:n!=null?n:null,h),children:g},p)},e[7]=n,e[8]=f):f=e[8],c=s.map(f),e[4]=n,e[5]=s,e[6]=c}else c=e[6];let u;e[9]!==r||e[10]!==l||e[11]!==n?(u=!r&&!l&&i.jsx(Se,{icon:ll,color:"secondary",className:"text-token-text-secondary",contentWrapperClassName:"justify-start px-2 gap-4",onClick:()=>lC("",void 0,n!=null?n:null),children:i.jsx(P,{id:"FKKl/d",defaultMessage:"Share anything..."})}),e[9]=r,e[10]=l,e[11]=n,e[12]=u):u=e[12];let d;return e[13]!==c||e[14]!==u?(d=i.jsx("div",{className:"flex w-full flex-col gap-4 pt-4",children:i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c,u]})}),e[13]=c,e[14]=u,e[15]=d):d=e[15],d};function THe(t){return t.is_auto_send}function MHe(t){return t.type==="sugar_task"}function fW(t){"use forget";const e=D.c(38),{item:n,overrideManageAllAction:s,fullWidth:o,includeHeader:r}=t,a=r===void 0?!0:r;let l;e[0]===Symbol.for("react.memo_cache_sentinel")?(l=[],e[0]=l):l=e[0],v.useEffect(AHe,l);const{id:c,is_enabled:u,display_title:d,display_emoji:f}=n,m=n.next_run_times.length===0;let p;e[1]===Symbol.for("react.memo_cache_sentinel")?(p=Ws(),e[1]=p):p=e[1];const g=p;let h;e[2]!==c?(h=()=>{ys().logEventWithStatsig("(Web) FYP Task Attachment Tapped","chatgpt_web_fyp_task_attachment_tapped",{task_id:c}),Kt(g.isFeedbackViewOpen$)?g.openTaskView(c):g.prefillTaskReply(c)},e[2]=c,e[3]=h):h=e[3];const _=h;let x;e[4]!==c||e[5]!==_||e[6]!==a||e[7]!==m||e[8]!==u||e[9]!==n||e[10]!==s?(x=a&&i.jsx("div",{className:"border-token-border-default border-b",children:i.jsxs("div",{className:"flex w-full items-center justify-between px-4 py-2",children:[i.jsxs("div",{className:"text-token-text-secondary flex items-center gap-2",children:[i.jsx(lg,{className:"size-4"}),i.jsx("span",{className:"text-sm",children:i.jsx(P,{id:"n1Alsn",defaultMessage:"Pulse"})})]}),i.jsx(dB,{automation_id:c,is_enabled:u,item:n,isFinished:m,onEditModalOpen:_,overrideManageAllAction:s,className:"h-6 w-6"})]})}),e[4]=c,e[5]=_,e[6]=a,e[7]=m,e[8]=u,e[9]=n,e[10]=s,e[11]=x):x=e[11];const b=!u&&"grayscale";let y;e[12]!==b?(y=q(b),e[12]=b,e[13]=y):y=e[13];let S;e[14]!==f||e[15]!==y?(S=i.jsx(DT,{displayEmoji:f,className:y}),e[14]=f,e[15]=y,e[16]=S):S=e[16];const C=!u&&"text-token-text-tertiary";let w;e[17]!==C?(w=q("line-clamp-1 w-full text-base font-medium",C),e[17]=C,e[18]=w):w=e[18];let k;e[19]!==d||e[20]!==w?(k=i.jsx("div",{className:w,children:d}),e[19]=d,e[20]=w,e[21]=k):k=e[21];let E;e[22]!==u||e[23]!==n?(E=u?i.jsx(BT,{automation:n}):i.jsx("div",{className:"text-token-text-tertiary text-sm",children:i.jsx(P,N({},Ht.paused))}),e[22]=u,e[23]=n,e[24]=E):E=e[24];let T;e[25]!==k||e[26]!==E?(T=i.jsxs("div",{className:"flex min-w-0 flex-col items-start gap-0.5 text-start",children:[k,E]}),e[25]=k,e[26]=E,e[27]=T):T=e[27];let M;e[28]!==T||e[29]!==S?(M=i.jsxs("div",{className:"flex items-center gap-3 px-4 py-4",children:[S,T]}),e[28]=T,e[29]=S,e[30]=M):M=e[30];let A;e[31]!==_||e[32]!==M?(A=i.jsx("button",{className:"hover:bg-token-main-surface-secondary h-full w-full",onClick:_,children:M}),e[31]=_,e[32]=M,e[33]=A):A=e[33];let I;return e[34]!==o||e[35]!==A||e[36]!==x?(I=i.jsx(i.Fragment,{children:i.jsxs(pk,{fullWidth:o,className:"rounded-3xl! shadow-[0_4px_16px_0_rgba(0,0,0,0.05)]",children:[x,A]})}),e[34]=o,e[35]=A,e[36]=x,e[37]=I):I=e[37],I}function AHe(){Fe.count(Ue.JAWBONE,"sugarbone_message_attachment.open")}function NHe(t){"use forget";const e=D.c(3),{taskId:n}=t;let s;e[0]===Symbol.for("react.memo_cache_sentinel")?(s=i.jsx(P,{id:"xd59EZ",defaultMessage:"View Pulse"}),e[0]=s):s=e[0];let o;return e[1]!==n?(o=i.jsx(ee.Item,{label:s,onClick:()=>window.open(uB(n),"_blank")}),e[1]=n,e[2]=o):o=e[2],o}function DT(t){"use forget";const e=D.c(5),{displayEmoji:n,className:s}=t;let o;e[0]!==s?(o=q("bg-token-bg-tertiary flex h-12 w-12 items-center justify-center rounded-lg text-2xl",s),e[0]=s,e[1]=o):o=e[1];let r;return e[2]!==n||e[3]!==o?(r=i.jsx("div",{className:o,children:n}),e[2]=n,e[3]=o,e[4]=r):r=e[4],r}function BT(t){"use forget";var l;const e=D.c(9),{automation:n}=t;if(!n)return null;let s;e[0]===Symbol.for("react.memo_cache_sentinel")?(s=i.jsx(zxe,{className:"size-4"}),e[0]=s):s=e[0];let o;e[1]!==n.next_run_times?(o=(l=n.next_run_times)!=null?l:[],e[1]=n.next_run_times,e[2]=o):o=e[2];let r;e[3]!==n?(r=i.jsx(rB,{item:n}),e[3]=n,e[4]=r):r=e[4];let a;return e[5]!==n.schedule_components||e[6]!==o||e[7]!==r?(a=i.jsxs("div",{className:"text-token-text-secondary flex items-center gap-1 text-start text-sm",children:[s,i.jsx(zm,{initialScheduleComponents:n.schedule_components,nextRunTimes:o,children:r})]}),e[5]=n.schedule_components,e[6]=o,e[7]=r,e[8]=a):a=e[8],a}const mW=Object.freeze(Object.defineProperty({__proto__:null,SugarboneEmoji:DT,SugarboneMessageAttachmentInner:fW,SugarboneSchedule:BT,ViewPulseAutomationDropdownItem:NHe},Symbol.toStringTag,{value:"Module"}));function IHe(t){"use forget";const e=D.c(4),{automations:n}=t;let s;e[0]!==n?(s=n.map(jHe),e[0]=n,e[1]=s):s=e[1];let o;return e[2]!==s?(o=i.jsx("div",{className:"w-full",children:i.jsx("div",{className:"flex flex-col",children:s})}),e[2]=s,e[3]=o):o=e[3],o}function jHe(t){const{automation:e}=t;return i.jsx(fW,{item:e,fullWidth:!0,includeHeader:!1},e.id)}function i6(t){return t.toSorted((e,n)=>{var r,a;const s=new Date((r=e.next_run_times[0])!=null?r:1/0).getTime(),o=new Date((a=n.next_run_times[0])!=null?a:1/0).getTime();return s-o})}function PHe(){"use forget";const t=D.c(9);let e;t[0]===Symbol.for("react.memo_cache_sentinel")?(e=cf(),t[0]=e):e=t[0];const n=e;let s;t[1]===Symbol.for("react.memo_cache_sentinel")?(s={enabled:n},t[1]=s):s=t[1];const{scheduledAutomations:o,pausedAutomations:r,isLoading:a}=mB(s);let l;e:{if(!n){let m;t[2]===Symbol.for("react.memo_cache_sentinel")?(m=[],t[2]=m):m=t[2],l=m;break e}let f;if(t[3]!==r||t[4]!==o){const m=i6(o).map(OHe),p=i6(r).map(RHe);f=[...m,...p],t[3]=r,t[4]=o,t[5]=f}else f=t[5];l=f}const c=l,u=n?a:!1;let d;return t[6]!==c||t[7]!==u?(d={automations:c,isLoading:u},t[6]=c,t[7]=u,t[8]=d):d=t[8],d}function RHe(t){return{automation:t,isPaused:!0}}function OHe(t){return{automation:t,isPaused:!1}}const Ib=we({scheduledByYou:{id:"pulse.new.curateOverlay.scheduledByYou",defaultMessage:"Scheduled by you"},giveFeedback:{id:"pulse.new.curateOverlay.giveFeedback",defaultMessage:"Give feedback"},scheduleATask:{id:"pulse.new.curateOverlay.scheduleATask",defaultMessage:"Schedule a task"}}),LHe=t=>{"use forget";const e=D.c(22),{title:n,body:s,suggestions:o}=t;let r;e[0]!==o?(r=uw(o,DHe),e[0]=o,e[1]=r):r=e[1];const[a,l]=r,{automations:c}=PHe();let u;e[2]!==n?(u=i.jsx("div",{className:"text-[34px]",children:n}),e[2]=n,e[3]=u):u=e[3];let d;e[4]!==s?(d=i.jsx("span",{className:"text-base",children:s}),e[4]=s,e[5]=d):d=e[5];let f;e[6]!==u||e[7]!==d?(f=i.jsxs("div",{className:"flex flex-col gap-2",children:[u,d]}),e[6]=u,e[7]=d,e[8]=f):f=e[8];let m;e[9]!==c?(m=c.length>0&&i.jsx(jb,{title:i.jsx(P,N({},Ib.scheduledByYou)),children:i.jsx(IHe,{automations:c})}),e[9]=c,e[10]=m):m=e[10];let p;e[11]!==l?(p=l.length>0&&i.jsx(jb,{title:i.jsx(P,N({},Ib.giveFeedback)),children:i.jsx(l6,{suggestions:l})}),e[11]=l,e[12]=p):p=e[12];let g;e[13]!==a?(g=a.length>0&&i.jsx(jb,{title:i.jsx(P,N({},Ib.scheduleATask)),children:i.jsx(l6,{suggestions:a})}),e[13]=a,e[14]=g):g=e[14];let h;e[15]!==m||e[16]!==p||e[17]!==g?(h=i.jsxs("div",{className:"flex flex-col gap-8",children:[m,p,g]}),e[15]=m,e[16]=p,e[17]=g,e[18]=h):h=e[18];let _;return e[19]!==f||e[20]!==h?(_=i.jsxs("div",{className:"flex min-h-0 flex-col gap-6 px-6 pt-12 pb-16",children:[f,h]}),e[19]=f,e[20]=h,e[21]=_):_=e[21],_},jb=t=>{"use forget";const e=D.c(5),{title:n,children:s}=t;let o;e[0]!==n?(o=i.jsx("div",{className:"text-token-text-secondary text-sm",children:n}),e[0]=n,e[1]=o):o=e[1];let r;return e[2]!==s||e[3]!==o?(r=i.jsxs("div",{className:"flex w-full flex-col gap-2",children:[o,s]}),e[2]=s,e[3]=o,e[4]=r):r=e[4],r},l6=t=>{"use forget";const e=D.c(4),{suggestions:n}=t;let s;e[0]!==n?(s=n.map(BHe),e[0]=n,e[1]=s):s=e[1];let o;return e[2]!==s?(o=i.jsx("div",{className:"flex w-full flex-col py-2",children:s}),e[2]=s,e[3]=o):o=e[3],o};function DHe(t){return t.type==="sugar_task"}function BHe(t,e){return i.jsx(i.Fragment,{children:i.jsx(Se,{icon:t.type==="sugar_task"?xg:ll,color:"secondary",className:"rounded-none border-0 border-t text-base font-normal",contentWrapperClassName:"justify-start px-2 gap-4 py-3.5",iconClassName:"text-token-text-tertiary",onClick:()=>lC(t.text,t.type,null,t.is_auto_send),children:t.text},e)})}const FHe=t=>{"use forget";const e=D.c(14),{taskId:n}=t,{automation:s}=Kk(n);if(!s)return null;const{display_emoji:o,display_title:r,prompt:a}=s;let l;e[0]!==o?(l=i.jsx(DT,{displayEmoji:o,className:"mb-4"}),e[0]=o,e[1]=l):l=e[1];let c;e[2]!==r?(c=i.jsx("div",{className:"pb-4 text-[34px]",children:r}),e[2]=r,e[3]=c):c=e[3];let u;e[4]!==s?(u=i.jsx(BT,{automation:s}),e[4]=s,e[5]=u):u=e[5];let d;e[6]===Symbol.for("react.memo_cache_sentinel")?(d=i.jsx("hr",{className:"border-token-border-heavy my-6 border-t"}),e[6]=d):d=e[6];let f;e[7]!==a?(f=i.jsx("div",{children:a}),e[7]=a,e[8]=f):f=e[8];let m;return e[9]!==l||e[10]!==c||e[11]!==u||e[12]!==f?(m=i.jsxs("div",{className:"flex h-full w-full flex-col px-6 pt-16",children:[l,c,u,d,f]}),e[9]=l,e[10]=c,e[11]=u,e[12]=f,e[13]=m):m=e[13],m},Vgt=()=>{"use forget";var l,c,u,d,f,m,p,g,h,_,x,b,y,S,C,w,k,E,T,M,A,I,j,R,O,L,B,U,H,$,F,z,W,Y,K,Z,J,Q,ne,ie,fe;const t=D.c(10);let e;t[0]===Symbol.for("react.memo_cache_sentinel")?(e=cf(),t[0]=e):e=t[0];const n=e,s=X($He),{data:o}=X(GHe);let r;t[1]!==s||t[2]!==((l=o==null?void 0:o.feedback)==null?void 0:l.suggestions)||t[3]!==((c=o==null?void 0:o.onboarding)==null?void 0:c.image_urls)||t[4]!==((f=(d=(u=o==null?void 0:o.survey)==null?void 0:u.survey_config)==null?void 0:d.overlay_content)==null?void 0:f.body)||t[5]!==((g=(p=(m=o==null?void 0:o.survey)==null?void 0:m.survey_config)==null?void 0:p.overlay_content)==null?void 0:g.title)||t[6]!==((x=(_=(h=o==null?void 0:o.survey)==null?void 0:h.survey_config)==null?void 0:_.prompt)==null?void 0:x.suggestions)?(r=((s==null?void 0:s.type)===zn.Preview||(s==null?void 0:s.type)===zn.OnCard||(s==null?void 0:s.type)===zn.TaskEdit)&&i.jsxs(wt.div,{className:"h-full",initial:{opacity:1},animate:{opacity:1},exit:{opacity:0},transition:{duration:.25},children:[(s==null?void 0:s.type)===zn.Preview&&(n?i.jsx(LHe,{title:(S=(y=(b=o==null?void 0:o.survey)==null?void 0:b.survey_config)==null?void 0:y.overlay_content)==null?void 0:S.title,body:(k=(w=(C=o==null?void 0:o.survey)==null?void 0:C.survey_config)==null?void 0:w.overlay_content)==null?void 0:k.body,suggestions:(A=(M=(T=(E=o==null?void 0:o.survey)==null?void 0:E.survey_config)==null?void 0:T.prompt)==null?void 0:M.suggestions)!=null?A:[]}):i.jsx(UHe,{title:(R=(j=(I=o==null?void 0:o.survey)==null?void 0:I.survey_config)==null?void 0:j.overlay_content)==null?void 0:R.title,body:(B=(L=(O=o==null?void 0:o.survey)==null?void 0:O.survey_config)==null?void 0:L.overlay_content)==null?void 0:B.body,suggestions:(U=o==null?void 0:o.feedback)==null?void 0:U.suggestions,images:($=(H=o==null?void 0:o.onboarding)==null?void 0:H.image_urls)==null?void 0:$.map(Hm)})),(s==null?void 0:s.type)===zn.OnCard&&i.jsx(HHe,{cardId:s.cardId}),(s==null?void 0:s.type)===zn.TaskEdit&&n&&i.jsx(FHe,{taskId:s.taskId})]}),t[1]=s,t[2]=(F=o==null?void 0:o.feedback)==null?void 0:F.suggestions,t[3]=(z=o==null?void 0:o.onboarding)==null?void 0:z.image_urls,t[4]=(K=(Y=(W=o==null?void 0:o.survey)==null?void 0:W.survey_config)==null?void 0:Y.overlay_content)==null?void 0:K.body,t[5]=(Q=(J=(Z=o==null?void 0:o.survey)==null?void 0:Z.survey_config)==null?void 0:J.overlay_content)==null?void 0:Q.title,t[6]=(fe=(ie=(ne=o==null?void 0:o.survey)==null?void 0:ne.survey_config)==null?void 0:ie.prompt)==null?void 0:fe.suggestions,t[7]=r):r=t[7];let a;return t[8]!==r?(a=i.jsx(In,{mode:"wait",children:r}),t[8]=r,t[9]=a):a=t[9],a},UHe=t=>{"use forget";const e=D.c(25),{title:n,body:s,suggestions:o,images:r}=t,a=v.useRef(null),l=v.useRef(null),c=v.useRef(null);let u;e[0]===Symbol.for("react.memo_cache_sentinel")?(u={firstRef:l,secondRef:a,firstSide:"top",secondSide:"top",threshold:50,absolute:!1},e[0]=u):u=e[0];const d=QS(u);let f;e[1]===Symbol.for("react.memo_cache_sentinel")?(f={firstRef:c,secondRef:l,firstSide:"top",secondSide:"bottom",threshold:30,absolute:!1},e[1]=f):f=e[1];const m=QS(f),p=d&&"sticky top-0",g=m&&"opacity-10 transition-opacity duration-300";let h;e[2]!==p||e[3]!==g?(h=q("flex h-45 w-full items-center justify-center",p,g),e[2]=p,e[3]=g,e[4]=h):h=e[4];let _;e[5]!==r?(_=r!=null?r:[],e[5]=r,e[6]=_):_=e[6];let x;e[7]!==_?(x=i.jsx(hV,{images:_}),e[7]=_,e[8]=x):x=e[8];let b;e[9]!==h||e[10]!==x?(b=i.jsx("div",{className:h,ref:l,children:x}),e[9]=h,e[10]=x,e[11]=b):b=e[11];let y;e[12]!==n?(y=n&&i.jsx("div",{className:"text-xl font-medium",children:n}),e[12]=n,e[13]=y):y=e[13];let S;e[14]!==s?(S=s&&i.jsx("div",{className:"text-token-text-secondary whitespace-pre-line",children:s}),e[14]=s,e[15]=S):S=e[15];let C;e[16]!==o?(C=o&&i.jsx(EHe,{suggestions:o.map(VHe)}),e[16]=o,e[17]=C):C=e[17];let w;e[18]!==S||e[19]!==C||e[20]!==y?(w=i.jsxs("div",{className:"z-10 flex w-full flex-col gap-4 pb-16",ref:c,children:[y,S,C]}),e[18]=S,e[19]=C,e[20]=y,e[21]=w):w=e[21];let k;return e[22]!==w||e[23]!==b?(k=i.jsxs("div",{className:"relative mx-auto flex h-full w-full max-w-170 flex-1 flex-col items-center justify-center gap-8 overflow-visible px-4 py-6",ref:a,children:[b,w]}),e[22]=w,e[23]=b,e[24]=k):k=e[24],k},HHe=t=>{"use forget";var u,d;const e=D.c(6),{cardId:n}=t,{data:s}=qk(n);if(!s)return null;const o=(u=s.image)==null?void 0:u.url,r=(d=s.image)==null?void 0:d.fallback_url;let a;e[0]!==o||e[1]!==r?(a=i.jsx(Tc,{src:o,fallbackSrc:r,className:"h-32 w-32",shadow:!0}),e[0]=o,e[1]=r,e[2]=a):a=e[2];let l;e[3]===Symbol.for("react.memo_cache_sentinel")?(l=i.jsxs("div",{className:"flex w-full flex-col items-center gap-4",children:[i.jsx("div",{className:"text-xl font-medium",children:i.jsx(P,{id:"TXCx5u",defaultMessage:"Share what you're thinking"})}),i.jsx("div",{children:i.jsx(P,{id:"bZrGT3",defaultMessage:"Every bit of feedback shapes what shows up next."})})]}),e[3]=l):l=e[3];let c;return e[4]!==a?(c=i.jsxs("div",{className:"flex h-full w-full flex-col items-center justify-center gap-8",children:[a,l]}),e[4]=a,e[5]=c):c=e[5],c};function $He(){return Ws().feedbackViewState$()}function GHe(){return cg()}function VHe(t){return{text:t,prompt:t,is_auto_send:!1}}function zgt(t,e){"use forget";const n=D.c(5);let s;n[0]===Symbol.for("react.memo_cache_sentinel")?(s=Ws(),n[0]=s):s=n[0];const o=s;let r,a;n[1]!==e||n[2]!==t?(r=()=>Ar(()=>o.isFeedbackViewOpen$()&&o.shouldAutoSendCompletion$()&&JF()===e,l=>{if(!l)return;o.shouldAutoSendCompletion$.set(!1);const c=o.autoSendCompletion;setTimeout(()=>{var u;c&&c.targetedReply&&t({eventSource:"mouse",promptMessage:Dc(c.userMessage,{targeted_reply:(u=c.targetedReply)!=null?u:void 0}),appendMessages:[Sp(c.targetedReply)]})},250)},{fireImmediately:!0}),a=[o,t,e],n[1]=e,n[2]=t,n[3]=r,n[4]=a):(r=n[3],a=n[4]),v.useEffect(r,a)}const Wgt=()=>{"use forget";const t=D.c(3),e=mo();let n,s;t[0]!==e?(n=()=>{if(e)return Ar(()=>{var l;const o=pi(e);if(!o||Eee(e))return;const r=(l=_a(Ya(e)))==null?void 0:l.messages.find(zHe),a="messageId"in o&&N7(e,c=>c.id===o.messageId)==null;return[r,a]},o=>{if(!o)return;const[r,a]=o,l=pi(e);if((Wt(l,"searchSources")||Wt(l,"retrievalResults"))&&r&&l.messageId!==r.id){const c=Ya(e).length-1,u=r.id,f=Tp(r).some(WHe)?{type:"retrievalResults",turnIndex:c,messageId:u}:{type:"searchSources",turnIndex:c,messageId:u,scrollToHeader:Wt(l,"searchSources")?l.scrollToHeader:void 0};kd(e,f)}else a&&!Wt(l,"entity")&&Ku(e)},{equals:Ji})},s=[e],t[0]=e,t[1]=n,t[2]=s):(n=t[1],s=t[2]),v.useEffect(n,s)};function zHe(t){return t.status!=="in_progress"&&Tp(t).length>0}function WHe(t){return t.type==="file"||t.type==="file_navlist"}const qHe="ChatGPT";function qgt(t,e){const[n]=Ze(t,s=>{var o;return[(o=s==null?void 0:s.title)!=null?o:null]});return v.useMemo(()=>KHe(t,n,e),[t,e,n])}function KHe(t,e,n){const s=hi(t);return n&&n.kind===Bt.GizmoInteraction&&n.gizmo?s?"ChatGPT - ".concat(n.gizmo.gizmo.display.name):e&&"".concat(n.gizmo.gizmo.display.name," - ").concat(e):e||qHe}function Kgt(t){v.useEffect(()=>s_().addAction({key:"prev-message",group:Gn.Chat,keyboardBinding:[Ye.Shift,Ye.ArrowUp],actionMessageDescriptor:qe({id:"N8H1CM",defaultMessage:"Previous message"}),action:e=>c6(e,"up"),enabled:!t},{key:"next-message",group:Gn.Chat,keyboardBinding:[Ye.Shift,Ye.ArrowDown],actionMessageDescriptor:qe({id:"d69Yjj",defaultMessage:"Next message"}),action:e=>c6(e,"down"),enabled:!t}),[t])}function c6(t,e){if(t.target instanceof HTMLDivElement&&t.target.isContentEditable&&t.target.textContent)return!1;const n=[...document.querySelectorAll("article[data-turn=assistant]")];let s;if(document.activeElement instanceof HTMLElement&&n.includes(document.activeElement)&&u6(document.activeElement))s=n.indexOf(document.activeElement)+(e==="down"?1:-1);else{const o=n.findIndex(YHe);if(o===-1)return!1;s=e==="down"?o+1:u6(n[o])?o-1:o}if(s===-1||s>=n.length)return!1;n[s].focus({preventScroll:!0}),n[s].scrollIntoView({behavior:"smooth",block:"start"})}function YHe(t){const e=t.getBoundingClientRect();return e.bottom>pW()&&e.top<window.innerHeight}function u6(t){const e=t.getBoundingClientRect();return e.top>=pW()&&e.top<window.innerHeight}function pW(){return Math.min(200,Math.max(70,window.innerHeight*.2))}function Ygt(t,e){"use forget";const n=D.c(3);let s;n[0]!==t||n[1]!==e?(s=()=>st(t,e),n[0]=t,n[1]=e,n[2]=s):s=n[2];const[o]=v.useState(s);return o}var it=(t=>(t.Chat="chat",t.Search="search",t.Images="images",t.Videos="videos",t.News="news",t))(it||{});const d6="chat";function ZHe(t){var e;return t&&(e=Object.values(it).find(n=>n===t))!=null?e:d6}function kf(){"use forget";const t=D.c(8),[e,n]=wo();let s;if(t[0]!==e){const c=e.get(sv);s=ZHe(c),t[0]=e,t[1]=s}else s=t[1];const o=s;let r;t[2]!==o||t[3]!==n?(r=c=>{const{tabType:u,options:d,extraQueryParams:f}=c,m=d===void 0?{}:d;o!==u&&n(p=>{const g=f!=null?f:new URLSearchParams,h=new URLSearchParams([...g,...p]);return h.set(sv,u),h},m)},t[2]=o,t[3]=n,t[4]=r):r=t[4];const a=r;let l;return t[5]!==a||t[6]!==o?(l=[o,a],t[5]=a,t[6]=o,t[7]=l):l=t[7],l}function Zgt(t){"use forget";const e=D.c(8);let n;e[0]===Symbol.for("react.memo_cache_sentinel")?(n=hs(),e[0]=n):n=e[0];const s=n,o=X(ot.wantsInitialTab$),[,r]=kf();let a;e[1]!==r||e[2]!==o?(a=()=>{s&&o&&o!=="chat"&&(r({tabType:o,options:{replace:!0}}),ot.wantsInitialTab$.set(void 0))},e[1]=r,e[2]=o,e[3]=a):a=e[3];let l;e[4]!==t||e[5]!==r||e[6]!==o?(l=[o,r,s,t],e[4]=t,e[5]=r,e[6]=o,e[7]=l):l=e[7],v.useEffect(a,l)}function Qgt(t){switch(t){case"answer":return"chat";case"web":return"search";case"images":return"images";case"videos":return"videos"}}function gW(t){switch(t){case"chat":return Zs.ATLAS_SUPER_WIDGET_TAB_HOME;case"search":return Zs.ATLAS_SUPER_WIDGET_TAB_SEARCH;case"images":return Zs.ATLAS_SUPER_WIDGET_TAB_IMAGES;case"videos":return Zs.ATLAS_SUPER_WIDGET_TAB_VIDEOS;case"news":return Zs.ATLAS_SUPER_WIDGET_TAB_NEWS}}function Jgt(){v.useEffect(()=>{const t=e=>{const n=e.payload.conversation_id,s=e.payload.update_content,o=e.payload.update_type;if(o==="chime-start-task"){const r=s.task_id,a=s.initiating_message_id;pt(n,l=>{l&&(l.asyncTurns||(l.asyncTurns={}),l.asyncTurns[r]?(l.asyncTurns[r].status="streaming_cot_messages",l.asyncTurns[r].initiatingMessageId=a):l.asyncTurns[r]={turnId:r,messages:{},title:s.title,status:"streaming_cot_messages",initiatingMessageId:a})})}if(o==="chime-update-title"){const r=s.task_id,a=s.title;pt(n,l=>{var u;if(!l)return;const c=(u=l.asyncTurns)==null?void 0:u[r];c&&(c.title=a)})}if(o==="chime-cot-message-add"||o==="chime-final-message-add"){const r=s.task_id,a=s.message;pt(n,l=>{var u;if(!l)return;const c=(u=l.asyncTurns)==null?void 0:u[r];c&&(c.status="streaming_cot_messages",c.messages[a.id]=a,o==="chime-final-message-add"&&(c.status="streaming_final_message",l.tree.getNodeIfExists(a.id)?fo.updateTree(l,f=>{a.metadata||(a.metadata={}),f.updateNodeMessage(a.id,a)}):fo.appendMessage(l,a),a.status==="finished_successfully"&&(c.status="done")))})}};return Tee.on("conversation-update",t)},[])}const Xgt=je(()=>{const t=Me(()=>import("./19cb8032-n1bgwayralwuzw2m.js"),__vite__mapDeps([323,1,2,3,151,19,324,325,326,106,107,108,327,328,329,102])).then(e=>e.NewUserPersonalityOnboarding);return t.catch(e=>{Ve.addAction("chatgpt_personality_upsell_load_error",{cause:e.message}),V.logEventWithStatsig("Web: Personality Upsell: Load Error","chatgpt_personality_upsell_load_error",{cause:e.message})}),t});function eht(t){const e={openedAt:Date.now(),closedAt:null,hasLoggedImpression:!1,increment:(n,s,o)=>{var r,a;n==="personality"?(e.selectionCounts[s]=((r=e.selectionCounts[s])!=null?r:0)+1,V.logEventWithStatsig("Web: Personality Selection: Personality Selected","chatgpt_personality_onboarding_personality_selection",{personality:s}),Ve.addAction("chatgpt_personality_onboarding_personality_selection",{personality:s,platform:"web"})):(e.selectionCounts[s]=((a=e.selectionCounts[s])!=null?a:0)+1,V.logEventWithStatsig("Web: Personality Selection: Trait Selected","chatgpt_personality_onboarding_trait_selection",{trait:s,level:o}),Ve.addAction("chatgpt_personality_onboarding_trait_selection",{trait:s,level:o,platform:"web"}))},log:n=>{switch(n){case"impression":{if(e.hasLoggedImpression)return;e.hasLoggedImpression=!0,e.openedAt=Date.now(),V.logEventWithStatsig("Web: Personality Selection: Onboarding Shown","chatgpt_personality_onboarding_modal_impression"),Ve.addAction("chatgpt_personality_onboarding_modal_impression",{platform:"web"});break}case"skip":{V.logEventWithStatsig("Web: Personality Selection: Skip","chatgpt_personality_onboarding_skip"),Ve.addAction("chatgpt_personality_onboarding_skip",{platform:"web"});break}}},mode:t,selectionCounts:{},finalSelection:null,wasSubmitted:!1};return e}function tht(t,e,n){t.closedAt=Date.now(),t.wasSubmitted=e,n&&(t.finalSelection=n)}function QHe(t){if(!t.closedAt||!t.openedAt)return null;const e=t.closedAt-t.openedAt;return e<3e4?"under_30_seconds":e<6e4?"30_60_seconds":e<5*6e4?"1_5_minutes":"5_plus_minutes"}async function nht(t){var l;await di.yield();const{mode:e,finalSelection:n,wasSubmitted:s}=t,o=(l=QHe(t))!=null?l:null,r=s?"success":"failure";if(!s)return;const a=e==="personality"?"Web: Personality Selection: Continue":"Web: Traits Selection: Continue";V.logEventWithStatsig(a,"chatgpt_personality_onboarding_submit",{outcome:r,mode:e,duration_bucket:o,opened_at:t.openedAt,closed_at:t.closedAt,selection_type:n,selection_counts:t.selectionCounts}),Ve.addAction("chatgpt_personality_onboarding_continue",{mode:e,duration_bucket:o,opened_at:t.openedAt,closed_at:t.closedAt,selection_type:n,selection_counts:t.selectionCounts})}class Vi extends ml()(n=>n){constructor(){super(...arguments);ye(this,"startReplay",n=>{this.setState(()=>({isReplayEnabled:!0,finalMessageId:n}))});ye(this,"endReplay",()=>{this.setState(()=>({isPlaying:!1,isReplayEnabled:!1,finalMessageId:null}))});ye(this,"setIsReplayEnabled",n=>{this.setState(s=>G(N({},s),{isReplayEnabled:n}))});ye(this,"toggleIsPlaying",()=>{this.setState(n=>G(N({},n),{isPlaying:!n.isPlaying}))});ye(this,"setPlaying",n=>{this.setState(s=>G(N({},s),{isPlaying:n}))});ye(this,"setSpeed",n=>{this.setState(s=>G(N({},s),{playbackSpeed:n}))})}}ye(Vi,"getFinalMessageId",({finalMessageId:n})=>n),ye(Vi,"isReplayInProgress",(n,s)=>n.isReplayEnabled&&n.finalMessageId!==s);function sht({children:t,clientThreadId:e}){const n=Ze(e,d=>!!(d!=null&&d.tree.getBranchFromLeaf(d.currentLeafId).some(f=>{var m;return(m=f.message.metadata)==null?void 0:m.n7jupd_message}))),s=Ze(e,d=>d==null?void 0:d.currentLeafId),o=!!s,l=ND()&&n&&!!s,c=l?s:null,[u]=v.useState(()=>new Vi({finalMessageId:c,isReplayEnabled:l,isPlaying:!1,playbackSpeed:1}));return v.useEffect(()=>{o&&l&&u.setState({isReplayEnabled:l,finalMessageId:c})},[o]),i.jsx(Vi.Provider,{store:u,children:t})}function oht(){return Eo("3438591328").get("use_scroll_v3",!1)}const JHe=re(me,"14ac53",20,20),XHe=({onClick:t})=>{const e=te();return i.jsx("div",{className:q("sticky top-6 z-10 flex h-0 items-start justify-center motion-safe:transition-all motion-safe:delay-300 motion-safe:duration-300","group-[:not([data-scroll-from-top])]/thread:scale-50","group-[:not([data-scroll-from-top])]/thread:opacity-0","group-[:not([data-scroll-from-top])]/thread:pointer-events-none","group-[:not([data-scroll-from-top])]/thread:duration-100","group-[:not([data-scroll-from-top])]/thread:delay-0"),children:i.jsx(hW,{label:e.formatMessage({id:"dZQBu/",defaultMessage:"Scroll to beginning"}),onClick:t,children:i.jsx(JHe,{className:"icon text-token-text-primary min-w-8"})})})},e$e=({streamingState:t,onClick:e})=>{const n=te();return i.jsx("div",{className:q("sticky bottom-[calc(var(--composer-overlap-px)+--spacing(6))] z-10 flex h-0 items-end justify-center motion-safe:transition-all motion-safe:delay-300 motion-safe:duration-300","group-[:not([data-scroll-from-end])]/thread:scale-50","group-[:not([data-scroll-from-end])]/thread:opacity-0","group-[:not([data-scroll-from-end])]/thread:pointer-events-none","group-[:not([data-scroll-from-end])]/thread:duration-100","group-[:not([data-scroll-from-end])]/thread:delay-0"),children:i.jsx(hW,{label:n.formatMessage({id:"JDdG2F",defaultMessage:"Scroll to end"}),onClick:e,contentKey:t,children:i.jsxs("div",{className:"absolute end-0 flex items-center pe-1 text-nowrap",children:[t==="streaming"?i.jsx("span",{className:"loading-shimmer-pure-text ps-2.5",children:i.jsx(P,{id:"lMu1TV",defaultMessage:"Responding"})}):t==="unseen"?i.jsx("span",{className:"ps-2.5",children:i.jsx(P,{id:"mX2yAS",defaultMessage:"Done"})}):null,i.jsx(MH,{className:"icon text-token-text-primary min-w-6"})]})})})},hW=({children:t,label:e,onClick:n,contentKey:s})=>{const o=v.useRef(null),r=v.useCallback(()=>{const a=o.current,l=a==null?void 0:a.firstElementChild;l&&(a.style.width="".concat(l.clientWidth,"px"))},[]);return v.useEffect(()=>{s!=null&&r()},[r,s]),i.jsx("button",{tabIndex:-1,onClick:n,"aria-label":e,onTransitionEnd:r,className:q("absolute flex h-8 min-w-8 cursor-pointer items-center justify-end overflow-hidden rounded-full outline-hidden select-none","motion-safe:transition-width motion-safe:duration-300","btn-secondary box-content shadow-sm sm:shadow-md dark:shadow-none!"),ref:o,children:t})},t$e="R6Vx5W_threadGutter",n$e="R6Vx5W_threadRoot",s$e={threadGutter:t$e,threadRoot:n$e},rht=n=>{var s=n,{clientThreadId:t}=s,e=De(s,["clientThreadId"]);const o=M3e(),[r,a,l]=Ze(t,f=>{var m,p;return[ve.isMessageTurnEnded(f),ve.getRequestId(f),(p=(m=ve.getConversationLastTurn(f))==null?void 0:m.messages.some(g=>o.has(g.id)))!=null?p:!1]}),u=Dr(a)&&!r||l,d=i.jsx(o$e,N({isStreaming:u},e));return e.initScrolledToEnd?i.jsx(Fc,{children:i.jsxs(v.Suspense,{fallback:null,children:[i.jsx(ele,{}),d]})}):d},o$e=({allowScrollToEnd:t,allowScrollToTop:e,children:n,initScrolledToEnd:s,isStreaming:o,threadFooterRef:r,threadRootRef:a})=>{const l=v.useRef(null),c=v.useRef(null),u=v.useRef(null),d=v.useRef(null),[f,m]=v.useState("seen");bs(()=>{const h=l.current;!s||!h||(h.scrollTop=h.scrollHeight,requestAnimationFrame(()=>{h.scrollTop=h.scrollHeight,requestAnimationFrame(()=>{h.scrollTop=h.scrollHeight})}))},[]),ox(()=>{const h=a.current,_=r.current,x=l.current,b=u.current,y=c.current;if(!h||!x||!b||!y)return;const S=f6(b,{root:x,threshold:0},E=>{As.setIsConversationScrolledFromTop(!E.isIntersecting),rc(h,"data-scroll-from-top",!E.isIntersecting)}),C=Array.from({length:101},(E,T)=>T/100),w=f6(y,{root:x,threshold:C,rootMargin:"1px"},E=>{a$e(x,y),!E.isIntersecting&&_W(d)?Pb(h,x):rc(h,"data-scroll-from-end",!E.isIntersecting)}),k=_&&c$e(_,E=>{h.style.setProperty("--thread-footer-height","".concat(E,"px"))});return()=>{S==null||S(),w==null||w(),k==null||k()}}),v.useEffect(()=>{const h=a.current,_=c.current,x=l.current;!t||!h||!_||!x||(rc(h,"data-stream-active",o),o&&Pb(h,x),m(o?"streaming":M7(h,"data-scroll-from-end")?"unseen":"seen"),o||l$e(d))},[o]);const p=v.useCallback(()=>{const h=a.current,_=l.current;!h||!_||r$e(h,_)},[a]),g=v.useCallback(()=>{ft.logEvent("chatgpt_thread_scroll_to_bottom");const h=a.current,_=l.current,x=c.current;!h||!_||!x||(Pb(h,_),o?i$e(h,d):m("seen"))},[o,a]);return i.jsxs("div",{className:"@container h-full overflow-y-auto [scrollbar-gutter:stable_both-edges] group-data-stream-active/thread:[overflow-anchor:none]",ref:l,children:[e&&i.jsx(XHe,{onClick:p}),i.jsx("div",{ref:u,className:"pointer-events-none w-px"}),n,i.jsx("div",{ref:c,className:q("pointer-events-none w-px",s$e.threadGutter,"min-h-[max(var(--gutter-min-height,0px),var(--gutter-remaining-height,0px))] md:[--gutter-min-height:2.25rem]","group-data-stream-active/thread:h-(--thread-end-gutter-active-height)")}),t&&i.jsx(e$e,{streamingState:f,onClick:g})]})};function r$e(t,e){rc(t,"data-scroll-from-top",!1),e==null||e.scrollTo({top:0,behavior:"smooth"})}function Pb(t,e){rc(t,"data-scroll-from-end",!1),e==null||e.scrollTo({top:e.scrollHeight,behavior:"smooth"})}function a$e(t,e){const n=t.getBoundingClientRect().bottom-e.getBoundingClientRect().top;n>0?e.style.setProperty("--gutter-remaining-height","".concat(n,"px")):e.style.removeProperty("--gutter-remaining-height")}function _W(t){return t.current!=null}function i$e(t,e){if(!_W(e)&&t){const n=()=>{e.current=null,t.removeEventListener("wheel",n),t.removeEventListener("pointerdown",n)};e.current=n,t.addEventListener("wheel",n,{passive:!0}),t.addEventListener("pointerdown",n)}}function l$e(t){var e;(e=t.current)==null||e.call(t)}function f6(t,e,n){const s=new IntersectionObserver(o=>{n(o[o.length-1])},e);return s.observe(t),()=>s.disconnect()}function c$e(t,e){const n=()=>e(t.getBoundingClientRect().height);n();const s=new ResizeObserver(n);return s.observe(t),()=>s.disconnect()}function aht({message:t,className:e}){return i.jsxs("div",{className:q("bg-token-bg-status-warning text-token-text-status-warning border-token-border-status-warning flex items-center gap-3 rounded-2xl border px-4 py-3 text-sm font-medium",e),children:[i.jsx(_R,{className:"icon-sm text-token-text-status-warning shrink-0"}),i.jsx("span",{className:"text-pretty",children:t})]})}const u$e="listening",d$e="connecting",iht=()=>{"use forget";const t=Mee(),e=Aee();let n;e:{if(t){if(e===u$e){n=kLe;break e}else if(e===d$e){n=ELe;break e}}else{n=void 0;break e}n=void 0}return n};function f$e({id:t,name:e,checked:n,onChange:s=uo}){return i.jsx("input",{className:"sr-only",checked:n,id:t,name:e,type:"checkbox",readOnly:!0,onChange:s})}function lht(t){"use forget";const e=D.c(8),{gizmo:n}=t;let s;e[0]!==n?(s=n?Nee(n.tools):!1,e[0]=n,e[1]=s):s=e[1];const o=s;let r;e[2]===Symbol.for("react.memo_cache_sentinel")?(r=i.jsxs("h1",{className:"text-[28px] leading-[34px] font-normal tracking-[0.38px]","data-testid":"temporary-chat-label",children:[i.jsx(f$e,{id:"temporary-chat-checkbox",name:"temporary-chat-checkbox",checked:!0}),i.jsx(P,N({},Ru.temporaryChat))]}),e[2]=r):r=e[2];let a;e[3]===Symbol.for("react.memo_cache_sentinel")?(a=i.jsx(p$e,{}),e[3]=a):a=e[3];let l;e[4]!==o?(l=o&&i.jsx("div",{className:"mt-3",children:i.jsx(P,G(N({},Ru.temporaryChatDescriptionGptActions),{values:{link:m$e}}))}),e[4]=o,e[5]=l):l=e[5];let c;return e[6]!==l?(c=i.jsxs("div",{className:"flex flex-col items-center gap-3",children:[r,i.jsxs("div",{className:"text-token-text-secondary dark:text-token-text-tertiary max-w-[80%] text-center text-base leading-[24px] font-normal tracking-[-0.32px] text-balance sm:max-w-none sm:whitespace-nowrap",children:[a,l]})]}),e[6]=l,e[7]=c):c=e[7],c}function m$e(t){return i.jsx("a",{href:"https://help.openai.com/en/articles/8914046-temporary-chat-faq",target:"_blank",className:"underline",rel:"noreferrer",children:t})}function p$e(){"use forget";const t=D.c(2),e=Et(),n=e==null?void 0:e.isWorkspaceAccount(),s=Fp(),o=n?s?Ru.temporaryChatBizMemoryAvailable:Ru.temporaryChatBizMemoryUnavailable:s?Ru.temporaryChatDescriptionMemoryAvailable:Ru.temporaryChatDescriptionMemoryUnavailable;let r;return t[0]!==o?(r=i.jsx(P,N({},o)),t[0]=o,t[1]=r):r=t[1],r}const Ru=we({temporaryChat:{id:"GizmoLanding.temporaryChat",defaultMessage:"Temporary Chat"},temporaryChatBizMemoryAvailable:{id:"otDmKh",defaultMessage:"Memory is disabled for this chat, and it wont appear in your history."},temporaryChatBizMemoryUnavailable:{id:"fQmbtG",defaultMessage:"This chat won't appear your conversation history."},temporaryChatDescriptionMemoryAvailable:{id:"GizmoLanding.temporaryChatDescriptionMemoryAvailable",defaultMessage:"This chat wont appear in your chat history, and wont be used to train our models."},temporaryChatDescriptionMemoryUnavailable:{id:"GizmoLanding.temporaryChatDescriptionMemoryUnavailable",defaultMessage:"This chat won't appear in history or be used to train our models. For safety purposes, we may keep a copy of this chat for up to 30 days."},temporaryChatDescriptionGptActions:{id:"GizmoLanding.temporaryChatDescriptionGptActions",defaultMessage:"Any data shared with a third party through GPT actions are subject to the third party's privacy policy. <link>Learn more</link>"}});function cht(){return xe("2429530106")}function g$e(){return xe("330297645")}const xW=Hn(()=>{const t=st("loading");return{auraAnnouncementBannerState$:t,setAuraAnnouncementBannerState:n=>{t.set(n)}}});function h$e(){const t=localStorage.getItem(Ie.AuraAnnouncementBannerImpressions),e=t?parseInt(t):null;e==null||isNaN(e)?localStorage.setItem(Ie.AuraAnnouncementBannerImpressions,JSON.stringify(1)):localStorage.setItem(Ie.AuraAnnouncementBannerImpressions,JSON.stringify(e+1)),localStorage.setItem(Ie.LastSeenAuraAnnouncementBannerAt,JSON.stringify(pa(new Date))),localStorage.getItem(Ie.FirstSeenAuraAnnouncementBannerAt)==null&&localStorage.setItem(Ie.FirstSeenAuraAnnouncementBannerAt,JSON.stringify(pa(new Date)))}function _$e(t){const e=localStorage.getItem(Ie.FirstSeenAuraAnnouncementBannerAt);if(!e)return!1;const n=parseInt(e);if(isNaN(n))return!1;const s=Or(n);return Ho(new Date,s)>t}function x$e(t){const e=localStorage.getItem(Ie.AuraAnnouncementBannerImpressions);if(!e)return!1;const n=parseInt(e);return isNaN(n)?!1:n>=t}function y$e(){const t=mn("619645130"),e=t.get("max_days_visible",-1);if(e>=0&&_$e(e))return!0;const n=t.get("max_impressions",-1);if(n>=0&&x$e(n))return!0;if(t.get("limit_one_impression_per_day",!1)){const o=localStorage.getItem(Ie.LastSeenAuraAnnouncementBannerAt),r=o?parseInt(o):null;if(r!=null&&!isNaN(r)){const a=Or(r);if(Ho(new Date,a)<1)return!0}}return!1}function b$e(){return localStorage.getItem(Ie.HasDismissedAuraAnnouncementBanner)!=null}function yW(){localStorage.setItem(Ie.HasDismissedAuraAnnouncementBanner,"true")}const v$e=t=>v.createElement("svg",N({viewBox:"0 0 468 56",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),v.createElement("style",null,"\n    .path1 {\n      fill: var(--bg-primary, currentColor);\n    }\n    .path2 {\n      fill: var(--tab-color, rgba(0, 0, 0, 1));\n    }\n  "),v.createElement("g",{clipPath:"url(#clip0_3_20)"},v.createElement("mask",{id:"path-1-outside-1_3_20",maskUnits:"userSpaceOnUse",x:-1,y:7.19714,width:777,height:50,fill:"black"},v.createElement("rect",{fill:"currentColor",x:-1,y:7.19714,width:777,height:50}),v.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M33.738 17.1748C33.738 14.0323 33.738 12.4611 34.3496 11.2608C34.8875 10.205 35.7459 9.34666 36.8017 8.80871C38.002 8.19714 39.5732 8.19714 42.7157 8.19714H123.515C126.657 8.19714 128.228 8.19714 129.429 8.80871C130.484 9.34666 131.343 10.205 131.881 11.2608C132.492 12.4611 132.492 14.0323 132.492 17.1748V26.2161C132.526 28.6659 134.523 30.6417 136.981 30.6417H132.492V30.6413H33.7385V30.6417H29.2492C31.7073 30.6417 33.7044 28.6654 33.738 26.2153V17.1748ZM774.322 30.6421H0V55.3306H774.322V30.6421Z"})),v.createElement("path",{className:"path1",fillRule:"evenodd",clipRule:"evenodd",d:"M33.738 17.1748C33.738 14.0323 33.738 12.4611 34.3496 11.2608C34.8875 10.205 35.7459 9.34666 36.8017 8.80871C38.002 8.19714 39.5732 8.19714 42.7157 8.19714H123.515C126.657 8.19714 128.228 8.19714 129.429 8.80871C130.484 9.34666 131.343 10.205 131.881 11.2608C132.492 12.4611 132.492 14.0323 132.492 17.1748V26.2161C132.526 28.6659 134.523 30.6417 136.981 30.6417H132.492V30.6413H33.7385V30.6417H29.2492C31.7073 30.6417 33.7044 28.6654 33.738 26.2153V17.1748ZM774.322 30.6421H0V55.3306H774.322V30.6421Z",fill:"currentColor"}),v.createElement("path",{className:"path2",d:"M34.3496 11.2608L33.4586 10.8068L33.4586 10.8068L34.3496 11.2608ZM36.8017 8.80871L37.2557 9.69972L37.2557 9.69972L36.8017 8.80871ZM129.429 8.80871L129.883 7.9177L129.883 7.9177L129.429 8.80871ZM131.881 11.2608L130.99 11.7148L130.99 11.7148L131.881 11.2608ZM132.492 26.2161H131.492L131.492 26.23L132.492 26.2161ZM132.492 30.6417H131.492V31.6417H132.492V30.6417ZM132.492 30.6413H133.492V29.6413H132.492V30.6413ZM33.7385 30.6413V29.6413H32.7385V30.6413H33.7385ZM33.7385 30.6417V31.6417H34.7385V30.6417H33.7385ZM33.738 26.2153L34.738 26.229V26.2153H33.738ZM0 30.6421V29.6421H-1V30.6421H0ZM774.322 30.6421H775.322V29.6421H774.322V30.6421ZM0 55.3306H-1V56.3306H0V55.3306ZM774.322 55.3306V56.3306H775.322V55.3306H774.322ZM34.3496 11.2608L33.4586 10.8068C33.069 11.5714 32.8993 12.4106 32.8178 13.408C32.7372 14.3939 32.738 15.6201 32.738 17.1748H33.738H34.738C34.738 15.5871 34.7388 14.4564 34.8111 13.5709C34.8825 12.6971 35.0186 12.1505 35.2406 11.7148L34.3496 11.2608ZM36.8017 8.80871L36.3477 7.9177C35.1038 8.55152 34.0924 9.56288 33.4586 10.8068L34.3496 11.2608L35.2406 11.7148C35.6827 10.8472 36.3881 10.1418 37.2557 9.69972L36.8017 8.80871ZM42.7157 8.19714V7.19714C41.1609 7.19714 39.9347 7.19637 38.9489 7.27691C37.9514 7.35841 37.1123 7.52812 36.3477 7.9177L36.8017 8.80871L37.2557 9.69972C37.6914 9.47773 38.238 9.34166 39.1118 9.27027C39.9973 9.19792 41.1279 9.19714 42.7157 9.19714V8.19714ZM123.515 8.19714V7.19714H42.7157V8.19714V9.19714H123.515V8.19714ZM129.429 8.80871L129.883 7.9177C129.118 7.52812 128.279 7.35841 127.281 7.27691C126.295 7.19637 125.069 7.19714 123.515 7.19714V8.19714V9.19714C125.102 9.19714 126.233 9.19792 127.118 9.27027C127.992 9.34166 128.539 9.47773 128.975 9.69972L129.429 8.80871ZM131.881 11.2608L132.772 10.8068C132.138 9.56289 131.126 8.55153 129.883 7.9177L129.429 8.80871L128.975 9.69972C129.842 10.1418 130.548 10.8472 130.99 11.7148L131.881 11.2608ZM132.492 17.1748H133.492C133.492 15.6201 133.493 14.3939 133.412 13.408C133.331 12.4106 133.161 11.5714 132.772 10.8068L131.881 11.2608L130.99 11.7148C131.212 12.1505 131.348 12.6971 131.419 13.5709C131.491 14.4564 131.492 15.5871 131.492 17.1748H132.492ZM132.492 26.2161H133.492V17.1748H132.492H131.492V26.2161H132.492ZM136.981 30.6417V29.6417C135.071 29.6417 133.519 28.1059 133.492 26.2022L132.492 26.2161L131.492 26.23C131.534 29.2258 133.976 31.6417 136.981 31.6417V30.6417ZM132.492 30.6417V31.6417H136.981V30.6417V29.6417H132.492V30.6417ZM132.492 30.6413H131.492V30.6417H132.492H133.492V30.6413H132.492ZM33.7385 30.6413V31.6413H132.492V30.6413V29.6413H33.7385V30.6413ZM33.7385 30.6417H34.7385V30.6413H33.7385H32.7385V30.6417H33.7385ZM29.2492 30.6417V31.6417H33.7385V30.6417V29.6417H29.2492V30.6417ZM33.738 26.2153L32.7381 26.2016C32.712 28.1056 31.1596 29.6417 29.2492 29.6417V30.6417V31.6417C32.255 31.6417 34.6968 29.2253 34.7379 26.229L33.738 26.2153ZM33.738 17.1748H32.738V26.2153H33.738H34.738V17.1748H33.738ZM0 30.6421V31.6421H774.322V30.6421V29.6421H0V30.6421ZM0 55.3306H1V30.6421H0H-1V55.3306H0ZM774.322 55.3306V54.3306H0V55.3306V56.3306H774.322V55.3306ZM774.322 30.6421H773.322V55.3306H774.322H775.322V30.6421H774.322Z",mask:"url(#path-1-outside-1_3_20)"})),v.createElement("defs",null,v.createElement("clipPath",{id:"clip0_3_20"},v.createElement("rect",{width:468,height:55.3307,fill:"currentColor"})))),bW="https://persistent.oaistatic.com/sandwich/26e83b2ac5b9e29e1.webp",vW="https://persistent.oaistatic.com/sandwich/2cf24dba5fb0a30e.webp",S$e="https://persistent.oaistatic.com/atlas/public/ChatGPT_Atlas.dmg",C$e="https://persistent.oaistatic.com/atlas/public/Install_ChatGPT_Atlas.dmg";function w$e(t){V.logEventWithStatsig("ChatGPT Web Aura Announcement Banner Download Clicked","chatgpt_web_aura_announcement_banner_download_clicked",{download_type:t}),Fe.count(Ue.ATLAS,"chatgpt_web_aura_announcement_banner_download_clicked")}const cC=468,uC=520,uht=t=>{"use forget";const e=D.c(34),{shouldShowDisclaimer:n,clientThreadId:s}=t,o=Un(s),r=Ze(s,ve.getCurrentLeafId);let a;e[0]!==r||e[1]!==o?(a={serverThreadId:o,leafId:r},e[0]=r,e[1]=o,e[2]=a):a=e[2];const l=Sw(a);let c;e[3]!==s?(c=()=>ai(s),e[3]=s,e[4]=c):c=e[4];const u=c,{mutate:d}=bg(u),{mutate:f}=vg(u),{mutate:m}=sT(u),p=(l==null?void 0:l.beacon_id)==="atlas_launch_announcement_banner",g=yg("(max-height: 660px)"),h=v.useRef(!1);let _,x;e[5]!==l||e[6]!==g||e[7]!==d||e[8]!==p?(_=()=>{!p||g||h.current||(Ad(l,"show"),d(l.beacon_id),h.current=!0)},x=[l,d,p,g],e[5]=l,e[6]=g,e[7]=d,e[8]=p,e[9]=_,e[10]=x):(_=e[9],x=e[10]),v.useEffect(_,x);let b;e[11]!==l||e[12]!==f?(b=()=>{l&&(Ad(l,"dismiss"),f(l.beacon_id),Wo.dismiss())},e[11]=l,e[12]=f,e[13]=b):b=e[13];const y=b;let S;e[14]!==y?(S=()=>{y(),V.logEventWithStatsig("ChatGPT Web Aura Announcement Banner Dismissed","chatgpt_web_aura_announcement_banner_dismissed"),Fe.count(Ue.ATLAS,"chatgpt_web_aura_announcement_banner_dismissed")},e[14]=y,e[15]=S):S=e[15];const C=S;let w;e[16]!==l||e[17]!==m?(w=()=>{l&&(m({beaconId:l.beacon_id,eventCtaId:"atlas_launch_announcement_banner_download_click"}),V.logEventWithStatsig("Web Beacon Clicked","chatgpt_web_beacon_clicked",{beacon_id:l.beacon_id,beacon_name:l.beacon_name}))},e[16]=l,e[17]=m,e[18]=w):w=e[18];const k=w;let E;e[19]===Symbol.for("react.memo_cache_sentinel")?(E=xW(),e[19]=E):E=e[19];const{setAuraAnnouncementBannerState:T}=E;let M,A;e[20]!==p?(A=()=>{T(p?"shown":"not-shown")},M=[p,T],e[20]=p,e[21]=M,e[22]=A):(M=e[21],A=e[22]),v.useEffect(A,M);let I;e[23]===Symbol.for("react.memo_cache_sentinel")?(I=y$e()||b$e(),e[23]=I):I=e[23];const j=I,R=!!l;let O,L;if(e[24]!==R||e[25]!==y||e[26]!==p?(O=()=>{!j||!R||!p||y()},L=[j,R,y,p],e[24]=R,e[25]=y,e[26]=p,e[27]=O,e[28]=L):(O=e[27],L=e[28]),v.useEffect(O,L),!p||g||j)return null;let B;return e[29]!==s||e[30]!==C||e[31]!==k||e[32]!==n?(B=i.jsx(SW,{shouldShowDisclaimer:n,onDismiss:C,onClicked:k,type:"beacon",clientThreadId:s,className:"fixed"}),e[29]=s,e[30]=C,e[31]=k,e[32]=n,e[33]=B):B=e[33],B},dht=t=>{"use forget";const e=D.c(12),{shouldShowDisclaimer:n,clientThreadId:s}=t,o=X(j$e),r=Un(s),[a,l]=v.useState(!1);let c;e[0]===Symbol.for("react.memo_cache_sentinel")?(c=()=>{l(!0),yW(),V.logEventWithStatsig("ChatGPT Web Aura Announcement Banner Dismissed","chatgpt_web_aura_announcement_banner_dismissed"),Fe.count(Ue.ATLAS,"chatgpt_web_aura_announcement_banner_dismissed")},e[0]=c):c=e[0];const u=c,d=Date.now()/1e3-604800,f=o&&o.created<d,{data:m,isLoading:p}=bo(Ft.BrowserReferenceWebHistoryInChat),g=m!==void 0;let h;e[1]!==r?(h={serverThreadId:r},e[1]=r,e[2]=h):h=e[2];const _=!!Bce(h),x=!f||g||_,b=P$e;let y;e[3]===Symbol.for("react.memo_cache_sentinel")?(y=xW(),e[3]=y):y=e[3];const{setAuraAnnouncementBannerState:S}=y;let C,w;if(e[4]!==o||e[5]!==x||e[6]!==p?(C=()=>{p||!o||S(x?"not-shown":"shown")},w=[o,x,p,S],e[4]=o,e[5]=x,e[6]=p,e[7]=C,e[8]=w):(C=e[7],w=e[8]),v.useEffect(C,w),yg("(max-height: 660px)")||a||x||p)return null;let E;return e[9]!==s||e[10]!==n?(E=i.jsx(SW,{shouldShowDisclaimer:n,onDismiss:u,onClicked:b,type:"manual",clientThreadId:s,className:"fixed"}),e[9]=s,e[10]=n,e[11]=E):E=e[11],E};function SW(t){"use forget";const e=D.c(33),{shouldShowDisclaimer:n,onDismiss:s,onClicked:o,type:r,className:a,clientThreadId:l}=t,c=X(jee),u=X(T$e),[d,f]=v.useState(0);let m,p;e[0]===Symbol.for("react.memo_cache_sentinel")?(m=()=>{const B=new Image;B.src=bW,B.onload=()=>f(E$e)},p=[],e[0]=m,e[1]=p):(m=e[0],p=e[1]),v.useEffect(m,p);let g,h;e[2]===Symbol.for("react.memo_cache_sentinel")?(g=()=>{const B=new Image;B.src=vW,B.onload=()=>f(k$e)},h=[],e[2]=g,e[3]=h):(g=e[2],h=e[3]),v.useEffect(g,h);const _=d>=2;let x,b;if(e[4]!==_||e[5]!==r?(x=()=>{_&&(V.logEventWithStatsig("ChatGPT Web Aura Announcement Banner Shown","chatgpt_web_aura_announcement_banner_shown"),Fe.count(Ue.ATLAS,"chatgpt_aura_announcement_banner_shown"),r==="manual"&&h$e())},b=[_,r],e[4]=_,e[5]=r,e[6]=x,e[7]=b):(x=e[6],b=e[7]),v.useEffect(x,b),!_)return null;let y,S,C;e[8]===Symbol.for("react.memo_cache_sentinel")?(y={opacity:0,y:"100%"},S={opacity:1,y:0},C={opacity:0,y:"100%"},e[8]=y,e[9]=S,e[10]=C):(y=e[8],S=e[9],C=e[10]);const w=c?0:.75;let k;e[11]!==c?(k=c?void 0:[.33,0,.05,1],e[11]=c,e[12]=k):k=e[12];let E;e[13]!==w||e[14]!==k?(E={duration:w,ease:k},e[13]=w,e[14]=k,e[15]=E):E=e[15];const T=E;let M;e[16]!==a?(M=q("pointer-events-none start-1/2 bottom-0 z-[70] -translate-x-1/2",a),e[16]=a,e[17]=M):M=e[17];const A=u?uC:cC;let I;e[18]!==A?(I={minWidth:A},e[18]=A,e[19]=I):I=e[19];let j;e[20]===Symbol.for("react.memo_cache_sentinel")?(j=i.jsx(A$e,{className:"col-span-full row-span-full justify-self-center"}),e[20]=j):j=e[20];let R;e[21]!==o||e[22]!==s?(R=i.jsxs("div",{className:"grid w-full grid-cols-1 grid-rows-1 overflow-hidden",children:[j,i.jsx(M$e,{onDismiss:s,onClicked:o,className:"col-span-full row-span-full self-end justify-self-center"})]}),e[21]=o,e[22]=s,e[23]=R):R=e[23];let O;e[24]!==l||e[25]!==n?(O=n&&i.jsx("div",{className:q("text-token-text-secondary relative mt-auto flex min-h-8 w-full items-center justify-center text-center text-xs whitespace-nowrap [view-transition-name:var(--vt-disclaimer)] md:px-[60px]"),children:i.jsx(wPe,{clientThreadId:l})}),e[24]=l,e[25]=n,e[26]=O):O=e[26];let L;return e[27]!==T||e[28]!==M||e[29]!==I||e[30]!==R||e[31]!==O?(L=i.jsx(In,{children:i.jsxs(wt.div,{initial:y,animate:S,exit:C,transition:T,className:M,style:I,children:[R,O]})}),e[27]=T,e[28]=M,e[29]=I,e[30]=R,e[31]=O,e[32]=L):L=e[32],L}function k$e(t){return t+1}function E$e(t){return t+1}function T$e(){return gp()}const M$e=t=>{"use forget";const e=D.c(28),{onDismiss:n,onClicked:s,className:o}=t,r=Yo(),a=te(),l=X(R$e),c=Rb.atlasBannerTitleVariantOne,u=Rb.atlasBannerBodyVariantOne,d=Rb.atlasBannerCtaVariantOne;let f;e[0]!==o?(f=q("border-token-border-heavy grid grid-cols-1 grid-rows-[auto_1fr_24px]","bg-token-bg-primary/60","rounded-ss-xl rounded-se-xl border","[mask-image:linear-gradient(to_bottom,black_80%,transparent_100%)]","[mask-size:100%_100%] [mask-repeat:no-repeat]","pointer-events-auto relative z-10",o),e[0]=o,e[1]=f):f=e[1];const m=l?uC:cC;let p;e[2]!==m?(p={boxShadow:"0px 4.1px 24px rgba(0, 0, 0, 0.08)",width:m},e[2]=m,e[3]=p):p=e[3];const g=r?"white":"var(--border-heavy)",h=l?uC-2:cC-2;let _;e[4]!==g||e[5]!==h?(_=i.jsx(v$e,{"aria-hidden":"true",className:"pointer-events-none col-span-full col-start-1 row-span-1 row-start-1 w-full text-[var(--bg-primary)]",style:{"--tab-color":g,width:h}}),e[4]=g,e[5]=h,e[6]=_):_=e[6];let x;e[7]!==o?(x=q("text-token-text-tertiary hover:text-token-text-secondary flex h-9 w-9 cursor-pointer items-center justify-center bg-transparent",o),e[7]=o,e[8]=x):x=e[8];let b;e[9]!==a?(b=a.formatMessage(yn.close),e[9]=a,e[10]=b):b=e[10];let y;e[11]===Symbol.for("react.memo_cache_sentinel")?(y=i.jsx(ms,{className:"icon-sm"}),e[11]=y):y=e[11];let S;e[12]!==n||e[13]!==x||e[14]!==b?(S=i.jsx("div",{className:"absolute end-0 top-0",children:i.jsx("button",{"data-testid":"close-button",onClick:n,className:x,"aria-label":b,children:y})}),e[12]=n,e[13]=x,e[14]=b,e[15]=S):S=e[15];let C;e[16]===Symbol.for("react.memo_cache_sentinel")?(C=i.jsx("div",{className:"bg-token-bg-primary col-span-full col-start-1 row-span-2 row-start-2 -mt-1"}),e[16]=C):C=e[16];let w;e[17]===Symbol.for("react.memo_cache_sentinel")?(w=i.jsx(N$e,{}),e[17]=w):w=e[17];let k;e[18]===Symbol.for("react.memo_cache_sentinel")?(k=i.jsx("h2",{className:"text-token-text-primary text-sm font-medium",children:i.jsx(P,N({},c))}),e[18]=k):k=e[18];let E;e[19]===Symbol.for("react.memo_cache_sentinel")?(E=i.jsxs("div",{className:"flex max-w-[340px] flex-col gap-0.5",children:[k,i.jsx("p",{className:"text-token-text-secondary text-xs",children:i.jsx(P,N({},u))})]}),e[19]=E):E=e[19];let T;e[20]!==s?(T=i.jsxs("div",{className:"col-span-full col-start-1 row-start-2 -mt-2 flex min-h-[74px] flex-1 items-start gap-4 px-5",children:[w,E,i.jsx(I$e,{ctaLabel:d.defaultMessage,onClicked:s})]}),e[20]=s,e[21]=T):T=e[21];let M;return e[22]!==f||e[23]!==S||e[24]!==T||e[25]!==p||e[26]!==_?(M=i.jsxs("div",{className:f,style:p,children:[_,S,C,T]}),e[22]=f,e[23]=S,e[24]=T,e[25]=p,e[26]=_,e[27]=M):M=e[27],M};function A$e(t){"use forget";const e=D.c(4),{className:n}=t;let s;e[0]!==n?(s=q("pointer-events-none z-0 aspect-[752/244] h-[244px] opacity-50",n),e[0]=n,e[1]=s):s=e[1];let o;return e[2]!==s?(o=i.jsx("img",{alt:"","aria-hidden":"true",src:vW,className:s}),e[2]=s,e[3]=o):o=e[3],o}function N$e(){"use forget";const t=D.c(1);let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=i.jsx("img",{alt:"","aria-hidden":"true",src:bW,className:"pointer-events-none size-10"}),t[0]=e):e=t[0],e}function I$e(t){"use forget";const e=D.c(5),{ctaLabel:n,onClicked:s}=t,o=g$e()?"installer":"app",r=o==="installer"?C$e:S$e;let a;e[0]!==s?(a=()=>{s==null||s(),w$e(o)},e[0]=s,e[1]=a):a=e[1];const l=a;let c;return e[2]!==n||e[3]!==l?(c=i.jsx("a",{href:r,onClick:l,className:"btn btn-secondary mt-2 min-h-9 rounded-full px-3 text-sm",children:n}),e[2]=n,e[3]=l,e[4]=c):c=e[4],c}const Rb=we({atlasBannerTitleVariantOne:{id:"Zr7mYe",defaultMessage:"Try Atlas - ChatGPTs new browser"},atlasBannerBodyVariantOne:{id:"jYcAxk",defaultMessage:"Bring ChatGPT with you across the web for instant answers, smarter suggestions, and help with tasks."},atlasBannerCtaVariantOne:{id:"IupvSa",defaultMessage:"Download"}});function j$e(){return Iee().data}function P$e(){yW()}function R$e(){return gp()}function fht({clientThreadId:t}){const e=Nt(),n=Un(t),s=Ze(t,ve.getGizmoId),o=xe("4027353239"),r=async()=>{n&&(o?await ue.safePost("/conversation/{conversation_id}/archive",{parameters:{path:{conversation_id:n}},requestBody:{is_archived:!1}}):await ue.safePatch("/conversation/{conversation_id}",{parameters:{path:{conversation_id:n}},requestBody:{is_archived:!1}}),e.invalidateQueries(O_({clientThreadId:t})),pt(n,a=>{a.isArchived=!1}),Fo(e,s))};return i.jsxs("div",{className:"my-6 flex flex-col items-center justify-center gap-4",children:[i.jsx("div",{className:"text-token-text-secondary px-3 text-center text-sm",children:i.jsx(P,{id:"thread.archivedConversationDescription",defaultMessage:"This conversation is archived. To continue, please unarchive it first."})}),i.jsx("div",{children:i.jsx(Se,{disabled:!n,onClick:r,icon:Gwe,children:i.jsx(P,{id:"thread.unarchiveButton",defaultMessage:"Unarchive"})})})]})}const mht=vp(()=>({marginBottom$:st(null),height$:st(null)})),O$e=re(me,"d66a94",20,20),CW={spreadsheets:oEe,presentations:O$e,actions:V$,deep_research:vo,deep_research_app:vo,suggested:x_e};function pht({clientThreadId:t}){const{isOdysseyMode:e}=JE(t),n=F$e(e),{keywords:s}=TG({clientThreadId:t});return!e||!n?null:i.jsx(L$e,{groups:n,mentionKeywords:s})}function L$e({groups:t,mentionKeywords:e}){const[n,s]=v.useState(null),o=Ip(),[r,a]=v.useState(null),[l,c]=v.useState("suggested"),u=y=>{c(y),a(null)},d=v.useMemo(()=>{var S;const y=t.find(C=>C.category.name===l);return(S=y==null?void 0:y.prompts)!=null?S:[]},[t,l]);v.useEffect(()=>{d&&r!=null&&Bo(Vt(o),d[r].prompt_string)},[o,d,r]),v.useEffect(()=>{e&&e.length>0&&Y9(e,Vt(o))},[o,e]);const[f,m]=v.useState(()=>Kt(()=>Bm(o)));v.useEffect(()=>Hc(()=>{Bm(o)&&m(!0)}),[o]);const p=_s(()=>{const y=r==null?0:Math.min(r+1,d.length-1);return a(y),!0}),g=_s(()=>{const y=r===0||r==null?null:r-1;return a(y),!0}),h=d.length>0;v.useEffect(()=>{if(!(!f||!h))return Pee(Vt(o),{ArrowDown:p,ArrowUp:g})},[f,h,o,p,g]),v.useEffect(()=>{const y=()=>{m(!1),a(null)};return Kd(Vt(o).dom,{click:y,input:y})},[o]);const _=v.useRef(null),[x,b]=v.useState(void 0);return bs(()=>{_.current&&b(_.current.offsetWidth)},[l]),i.jsx(l0,{horizontalPadding:"standard",horizontalMargin:"none",verticalMargin:"none",verticalPadding:"none",overflowY:"auto",children:i.jsx(to,{className:"h-full overflow-y-hidden",children:i.jsx(wt.div,{className:"flex size-full flex-col",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:i.jsxs("div",{className:"mt-5 flex flex-col items-center overflow-y-auto",children:[i.jsx("div",{className:"py-2",ref:_,children:i.jsx("div",{className:"flex flex-row flex-nowrap gap-2 overflow-x-auto",children:t.map(y=>i.jsx(D$e,{category:y.category.name,displayName:y.category_display_name,selected:l===y.category.name,onSelect:()=>u(y.category.name)},y.category.name))})}),i.jsx("div",{className:"overflow-y-auto",children:i.jsx(wt.ul,{className:"mt-1 flex flex-col",style:x?{width:x}:{},children:d.map((y,S)=>i.jsx(B$e,{prompt:y,rowIdx:S,selected:r===S,onSelect:()=>{V.logEvent("Agent Suggested Prompt Selected",{prompt_title:y.title,prompt_category:y.categories[0].name}),a(S),So(Vt(o))},hoveredPromptIndex:n,setHoveredPromptIndex:s,totalRows:d.length},"".concat(l,"-").concat(S)))})})]})})})})}function D$e({category:t,displayName:e,selected:n,onSelect:s}){const o=CW[t],r=n?"text-token-text-primary":"text-token-text-secondary",a=n?"text-token-icon-primary":"text-token-icon-secondary";return i.jsx(Se,{color:"secondary",onClick:s,icon:()=>i.jsx(o,{className:a}),className:q("border-token-bg-tertiary",n&&"bg-token-bg-tertiary","font-normal",r),children:e})}function B$e({prompt:t,rowIdx:e,selected:n,onSelect:s,hoveredPromptIndex:o,setHoveredPromptIndex:r,totalRows:a}){const l=v.useRef(null);v.useEffect(()=>{var d;n&&((d=l.current)==null||d.scrollIntoView({behavior:"auto"}))},[n]);function c(){const d=U$e(t),f=d?CW[d]:xi;return i.jsx(f,{className:"text-token-icon-secondary size-5"})}const u=o===e||o===e+1;return i.jsxs(wt.li,{ref:l,initial:{opacity:0,translateY:4},animate:{opacity:1,translateY:0},transition:{delay:e*.03},exit:{opacity:0,translateY:4},onMouseEnter:()=>r(e),onMouseLeave:()=>r(null),children:[i.jsxs("button",{className:q("hover:bg-token-bg-tertiary flex w-full flex-row items-center rounded-xl px-2 py-4 text-start"),onClick:s,type:"button",children:[i.jsx("div",{className:"flex flex-col items-center justify-center p-1",children:c()}),i.jsx("div",{className:"text-token-text-secondary flex-1 overflow-hidden pe-2 text-sm text-ellipsis whitespace-nowrap",children:t.title}),t.example_url?i.jsx("div",{className:"flex flex-col items-center justify-center pe-1",onClick:d=>{d.stopPropagation(),V.logEvent("Agent Suggested Prompt Example Clicked",{prompt_title:t.title,prompt_category:t.categories[0].name}),t.example_url&&(window.location.href=t.example_url)},children:i.jsx(fk,{className:"text-token-icon-tertiary size-6.5 shrink-0"})}):null]}),e<a-1&&!u&&i.jsx("div",{className:"bg-token-bg-tertiary mx-4 mt-[-1px] h-[1px]"})]})}function F$e(t){var n;return(n=ut({queryKey:["odyssey_suggested_prompts_all"],queryFn:async()=>await ue.safeGet("/n7jupd_suggested_prompts_all"),enabled:t}).data)==null?void 0:n.prompt_groups}function U$e(t){const e=t.categories;if(e.length!==0)return e[0].name}const H$e=t=>{"use forget";var b;const e=D.c(23);let n,s,o,r,a;e[0]!==t?(b=t,{open:a,containerClassName:s,onDismiss:o,onShow:r}=b,n=De(b,["open","containerClassName","onDismiss","onShow"]),e[0]=t,e[1]=n,e[2]=s,e[3]=o,e[4]=r,e[5]=a):(n=e[1],s=e[2],o=e[3],r=e[4],a=e[5]);const l=a===void 0?!0:a,c=te(),[u,d]=v.useState(l);let f,m;if(e[6]!==u||e[7]!==r?(f=()=>{u&&(r==null||r())},m=[u,r],e[6]=u,e[7]=r,e[8]=f,e[9]=m):(f=e[8],m=e[9]),v.useEffect(f,m),!u)return null;let p;e[10]!==s?(p=q("pointer-events-none fixed start-1/2 bottom-8 z-50 w-full -translate-x-1/2 px-4",s),e[10]=s,e[11]=p):p=e[11];let g;e[12]!==c?(g=c.formatMessage({id:"b675aO",defaultMessage:"Banner"}),e[12]=c,e[13]=g):g=e[13];let h;e[14]!==o?(h=()=>{o==null||o(),d(!1)},e[14]=o,e[15]=h):h=e[15];let _;e[16]!==n||e[17]!==h?(_=i.jsx("div",{className:"pointer-events-auto mx-auto w-full max-w-[768px]",children:i.jsx(Ym,G(N({},n),{onDismiss:h}))}),e[16]=n,e[17]=h,e[18]=_):_=e[18];let x;return e[19]!==p||e[20]!==g||e[21]!==_?(x=i.jsx("div",{className:p,"aria-live":"polite",role:"region","aria-label":g,children:_}),e[19]=p,e[20]=g,e[21]=_,e[22]=x):x=e[22],x},$$e=je(()=>Me(()=>Promise.resolve().then(()=>$F),void 0).then(t=>t.AdminInviteModal)),Ob=we({title:{id:"4LuIsp",defaultMessage:"Invite your districts teachers for free"},description:{id:"KeZ0qh",defaultMessage:"ChatGPT for Teachers is free for verified educators and staff in your district. Send invites so fellow teachers can collaborateonly colleagues from your district can join."},cta:{id:"FBIXg9",defaultMessage:"Invite fellow teachers"}});function m6(t){t&&tt.setItem(Ie.K12InviteBannerDismissed,!0,{workspaceId:t})}function ght(){"use forget";const t=D.c(22),e=te(),n=Tn();let s;t[0]!==n?(s=n==null?void 0:n.getWorkspaceId(),t[0]=n,t[1]=s):s=t[1];const o=s;if(!n||!o)return null;let r;t[2]===Symbol.for("react.memo_cache_sentinel")?(r=i.jsx("div",{className:"bg-token-main-surface-secondary text-token-text-primary flex size-12 items-center justify-center rounded-full",children:i.jsx(Cg,{className:"icon-md text-[#5D5BD0]","aria-hidden":!0})}),t[2]=r):r=t[2];let a;t[3]!==e?(a=e.formatMessage(Ob.title),t[3]=e,t[4]=a):a=t[4];let l;t[5]!==e?(l=e.formatMessage(Ob.description),t[5]=e,t[6]=l):l=t[6];let c;t[7]!==e?(c=e.formatMessage(Ob.cta),t[7]=e,t[8]=c):c=t[8];let u;t[9]!==n||t[10]!==o?(u=()=>{V.logEventWithStatsig("K12 Invite Banner: CTA Clicked","chatgpt_k12_invite_banner_cta_clicked"),m6(o),rt($$e,{workspace:n})},t[9]=n,t[10]=o,t[11]=u):u=t[11];let d;t[12]!==c||t[13]!==u?(d={primaryAction:{text:c,onClick:u}},t[12]=c,t[13]=u,t[14]=d):d=t[14];let f;t[15]!==o?(f=()=>{V.logEventWithStatsig("K12 Invite Banner: Dismissed","chatgpt_k12_invite_banner_dismissed"),m6(o)},t[15]=o,t[16]=f):f=t[16];let m;return t[17]!==a||t[18]!==l||t[19]!==d||t[20]!==f?(m=i.jsx(H$e,{icon:r,title:a,description:l,actions:d,onShow:G$e,onDismiss:f}),t[17]=a,t[18]=l,t[19]=d,t[20]=f,t[21]=m):m=t[21],m}function G$e(){V.logEventWithStatsig("K12 Invite Banner: Shown","chatgpt_k12_invite_banner_shown")}function hht(t){"use forget";var p,g,h,_;const e=D.c(9),{skip:n}=t,s=n===void 0?!1:n,o=Tn();let r,a,l,c,u;e[0]!==o?(u=o==null?void 0:o.getWorkspaceId(),a=o===void 0,r=(g=(p=o==null?void 0:o.canInviteMembers)==null?void 0:p.call(o))!=null?g:!1,l=(_=(h=o==null?void 0:o.isK12)==null?void 0:h.call(o))!=null?_:!1,c=u!=null&&tt.getItem(Ie.K12InviteBannerDismissed,{workspaceId:u})===!0,e[0]=o,e[1]=r,e[2]=a,e[3]=l,e[4]=c,e[5]=u):(r=e[1],a=e[2],l=e[3],c=e[4],u=e[5]);const f=!s&&!a&&!!u&&l&&r&&!c;let m;return e[6]!==a||e[7]!==f?(m={shouldShow:f,isLoading:a},e[6]=a,e[7]=f,e[8]=m):m=e[8],m}class _ht{constructor(e){ye(this,"config");ye(this,"localStorageKey");this.config=e,this.localStorageKey=e.localStorageKey}getState(){const e=tt.getItem(this.localStorageKey)||{lastShown:null,showCount:0,shownTimestamps:[]};return Array.isArray(e.shownTimestamps)||(e.shownTimestamps=[]),e}setState(e){tt.setItem(this.localStorageKey,e)}getShownTimes(){return this.getState().showCount}shouldShow(){const e=this.getState(),n=Date.now();if(this.config.termination.maxShows!==void 0&&e.showCount>=this.config.termination.maxShows||this.config.termination.customCondition&&this.config.termination.customCondition())return!1;const s=this.config.schedule.maxShowsPerInterval;if(s!==void 0){const o=n-this.config.schedule.intervalMs;if((e.shownTimestamps||[]).filter(a=>a>=o).length>=s)return!1}else if(e.lastShown!=null&&n-e.lastShown<this.config.schedule.intervalMs)return!1;return!0}recordShown(){const e=this.getState(),n=Date.now();let s=Array.isArray(e.shownTimestamps)?e.shownTimestamps:[];const o=n-this.config.schedule.intervalMs;s=s.filter(r=>r>=o),s.push(n),this.setState({lastShown:n,showCount:e.showCount+1,shownTimestamps:s})}reset(){tt.setItem(this.localStorageKey,{lastShown:null,showCount:0,shownTimestamps:[]})}}const xht=re(me,"8f3ef6",20,20),wW="tatertot_create_flashcards_or_quiz",V$e="https://persistent.oaistatic.com/chatgpt/NUX_StudyMode_16x9.png";function z$e({onClose:t}){const e=V$e,[n,s]=v.useState(!1);v.useEffect(()=>{n||(kt(We.hasSeenTatertotNux),s(!0),Fe.count(Ue.TATERTOT,"tatertot_nux_modal_shown"),V.logEventWithStatsig("Tatertot Nux Modal Shown","chatgpt_tatertot_nux_modal_shown"))},[n]);const[o,r]=v.useState(!1);v.useEffect(()=>{const h=new Image;h.src=e,h.onload=()=>r(!0)},[e]);const[a,l]=v.useState(!1),[c,u]=v.useState(!1);v.useEffect(()=>{if(!o)return;const h=setTimeout(()=>{l(!0)},200),_=setTimeout(()=>{u(!0)},300);return()=>{clearTimeout(h),clearTimeout(_)}},[o]);const d=bt(),[f,m]=v.useState(!1),p=te(),g=()=>{f||(m(!0),t(),d({pathname:"/",search:"?hints=".concat(Oee)}),Fe.count(Ue.TATERTOT,"tatertot_nux_modal_show_me_clicked"),V.logEventWithStatsig("Tatertot Nux Modal Show Me Clicked","chatgpt_tatertot_nux_modal_show_me_clicked"))};return o?i.jsxs(en,{testId:"modal-tatertot-nux",isOpen:!0,noPadding:!0,onClose:()=>{t(),Fe.count(Ue.TATERTOT,"tatertot_nux_modal_closed"),V.logEventWithStatsig("Tatertot Nux Modal Closed","chatgpt_tatertot_nux_modal_closed")},showCloseButton:!1,size:"custom",type:"success",className:"relative flex max-w-[480px] flex-col",children:[i.jsx("div",{className:"absolute end-4 top-4 z-50",children:i.jsx(Wn,{className:"text-token-text-secondary ring-0! outline-0! hover:bg-transparent focus:ring-0! focus:ring-offset-0! focus:outline-0! dark:hover:bg-transparent",onClick:t})}),i.jsxs("div",{className:"relative w-full flex-1",children:[i.jsx("img",{src:e,className:"h-[213px] w-full object-cover object-bottom",alt:""}),i.jsx("div",{className:"pointer-events-none absolute inset-0 flex items-center justify-center",children:i.jsxs("div",{className:"mx-auto flex max-w-full flex-col items-end gap-2 px-8",children:[i.jsx("div",{className:"relative flex w-auto rounded-3xl bg-white/80 px-5 py-2.5 text-lg backdrop-blur-[24px] transition-all duration-300 ease-in-out dark:bg-[rgba(48,48,48,0.8)] ".concat(a?"translate-y-0 opacity-100":"translate-y-2 opacity-0"),children:i.jsx(P,{id:"StudyandLearnNux.firstBubble",defaultMessage:"Hey Chat!"})}),i.jsx("div",{className:"relative flex w-auto rounded-3xl bg-white/80 px-5 py-2.5 text-lg backdrop-blur-[24px] transition-all duration-300 ease-in-out dark:bg-[rgba(48,48,48,0.8)] ".concat(c?"translate-y-0 opacity-100":"translate-y-2 opacity-0"),children:i.jsx(P,{id:"StudyandLearnNux.secondBubble",defaultMessage:"Help me with my homework"})})]})})]}),i.jsxs("div",{className:"flex flex-1 flex-col gap-6 px-8 pt-8 pb-8",children:[i.jsx("div",{className:"text-center text-[20px] leading-7 font-medium",children:p.formatMessage({id:"StudyandLearnNux.studyAndLearnBubble",defaultMessage:"Study and learn"})}),i.jsx("div",{className:"text-token-text-secondary -mt-4 w-full text-center text-[17px]",children:i.jsx(P,{id:"StudyandLearnNux.subtitle",defaultMessage:"Your step-by-step guide to learning anything"})}),i.jsxs("div",{className:"flex w-full items-start gap-4 text-[17px]",children:[i.jsx(tr,{className:"h-6 w-6 shrink-0"}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx("div",{className:"font-medium",children:i.jsx(P,{id:"StudyandLearnNux.featureTitle1",defaultMessage:"Get homework help"})}),i.jsx("div",{className:"text-token-text-secondary",children:i.jsx(P,{id:"StudyandLearnNux.featureDescription1",defaultMessage:"Break down complex problems with approachable, guided explanations."})})]})]}),i.jsxs("div",{className:"flex w-full items-start gap-4 text-[17px]",children:[i.jsx(hS,{className:"h-6 w-6 shrink-0"}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx("div",{className:"font-medium",children:i.jsx(P,{id:"StudyandLearnNux.featureTitle2",defaultMessage:"Prep for tests"})}),i.jsx("div",{className:"text-token-text-secondary",children:i.jsx(P,{id:"StudyandLearnNux.featureDescription2",defaultMessage:"Test your knowledge with quizzes on any topic."})})]})]}),i.jsxs("div",{className:"flex w-full items-start gap-4 text-[17px]",children:[i.jsx(Ree,{className:"h-6 w-6 shrink-0"}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx("div",{className:"font-medium",children:i.jsx(P,{id:"StudyandLearnNux.featureTitle3",defaultMessage:"Explore new subjects"})}),i.jsx("div",{className:"text-token-text-secondary",children:i.jsx(P,{id:"StudyandLearnNux.featureDescription3",defaultMessage:"Go deep on any topic and ask any question."})})]})]}),i.jsx("div",{className:"flex w-full items-center justify-center",children:i.jsx("div",{className:"flex gap-4",children:i.jsx(Se,{color:"primary",onClick:g,size:"large",fullWidth:!0,className:"px-6",children:p.formatMessage({id:"StudyandLearnNux.tryItNowButton",defaultMessage:"Try it now"})})})})]})]}):null}function W$e(t,e){const n=[{type:xt.Autocomplete,id:"tatertot_homework_autocomplete",title:t.formatMessage({id:"8ZR8F6",defaultMessage:"Help me with my homework"}),prompt:t.formatMessage({id:"3Cdh/P",defaultMessage:"Help me with my homework"}),icon:i.jsx(tr,{className:"h-full w-full"}),body:"",theme:Cn.Tatertot},{type:xt.Autocomplete,id:"tatertot_explain_topic",title:t.formatMessage({id:"eOU1s2",defaultMessage:"Explain a topic to me"}),prompt:t.formatMessage({id:"/SVEgw",defaultMessage:"Explain a topic to me"}),icon:i.jsx(bl,{className:"h-full w-full"}),body:"",theme:Cn.Tatertot}];return e?n.push({type:xt.Autocomplete,id:wW,title:t.formatMessage({id:"reHqfm",defaultMessage:"Create a practice quiz"}),prompt:t.formatMessage({id:"bNSdL3",defaultMessage:"Create a practice quiz with quizgpt"}),icon:i.jsx(hS,{className:"h-full w-full"}),body:"",theme:Cn.Tatertot}):n.push({type:xt.Autocomplete,id:"tatertot_create_quiz",title:t.formatMessage({id:"reHqfm",defaultMessage:"Create a practice quiz"}),prompt:t.formatMessage({id:"MSsW2T",defaultMessage:"Create a practice quiz"}),icon:i.jsx(hS,{className:"h-full w-full"}),body:"",theme:Cn.Tatertot}),n}const q$e=Object.freeze(Object.defineProperty({__proto__:null,TATERTOT_CREATE_QUIZ_PROMPT_STARTER_ID:wW,TatertotNuxModal:z$e,getTatertotStaticPromptStarters:W$e},Symbol.toStringTag,{value:"Module"}));function yht(){"use forget";const t=D.c(111),e=vn(),n=te(),s=RC();let o;t[0]!==e?(o=()=>QP(e,{includeAutoConnectors:!0}),t[0]=e,t[1]=o):o=t[1];const r=X(o),a=!r;let l;t[2]===Symbol.for("react.memo_cache_sentinel")?(l={includeAutoConnectors:!0},t[2]=l):l=t[2];const{connectedTypes:c,isLoading:u}=qC(l),{isLoading:d,internalKnowledgeConfigs:f}=eR();let m;t[3]!==f||t[4]!==s?(m=s&&(f==null?void 0:f.some(rGe)),t[3]=f,t[4]=s,t[5]=m):m=t[5];const p=!!m;let g;t[6]!==f||t[7]!==s?(g=s&&(f==null?void 0:f.some(oGe)),t[6]=f,t[7]=s,t[8]=g):g=t[8];const h=!!g,_=Is(),x=sGe,b=tGe,y=X$e,S=J$e;let C;t[9]!==n?(C=n.formatMessage({id:"9jtvbx",defaultMessage:"Describe and suggest improvements to my email style"}),t[9]=n,t[10]=C):C=t[10];let w;t[11]!==n?(w=n.formatMessage({id:"PjZmLV",defaultMessage:"Describe and suggest improvements to my email style"}),t[11]=n,t[12]=w):w=t[12];let k;t[13]===Symbol.for("react.memo_cache_sentinel")?(k={connectors:{[Te.GMAIL_CONNECTOR]:$a,[Te.OUTLOOK_EMAIL_CONNECTOR]:Rl}},t[13]=k):k=t[13];let E;t[14]!==C||t[15]!==w?(E={type:xt.Starter,title:C,prompt:w,theme:Cn.Slurm,data:k,body:""},t[14]=C,t[15]=w,t[16]=E):E=t[16];let T;t[17]!==n?(T=n.formatMessage({id:"gmFv/2",defaultMessage:"Summarize my unread emails"}),t[17]=n,t[18]=T):T=t[18];let M;t[19]!==n?(M=n.formatMessage({id:"/lt8RC",defaultMessage:"Summarize my unread emails"}),t[19]=n,t[20]=M):M=t[20];let A;t[21]===Symbol.for("react.memo_cache_sentinel")?(A={connectors:{[Te.GMAIL_CONNECTOR]:$a,[Te.OUTLOOK_EMAIL_CONNECTOR]:Rl}},t[21]=A):A=t[21];let I;t[22]!==T||t[23]!==M?(I={type:xt.Starter,title:T,prompt:M,theme:Cn.Slurm,data:A,body:""},t[22]=T,t[23]=M,t[24]=I):I=t[24];let j;t[25]!==n?(j=n.formatMessage({id:"rMKyX2",defaultMessage:"Give me an overview of a project or customer"}),t[25]=n,t[26]=j):j=t[26];let R;t[27]!==n?(R=n.formatMessage({id:"5hS/7U",defaultMessage:"Give me an overview of a project or customer"}),t[27]=n,t[28]=R):R=t[28];let O;t[29]===Symbol.for("react.memo_cache_sentinel")?(O={connectors:{[Te.GDRIVE_ACTION_CONNECTOR]:Ys,[Te.GMAIL_CONNECTOR]:$a,[Te.OUTLOOK_EMAIL_CONNECTOR]:Rl,[Te.HUBSPOT_CONNECTOR]:tc,[Te.DROPBOX_CONNECTOR]:oc,[Te.NOTION_CONNECTOR]:sc,[Te.SHAREPOINT_CONNECTOR]:iy,[Te.TEAMS_CONNECTOR]:Wh},syncConnectors:{[za.gdrive_sync_connector]:Ys}},t[29]=O):O=t[29];let L;t[30]!==j||t[31]!==R?(L={type:xt.Starter,title:j,prompt:R,theme:Cn.Slurm,data:O,body:""},t[30]=j,t[31]=R,t[32]=L):L=t[32];let B;t[33]!==n?(B=n.formatMessage({id:"c9CBw8",defaultMessage:"Find me the top three most relevant documents on a project"}),t[33]=n,t[34]=B):B=t[34];let U;t[35]!==n?(U=n.formatMessage({id:"NYPKci",defaultMessage:"Find me the top three most relevant documents on a project"}),t[35]=n,t[36]=U):U=t[36];let H;t[37]===Symbol.for("react.memo_cache_sentinel")?(H={connectors:{[Te.GDRIVE_ACTION_CONNECTOR]:Ys,[Te.GMAIL_CONNECTOR]:$a,[Te.OUTLOOK_EMAIL_CONNECTOR]:Rl,[Te.HUBSPOT_CONNECTOR]:tc,[Te.DROPBOX_CONNECTOR]:oc,[Te.NOTION_CONNECTOR]:sc,[Te.SHAREPOINT_CONNECTOR]:iy,[Te.TEAMS_CONNECTOR]:Wh},syncConnectors:{[za.gdrive_sync_connector]:Ys}},t[37]=H):H=t[37];let $;t[38]!==B||t[39]!==U?($={type:xt.Starter,title:B,prompt:U,theme:Cn.Slurm,data:H,body:""},t[38]=B,t[39]=U,t[40]=$):$=t[40];let F;t[41]!==n?(F=n.formatMessage({id:"bh3D+B",defaultMessage:"Review my most recent PR"}),t[41]=n,t[42]=F):F=t[42];let z;t[43]!==n?(z=n.formatMessage({id:"MQvW9m",defaultMessage:"Review my most recent PR"}),t[43]=n,t[44]=z):z=t[44];let W;t[45]===Symbol.for("react.memo_cache_sentinel")?(W={connectors:{[Te.GITHUB_CONNECTOR]:wp}},t[45]=W):W=t[45];let Y;t[46]!==F||t[47]!==z?(Y={type:xt.Starter,title:F,prompt:z,theme:Cn.Slurm,data:W,body:""},t[46]=F,t[47]=z,t[48]=Y):Y=t[48];let K;t[49]!==n?(K=n.formatMessage({id:"eb79eJ",defaultMessage:"What changed in the projects that Im working on"}),t[49]=n,t[50]=K):K=t[50];let Z;t[51]!==n?(Z=n.formatMessage({id:"Q+eKmx",defaultMessage:"What changed in the projects that Im working on"}),t[51]=n,t[52]=Z):Z=t[52];let J;t[53]===Symbol.for("react.memo_cache_sentinel")?(J={connectors:{[Te.GDRIVE_ACTION_CONNECTOR]:Ys,[Te.GMAIL_CONNECTOR]:$a,[Te.OUTLOOK_EMAIL_CONNECTOR]:Rl,[Te.HUBSPOT_CONNECTOR]:tc,[Te.DROPBOX_CONNECTOR]:oc,[Te.NOTION_CONNECTOR]:sc,[Te.SHAREPOINT_CONNECTOR]:iy,[Te.TEAMS_CONNECTOR]:Wh},syncConnectors:{[za.gdrive_sync_connector]:Ys}},t[53]=J):J=t[53];let Q;t[54]!==K||t[55]!==Z?(Q={type:xt.Starter,title:K,prompt:Z,theme:Cn.Slurm,data:J,body:""},t[54]=K,t[55]=Z,t[56]=Q):Q=t[56];let ne;t[57]!==n?(ne=n.formatMessage({id:"BZuK5N",defaultMessage:"Find all emails about a project or customer"}),t[57]=n,t[58]=ne):ne=t[58];let ie;t[59]!==n?(ie=n.formatMessage({id:"S/AOrO",defaultMessage:"Find all emails about a project or customer"}),t[59]=n,t[60]=ie):ie=t[60];let fe;t[61]===Symbol.for("react.memo_cache_sentinel")?(fe={connectors:{[Te.GMAIL_CONNECTOR]:$a,[Te.OUTLOOK_EMAIL_CONNECTOR]:Rl}},t[61]=fe):fe=t[61];let ae;t[62]!==ne||t[63]!==ie?(ae={type:xt.Starter,title:ne,prompt:ie,theme:Cn.Slurm,data:fe,body:""},t[62]=ne,t[63]=ie,t[64]=ae):ae=t[64];let le;t[65]!==n?(le=n.formatMessage({id:"DtUTpV",defaultMessage:"Brief me on this weeks meetings"}),t[65]=n,t[66]=le):le=t[66];let pe;t[67]!==n?(pe=n.formatMessage({id:"NoHU2S",defaultMessage:"Brief me on this weeks meetings"}),t[67]=n,t[68]=pe):pe=t[68];let _e;t[69]===Symbol.for("react.memo_cache_sentinel")?(_e={connectors:{[Te.GOOGLE_CONTACTS_CONNECTOR]:k9,[Te.OUTLOOK_CALENDAR_CONNECTOR]:Rl}},t[69]=_e):_e=t[69];let Ce;t[70]!==le||t[71]!==pe?(Ce={type:xt.Starter,title:le,prompt:pe,theme:Cn.Slurm,data:_e,body:""},t[70]=le,t[71]=pe,t[72]=Ce):Ce=t[72];let ge;t[73]!==I||t[74]!==L||t[75]!==$||t[76]!==Y||t[77]!==Q||t[78]!==ae||t[79]!==Ce||t[80]!==E?(ge=[E,I,L,$,Y,Q,ae,Ce],t[73]=I,t[74]=L,t[75]=$,t[76]=Y,t[77]=Q,t[78]=ae,t[79]=Ce,t[80]=E,t[81]=ge):ge=t[81];const Re=ge,ke=a||u||d;if(ke){let de;t[82]===Symbol.for("react.memo_cache_sentinel")?(de=[],t[82]=de):de=t[82];let oe;return t[83]!==ke?(oe={prompts:de,isLoading:ke},t[83]=ke,t[84]=oe):oe=t[84],oe}if(_===Ke.Slurm){let de,oe,se;if(t[85]!==Re||t[86]!==c||t[87]!==h||t[88]!==ke){se=Symbol.for("react.early_return_sentinel");e:{if(de=Re.filter(Ne=>{const{connectors:ze,syncConnectors:Qe}=x(Ne),Le=Object.keys(ze).some(be=>[...c].some(He=>He===be)),ce=!!Qe[za.gdrive_sync_connector];return Le||ce&&h}),de.length<3){let Ne;t[92]===Symbol.for("react.memo_cache_sentinel")?(Ne=[],t[92]=Ne):Ne=t[92];let ze;t[93]!==ke?(ze={prompts:Ne,isLoading:ke},t[93]=ke,t[94]=ze):ze=t[94],se=ze;break e}de.sort(Q$e),oe=de.slice(0,4).map(Ne=>{const{connectors:ze,syncConnectors:Qe}=x(Ne),Le=y(ze,Qe,{mode:"connected",connectedTypes:new Set([...c]),hasGdriveSync:h});return G(N({},Ne),{trailing:b(Le)})})}t[85]=Re,t[86]=c,t[87]=h,t[88]=ke,t[89]=de,t[90]=oe,t[91]=se}else de=t[89],oe=t[90],se=t[91];if(se!==Symbol.for("react.early_return_sentinel"))return se;de=oe;let Oe;return t[95]!==ke||t[96]!==de?(Oe={prompts:de,isLoading:ke},t[95]=ke,t[96]=de,t[97]=Oe):Oe=t[97],Oe}let he,Ee,Pe;if(t[98]!==Re||t[99]!==r||t[100]!==p||t[101]!==ke){Pe=Symbol.for("react.early_return_sentinel");e:{if(he=Re.filter(de=>{const{connectors:oe,syncConnectors:se}=x(de),Oe=new Set(r.map(Z$e)),Ne=Object.keys(oe).some(Qe=>Oe.has(Qe)),ze=!!se[za.gdrive_sync_connector];return Ne||ze&&p}),he.length<3){let de;t[105]===Symbol.for("react.memo_cache_sentinel")?(de=[],t[105]=de):de=t[105];let oe;t[106]!==ke?(oe={prompts:de,isLoading:ke},t[106]=ke,t[107]=oe):oe=t[107],Pe=oe;break e}he.sort(Y$e),Ee=he.slice(0,4).map((de,oe)=>{var Qe;const se="#settings/".concat(Ts.Connectors,"?referrer=").concat(ec.SuggestedPrompts),{connectors:Oe,syncConnectors:Ne}=x(de),ze=y(Oe,Ne,{mode:"available",availableTypes:new Set(r.map(K$e)),hasGdriveSync:p});return G(N({},de),{theme:Cn.ContextualAnswersNUX,trailing:b(ze),data:{link:se,id:(Qe=de.data)==null?void 0:Qe.id,position:oe.toString()},onSelectOverride:S})})}t[98]=Re,t[99]=r,t[100]=p,t[101]=ke,t[102]=he,t[103]=Ee,t[104]=Pe}else he=t[102],Ee=t[103],Pe=t[104];if(Pe!==Symbol.for("react.early_return_sentinel"))return Pe;he=Ee;let Ae;return t[108]!==ke||t[109]!==he?(Ae={prompts:he,isLoading:ke},t[108]=ke,t[109]=he,t[110]=Ae):Ae=t[110],Ae}function K$e(t){return t.type}function Y$e(){return Math.random()-.5}function Z$e(t){return t.type}function Q$e(){return Math.random()-.5}function J$e(t,e){var n,s;if(e.type===xt.Starter&&(e.theme===Cn.ContextualAnswersNUX||e.theme===Cn.Slurm)){const{data:o}=e,{link:r}=o;window.location.hash=r+"&suggestedPromptsText=".concat(encodeURIComponent(e.prompt)),V.logEventWithStatsig("chatgpt_contextual_answers_recommended_prompt_selected","chatgpt_contextual_answers_recommended_prompt_selected",{prompt_id:(n=e.data)==null?void 0:n.id,prompt_position:(s=e.data)==null?void 0:s.position}),t.preventDefault();return}}function X$e(t,e,n){const s=[],o=!!(e!=null&&e[za.gdrive_sync_connector]);o&&n.hasGdriveSync&&s.push(e[za.gdrive_sync_connector]);const r=a=>n.mode==="connected"?n.connectedTypes.has(a):n.availableTypes.has(a);for(const a of Object.keys(t))o&&n.hasGdriveSync&&a===Te.GDRIVE_ACTION_CONNECTOR||r(a)&&s.push(t[a]);return s.sort(eGe),s}function eGe(){return Math.random()-.5}function tGe(t){return i.jsx("div",{className:"flex flex-1 items-center justify-end gap-1",children:t.filter(Boolean).slice(0,3).map(nGe)})}function nGe(t,e){return i.jsx("div",{className:"flex h-4 w-4 shrink-0 items-center justify-center rounded-full",children:i.jsx(t,{className:"h-full w-full"})},e)}function sGe(t){var n,s,o;const e=(n=t.data)!=null?n:{};return{connectors:(s=e.connectors)!=null?s:{},syncConnectors:(o=e.syncConnectors)!=null?o:{}}}function oGe(t){return["partially_activated","activated"].includes(t.user_connection_details.activation_status)}function rGe(t){return t.user_connection_details.auth_status==="not_connected"}const kW=()=>{"use forget";const t=D.c(8),e=vn();let n;t[0]===Symbol.for("react.memo_cache_sentinel")?(n=Lee(),t[0]=n):n=t[0];const s=n,o=X(aGe);let r;t[1]!==e?(r=()=>ZC(e),t[1]=e,t[2]=r):r=t[2];const a=X(r),l=!a,c=X(iGe);let u;t[3]!==c?(u=c==null?void 0:c.some(lGe),t[3]=c,t[4]=u):u=t[4];const d=u;let f;e:{if(o!=null&&o.some(cGe)){f=!0;break e}if(a&&a.length>0){f=!0;break e}f=!1}const p=s&&d&&f,g=l||!c;let h;return t[5]!==p||t[6]!==g?(h={available:p,isLoading:g},t[5]=p,t[6]=g,t[7]=h):h=t[7],h};function aGe(){return KR()}function iGe(){return Ca()}function lGe(t){return t.systemHint==="glaux"}function cGe(t){return t.status&&t.status!=="DISABLED_BY_ADMIN"}async function uGe(t=4){if(t<1)return[];try{const e=FT(),n=fGe();return(await ue.safeGet("/templated_prompts/suggestions",{parameters:{query:{limit:t,mode:n,bypass_cache:e.get("bypass_cache",!1)}}})).suggestions.filter(o=>typeof o.prompt=="string"&&o.prompt.length>0).slice(0,t).map(o=>{var r;return{type:xt.Templated,title:(r=o.description)!=null?r:"Dynamic Prompt",body:o.prompt,prompt:o.prompt,id:o.id,oneliner:o.name,theme:Cn.TemplatedPrompts,source:"CURATED"}})}catch(e){return[]}}function bht(t,e){"use forget";const n=D.c(8);let s;n[0]!==t?(s=["dynamic-prompt-suggestions",t],n[0]=t,n[1]=s):s=n[1];let o;n[2]!==t?(o=()=>uGe(t),n[2]=t,n[3]=o):o=n[3];let r;return n[4]!==e||n[5]!==s||n[6]!==o?(r={queryKey:s,enabled:e,staleTime:3e5,queryFn:o},n[4]=e,n[5]=s,n[6]=o,n[7]=r):r=n[7],ut(r)}const vht=()=>{const t=Tn(),{available:e,isLoading:n}=kW();return!!(t!=null&&t.isWorkspacePlan())&&!e&&!n&&dGe()},FT=()=>Eo("2538364663");function dGe(){return FT().get("enabled",!1)}function fGe(){const e=FT().get("mode","static");return e==="dynamic"||e==="static"?e:"static"}var CP;const mGe=Tt.button(CP||(CP=_t(["cursor-pointer absolute z-30 rounded-full bg-clip-padding border text-token-text-secondary border-token-border-default end-1/2 translate-x-1/2 bg-token-main-surface-primary w-8 h-8 flex items-center justify-center print:hidden"])));function pGe({show:t,onClick:e,className:n}){return i.jsx(In,{children:t&&i.jsx(wt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.15,ease:"easeInOut"},children:i.jsx(mGe,{className:n,onClick:e,children:i.jsx(MH,{className:"icon text-token-text-primary"})})})})}const Sht=Bn(t=>yt(()=>OS(t).hasFullscreenWidget$()||OS(t).isDedicatedAppRoute$()||Zk(t).isOpen$())),gGe=2e3,hGe=En({queryKey:["user_segments"],queryFn:async()=>{const t=new Promise(e=>{setTimeout(()=>e({segments:{}}),gGe)});try{return await Promise.race([ue.safeGet("/user_segments"),t])}catch(e){return{segments:{}}}},staleTime:0,gcTime:0,refetchOnMount:"always"}),Lb=we({bannerTitle:{id:"threadClaimBusinessBanner.bannerTitle",defaultMessage:"Using ChatGPT for work? Claim your free Business trial"},bannerBody:{id:"threadClaimBusinessBanner.bannerBody",defaultMessage:"Keep work organized and protected in ChatGPTbuilt for teams and trusted by companies."},cta:{id:"threadClaimBusinessBanner.cta",defaultMessage:"Claim for free"}});function Cht(t){"use forget";var x;const e=D.c(8),{canShowBanner:n}=t,s=n===void 0?!1:n;let o;e[0]===Symbol.for("react.memo_cache_sentinel")?(o=mt(),e[0]=o):o=e[0];const r=o,a=pxe();let l;e[1]===Symbol.for("react.memo_cache_sentinel")?(l=xe("624542021"),e[1]=l):l=e[1];const c=l,u=r&&s&&a&&!c;let d;e[2]!==u?(d=G(N({},hGe),{enabled:u}),e[2]=u,e[3]=d):d=e[3];const{data:f}=ut(d),m=((x=f==null?void 0:f.segments)==null?void 0:x.professional_user)===!0;if(!!!(s&&r&&a&&!c&&m)){let b;return e[4]===Symbol.for("react.memo_cache_sentinel")?(b={shouldShow:!1},e[4]=b):b=e[4],b}let g;e[5]===Symbol.for("react.memo_cache_sentinel")?(g=Eo("320080795").get("enabled",!1),e[5]=g):g=e[5];const h=g;let _;return e[6]!==h?(_={shouldShow:h},e[6]=h,e[7]=_):_=e[7],_}function wht(){"use forget";const t=D.c(2);let e;t[0]===Symbol.for("react.memo_cache_sentinel")?(e=[],t[0]=e):e=t[0],v.useEffect(xGe,e);const n=_Ge;let s;return t[1]===Symbol.for("react.memo_cache_sentinel")?(s=i.jsx(hn,{icon:i.jsx(hF,{}),title:i.jsx(P,N({},Lb.bannerTitle)),content:i.jsx(P,N({},Lb.bannerBody)),primaryCtaText:i.jsx(P,N({},Lb.cta)),onPrimaryCtaClick:n}),t[1]=s):s=t[1],s}function _Ge(){V.logEventWithStatsig("Thread Claim Business Banner Clicked","chatgpt_thread_claim_business_banner_clicked"),rt(cV)}function xGe(){V.logEventWithStatsig("Thread Claim Business Banner Shown","chatgpt_thread_claim_business_banner_shown")}function yGe(t){"use forget";const e=D.c(4),{safetyLimited:n}=t,s=ek(),o=bt();if(n){let a;return e[0]===Symbol.for("react.memo_cache_sentinel")?(a=i.jsx(P,{id:"5QWLgm",defaultMessage:"<heading>We've limited access to this content for safety reasons.</heading>This type of information may be used to benefit or to harm people. We are continuously refining our work in this area, and you can read more about our approach in our <blogLink>blog post</blogLink> and <modelSpecLink>Model Spec</modelSpecLink>.",values:{heading:wGe,blogLink:CGe,modelSpecLink:SGe}}),e[0]=a):a=e[0],a}let r;return e[1]!==o||e[2]!==s?(r=i.jsx(P,{id:"4vDLZ8",defaultMessage:"This chat may violate our <contentPolicyLink>usage policies</contentPolicyLink> and has been closed. <startNewChatLink>Start a new chat</startNewChatLink>.",values:{contentPolicyLink:vGe,startNewChatLink:a=>hs()?i.jsx("button",{type:"button",onClick:()=>{Ea(o,{replace:location.pathname==="/"})},className:"underline hover:no-underline",children:a}):i.jsx(ko,{to:"/",state:s,onClick:bGe,className:"underline hover:no-underline",children:a})}}),e[1]=o,e[2]=s,e[3]=r):r=e[3],r}function bGe(t){Sk(t,{location:"Content violation"})}function vGe(t){return i.jsx("a",{href:"https://openai.com/policies/usage-policies",target:"_blank",rel:"noreferrer",className:"underline hover:no-underline",children:t})}function SGe(t){return i.jsx("a",{href:"https://openai.com/index/introducing-the-model-spec/",target:"_blank",rel:"noreferrer",className:"underline hover:no-underline",children:t})}function CGe(t){return i.jsx("a",{href:"https://openai.com/index/preparing-for-future-ai-capabilities-in-biology/",target:"_blank",rel:"noreferrer",className:"underline hover:no-underline",children:t})}function wGe(t){return i.jsx("h4",{className:"text-base font-bold",children:t})}function kht({safetyLimited:t}){return i.jsx("div",{className:"flex flex-col items-center justify-center gap-4 pt-8",children:i.jsx(to,{children:i.jsx(ix,{type:"danger",className:"mb-2 w-fit self-start",children:i.jsx(yGe,{safetyLimited:t})})})})}const kGe=re(me,"5979fc",20,20);function EGe(t,e){var s;const n=(s=t!=null?t:e)!=null?s:0;return q(t!=null&&t!=e&&"opacity-50 dark:opacity-60",n>4?"text-brand-purple":n>3?"text-green-500":n>2?"text-yellow-500":n>1?"text-orange-500":"text-red-500")}function TGe(t){switch(t){case 1:return so.hoverRating1;case 2:return so.hoverRating2;case 3:return so.hoverRating3;case 4:return so.hoverRating4;case 5:return so.hoverRating5}}function MGe(t){return ut({queryFn:async()=>D3.getUserReview(t),queryKey:["gizmo","review",{gizmoId:t}],enabled:t!=null})}const UT=({rating:t,onRating:e,className:n})=>{const[s,o]=v.useState(),r=te();return i.jsx("div",{className:q("flex flex-row",n),children:[1,2,3,4,5].map(a=>{var d;const l=i.jsx(kGe,{className:q("icon-2xl cursor-pointer",((d=s!=null?s:t)!=null?d:0)>=a?EGe(s,t):"text-token-main-surface-tertiary")}),c=TGe(s!=null?s:0),u=c&&r.formatMessage(c);return i.jsx("div",{onClick:()=>{e(a)},onMouseEnter:()=>{o(a)},onMouseLeave:()=>{o(void 0)},className:"p-1",children:c?i.jsx(St,{label:u,side:"top",children:l}):l},a)})})},AGe=({gizmo:t,onClose:e})=>{var x,b,y;const n=_n(),s=te(),o=Dt(),[r,a]=v.useState(""),[l,c]=v.useState(!1),[u,d]=v.useState(),f=MGe(t.gizmo.id),m=P7(t.gizmo.id),p=u===((x=f.data)==null?void 0:x.rating);v.useEffect(()=>{f.data!=null&&u==null&&d(f.data.rating)},[f.data,u]),v.useEffect(()=>{V.logEvent("Show Rating Modal",{gizmo_id:t.gizmo.id})},[t.gizmo.id]);const g=f.data!=null,h=!((b=t.gizmo.tags)!=null&&b.includes(A1.FirstParty))&&t.gizmo.author.will_receive_support_emails,_=(y=t.gizmo.tags)==null?void 0:y.includes(A1.Workspace);return i.jsx(en,{testId:"modal-gizmo-review",type:"success",title:i.jsxs("div",{children:[i.jsx(P,N({},so.title)),i.jsxs("div",{className:"align-end mt-2 flex text-sm font-normal",children:[g?i.jsx(P,N({},so.subtitleChange)):i.jsx(P,N({},so.subtitle)),i.jsx(St,{label:s.formatMessage(_?so.subtitleTooltipPrivate:so.subtitleTooltip),className:"ms-1 flex cursor-pointer items-center ps-1",children:i.jsx("div",{className:"icon-xs border-token-text-tertiary text-token-text-tertiary flex items-center justify-center rounded-full border text-[8px] font-bold",children:"i"})})]})]}),isOpen:!0,onClose:e,size:"custom",showCloseButton:!0,className:"max-w-xl overflow-y-auto",hideSeparator:!0,children:i.jsxs("div",{className:"flex grow flex-col space-y-8",children:[i.jsx(UT,{rating:u,onRating:d,className:"mx-auto flex flex-row items-center"}),h&&i.jsxs("div",{children:[i.jsx(nW,{className:"mb-1 w-full resize-none overflow-y-auto rounded-md bg-transparent focus:border-gray-200 focus:ring-gray-200 dark:focus:border-white dark:focus:ring-white",placeholder:s.formatMessage(so.messagePlaceholder),value:r,rows:1,onChange:S=>a(S.target.value)}),i.jsxs("div",{className:q("flex flex-row items-center space-x-2 self-start",r.length>0?"text-token-text-primary":"text-token-text-tertiary"),children:[i.jsx("input",{type:"checkbox",className:"rounded-sm",checked:l,onChange:S=>c(S.target.checked)}),n&&i.jsx("span",{className:"text-sm",children:i.jsx(P,G(N({},so.includeFrom),{values:{email:i.jsx("strong",{children:n.email})}}))})]})]}),i.jsx(Se,{color:"primary",disabled:p,onClick:async()=>{if(u==null){o.warning("Please select a rating");return}V.logEvent("Submit Rating Modal",{gizmo_id:t.gizmo.id,rating:u}),await m.mutateAsync({rating:u,message:r.length>0?r:void 0,includeFrom:r.length>0?l:void 0}),o.success(s.formatMessage(so.successToast),{duration:3}),e()},children:i.jsx(P,N({},so.submit))})]})})},so=we({title:{id:"GizmoReviewModal.title",defaultMessage:"Leave Feedback"},subtitle:{id:"GizmoReviewModal.subtitle",defaultMessage:"How would you rate this GPT?"},subtitleChange:{id:"GizmoReviewModal.subtitleChange",defaultMessage:"Would you like to change your rating?"},subtitleTooltip:{id:"GizmoReviewModal.subtitleTooltip",defaultMessage:"Stars will be public and anonymous"},subtitleTooltipPrivate:{id:"GizmoReviewModal.subtitleTooltipPrivate",defaultMessage:"Stars are anonymous and will only be visible to your workspace"},messagePlaceholder:{id:"GizmoReviewModal.messagePlaceholder",defaultMessage:"Add an optional private email to the creator"},submit:{id:"GizmoReviewModal.submit",defaultMessage:"Submit"},successToast:{id:"GizmoReviewModal.successToast",defaultMessage:"Review sent"},includeFrom:{id:"GizmoReviewModal.includeFrom",defaultMessage:"Include my email address {email}"},hoverRating1:{id:"GizmoReviewModal.hoverRating1",defaultMessage:"Bad"},hoverRating2:{id:"GizmoReviewModal.hoverRating2",defaultMessage:"Okay"},hoverRating3:{id:"GizmoReviewModal.hoverRating3",defaultMessage:"Good"},hoverRating4:{id:"GizmoReviewModal.hoverRating4",defaultMessage:"Great!"},hoverRating5:{id:"GizmoReviewModal.hoverRating5",defaultMessage:"Excellent!"}}),Eht=Object.freeze(Object.defineProperty({__proto__:null,GizmoReviewSelectRating:UT,default:AGe},Symbol.toStringTag,{value:"Module"}));var wP;const p6=Tt.div(wP||(wP=_t(["m-8 flex flex-col items-center"])));function g6(t){return i.jsx(wt.div,N({initial:{opacity:0,translateY:20},animate:{opacity:1,translateY:0,transition:{duration:.5,ease:"easeIn"}}},t))}function Tht({clientThreadId:t}){const e=Ze(t,o=>o==null?void 0:o.promptGptRating),n=e==null?void 0:e.gizmoId,{data:s}=gi(n);return n==null||s==null||!Dee(s)?null:i.jsx(NGe,{gizmoId:n})}function NGe({gizmoId:t}){const[e,n]=v.useState(!1),[s,o]=v.useState(!1),r=P7(t),a=async c=>{n(!0),setTimeout(()=>{o(!0)},5e3),V.logEvent("Submit Inline Rating",{gizmo_id:t,rating:c}),await r.mutateAsync({rating:c})},l=async()=>{o(!0),V.logEvent("Dismiss Inline Rating",{gizmo_id:t}),await r.mutateAsync({})};return v.useEffect(()=>{s||V.logEvent("Show Inline Rating",{gizmo_id:t})},[s,t]),s?null:e?i.jsx(p6,{children:i.jsxs(g6,{className:"flex flex-col items-center gap-4",children:[i.jsx("div",{className:"border-token-border-heavy rounded-lg border p-4",children:i.jsxs("div",{className:"flex justify-between gap-2",children:[i.jsx(P,{id:"gizmo.inlineReview.reviewLeft",defaultMessage:"Feedback sent"}),i.jsx(Wn,{onClick:()=>{o(!0)}})]})}),i.jsx("div",{className:"text-token-text-tertiary text-xs",children:i.jsx(P,{id:"gizmo.inlineReview.reviewLeftSubtext",defaultMessage:'To update your rating, click "Send Feedback" in the GPT Menu'})})]})}):i.jsx(p6,{children:i.jsxs(g6,{className:"border-token-border-heavy flex flex-col items-center gap-4 rounded-lg border p-4",children:[i.jsxs("div",{className:"flex justify-between gap-2",children:[i.jsx(P,{id:"gizmo.inlineReview.prompt",defaultMessage:"How would you rate this GPT so far?"}),i.jsx(Wn,{onClick:l})]}),i.jsx(UT,{rating:void 0,onRating:a})]})})}const Mht=je(()=>Me(()=>import("./9521ff6d-beia655jsefi8tdc.js").then(t=>t.i),__vite__mapDeps([330,1,2,3])).then(t=>t.ImageGenPromptItemCardRow),{fallback:()=>i.jsx("div",{className:"h-[168px] w-full"})}),IGe=re(me,"12a5cf",20,20);function Aht(t){"use forget";const e=D.c(11),{inline:n,isRejected:s}=t,o=s?IGe:dg,r=n?"absolute":"fixed",a=s?"text-token-text-error cursor-not-allowed":"";let l;e[0]!==r||e[1]!==a?(l=q("text-token-text-primary/80 pointer-events-none inset-0 z-50 flex flex-col items-center justify-center gap-2 backdrop-blur-xs transition-[opacity,display,backdrop-filter] transition-discrete starting:opacity-0 starting:backdrop-blur-none",r,a),e[0]=r,e[1]=a,e[2]=l):l=e[2];let c;e[3]!==o?(c=i.jsx(o,{className:"icon h-[max(20cqw,100px)] w-[max(20cqw,100px)]"}),e[3]=o,e[4]=c):c=e[4];let u;e[5]!==s?(u=i.jsx("h3",{className:"text-heading-app text-token-text-primary text-center",children:s?i.jsx(P,{id:"imagesApp.dropTarget.rejectedTitle",defaultMessage:"Unsupported file type"}):i.jsx(P,{id:"imagesApp.dropTarget.title",defaultMessage:"Drop images to upload"})}),e[5]=s,e[6]=u):u=e[6];let d;return e[7]!==l||e[8]!==c||e[9]!==u?(d=i.jsxs("div",{inert:!0,className:l,children:[c,u]}),e[7]=l,e[8]=c,e[9]=u,e[10]=d):d=e[10],d}function jGe(t){var s,o,r,a;const e=Array.from((o=(s=t.clipboardData)==null?void 0:s.files)!=null?o:[]);return e.length>0?e:Array.from((a=(r=t.clipboardData)==null?void 0:r.items)!=null?a:[]).filter(l=>l.kind==="file").map(l=>l.getAsFile()).filter(l=>l!=null)}function Nht({onFilesUploaded:t,isFocusTarget:e,conversation:n}){const s=e!=null?e:(o=>o===document.body);return Kd(document,{paste:o=>{const r=document.activeElement;if(!s(r)||o.defaultPrevented)return;const a=jGe(o).filter(l=>l.type.startsWith("image/"));Nr(()=>{const{tempIds:l}=Z5e()({files:a,type:"drag",conversation:n});l&&(o.preventDefault(),t==null||t(l))})}})}const PGe='defaults write com.google.Chrome NewTabPageLocation "'.concat(atob("aHR0cHM6Ly93d3cuY2hhdGdwdC5jb20vbmV3LXRhYi1wYWdl"),'"'),EW="defaults delete com.google.Chrome NewTabPageLocation 2>/dev/null || true",dC=({content:t})=>{const[e,n]=v.useState(!1),s=Dt(),o=te();return i.jsxs("div",{className:"bg-token-bg-tertiary relative min-w-0 rounded-sm",onMouseEnter:()=>n(!0),onMouseLeave:()=>n(!1),children:[i.jsx("div",{className:"overflow-x-auto px-2 py-1",children:i.jsx("code",{className:"block min-w-0 whitespace-nowrap",children:t})}),e&&i.jsx(Se,{color:"secondary",className:"absolute! sticky end-1 top-1/2 -translate-y-1/2",size:"small",onClick:async()=>{try{await navigator.clipboard.writeText(t),s.success(o.formatMessage({id:"laoJM9",defaultMessage:"Command copied to clipboard"}))}catch(r){}},children:i.jsx(P,{id:"fmeSBG",defaultMessage:"Copy"})})]})},HT=()=>i.jsxs("div",{className:"bg-token-bg-secondary w-full flex-none animate-pulse rounded-md p-3",children:[i.jsx("div",{className:"mb-3 h-32 w-full rounded-md bg-gray-200"}),i.jsx("div",{className:"mb-2 h-4 w-3/4 rounded bg-gray-200"}),i.jsx("div",{className:"h-3 w-2/3 rounded bg-gray-200"})]}),Iht=()=>tt.getItem(Ie.HomeDiscoveryDismissed)?null:i.jsx(to,{children:i.jsxs(ix,{isDismissible:!0,className:"w-full",onDismiss:()=>tt.setItem(Ie.HomeDiscoveryDismissed,!0),children:[i.jsx(P,{id:"ool//w",tagName:"p",defaultMessage:"Thanks for finding this page. You can set the default chrome new tab to this page by:"}),i.jsx(dC,{content:PGe}),i.jsx(P,{id:"8+SRpS",tagName:"p",defaultMessage:"You can revert by:"}),i.jsx(dC,{content:EW})]})});function RGe({limit:t=3}={}){const{data:e,isLoading:n,isError:s}=Bee({cutId:"popular_in_my_workspace",limit:t});return{gizmos:v.useMemo(()=>{var a;return((a=e==null?void 0:e.pages)!=null?a:[]).flatMap(l=>{var c;return(c=l.list)!=null?c:[]}).flatMap(l=>{var c;return(c=l.items)!=null?c:[]}).flatMap(l=>l.resource)},[e]),isLoading:n,isError:s}}function OGe(){const{gizmos:t,isLoading:e,isError:n}=RGe();return n?null:i.jsxs("div",{className:"flex flex-col gap-3 pe-1",children:[i.jsx("h3",{className:"mb-1 line-clamp-2 text-sm font-medium",children:i.jsx(P,{id:"/XUia9",defaultMessage:"Trending GPTs"})}),e&&i.jsx(i.Fragment,{children:Array.from({length:3}).map((s,o)=>i.jsx(HT,{},o))}),t.map(s=>i.jsx(LGe,{gizmo:s},s.gizmo.id))]})}function LGe({gizmo:t}){var a;const e=bt(),n=t.gizmo.display.name,s=t.gizmo.display.description,o=(a=t.gizmo.display.profile_picture_url)!=null?a:void 0,r=()=>{const l=gc(t);e(l)};return i.jsx("article",{className:"bg-token-bg-secondary w-full flex-none cursor-pointer rounded-md p-3 shadow-sm",onClick:r,children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx(Mx,{src:o,isFirstParty:!1,className:"h-10 w-10 shrink-0 rounded-md border border-gray-200 dark:border-gray-700"}),i.jsxs("div",{className:"min-w-0 flex-1",children:[i.jsx("h3",{className:"mb-0.5 line-clamp-1 text-sm font-medium",children:n}),s&&i.jsx("p",{className:"text-token-text-secondary line-clamp-2 text-xs",children:s})]})]})})}const DGe=je(()=>Me(()=>import("./5f9d2d74-ftzm6e3nh9sdf2ku.js"),__vite__mapDeps([331,1,2,3])).then(t=>t.ItemDisplayModal));function TW(){"use forget";var l,c,u,d;const t=D.c(8);let e;t[0]===Symbol.for("react.memo_cache_sentinel")?(e={queryKey:["mixed-feed"],queryFn:FGe},t[0]=e):e=t[0];const n=ut(e);let s;t[1]!==((l=n.data)==null?void 0:l.items)?(s=(u=(c=n.data)==null?void 0:c.items)!=null?u:[],t[1]=(d=n.data)==null?void 0:d.items,t[2]=s):s=t[2];let o;t[3]!==s?(o=s.filter(BGe),t[3]=s,t[4]=o):o=t[4];const r=o;let a;return t[5]!==r||t[6]!==n?(a=G(N({},n),{items:r}),t[5]=r,t[6]=n,t[7]=a):a=t[7],a}function BGe(t){return t.content_type!=="survey"&&t.content_type!=="card_set"&&t.content_type!=="footer"}function FGe(){return ue.safeGet("/feed/mixed")}function jht(){"use forget";const t=D.c(3);let e;t[0]===Symbol.for("react.memo_cache_sentinel")?(e=i.jsx("div",{className:"bg-token-bg-tertiary max-h-84 w-68 overflow-y-auto rounded-lg p-2",children:i.jsx(VGe,{})}),t[0]=e):e=t[0];let n;t[1]===Symbol.for("react.memo_cache_sentinel")?(n=i.jsx("div",{className:"bg-token-bg-tertiary max-h-84 w-68 overflow-y-auto rounded-lg p-2",children:i.jsx(UGe,{})}),t[1]=n):n=t[1];let s;return t[2]===Symbol.for("react.memo_cache_sentinel")?(s=i.jsxs("div",{className:"flex w-full justify-center gap-4",children:[e,n,i.jsx("div",{className:"bg-token-bg-tertiary max-h-84 w-68 overflow-y-auto rounded-lg p-2",children:i.jsx(OGe,{})})]}),t[2]=s):s=t[2],s}function UGe(){"use forget";const t=D.c(13),{items:e,isLoading:n,isError:s}=TW();let o,r,a,l;if(t[0]!==s||t[1]!==n||t[2]!==e){l=Symbol.for("react.early_return_sentinel");e:{const u=e.filter(GGe);if(s){l=null;break e}o="flex flex-col gap-3 pe-1",t[7]!==n?(r=n&&i.jsx(i.Fragment,{children:Array.from({length:4}).map($Ge)}),t[7]=n,t[8]=r):r=t[8],a=u.map(HGe)}t[0]=s,t[1]=n,t[2]=e,t[3]=o,t[4]=r,t[5]=a,t[6]=l}else o=t[3],r=t[4],a=t[5],l=t[6];if(l!==Symbol.for("react.early_return_sentinel"))return l;let c;return t[9]!==o||t[10]!==r||t[11]!==a?(c=i.jsxs("div",{className:o,children:[r,a]}),t[9]=o,t[10]=r,t[11]=a,t[12]=c):c=t[12],c}function HGe(t,e){return i.jsx("div",{children:i.jsx(MW,{item:t})},"".concat(t.content_type,"-").concat(e))}function $Ge(t,e){return i.jsx(HT,{},e)}function GGe(t){var e,n;return t.content_type==="card"&&(((e=t.title)==null?void 0:e.toLowerCase().includes("inbox"))||((n=t.title)==null?void 0:n.toLowerCase().includes("calendar")))}function VGe(){"use forget";const t=D.c(7),{items:e,isLoading:n,isError:s}=TW();if(s)return null;let o;t[0]!==n?(o=n&&i.jsx(i.Fragment,{children:Array.from({length:4}).map(WGe)}),t[0]=n,t[1]=o):o=t[1];let r;t[2]!==e?(r=e.map(zGe),t[2]=e,t[3]=r):r=t[3];let a;return t[4]!==o||t[5]!==r?(a=i.jsxs("div",{className:"flex flex-col gap-3 pe-1",children:[o,r]}),t[4]=o,t[5]=r,t[6]=a):a=t[6],a}function zGe(t,e){return i.jsx("div",{children:i.jsx(MW,{item:t})},"".concat(t.content_type,"-").concat(e))}function WGe(t,e){return i.jsx(HT,{},e)}const MW=t=>{"use forget";var a,l;const e=D.c(36),{item:n}=t,s=te();let o;e[0]!==s?(o=s.formatMessage(h6.newsImageAlt),e[0]=s,e[1]=o):o=e[1];const r=o;switch(n.content_type){case"card":{const c=(a=n.image)==null?void 0:a.url,u=(l=n.image)==null?void 0:l.fallback_url,d=n.title,f=n.preview_markdown_text;let m;e[2]!==r||e[3]!==n?(m=()=>rt(DGe,{selectedCard:n,fallbackAltText:r}),e[2]=r,e[3]=n,e[4]=m):m=e[4];let p;e[5]!==u||e[6]!==c||e[7]!==s||e[8]!==d?(p=c&&i.jsx("img",{src:c,onError:x=>{u&&x.target.src!==u&&(x.target.src=u)},alt:d!=null?d:s.formatMessage(h6.newsImageAlt),className:"mb-3 h-32 w-full rounded-md object-cover"}),e[5]=u,e[6]=c,e[7]=s,e[8]=d,e[9]=p):p=e[9];let g;e[10]!==d?(g=d&&i.jsx("h3",{className:"mb-1 line-clamp-2 text-sm font-medium",children:d}),e[10]=d,e[11]=g):g=e[11];let h;e[12]!==f?(h=f&&i.jsx("p",{className:"text-token-text-secondary line-clamp-3 text-xs",children:f}),e[12]=f,e[13]=h):h=e[13];let _;return e[14]!==m||e[15]!==p||e[16]!==g||e[17]!==h?(_=i.jsxs("article",{className:"bg-token-bg-secondary w-full flex-none cursor-pointer rounded-md p-3 shadow-sm",onClick:m,children:[p,g,h]}),e[14]=m,e[15]=p,e[16]=g,e[17]=h,e[18]=_):_=e[18],_}case"header_with_date":{let c;e[19]!==n.date?(c=n.date!=null?new Date(Number(n.date)*1e3):null,e[19]=n.date,e[20]=c):c=e[20];const u=c,d=n.body;let f;e[21]!==u?(f=u&&i.jsx("h3",{className:"mb-0.5 line-clamp-2 text-sm font-medium",children:i.jsx(dK,{value:u,month:"long",day:"numeric"})}),e[21]=u,e[22]=f):f=e[22];let m;e[23]!==d?(m=d&&i.jsx("p",{className:"text-token-text-secondary text-xs",children:d}),e[23]=d,e[24]=m):m=e[24];let p;return e[25]!==f||e[26]!==m?(p=i.jsxs("div",{children:[f,m]}),e[25]=f,e[26]=m,e[27]=p):p=e[27],p}case"commentary":{const c=n.title,u=n.body;let d;e[28]!==c?(d=c&&i.jsx("h3",{className:"mb-1 line-clamp-2 text-sm font-medium",children:c}),e[28]=c,e[29]=d):d=e[29];let f;e[30]!==u?(f=u&&i.jsx("p",{className:"text-token-text-secondary line-clamp-3 text-xs",children:u}),e[30]=u,e[31]=f):f=e[31];let m;return e[32]!==d||e[33]!==f?(m=i.jsxs("div",{children:[d,f]}),e[32]=d,e[33]=f,e[34]=m):m=e[34],m}case"divider":{let c;return e[35]===Symbol.for("react.memo_cache_sentinel")?(c=i.jsx("div",{className:"border-token-border-muted my-1 border-t"}),e[35]=c):c=e[35],c}default:return null}},h6=we({newsImageAlt:{id:"+EPy7B",defaultMessage:"News image"}}),qGe=re(me,"2a29bc",20,20),_6=je(()=>Me(()=>import("./e688bf87-b0qax31no9kpe2yv.js"),__vite__mapDeps([332,1,2,3])).then(t=>t.AddShortcutModal)),KGe=t=>Array.isArray(t)?t.map(e=>typeof e=="object"&&e!=null?{name:String(e.name),url:String(e.url)}:null).filter(e=>e!=null):[];function Pht(){"use forget";var y;const t=D.c(29),e=te();let n;t[0]===Symbol.for("react.memo_cache_sentinel")?(n=KGe((y=tt.getItem(Ie.ShortcutLinks))!=null?y:[]),t[0]=n):n=t[0];const[s,o]=v.useState(n);let r;t[1]===Symbol.for("react.memo_cache_sentinel")?(r=S=>{o(S),tt.setItem(Ie.ShortcutLinks,S)},t[1]=r):r=t[1];const a=r;let l;t[2]!==e||t[3]!==s?(l=S=>{rt(_6,{title:e.formatMessage(Em.editShortcut),defaultName:s[S].name,defaultUrl:s[S].url,onSave:(C,w)=>{a(s.map((k,E)=>E===S?{name:C,url:w}:k))}})},t[2]=e,t[3]=s,t[4]=l):l=t[4];const c=l;let u;t[5]!==s?(u=S=>{a(s.filter((C,w)=>w!==S))},t[5]=s,t[6]=u):u=t[6];const d=u;let f;if(t[7]!==c||t[8]!==d||t[9]!==s){let S;t[11]!==c||t[12]!==d?(S=(C,w)=>i.jsx(x6,{onClick:()=>window.location.href=C.url,img:i.jsx("img",{src:"https://www.google.com/s2/favicons?domain=".concat(C.url,"&sz=64"),alt:C.name,className:"h-6 w-6"}),name:C.name,showMenu:!0,onEdit:()=>c(w),onRemove:()=>d(w)},C.name),t[11]=c,t[12]=d,t[13]=S):S=t[13],f=s.map(S),t[7]=c,t[8]=d,t[9]=s,t[10]=f}else f=t[10];let m;t[14]!==e||t[15]!==s?(m=()=>rt(_6,{title:e.formatMessage(Em.addShortcut),onSave:(S,C)=>{a([...s,{name:S,url:C}])}}),t[14]=e,t[15]=s,t[16]=m):m=t[16];let p;t[17]===Symbol.for("react.memo_cache_sentinel")?(p=i.jsx(pf,{className:"h-6 w-6"}),t[17]=p):p=t[17];let g;t[18]!==e?(g=e.formatMessage(Em.addShortcut),t[18]=e,t[19]=g):g=t[19];let h;t[20]!==m||t[21]!==g?(h=i.jsx(x6,{onClick:m,img:p,name:g}),t[20]=m,t[21]=g,t[22]=h):h=t[22];let _;t[23]===Symbol.for("react.memo_cache_sentinel")?(_=i.jsx("div",{className:"absolute! end-0 top-0 translate-x-full rtl:-translate-x-full",children:i.jsx(YGe,{})}),t[23]=_):_=t[23];let x;t[24]!==h?(x=i.jsxs("div",{className:"relative",children:[h,_]}),t[24]=h,t[25]=x):x=t[25];let b;return t[26]!==x||t[27]!==f?(b=i.jsx("div",{className:"text-center",children:i.jsxs("div",{className:"flex flex-wrap justify-center",children:[f,x]})}),t[26]=x,t[27]=f,t[28]=b):b=t[28],b}const YGe=()=>{"use forget";const t=D.c(1);let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=i.jsx($E,{triggerIcon:kr,side:"right",sideOffset:4,children:i.jsxs("div",{className:"text-sm",children:[i.jsx(P,{id:"RUf4sV",tagName:"p",defaultMessage:"You can revert to chrome original by:"}),i.jsx(dC,{content:EW})]})}),t[0]=e):e=t[0],e},x6=({onClick:t,img:e,name:n,showMenu:s,onEdit:o,onRemove:r})=>{const a=te();return i.jsxs(Se,{color:"ghost",className:"group relative rounded-sm",onClick:t,children:[s&&o&&r&&i.jsxs(ee.Root,{children:[i.jsx(ee.Trigger,{asChild:!0,onClick:l=>{l.stopPropagation()},children:i.jsx(ZGe,{})}),i.jsx(ee.Portal,{children:i.jsxs(ee.Content,{size:"auto",children:[i.jsx(ee.Item,{onClick:l=>{l.stopPropagation(),o()},label:a.formatMessage(Em.edit)}),i.jsx(ee.Item,{onClick:l=>{l.stopPropagation(),r()},label:a.formatMessage(Em.remove)})]})})]}),i.jsxs("div",{className:"flex flex-col items-center gap-3 py-3",children:[i.jsx("div",{className:"bg-token-bg-secondary mx-3 rounded-full p-3",children:e}),i.jsx("span",{className:"text-xs text-gray-700",children:n})]})]})},ZGe=n=>{var s=n,{ref:t}=s,e=De(s,["ref"]);return i.jsx(Se,G(N({ref:t},e),{as:"button",onClick:o=>{var r;return(r=e.onClick)==null?void 0:r.call(e,o)},icon:qGe,color:"ghost",className:"absolute! end-0 top-0 opacity-0 transition-opacity group-hover:opacity-100",size:"small"}))},Em=we({addShortcut:{id:"TK0jxS",defaultMessage:"Add shortcut"},editShortcut:{id:"OLI43T",defaultMessage:"Edit shortcut"},edit:{id:"PUtE2c",defaultMessage:"Edit"},remove:{id:"lCYLCS",defaultMessage:"Remove"}}),QGe=je(()=>Me(()=>import("./dde865c8-d0h8yqv6b3wp7ta4.js"),__vite__mapDeps([263,1,2,3,8,264])).then(t=>t.ConnectorsOnboardingModal)),y6=je(()=>Me(()=>import("./87d262ab-jc3tkhcjaw5pguhm.js"),__vite__mapDeps([333,1,2,3])).then(t=>t.GlauxNuxModal));function Rht({clientThreadId:t}){var E,T;const e=vn(),n=te(),s=Ip(),o=Is(),r=Jo(),[a,l]=wo(),c=Fee(),u=Tn(),d=(T=(E=u==null?void 0:u.name)==null?void 0:E.trim())!=null?T:"",f=n.formatMessage({id:"GZaSWr",defaultMessage:"Your organization"}),m=d||f,g=Uee(u==null?void 0:u.planType)?i.jsx(P,{id:"2mP3gw",defaultMessage:"Organization knowledge"}):i.jsx(P,{id:"eMtjgF",defaultMessage:"Company knowledge"}),h=X(()=>YC()),_=X(()=>ZC(e)),x=v.useMemo(()=>{var A;if(h===void 0||_===void 0)return!0;const M=_==null?void 0:_.some(I=>["partially_activated","activated","activating"].includes(I.user_connection_details.activation_status));return((A=h==null?void 0:h.size)!=null?A:0)>0||M},[h,_]),b=X(()=>Ca()),y=b==null?void 0:b.some(M=>M.systemHint==="glaux"),{available:S}=kW(),C=v.useMemo(()=>S&&o==null,[S,o]);v.useEffect(()=>{C&&Ve.addFirstTiming("load.companyKnowledgePill")},[C]);const w=v.useCallback(()=>{const M=tt.getItem(Ie.ConnectorsOnboarding),A=()=>{r("glaux",{analyticsMetadata:{clientThreadId:t}}),setTimeout(()=>{So(Vt(s))},100),V.logEventWithStatsig("ChatGPT Connectors Connector Pill Enabled","chatgpt_connectors_connector_pill_enabled",{type:"glaux"})};if(c==="restricted"&&M||!c){A();return}c==="restricted"?rt(y6,{onContinue:A}):c==="external"&&(x?A():rt(QGe,{onContinue:A}))},[t,r,s,c,x]);v.useEffect(()=>{y&&a.get("glaux-onboarding")==="true"&&(rt(y6,{onContinue:()=>{r("glaux",{analyticsMetadata:{clientThreadId:t}}),So(Vt(s))}}),l(A=>(A.delete("glaux-onboarding"),A)))},[y,a,l,t,r,s]);const k=({onClick:M,Icon:A,label:I,tooltip:j})=>{const R=i.jsx(Se,{className:"py-2",color:"secondary",onClick:M,size:"medium",children:i.jsx("div",{className:"flex gap-2",children:i.jsxs(i.Fragment,{children:[A,I]})})});return i.jsx("div",{className:"mx-1.5 mt-11 flex justify-center max-md:hidden",children:j?i.jsx(St,{label:j,children:R}):R})};return C?i.jsx(k,{onClick:w,Icon:i.jsx(hT,{className:"icon"}),label:g,tooltip:n.formatMessage({id:"TfieoZ",defaultMessage:"Search {name}'s knowledge"},{name:m})}):null}function JGe(t){return t!=null&&(t.tagName==="INPUT"||t.tagName==="TEXTAREA"||t.tagName==="SELECT"||!!t.getAttribute("contenteditable"))}function Oht(t){"use forget";const e=D.c(3);let n,s;e[0]!==t?(n=()=>{const o=Vt(t).dom.ownerDocument,r=o.defaultView;if(!r)return;const a=l=>{l.code!=="Space"&&l.key!=="Enter"&&(!l.metaKey||l.key==="v")&&!JGe(o.activeElement)&&So(Vt(t))};return r.addEventListener("keypress",a),()=>{r.removeEventListener("keypress",a)}},s=[t],e[0]=t,e[1]=n,e[2]=s):(n=e[1],s=e[2]),v.useEffect(n,s)}const Rh=we({focusOn:{id:"jawbone.focusOn",defaultMessage:"Focus on..."},rescheduleTo:{id:"jawbone.rescheduleTo",defaultMessage:"Reschedule to..."}});function Lht(t){"use forget";const e=D.c(33),{taskId:n}=t,{automation:s}=Kk(n);let o;e[0]!==n?(o={automation_id:n},e[0]=n,e[1]=o):o=e[1];const{mutate:r,isPending:a}=ZD(o);if(!s)return null;let l;e[2]!==n?(l=M=>{Ws().prefillTaskReply(n,Bv(M))},e[2]=n,e[3]=l):l=e[3];const c=l,{is_enabled:u}=s;let d,f,m,p;e[4]===Symbol.for("react.memo_cache_sentinel")?(d={opacity:0,y:10},f={opacity:1,y:0},m={opacity:0,y:10},p={duration:.15},e[4]=d,e[5]=f,e[6]=m,e[7]=p):(d=e[4],f=e[5],m=e[6],p=e[7]);const g=u?ak:fk,h=u?"danger-outline":"secondary";let _;e[8]!==u||e[9]!==r?(_=()=>r({is_enabled:!u}),e[8]=u,e[9]=r,e[10]=_):_=e[10];let x;e[11]!==u?(x=u?i.jsx(P,N({},oa.messages.pause)):i.jsx(P,N({},oa.messages.resume)),e[11]=u,e[12]=x):x=e[12];let b;e[13]!==a||e[14]!==x||e[15]!==g||e[16]!==h||e[17]!==_?(b=i.jsx(Se,{icon:g,color:h,size:"large",disabled:a,onClick:_,children:x}),e[13]=a,e[14]=x,e[15]=g,e[16]=h,e[17]=_,e[18]=b):b=e[18];let y;e[19]!==c?(y=()=>c(Rh.focusOn.defaultMessage),e[19]=c,e[20]=y):y=e[20];let S;e[21]===Symbol.for("react.memo_cache_sentinel")?(S=i.jsx(P,N({},Rh.focusOn)),e[21]=S):S=e[21];let C;e[22]!==y?(C=i.jsx(Se,{icon:ll,color:"secondary",onClick:y,children:S}),e[22]=y,e[23]=C):C=e[23];let w;e[24]!==c?(w=()=>c(Rh.rescheduleTo.defaultMessage),e[24]=c,e[25]=w):w=e[25];let k;e[26]===Symbol.for("react.memo_cache_sentinel")?(k=i.jsx(P,N({},Rh.rescheduleTo)),e[26]=k):k=e[26];let E;e[27]!==w?(E=i.jsx(Se,{icon:xg,color:"secondary",onClick:w,children:k}),e[27]=w,e[28]=E):E=e[28];let T;return e[29]!==b||e[30]!==C||e[31]!==E?(T=i.jsxs(wt.div,{initial:d,animate:f,exit:m,transition:p,className:"flex gap-2 overflow-x-scroll bg-transparent px-1 pb-4",children:[b,C,E]}),e[29]=b,e[30]=C,e[31]=E,e[32]=T):T=e[32],T}const AW=re(me,"0c21a8",20,20),XGe=re(me,"658007",20,20);function eVe({currentIndex:t,numEntries:e,onChange:n,onMouseDown:s,onMouseUp:o}){return i.jsx("div",{className:"w-full",children:i.jsxs(VE,{className:"relative m-2 flex w-full items-center",min:0,max:e,step:1,value:[t],onValueChange:r=>{n(r[0]),s()},onValueCommit:()=>{o()},children:[i.jsx(zE,{className:"bg-token-text-quaternary relative h-[9px] grow rounded-full",children:i.jsx(yG,{className:"bg-token-text-primary absolute h-full rounded-full"})}),i.jsx(WE,{className:"bg-token-bg-primary border-token-bg-secondary block h-[15px] w-[15px] cursor-pointer rounded-full border focus:outline-none"})]})})}function tVe(t,e){const n=[];if(!e)return n;let s=t.getNodeIfExists(e);for(;s;)n.push(s.message),s=t.getNodeIfExists(s.parentId);return n.reverse()}const nVe=400,sVe=4e3,oVe=3e3,rVe=2e3;function aVe(t,e){const n=t.author.name,s=t.recipient;return n!=null&&n.startsWith("browser")||s!=null&&s.startsWith("browser")?sVe/e:Xg(n,724319625)||Xg(s,724319625)?oVe/e:Xg(n,3405121681)||Xg(s,3405121681)?rVe/e:nVe/e}const NW="inline-block min-h-[unset]",b6=q(NW,"p-0 h-fit py-1 px-4");function Dht({clientThreadId:t}){var T;const e=bt(),n=Vi.useState(M=>M.finalMessageId),s=Vi.useStore(),o=Vi.useState(M=>M.isPlaying),r=Vi.useState(M=>M.playbackSpeed),a=s.setPlaying,l=s.endReplay,c=v.useRef(!1),u=v.useCallback(M=>{a(M),c.current=M},[a]),d=v.useCallback(()=>{a(!1)},[a]),f=v.useCallback(()=>{a(c.current)},[a]);v.useCallback(()=>{if(!n)throw Error("Missing finalMessageId");pt(t,M=>{M.currentLeafId=n}),l()},[l,n,t]),v.useEffect(()=>()=>{n&&pt(t,M=>{M.currentLeafId=n})},[n,t]);const m=Ze(t,M=>M==null?void 0:M.tree),p=v.useMemo(()=>m?tVe(m,n).filter(I=>!(I.author.role==="root"||I.author.role==="system"||I.author.role==="assistant"&&I.recipient!=="all"||I.author.name&&Tr(111655449,I.author.name))):[],[m,n]),g=((T=p==null?void 0:p.length)!=null?T:1)-1,h=!mt(),_=v.useCallback(()=>{u(!1),y(g)},[u,g]),x=v.useMemo(()=>{var L,B,U;const M=p.findLastIndex(H=>H.author.role==dt.User),A=p[M],I=M===-1?p:p.slice(M),j=I.findLast(H=>{var $;return H.channel==="final"&&(($=H.metadata)==null?void 0:$.n7jupd_summary)})||I.findLast(H=>{var $;return($=H.metadata)==null?void 0:$.n7jupd_summary}),R=(B=(L=A.metadata)==null?void 0:L.system_hints)!=null?B:[],O=(U=j==null?void 0:j.metadata)==null?void 0:U.n7jupd_summary;return O?{systemHints:R,summarizedPrompt:O}:null},[p]),[b,y]=v.useState(1);v.useEffect(()=>{const M=p==null?void 0:p[b].id;M&&pt(t,A=>{A.currentLeafId=M})},[b,p,t]);const S=g===b;v.useEffect(()=>{S&&u(!1)},[S,u]);const C=s.toggleIsPlaying,w=v.useCallback(()=>{S&&!o&&y(1),C()},[S,o,C]);v.useEffect(()=>{if(!o||b>=g)return;const M=aVe(p[b],r),A=setTimeout(()=>{y(I=>I+1)},M);return()=>clearTimeout(A)},[o,r,b,p,g]),v.useEffect(()=>(u(!0),()=>u(!1)),[u]);const k=v.useCallback(()=>{u(!0),y(1)},[u]);return i.jsxs("div",{className:"shadow-long bg-token-main-surface-primary flex w-full items-center gap-2 rounded-[20px] p-4",children:[i.jsx(Se,{icon:S?lE:o?AW:Wwe,onClick:S?k:w,className:q(NW,"border-none p-2"),color:"secondary"}),i.jsx("div",{className:"flex flex-1 flex-col items-center justify-center pe-6",children:i.jsx(eVe,{onChange:y,numEntries:g,currentIndex:b,onMouseDown:d,onMouseUp:f})}),i.jsxs("div",{className:"flex max-w-[200px] items-center justify-center",children:[S&&i.jsxs(i.Fragment,{children:[!1,!h&&!!x&&i.jsx(Se,{icon:Gp,onClick:()=>{const M=new URLSearchParams({prompt:x.summarizedPrompt});for(const A of x.systemHints)M.append(p_,A);Ea(e,{params:M})},className:b6,children:i.jsx("span",{className:"truncate",children:i.jsx(P,{id:"if6xD7",defaultMessage:"Try this prompt"})})})]}),!S&&i.jsx(i.Fragment,{children:i.jsx(Se,{icon:XGe,onClick:_,className:b6,color:"secondary",children:i.jsx(P,{id:"Cxho9p",defaultMessage:"Skip"})})})]})]})}function iVe(t,e=pp){const n=v.useRef(void 0);return s=>{const o=t(s);return e(n.current,o)?n.current:n.current=o}}function IW(t){var s;if(!t||t.messages.length===0)return null;const e=t.messages.find(o=>o.create_time!=null||o.update_time!=null),n=(s=e==null?void 0:e.create_time)!=null?s:e==null?void 0:e.update_time;return n!=null?new Date(n*1e3):null}function I0(t,e){return!t||!e?!1:t.getFullYear()===e.getFullYear()&&t.getMonth()===e.getMonth()&&t.getDate()===e.getDate()}function Bht(t){const e=Ze(t,iVe(c=>ve.getConversationTurns(c).map(d=>{const f=IW(d),m=HLe(d,d.messages);return{turnDate:f,isRenderable:m}}))),n=hw(t),s=(n==null?void 0:n.value)===Nn.UNREAD&&n.source===Ka.SERVER,[o,r]=v.useState(null),{results:a,lastRenderableTurnIndex:l}=v.useMemo(()=>{const c=new Array(e.length).fill(void 0),u=new Date;let d=null;for(const g of e){const h=g.turnDate;h&&(!d||h<d)&&(d=h)}let f=null,m=!0,p=null;for(let g=0;g<e.length;g++){const h=e[g];if(h.isRenderable){p=g;const _=h.turnDate;m?(m=!1,d&&!I0(d,u)&&(c[g]=0)):f&&!I0(_,f)&&(c[g]=0),f=_}}return{results:c,lastRenderableTurnIndex:p}},[e]);return v.useEffect(()=>{s&&l!=null&&l!==o&&r(l)},[s,l,o]),v.useMemo(()=>{const c=[...a];return s&&l!=null?c[l]=1:!s&&o!=null&&(c[o]=1),u=>c[u]},[a,s,l,o])}function lVe(t,e){const n=IW(e);if(n){const s=new Date,o=new Date;o.setDate(s.getDate()-1);let r;if(I0(n,s))r=t.formatMessage({id:"ConversationTurn.todayHeader",defaultMessage:"Today"});else if(I0(n,o))r=t.formatMessage({id:"ConversationTurn.yesterdayHeader",defaultMessage:"Yesterday"});else{const a=s.getFullYear(),l=n.getFullYear();a===l?r=t.formatDate(n,{month:"short",day:"numeric"}):r=t.formatDate(n,{month:"short",day:"numeric",year:"numeric"})}return r}else return null}const Fht=t=>{"use forget";const e=D.c(12),{turn:n,dateHeaderType:s}=t,o=te();if(s===void 0||!xe("1847911009"))return null;let r;e[0]!==o||e[1]!==n?(r=lVe(o,n),e[0]=o,e[1]=n,e[2]=r):r=e[2];const a=r;if(!a)return null;if(s===1){let u;e[3]===Symbol.for("react.memo_cache_sentinel")?(u=i.jsx("div",{className:"me-1 flex-1 border-t border-[#B3DBFF] opacity-50 dark:border-[#0088FF]"}),e[3]=u):u=e[3];let d;e[4]!==a?(d=i.jsx("span",{className:"text-sm leading-5 font-normal text-[#0088FF]",children:a}),e[4]=a,e[5]=d):d=e[5];let f;e[6]===Symbol.for("react.memo_cache_sentinel")?(f=i.jsx("div",{className:"ms-1 flex-1 border-t border-[#B3DBFF] opacity-50 dark:border-[#0088FF]"}),e[6]=f):f=e[6];let m;return e[7]!==d?(m=i.jsxs("div",{className:"mx-auto my-4 flex h-[20px] w-full items-center md:max-w-3xl lg:max-w-[40rem] xl:max-w-[48rem]",children:[u,d,f]}),e[7]=d,e[8]=m):m=e[8],m}let l;e[9]===Symbol.for("react.memo_cache_sentinel")?(l={height:"20px"},e[9]=l):l=e[9];let c;return e[10]!==a?(c=i.jsx("div",{className:"my-4 flex justify-center",style:l,children:i.jsx("span",{className:"text-token-text-secondary text-sm leading-5 font-normal",children:a})}),e[10]=a,e[11]=c):c=e[11],c},jW={renderExtent:"complete",surface:"thread"},PW=v.createContext(jW);function Uht(t){"use forget";var l;const e=D.c(8);let n,s;e[0]!==t?(l=t,{children:n}=l,s=De(l,["children"]),e[0]=t,e[1]=n,e[2]=s):(n=e[1],s=e[2]);let o;e[3]!==s?(o=N(N({},jW),s),e[3]=s,e[4]=o):o=e[4];const r=o;let a;return e[5]!==n||e[6]!==r?(a=i.jsx(PW.Provider,{value:r,children:n}),e[5]=n,e[6]=r,e[7]=a):a=e[7],a}function Hht(){"use forget";return v.useContext(PW)}const cVe="_69lA8a_main",$ht={main:cVe},Ght=()=>i.jsx("div",{className:"pointer-events-none absolute inset-x-0 bottom-0 -z-10 h-24",children:i.jsx(to,{children:i.jsx("div",{className:"relative -mx-8 h-24 [mask-image:linear-gradient(to_right,transparent_0%,black_20%,black_80%,transparent_100%),linear-gradient(to_top,black_0%,black_75%,transparent_100%)] [mask-composite:intersect] backdrop-blur-2xl [-webkit-mask-composite:source-in] [-webkit-mask-image:linear-gradient(to_right,transparent_0%,black_20%,black_80%,transparent_100%),linear-gradient(to_top,black_0%,black_75%,transparent_100%)]"})})}),Vht=t=>{"use forget";const e=D.c(22),{clientThreadId:n,bottom:s,pinnedWidgetType:o,onClick:r}=t;let a;e[0]!==n?(a=()=>ve.getBranch(At(n)),e[0]=n,e[1]=a):a=e[1];const[l]=v.useState(a);let c;e[2]!==l||e[3]!==o?(c=b=>{var y,S,C;return[(C=(S=(y=ve.getBranch(b))==null?void 0:y.slice(l.length).findLast(w=>{const{message:k}=w,{metadata:E}=k;return(E==null?void 0:E.chatgpt_sdk)&&bx(E.chatgpt_sdk)===o}))==null?void 0:S.message.metadata)==null?void 0:C.tool_invoking_message]},e[2]=l,e[3]=o,e[4]=c):c=e[4];const[u]=Ze(n,c);let d;e[5]!==s?(d={bottom:s},e[5]=s,e[6]=d):d=e[6];let f;e[7]===Symbol.for("react.memo_cache_sentinel")?(f={viewTransitionName:"var(--vt-composer)"},e[7]=f):f=e[7];let m;e[8]===Symbol.for("react.memo_cache_sentinel")?(m=i.jsx(Cd,{sizeOverride:28,className:"text-token-border-default ms-2 flex-shrink-0 animate-spin",thickness:.08333333333333333,backgroundStrokeClassName:q("stroke-[rgba(0,0,0,0)]"),percentage:33.333333333333336}),e[8]=m):m=e[8];let p;e[9]!==u?(p=u!=null?u:i.jsx(P,{id:"z6ez+H",defaultMessage:"Thinking"}),e[9]=u,e[10]=p):p=e[10];let g;e[11]!==p?(g=i.jsx("span",{className:"loading-shimmer truncate px-4",children:p}),e[11]=p,e[12]=g):g=e[12];let h;e[13]!==n?(h=i.jsx(Se,{icon:yE,size:"medium",className:"aspect-square p-0",onClick:b=>{b.stopPropagation(),Ple(n)}}),e[13]=n,e[14]=h):h=e[14];let _;e[15]!==r||e[16]!==g||e[17]!==h?(_=i.jsxs("div",{role:"button",onClick:r,className:"bg-token-bg-primary shadow-short pointer-events-auto mx-auto flex h-12 w-full max-w-md cursor-pointer items-center justify-between gap-2 rounded-full px-1.5 dark:bg-[#303030]",style:f,children:[m,g,h]}),e[15]=r,e[16]=g,e[17]=h,e[18]=_):_=e[18];let x;return e[19]!==d||e[20]!==_?(x=i.jsx(to,{className:"fixed start-0 end-0 bottom-0 z-[100] py-1",style:d,children:_}),e[19]=d,e[20]=_,e[21]=x):x=e[21],x},RW=v.createContext(!1);function zht(){return v.useContext(RW)}function Wht({children:t}){return i.jsx(RW.Provider,{value:!0,children:t})}function uVe(t){return t.nodeType===Node.ELEMENT_NODE}function OW(t){var e;if(uVe(t)){if(["THEAD","TR","TD","TH"].includes(t.nodeName.toUpperCase())){let n=t.parentNode;for(;n&&n.nodeName!=="TABLE";)n=n.parentNode;if(!n){ws.debug("Found table element without a parent <table>");const s=document.createElement("table");(e=t.parentNode)==null||e.insertBefore(s,t),s.appendChild(t)}}t.attributes&&[...t.attributes].forEach(n=>{["style"].includes(n.name)&&t.removeAttribute(n.name)})}t.childNodes.forEach(OW)}function dVe(t){t.childNodes.forEach(OW)}function fVe(t){var o;const e=t.currentTarget.ownerDocument,n=e.defaultView;t.preventDefault();const s=n==null?void 0:n.getSelection();if(s&&s.rangeCount>0){const r=e.createDocumentFragment();for(let u=0;u<s.rangeCount;u+=1){const d=s.getRangeAt(u);r.appendChild(d.cloneContents())}dVe(r),r.querySelectorAll("script, [class*='select-none'], [class*='sr-only']").forEach(u=>{u.remove()});const a=e.createElement("div");a.appendChild(r),e.body.appendChild(a);const l=a.innerHTML;let c=a.innerText;c!=null&&c.trim()||(c=(o=a.textContent)!=null?o:""),c=c.replace(/\u00a0/g," "),e.body.removeChild(a),t.clipboardData.setData("text/html",l),t.clipboardData.setData("text/plain",c)}}function v6(t){return t instanceof HTMLTextAreaElement||t instanceof HTMLInputElement}function mVe(t){const e=t.nativeEvent;if(typeof e.composedPath=="function"){for(const n of e.composedPath())if(v6(n))return!0}return v6(t.target)}const qht=t=>{"use forget";const e=D.c(3),n=Hs();let s;return e[0]!==t||e[1]!==n?(s=o=>{var u,d;mVe(o)||fVe(o);const{currentTarget:r}=o,a=(u=r.closest("[data-message-id]"))==null?void 0:u.getAttribute("data-message-id"),l=(d=document.getSelection())==null?void 0:d.toString(),c=Lt(t);!a||!l||!c||n||rx({source:"keyboard",type:"copy",messageId:a,serverThreadId:c,selectedText:l,location:"selection",contentType:"text"})},e[0]=t,e[1]=n,e[2]=s):s=e[2],s};function S6(){return{finished:Promise.resolve(),ready:Promise.resolve(),skipTransition:()=>{},types:new Set,updateCallbackDone:Promise.resolve()}}function pVe(){return"ViewTransitionTypeSet"in document}function Kht({forceFlushSync:t,update:e,className:n,types:s}){var o,r;if(typeof document<"u"&&document.visibilityState==="hidden")return t?Xa.flushSync(e):e(),S6();if("startViewTransition"in document){let a;const l=pVe();s&&document.documentElement.setAttribute("active-view-transition-type",s.join(","));const c=["active-view-transition"];n&&(Array.isArray(n)?c.push(...n):c.push(n)),document.documentElement.classList.add(...c),l?a=document.startViewTransition({update:()=>{if(document.documentElement.classList.add("update-callback-done"),t)Xa.flushSync(e);else return e()},types:s}):a=document.startViewTransition(()=>{if(document.documentElement.classList.add("update-callback-done"),t)Xa.flushSync(e);else return e()});let u=!1;const d=()=>{u||(u=!0,document.documentElement.classList.remove(...c,"update-callback-done"),document.documentElement.removeAttribute("active-view-transition-type"))};return(o=a.finished)==null||o.then(async()=>{await di.yield(),d()}).catch(f=>{d()}),(r=a.ready)==null||r.catch(f=>{d()}),a}else{const a=S6();return setTimeout(()=>{e()},0),a}}const Yht={"becoming-inline":"sR_mOW_becoming-inline","becoming-pinned":"sR_mOW_becoming-pinned","composer-slide":"sR_mOW_composer-slide","fullscreen-popover-thread-closing-transition":"sR_mOW_fullscreen-popover-thread-closing-transition","fullscreen-popover-thread-opening-transition":"sR_mOW_fullscreen-popover-thread-opening-transition","fullscreen-widget-composer-transition":"sR_mOW_fullscreen-widget-composer-transition","pinned-widget":"sR_mOW_pinned-widget"},Zht=({role:t,gizmo:e})=>{const n=te();function s(){switch(t){case dt.User:return n.formatMessage({id:"3DStaP",defaultMessage:"You said:"});case dt.Assistant:return e?n.formatMessage({id:"ptfwNc",defaultMessage:"{author} said:"},{author:e.gizmo.display.name}):n.formatMessage({id:"LDIn6l",defaultMessage:"ChatGPT said:"});default:return""}}const o=t===dt.Assistant?"h6":"h5";return i.jsx(o,{className:"sr-only",children:s()})};function gVe(t){let e={done:!1},n;const s=d7(async()=>{try{try{for(var o=Ao(t()),r,a,l;r=!(a=await o.next()).done;r=!1){const c=a.value;e={value:c,done:!1},n==null||n()}}catch(a){l=[a]}finally{try{r&&(a=o.return)&&await a.call(o)}finally{if(l)throw l[0]}}e=G(N({},e),{done:!0}),n==null||n()}catch(c){e={error:c instanceof Error?c:new Error(String(c)),done:!0},n==null||n()}});return Object.assign(x3(()=>e,o=>(n=o,s(),()=>{n=void 0})),{prefetch:s})}const hVe=kR(t=>gVe(function(){return po(this,null,function*(){const e=H1("".concat(mc,"/bazaar/transparency"),{method:"POST",headers:G(N({},fd({isAuthOptional:!0})),{"Content-Type":"application/json"}),body:{ads_request_id:t.ads_request_id,ad_data_tokens:t.ads.map(l=>l.ad_data_token)}});let n={};try{for(var s=Ao(jw(e)),o,r,a;o=!(r=yield new dn(s.next())).done;o=!1){const l=r.value;"data"in l&&(n=N(N({},n),l.data),yield n)}}catch(r){a=[r]}finally{try{o&&(r=s.return)&&(yield new dn(r.call(s)))}finally{if(a)throw a[0]}}})}),t=>t.ads_request_id),_Ve=(t,e)=>{const n=e.ads[0].advertiser_brand.name,s=t.formatMessage({id:"bazaar.ad.askChatGpt.targetLabel",defaultMessage:"{advertiser} sponsored ad"},{advertiser:n}),o=JSON.stringify(e),r="The user is referring to a ".concat(n," sponsored ad.\n").concat(o);return{type:"object",label:s,createNewCompletionParams:a=>{var l;return G(N({},a),{promptMessage:vi(a.promptMessage,{metadata:{targeted_reply_label:s}}),appendMessages:[...(l=a.appendMessages)!=null?l:[],Hee(r,{exclude_after_next_user_message:!0})]})}}},j0=B3((t,e)=>({current:[]})),xVe=B3((t,e)=>Gs(()=>LW(t,"ads-hidden",e))),yVe=B3((t,e)=>Gs(()=>LW(t,"ads-reported",e)));function LW(t,e,n){return En({queryKey:["bazaar/feedback",e,n],queryFn:()=>ue.safePost("/bazaar/feedback-form",{authOption:Ot.SendIfAvailable,requestBody:{type:e,ads_request_id:n,impressed_ad_data_tokens:j0(t,n).current.map(s=>s.ad_data_token)}})})}function bVe(t,e,n,s){ue.safePost("/bazaar/feedback-form/submit",{authOption:Ot.SendIfAvailable,requestBody:{type:e,ads_request_id:n,feedback_option_id:s,impressed_ad_data_tokens:j0(t,n).current.map(o=>o.ad_data_token)}})}const vVe=Bn(t=>yt(()=>{const e=N3(t),n=ve.getTree(e);let s=n.getNodeIfExists(ve.getCurrentLeafId(e));for(;s;){const o=ve.getParentPromptNode(e,s.id);if(o){const r=_w(o.message.id)();if(r&&r.ads_content&&r.ads_content.ads.length>0)return r.ads_content.ads_request_id}s=n.getNodeIfExists(s.parentId)}})),C6=Sa(Ie.BazaarOnboardingImpressionCount,()=>0);function dm(){const t=mn("4154380906");return{impressionCount:t.get("impression_count",10),screenTrustImageUrl:t.get("screen_trust_image_url"),screenPrivacyImageUrl:t.get("screen_privacy_image_url"),screenPersonalizationImageUrl:t.get("screen_personalization_image_url"),screenTransparencyImageUrl:t.get("screen_transparency_image_url")}}const SVe="https://help.openai.com/articles/20001047-ads-in-chatgpt",CVe=re(me,"b97717",20,20),wVe=re(me,"c1e6c4",20,20);function DW(t){const{title:e,children:n,className:s,primaryButton:o,secondaryButton:r,footerContent:a,showCloseButton:l=!1,onClose:c,testId:u,headerAccessory:d,description:f,icon:m,isOpen:p=!1,contentSheetViewClassName:g,headerClassName:h,contentClassName:_,footerClassName:x,contentSize:b="fill",handle:y="auto",topMargin:S,shouldIgnoreClickOutside:C=!1,fullBleed:w=!1}=t,[k,E]=v.useState(p);v.useEffect(()=>{E(p)},[p]);const T=A=>{E(A),A||setTimeout(()=>{M()},300)},M=()=>{c==null||c(!0)};return i.jsx(or.Root,{presented:k,onPresentedChange:T,"data-testid":u,children:i.jsx(or.Portal,{children:i.jsxs(or.View,{className:g,onCloseComplete:M,onClickOutside:{dismiss:!C},children:[i.jsx(or.Backdrop,{"data-modal-layer":"overlay"}),i.jsxs(or.Content,{size:b,className:s,handle:y,topMargin:S,children:[i.jsxs(or.HeaderBar,{className:h,children:[m&&i.jsx("span",{className:"me-2",children:typeof m!="function"?m:i.jsx(m,{className:q("icon",f&&"mt-1"),"aria-label":""})}),i.jsx(or.Title,{children:e}),d&&i.jsx("span",{className:"ms-2",children:d}),l&&i.jsx(or.DismissAction,{onClick:()=>E(!1),as:Wn})]}),f&&i.jsx("div",{className:"text-token-text-secondary px-4 pb-2 text-sm",children:f}),i.jsx(or.ScrollRoot,{children:i.jsx(or.ContentSection,{fullBleed:w,className:_,children:n})}),(o||r||a)&&i.jsxs(or.FooterBar,{className:q("keyboard-open:fixed keyboard-open:bottom-[var(--screen-keyboard-height,0)] keyboard-open:start-3 keyboard-open:end-3 keyboard-open:z-50 keyboard-open:w-auto! keyboard-open:-translate-y-2 not:keyboard-open:pb-[env(safe-area-inset-bottom,0px)]",x),children:[a,r,o]})]})]})})})}const Qht=Object.freeze(Object.defineProperty({__proto__:null,ContentModalSheet:DW},Symbol.toStringTag,{value:"Module"})),kVe="/cdn/assets/fallback-header-iqor89us.webp",EVe={src:kVe};var fm=(t=>(t[t.ANSWERS_TRUST=0]="ANSWERS_TRUST",t[t.DATA_PRIVATE=1]="DATA_PRIVATE",t[t.PRIVATELY_PERSONALIZED=2]="PRIVATELY_PERSONALIZED",t[t.TRANSPARENCY_CONTROL=3]="TRANSPARENCY_CONTROL",t))(fm||{});const Jht=t=>{"use forget";const e=D.c(71),{onClose:n,onUpsellClick:s,onSettingsClick:o,onViewStep:r}=t;let a;e[0]!==r?(a=()=>r==null?void 0:r(0),e[0]=r,e[1]=a):a=e[1];let l;e[2]===Symbol.for("react.memo_cache_sentinel")?(l=dm(),e[2]=l):l=e[2];let c,u;e[3]===Symbol.for("react.memo_cache_sentinel")?(c=i.jsx(P,{id:"u7QO7k",defaultMessage:"Answers you can trust"}),u=i.jsx(P,{id:"GeyWOx",defaultMessage:"We dont let advertisers influence what ChatGPT says. When we do show ads, theyre always separate and labeled."}),e[3]=c,e[4]=u):(c=e[3],u=e[4]);let d;e[5]!==a?(d=i.jsx(Oh,{onViewStep:a,headerImage:l.screenTrustImageUrl,title:c,description:u},0),e[5]=a,e[6]=d):d=e[6];let f;e[7]!==r?(f=()=>r==null?void 0:r(1),e[7]=r,e[8]=f):f=e[8];let m;e[9]===Symbol.for("react.memo_cache_sentinel")?(m=dm(),e[9]=m):m=e[9];let p,g;e[10]===Symbol.for("react.memo_cache_sentinel")?(p=i.jsx(P,{id:"jX41Yh",defaultMessage:"Your data stays private"}),g=i.jsx(P,{id:"AhTZRz",defaultMessage:"Advertisers never see your chats, history, memories, or personal details."}),e[10]=p,e[11]=g):(p=e[10],g=e[11]);let h;e[12]===Symbol.for("react.memo_cache_sentinel")?(h=i.jsx(Io,{className:"text-token-text-tertiary",icon:ms,children:i.jsx(P,{id:"MKbfJd",defaultMessage:"Chats and history"})}),e[12]=h):h=e[12];let _;e[13]===Symbol.for("react.memo_cache_sentinel")?(_=i.jsx(Io,{className:"text-token-text-tertiary",icon:ms,children:i.jsx(P,{id:"C4XnJ3",defaultMessage:"Memories"})}),e[13]=_):_=e[13];let x;e[14]===Symbol.for("react.memo_cache_sentinel")?(x=i.jsx(Io,{className:"text-token-text-tertiary",icon:ms,children:i.jsx(P,{id:"H1HXoQ",defaultMessage:"Name, Email"})}),e[14]=x):x=e[14];let b;e[15]===Symbol.for("react.memo_cache_sentinel")?(b=i.jsx(Io,{className:"text-token-text-tertiary",icon:ms,children:i.jsx(P,{id:"78KyGt",defaultMessage:"Location, IP address"})}),e[15]=b):b=e[15];let y;e[16]===Symbol.for("react.memo_cache_sentinel")?(y=i.jsx(Io,{icon:Pr,children:i.jsx(P,{id:"C1U4te",defaultMessage:"Aggregate ad view and click counts"})}),e[16]=y):y=e[16];let S;e[17]!==f?(S=i.jsxs(Oh,{onViewStep:f,headerImage:m.screenPrivacyImageUrl,title:p,description:g,children:[h,_,x,b,y]},1),e[17]=f,e[18]=S):S=e[18];let C;e[19]!==r?(C=()=>r==null?void 0:r(2),e[19]=r,e[20]=C):C=e[20];let w;e[21]===Symbol.for("react.memo_cache_sentinel")?(w=dm(),e[21]=w):w=e[21];let k;e[22]===Symbol.for("react.memo_cache_sentinel")?(k=i.jsx(P,{id:"wJexvp",defaultMessage:"What shapes the ads you see"}),e[22]=k):k=e[22];let E;e[23]!==o?(E=i.jsx(P,{id:"cvScNt",defaultMessage:"Youll get relevant ads using information that stays only on ChatGPT. Manage personalization anytime in <link>settings</link>.",values:{link:he=>i.jsx("span",{onClick:o,onKeyDown:Ee=>{(Ee.key==="Enter"||Ee.key===" ")&&(o==null||o())},className:"hover:text-token-text-primary cursor-pointer underline",role:"link",tabIndex:0,children:he})}}),e[23]=o,e[24]=E):E=e[24];let T;e[25]===Symbol.for("react.memo_cache_sentinel")?(T=i.jsx(Io,{icon:Gp,children:i.jsx(P,{id:"vyUeZ8",defaultMessage:"What youre discussing now"})}),e[25]=T):T=e[25];let M;e[26]===Symbol.for("react.memo_cache_sentinel")?(M=i.jsx(Io,{icon:wVe,children:i.jsx(P,{id:"9X+Kmt",defaultMessage:"Ads you hide or engage with"})}),e[26]=M):M=e[26];let A;e[27]===Symbol.for("react.memo_cache_sentinel")?(A=i.jsx(Io,{icon:wc,children:i.jsx(P,{id:"S9D6CI",defaultMessage:"Your past chats and memory"})}),e[27]=A):A=e[27];let I;e[28]!==C||e[29]!==E?(I=i.jsxs(Oh,{onViewStep:C,headerImage:w.screenPersonalizationImageUrl,title:k,description:E,children:[T,M,A]},2),e[28]=C,e[29]=E,e[30]=I):I=e[30];let j;e[31]!==r?(j=()=>r==null?void 0:r(3),e[31]=r,e[32]=j):j=e[32];let R;e[33]===Symbol.for("react.memo_cache_sentinel")?(R=dm(),e[33]=R):R=e[33];let O;e[34]===Symbol.for("react.memo_cache_sentinel")?(O=i.jsx(P,{id:"TZ5hXX",defaultMessage:"Transparency and control"}),e[34]=O):O=e[34];let L;e[35]===Symbol.for("react.memo_cache_sentinel")?(L=i.jsx(P,{id:"QFJ7RI",defaultMessage:"Youre in control of the ads you see and how your data is used. <link>Learn more</link>",values:{link:MVe}}),e[35]=L):L=e[35];let B;e[36]===Symbol.for("react.memo_cache_sentinel")?(B=i.jsx(Io,{icon:nk,children:i.jsx(P,{id:"YDoeRV",defaultMessage:"Hide ads youre not interested in"})}),e[36]=B):B=e[36];let U;e[37]===Symbol.for("react.memo_cache_sentinel")?(U=i.jsx(Io,{icon:kr,children:i.jsx(P,{id:"PLNAzK",defaultMessage:"See why an ad was shown to you"})}),e[37]=U):U=e[37];let H;e[38]===Symbol.for("react.memo_cache_sentinel")?(H=i.jsx(Io,{icon:yi,children:i.jsx(P,{id:"lOimhT",defaultMessage:"Delete your ad data anytime"})}),e[38]=H):H=e[38];let $;e[39]!==s?($=i.jsx(Io,{icon:CVe,children:i.jsx(P,{id:"zaMBO4",defaultMessage:"Go ad-free with <link>ChatGPT Plus</link>",values:{link:he=>i.jsx("span",{onClick:s,onKeyDown:Ee=>{(Ee.key==="Enter"||Ee.key===" ")&&(s==null||s())},className:"hover:text-token-text-primary cursor-pointer underline",role:"link",tabIndex:0,children:he})}})}),e[39]=s,e[40]=$):$=e[40];let F;e[41]!==j||e[42]!==$?(F=i.jsxs(Oh,{onViewStep:j,headerImage:R.screenTransparencyImageUrl,title:O,description:L,children:[B,U,H,$]},3),e[41]=j,e[42]=$,e[43]=F):F=e[43];let z;e[44]!==S||e[45]!==I||e[46]!==F||e[47]!==d?(z=[d,S,I,F],e[44]=S,e[45]=I,e[46]=F,e[47]=d,e[48]=z):z=e[48];const W=z,[Y,K]=v.useState(0),Z=W.length,J=Y>=Z-1,[Q,ne]=v.useState(!0);let ie;e[49]!==Y||e[50]!==J||e[51]!==Z?(ie=()=>{if(J){ne(!1);return}const he=Math.min(Y+1,Z-1);K(he)},e[49]=Y,e[50]=J,e[51]=Z,e[52]=ie):ie=e[52];const fe=ie;let ae;e[53]!==Z?(ae=he=>{const Ee=Math.min(Math.max(he,0),Z-1);K(Ee)},e[53]=Z,e[54]=ae):ae=e[54];const le=ae;let pe;e[55]!==J?(pe=J?i.jsx(P,{id:"XWZUuk",defaultMessage:"Done"}):i.jsx(P,{id:"K5S/6O",defaultMessage:"Next"}),e[55]=J,e[56]=pe):pe=e[56];let _e;e[57]!==fe||e[58]!==pe?(_e=i.jsx($ee.Root,{timing:"present",asChild:!0,children:i.jsx(Se,{size:"large",onClick:fe,children:pe})}),e[57]=fe,e[58]=pe,e[59]=_e):_e=e[59];let Ce;e[60]===Symbol.for("react.memo_cache_sentinel")?(Ce=i.jsx(Wn,{className:"absolute end-2 top-2",onClick:()=>ne(!1)}),e[60]=Ce):Ce=e[60];const ge=W[Y];let Re;e[61]!==Y||e[62]!==le||e[63]!==W.length?(Re=i.jsx(TVe,{count:W.length,activeIndex:Y,onSelect:le}),e[61]=Y,e[62]=le,e[63]=W.length,e[64]=Re):Re=e[64];let ke;return e[65]!==Q||e[66]!==n||e[67]!==_e||e[68]!==ge||e[69]!==Re?(ke=i.jsxs(DW,{testId:"modal-bazaar-onboarding",isOpen:Q,contentSize:"fit",onClose:n,className:"grid-rows-[1fr_min-content]! sm:max-w-md",headerClassName:"hidden",footerClassName:"justify-stretch",contentClassName:"relative",fullBleed:!0,handle:!1,footerContent:_e,children:[Ce,ge,Re]}),e[65]=Q,e[66]=n,e[67]=_e,e[68]=ge,e[69]=Re,e[70]=ke):ke=e[70],ke};function Oh(t){"use forget";const e=D.c(20),{onViewStep:n,headerImage:s,title:o,description:r,children:a}=t;let l;e[0]!==n?(l=()=>n(),e[0]=n,e[1]=l):l=e[1];const c=v.useEffectEvent(l);let u;e[2]!==c?(u=()=>c(),e[2]=c,e[3]=u):u=e[3];let d;e[4]===Symbol.for("react.memo_cache_sentinel")?(d=[],e[4]=d):d=e[4],v.useEffect(u,d);const f=s!=null?s:EVe.src;let m;e[5]!==f?(m=i.jsx("div",{className:"h-30 grow",children:i.jsx("img",{src:f,className:"h-full w-full rounded-t-(--sheet-radius-amount) object-cover",alt:""})}),e[5]=f,e[6]=m):m=e[6];let p;e[7]!==o?(p=i.jsx("h3",{className:"text-xl font-medium",children:o}),e[7]=o,e[8]=p):p=e[8];let g;e[9]!==r?(g=r&&i.jsx("p",{className:"text-token-text-secondary text-center text-base text-balance",children:r}),e[9]=r,e[10]=g):g=e[10];let h;e[11]!==p||e[12]!==g?(h=i.jsxs("div",{className:"grow-0 space-y-2 p-6 pt-12 text-center",children:[p,g]}),e[11]=p,e[12]=g,e[13]=h):h=e[13];let _;e[14]!==a?(_=a&&i.jsx("ul",{className:"text-token-text-secondary m-auto w-fit min-w-4/5 space-y-4 px-6 py-2 text-sm",children:a}),e[14]=a,e[15]=_):_=e[15];let x;return e[16]!==m||e[17]!==h||e[18]!==_?(x=i.jsxs("div",{className:"flex min-h-[min(calc(80vh-4rem),32rem)] flex-col",children:[m,h,_]}),e[16]=m,e[17]=h,e[18]=_,e[19]=x):x=e[19],x}function Io(t){"use forget";const e=D.c(8),{icon:n,className:s,children:o}=t;let r;e[0]!==s?(r=q("flex items-center gap-2",s),e[0]=s,e[1]=r):r=e[1];let a;e[2]!==n?(a=i.jsx(n,{className:"icon"}),e[2]=n,e[3]=a):a=e[3];let l;return e[4]!==o||e[5]!==r||e[6]!==a?(l=i.jsxs("li",{className:r,children:[a,o]}),e[4]=o,e[5]=r,e[6]=a,e[7]=l):l=e[7],l}const TVe=t=>{"use forget";const e=D.c(7),{count:n,activeIndex:s,onSelect:o}=t,r=te();let a;e[0]!==n?(a=Array.from({length:n}),e[0]=n,e[1]=a):a=e[1];let l;return e[2]!==s||e[3]!==r||e[4]!==o||e[5]!==a?(l=i.jsx("div",{className:"mt-6 mb-2 flex items-center justify-center gap-2",children:a.map((c,u)=>i.jsx("button",{type:"button",className:q("h-2 w-2 rounded-full transition-colors",s===u?"bg-black dark:bg-white":"bg-token-bg-tertiary"),"aria-label":r.formatMessage({id:"/WtnCk",defaultMessage:"Go to section {sectionIndex}"},{sectionIndex:u+1}),onClick:()=>o(u)},u))}),e[2]=s,e[3]=r,e[4]=o,e[5]=a,e[6]=l):l=e[6],l};function MVe(t){return i.jsx(ko,{to:SVe,target:"_blank",className:"hover:text-token-text-primary cursor-pointer underline",children:t})}const BW=t=>{"use forget";var h;const e=D.c(14),{brand:n,className:s}=t;let o;e[0]!==n.url?(o=AVe(n.url),e[0]=n.url,e[1]=o):o=e[1];const r=o,a=(h=n.favicon_url)!=null?h:r,l=a===r;let c;e[2]!==a||e[3]!==l?(c={src:a,isFallback:l},e[2]=a,e[3]=l,e[4]=c):c=e[4];const[u,d]=v.useState(c),{isLoading:f}=gE(u.src);let m;e[5]!==r||e[6]!==u.isFallback||e[7]!==u.src?(m=()=>{!u.isFallback&&r&&u.src!==r?d({src:r,isFallback:!0}):d({isFallback:!0})},e[5]=r,e[6]=u.isFallback,e[7]=u.src,e[8]=m):m=e[8];const p=m;let g;return e[9]!==s||e[10]!==p||e[11]!==f||e[12]!==u.src?(g=f?i.jsx("div",{className:q("border-token-border-subtle bg-token-bg-tertiary pointer-events-none rounded-full border select-none",s)}):u.src&&i.jsx("div",{className:q("pointer-events-none select-none",s),children:i.jsx("img",{src:u.src,alt:"",inert:!0,"aria-hidden":"true",className:"h-full w-full object-cover",onError:p})}),e[9]=s,e[10]=p,e[11]=f,e[12]=u.src,e[13]=g):g=e[13],g};function AVe(t){try{const e=new URL(t);return"".concat(e.origin,"/favicon.ico")}catch(e){}}const NVe=t=>{"use forget";var d;const e=D.c(19);let n,s,o,r;e[0]!==t?(d=t,{onClick:r,className:s,children:n}=d,o=De(d,["onClick","className","children"]),e[0]=t,e[1]=n,e[2]=s,e[3]=o,e[4]=r):(n=e[1],s=e[2],o=e[3],r=e[4]);let a;e[5]!==s?(a=q("hover:bg-token-interactive-bg-secondary-hover active:bg-token-interactive-bg-secondary-press focus-visible:bg-token-interactive-bg-secondary-hover bg-token-bg-tertiary flex w-full cursor-pointer items-start justify-between gap-4 rounded-3xl p-4 text-base select-none",s),e[5]=s,e[6]=a):a=e[6];let l;e[7]!==o||e[8]!==r?(l=f=>{var m;(m=o.onKeyDown)==null||m.call(o,f),f.key==="Enter"&&!f.defaultPrevented&&r&&r(f)},e[7]=o,e[8]=r,e[9]=l):l=e[9];let c;e[10]!==o?(c=f=>{var m;(m=o.onFocus)==null||m.call(o,f),f.currentTarget===f.target&&f.currentTarget.scrollIntoView({behavior:"smooth",block:"nearest",inline:"nearest"})},e[10]=o,e[11]=c):c=e[11];let u;return e[12]!==n||e[13]!==o||e[14]!==r||e[15]!==a||e[16]!==l||e[17]!==c?(u=i.jsx("div",G(N({},o),{role:"link",tabIndex:0,className:a,onClick:r,onKeyDown:l,onFocus:c,children:n})),e[12]=n,e[13]=o,e[14]=r,e[15]=a,e[16]=l,e[17]=c,e[18]=u):u=e[18],u};function w6(t,e){"use no forget";const n=_s(t!=null?t:uo),[s]=v.useState(()=>o=>{if(o)return IVe(o,n,e)});return s}function IVe(t,e,{threshold:n=.5,dwellTimeMs:s=1e3,once:o=!0}={}){let r=!1,a;const l=new IntersectionObserver(d=>{for(const f of d){const m=f.intersectionRatio>=n;!m&&r?(clearTimeout(a),a=void 0):m&&!r&&(a!=null||(a=setTimeout(u,s))),r=m}},{threshold:n}),c=()=>{l.disconnect(),clearTimeout(a),a=void 0},u=()=>{r&&(o&&c(),e())};return l.observe(t),c}const jVe=t=>{"use forget";const e=D.c(23),{ad:n,showBrand:s,onAppear:o,onView:r,onHover:a,onClick:l}=t,c=w6(r);let u;e[0]===Symbol.for("react.memo_cache_sentinel")?(u={threshold:.01,dwellTimeMs:0},e[0]=u):u=e[0];const d=w6(o,u),f=T7(c,d);let m;e[1]!==l?(m=S=>{S.defaultPrevented||l==null||l()},e[1]=l,e[2]=m):m=e[2];let p;e[3]!==n.advertiser_brand||e[4]!==s?(p=s&&i.jsxs("div",{className:"text-token-text-secondary mb-1 flex items-center gap-1.5 text-sm",children:[i.jsx(BW,{brand:n.advertiser_brand,className:"relative flex h-5 w-5 shrink-0 items-center justify-center overflow-hidden rounded-full"}),i.jsx("span",{className:"truncate",children:n.advertiser_brand.name})]}),e[3]=n.advertiser_brand,e[4]=s,e[5]=p):p=e[5];let g;e[6]!==n.title?(g=i.jsx("span",{className:"font-medium",children:n.title}),e[6]=n.title,e[7]=g):g=e[7];let h;e[8]!==n.body?(h=i.jsx("p",{className:"line-clamp-2",children:n.body}),e[8]=n.body,e[9]=h):h=e[9];let _;e[10]!==p||e[11]!==g||e[12]!==h?(_=i.jsxs("div",{className:"flex flex-col",children:[p,g,h]}),e[10]=p,e[11]=g,e[12]=h,e[13]=_):_=e[13];const x=s?"h-22":"h-18";let b;e[14]!==n.image_url||e[15]!==x?(b=i.jsx(PVe,{src:n.image_url,className:x}),e[14]=n.image_url,e[15]=x,e[16]=b):b=e[16];let y;return e[17]!==a||e[18]!==f||e[19]!==m||e[20]!==_||e[21]!==b?(y=i.jsxs(NVe,{onPointerEnter:a,onClick:m,ref:f,children:[_,b]}),e[17]=a,e[18]=f,e[19]=m,e[20]=_,e[21]=b,e[22]=y):y=e[22],y};function PVe(t){"use forget";const e=D.c(5),{src:n,className:s}=t,{isSuccess:o,isLoading:r}=gE(n),a=o&&n!=null;let l;return e[0]!==s||e[1]!==r||e[2]!==a||e[3]!==n?(l=a?i.jsx("img",{src:n,className:q("aspect-square rounded-lg bg-white object-contain",s),alt:""}):r?i.jsx("div",{className:q("bg-token-bg-secondary aspect-square rounded-lg object-contain",s)}):null,e[0]=s,e[1]=r,e[2]=a,e[3]=n,e[4]=l):l=e[4],l}const RVe=re(me,"6b1f51",20,20,!0),OVe=t=>{"use forget";var l;const e=D.c(10);let n,s,o;e[0]!==t?(l=t,{className:s,children:n}=l,o=De(l,["className","children"]),e[0]=t,e[1]=n,e[2]=s,e[3]=o):(n=e[1],s=e[2],o=e[3]);let r;e[4]!==s?(r=q("border-token-border-default mt-2 border-t py-4",s),e[4]=s,e[5]=r):r=e[5];let a;return e[6]!==n||e[7]!==o||e[8]!==r?(a=i.jsx("div",G(N({className:r},o),{children:n})),e[6]=n,e[7]=o,e[8]=r,e[9]=a):a=e[9],a},LVe=t=>{"use forget";const e=D.c(9),{label:n,onClick:s,onIntent:o,className:r}=t;let a;e[0]!==r?(a=q("text-token-text-tertiary",r),e[0]=r,e[1]=a):a=e[1];let l;e[2]!==s||e[3]!==o||e[4]!==a?(l=i.jsx(Wn,{onIntent:o,onClick:s,className:a}),e[2]=s,e[3]=o,e[4]=a,e[5]=l):l=e[5];let c;return e[6]!==n||e[7]!==l?(c=i.jsx(St,{triggerAs:null,side:"left",label:n,children:l}),e[6]=n,e[7]=l,e[8]=c):c=e[8],c},DVe="xuHWuq_carousel",BVe={carousel:DVe},FVe=t=>{"use forget";const e=D.c(62),{children:n,sponsorBrand:s,preamble:o,onAboutClick:r,onAboutPreclick:a,onMenuOpen:l,onHideClick:c,onHidePreclick:u,onReportClick:d,onReportPreclick:f,onAskChatGptClick:m,onEmployeeFeedbackClick:p,supportsSideBySide:g,supportsActionMenu:h}=t,_=g===void 0?!1:g,x=h===void 0?!0:h,b=te();let y,S,C,w,k;if(e[0]!==n||e[1]!==b||e[2]!==r||e[3]!==a||e[4]!==m||e[5]!==p||e[6]!==c||e[7]!==u||e[8]!==l||e[9]!==d||e[10]!==f||e[11]!==o||e[12]!==s||e[13]!==x||e[14]!==_){const M=v.Children.toArray(n);let A;e[20]===Symbol.for("react.memo_cache_sentinel")?(A=i.jsx(P,{id:"bazaar.ad.tooltip.remove",defaultMessage:"Hide this ad"}),e[20]=A):A=e[20];const I=A,j=s?"font-normal":"font-medium";let R;e[21]!==j?(R=q("text-base",j),e[21]=j,e[22]=R):R=e[22];let O;e[23]===Symbol.for("react.memo_cache_sentinel")?(O=i.jsx(P,{id:"bazaar.ad.sponsored",defaultMessage:"Sponsored"}),e[23]=O):O=e[23];let L;e[24]!==R?(L=i.jsx("h3",{className:R,children:O}),e[24]=R,e[25]=L):L=e[25];const B=L;let U;e[26]!==r||e[27]!==a||e[28]!==B||e[29]!==x?(U=x?B:i.jsx(St,{triggerAs:null,side:"right",label:i.jsx(P,{id:"bazaar.ad.tooltip.why",defaultMessage:"Why am I seeing this ad?"}),children:i.jsx(R7,{onIntent:a,children:i.jsxs("button",{className:"group flex items-center gap-1.5",onClick:r,children:[B,i.jsx(kr,{className:"icon text-token-text-tertiary group-hover:text-token-text-primary"})]})})}),e[26]=r,e[27]=a,e[28]=B,e[29]=x,e[30]=U):U=e[30];const H=U;y=OVe;let $;e[31]!==s||e[32]!==H?($=s?i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(BW,{brand:s,className:"relative flex h-10 w-10 shrink-0 items-center justify-center overflow-hidden rounded-full"}),i.jsxs("div",{children:[i.jsx("span",{className:"font-medium",children:s.name}),H]})]}):H,e[31]=s,e[32]=H,e[33]=$):$=e[33];let F;e[34]!==b||e[35]!==r||e[36]!==a||e[37]!==m||e[38]!==p||e[39]!==c||e[40]!==u||e[41]!==l||e[42]!==d||e[43]!==f||e[44]!==x?(F=x?i.jsxs(Xo,{contentAlign:"end",sideOffset:4,onOpenChange:Y=>{Y&&(l==null||l())},triggerButton:i.jsx("button",{className:"text-token-icon-secondary hover:bg-token-surface-hover keyboard-focused:bg-token-surface-hover -m-1 -me-2 flex h-9 w-9 items-center justify-center rounded-lg","aria-label":b.formatMessage({id:"1zubG6",defaultMessage:"Ad options"}),children:i.jsx($s,{className:"icon"})}),children:[i.jsx(ee.Item,{onIntent:u,onClick:c,icon:nk,label:I}),i.jsx(ee.Item,{onIntent:a,onClick:r,icon:kr,label:i.jsx(P,{id:"bazaar.ad.action.about",defaultMessage:"About this ad"})}),m&&i.jsx(ee.Item,{onClick:m,icon:RVe,label:i.jsx(P,{id:"bazaar.ad.action.askChatGpt",defaultMessage:"Ask ChatGPT"})}),i.jsx(ee.Item,{onIntent:f,onClick:d,icon:W_,label:i.jsx(P,{id:"bazaar.ad.action.report",defaultMessage:"Report this ad"})}),!1]}):i.jsx(LVe,{label:I,onIntent:u,onClick:c,className:"-m-1 -me-2"}),e[34]=b,e[35]=r,e[36]=a,e[37]=m,e[38]=p,e[39]=c,e[40]=u,e[41]=l,e[42]=d,e[43]=f,e[44]=x,e[45]=F):F=e[45],e[46]!==$||e[47]!==F?(k=i.jsxs("div",{className:"flex items-start justify-between gap-3 select-none",children:[$,F]}),e[46]=$,e[47]=F,e[48]=k):k=e[48];const z=o?"mt-1":"mt-4",W=_&&M.length===1&&"@w-sm/main:flex-row @w-sm/main:gap-2.5";e[49]!==z||e[50]!==W?(S=q("flex flex-col justify-between gap-2.5",z,W),e[49]=z,e[50]=W,e[51]=S):S=e[51],e[52]!==o?(C=o&&i.jsx(Cr,{className:"text-token-text-secondary select-none *:first:m-0 hover:select-text",children:o}),e[52]=o,e[53]=C):C=e[53],w=M.length===1?i.jsx("div",{className:"max-w-[360px] min-w-[300px]",children:M[0]}):i.jsx("div",{className:"relative",children:i.jsx("div",{className:q("touch:[scrollbar-width:none] -mb-4 flex snap-x snap-mandatory items-stretch gap-3 overflow-x-auto pb-4 @max-[43rem]/main:-mx-(--thread-content-margin) @max-[43rem]/main:px-(--thread-content-margin)",BVe.carousel),children:M.map(UVe)})}),e[0]=n,e[1]=b,e[2]=r,e[3]=a,e[4]=m,e[5]=p,e[6]=c,e[7]=u,e[8]=l,e[9]=d,e[10]=f,e[11]=o,e[12]=s,e[13]=x,e[14]=_,e[15]=y,e[16]=S,e[17]=C,e[18]=w,e[19]=k}else y=e[15],S=e[16],C=e[17],w=e[18],k=e[19];let E;e[54]!==S||e[55]!==C||e[56]!==w?(E=i.jsxs("div",{className:S,children:[C,w]}),e[54]=S,e[55]=C,e[56]=w,e[57]=E):E=e[57];let T;return e[58]!==y||e[59]!==k||e[60]!==E?(T=i.jsxs(y,{children:[k,E]}),e[58]=y,e[59]=k,e[60]=E,e[61]=T):T=e[61],T};function UVe(t,e){return i.jsx("div",{className:q("@w-lg/main:min-w-[360px] min-w-[min(360px,94%)] flex-1 snap-start *:first:h-full @max-[43rem]/main:scroll-m-(--thread-content-margin) @[43rem]/main:min-w-[300px]"),children:t},e)}const k6=je(()=>Me(()=>import("./d95bd425-cbpyjzbt77clfevu.js"),__vite__mapDeps([334,1,2,3])).then(t=>t.BazaarTransparencyModal)),Db=je(()=>Me(()=>import("./91a29933-ivmsbe2hd92fekit.js"),__vite__mapDeps([335,1,2,3])).then(t=>t.BazaarFeedbackFlow)),HVe=je(()=>Me(()=>import("./da745ebf-h5wh5a3iuz002lou.js"),__vite__mapDeps([336,1,2,3])).then(t=>t.BazaarOnboarding)),$Ve=t=>{"use forget";const e=D.c(67),{content:n,aboutAd$:s,hideFeedbackOptions$:o,reportFeedbackOptions$:r,isHidden:a,onAdAppear:l,onAdView:c,onAdHover:u,onAdClick:d,onAboutClick:f,onAboutPreclick:m,onAboutLearnMoreClick:p,onAboutGoAdFreeClick:g,onMenuOpen:h,onHideClick:_,onHidePreclick:x,onReportClick:b,onReportPreclick:y,onAskChatGptClick:S,onEmployeeFeedbackClick:C,onFeedbackSubmit:w,onUpsellClick:k,onSettingsClick:E,supportsSideBySide:T,supportsActionMenu:M,showPerAdBrand:A,hidePreamble:I,showOnboarding:j,onOnboardingClick:R,onOnboardingImpression:O,onOnboardingViewStep:L}=t,B=a===void 0?!1:a,U=A===void 0?!1:A,[H,$]=v.useState();if(H){const _e=H==="ads-hidden"?o:r;let Ce;e[0]!==b?(Ce=()=>{$("ads-reported"),b==null||b()},e[0]=b,e[1]=Ce):Ce=e[1];let ge;return e[2]!==w||e[3]!==k||e[4]!==H||e[5]!==_e||e[6]!==Ce?(ge=i.jsx(Db,{type:H,feedbackOptions$:_e,onFeedbackSubmit:w,onUpsellClick:k,onReportClick:Ce}),e[2]=w,e[3]=k,e[4]=H,e[5]=_e,e[6]=Ce,e[7]=ge):ge=e[7],ge}if(B||n.ads.length===0)return null;const F=U?void 0:n.ads[0].advertiser_brand;let z;e[8]!==n.ads||e[9]!==U||e[10]!==(F==null?void 0:F.name)?(z=U?n.ads:n.ads.filter(_e=>_e.advertiser_brand.name===(F==null?void 0:F.name)),e[8]=n.ads,e[9]=U,e[10]=F==null?void 0:F.name,e[11]=z):z=e[11];const W=z;if(W.length===0)return null;const Y=I||j?void 0:n.preamble;let K;e[12]!==s||e[13]!==W||e[14]!==f||e[15]!==g||e[16]!==p||e[17]!==k?(K=()=>{rt(k6,{ads:W,aboutAd$:s,onLearnMoreClick:p,onGoAdFreeClick:g,onUpsellClick:()=>k==null?void 0:k("ads-about-modal")}),f==null||f()},e[12]=s,e[13]=W,e[14]=f,e[15]=g,e[16]=p,e[17]=k,e[18]=K):K=e[18];let Z;e[19]!==m?(Z=()=>{k6.prefetch(),m==null||m()},e[19]=m,e[20]=Z):Z=e[20];let J;e[21]!==_?(J=()=>{$("ads-hidden"),_==null||_()},e[21]=_,e[22]=J):J=e[22];let Q;e[23]!==x?(Q=()=>{Db.prefetch(),x==null||x()},e[23]=x,e[24]=Q):Q=e[24];let ne;e[25]!==b?(ne=()=>{$("ads-reported"),b==null||b()},e[25]=b,e[26]=ne):ne=e[26];let ie;e[27]!==y?(ie=()=>{Db.prefetch(),y==null||y()},e[27]=y,e[28]=ie):ie=e[28];let fe;if(e[29]!==W||e[30]!==l||e[31]!==d||e[32]!==u||e[33]!==c||e[34]!==U){let _e;e[36]!==l||e[37]!==d||e[38]!==u||e[39]!==c||e[40]!==U?(_e=Ce=>i.jsx(jVe,{ad:Ce,showBrand:U,onAppear:()=>l==null?void 0:l(Ce),onView:()=>c==null?void 0:c(Ce),onHover:()=>u==null?void 0:u(Ce),onClick:()=>d==null?void 0:d(Ce)},Ce.ad_instance_id),e[36]=l,e[37]=d,e[38]=u,e[39]=c,e[40]=U,e[41]=_e):_e=e[41],fe=W.map(_e),e[29]=W,e[30]=l,e[31]=d,e[32]=u,e[33]=c,e[34]=U,e[35]=fe}else fe=e[35];let ae;e[42]!==S||e[43]!==C||e[44]!==h||e[45]!==F||e[46]!==M||e[47]!==T||e[48]!==ie||e[49]!==fe||e[50]!==Y||e[51]!==K||e[52]!==Z||e[53]!==J||e[54]!==Q||e[55]!==ne?(ae=i.jsx(FVe,{sponsorBrand:F,preamble:Y,onAboutClick:K,onAboutPreclick:Z,onMenuOpen:h,onHideClick:J,onHidePreclick:Q,onReportClick:ne,onReportPreclick:ie,onAskChatGptClick:S,onEmployeeFeedbackClick:C,supportsSideBySide:T,supportsActionMenu:M,children:fe}),e[42]=S,e[43]=C,e[44]=h,e[45]=F,e[46]=M,e[47]=T,e[48]=ie,e[49]=fe,e[50]=Y,e[51]=K,e[52]=Z,e[53]=J,e[54]=Q,e[55]=ne,e[56]=ae):ae=e[56];let le;e[57]!==R||e[58]!==O||e[59]!==L||e[60]!==E||e[61]!==k||e[62]!==j?(le=j&&i.jsx(HVe,{onClick:R,onImpression:O,onUpsellClick:()=>k==null?void 0:k("ads-onboarding"),onSettingsClick:E,onViewStep:L}),e[57]=R,e[58]=O,e[59]=L,e[60]=E,e[61]=k,e[62]=j,e[63]=le):le=e[63];let pe;return e[64]!==ae||e[65]!==le?(pe=i.jsxs(i.Fragment,{children:[ae,le]}),e[64]=ae,e[65]=le,e[66]=pe):pe=e[66],pe},E6=Bn(()=>st({})),Xht=t=>{"use forget";const e=D.c(78),{conversation:n,userMessageId:s}=t,o=te(),r=bt(),{setTargetedContent:a}=vf();let l;e[0]!==s?(l=()=>{var Pe;return(Pe=_w(s))==null?void 0:Pe()},e[0]=s,e[1]=l):l=e[1];const c=X(l),u=c==null?void 0:c.ads_content,d=u==null?void 0:u.ads_request_id;let f;e[2]!==n||e[3]!==s?(f=()=>{var Pe;return(Pe=E6(n)[s])!=null?Pe:!1},e[2]=n,e[3]=s,e[4]=f):f=e[4];const m=X(f),{eligible:p}=Ct(We.AdsOnboarding),[g]=v.useState(p);let h;e[5]!==d||e[6]!==n||e[7]!==g?(h=()=>g&&d!=null&&d===vVe(n),e[5]=d,e[6]=n,e[7]=g,e[8]=h):h=e[8];const _=X(h);if(!d||!u)return null;const x=VVe;let b;e[9]!==d||e[10]!==n?(b=Pe=>{j0(n,d).current.push(Pe),ue.safePost("/bazaar/event",{authOption:Ot.SendIfAvailable,requestBody:{action:"impression",ad_data_token:Pe.ad_data_token}})},e[9]=d,e[10]=n,e[11]=b):b=e[11];const y=b,S=zVe,C=WVe;let w;e[12]!==n.serverId$||e[13]!==s?(w=()=>{V.logStructuredEvent(th,{conversationId:Kt(n.serverId$),messageId:s,action:nh.CHATGPT_BAZAAR_PLACEMENT_ACTION_TYPE_CLICK_ABOUT_THIS_AD})},e[12]=n.serverId$,e[13]=s,e[14]=w):w=e[14];const k=w;let E;e[15]!==n.serverId$||e[16]!==s?(E=()=>{V.logStructuredEvent(th,{conversationId:Kt(n.serverId$),messageId:s,action:nh.CHATGPT_BAZAAR_PLACEMENT_ACTION_TYPE_OPEN_MENU})},e[15]=n.serverId$,e[16]=s,e[17]=E):E=e[17];const T=E;let M;e[18]!==d||e[19]!==n||e[20]!==s?(M=Pe=>{E6.set(n,Ae=>G(N({},Ae),{[s]:!0})),Pe==="ads-hidden"&&V.logStructuredEvent(th,{conversationId:Kt(n.serverId$),messageId:s,action:nh.CHATGPT_BAZAAR_PLACEMENT_ACTION_TYPE_CLICK_HIDE_AD}),ue.safePost("/bazaar/signal-event",{authOption:Ot.SendIfAvailable,requestBody:{action:Pe==="ads-hidden"?"ads-hidden":"ads-reported",ads_request_id:d,impressed_ad_data_tokens:j0(n,d).current.map(qVe)}})},e[18]=d,e[19]=n,e[20]=s,e[21]=M):M=e[21];const A=M;let I;e[22]!==d||e[23]!==n||e[24]!==s?(I=(Pe,Ae)=>{bVe(n,Pe,d,Ae),V.logStructuredEvent(th,{conversationId:Kt(n.serverId$),messageId:s,action:nh.CHATGPT_BAZAAR_PLACEMENT_ACTION_TYPE_SUBMIT_FEEDBACK})},e[22]=d,e[23]=n,e[24]=s,e[25]=I):I=e[25];const j=I;let R;e[26]!==r?(R=Pe=>{xs(r,Pe)},e[26]=r,e[27]=R):R=e[27];const O=R;let L;e[28]!==r?(L=()=>{r(Fd(Ts.Advertising))},e[28]=r,e[29]=L):L=e[29];const B=L,U=KVe,H=YVe;let $;e[30]!==u||e[31]!==o||e[32]!==a?($=()=>{a(_Ve(o,u))},e[30]=u,e[31]=o,e[32]=a,e[33]=$):$=e[33];const F=$,z=QVe,W=JVe,Y=XVe;let K;e[34]!==u?(K=hVe(u),e[34]=u,e[35]=K):K=e[35];const Z=K;let J;e[36]!==d||e[37]!==n?(J=xVe(n,d),e[36]=d,e[37]=n,e[38]=J):J=e[38];const Q=J;let ne;e[39]!==d||e[40]!==n?(ne=yVe(n,d),e[39]=d,e[40]=n,e[41]=ne):ne=e[41];const ie=ne;let fe;e[42]===Symbol.for("react.memo_cache_sentinel")?(fe=Gee(),e[42]=fe):fe=e[42];const ae=fe,le=u.display_variant==="ungrouped";let pe;e[43]!==Z?(pe=()=>Z.prefetch(),e[43]=Z,e[44]=pe):pe=e[44];let _e;e[45]!==A?(_e=()=>A("ads-hidden"),e[45]=A,e[46]=_e):_e=e[46];let Ce;e[47]!==Q?(Ce=()=>Q.prefetch(),e[47]=Q,e[48]=Ce):Ce=e[48];let ge;e[49]!==A?(ge=()=>A("ads-reported"),e[49]=A,e[50]=ge):ge=e[50];let Re;e[51]!==ie?(Re=()=>ie.prefetch(),e[51]=ie,e[52]=Re):Re=e[52];const ke=ae.askChatGptEnabled?F:void 0;let he;e[53]!==u.ads_request_id||e[54]!==n.serverId$?(he=void 0,e[53]=u.ads_request_id,e[54]=n.serverId$,e[55]=he):he=e[55];let Ee;return e[56]!==Z||e[57]!==u||e[58]!==Q||e[59]!==m||e[60]!==k||e[61]!==y||e[62]!==j||e[63]!==T||e[64]!==B||e[65]!==O||e[66]!==ie||e[67]!==_||e[68]!==g||e[69]!==le||e[70]!==pe||e[71]!==_e||e[72]!==Ce||e[73]!==ge||e[74]!==Re||e[75]!==ke||e[76]!==he?(Ee=i.jsx($Ve,{content:u,aboutAd$:Z,hideFeedbackOptions$:Q,reportFeedbackOptions$:ie,isHidden:m,onAdView:y,onAdAppear:x,onAdHover:S,onAdClick:C,onAboutClick:k,onAboutPreclick:pe,onMenuOpen:T,onHideClick:_e,onHidePreclick:Ce,onReportClick:ge,onReportPreclick:Re,onFeedbackSubmit:j,onUpsellClick:O,onSettingsClick:B,onAboutLearnMoreClick:U,onAboutGoAdFreeClick:H,supportsSideBySide:ae.sideBySide,supportsActionMenu:ae.actionMenu,showPerAdBrand:le,onAskChatGptClick:ke,onEmployeeFeedbackClick:he,hidePreamble:g,showOnboarding:_,onOnboardingClick:W,onOnboardingImpression:z,onOnboardingViewStep:Y}),e[56]=Z,e[57]=u,e[58]=Q,e[59]=m,e[60]=k,e[61]=y,e[62]=j,e[63]=T,e[64]=B,e[65]=O,e[66]=ie,e[67]=_,e[68]=g,e[69]=le,e[70]=pe,e[71]=_e,e[72]=Ce,e[73]=ge,e[74]=Re,e[75]=ke,e[76]=he,e[77]=Ee):Ee=e[77],Ee};function GVe(t){switch(t.target.type){case"url":return window.open(t.target.value,"_blank","noopener,noreferrer");default:return window.open(t.url,"_blank","noopener,noreferrer")}}function VVe(t){ue.safePost("/bazaar/event",{authOption:Ot.SendIfAvailable,requestBody:{action:"appear",ad_data_token:t.ad_data_token}})}function zVe(t){}function WVe(t){GVe(t),ue.safePost("/bazaar/event",{authOption:Ot.SendIfAvailable,requestBody:{action:"click",ad_data_token:t.ad_data_token}})}function qVe(t){return t.ad_data_token}function KVe(){V.logStructuredEvent(O7,{action:L7.ADS_TRANSPARENCY_MODAL_ACTION_TYPE_CLICK_LEARN_MORE})}function YVe(){V.logStructuredEvent(O7,{action:L7.ADS_TRANSPARENCY_MODAL_ACTION_TYPE_CLICK_UPSELL})}function ZVe(t){return t+1}function QVe(){C6.set(ZVe),Kt(C6)>=dm().impressionCount&&kt(We.AdsOnboarding),V.logStructuredEvent(F3,{action:U3.CHATGPT_ADS_ONBOARDING_NUX_ACTION_ENTRYPOINT_SEEN})}function JVe(){kt(We.AdsOnboarding),V.logStructuredEvent(F3,{action:U3.CHATGPT_ADS_ONBOARDING_NUX_ACTION_ENTRYPOINT_CLICKED})}function XVe(t){const e={[fm.ANSWERS_TRUST]:eh.CHATGPT_ADS_ONBOARDING_STEP_ANSWERS_TRUST,[fm.DATA_PRIVATE]:eh.CHATGPT_ADS_ONBOARDING_STEP_DATA_PRIVATE,[fm.PRIVATELY_PERSONALIZED]:eh.CHATGPT_ADS_ONBOARDING_STEP_PRIVATELY_PERSONALIZED,[fm.TRANSPARENCY_CONTROL]:eh.CHATGPT_ADS_ONBOARDING_STEP_TRANSPARENCY_CONTROL};V.logStructuredEvent(F3,{action:U3.CHATGPT_ADS_ONBOARDING_NUX_ACTION_STEP_SHOWN,step:e[t]})}const eze=re(me,"e91ac9",20,20),tze="https://help.openai.com/en/articles/8400625-voice-mode-faq";function nze({onSubmit:t}){const e=pl(),n=dw(),s=(n==null?void 0:n[Ft.TrainingAllowed])===!0||(n==null?void 0:n[Ft.VoiceTrainingAllowed])===!0;v.useEffect(()=>{V.logEventWithStatsig("Audio Paragen: Opt-In Shown","chatgpt_audio_paragen_opt_in_shown")},[]);const o=v.useCallback(async()=>{V.logEventWithStatsig("Audio Paragen: Opt-In Accepted","chatgpt_audio_paragen_opt_in_accepted"),await Promise.all([e.mutateAsync({setting:Ft.TrainingAllowed,value:!0}),e.mutateAsync({setting:Ft.VoiceTrainingAllowed,value:!0})]),t()},[e,t]);return i.jsxs("div",{className:"flex flex-col gap-4",children:[i.jsxs("section",{children:[i.jsx("p",{className:"text-token-text-primary text-lg font-semibold",children:i.jsx(P,N({},Pa.header))}),i.jsx("p",{className:"text-token-text-secondary text-base",children:i.jsx(P,N({},Pa.subheader))})]}),i.jsxs("section",{className:"flex gap-3 align-top",children:[i.jsx(eze,{className:"h-5 w-5 shrink-0"}),i.jsxs("div",{className:"flex flex-col gap-1",children:[i.jsx("p",{children:i.jsx(P,N({},Pa.privacyHeader))}),i.jsx("p",{className:"text-token-text-secondary",children:i.jsx(P,N({},Pa.privacyDescription))})]})]}),i.jsxs("section",{className:"flex gap-3 align-top",children:[i.jsx(f_,{className:"h-5 w-5 shrink-0"}),i.jsxs("div",{className:"flex flex-col gap-1",children:[i.jsx("p",{children:i.jsx(P,N({},Pa.controlHeader))}),i.jsx("p",{className:"text-token-text-secondary",children:i.jsx(P,G(N({},Pa.controlDescription),{values:{learnMoreTextAndLink:i.jsx(Fs,{href:tze,target:"_blank",className:"underline underline-offset-2",children:i.jsx(P,N({},Pa.controlLearnMoreLink))})}}))})]})]}),i.jsxs("section",{className:"flex justify-center gap-2",children:[i.jsx(Se,{size:"medium",onClick:()=>{V.logEventWithStatsig("Audio Paragen: Opt-In Actively Declined","chatgpt_audio_paragen_opt_in_actively_declined"),t()},color:"primary-inverse",className:"flex-1",children:i.jsx(P,N({},Pa.buttonNotNow))}),i.jsx(Se,{size:"medium",onClick:()=>o(),disabled:s,className:"flex-1",children:i.jsx(P,N({},Pa.buttonEnableDataSharing))})]})]})}const Pa=we({header:{id:"AudioParagenOptIn.header",defaultMessage:"Thank you for making Voice better!"},subheader:{id:"AudioParagenOptIn.subheader",defaultMessage:"Use voice chats to improve our models?"},privacyHeader:{id:"AudioParagenOptIn.privacyHeader",defaultMessage:"Taking steps to protect privacy"},privacyDescription:{id:"AudioParagenOptIn.privacyDescription",defaultMessage:"To improve our models, our team may review your audio. We take steps to reduce the amount of personal information used to train our models."},controlHeader:{id:"AudioParagenOptIn.controlHeader",defaultMessage:"Youre in control"},controlDescription:{id:"AudioParagenOptIn.controlDescription",defaultMessage:"You can stop sharing any time in settings. {learnMoreTextAndLink} about how to disable training on other content from voice mode."},controlLearnMoreLink:{id:"VoiceTrainingModal.controlLearnMoreLink",defaultMessage:"Learn more"},buttonNotNow:{id:"AudioParagenOptIn.buttonNotNow",defaultMessage:"Not now"},buttonEnableDataSharing:{id:"AudioParagenOptIn.buttonEnableDataSharing",defaultMessage:"Enable data sharing"}}),T6=re(me,"24f206",20,20),M6=re(me,"fa90cf",20,20);function sze({player:t,isPlaying:e,onPlay:n,onPause:s,onRewind:o,onForward:r}){const a=e&&!t,[l,c]=v.useState(0),[u,d]=v.useState(0);v.useEffect(()=>{t==null||t.on("ended",s);const g=h=>{c(h.seconds),d(h.totalSeconds)};return t==null||t.on("timeupdate",g),()=>{t==null||t.off("ended",s),t==null||t.off("timeupdate",g)}},[s,c,d,t]),v.useEffect(()=>{e||t==null||t.pause()},[e,t]);function f(){l>=u-.2&&(t==null||t.reset()),t==null||t.play(),n()}function m(){t==null||t.seek(-5),o==null||o()}function p(){t==null||t.seek(5),r==null||r()}return i.jsxs("div",{className:"flex w-full flex-row items-center gap-2",children:[i.jsxs("button",{className:"ms-auto disabled:opacity-50",onClick:m,disabled:l<=.05,children:[i.jsx(T6,{className:"size-6 rtl:hidden"}),i.jsx(M6,{className:"size-6 ltr:hidden"})]}),i.jsx("button",{className:q("rounded-full p-4 transition-all duration-200",e?"bg-token-bg-secondary":"bg-token-bg-tertiary"),onClick:e?()=>s(!0):f,children:a?i.jsx(Us,{className:"m-3 size-6 opacity-50"}):e?i.jsx(AW,{className:"size-10"}):i.jsx(Q$,{className:"size-10"})}),i.jsxs("button",{className:"me-auto disabled:opacity-50",onClick:p,disabled:l>=u-.05,children:[i.jsx(M6,{className:"size-6 rtl:hidden"}),i.jsx(T6,{className:"size-6 ltr:hidden"})]})]})}function oze({paragen:t,onSelect:e}){const n=Nd(a=>a.playingId===t.id),s=Nd(a=>a.selectedId),{playParagen:o,pauseParagen:r}=jx();return i.jsxs("div",{className:q("flex flex-1 flex-col gap-4 rounded-2xl border p-4 [transition:opacity_500ms_ease-out,border-color_200ms_ease-in-out,background-color_200ms_ease-in-out]",{"bg-token-interactive-bg-tertiary-hover border-token-border-heavy":n,"bg-token-interactive-bg-tertiary-press border-token-border-focus border-1":s===t.id,"opacity-40":s&&s!==t.id}),children:[i.jsx(sze,{player:t.player,isPlaying:n,onPlay:()=>o(t.id),onPause:a=>r(t.id,a),onRewind:()=>{V.logEventWithStatsig("Audio Paragen: Rewind","chatgpt_audio_paragen_rewind",{paragen_id:t.id})},onForward:()=>{V.logEventWithStatsig("Audio Paragen: Forward","chatgpt_audio_paragen_forward",{paragen_id:t.id})}}),i.jsx(Se,{size:"medium",onClick:()=>e(t.id),children:i.jsx(P,N({},d1.paragenOptionButton))})]})}function rze({selectedId:t,onSelect:e,onMount:n}){const s=Nd(o=>o.paragens);return ox(()=>{n(s.length)}),i.jsxs("div",{className:"flex flex-col gap-4",children:[i.jsxs("div",{className:"gap flex flex-col",children:[i.jsx("p",{className:"text-token-text-primary text-lg font-semibold",children:i.jsx(P,N({},d1.feedbackDescription))}),i.jsx("p",{className:"text-token-text-secondary text-base",children:i.jsx(P,N({},d1.feedbackHeader))})]}),i.jsx("div",{className:"flex flex-row gap-4 md:justify-center",children:s.map(o=>i.jsx(oze,{paragen:o,onSelect:e},o.id))}),i.jsx(Se,{className:q("self-center transition-opacity duration-300",{"opacity-40":t!=null&&t!==A0}),size:"medium",color:"ghost",onClick:()=>e(A0),children:i.jsx(P,N({},d1.paragenOptionBothBad))})]})}const d1=we({feedbackHeader:{id:"audioParagen.feedbackHeader",defaultMessage:"Help improve Voice in your region"},feedbackDescription:{id:"audioParagen.feedbackDescription",defaultMessage:"Which audio response do you prefer?"},paragenOptionButton:{id:"audioParagen.paragenOptionButton",defaultMessage:"I prefer this audio"},paragenOptionBothBad:{id:"audioParagen.paragenOptionBothBad",defaultMessage:"Both are bad"}}),FW=1500,e1t={aboutUserMessage:void 0,aboutModelMessage:void 0,nameUserMessage:void 0,roleUserMessage:void 0,traitsModelMessage:void 0,otherUserMessage:void 0,disabledTools:void 0,enabled:void 0,personalityTypeMessage:void 0},t1t=["engineeringStudent","gastroenterologist","sourdoughBaker","interiorDesigner","daycareManager","familyLawAttorney","excelWizard","level10Mage","pharmaSales","freelanceCopywriter","weddingPhotographer","catHerder","cdlDriver","thirdGradeTeacher"],n1t={initial:{opacity:0,y:8},animate:{opacity:1,y:0,transition:{duration:.2}},exit:{opacity:0,y:-8,transition:{duration:.2}}};function s1t(t){var e,n,s,o,r;return{nameUserMessage:(e=t==null?void 0:t.nameUserMessage)!=null?e:"",roleUserMessage:(n=t==null?void 0:t.roleUserMessage)!=null?n:"",traitsModelMessage:(s=t==null?void 0:t.traitsModelMessage)!=null?s:"",otherUserMessage:(o=t==null?void 0:t.otherUserMessage)!=null?o:"",disabledTools:(r=t==null?void 0:t.disabledTools)!=null?r:[],enabled:t==null?void 0:t.enabled}}function o1t({userContextData:t,updates:e,localUserContext:n,setLocalUserContext:s}){var g;const{aboutUserMessage:o="",aboutModelMessage:r="",nameUserMessage:a="",roleUserMessage:l="",traitsModelMessage:c="",otherUserMessage:u="",disabledTools:d=[],enabled:f}=t!=null?t:{},m=(g=n.enabled)!=null?g:!!f,p=(h,_,x)=>h!==void 0?h:_!=null?_:x;s(h=>G(N(N({},h),e),{aboutUserMessage:p(e.aboutUserMessage,h.aboutUserMessage,o),aboutModelMessage:p(e.aboutModelMessage,h.aboutModelMessage,r),nameUserMessage:p(e.nameUserMessage,h.nameUserMessage,a),roleUserMessage:p(e.roleUserMessage,h.roleUserMessage,l),traitsModelMessage:p(e.traitsModelMessage,h.traitsModelMessage,c),otherUserMessage:p(e.otherUserMessage,h.otherUserMessage,u),enabled:p(e.enabled,h.enabled,m),disabledTools:p(e.disabledTools,h.disabledTools,d)}))}const aze=(t,e=FW)=>t.length>e,Yf=we({traitsReset:{id:"userContextModal.traitsReset",defaultMessage:"Refresh traits"},tipsHeader:{id:"userContextModal.tipsHeader",defaultMessage:"Thought starters"},aboutUserTip1:{id:"userContextModal.aboutUserTip1",defaultMessage:"Where are you based?"},aboutUserTip2:{id:"userContextModal.aboutUserTip2",defaultMessage:"What do you do for work?"},aboutUserTip3:{id:"userContextModal.aboutUserTip3",defaultMessage:"What are your hobbies and interests?"},aboutUserTip4:{id:"userContextModal.aboutUserTip4",defaultMessage:"What subjects can you talk about for hours?"},aboutUserTip5:{id:"userContextModal.aboutUserTip5",defaultMessage:"What are some goals you have?"},modelTip1:{id:"userContextModal.modelTip1",defaultMessage:"How formal or casual should ChatGPT be?"},modelTip2:{id:"userContextModal.modelTip2",defaultMessage:"How long or short should responses generally be?"},modelTip3:{id:"userContextModal.modelTip3",defaultMessage:"How do you want to be addressed?"},modelTip4:{id:"userContextModal.modelTip4",defaultMessage:"Should ChatGPT have opinions on topics or remain neutral?"},save:{id:"userContextModal.save",defaultMessage:"Save"},chatPreferencesEnable:{id:"userContextModal.chatPreferencesEnable",defaultMessage:"Enable for new chats"},enableToggleLabel:{id:"userContextModal.enableToggleLabel",defaultMessage:"Enable chat preferences"},disableToggleLabel:{id:"userContextModal.disableToggleLabel",defaultMessage:"Disable chat preferences"},cancel:{id:"userContextModal.cancel",defaultMessage:"Cancel"},aboutYouHelpText:{id:"userContextModal.aboutYouHelpText",defaultMessage:"What would you like ChatGPT to know about you to provide better responses?"},modelHelpText:{id:"userContextModal.modelHelpText",defaultMessage:"How would you like ChatGPT to respond?"},profileTitle:{id:"userContextModal.title.1",defaultMessage:"Customize ChatGPT"},profileSubtitle:{id:"userContextModal.profileSubtitle",defaultMessage:"Introduce yourself to get better, more personalized responses"},profileSubtitleTooltip:{id:"userContextModal.profileSubtitleTooltip",defaultMessage:"ChatGPT will use the information you provide to tailor its responses to you. <link>Learn more</link> about how we use your data.",link:"https://help.openai.com/en/articles/8096356-custom-instructions-for-chatgpt"},customizeName:{id:"userContextModal.customizeName",defaultMessage:"What should ChatGPT call you?"},customizeNamePlaceholder:{id:"userContextModal.customizeNamePlaceholder",defaultMessage:"Nickname"},occupationInputTitle:{id:"userContextModal.occupationInputTitle",defaultMessage:"Occupation"},moreDetailsInputTitle:{id:"userContextModal.moreDetailsInputTitle",defaultMessage:"More about you"},customizeRole:{id:"userContextModal.customizeRole",defaultMessage:"What do you do?"},customizeRolePlaceholder:{id:"userContextModal.customizeRolePlaceholder",defaultMessage:"Engineer, student, etc."},customizePersonality:{id:"userContextModal.customizePersonality",defaultMessage:"What personality should ChatGPT have?"},customizeTraits:{id:"userContextModal.customizeTraits",defaultMessage:"What traits should ChatGPT have?"},customizeTraitsPlaceholder:{id:"userContextModal.customizeTraitsPlaceholder",defaultMessage:"Describe or select traits"},customInstructionsPlaceholder:{id:"userContextModal.customInstructionsPlaceholder",defaultMessage:"Additional behavior, style, and tone preferences"},customizeOther:{id:"userContextModal.customizeOther",defaultMessage:"Anything else ChatGPT should know about you?"},customizeOtherPlaceholder:{id:"userContextModal.customizeOtherPlaceholder",defaultMessage:"Interests, values, or preferences to keep in mind"},customInstructionsTitle:{id:"userContextModal.customInstructionsTitle",defaultMessage:"Custom Instructions"},customInstructionsTooltip:{id:"userContextModal.customInstructionsTooltip",defaultMessage:"<article>Learn more</article> about Custom Instructions and how they're used to help ChatGPT provide better responses."},traitsTooltipTitle:{id:"userContextModal.traitsTooltipTitle",defaultMessage:"You can tune ChatGPT's behavior by..."},traitsTooltipBodyItem1:{id:"userContextModal.traitsTooltipBodyItem1",defaultMessage:"Use a formal, professional tone."},traitsTooltipBodyItem2:{id:"userContextModal.traitsTooltipBodyItem2",defaultMessage:"Be casual and chatty."},traitsTooltipBodyItem3:{id:"userContextModal.traitsTooltipBodyItem3",defaultMessage:"Be opinionated. If a question could have multiple answers, try to give only the best one."},otherTooltipTitle:{id:"userContextModal.otherTooltipTitle",defaultMessage:"You can share things like..."},otherTooltipBodyItem1:{id:"userContextModal.otherTooltipBodyItem1",defaultMessage:"I love hiking and jazz."},otherTooltipBodyItem2:{id:"userContextModal.otherTooltipBodyItem2",defaultMessage:"I'm vegetarian."},otherTooltipBodyItem3:{id:"userContextModal.otherTooltipBodyItem3",defaultMessage:"I'm trying to learn French."},messageLimitError:{id:"userContextModal.messageLimitError",defaultMessage:"Please limit your responses to {limit} characters or less."},showTips:{id:"userContextModal.showTips",defaultMessage:"Show tips"},hideTips:{id:"userContextModal.hideTips",defaultMessage:"Hide tips"},confirmCloseTitle:{id:"userContextModal.confirmCloseTitle",defaultMessage:"You have unsaved changes."},confirmCloseBody:{id:"userContextModal.confirmCloseBody",defaultMessage:"Are you sure you want to exit? Any changes you made will be permanently lost."},confirmCloseCancel:{id:"userContextModal.confirmCloseCancel",defaultMessage:"Back"},confirmCloseOk:{id:"userContextModal.confirmCloseOk",defaultMessage:"Exit"},modApiVoilation:{id:"userContextModal.modApiVoilation",defaultMessage:"This content may violate our <policyLink>content policy</policyLink>. If you believe this to be in error, please <feedbackLink>submit your feedback</feedbackLink>  your input will aid our research in this area."},dalle:{id:"userContexModal.tools.dalleTooltip",defaultMessage:"Generate images using DALLE"},python:{id:"userContexModal.tools.codeInterpreterTooltip",defaultMessage:"Execute code using Code Interpreter"},advanced:{id:"userContextModal.advanced",defaultMessage:"Advanced"},advancedOpen:{id:"userContextModal.advancedOpen",defaultMessage:"Open advanced settings"},advancedClose:{id:"userContextModal.advancedClose",defaultMessage:"Close advanced settings"},customizeTitle:{id:"personalizationSettings.customizeTitle",defaultMessage:"Personalization"},aboutYouSectionTitle:{id:"personalizationSettings.aboutYouSectionTitle",defaultMessage:"About you"},memoryTitle:{id:"personalizationSettings.memoryTitle",defaultMessage:"Memory"},toggleLabel:{id:"settingsModal.myChagtGptToggleLabel.2",defaultMessage:"Reference saved memories"},exampleDescription:{id:"settingsModal.exampleDescription",defaultMessage:"Let ChatGPT save and use memories when responding."},manageMemoriesLink:{id:"settingsModal.manageMemoriesLink",defaultMessage:"Manage memories"},manageButton:{id:"settingsModal.manageMemoriesLink.button",defaultMessage:"Manage"},upgradeButton:{id:"settingsModal.upgradeButtonLink.button",defaultMessage:"Upgrade"},exampleDescription1:{id:"settingsModal.exampleDescription1.1",defaultMessage:"ChatGPT will become more helpful as you chat, picking up on details and preferences to tailor its responses to you. <link>Learn more</link>"},exampleDescription2:{id:"settingsModal.exampleDescription2.2",defaultMessage:"To understand what ChatGPT remembers or teach it something new, just chat with it:"},exampleMessage1:{id:"settingsModal.exampleMessage1.1",defaultMessage:"Remember that I like concise responses."},exampleMessage2:{id:"settingsModal.exampleMessage2.1",defaultMessage:"I just got a puppy!"},exampleMessage3:{id:"settingsModal.exampleMessage3.2",defaultMessage:"What do you remember about me?"},exampleMessage4:{id:"settingsModal.exampleMessage4",defaultMessage:"Where did we leave off on my last project?"},reset:{id:"settingsModal.reset",defaultMessage:"Reset memories"},resetModalTitle:{id:"settingsModal.resetModalTitle",defaultMessage:"Are you sure?"},resetModalDescription:{id:"settingsModal.resetModalDescription",defaultMessage:"Your GPT will forget what it has learned from your previous chats. This can't be undone."},resetModalConfirm:{id:"settingsModal.resetModalConfirm",defaultMessage:"Confirm reset"},resetModalCancel:{id:"settingsModal.resetModalCancel",defaultMessage:"Cancel"},resetSuccessful:{id:"settingsModal.resetSuccessful",defaultMessage:"Your GPT's memory has been reset."},resetFailed:{id:"settingsModal.resetFailed",defaultMessage:"Failed to reset your GPT's memory."},on:{id:"personalizationSettings.on",defaultMessage:"On"},off:{id:"personalizationSettings.off",defaultMessage:"Off"},customInstructions:{id:"personalizationSettings.customInstructions",defaultMessage:"Custom instructions"},enablePersonalizationRowLabel:{id:"personalizationSettings.enablePersonalizationRowLabel",defaultMessage:"Enable customization"},enablePersonalizationRowDescription:{id:"personalizationSettings.enablePersonalizationRowDescription",defaultMessage:"Customize how ChatGPT responds to you. {learnMoreLink}",values:{learnMoreLink:i.jsx(Fs,{href:"https://help.openai.com/en/articles/8096356-chatgpt-custom-instructions-faq",className:"underline",children:i.jsx(P,{id:"dyoG1M",defaultMessage:"Learn more"})})}},manageMemoriesButton:{id:"personalizationSettings.manageMemoriesButton",defaultMessage:"Manage memories"},RecordModeTitle:{id:"personalizationSettings.recordModeTitle",defaultMessage:"Record mode"},recordModeToggleLabel:{id:"personalizationSettings.recordModeToggleLabel",defaultMessage:"Reference record history"},recordModeDescription:{id:"personalizationSettings.recordModeDescription",defaultMessage:"Let ChatGPT reference all previous recording transcripts and notes when responding."},connectorSearchToggleLabel:{id:"personalizationSettings.connectorSearchToggleLabel",defaultMessage:"Connector search"},connectorSearchDescription:{id:"personalizationSettings.connectorSearchDescription",defaultMessage:"Let ChatGPT automatically search connected sources for answers."},pulseSettingTitle:{id:"personalizationSettings.pulseSettingTitle",defaultMessage:"Pulse"},pulseReferenceMemoriesToggleLabel:{id:"personalizationSettings.pulseReferenceMemoriesToggleLabel",defaultMessage:"Reference Memory in suggestions"},pulseReferenceMemoriesDescription:{id:"personalizationSettings.pulseReferenceMemoriesDescription",defaultMessage:'Let ChatGPT use memories proactively in suggestions. Turning this off will disable "Pulse". {learnMoreLink}',values:{learnMoreLink:i.jsx(Fs,{href:"https://help.openai.com/en/articles/12293630-chatgpt-pulse",className:"underline",children:i.jsx(P,{id:"lFx4tz",defaultMessage:"Learn more"})})}},pulseEntrypointToggleLabel:{id:"personalizationSettings.pulseEntrypointToggleLabel",defaultMessage:'Show "Pulse" in new chats'},settingsPersonalitySelectionRowTitle:{id:"personalizationSettings.settingsPersonalitySelectionRowTitle",defaultMessage:"Base style and tone"},settingsPersonalitySelectionRowDescription:{id:"personalizationSettings.settingsPersonalitySelectionRowDescription",defaultMessage:"Set the style and tone ChatGPT uses when responding."}}),r1t=we({engineeringStudent:{id:"userContextModal.rolePlaceholder.engineeringStudent",defaultMessage:"Engineering student at University of Waterloo"},gastroenterologist:{id:"userContextModal.rolePlaceholder.gastroenterologist",defaultMessage:"Gastroenterologist"},sourdoughBaker:{id:"userContextModal.rolePlaceholder.sourdoughBaker",defaultMessage:"Small-batch home sourdough baker"},interiorDesigner:{id:"userContextModal.rolePlaceholder.interiorDesigner",defaultMessage:"Interior designer"},daycareManager:{id:"userContextModal.rolePlaceholder.daycareManager",defaultMessage:"Home daycare manager"},familyLawAttorney:{id:"userContextModal.rolePlaceholder.familyLawAttorney",defaultMessage:"Family law attorney"},excelWizard:{id:"userContextModal.rolePlaceholder.excelWizard",defaultMessage:"Excel wizard"},level10Mage:{id:"userContextModal.rolePlaceholder.level10Mage",defaultMessage:"Level 10 mage"},pharmaSales:{id:"userContextModal.rolePlaceholder.pharmaSales",defaultMessage:"Pharma sales"},freelanceCopywriter:{id:"userContextModal.rolePlaceholder.freelanceCopywriter",defaultMessage:"Freelance copywriter"},weddingPhotographer:{id:"userContextModal.rolePlaceholder.weddingPhotographer",defaultMessage:"Wedding photographer"},catHerder:{id:"userContextModal.rolePlaceholder.catHerder",defaultMessage:"Professional cat herder"},cdlDriver:{id:"userContextModal.rolePlaceholder.cdlDriver",defaultMessage:"CDL driver"},thirdGradeTeacher:{id:"userContextModal.rolePlaceholder.thirdGradeTeacher",defaultMessage:"Third-grade teacher"}}),ize=({disabled:t=!1,onChange:e,onFocus:n,onSubmit:s,placeholder:o,value:r,name:a,tip:l,hasModError:c,className:u,size:d="md",showCharacterCount:f=!0,autoHighlight:m=!1,isNewCustomInstructionsUIEnabled:p=!1,maxLength:g=FW,scrollObscuringHeight:h=0,scrollOnFocus:_=!1,scrollOnChange:x=!1,dynamicHeight:b=!1,rows:y,textareaClassName:S})=>{var W;const C=te(),w=v.useRef(null),k=v.useRef(!0);v.useEffect(()=>{m&&w.current&&requestAnimationFrame(()=>{var Y;(Y=w.current)==null||Y.select(),As.setAutoHighlightNicknameInput(!1)})},[m]);const E=_s(()=>{!k.current||!w.current||xU({node:w.current,axis:"y",obscuringHeight:h,onScrollIntoView:()=>{k.current=!1}})}),T=_s(Y=>{e(Y),x&&E()}),M=_s(()=>{n==null||n(),_&&E()});v.useEffect(()=>{if(!b||!w.current)return;const Y=w.current,K=()=>{Y.style.height="auto",Y.style.height=Math.min(Y.scrollHeight+2,120)+"px"};return K(),Y.addEventListener("input",K),()=>{Y.removeEventListener("input",K)}},[b,r]);const A=X(I7),I=X(j7),j=!A,[R,O]=v.useState(!1),[L,B]=v.useState(j),U=!j&&R&&!L,H=j&&!L,$=aze(r,g);v.useEffect(()=>{if(!w.current||!_&&!x)return;const Y=_U(w.current,"y");if(!Y)return;const K=tl(()=>{k.current=!0},100);return Y.addEventListener("scroll",K,{passive:!0}),()=>{Y.removeEventListener("scroll",K)}},[_,x]);const F=Y=>{Y.nativeEvent.isComposing||!t&&Y.key==="Enter"&&Y.metaKey&&!Y.shiftKey&&!Y.nativeEvent.isComposing&&(Y.preventDefault(),s())},z=v.useRef(null);return i.jsxs(i.Fragment,{children:[l&&i.jsx(en,{testId:"modal-user-context-tip",isOpen:H,type:"success",size:"custom",className:"max-w-lg",title:C.formatMessage(Yf.tipsHeader),showCloseButton:!0,onClose:()=>{B(!0)},children:l}),i.jsxs(Tl,{open:U,children:[i.jsxs("div",{className:u,ref:z,children:[i.jsx(ba,{asChild:!0,children:i.jsx("textarea",{ref:w,className:q("bg-token-main-surface-primary w-full resize-none focus:ring-transparent",S,{"rounded-sm p-4":d!=="sm"&&!p,"rounded-lg border text-sm":d==="sm"||p,"border-orange-400 focus:border-orange-400":c,"border-red-500 focus:border-red-500":$&&!c,"focus-token-border-heavy border-token-border-default":!$&&!c,"opacity-30":t,"placeholder:text-gray-400":d==="sm"||p,"placeholder:text-gray-300":!p,"overflow-y-auto":b}),name:a,disabled:t,placeholder:o,onKeyDown:F,rows:y!=null?y:d==="sm"?1:A&&!I?6:5,value:r,onChange:T,onBlur:()=>{O(!1)},onFocus:()=>{M==null||M(),O(!0)},style:{maxHeight:b?"120px":void 0,verticalAlign:"top"}})}),i.jsx("div",{className:q("flex items-center justify-between px-1 text-xs tabular-nums",$?"text-red-600":"text-token-text-tertiary"),children:c?i.jsx("div",{className:"visible mt-2 text-start text-xs text-orange-400",children:i.jsx(P,G(N({},Yf.modApiVoilation),{values:{policyLink:Y=>i.jsx("a",{href:"https://platform.openai.com/docs/usage-policies/content-policy",className:"underline",target:"_blank",rel:"noreferrer",children:Y}),feedbackLink:Y=>i.jsx("a",{href:"https://forms.gle/3gyAMj5r5rTEcgbs5",className:"underline",target:"_blank",rel:"noreferrer",children:Y})}}))}):i.jsxs(i.Fragment,{children:[f&&i.jsx("div",{children:"".concat(r.length,"/").concat(g)}),l&&i.jsx("button",{className:"flex items-center gap-1",onClick:()=>{var Y;(Y=w.current)==null||Y.focus(),B(!L)},tabIndex:-1,children:i.jsx(In,{initial:!1,children:R&&i.jsx(wt.div,{className:"flex items-center gap-1",initial:{opacity:0},animate:{opacity:1,transition:{duration:.2,ease:"easeIn"}},exit:{opacity:0,transition:{duration:.2,ease:"easeIn"}},children:L?i.jsxs(i.Fragment,{children:[i.jsx(P,N({},Yf.showTips)),i.jsx(Vee,{className:"icon-xs"})]}):i.jsxs(i.Fragment,{children:[i.jsx(P,N({},Yf.hideTips)),i.jsx(nk,{className:"icon-xs"})]})},"show-hide")})})]})})]}),l&&i.jsx(Ml,{container:(W=z.current)==null?void 0:W.ownerDocument.body,children:i.jsx(Al,{side:"right",align:"start",sideOffset:12,className:"popover animate-slideLeftAndFade border-token-border-default bg-token-main-surface-primary text-token-text-primary relative z-50 max-w-[220px] rounded-xl border p-4 text-sm shadow-[0px_4px_14px_rgba(0,0,0,0.06)] select-none xl:max-w-xs",onOpenAutoFocus:Y=>{Y.preventDefault()},onCloseAutoFocus:Y=>{Y.preventDefault()},children:i.jsxs("div",{className:"flex flex-col gap-1",children:[i.jsx("strong",{children:i.jsx(P,N({},Yf.tipsHeader))}),l]})})})]})]})};function lze({children:t,className:e,footer:n,title:s}){return i.jsxs(i.Fragment,{children:[i.jsxs("section",{className:q("flex flex-col gap-2",e),children:[i.jsx("div",{children:s}),t]}),n]})}const Lo=we({formResponseSound:{id:"audioParagen.formResponseSound",defaultMessage:"Clearer sound"},formResponseAccent:{id:"audioParagen.formResponseAccent",defaultMessage:"Better accent"},formResponseMoreExpressive:{id:"audioParagen.formResponseMoreExpressive",defaultMessage:"More expressive"},formResponseNotExpressive:{id:"audioParagen.formResponseNotExpressive",defaultMessage:"Not expressive"},formResponseDistortedAudio:{id:"audioParagen.formResponseDistortedAudio",defaultMessage:"Distorted audio"},formResponsePoorAccent:{id:"audioParagen.formResponsePoorAccent",defaultMessage:"Poor accent"},formThankYou:{id:"audioParagen.formThankYou",defaultMessage:"Thank you for making Voice better!"},formWhyChoose:{id:"audioParagen.formWhyChoose",defaultMessage:"Why did you choose your response?"},formOptionalFeedback:{id:"audioParagen.formOptionalFeedback",defaultMessage:"Other feedback (Optional)"},formOptionalFeedbackPlaceholder:{id:"audioParagen.formOptionalFeedbackPlaceholder",defaultMessage:"Anything you'd like to share?"},formBack:{id:"audioParagen.formBack",defaultMessage:"Back"},formSubmit:{id:"audioParagen.formSubmit",defaultMessage:"Submit"}}),A6={clearer_sound:Lo.formResponseSound,better_accent:Lo.formResponseAccent,more_expressive:Lo.formResponseMoreExpressive,not_expressive:Lo.formResponseNotExpressive,distorted_audio:Lo.formResponseDistortedAudio,poor_accent:Lo.formResponsePoorAccent};function cze({option:t,reviews:e,onSelect:n}){const s=t in A6?A6[t]:null;if(!s)return null;const o=e.includes(t);return i.jsx(Se,{icon:o?Pr:pf,color:o?"primary":"secondary",className:"py-2 ps-2 pe-3 text-xs font-normal",onClick:()=>n(t),children:i.jsx(P,N({},s))})}function uze({reviewOptions:t,feedback:e,selectedReviewOptions:n,onReviewOptionsChanged:s,onOptionalFeedbackChanged:o,onBack:r,onSubmit:a}){const l=v.useRef(null),c=te();v.useEffect(()=>{l.current&&l.current.scrollIntoView({behavior:"smooth",block:"nearest"})},[]);function u(f){n.includes(f)?s(n.filter(m=>m!==f)):s([...n,f])}function d(f){o(f.target.value)}return i.jsxs("div",{className:"flex flex-col gap-4",children:[i.jsxs("div",{className:"gap flex flex-col",children:[i.jsx("p",{className:"text-token-text-primary text-lg font-semibold",children:i.jsx(P,N({},Lo.formThankYou))}),i.jsx("p",{className:"text-token-text-secondary text-base",children:i.jsx(P,N({},Lo.formWhyChoose))})]}),i.jsx("div",{className:"flex flex-row flex-wrap gap-2",children:t.map(f=>i.jsx(cze,{option:f,reviews:n,onSelect:u},f))}),i.jsx(lze,{title:i.jsx("div",{className:"flex items-center gap-1",children:i.jsx(P,N({},Lo.formOptionalFeedback))}),children:i.jsx(ize,{disabled:!1,onChange:d,onSubmit:uo,value:e,name:"audio_paragen_optional_feedback",placeholder:c.formatMessage(Lo.formOptionalFeedbackPlaceholder),showCharacterCount:!1,isNewCustomInstructionsUIEnabled:!0,size:"md"})}),i.jsxs("div",{className:"flex flex-row gap-2 self-end",children:[i.jsx(Se,{color:"ghost",onClick:r,children:i.jsx(P,N({},Lo.formBack))}),i.jsx(Se,{onClick:a,children:i.jsx(P,N({},Lo.formSubmit))})]})]})}const dze=["clearer_sound","better_accent","more_expressive"],fze=["not_expressive","distorted_audio","poor_accent"];function a1t({lastUserMessageId:t,setIsDismissed:e}){const[n,s]=v.useState("options"),[o,r]=v.useState([]),[a,l]=v.useState(""),c=v.useRef(null),u=v.useRef(!1),d=Nd(C=>C.selectedId),{data:f}=bo(Ft.TrainingAllowed),{data:m}=bo(Ft.VoiceTrainingAllowed),{selectParagen:p,submitParagenResults:g,setShouldShowThankYouTooltip:h}=jx();v.useEffect(()=>{V.logUpsellOrModalEvent(qn,{eventId:"audio_paragen_prompt_shown",type:Kn.UPSELL_OR_MODAL_TYPE_CUSTOM_NUX_MODAL})},[]);function _(){p(null),r([]),s("options")}function x(C){c.current&&window.clearTimeout(c.current),p(C),c.current=window.setTimeout(()=>{s("review")},1e3)}function b(){e(!0),HBe(t),h(!0)}function y(){if(g(t,o,a),!f||!m){s("opt-in");return}b()}const S=v.useCallback(C=>{u.current||(u.current=!0,V.logEventWithStatsig("Audio Paragen: View","chatgpt_audio_paragen_view",{count:C}))},[]);return i.jsx(wt.div,{className:"relative max-w-[548px]",initial:{opacity:0},animate:{opacity:1,transition:{duration:.5,delay:.75}},exit:{opacity:0},children:i.jsxs(zee,{children:[i.jsx(wt.div,{layout:"size",className:"shadow-xxs overflow-hidden rounded-2xl border p-6 text-sm focus:outline-hidden",children:i.jsx(In,{mode:"wait",initial:!1,children:i.jsx(wt.div,{layout:!0,initial:{opacity:0},animate:{opacity:1},transition:{duration:.4},exit:{opacity:0},children:n==="options"?i.jsx(rze,{selectedId:d,onSelect:x,onMount:S}):n==="review"?i.jsx(uze,{reviewOptions:d!==A0?dze:fze,feedback:a,selectedReviewOptions:o,onReviewOptionsChanged:r,onOptionalFeedbackChanged:l,onBack:_,onSubmit:y}):n==="opt-in"?i.jsx(nze,{onSubmit:b}):null},n)})}),i.jsx(Wn,{className:"absolute end-6 top-6",onClick:()=>{V.logEventWithStatsig("Audio Paragen: Dismissed Modal","chatgpt_audio_paragen_dismissed_modal"),kt(We.hasSeenAudioParagenPrompt),e(!0)}})]})})}function mze(t,e){var r;if(!t)return!1;if(e)return!0;const s=["gpt-4o-gdrive","gpt-4o-gdrive-1007-mclick","gpt-4o-gdrive-1124","gpt-4o-gdrive-1124-citation","gpt-4o-gdrive-0212","gpt-4o-gdrive-0314","o1_ca_0226","o3_mini_ca_0226"].includes(t.id),o=!!((r=t.product_features.contextual_answers)!=null&&r.is_eligible_for_contextual_answers);return s||o}function UW(t){"use forget";const e=D.c(2);let n;return e[0]!==t?(n=()=>HW(t),e[0]=t,e[1]=n):n=e[1],X(n)}function HW(t){const e=e_(t!=null?t:null);return Wee()&&mze(t,e)}function pze(t,e){const n=UW(t!=null?t:null),s=qee();return!n||!s?!1:s===Kee.DOGFOODING?!!e:!0}function gze(t,e,n,s){if(e)return t?n&&n!==s?"/g/".concat(t,"/shared/c/").concat(e,"?project_id=").concat(t,"&owner_user_id=").concat(n):"/g/".concat(t,"/c/").concat(e):"/c/".concat(e)}function i1t({clientThreadId:t,turn:e,isFinalTurn:n}){return Ze(t,o=>!n&&e.messages.some(r=>(o==null?void 0:o.continuingSharedConversationLastMessageId)===r.id))?i.jsx("div",{className:"mx-auto mt-8 -mb-2 flex justify-center pb-2",children:i.jsxs("p",{className:"flex items-center text-xs text-gray-500",children:[i.jsx(uL,{className:"icon-xs me-2"}),i.jsx(P,{id:"threadLayout.sharedConversationPrivateDisclaimer",defaultMessage:"Messages beyond this point are only visible to you"})]})}):null}function l1t({clientThreadId:t,turn:e}){var u,d,f,m,p,g,h,_;const n=Lt(t),s=Et(),o=(d=(u=e.messages.find(x=>{var b;return(b=x.metadata)==null?void 0:b.branching_from_conversation_title}))==null?void 0:u.metadata)==null?void 0:d.branching_from_conversation_title,r=(m=(f=e.messages.find(x=>{var b;return(b=x.metadata)==null?void 0:b.branching_from_conversation_id}))==null?void 0:f.metadata)==null?void 0:m.branching_from_conversation_id,a=(g=(p=e.messages.find(x=>{var b;return(b=x.metadata)==null?void 0:b.branching_from_conversation_owner}))==null?void 0:p.metadata)==null?void 0:g.branching_from_conversation_owner,l=(_=(h=e.messages.find(x=>{var b;return(b=x.metadata)==null?void 0:b.gizmo_id}))==null?void 0:h.metadata)==null?void 0:_.gizmo_id,c=gze(l,r,a,s==null?void 0:s.normalizedAccountUserId);return o?i.jsx(to,{children:i.jsxs("div",{className:"mx-auto mt-8 flex w-full items-center justify-center",children:[i.jsx("div",{className:"h-px flex-1 bg-gray-200 dark:bg-gray-700","aria-hidden":"true"}),i.jsx("p",{className:"mx-3 shrink text-xs whitespace-nowrap text-gray-500",children:i.jsx(P,{id:"threadLayout.branchConversationDisclaimer",defaultMessage:"Branched from {conversationTitle}",values:{conversationTitle:(n||a)&&c?i.jsx(Hd,{className:"font-semibold",href:c,children:o}):i.jsx("span",{className:"font-semibold",children:o})}})}),i.jsx("div",{className:"h-px flex-1 bg-gray-200 dark:bg-gray-700","aria-hidden":"true"})]})}):null}const $W=["snorlax","firstparty","sidebar"];function hze(){return ue.safeGet("/gizmos/firstparty/sidebar")}const c1t=Yee(()=>{const t=Zee()||!1;return En({queryKey:$W,queryFn:hze,enabled:t})}),Gl=we({starting:{id:"jitPluginMessage.starting",defaultMessage:"Starting action"},confirmingSimple:{id:"jitPluginMessage.confirming.simple",defaultMessage:"{gizmoName} wants to talk to {domain}"},confirmingSubtitle:{id:"jitPluginMessage.confirming.subtitle",defaultMessage:"Only allow sites you trust."},running:{id:"jitPluginMessage.runningV4",defaultMessage:"Talking to {domain}"},finished:{id:"jitPluginMessage.finishedV4",defaultMessage:"Talked to {domain}"},stopped:{id:"jitPluginMessage.stoppedV4",defaultMessage:"Stopped talking to {domain}"},error:{id:"jitPluginMessage.errorV5",defaultMessage:"Error talking to {domain}"},declined:{id:"jitPluginMessage.declined",defaultMessage:"You declined this action"},allowed:{id:"jitPluginMessage.allowed",defaultMessage:"You allowed this action"},ranTest:{id:"jitPluginMessage.ranTest",defaultMessage:"Tested {operationName}"},confirmParamsTitle:{id:"jitPluginMessage.confirmParamsTitleV3",defaultMessage:"{gizmoName} wants to share this info with {domain}"},sentParamsTitle:{id:"jitPluginMessage.sentParamsTitleV2",defaultMessage:"{gizmoName} sent this info to {domain}"},privacyPolicyLink:{id:"jitPluginMessage.privacyPolicyLinkV2",defaultMessage:"Privacy policy"},connectorDeclined:{id:"jitPluginMessage.connectorDeclined",defaultMessage:"Declined connection to {domain}"},rememberForThisConversation:{id:"jitPluginMessage.rememberForThisConversation",defaultMessage:"Remember for this conversation"},allow:{id:"jitPluginMessage.allow",defaultMessage:"Allow"},allowing:{id:"jitPluginMessage.allowing",defaultMessage:"Allowing"}}),_ze=t=>qE(t).some(e=>{var n;return!!((n=e.metadata)!=null&&n.chatgpt_sdk)});var us=(t=>(t[t.Running=0]="Running",t[t.Finished=1]="Finished",t[t.Error=2]="Error",t[t.Stopped=3]="Stopped",t[t.OauthLogin=4]="OauthLogin",t[t.NoAuthLink=5]="NoAuthLink",t[t.UserConfirmation=6]="UserConfirmation",t[t.Denied=7]="Denied",t[t.Hidden=8]="Hidden",t[t.Allowed=9]="Allowed",t))(us||{});const xze=t=>{const[e,...n]=t,s=n.filter(l=>{var c;return l.author.role===dt.Tool&&!((c=l.metadata)!=null&&c.is_visually_hidden_from_conversation)}),o=s.filter(l=>{var c,u,d;return((d=(u=(c=l.metadata)==null?void 0:c.jit_plugin_data)==null?void 0:u.from_server)==null?void 0:d.type)==="debug"}),r=s.filter(l=>!["debug","send_test"].some(c=>{var u,d,f;return c===((f=(d=(u=l.metadata)==null?void 0:u.jit_plugin_data)==null?void 0:d.from_server)==null?void 0:f.type)})),a=s[s.length-1];return{assistantMessage:e,toolMessages:s,debugMessages:o,actionableMessages:r,lastToolMessage:a}},N6=new WeakMap,$T=t=>{const e=N6.get(t);if(e)return e;const n=xze(t);return N6.set(t,n),n};function yze(t){if(t&&"user_action"in t){const e=t.user_action;t=N(N({},t),e.data),"target_message_id"in t&&e.target_message_id&&(t.target_message_id=e.target_message_id)}return t}function I6(t,e){var n,s,o,r;return((n=t==null?void 0:t.from_server)==null?void 0:n.type)==="confirm_action"?(o=(s=t==null?void 0:t.from_server)==null?void 0:s.body)==null?void 0:o.operation:(r=e==null?void 0:e.parsed_function_call)==null?void 0:r.name}function u1t(t,e){var r,a;const{jitPluginData:n,invokedPlugin:s,lastConfirmActionJitPluginData:o}=kg(t,e);return(a=(r=I6(n,s))!=null?r:I6(o,void 0))!=null?a:""}function d1t(t,e){var n,s,o,r;return((n=t==null?void 0:t.from_server)==null?void 0:n.type)==="confirm_action"?(o=(s=t==null?void 0:t.from_server)==null?void 0:s.body)==null?void 0:o.params:(r=e==null?void 0:e.parsed_function_call)==null?void 0:r.kwargs}function kg(t,e){var r,a,l,c,u,d,f,m,p,g,h,_,x,b,y,S,C,w,k,E,T,M,A,I;const{assistantMessage:n,actionableMessages:s}=$T(t);let o;for(let j=s.length-1;j>=0;j--){const R=(r=s[j].metadata)==null?void 0:r.jit_plugin_data;if(((a=R==null?void 0:R.from_server)==null?void 0:a.type)==="confirm_action"){o=R;break}}if(((u=(c=(l=n.metadata)==null?void 0:l.jit_plugin_data)==null?void 0:c.from_server)==null?void 0:u.type)==="send_test")return{uiState:us.Hidden,lastConfirmActionJitPluginData:o,jitPluginData:void 0,invokedPlugin:void 0,fileAttachments:void 0};if(s.some(j=>j.content.content_type===vt.SystemError))return{uiState:us.Error,lastConfirmActionJitPluginData:o,jitPluginData:void 0,invokedPlugin:void 0,fileAttachments:void 0};if(_D(n))return{uiState:us.Stopped,lastConfirmActionJitPluginData:o,jitPluginData:void 0,invokedPlugin:void 0,fileAttachments:void 0};for(let j=s.length-1;j>=0;j--){const R=s[j];if((d=R.metadata)!=null&&d.invoked_plugin){const $=[];return s.forEach(F=>{var W,Y;const z=(Y=(W=F.metadata)==null?void 0:W.attachments)==null?void 0:Y.filter(K=>K.display_files_from_actions_ext);z&&$.push(...z)}),{uiState:us.Finished,lastConfirmActionJitPluginData:o,jitPluginData:R.metadata.jit_plugin_data,invokedPlugin:R.metadata.invoked_plugin,fileAttachments:$}}const O=yze((m=(f=R.metadata)==null?void 0:f.jit_plugin_data)==null?void 0:m.from_client),L=s[j-1],B=(h=(g=(p=L==null?void 0:L.metadata)==null?void 0:p.jit_plugin_data)==null?void 0:g.from_server)==null?void 0:h.type,U=B==="activate_context_scope"||B==="approve_tool_in_context_scope";if(O!=null){if((O==null?void 0:O.type)==="contact_gizmo")return{uiState:us.Finished,lastConfirmActionJitPluginData:o,jitPluginData:(x=(_=s[j-1])==null?void 0:_.metadata)==null?void 0:x.jit_plugin_data,invokedPlugin:void 0,fileAttachments:void 0};if((O==null?void 0:O.type)==="deny")return U?{uiState:us.Hidden,lastConfirmActionJitPluginData:o,jitPluginData:void 0,invokedPlugin:void 0,fileAttachments:void 0}:{uiState:us.Denied,lastConfirmActionJitPluginData:o,jitPluginData:void 0,invokedPlugin:void 0,fileAttachments:void 0};if((O==null?void 0:O.type)==="oauth_success")return{uiState:us.Running,lastConfirmActionJitPluginData:o,jitPluginData:(b=R.metadata)==null?void 0:b.jit_plugin_data,invokedPlugin:void 0,fileAttachments:void 0};if((O==null?void 0:O.type)==="link_success")return{uiState:us.Running,lastConfirmActionJitPluginData:o,jitPluginData:(y=R.metadata)==null?void 0:y.jit_plugin_data,invokedPlugin:void 0,fileAttachments:void 0};if((O==null?void 0:O.type)==="allow")return U?{uiState:us.Hidden,lastConfirmActionJitPluginData:o,jitPluginData:void 0,invokedPlugin:void 0,fileAttachments:void 0}:{uiState:us.Allowed,lastConfirmActionJitPluginData:o,jitPluginData:(S=R.metadata)==null?void 0:S.jit_plugin_data,invokedPlugin:void 0,fileAttachments:void 0};break}const H=(w=(C=R.metadata)==null?void 0:C.jit_plugin_data)==null?void 0:w.from_server;if((H==null?void 0:H.type)==="preview"&&e)return{uiState:us.Running,lastConfirmActionJitPluginData:o,jitPluginData:(k=R.metadata)==null?void 0:k.jit_plugin_data,invokedPlugin:void 0,fileAttachments:void 0};if((H==null?void 0:H.type)==="confirm_action"&&e)return{uiState:us.UserConfirmation,lastConfirmActionJitPluginData:o,jitPluginData:(E=R.metadata)==null?void 0:E.jit_plugin_data,invokedPlugin:void 0,fileAttachments:void 0};if((H==null?void 0:H.type)==="activate_context_scope"&&e)return{uiState:us.UserConfirmation,lastConfirmActionJitPluginData:o,jitPluginData:(T=R.metadata)==null?void 0:T.jit_plugin_data,invokedPlugin:void 0,fileAttachments:void 0};if((H==null?void 0:H.type)==="approve_tool_in_context_scope"&&e)return{uiState:us.UserConfirmation,lastConfirmActionJitPluginData:o,jitPluginData:(M=R.metadata)==null?void 0:M.jit_plugin_data,invokedPlugin:void 0,fileAttachments:void 0};if((H==null?void 0:H.type)==="oauth_required"&&e)return{uiState:us.OauthLogin,lastConfirmActionJitPluginData:o,jitPluginData:(A=R.metadata)==null?void 0:A.jit_plugin_data,invokedPlugin:void 0,fileAttachments:void 0};if((H==null?void 0:H.type)==="link_required"&&e)return{uiState:us.NoAuthLink,lastConfirmActionJitPluginData:o,jitPluginData:(I=R.metadata)==null?void 0:I.jit_plugin_data,invokedPlugin:void 0,fileAttachments:void 0}}return{uiState:e?us.Running:us.Stopped,lastConfirmActionJitPluginData:o,jitPluginData:void 0,invokedPlugin:void 0,fileAttachments:void 0}}function f1t(t,e,n,s){var f,m,p,g,h,_,x,b,y,S,C;const o=(f=Qee(t,n))!=null?f:void 0;if(!o)return{connectorId:void 0,connectorToolStatus:null,connectorStatusMessage:null,showConnectorConnect:!1};if(e===t)return{connectorId:o,connectorToolStatus:null,connectorStatusMessage:null,showConnectorConnect:!1};let r=gn.Running,a=null,l=!1,c=!1;const u=n[n.length-1],d=(m=u==null?void 0:u.metadata)==null?void 0:m.jit_plugin_data;return n.some(w=>w.content.content_type===vt.SystemError)?(r=gn.Error,a=Gl.error):u?((p=d==null?void 0:d.from_server)==null?void 0:p.type)==="oauth_required"&&s||((g=d==null?void 0:d.from_server)==null?void 0:g.type)==="link_required"&&s?(r=gn.Paused,a=null,l=!0):((h=d==null?void 0:d.from_server)==null?void 0:h.type)==="confirm_action"&&s?(r=gn.Paused,a=null,c=!0):(((_=d==null?void 0:d.from_server)==null?void 0:_.type)==="oauth_required"||((x=d==null?void 0:d.from_server)==null?void 0:x.type)==="link_required")&&!s||((b=d==null?void 0:d.from_client)==null?void 0:b.type)==="deny"?(r=gn.Stopped,a=Gl.connectorDeclined):((y=d==null?void 0:d.from_client)==null?void 0:y.type)==="oauth_success"||((S=d==null?void 0:d.from_client)==null?void 0:S.type)==="link_success"?(r=gn.Stopped,a=null):(C=u==null?void 0:u.metadata)!=null&&C.invoked_plugin?(r=gn.Finished,a=Gl.finished):(r=gn.Stopped,a=Gl.stopped):(r=gn.Running,a=Gl.running),{connectorId:o,connectorToolStatus:r,connectorStatusMessage:a,showConnectorConnect:l,showStandaloneWidgetOverlayMessage:c}}function bze({recipient:t,actionData:e,gizmoId:n,messageTextContent:s}){return{id:fa(),author:{role:dt.Tool,name:t},content:{content_type:vt.Text,parts:[s!=null?s:""]},recipient:"all",metadata:{jit_plugin_data:{from_client:e},gizmo_id:n},clientMetadata:{completionSampleFinishTime:Date.now()}}}function j6(a){var l=a,{clientThreadId:t,actionData:e,assistantMessage:n,onRequestCompletion:s,messageTextContent:o}=l,r=De(l,["clientThreadId","actionData","assistantMessage","onRequestCompletion","messageTextContent"]);var u;const c=(u=At(t))==null?void 0:u.mode;s(G(N({},r),{promptMessage:bze({recipient:n.recipient,actionData:e,gizmoId:c&&"gizmo_id"in c?c.gizmo_id:void 0,messageTextContent:o}),completionMetadata:{conversationMode:c!=null?c:{kind:Bt.PrimaryAssistant}}}))}function m1t(t,e){if(t.type!==Zr.JIT_PLUGIN||!t.metadata.json_schema)return!1;let n=!1;function s(o){for(const r in o)r==="operationId"&&o[r]===e&&(n=!0),o[r]&&typeof o[r]=="object"&&s(o[r])}return s(t.metadata.json_schema),n}function P6(t){var e,n,s;if(t&&(((e=t.from_server)==null?void 0:e.type)==="confirm_action"||((n=t.from_server)==null?void 0:n.type)==="oauth_required"||((s=t.from_server)==null?void 0:s.type)==="preview"))return t.from_server.body.params}function R6(t){var e,n,s,o;if(t&&(((e=t.from_server)==null?void 0:e.type)==="confirm_action"||((n=t.from_server)==null?void 0:n.type)==="preview"||((s=t.from_server)==null?void 0:s.type)==="approve_tool_in_context_scope"))return(o=t.from_server.body.tool_call_safety_summary)!=null?o:void 0}function vze(t){const e=Ss(t);if(e)try{return JSON.parse(e)}catch(n){return{text:e}}}function p1t(t,e){var r,a;const{assistantMessage:n}=$T(t),{jitPluginData:s,lastConfirmActionJitPluginData:o}=kg(t,e);return(a=(r=P6(s))!=null?r:P6(o))!=null?a:vze(n)}function g1t(t,e){var o,r;const{jitPluginData:n,lastConfirmActionJitPluginData:s}=kg(t,e);return(r=(o=R6(n))!=null?o:R6(s))!=null?r:void 0}function Sze(t){if(!t)return;const e=t.content.content_type===vt.Text?t.content.parts[0]:t.content.content_type===vt.Code?t.content.text:void 0;if(e)try{return JSON.parse(e)}catch(n){return e}}const h1t=t=>{const{lastToolMessage:e}=$T(t);return Sze(e)},_1t=(t,e)=>{var s,o,r,a;const{jitPluginData:n}=kg(t,e);return((s=n==null?void 0:n.from_server)==null?void 0:s.type)==="confirm_action"?(a=(r=(o=n==null?void 0:n.from_server)==null?void 0:o.body)==null?void 0:r.offer_remember_answer)!=null?a:!0:!1},Cze=(t,e)=>{var s,o;const{jitPluginData:n}=kg(t,e);return((s=n==null?void 0:n.from_server)==null?void 0:s.type)!=="denied_by_user"&&!!((o=n==null?void 0:n.from_server)!=null&&o.body.actions.length)},x1t=(t,e)=>_ze(t)&&Cze(t,e),y1t=t=>{var n,s,o;const e=(o=(s=(n=t.metadata)==null?void 0:n.jit_plugin_data)==null?void 0:s.from_server)==null?void 0:o.type;return e==="confirm_action"||e==="activate_context_scope"||e==="approve_tool_in_context_scope"||e==="oauth_required"||e==="link_required"},wze=t=>v.createElement("svg",N({width:32,height:32,viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),v.createElement("path",{d:"M16.0001 28.4965C15.6149 28.4965 15.2149 28.3632 14.8149 28.1113C3.79268 21.2076 2.29639 16.0965 2.29639 12.0965C2.29639 7.31132 6.04453 3.50391 10.6816 3.50391C12.489 3.50391 14.5778 4.08168 16.0001 5.66687C17.4223 4.08168 19.5111 3.50391 21.3186 3.50391C25.9557 3.50391 29.7038 7.31132 29.7038 12.0965C29.7038 16.0965 28.2075 21.2076 17.1853 28.1113C16.7853 28.3632 16.3853 28.4965 16.0001 28.4965Z",fill:"var(--potion-icon-color, #F75858)"}));function GW(r){var a=r,{icon:t=wze,className:e,showBackground:n=!1,backgroundClassName:s}=a,o=De(a,["icon","className","showBackground","backgroundClassName"]);const l=i.jsx(t,G(N({},o),{className:q("dark:[--potion-icon-color:#FF928C]",e)}));return n?i.jsx("span",{className:q("inline-flex items-center justify-center rounded-full p-3",xie,s),children:l}):l}const ii=je(()=>Me(()=>import("./431227fe-cmv63jfspg5m358b.js"),__vite__mapDeps([337,1,2,3])).then(t=>t.PotionOnboardingModal));function kze(){"use forget";const t=D.c(6),{eligible:e,isLoading:n}=Ct(We.hasSeenPotionOnboarding),s=v.useRef(!1),o=Eze;let r,a;t[0]!==e?(r=()=>{e&&s.current&&(s.current=!1,o())},a=[e,o],t[0]=e,t[1]=r,t[2]=a):(r=t[1],a=t[2]),v.useEffect(r,a);let l;return t[3]!==e||t[4]!==n?(l=()=>{if(e){o();return}n&&(s.current=!0)},t[3]=e,t[4]=n,t[5]=l):l=t[5],l}function Eze(){rt(ii,{onDismiss:Mze,onComplete:Tze})}async function Tze(){await kt(We.hasSeenPotionOnboarding),Yn(ii)}function Mze(){Yn(ii)}function b1t(){"use forget";const t=D.c(9),{eligible:e,isLoading:n}=Ct(We.hasSeenPotionOnboarding),s=v.useRef(!1),o=v.useRef(null);let r;t[0]===Symbol.for("react.memo_cache_sentinel")?(r=m=>{var p;(p=o.current)==null||p.call(o,m),o.current=null,s.current=!1},t[0]=r):r=t[0];const a=r;let l;t[1]===Symbol.for("react.memo_cache_sentinel")?(l=()=>{rt(ii,{onDismiss:()=>{Yn(ii),a("dismissed")},onComplete:async()=>{await kt(We.hasSeenPotionOnboarding),Yn(ii),a("completed")}})},t[1]=l):l=t[1];const c=l;let u,d;t[2]!==e||t[3]!==n?(u=()=>{if(s.current){if(e){c();return}n||a("skipped")}},d=[e,n,c,a],t[2]=e,t[3]=n,t[4]=u,t[5]=d):(u=t[4],d=t[5]),v.useEffect(u,d);let f;return t[6]!==e||t[7]!==n?(f=()=>e?(c(),new Promise(m=>{o.current=m})):n?(s.current=!0,new Promise(m=>{o.current=m})):Promise.resolve("skipped"),t[6]=e,t[7]=n,t[8]=f):f=t[8],f}const Aze="User granted permission to activate the requested scope. Continue in the Health scope.",Nze="User denied permission to activate the requested scope. Continue outside the Health scope.",Ize=async({clientThreadId:t,gizmoId:e,updateConversationGizmo:n,queryClient:s})=>{var c,u;const o=await ue.safeGet("/gizmos/firstparty/sidebar"),r=(u=(c=o==null?void 0:o[0])==null?void 0:c.gizmo)==null?void 0:u.id,a=Lt(t);if(!r||!a)return!1;const l=["HEALTH"];return await n({newGizmoId:r,conversation:new qv(a),previousGizmoId:e!=null?e:null,optimistic:!0}),pt(t,d=>{d.mode={kind:Bt.GizmoInteraction,gizmo_id:r},d.contextScopes=l}),Fo(s,r),s.invalidateQueries({queryKey:$W}),s.invalidateQueries({queryKey:y1(s,r).queryKey}),e&&s.invalidateQueries({queryKey:y1(s,e).queryKey}),s.invalidateQueries({queryKey:Jee()}),!0};function v1t({serverMsg:t,clientThreadId:e,assistantMessage:n,onRequestCompletion:s,gizmoId:o,onDismiss:r}){var y,S,C,w,k,E;const a=kze(),[l,c]=v.useState(!1),u=sk(),d=Dt(),f=te(),m=Nt(),p=(S=(y=t==null?void 0:t.body)==null?void 0:y.actions)==null?void 0:S.find(T=>T.type==="allow"),g=(w=(C=t==null?void 0:t.body)==null?void 0:C.actions)==null?void 0:w.find(T=>T.type==="deny"),h=(k=p==null?void 0:p.allow)==null?void 0:k.target_message_id,_=(E=g==null?void 0:g.deny)==null?void 0:E.target_message_id,x=async()=>{if(h)try{c(!0),await Ize({clientThreadId:e,gizmoId:o,updateConversationGizmo:u,queryClient:m}),a(),j6({eventSource:"mouse",clientThreadId:e,assistantMessage:n,onRequestCompletion:s,actionData:{type:"allow",target_message_id:h},messageTextContent:Aze}),r()}catch(T){d.danger(f.formatMessage(Fl.allowFailure))}finally{c(!1)}},b=()=>{if(_)try{j6({eventSource:"mouse",clientThreadId:e,assistantMessage:n,onRequestCompletion:s,actionData:{type:"deny",target_message_id:_},messageTextContent:Nze}),r()}catch(T){d.danger(f.formatMessage(Fl.denyFailure))}};return i.jsxs("div",{className:"border-token-border-default bg-token-surface-primary g-1 mb-2 w-1/2 rounded-3xl border p-6 text-center",children:[i.jsx("div",{className:"bg-token-surface-elevated mx-auto mb-3 inline-flex h-12 w-12 items-center justify-center rounded-xl shadow-sm",children:i.jsx(GW,{className:"h-8 w-8","aria-hidden":!0})}),i.jsxs("div",{className:"flex flex-col gap-0.5",children:[i.jsx("div",{className:"text-token-text-primary text-xl font-medium",children:i.jsx(P,N({},Fl.allowHealthTitle))}),i.jsx("div",{className:"text-token-text-secondary mb-5 text-sm",children:i.jsx(P,G(N({},Fl.allowHealthDescription),{values:{learnMore:i.jsx(Hd,{href:"https://todo",target:"_blank",rel:"noreferrer",className:"underline",children:i.jsx(P,N({},Fl.learnMore))})}}))})]}),i.jsxs("div",{className:"flex items-stretch justify-center gap-2",children:[i.jsx(Se,{color:"secondary",size:"large",onClick:b,className:"flex-1",children:i.jsx(P,N({},Fl.notNow))}),i.jsx(Se,{color:"primary",size:"large",disabled:l,onClick:x,className:"flex-1",children:l?i.jsx(P,N({},Gl.allowing)):i.jsx(P,N({},Fl.continue))})]})]})}const Fl=we({allowHealthTitle:{id:"EMRa7P",defaultMessage:"Continue chat with Health?"},allowHealthDescription:{id:"aqbSYC",defaultMessage:"Allow access to your Health data for a more personalized response."},learnMore:{id:"m0e5px",defaultMessage:"Learn more"},continue:{id:"N0nLCb",defaultMessage:"Continue"},notNow:{id:"plUYVZ",defaultMessage:"Not now"},allowFailure:{id:"b4eC5B",defaultMessage:"Something went wrong while activating Health. Please try again."},denyFailure:{id:"9mqnXc",defaultMessage:"Something went wrong while declining the request. Please try again."}}),VW=t=>{var e,n;return((n=(e=t==null?void 0:t.suggested_connector_ids)==null?void 0:e.length)!=null?n:0)>0},zW=t=>!!(t!=null&&t.suggested_context_scope),WW=t=>!!(t!=null&&t.suggested_first_party_project_type),S1t=t=>{const e=t.metadata;return VW(e)||zW(e)||WW(e)},C1t=t=>t.recipient==="api_tool.call_tool",w1t=t=>t.recipient===bde,jze=t=>{var e;t=Array.isArray(t)?t:[t];for(let n=t.length-1;n>=0;n--){const{metadata:s}=t[n];if((e=s==null?void 0:s.suggested_connector_ids)!=null&&e.length)return s.suggested_connector_ids}return[]},qW=u_(jze),KW="connector_openai_",YW=()=>["connector_5f3c8c41a1e54ad7a76272c89e2554fa","connector_1e4f6a44acf14e3ca1d96672f8c945bc"],Pze=t=>qW(t).filter(e=>e.startsWith(KW)||YW().includes(e)),k1t=u_(Pze),Rze=t=>qW(t).filter(e=>!e.startsWith(KW)&&!YW().includes(e)),E1t=u_(Rze),T1t=t=>{t=Array.isArray(t)?t:[t];for(let e=t.length-1;e>=0;e--){const{id:n,metadata:s}=t[e];if(VW(s)||zW(s)||WW(s))return n}},M1t=t=>{t=Array.isArray(t)?t:[t];for(let e=t.length-1;e>=0;e--){const{metadata:n}=t[e];if(n!=null&&n.suggested_context_scope)return n.suggested_context_scope}},A1t=t=>{t=Array.isArray(t)?t:[t];for(let e=t.length-1;e>=0;e--){const{metadata:n}=t[e];if(n!=null&&n.suggested_context_scope_action_label)return n.suggested_context_scope_action_label}},N1t=t=>{t=Array.isArray(t)?t:[t];for(let e=t.length-1;e>=0;e--){const{metadata:n}=t[e];if(n!=null&&n.suggested_first_party_project_type)return n.suggested_first_party_project_type}},I1t=t=>{t=Array.isArray(t)?t:[t];for(let e=t.length-1;e>=0;e--){const{metadata:n}=t[e];if(n!=null&&n.suggested_first_party_project_type_action_label)return n.suggested_first_party_project_type_action_label}},j1t=t=>{t=Array.isArray(t)?t:[t];for(let e=t.length-1;e>=0;e--){const{metadata:n}=t[e];if(n!=null&&n.cta_by_suggested_connector_id)return n.cta_by_suggested_connector_id}return{}},P1t=t=>{t=Array.isArray(t)?t:[t];for(let e=t.length-1;e>=0;e--){const{metadata:n}=t[e];if(n!=null&&n.cta_subtitle_by_suggested_connector_id)return n.cta_subtitle_by_suggested_connector_id}return{}},Oze="bg-token-main-surface-primary text-token-text-primary",Lze="openai",O6=["bg-blue-300 text-white"];function Dze(t){var e;return O6[((e=t==null?void 0:t.charCodeAt(0))!=null?e:0)%O6.length]}const Lh=({children:t})=>i.jsx("div",{className:"pt-0",children:i.jsx("div",{className:q(v.isValidElement(t)&&t.type===I1?"gizmo-bot-avatar":"gizmo-shadow-stroke","flex h-8 w-8 items-center justify-center overflow-hidden rounded-full"),children:t})});function R1t(t){var m;const{messages:e,isUserTurn:n,avatarClassName:s,gizmo:o}=t,r=e[0],a=(m=r==null?void 0:r.metadata)==null?void 0:m.shared_conversation_id,l=a!=null,c=_n(),{gizmoEditorData:u,mode:d}=n7();let f=i.jsx(Lh,{children:i.jsx(I1,{className:s!=null?s:Oze,iconName:Lze})});return o?f=i.jsx(Lh,{children:i.jsx(wLe,{gizmoId:o.gizmo.id,className:"h-full w-full"})}):u!=null&&d==="test"&&(f=i.jsx(Mx,{isFirstParty:!1,src:u.profilePictureUrl,className:"h-8 w-8 first:pt-[3px]"})),i.jsx("div",{children:n?l?i.jsx(Lh,{children:i.jsx(I1,{className:Dze(a),iconName:"user"})}):i.jsx(Lh,{children:i.jsx(s3,{user:c})}):f})}const Bze=tn(()=>({displayingSideBySideFeedback:!1}));function Fze({messages:t,isRequestActive:e,isLastMessageInTurn:n,isRetrieval:s,isUsingGizmo:o,isUsingProject:r,gizmoId:a}){var y,S;const l=vn(),c=X(()=>{if(!s||!o||!r||a==null)return null;const C=y_(l,a);return rte(C.serverState$().data)}),u=JW({messages:t}),d=Uze(t),f=d.filter(C=>Yze(C,!1)&&!Zze(C)),m=(y=f[f.length-1])!=null?y:void 0,p=te();if(Qze(t).some(({content:C})=>C.content_type===vt.SystemError))return null;let g=gn.Running;const h=f.filter(C=>C.type===Xt.Search).length,_={count:f.length-h,domain:m?D7((S=Px(m))!=null?S:""):void 0,query:m?ZW(m):void 0};let x=s?o?r?p.formatMessage(c==="potion"?kn.searchingContext:kn.searchingProjectContext):p.formatMessage({id:"browsingMessage.searchingKnowledge",defaultMessage:"Searching my knowledge"}):p.formatMessage({id:"browsingMessage.startingRetrieval",defaultMessage:"Reading documents"}):p.formatMessage({id:"message.tools.browse.running",defaultMessage:"Searching the web"});return t.some(_D)?(g=gn.Stopped,x=s?o?p.formatMessage({id:"browsingMessage.searchingKnowledgeStopped",defaultMessage:"Stopped searching knowledge"}):p.formatMessage({id:"browsingMessage.retrievalStopped",defaultMessage:"Stopped reading documents"}):p.formatMessage({id:"message.tools.browse.stopped",defaultMessage:"Search stopped"})):!n||!e?d.length>0&&d.every(C=>C.didError)?(g=gn.Error,x=s?o?p.formatMessage({id:"browsingMessage.searchingKnowledgeFailed",defaultMessage:"Error searching knowledge"}):p.formatMessage({id:"browsingMessage.retrievalFailed",defaultMessage:"Error reading documents"}):p.formatMessage({id:"message.tools.browse.failed",defaultMessage:"Search failed"})):(g=gn.Finished,x=s?null:_.count===0?p.formatMessage({id:"message.tools.browse.started",defaultMessage:"Searching the web..."}):p.formatMessage({id:"message.tools.browse.finished",defaultMessage:"Searched {count, plural, =0 {0 sites} one {# site} other {# sites}}"},_)):u.length>0?x=XW({contextualAnswerSources:u,intl:p}):f.length>0&&(x=qze(p,_,s,o,f[f.length-1])),(f.length>0||s&&n)&&g!==gn.Error?i.jsx(xE,{highlightedCommand:x,showWorkUserSetting:!1,status:g,children:f.length===0?null:i.jsx(Hze,{commands:f})}):i.jsx(Jze,{$isError:g===gn.Error,children:x})}function L6(t){var e,n,s;return((e=t.metadata)==null?void 0:e.command)==="quote"||((n=t.metadata)==null?void 0:n.command)==="quote_full"||((s=t.metadata)==null?void 0:s.command)==="quote_lines"}function Uze(t){return t.map((e,n)=>{if(e.author.role!==dt.Tool||n>0&&L6(e)&&L6(t[n-1]))return null;const s=e.metadata;if(!s)return null;const{command:o,status:r}=s;return o?{type:o,status:r,didError:e.content.content_type===vt.SystemError,message:e}:null}).filter(bp)}function Hze({commands:t}){const e=te();return i.jsx("div",{className:"divide-token-border-default border-token-border-default mb-4 divide-y rounded-xl border text-sm",children:i.jsx(In,{initial:!1,children:t.map((n,s)=>{const o=Vze(n);if(o==null)return null;const{icon:r,url:a,title:l,externalLink:c}=o,u=a?D7(a):void 0,d=l?typeof l=="string"?l:e.formatMessage(l):null,f=a&&ME(a);return i.jsx(wt.div,{initial:"collapsed",animate:"open",variants:{open:{opacity:1,height:"auto"},collapsed:{opacity:0,height:0}},children:i.jsxs($ze,{url:c!=null?c:a,className:q("flex items-start gap-3 px-4 py-3",l?"text-token-text-secondary":"text-token-text-primary",s===0&&"rounded-t-xl",s===t.length-1&&"rounded-b-xl"),children:[r?i.jsx(r,{className:"icon-sm text-token-text-secondary mt-0.5 shrink-0"}):a?i.jsx(Ns,{url:a,className:"mt-1"}):null,i.jsxs("div",{children:[d&&i.jsxs("div",{className:"text-token-text-primary line-clamp-1",children:[f&&"".concat(f,"  "),d]}),i.jsx("div",{children:u})]})]})},s)})})})}function $ze({url:t,children:e,className:n}){return t?i.jsxs("a",{href:t,target:"_blank",className:q(n,"group hover:bg-token-main-surface-secondary relative"),rel:"noreferrer",children:[e,i.jsx("div",{className:"from-token-main-surface-secondary invisible absolute end-3 bg-linear-to-l to-transparent ps-4 group-hover:visible",children:i.jsx(ka,{className:"icon text-token-text-secondary"})})]}):i.jsx("div",{className:n,children:e})}function Gze(t){var n,s;const e=(s=(n=t.message.metadata)==null?void 0:n._cite_metadata)==null?void 0:s.metadata_list[0];return e!=null&&e.type!=="file"?e.title:null}function ZW(t){var e,n;return(n=(e=t.message.metadata)==null?void 0:e.args)==null?void 0:n[0]}function Vze(t){var e,n,s;switch(t.type){case Xt.Search:{const o=(e=t.message.metadata)==null?void 0:e.search_engine;if(o&&o!==ite.Bing)return null;const r=ZW(t);return{icon:o_,url:((n=t.message.metadata)==null?void 0:n.message_source)==="apple"?null:"bing.com",externalLink:Wze(t),title:r?"".concat(r,""):qe({id:"message.tools.browse.querying",defaultMessage:"Querying"})}}case Xt.Click:case Xt.MultiClick:case Xt.Lookup:case Xt.OpenUrl:case Xt.Open:case Xt.Quote:case Xt.QuoteFull:case Xt.QuoteLines:case Xt.Scroll:return{url:Px(t),title:(s=Gze(t))!=null?s:void 0};case Xt.Spinner:case Xt.Back:return null}}function zze(t){const e=new URLSearchParams({query:t.query});return"".concat(mc,"/bing/redirect?").concat(e.toString())}function Wze(t){var n,s;const e=(s=(n=t.message.metadata)==null?void 0:n.args)==null?void 0:s[0];return e===void 0?null:zze({query:e})}function qze(t,e,n,s,o){switch(o==null?void 0:o.type){case Xt.Click:case Xt.MultiClick:case Xt.Lookup:case Xt.OpenUrl:case Xt.Quote:case Xt.QuoteFull:case Xt.QuoteLines:case Xt.Scroll:case Xt.Open:case Xt.Back:return t.formatMessage({id:"message.tools.browse.reading",defaultMessage:"Browsing {domain}"},e);case Xt.Search:case void 0:return n?s?t.formatMessage({id:"browsingMessage.searchingKnowledge",defaultMessage:"Searching my knowledge"}):t.formatMessage({id:"browsingMessage.startingRetrieval",defaultMessage:"Reading documents"}):t.formatMessage({id:"message.tools.browse.searching",defaultMessage:'Searching "{query}"'},e);case Xt.Spinner:return null}}function Kze(t){var n,s;const e=(s=(n=t.message.metadata)==null?void 0:n._cite_metadata)==null?void 0:s.metadata_list[0];return e!=null&&e.type==="file"?e.name:null}function Yze(t,e){switch(t.type){case Xt.Search:return!0;case Xt.Click:case Xt.Lookup:case Xt.MultiClick:case Xt.OpenUrl:case Xt.Quote:case Xt.QuoteFull:case Xt.QuoteLines:return e?Kze(t)!=null:Px(t)!=null;case Xt.Open:case Xt.Back:case Xt.Scroll:case Xt.Spinner:return!1}}function Zze(t){var e;return((e=t.message.metadata)==null?void 0:e.message_source)==="apple"}function Px(t){var n,s;const e=(s=(n=t.message.metadata)==null?void 0:n._cite_metadata)==null?void 0:s.metadata_list[0];return e!=null&&e.type!=="file"?e.url:null}function Qze(t){return t.filter(e=>e.author.role===dt.Tool)}var kP;const Jze=Tt.p(kP||(kP=_t(["first:mt-0 my-1.5 h-8 flex items-center ltr:me-auto rtl:ms-auto empty:hidden\n",""])),({$isError:t})=>t?"text-token-text-error":"text-token-text-secondary"),GT={aha_sync_connector:"Aha!",asana_sync_connector:"Asana",azure_devops_sync_connector:"Azure Boards",basecamp_sync_connector:"Basecamp",google_drive:"Google Drive",sharepoint:"SharePoint",slack:"Slack",github:"GitHub",clickup_sync_connector:"ClickUp",dropbox_sync_connector:"Dropbox",box_sync_connector:"Box",linear_sync_connector:"Linear",intercom_sync_connector:"Intercom",notion_sync_connector:"Notion",confluence_sync_connector:"Confluence",jira_sync_connector:"Jira",jira_servicemanagement_sync_connector:"Jira Service",hubspot_sync_connector:"HubSpot",salesforce_sync_connector:"Salesforce",front_sync_connector:"Front",gitlab_sync_connector:"GitLab Issues",helpscout_sync_connector:"Help Scout",ironclad_sync_connector:"Ironclad",pipedrive_sync_connector:"Pipedrive",shortcut_sync_connector:"Shortcut",teamwork_sync_connector:"Teamwork.com",zendesk_sync_connector:"Zendesk",zoho_sync_connector:"Zoho",zoho_desk_sync_connector:"Zoho Desk",slurm_sharepoint:"SharePoint",slurm_linear:"Linear",slurm_box:"Box",slurm_dropbox:"Dropbox",slurm_gmail:"Gmail",slurm_google_drive:"Google Drive",slurm_notion:"Notion",slurm_hubspot:"HubSpot"},QW={aha_sync_connector:S9,asana_sync_connector:v9,azure_devops_sync_connector:b9,basecamp_sync_connector:p9,google_drive:Ys,sharepoint:jm,slack:c_,github:wp,clickup_sync_connector:y9,dropbox_sync_connector:oc,box_sync_connector:uv,linear_sync_connector:dv,intercom_sync_connector:C9,notion_sync_connector:sc,confluence_sync_connector:e7,jira_sync_connector:X9,jira_servicemanagement_sync_connector:ote,hubspot_sync_connector:tc,salesforce_sync_connector:ste,front_sync_connector:nte,gitlab_sync_connector:x9,helpscout_sync_connector:_9,ironclad_sync_connector:tte,pipedrive_sync_connector:ete,shortcut_sync_connector:Xee,teamwork_sync_connector:h9,zendesk_sync_connector:g9,zoho_sync_connector:VM,zoho_desk_sync_connector:VM,slurm_sharepoint:jm,slurm_linear:dv,slurm_box:uv,slurm_dropbox:oc,slurm_gmail:$a,slurm_google_drive:Ys,slurm_notion:sc,slurm_hubspot:tc},JW=({messages:t})=>[...t.filter(ate).reduce((s,o)=>{var r,a;return(a=(r=o.metadata)==null?void 0:r.retrieval_search_sources)==null||a.forEach(l=>{(l.product_type==="contextual_answers"||l.product_type==="slurm")&&l.source_name in GT&&s.add(l.source_name)}),s},new Set)],XW=({contextualAnswerSources:t,intl:e})=>{const n=t.map(r=>{var a;return(a=GT[r])!=null?a:r}).filter(Boolean),s=t.map(r=>{var l;const a=(l=QW[r])!=null?l:hT;return i.jsx(a,{className:"icon-sm"},r)}).filter(Boolean),o=t.length===1?e.formatMessage({id:"Jzt2om",defaultMessage:"Reading {source}"},{source:n[0]}):t.length===2?e.formatMessage({id:"wTM7gR",defaultMessage:"Reading {source1} and {source2}"},{source1:n[0],source2:n[1]}):e.formatMessage({id:"xnwjH1",defaultMessage:"Reading {source1}, {source2} and more"},{source1:n[0],source2:n[1]});return t.length>0?i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"flex items-center gap-1",children:s}),o]}):void 0},O1t=Object.freeze(Object.defineProperty({__proto__:null,BrowsingMessage:Fze,CA_SOURCE_TO_ICON_MAP:QW,CA_SOURCE_TO_TEXT_MAP:GT,getCASources:JW,getContextualAnswerDisplayText:XW,getVisitedUrl:Px},Symbol.toStringTag,{value:"Module"})),Xze=/^(\d+)([^]*)([^]+)?$/,eWe=["Citation Marker","Content Snippet","Content source","File created at","File last modified at","Mclick Target","Title"];function L1t(t){const e=[];if(!t||typeof t!="object")return null;if(!Object.hasOwn(t,"results"))return null;const n=t.results;if(!Array.isArray(n))return null;const s=n.map(D6);for(const r of s){if(r==null)return null;e.push(r)}let o;if(Object.hasOwn(t,"debug_info")){const r=t.debug_info;if(!r||typeof r!="object"||!Object.hasOwn(r,"retrieval_results")||!Array.isArray(r.retrieval_results))return null;const a=r.retrieval_results;o={retrieval_results:[]};for(const l of a){if(!l||typeof l!="object"||typeof l.query!="string"||!Array.isArray(l.results))return null;const c=l.query,u=l.results.map(D6),d=[];for(const f of u){if(!f)return null;d.push(f)}o.retrieval_results.push({query:c,results:d})}}return{results:e,debug_info:o}}function D6(t){const e={};if(!t||typeof t!="object")return null;for(const[n,s]of Object.entries(t))n==="score"&&typeof s=="number"?e.score=s:["document_id","content","title","created_at","updated_at","file_created_at","file_modified_at","document_chunk_id","cloud_doc_url","document_source"].includes(n)&&(s==null||typeof s=="string")&&(e[n]=s!=null?s:void 0);return e.document_id==null||e.content==null?null:G(N({},e),{document_id:e.document_id,content:e.content})}function tWe(t){var a;if(!t.startsWith("# "))return null;const e=t.slice(2),n=Xze.exec(e);if(!n||n.length<3)return null;const s=parseInt(n[1],10),o=n[2],r=((a=n[3])==null?void 0:a.slice(1))||void 0;return{resultNum:s,title:o,documentId:r}}function eq(t,e){var a,l;const n=[];let s=null,o="";const r=t.split("\n");r.length>0&&r[r.length-1].startsWith("Visible: ")&&(o=(a=r.pop())!=null?a:"");for(const c of r){const u=c.trim(),d=tWe(u);if(d){const{resultNum:f,documentId:m,title:p}=d;s&&n.push(s),s={resultNum:f,title:(l=p||m)!=null?l:"",documentId:m,contents:"",metadata:{}}}else if(s)if(s.contents)s.contents+="\n".concat(c);else{let f=!1;for(const m of eWe){const p="".concat(m,":");if(u.startsWith(p)){s.metadata[m]=u.slice(p.length),f=!0;break}}f||(s.contents=c)}}if(s&&n.push(s),e)for(let c=0;c<n.length;c++)n[c].metadata.cloud_doc_url?n[c].cloudDocUrl=String(n[c].metadata.cloud_doc_url):c<e.length&&(n[c].cloudDocUrl=e[c]);return{visibilityLine:o,chunks:n}}function D1t(t){const e=t.content;switch(e.content_type){case vt.Text:return e.parts.join();case vt.ExecutionOutput:case vt.SystemError:case vt.Code:case vt.SystemMessage:case vt.TetherQuote:case vt.TetherBrowsingCode:return e.text;case vt.TetherBrowsingDisplay:return e.result;case vt.SonicWebpage:return e.text;case vt.UserEditableContext:case vt.ModelEditableContext:case vt.Error:return null;case vt.MultimodalText:return B6(e.parts);case vt.SystemContent:case vt.DeveloperContent:return e.instructions==null?null:typeof e.instructions=="string"?e.instructions:B6(e.instructions);case vt.StructuredThoughts:case vt.ReasoningRecap:return null;case vt.ComputerOutput:return null;case vt.SuperWidget:return null;case vt.CitableCodeOutput:return e.output_str}}function B6(t){return t.filter(e=>typeof e=="string").join()}function B1t(t){var s;const e=t.trim().split("/").filter(o=>o.length>0);if(!e.length)return null;const n=e[0].trim();return n?{connectorName:n==="uploaded_files:"?"uploaded files":n,Icon:(s=eE(n))!=null?s:Ir}:null}const nWe=250,sWe=700;function F1t(t){"use forget";var Ce,ge,Re,ke;const e=D.c(60),{handleShowRetrievalResults:n,clientThreadId:s,turnIndex:o,className:r,responseComplete:a}=t,l=vn();let c;e[0]!==o?(c=he=>ve.getConversationTurnAtIndex(he,o).messages,e[0]=o,e[1]=c):c=e[1];const u=Ze(s,c);let d;e[2]!==s?(d=()=>Fn(Pt(s)),e[2]=s,e[3]=d):d=e[3];const f=X(d),m=UW(f);let p;e[4]!==s||e[5]!==a||e[6]!==o?(p={clientThreadId:s,turnIndex:o,responseComplete:a},e[4]=s,e[5]=a,e[6]=o,e[7]=p):p=e[7];const g=p;let h;e[8]===Symbol.for("react.memo_cache_sentinel")?(h=function(Ee){var Ae;const Pe=new Map;for(const de of Ee){const oe=((Ae=de.name)!=null?Ae:"").trim().toLowerCase();Pe.set(oe,de)}return Pe.size<3?Ee:Array.from(Pe.values())},e[8]=h):h=e[8];const _=h;let x;e[9]!==l||e[10]!==m?(x=()=>{if(m)return ip(l,{skipLogos:!1})},e[9]=l,e[10]=m,e[11]=x):x=e[11];const b=X(x);let y;e:{if(!m){let Ee;e[12]===Symbol.for("react.memo_cache_sentinel")?(Ee=[],e[12]=Ee):Ee=e[12],y=Ee;break e}let he;if(e[13]!==b||e[14]!==u){const Ee=new Map,Pe=new Set;for(const Ae of u)if(Ae.author.role===dt.Tool&&Ae.author.name==="api_tool.call_tool"&&Ae.content.content_type===vt.MultimodalText&&((Ce=Ae.metadata)==null?void 0:Ce.api_tool_type)==="glaux"){const de=(ge=Ae.metadata)==null?void 0:ge.citation_metadata,oe=de==null?void 0:de.id;if(!de||!oe||!de.url)continue;const se=typeof(de==null?void 0:de.__connector_id)=="string"?de.__connector_id:void 0,{Icon:Oe,appName:Ne}=rS({connectorId:se,cloud_doc_url:de.url,availableConnectors:b}),ze={id:oe,Icon:Oe,appName:Ne,name:de.title,cloud_doc_url:de.url,connectorId:se};Ee.set(oe,ze)}else if(TT(Ae)){const de=eq(Ae.content.result),oe=(ke=(Re=Ae.metadata)==null?void 0:Re.cloud_doc_urls)!=null?ke:[];de.chunks.forEach((se,Oe)=>{if(!se.documentId||Pe.has(se.documentId))return;let Ne;if(se.metadata.cloud_doc_url)Ne=se.metadata.cloud_doc_url.toString();else if(Oe<oe.length)Ne=oe[Oe];else if(se.documentId.endsWith("--google")){const Le=se.documentId.split("--")[1];Ne="https://drive.google.com/file/d/".concat(Le)}if(!Ne)return;Pe.add(se.documentId);const{Icon:ze,appName:Qe}=rS({cloud_doc_url:Ne});Ee.set(se.documentId,{id:se.documentId,name:se.title,cloud_doc_url:Ne,Icon:ze,appName:Qe})})}he=Array.from(Ee.values()).filter(lWe),e[13]=b,e[14]=u,e[15]=he}else he=e[15];y=he}const S=y;let C;if(e[16]!==S){const he=new Map;for(const Ee of S)Ee.Icon&&he.set(Ee.appName,Ee.Icon);C=Array.from(he.values()).slice(0,3),e[16]=S,e[17]=C}else C=e[17];const w=C,k=v.useRef(!1);let E;e[18]!==g||e[19]!==S.length?(E=()=>{k.current||S.length>0&&(k.current=!0,V.logEvent("File Sources Carousel Shown",g))},e[18]=g,e[19]=S.length,e[20]=E):E=e[20];let T;e[21]!==g||e[22]!==S?(T=[S,g],e[21]=g,e[22]=S,e[23]=T):T=e[23],v.useEffect(E,T);let M;e[24]!==S?(M=_(S),e[24]=S,e[25]=M):M=e[25];const A=M,[I,j]=v.useState(0),[R,O]=v.useState(!1);let L;e[26]===Symbol.for("react.memo_cache_sentinel")?(L=[],e[26]=L):L=e[26];const B=v.useRef(L);let U;e[27]!==A?(U=A.map(iWe).join("|"),e[27]=A,e[28]=U):U=e[28];const H=U,$=v.useRef(0);let F,z;e[29]!==I?(F=()=>{$.current=I},z=[I],e[29]=I,e[30]=F,e[31]=z):(F=e[30],z=e[31]),v.useEffect(F,z);const W=v.useRef(!1);let Y,K;e[32]!==R?(Y=()=>{W.current=R},K=[R],e[32]=R,e[33]=Y,e[34]=K):(Y=e[33],K=e[34]),v.useEffect(Y,K);let Z;e[35]!==A.length||e[36]!==S.length?(Z=()=>{if(B.current.forEach(aWe),B.current=[],A.length===0){v.startTransition(()=>{O(!1),j(0)});return}const he=Math.min($.current,A.length,3),Ee=he>0?he:Math.min(1,A.length);v.startTransition(()=>{j(Ee),S.length<=3&&O(!1)});const Pe=Math.min(3,A.length);for(let Ae=Ee;Ae<Pe;Ae=Ae+1,Ae){const de=window.setTimeout(()=>{j(oe=>Math.max(oe,Ae+1))},nWe*Ae);B.current.push(de)}if(S.length>3&&!W.current){const Ae=window.setTimeout(()=>O(!0),sWe);B.current.push(Ae)}return()=>{B.current.forEach(rWe),B.current=[]}},e[35]=A.length,e[36]=S.length,e[37]=Z):Z=e[37];let J;e[38]!==H||e[39]!==A.length||e[40]!==S.length?(J=[H,A.length,S.length],e[38]=H,e[39]=A.length,e[40]=S.length,e[41]=J):J=e[41],v.useEffect(Z,J);const Q=Math.min(I,A.length),ne=R&&S.length>3;if(S.length===0)return null;let ie;e[42]!==r?(ie=q("flex w-full flex-row gap-2",r),e[42]=r,e[43]=ie):ie=e[43];let fe;e[44]===Symbol.for("react.memo_cache_sentinel")?(fe=q("flex w-full flex-1 transform-gpu flex-row justify-start gap-2"),e[44]=fe):fe=e[44];let ae;e[45]!==A||e[46]!==Q?(ae=A.slice(0,Q).map(oWe),e[45]=A,e[46]=Q,e[47]=ae):ae=e[47];let le;e[48]!==g||e[49]!==n||e[50]!==w||e[51]!==S.length||e[52]!==ne?(le=ne&&i.jsx(uWe,{overflowIcons:w,count:S.length,onClick:()=>{V.logEvent("File Sources Carousel Clicked",g),n()}}),e[48]=g,e[49]=n,e[50]=w,e[51]=S.length,e[52]=ne,e[53]=le):le=e[53];let pe;e[54]!==ae||e[55]!==le?(pe=i.jsxs("div",{className:fe,children:[ae,le]}),e[54]=ae,e[55]=le,e[56]=pe):pe=e[56];let _e;return e[57]!==ie||e[58]!==pe?(_e=i.jsx("div",{className:ie,children:pe}),e[57]=ie,e[58]=pe,e[59]=_e):_e=e[59],_e}function oWe(t){return i.jsx(cWe,{item:t},t.id)}function rWe(t){return window.clearTimeout(t)}function aWe(t){return window.clearTimeout(t)}function iWe(t){return t.id}function lWe(t){return!!t.cloud_doc_url}const cWe=v.memo(function(e){"use forget";const n=D.c(15),{item:s}=e;if(!s)return null;let o,r,a;n[0]===Symbol.for("react.memo_cache_sentinel")?(o={opacity:0,x:6},r={opacity:1,x:0},a={type:"spring",stiffness:180,damping:26,mass:.8},n[0]=o,n[1]=r,n[2]=a):(o=n[0],r=n[1],a=n[2]);const l=s.cloud_doc_url;let c;n[3]===Symbol.for("react.memo_cache_sentinel")?(c=q("block h-[64px] min-w-0 flex-1 basis-0","corner-superellipse/1.1 relative flex flex-col gap-1 rounded-2xl px-4 py-3","border-token-border-default border","bg-token-bg-primary","hover:bg-token-bg-tertiary cursor-pointer"),n[3]=c):c=n[3];const u=s.Icon?s.Icon:null;let d;n[4]!==s.appName?(d=i.jsx("div",{className:"text-token-text-secondary line-clamp-1 text-xs",children:s.appName}),n[4]=s.appName,n[5]=d):d=n[5];let f;n[6]!==u||n[7]!==d?(f=i.jsxs("div",{className:"flex items-center gap-1",children:[u,d]}),n[6]=u,n[7]=d,n[8]=f):f=n[8];let m;n[9]!==s.name?(m=i.jsx("div",{className:"text-token-text-primary line-clamp-1 truncate text-sm",children:s.name}),n[9]=s.name,n[10]=m):m=n[10];let p;return n[11]!==s.cloud_doc_url||n[12]!==f||n[13]!==m?(p=i.jsxs(wt.a,{initial:o,animate:r,transition:a,href:l,target:"_blank",rel:"noreferrer",className:c,children:[f,m]}),n[11]=s.cloud_doc_url,n[12]=f,n[13]=m,n[14]=p):p=n[14],p}),uWe=v.memo(function(e){"use forget";const n=D.c(15),{overflowIcons:s,count:o,onClick:r}=e;let a,l,c,u;n[0]===Symbol.for("react.memo_cache_sentinel")?(a={opacity:0,x:6},l={opacity:1,x:0},c={type:"spring",stiffness:180,damping:26,mass:.8},u={willChange:"transform, opacity"},n[0]=a,n[1]=l,n[2]=c,n[3]=u):(a=n[0],l=n[1],c=n[2],u=n[3]);let d;n[4]===Symbol.for("react.memo_cache_sentinel")?(d=Array.from({length:3}),n[4]=d):d=n[4];let f;n[5]!==s?(f=i.jsx("div",{className:"flex flex-row gap-1",children:d.map((h,_)=>{const x=s[_];return i.jsx("div",{children:x||i.jsx("div",{className:"icon-sm rounded-full object-cover"})},_)})}),n[5]=s,n[6]=f):f=n[6];let m;n[7]!==o?(m=i.jsx("div",{className:"text-token-text-primary text-start text-sm",children:i.jsx(P,{id:"aQJYKd",defaultMessage:"{count} {count, plural, one {source} other {sources}}",values:{count:o}})}),n[7]=o,n[8]=m):m=n[8];let p;n[9]!==f||n[10]!==m?(p=i.jsxs("div",{className:"flex h-full flex-col justify-between",children:[f,m]}),n[9]=f,n[10]=m,n[11]=p):p=n[11];let g;return n[12]!==r||n[13]!==p?(g=i.jsx(wt.button,{initial:a,animate:l,transition:c,style:u,className:"bg-token-bg-primary hover:bg-token-bg-tertiary border-token-border-default flex h-[64px] min-w-[110px] shrink-0 flex-col justify-between rounded-2xl border px-4 py-3",onClick:r,children:p}),n[12]=r,n[13]=p,n[14]=g):g=n[14],g}),dWe=new Map,Tm=(t,e,n)=>{!e||t.has(e)||t.set(e,{url:e,connectorId:n})},fWe=t=>{const e=new Map;return t.forEach(n=>{var s,o;if(n.type==="file"){Tm(e,(o=n.cloud_doc_url)!=null?o:(s=n.extra)==null?void 0:s.cloud_doc_url);return}n.type==="file_navlist"&&n.items.forEach(r=>{Tm(e,r.cloud_doc_url)})}),e},mWe=t=>{var n,s,o,r,a,l;const e=new Map;for(const c of t){if(TT(c)){const u=eq(c.content.result),d=(s=(n=c.metadata)==null?void 0:n.cloud_doc_urls)!=null?s:[],f=u.chunks;for(let m=0;m<f.length;m++){const p=f[m];if(!p.documentId)continue;if(m<d.length){Tm(e,d[m]);continue}const g=p.documentId.endsWith("--google")?p.documentId.split("--")[1]:void 0,h=(o=p.metadata.cloud_doc_url)!=null?o:g?"https://drive.google.com/file/d/".concat(g):void 0;Tm(e,h==null?void 0:h.toString())}break}if(c.author.role===dt.Tool&&c.author.name==="api_tool.call_tool"&&c.content.content_type===vt.MultimodalText&&((r=c.metadata)==null?void 0:r.api_tool_type)==="glaux"){const u=(a=c.metadata)==null?void 0:a.citation_metadata;if(!(u!=null&&u.url))continue;Tm(e,u.url,(l=u.__connector_id)!=null?l:"")}}return e},pWe=(t,e)=>{if(e.size===0)return t;if(t.size===0)return e;const n=new Map(t);for(const[s,o]of e.entries())n.has(s)||n.set(s,o);return n},gWe=(t,e)=>{const n=fWe(DDe(t,e)),o=BDe(t,e)?dWe:mWe(Mz(t,e));return pWe(n,o)},hWe=({urls:t,availableConnectors:e,isQuorumEnabled:n})=>{if(t.size===0)return new Set;const s=new Map;for(const[o,{connectorId:r}]of t.entries()){const{appName:a,Icon:l}=rS({connectorId:r,cloud_doc_url:o,availableConnectors:e});if(l?s.set(a,i.jsx("div",{className:"icon-sm",children:l})):n&&o.length>0?s.set(o,i.jsx(Ns,{url:o,className:"icon-sm object-cover",size:32,minSize:20,fallback:i.jsx(Ir,{className:"icon-sm"})})):s.set("connected-apps",i.jsx(Ir,{className:"icon-sm"})),s.size>2)break}return new Set(Array.from(s.values()))};function U1t(t){"use forget";const e=D.c(26),{handleShowRetrievalResults:n,clientThreadId:s,turnIndex:o,responseComplete:r}=t,a=r===void 0?!1:r,l=vn(),c=zUe();let u;e[0]!==s||e[1]!==a||e[2]!==o?(u={turnIndex:o,clientThreadId:s,responseComplete:a},e[0]=s,e[1]=a,e[2]=o,e[3]=u):u=e[3];const d=u,f=v.useRef(!1);let m,p;e[4]!==d?(m=()=>{f.current||(f.current=!0,V.logEvent("File Sources Footer Shown",d))},p=[d],e[4]=d,e[5]=m,e[6]=p):(m=e[5],p=e[6]),v.useEffect(m,p);let g;e[7]!==d||e[8]!==n?(g=()=>{V.logEvent("File Sources Footer Clicked",d),n()},e[7]=d,e[8]=n,e[9]=g):g=e[9];const h=g;let _;e[10]!==s?(_=Pt(s),e[10]=s,e[11]=_):_=e[11];const x=_;let b;e[12]!==x||e[13]!==l||e[14]!==c||e[15]!==o?(b=()=>{const A=Fn(x),j=HW(A)?ip(l,{skipLogos:!1}):void 0,R=gWe(x,o);return hWe({urls:R,availableConnectors:j,isQuorumEnabled:c})},e[12]=x,e[13]=l,e[14]=c,e[15]=o,e[16]=b):b=e[16];const y=X(b),S=X(ln);if(y.size===0&&!a||S)return null;let C,w,k;e[17]===Symbol.for("react.memo_cache_sentinel")?(w={opacity:0},k={opacity:1},C=q("not-prose group/footnote border-token-border-default bg-token-main-surface-primary hover:bg-token-main-surface-secondary corner-superellipse/1.1 mt-3 mb-2 flex w-fit items-center gap-1.5 rounded-xl border py-2","ps-3 pe-2.5"),e[17]=C,e[18]=w,e[19]=k):(C=e[17],w=e[18],k=e[19]);let E;e[20]!==y?(E=y.size>0&&i.jsx("div",{className:"flex flex-row-reverse gap-1",children:Array.from(y).reverse().map(_We)}),e[20]=y,e[21]=E):E=e[21];let T;e[22]===Symbol.for("react.memo_cache_sentinel")?(T=i.jsx("div",{className:"text-token-text-secondary flex items-center gap-0.5 text-xs font-semibold",children:i.jsx(P,{id:"/48IOP",defaultMessage:"Sources"})}),e[22]=T):T=e[22];let M;return e[23]!==h||e[24]!==E?(M=i.jsx("div",{className:"relative h-[60px]",children:i.jsx(wt.div,{className:"absolute h-[60px]",initial:w,animate:k,children:i.jsxs("button",{className:C,onClick:h,children:[E,T]})})}),e[23]=h,e[24]=E,e[25]=M):M=e[25],M}function _We(t,e){return i.jsx(wt.div,{className:q("border-token-main-surface-primary bg-token-main-surface-primary flex items-center overflow-hidden","group-hover/footnote:border-token-main-surface-secondary","relative"),initial:{opacity:0},animate:{opacity:1},children:t},e)}var EP;const H1t=Tt.header(EP||(EP=_t(["draggable no-draggable-children sticky top-0 p-2 touch:p-2.5 flex items-center justify-between z-20 h-header-height bg-token-main-surface-primary"]))),$1t=128;function G1t(t){var l;const a=t,{tooltip:e,className:n,testId:s}=a,o=De(a,["tooltip","className","testId"]),r=i.jsx(Se,G(N({color:(l=t.color)!=null?l:"secondary",size:"medium"},o),{className:n,"data-testid":s}));return e!=null?i.jsx(St,{label:e,children:r}):r}function V1t({label:t,disabled:e=!1,tooltipText:n,value:s}){const o=v.useId();return i.jsx("div",{className:q("flex items-center gap-2",e?"opacity-50":""),children:i.jsx(St,{disabled:n==null,label:n,side:"right",triggerAs:null,children:i.jsxs("label",{htmlFor:o,className:"flex cursor-pointer items-center gap-1",children:[i.jsx(E_,{id:o,value:s,disabled:e,className:"me-1 flex h-5 w-5 shrink-0 items-center justify-center rounded-full border border-gray-500 bg-white dark:border-gray-600 dark:bg-gray-700",children:i.jsx(T_,{className:"h-2 w-2 rounded-full bg-gray-950 dark:bg-white"})}),t]})})})}function z1t(t){return i.jsx(Kh,G(N({},t),{className:q("rounded-sm! checked:border-black! checked:bg-black! dark:border-gray-600 dark:bg-gray-700",t.className)}))}const W1t=({gizmo:t})=>i.jsx("div",{className:"text-token-text-tertiary pointer-events-none text-sm select-none","aria-hidden":!0,inert:!0,children:t.gizmo.display.name}),xWe=re(me,"83d212",20,20);function Rx(t){"use forget";const e=D.c(39),{domain:n,url:s,title:o,thumbnail_url:r,description:a,pub_date:l,subscript:c,theme:u,thumbnailOverlay:d,ThumbnailErrorIcon:f,descriptionClassName:m,onLogClick:p}=t,g=u===void 0?"default":u,h=f===void 0?h7:f,_=m===void 0?"line-clamp-2":m,x=te(),b=v.useRef(null),[y,S]=v.useState("loading"),[C,w]=v.useState("loading");let k,E;e[0]===Symbol.for("react.memo_cache_sentinel")?(k=()=>{setTimeout(()=>{w(yWe)},5e3)},E=[],e[0]=k,e[1]=E):(k=e[0],E=e[1]),v.useEffect(k,E);const T=!a&&"min-h-[96px]";let M;e[2]!==T?(M=q("hover:bg-token-interactive-bg-secondary-hover @w-sm/main:px-4 flex w-full justify-between gap-6 rounded-xl px-2 py-2.5",T),e[2]=T,e[3]=M):M=e[3];let A;e[4]===Symbol.for("react.memo_cache_sentinel")?(A=$=>{b.current={x:$.clientX,y:$.clientY}},e[4]=A):A=e[4];let I;e[5]!==p?(I=$=>{if(b.current){const F=$.clientX-b.current.x,z=$.clientY-b.current.y;if(Math.abs(F)>=4||Math.abs(z)>=4){$.preventDefault(),b.current=null;return}}b.current=null,p==null||p()},e[5]=p,e[6]=I):I=e[6];let j;e[7]!==n||e[8]!==C||e[9]!==g||e[10]!==s?(j=g==="default"&&i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("div",{className:q("border-token-border-light border-thin relative h-[28px] w-[28px] shrink-0 self-center overflow-hidden rounded-lg p-1.25",C==="loading"&&"loading-results-shimmer"),children:[i.jsx("div",{className:q("absolute inset-0 flex items-center justify-center bg-cover bg-center bg-no-repeat opacity-30 dark:opacity-20",C==="loaded"&&"blur-md",C==="error"&&"bg-token-bg-tertiary"),children:i.jsx(Ns,{url:s,size:256,minSize:32,containerClassName:q(C!=="loaded"&&"hidden"),className:"h-10 w-10"})}),i.jsxs("div",{className:"absolute inset-0 flex items-center justify-center",children:[i.jsx(Ns,{url:s,size:128,minSize:32,containerClassName:q("overflow-hidden rounded-md",C!=="loaded"&&"hidden"),className:"icon-sm h-4 w-4",onLoad:()=>w("loaded"),onError:()=>w("error")}),C==="error"&&i.jsx(xWe,{className:"icon-md text-token-text-tertiary"})]})]}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx("span",{className:"line-clamp-1 text-sm [overflow-wrap:anywhere] select-text",children:n}),i.jsx("span",{className:"text-token-text-secondary mt-0.5 line-clamp-1 align-top text-xs [overflow-wrap:anywhere] select-text",children:bWe(s)})]})]}),e[7]=n,e[8]=C,e[9]=g,e[10]=s,e[11]=j):j=e[11];let R;e[12]!==g||e[13]!==o?(R=o&&i.jsx("span",{className:q("mt-2.5 text-base font-medium [overflow-wrap:anywhere] text-[var(--interactive-label-accent-default)] select-text",g==="default"&&"line-clamp-2",g==="sub-result"&&"line-clamp-1"),children:o}),e[12]=g,e[13]=o,e[14]=R):R=e[14];let O;e[15]!==a||e[16]!==_||e[17]!==x||e[18]!==l?(O=(a!=null?a:l)&&i.jsxs("div",{className:q("text-token-text-secondary mt-1 line-clamp-2 w-full text-sm font-normal [overflow-wrap:anywhere] select-text",_),children:[i.jsx("span",{className:"text-token-text-tertiary",children:l&&i.jsxs(i.Fragment,{children:[m8(x,new Date(l)),a&&i.jsxs(i.Fragment,{children:[i.jsx(P5,{}),"",i.jsx(P5,{})]})]})}),a]}),e[15]=a,e[16]=_,e[17]=x,e[18]=l,e[19]=O):O=e[19];let L;e[20]!==c?(L=c&&i.jsx("div",{className:"text-token-text-tertiary mt-1 line-clamp-1 text-sm select-text",children:c}),e[20]=c,e[21]=L):L=e[21];let B;e[22]!==j||e[23]!==R||e[24]!==O||e[25]!==L?(B=i.jsxs("div",{className:"flex flex-col overflow-hidden",children:[j,R,O,L]}),e[22]=j,e[23]=R,e[24]=O,e[25]=L,e[26]=B):B=e[26];let U;e[27]!==h||e[28]!==g||e[29]!==d||e[30]!==y||e[31]!==r?(U=r&&g==="default"&&i.jsx("div",{className:"self-center",children:i.jsxs("div",{className:"relative ms-auto block aspect-video min-h-[144px] w-[222px] min-w-0 overflow-hidden rounded-xl",children:[r&&i.jsx("img",{src:r,alt:"",className:q("absolute inset-0 h-full w-full object-cover opacity-0",y==="loaded"&&"opacity-100"),loading:"lazy",onLoad:()=>S("loaded"),onError:()=>S("error")}),i.jsx("div",{className:q("loading-results-shimmer absolute inset-0",{hidden:y!=="loading"})}),i.jsx("div",{className:q("bg-token-bg-secondary absolute inset-0 flex items-center justify-center",{hidden:y!=="error"}),children:i.jsx(h,{className:"icon-2xl opacity-15"})}),d]})}),e[27]=h,e[28]=g,e[29]=d,e[30]=y,e[31]=r,e[32]=U):U=e[32];let H;return e[33]!==B||e[34]!==U||e[35]!==M||e[36]!==I||e[37]!==s?(H=i.jsxs(Fs,{href:s,target:"_self",className:M,draggable:!1,onMouseDown:A,onClick:I,children:[B,U]}),e[33]=B,e[34]=U,e[35]=M,e[36]=I,e[37]=s,e[38]=H):H=e[38],H}function yWe(t){return t==="loading"?"error":t}function bWe(t){let e;try{e=decodeURIComponent(t)}catch(o){console.warn("Unable to decode URL",{url:t,error:o}),e=t}const n=e.replace(/\/$/,"");return n.match("youtube.com/watch")?n:n.replace(/\?.*$/,"")}function tq(t){return t.find(e=>{var n;return!!((n=e.metadata)!=null&&n.crisis_helpline_message)})}function nq(t){"use forget";const e=D.c(11),{message:n,className:s}=t,o=n.metadata.crisis_helpline_message;let r;e[0]!==s?(r=q("shadow-short flex flex-col rounded-lg p-4",s),e[0]=s,e[1]=r):r=e[1];let a;e[2]===Symbol.for("react.memo_cache_sentinel")?(a={a:SWe},e[2]=a):a=e[2];let l;e[3]!==o.text?(l=i.jsx(Cr,{className:"text-sm",componentOverrides:a,children:o.text}),e[3]=o.text,e[4]=l):l=e[4];let c;e[5]!==o.links?(c=o.links.length>0&&i.jsx("div",{className:"flex flex-col gap-2",children:o.links.map(vWe)}),e[5]=o.links,e[6]=c):c=e[6];let u;return e[7]!==r||e[8]!==l||e[9]!==c?(u=i.jsxs("div",{className:r,children:[l,c]}),e[7]=r,e[8]=l,e[9]=c,e[10]=u):u=e[10],u}function vWe(t){return i.jsx("div",{className:"rounded-lg bg-[var(--bg-quaternary)] py-1",children:i.jsx(Rx,{url:t.url,domain:t.domain,title:t.title,description:t.description})},t.url)}function SWe(t){const o=t,{node:e,children:n}=o,s=De(o,["node","children"]);return i.jsx("a",G(N({},s),{target:"_blank",rel:"noreferrer",className:"underline hover:no-underline [&&]:text-black [&&]:underline [&&]:hover:text-black dark:[&&]:text-white dark:[&&]:hover:text-white",children:n}))}const q1t=({message:t,clientThreadId:e,isUserTurn:n})=>{var a,l,c,u;const s=Ze(e,d=>{var f,m;return t&&((f=t.metadata)==null?void 0:f.async_task_id)&&ve.hasContinuedFromAsyncTask(d,t==null?void 0:t.id,(m=t==null?void 0:t.metadata)==null?void 0:m.async_task_id)});if(!t||!(s||n&&((a=t.metadata)!=null&&a.async_task_title)))return null;const o=(l=t.metadata)==null?void 0:l.async_task_original_message_id,r=()=>{o&&(pt(e,d=>{d.scrollToMessageId=o}),requestAnimationFrame(()=>{pt(e,d=>{d.scrollToMessageId=void 0})}))};return i.jsx(OCe,{icon:i.jsx(Rr,{className:"icon"}),label:(u=(c=t.metadata)==null?void 0:c.async_task_title)!=null?u:"",as:"button",onClick:r,isUserTurn:n,className:"mb-3"})},CWe=({icons:t,size:e,stackOrder:n="bottom"})=>i.jsx("div",{className:"flex items-center",children:t.map((s,o)=>i.jsx("div",{className:"border-token-border-default box-content rounded-full border border-1 bg-white",style:{marginInlineStart:o===0?0:-e/2,zIndex:n==="bottom"?t.length-o:void 0,width:e,height:e,padding:e/4-1},children:s},o))});function K1t({clientThreadId:t,connectorToUpsell:e,analyticsMetadata:n}){const s=hs(),o=Kw.useIsEnabled(t)&&!s,r=Tn(),a=!!(r!=null&&r.isAdminOfAccount()||r!=null&&r.isOwnerOfAccount()),l=!!(r!=null&&r.isPersonalAccount()),c=a&&!l,u=()=>{c&&e===qt.GDRIVE?window.location.href="/admin/ca":e==="general"?window.location.hash="#settings/".concat(Ts.Connectors):window.location.hash="#settings/".concat(Ts.Connectors,"?connector=").concat(un[e===qt.GDRIVE?Te.GDRIVE_ACTION_CONNECTOR:Te.SHAREPOINT_CONNECTOR],"&add-connector-link=true&referrer=").concat(ec.ConversationFollowup)};let d;if(e==="general")d=i.jsxs("div",{className:"text-token-text-secondary flex flex-row items-center gap-2 pe-2 text-start text-sm",children:[i.jsx(CWe,{size:16,icons:[i.jsx(Ys,{width:16,height:16},"gdrive"),i.jsx(oc,{width:16,height:16},"dropbox"),i.jsx(wp,{width:16,height:16},"github")]}),i.jsx("div",{children:i.jsx(P,{id:"k3bYdS",defaultMessage:"<b>Connect apps</b> to find answers, summarize info, and get things done",values:{b:f=>i.jsx("span",{className:"font-medium",children:f})}})})]});else{const f=e===qt.GDRIVE?Ys:jm;d=i.jsxs("div",{className:"text-token-text-secondary flex flex-row items-center gap-2 pe-2 text-start text-sm",children:[i.jsx(f,{className:"icon-sm inline"}),i.jsx("div",{children:i.jsx(P,{id:"m1IPsN",defaultMessage:"<b>Connect {app}</b> to ask questions about all your files",values:{b:m=>i.jsx("span",{className:"font-medium",children:m}),app:e===qt.GDRIVE?"Google Drive":"SharePoint"}})})]})}return o?i.jsxs("div",{className:"group",children:[i.jsx("hr",{className:"bg-token-bg-tertiary mt-5 mb-5 opacity-70"}),i.jsx(wt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"flex w-full flex-col",children:i.jsx(wt.div,{initial:{opacity:0,translateY:4},animate:{opacity:1,translateY:0},transition:{delay:0*.03},exit:{opacity:0,translateY:4},children:i.jsxs(wt.button,{whileHover:"hover",className:q("bg-primary hover:bg-secondary flex w-full cursor-pointer items-start justify-start gap-2 rounded-lg px-0 py-3 text-start"),onClick:f=>{u(),V.logEventWithStatsig("chatgpt_message_followup_connector_upsell_action","chatgpt_message_followup_connector_upsell_action",G(N({},Ms(n)),{action:"click",connectorToUpsell:e}))},onMouseEnter:()=>{V.logEventWithStatsig("chatgpt_message_followup_connector_upsell_action","chatgpt_message_followup_connector_upsell_action",G(N({},Ms(n)),{action:"hover",connectorToUpsell:e}))},children:[i.jsx(wt.div,{className:"flex items-center justify-center pt-0.25 opacity-70",variants:{hover:{x:4}},initial:{x:0},transition:{duration:.1},children:i.jsx(Rr,{className:"text-token-text-secondary icon"})}),d]})})})]}):null}const wWe=19,kWe=4,EWe=8,TWe=2,Y1t=f=>{var m=f,{as:t="div",logo:e,size:n="default",label:s,isBadge:o,isNew:r,isLauncher:a,isSelected:l=!1,tooltip:c,className:u}=m,d=De(m,["as","logo","size","label","isBadge","isNew","isLauncher","isSelected","tooltip","className"]);const p=te(),g=n==="large"?wWe:EWe,h=n==="large"?kWe:TWe,_=i.jsx("div",{className:q("w-".concat(g," h-").concat(g," flex aspect-square items-center justify-center rounded-full border p-").concat(h),"border-transparent bg-white","dark:bg-token-main-surface-secondary"),children:i.jsx("div",{className:q("transition-[transform_--shadow-color] duration-[0.24s]",a&&!l&&"drop-shadow-[0_6px_4px_var(--shadow-color)] [--shadow-color:transparent] group-hover/app-icon:motion-safe:scale-[1.025] group-hover/app-icon:motion-safe:[--shadow-color:rgba(0,0,0,0.1)]"),children:e})}),x=t;return i.jsxs(x,G(N(N({className:q("group/app-icon can-hover:active:scale-[0.98] flex flex-col items-center gap-3 transition-transform duration-100 w-".concat(g),o?"scale-[0.9]":"",a?"cursor-pointer":"cursor-default","opacity-80 group-hover:opacity-100",u),onClick:async b=>{var y;b.persist(),await Promise.race([new Promise(S=>{b.target.addEventListener("transitionend",()=>{S()},{once:!0})}),new Promise(S=>{setTimeout(()=>S(),200)})]),(y=d.onClick)==null||y.call(d,b)}},t==="button"?{type:"button"}:{}),d),{children:[i.jsxs("div",{className:q("relative rounded-full transition-[transform_--shadow-color] duration-[0.24s]",o&&"border-token-border-default border",a&&"dark:border-token-border-default scale-[0.9] border border-black/[0.12] shadow-none group-hover/app-icon:motion-safe:shadow-[0px_4px_12px_rgba(0,0,0,0.08)]",a&&"group-hover/app-icon:motion-safe:scale-[0.91]"),children:[!a&&_,a&&i.jsx(St,{label:c,side:"top",children:_}),r&&i.jsx("div",{className:"text-token-text-primary absolute -start-1 -top-1 z-10 rounded-full bg-blue-500 px-1.5 py-1 text-[10px] font-bold uppercase",children:p.formatMessage({id:"kEZrwC",defaultMessage:"New"})})]}),s&&i.jsx("div",{className:q("text-token-text-secondary text-center text-[12px] leading-[17px]",l&&"text-blue-400",!a&&"w-20"),children:s})]}))},MWe=t=>{var e,n,s,o,r,a;return{id:t.id,prompt:t.prompt,title:(e=t.title)!=null?e:void 0,description:(n=t.description)!=null?n:void 0,categoryId:(s=t.system_hint)!=null?s:t.category_id,type:xt.Capabilities,imageUrl:(o=t.image_url)!=null?o:void 0,ctaLabel:(r=t.cta_label)!=null?r:void 0,modelOverride:(a=t.model_override)!=null?a:void 0}},Z1t=({categoryId:t,shouldFetch:e,serverThreadId:n,lastMessageId:s})=>{var c;const{data:o,isLoading:r,error:a}=ut({queryKey:["capability_suggestions",t,s],queryFn:()=>{if(!n||!s)throw new Error("Server thread ID and last user message ID are required");return ue.safePost("/conversation/experimental/suggest_capabilities",{requestBody:{conversation_id:n,message_id:s,system_hint:t,category_id:t}})},enabled:e&&!!n&&!!s});return{suggestions:(c=o==null?void 0:o.suggestions.map(MWe))!=null?c:[],isLoading:r,error:a}};function Q1t(t=!1){const e=Je("3692302894"),n={getCapabilitySuggestionsEnabled:Pu({layer:e,paramName:"capability_suggestions",defaultValue:!1}),getPrefetchCapabilitySuggestions:Pu({layer:e,paramName:"prefetch_capability_suggestions",defaultValue:!1})};return{capabilitySuggestionsEnabled:!t&&n.getCapabilitySuggestionsEnabled(),prefetchCapabilitySuggestions:!t&&n.getPrefetchCapabilitySuggestions()}}class J1t extends ml()(()=>({isMultigenParagenVotingActive:!1})){setIsMultigenParagenVotingActive(e){this.setState({isMultigenParagenVotingActive:e})}static useIsMultigenParagenVotingActive(){return this.useState(e=>e.isMultigenParagenVotingActive)}}class VT extends ml()(()=>({selectedIndex:0})){setSelectedIndex(e){this.setState({selectedIndex:e})}static useSelectedIndex(){return this.useState(e=>e.selectedIndex)}}function X1t(t){"use forget";const e=D.c(2),{children:n}=t;let s;return e[0]!==n?(s=i.jsx(VT.Provider,{store:AWe,children:n}),e[0]=n,e[1]=s):s=e[1],s}function AWe(){return new VT}const sq=re(me,"b11823",20,20),zT=re(me,"2126ae",20,20),oq=re(me,"cdfe73",20,20),WT=re(me,"51753c",20,20),yo=({icon:t,label:e,iconClassName:n,className:s,size:o="med",onClick:r,onSelect:a,onIntent:l,selected:c=!1,disabled:u=!1,asMenuItem:d=!1,style:f,testId:m,trailing:p})=>{const g=d?ee.Item:"button";return i.jsx(St,{label:e,disabled:!e||d,triggerAs:null,children:i.jsx(R7,{onIntent:l,children:i.jsx(g,{className:q(!d&&"text-token-text-secondary hover:bg-token-bg-secondary rounded-lg",!d&&c&&"bg-token-bg-tertiary",s),"aria-label":e,"aria-pressed":c,onClick:r,onSelect:a,disabled:u,style:f,"data-testid":m,label:d?e:void 0,icon:d?t:void 0,trailing:d?p:void 0,children:typeof t=="function"&&!d&&i.jsx("span",{className:q("flex items-center justify-center","touch:w-10 h-8 w-8"),children:i.jsx(t,{className:n!=null?n:o==="small"?"icon-sm":"icon"})})})})})};async function NWe(t,e,n,{unprocessed:s=!1,enableHighlight:o=!1}={}){var u;const r=[],a=[],l={},c=new Map;for(const d of t.messages){if(aq(d)){const f=(u=d.metadata)==null?void 0:u.content_references,m=Ss(d,{shouldGetTextFromContentReferences:!1,shouldGetVisibleText:!0});if(s)r.push(m);else{const{messageTextToClipboardContent:p}=await Me(async()=>{const{messageTextToClipboardContent:h}=await import("./b3e7be71-cm955h0khwf4msqj.js");return{messageTextToClipboardContent:h}},__vite__mapDeps([83,2,1,3,67,24,25,26,27,28,29,30,32,33,34,35,36,64,65,68,69,70,71,72])),g=p(m,f,{enableHighlight:o});g["text/plain"]&&r.push(g["text/plain"]),g["text/html"]&&a.push(g["text/html"])}if(!s&&f)for(const p of f)p.type==="file"&&IWe(p)&&!c.has(p.id)&&c.set(p.id,p)}if(lte(d)){const f=ha.getImageAssetPointers(d);if(f.length>0){const m=f[0];try{const p=Lt(n),{url:g}=await wl.fetch(e,{asset:m,conversationId:p!=null?p:void 0}),_=await(await fetch(g)).blob();["image/png","image/jpeg","image/webp"].includes(_.type)&&(l[_.type]=_)}catch(p){return Promise.reject()}}}}if(!s&&c.size>0){const d=Array.from(c.values()),f=d.map(jWe).filter(p=>!!p);if(f.length>0){const p=f.map((g,h)=>"".concat(h+1,". ").concat(g));r.push(["Medical References:",...p].join("\n"))}const m=d.map(PWe).filter(p=>!!p);m.length>0&&a.push("<section><p><strong>Medical References</strong></p><ol>".concat(m.join(""),"</ol></section>"))}return r.length>0&&(l["text/plain"]=r.join("\n\n")),a.length>0&&(l["text/html"]=a.join("\n\n")),l}function IWe(t){const e=t.medical_file_reference;return e!=null&&["journal_name","authors_display","publication_year","doi","journal_homepage_url"].some(n=>{const s=e==null?void 0:e[n];return s!=null&&String(s).trim()!==""&&String(s).toLowerCase()!=="none"})}function jWe(t){const e=rq(t);if(!e)return null;const{journalName:n,authorsDisplay:s,publicationYear:o,doi:r,url:a}=e,l=[];n&&l.push(n);const c=[];return s&&c.push(s),o&&c.push(o),c.length>0&&l.push(c.join(", ")),r&&l.push("DOI: ".concat(r)),a&&l.push("URL: ".concat(a)),l.join("  ")}function PWe(t){const e=rq(t);if(!e)return null;const{journalName:n,authorsDisplay:s,publicationYear:o,doi:r,url:a}=e,l=[];if(n&&l.push("<span>".concat(Zf(n),"</span>")),s||o){const c=[];s&&c.push("<em>".concat(Zf(s),"</em>")),o&&c.push("<span>".concat(Zf(o),"</span>")),l.push(c.join(" "))}return r&&l.push("<span>DOI: ".concat(Zf(r),"</span>")),a&&l.push("<span>URL: ".concat(Zf(a),"</span>")),l.length===0?null:"<li>".concat(l.join("<br/>"),"</li>")}function rq(t){var n,s,o,r,a,l,c;const e=t.medical_file_reference;return!e||!e.journal_name&&!e.authors_display&&!e.publication_year&&!((n=e.doi)!=null?n:t.id)?null:{journalName:(s=e.journal_name)!=null?s:void 0,authorsDisplay:(o=e.authors_display)!=null?o:void 0,publicationYear:(r=e.publication_year)!=null?r:void 0,doi:(l=(a=e.doi)!=null?a:t.id)!=null?l:void 0,url:(c=t.cloud_doc_url)!=null?c:void 0}}function Zf(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function aq(t){var e,n;return!((e=t.clientMetadata)!=null&&e.err)&&(t.author.role===dt.Assistant||t.author.role===dt.User)&&(t.author.role===dt.User||t.recipient==="all")&&!((n=t.metadata)!=null&&n.reasoning_status)}const RWe=({turn:t,clientThreadId:e})=>{const n=B$(e),s=te();function o(){qc.logButtonClick(V_.EDIT_IN_CANVAS_MESSAGE);const r=OWe(t);n({textdocType:oi.DOCUMENT,content:r,createSource:Wm.MESSAGE})}return i.jsx(yo,{icon:ll,onClick:o,label:s.formatMessage({id:"EditInCanvas.tooltip",defaultMessage:"Edit in canvas"}),asMenuItem:!0})};function OWe(t){return t.messages.filter(e=>aq(e)&&e.author.role===dt.Assistant).map(e=>Ss(e,{shouldGetTextFromContentReferences:!0,shouldGetVisibleText:!1})).filter(Boolean).join("\n\n")}const LWe=re(me,"03583c",20,20);function DWe({clientThreadId:t,lastMessage:e,asMenuItem:n}){const[s,o]=v.useState(!1),r=te(),a=v.useCallback(()=>{const c=Lt(t);if(!c)return;o(!0);const u="/branch/".concat(c,"/").concat(e.id);window.open(u,"_blank","noreferrer")},[t,e.id]),l=s?F6.loading:F6.branch;return i.jsx(yo,{icon:s?Us:LWe,label:r.formatMessage(l),onClick:a,disabled:s,asMenuItem:n,onSelect:c=>{c.preventDefault()}})}const F6=we({branch:{id:"BranchTurnActionButton.branch",defaultMessage:"Branch in new chat"},loading:{id:"BranchTurnActionButton.loading",defaultMessage:"Loading"}}),BWe=t=>{const e=typeof(t==null?void 0:t.update_time)=="number"?t.update_time:typeof(t==null?void 0:t.create_time)=="number"?t.create_time:null;return e==null?null:new Date(e*1e3)},FWe=qe({defaultMessage:"{date}, {time}",id:"conversation-turn.timestamp-label"}),U6=(t,e)=>{const n=t.formatRelativeTime(e,"day",{numeric:"auto"});return t.locale.startsWith("en")?n.charAt(0).toUpperCase()+n.slice(1):n},UWe=(t,e)=>{const n=BWe(e);if(!n)return null;const s=t.formatTime(n,{hour:"numeric",minute:"2-digit"});let o;if(e9(n))o=U6(t,0);else if(cte(n))o=U6(t,-1);else if(ute(n))o=t.formatDate(n,{weekday:"long"});else if(dte(n))o=t.formatDate(n,{month:"short",day:"numeric"});else{const r=t.formatDateToParts(n,{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit"}),a=Object.fromEntries(r.map(l=>[l.type,l.value]));return a.dayPeriod?t.formatMessage({id:"datetime.compact",defaultMessage:"{month} {day} {year}, {hour}:{minute} {dayPeriod}"},{month:a.month,day:a.day,year:a.year,hour:a.hour,minute:a.minute,dayPeriod:a.dayPeriod}):t.formatMessage({id:"datetime.compact.24h",defaultMessage:"{month} {day} {year}, {hour}:{minute}"},{month:a.month,day:a.day,year:a.year,hour:a.hour,minute:a.minute})}return t.formatMessage(FWe,{date:o,time:s})},iq=je(()=>Me(()=>import("./cc968336-ggai6r2gyci3j5cf.js"),__vite__mapDeps([338,1,2,3,339])).then(t=>t.VoicePlayButton));function HWe(t){"use forget";var $,F;const e=D.c(40),{showPlayButton:n,showCanvasButton:s,showBranchButton:o,showThreadAction:r,threadOriginMessageId:a,canShowScheduleButton:l,isMostRecentTurn:c,clientThreadId:u,messages:d,lastMessage:f,imageGenMessageId:m,turn:p,turnIndex:g,requestId:h,parentPromptId:_,showReportMessageButton:x,onReportMessage:b,createEvalData:y}=t,S=te(),C=!1;let w;e[0]!==S?(w=S.formatMessage({id:"e/27r7",defaultMessage:"More actions"}),e[0]=S,e[1]=w):w=e[1];const k=w;let E;e[2]!==u?(E=Pt(u),e[2]=u,e[3]=E):E=e[3];const T=E;let M;e[4]!==T?(M=()=>Lr(T),e[4]=T,e[5]=M):M=e[5];const A=X(M);if(!mt())return null;let I;if(e[6]!==S||e[7]!==c||e[8]!==A||e[9]!==p.modelSlug){const z=p.modelSlug!=null?(F=($=VC(A,p.modelSlug))==null?void 0:$.title)!=null?F:p.modelSlug:null;I=Je("2404437118").get("edit_buttons_hidden",!1)&&!c&&z?S.formatMessage({id:"ConversationTurn.usedModelMenuItem",defaultMessage:"Used {modelName}"},{modelName:z}):null,e[6]=S,e[7]=c,e[8]=A,e[9]=p.modelSlug,e[10]=I}else I=e[10];const j=I;if(!(o&&!!f||n&&!!f||s||l||!!x||C||!!j||!1))return null;let O;e[11]===Symbol.for("react.memo_cache_sentinel")?(O=i.jsx($s,{className:"icon"}),e[11]=O):O=e[11];let L;e[12]!==k?(L=i.jsx("button",{className:"text-token-text-secondary hover:bg-token-bg-secondary touch:w-10 flex h-8 w-8 items-center justify-center rounded-lg",onMouseOver:$We,"aria-label":k,children:O}),e[12]=k,e[13]=L):L=e[13];let B;e[14]!==r||e[15]!==a?(B=!1,e[14]=r,e[15]=a,e[16]=B):B=e[16];let U;e[17]!==l||e[18]!==u||e[19]!==y||e[20]!==m||e[21]!==c||e[22]!==f||e[23]!==d||e[24]!==b||e[25]!==_||e[26]!==h||e[27]!==o||e[28]!==s||e[29]!==n||e[30]!==x||e[31]!==B||e[32]!==p||e[33]!==g||e[34]!==j?(U=i.jsx(GWe,G(N({showPlayButton:n,showCanvasButton:s,showBranchButton:o},B),{canShowScheduleButton:l,clientThreadId:u,messages:d,lastMessage:f,imageGenMessageId:m,turn:p,turnIndex:g,requestId:h,parentPromptId:_,showReportMessageButton:x,onReportMessage:b,createEvalData:y,usedModelLabel:j,isMostRecentTurn:c})),e[17]=l,e[18]=u,e[19]=y,e[20]=m,e[21]=c,e[22]=f,e[23]=d,e[24]=b,e[25]=_,e[26]=h,e[27]=o,e[28]=s,e[29]=n,e[30]=x,e[31]=B,e[32]=p,e[33]=g,e[34]=j,e[35]=U):U=e[35];let H;return e[36]!==k||e[37]!==L||e[38]!==U?(H=i.jsx(Xo,{triggerButton:L,size:"auto",contentAlign:"start",alignOffset:-7,side:"top",sideOffset:4,tooltip:k,children:U}),e[36]=k,e[37]=L,e[38]=U,e[39]=H):H=e[39],H}function $We(){iq.prefetch()}function GWe(t){"use forget";const e=D.c(43),{showPlayButton:n,showCanvasButton:s,showBranchButton:o,showThreadAction:r,threadOriginMessageId:a,canShowScheduleButton:l,clientThreadId:c,lastMessage:u,turn:d,showReportMessageButton:f,onReportMessage:m,createEvalData:p,usedModelLabel:g}=t,h=r===void 0?!1:r,_=te();let x;e[0]!==_||e[1]!==u?(x=UWe(_,u),e[0]=_,e[1]=u,e[2]=x):x=e[2];const b=x;let y;e[3]!==b?(y=b&&i.jsx(ee.Label,{className:"select-text",children:b}),e[3]=b,e[4]=y):y=e[4];let S;e[5]!==c||e[6]!==h||e[7]!==a?(S=!1,e[5]=c,e[6]=h,e[7]=a,e[8]=S):S=e[8];let C;e[9]!==c||e[10]!==u||e[11]!==o?(C=o&&u&&i.jsx(DWe,{clientThreadId:c,lastMessage:u,asMenuItem:!0}),e[9]=c,e[10]=u,e[11]=o,e[12]=C):C=e[12];let w;e[13]!==c||e[14]!==u||e[15]!==n?(w=n&&u&&i.jsx(iq,{conversationId:c,message:u,asMenuItem:!0}),e[13]=c,e[14]=u,e[15]=n,e[16]=w):w=e[16];let k;e[17]!==c||e[18]!==s||e[19]!==d?(k=s&&i.jsx(RWe,{clientThreadId:c,turn:d}),e[17]=c,e[18]=s,e[19]=d,e[20]=k):k=e[20];let E;e[21]!==l||e[22]!==_?(E=l&&i.jsx(P1e,{children:j=>{const{openScheduleModal:R,isScheduled:O,isSchedulable:L}=j;return!O&&L?i.jsx(yo,{icon:wc,label:_.formatMessage({id:"l12ujd",defaultMessage:"Schedule"}),onClick:R,asMenuItem:!0}):null}}),e[21]=l,e[22]=_,e[23]=E):E=e[23];let T;e[24]!==_||e[25]!==m||e[26]!==f?(T=f&&m&&i.jsx(yo,{icon:W_,label:_.formatMessage({id:"ConversationTurn.reportMessageMenuItem",defaultMessage:"Report message"}),asMenuItem:!0,onSelect:()=>m()}),e[24]=_,e[25]=m,e[26]=f,e[27]=T):T=e[27];let M;e[28]!==p||e[29]!==u?(M=!1,e[28]=p,e[29]=u,e[30]=M):M=e[30];let A;e[31]!==g?(A=g&&i.jsx(ee.Group,{children:i.jsx(ee.Item,{disabled:!0,label:g})}),e[31]=g,e[32]=A):A=e[32];let I;return e[33]!==M||e[34]!==A||e[35]!==y||e[36]!==S||e[37]!==C||e[38]!==w||e[39]!==k||e[40]!==E||e[41]!==T?(I=i.jsxs(i.Fragment,{children:[y,S,C,w,k,E,T,M,A]}),e[33]=M,e[34]=A,e[35]=y,e[36]=S,e[37]=C,e[38]=w,e[39]=k,e[40]=E,e[41]=T,e[42]=I):I=e[42],I}function lq({currentPage:t,length:e,onChangeIndex:n}){const s=r=>{n(jk(t+r,0,e-1))},o=te();return i.jsxs("div",{className:q("text-token-text-secondary flex items-center justify-center"),children:[i.jsx("button",{onClick:()=>s(-1),disabled:t===0,className:"hover:bg-token-main-surface-secondary touch:w-[32px] flex h-[30px] w-[24px] items-center justify-center rounded-md disabled:opacity-50 disabled:hover:bg-transparent","aria-label":o.formatMessage({id:"XwENI/",defaultMessage:"Previous response"}),children:i.jsx(Uu,{className:"icon"})}),i.jsx("div",{className:"px-0.5 text-sm font-semibold tabular-nums",children:"".concat(t+1,"/").concat(e)}),i.jsx("button",{onClick:()=>s(1),disabled:t===e-1,"aria-label":o.formatMessage({id:"V8RFHE",defaultMessage:"Next response"}),className:"hover:bg-token-main-surface-secondary touch:w-[32px] flex h-[30px] w-[24px] items-center justify-center rounded-md disabled:opacity-50 disabled:hover:bg-transparent",children:i.jsx(pg,{className:"icon"})})]})}function e0t({currentPage:t,onChangeIndex:e,length:n}){const s=o=>{e(jk(t+o,0,n-1))};return n===0?null:i.jsxs(VWe,{children:[i.jsx(H6,{onClick:()=>s(-1),disabled:t===0,children:i.jsx(K_,{className:"icon-sm"})}),i.jsx(zWe,{children:"".concat(t+1,"/").concat(n)}),i.jsx(H6,{onClick:()=>s(1),disabled:t===n-1,children:i.jsx(zi,{className:"icon-sm"})})]})}var TP;const VWe=Tt.div(TP||(TP=_t(["text-sm inline-flex border rounded-full border-token-border-medium overflow-hidden"])));var MP;const H6=Tt.button(MP||(MP=_t(["text-token-text-secondary disabled:text-token-border-medium w-8 flex items-center justify-center hover:bg-token-main-surface-tertiary"])));var AP;const zWe=Tt.span(AP||(AP=_t(["text-token-text-tertiary px-2 flex items-center font-mono tracking-widest py-1.5"])));function cq(t=!1){const e=Zge(Qs.WorkspaceShareLinks),n=Je("2382399797",{disableExposureLog:t}),s=X(()=>B7(KC()));return v.useCallback(()=>e&&!s&&n.get("is_enabled",!1),[s,n,e])}function WWe(){return Je("3243846918").get("enable_message_slice",!1)}function qWe(t){const e=Hs(),n=cq(),{imageGenMessages:s,canvasMessage:o,gizmoMessage:r,hasErrorInTurn:a,isIncomplete:l}=v.useMemo(()=>{const d=[];let f,m,p=!1,g=!1;return t.forEach(h=>{var x,b;AR(h)&&d.push(h),BU(h)&&(f=h),(x=h.metadata)!=null&&x.gizmo_id&&(m=h);const _=(b=h.clientMetadata)==null?void 0:b.errType;_!=null&&_!=="info"&&(p=!0),fte(h)&&(g=!0)}),{imageGenMessages:d,canvasMessage:f,gizmoMessage:m,hasErrorInTurn:p,isIncomplete:g}},[t]),c=!e&&!r&&s.length>0&&s.every(d=>d.status==="finished_successfully")&&n(),u=!e&&s.length===0&&!o&&!r&&WWe();return{enableImageGenPostSharing:c,enableMessageSliceSharing:u,imageGenMessages:s,canvasMessage:o,hasErrorInTurn:a,isIncomplete:l}}function t0t(t=!1){const e=Hs(),n=cq(t);return v.useMemo(()=>!e&&n(),[e,n])}var KWe=mte();const fC=ps(KWe),YWe=t=>{"use forget";const e=D.c(40),{onClose:n,onDeleted:s,promptId:o,promptTitle:r,promptSystemHint:a,promptSources:l}=t,c=te(),u=Dt(),d=Nt();let f;e[0]!==c||e[1]!==u?(f=()=>{u.danger(c.formatMessage({id:"gYG9AO",defaultMessage:"Failed to delete prompt"}))},e[0]=c,e[1]=u,e[2]=f):f=e[2];let m;e[3]!==c||e[4]!==n||e[5]!==s||e[6]!==l||e[7]!==a||e[8]!==r||e[9]!==d||e[10]!==u?(m=()=>{var A,I;V.logEventWithStatsig("chatgpt_web_prompt_deleted","chatgpt_web_prompt_deleted",{hint:a!=null?a:"none",hasSources:((A=l==null?void 0:l.length)!=null?A:0)>0,sources:l!=null?l:"",sourceCount:(I=l==null?void 0:l.length)!=null?I:0}),s==null||s(),n(!1),u.success(c.formatMessage({id:"cptqwY",defaultMessage:"{promptTitle} was deleted"},{promptTitle:r})),d.invalidateQueries({queryKey:["prompt-templates"],exact:!1})},e[3]=c,e[4]=n,e[5]=s,e[6]=l,e[7]=a,e[8]=r,e[9]=d,e[10]=u,e[11]=m):m=e[11];let p;e[12]!==f||e[13]!==m?(p={onError:f,onSuccess:m},e[12]=f,e[13]=m,e[14]=p):p=e[14];const{mutate:g,isPending:h}=RLe(p);let _;e[15]!==n?(_=()=>n(!1),e[15]=n,e[16]=_):_=e[16];let x;e[17]!==c||e[18]!==r?(x=c.formatMessage({id:"rGrRdA",defaultMessage:"Delete {promptTitle}?"},{promptTitle:r}),e[17]=c,e[18]=r,e[19]=x):x=e[19];let b;e[20]===Symbol.for("react.memo_cache_sentinel")?(b=i.jsx("div",{className:"text-token-text-secondary text-sm",children:i.jsx(P,{id:"ODmsWc",defaultMessage:"This cannot be undone."})}),e[20]=b):b=e[20];let y;e[21]!==n?(y=()=>n(!1),e[21]=n,e[22]=y):y=e[22];let S;e[23]===Symbol.for("react.memo_cache_sentinel")?(S=i.jsx(P,N({},yn.cancelButtonText)),e[23]=S):S=e[23];let C;e[24]!==y?(C=i.jsx(Se,{color:"secondary",onClick:y,children:S}),e[24]=y,e[25]=C):C=e[25];let w;e[26]!==g||e[27]!==o?(w=()=>g(o),e[26]=g,e[27]=o,e[28]=w):w=e[28];let k;e[29]===Symbol.for("react.memo_cache_sentinel")?(k=i.jsx(P,{id:"x3h5Nl",defaultMessage:"Delete"}),e[29]=k):k=e[29];let E;e[30]!==h||e[31]!==w?(E=i.jsx(Se,{color:"danger",disabled:h,loading:h,onClick:w,children:k}),e[30]=h,e[31]=w,e[32]=E):E=e[32];let T;e[33]!==E||e[34]!==C?(T=i.jsxs("div",{className:"flex flex-col gap-6",children:[b,i.jsxs("div",{className:"flex flex-row justify-end gap-2",children:[C,E]})]}),e[33]=E,e[34]=C,e[35]=T):T=e[35];let M;return e[36]!==T||e[37]!==_||e[38]!==x?(M=i.jsx(en,{isOpen:!0,onClose:_,title:x,testId:"modal-delete-prompt",type:"danger",size:"custom",className:"max-w-[400px] p-2",children:T}),e[36]=T,e[37]=_,e[38]=x,e[39]=M):M=e[39],M},$6="create_prompt",G6=({tooltip:t,ariaLabel:e,onClick:n,children:s})=>{const o=v.useCallback(r=>{r.stopPropagation(),n()},[n]);return i.jsx(St,{label:t,triggerAs:null,children:i.jsx("button",{className:"hover:bg-token-bg-secondary flex h-8 w-8 items-center justify-center rounded-md transition-colors",onClick:o,"aria-label":e,children:s})})},ZWe=t=>{"use forget";const e=D.c(9),{clientThreadId:n,turnIndex:s,size:o}=t,r=te();let a;e[0]!==n||e[1]!==s?(a=()=>{var h,_;const d=ve.getConversationTurns(At(n)),f=(()=>{for(let x=s;x>=0;x=x-1,x){const b=d[x];if(b!=null&&b.isPrompt)return b}return null})();if(!f)return;const m=(()=>{const x=f.messages;for(let b=x.length-1;b>=0;b=b-1,b){const y=x[b];if(y&&pte(y))return y}return null})(),p=m?Ss(m,{shouldGetTextFromContentReferences:!1,shouldGetVisibleText:!0}):"";if(!p)return;const g=(_=(h=m==null?void 0:m.metadata)==null?void 0:h.system_hints)==null?void 0:_[0];rt(va,{prompt:{prompt:p,system_hint:g},referer:"user_turn_action"})},e[0]=n,e[1]=s,e[2]=a):a=e[2];const l=a;let c;e[3]!==r?(c=r.formatMessage({id:"72PGAU",defaultMessage:"Bookmark prompt"}),e[3]=r,e[4]=c):c=e[4];let u;return e[5]!==l||e[6]!==o||e[7]!==c?(u=i.jsx(yo,{icon:ff,label:c,onClick:l,size:o}),e[5]=l,e[6]=o,e[7]=c,e[8]=u):u=e[8],u},QWe=()=>{"use forget";const t=D.c(4),e=XWe;let n;t[0]===Symbol.for("react.memo_cache_sentinel")?(n=i.jsx("div",{className:"bg-token-bg-tertiary flex h-[48px] w-[48px] items-center justify-center rounded-full",children:i.jsx(bl,{className:"h-6 w-6"})}),t[0]=n):n=t[0];let s;t[1]===Symbol.for("react.memo_cache_sentinel")?(s=i.jsx("div",{className:"text-token-text-secondary text-xl",children:i.jsx(P,{id:"X8dA+z",defaultMessage:"Create your first prompt"})}),t[1]=s):s=t[1];let o;t[2]===Symbol.for("react.memo_cache_sentinel")?(o=i.jsxs("div",{className:"flex max-w-[500px] flex-col items-center justify-end gap-2",children:[n,s,i.jsx("div",{className:"text-token-text-tertiary text-center text-base text-balance",children:i.jsx(P,{id:"jYJFgK",defaultMessage:"Save your favorite prompts so you can reuse them quickly in ChatGPT."})})]}),t[2]=o):o=t[2];let r;return t[3]===Symbol.for("react.memo_cache_sentinel")?(r=i.jsxs("div",{className:"grid w-full max-w-[520px] grid-rows-[1fr_auto_1fr] justify-items-center rounded-xl p-8",children:[o,i.jsx("div",{className:"mt-4 flex flex-col items-center gap-2",children:i.jsx(Se,{onClick:e,children:i.jsx(P,{id:"0Wp1ei",defaultMessage:"Create prompt"})})})]}),t[3]=r):r=t[3],r},JWe=t=>{"use forget";var U,H,$;const e=D.c(55),{conversation:n,prompt:s,isFirst:o}=t,r=te(),a=bt(),l=X(eqe);let c;e:{if(!s.system_hint){c=null;break e}let F;e[0]!==s.system_hint||e[1]!==l?(F=l==null?void 0:l.find(W=>W.systemHint===s.system_hint),e[0]=s.system_hint,e[1]=l,e[2]=F):F=e[2],c=F}const u=c;let d;e[3]!==n.id||e[4]!==a||e[5]!==s?(d=()=>{F7({prompt:s,referer:"library",conversationId:n.id}),Ea(a)},e[3]=n.id,e[4]=a,e[5]=s,e[6]=d):d=e[6];const f=d;let m;e:{if(!s.sources){let W;e[7]===Symbol.for("react.memo_cache_sentinel")?(W={icons:[],text:null},e[7]=W):W=e[7],m=W;break e}if(s.sources.length===1){const W=(U=_v[s.sources[0]])==null?void 0:U.icon;let Y;e[8]!==W?(Y=[W],e[8]=W,e[9]=Y):Y=e[9];const K=(H=_v[s.sources[0]])==null?void 0:H.title;let Z;e[10]!==Y||e[11]!==K?(Z={icons:Y,text:K},e[10]=Y,e[11]=K,e[12]=Z):Z=e[12],m=Z;break e}let F;e[13]!==s.sources?(F=s.sources.map(tqe),e[13]=s.sources,e[14]=F):F=e[14];let z;e[15]!==F?(z={icons:F,text:null},e[15]=F,e[16]=z):z=e[16],m=z}const p=m;let g;e[17]!==u?(g=u!=null&&u.logo?i.jsx(Qm,{hint:u,isNextToLabel:!1,className:"h-6 w-6"}):i.jsx(bl,{className:"h-6 w-6"}),e[17]=u,e[18]=g):g=e[18];const h=g;let _;e[19]===Symbol.for("react.memo_cache_sentinel")?(_=q("flex h-12 w-12 items-center justify-center rounded-lg outline-none border-token-border-secondary bg-token-bg-tertiary/60 border"),e[19]=_):_=e[19];const x=_;let b;e[20]===Symbol.for("react.memo_cache_sentinel")?(b={},e[20]=b):b=e[20];const y=b;let S;e[21]!==o?(S=!o&&i.jsx("div",{className:"prompt-item-divider border-token-border-secondary absolute start-4 end-4 top-0 border-t transition-opacity"}),e[21]=o,e[22]=S):S=e[22];let C;e[23]!==h?(C=i.jsx("div",{className:x,style:y,children:h}),e[23]=h,e[24]=C):C=e[24];let w;e[25]!==s.name?(w=i.jsx("div",{className:"text-token-text-primary truncate leading-tight font-semibold",children:s.name}),e[25]=s.name,e[26]=w):w=e[26];let k;e[27]!==p?(k=($=p==null?void 0:p.icons)!=null&&$.length?i.jsx("div",{className:"text-token-text-secondary flex items-center gap-1",children:p.icons.map(nqe)}):null,e[27]=p,e[28]=k):k=e[28];let E;e[29]!==k||e[30]!==w?(E=i.jsxs("div",{className:"flex items-center gap-2",children:[w,k]}),e[29]=k,e[30]=w,e[31]=E):E=e[31];let T;e[32]!==s.prompt?(T=i.jsx("div",{className:"text-token-text-secondary line-clamp-2 text-sm break-words whitespace-pre-wrap",children:s.prompt}),e[32]=s.prompt,e[33]=T):T=e[33];let M;e[34]!==E||e[35]!==T?(M=i.jsx("div",{className:"min-w-0 flex-1",children:i.jsxs("div",{className:"flex min-w-0 flex-col gap-1",children:[E,T]})}),e[34]=E,e[35]=T,e[36]=M):M=e[36];let A;e[37]!==M||e[38]!==C?(A=i.jsxs("div",{className:"flex min-h-[72px] items-center gap-5 pe-44 md:pe-56",children:[C,M]}),e[37]=M,e[38]=C,e[39]=A):A=e[39];let I;e[40]!==r||e[41]!==s?(I=s.relationship==="own"&&i.jsxs(i.Fragment,{children:[i.jsx(G6,{tooltip:r.formatMessage({id:"fZNNxL",defaultMessage:"Delete prompt"}),ariaLabel:r.formatMessage({id:"TJZi61",defaultMessage:"Delete prompt"}),onClick:()=>{var F,z,W,Y;rt(YWe,{promptId:String((F=s.id)!=null?F:""),promptTitle:(z=s.name)!=null?z:"",promptSystemHint:(W=s.system_hint)!=null?W:null,promptSources:((Y=s.sources)!=null?Y:[]).join(",")})},children:i.jsx(yi,{className:"text-token-text-primary h-5 w-5"})}),i.jsx(G6,{tooltip:r.formatMessage({id:"6kwjWv",defaultMessage:"Edit prompt"}),ariaLabel:r.formatMessage({id:"lGHCw4",defaultMessage:"Edit prompt"}),onClick:()=>{rt(va,{prompt:s,referer:"library"})},children:i.jsx(tr,{className:"text-token-text-primary h-5 w-5"})})]}),e[40]=r,e[41]=s,e[42]=I):I=e[42];let j;e[43]!==f?(j=F=>{F.stopPropagation(),f()},e[43]=f,e[44]=j):j=e[44];let R;e[45]===Symbol.for("react.memo_cache_sentinel")?(R=i.jsx(P,{id:"YB8gk2",defaultMessage:"Try it"}),e[45]=R):R=e[45];let O;e[46]!==j?(O=i.jsx(Se,{onClick:j,color:"primary",children:R}),e[46]=j,e[47]=O):O=e[47];let L;e[48]!==I||e[49]!==O?(L=i.jsx("div",{className:"absolute end-4 top-1/2 flex -translate-y-1/2 items-center gap-2",children:i.jsxs("div",{className:"pointer-events-none flex items-center gap-2 opacity-0 transition-opacity group-hover:pointer-events-auto group-hover:opacity-100",children:[I,O]})}),e[48]=I,e[49]=O,e[50]=L):L=e[50];let B;return e[51]!==A||e[52]!==L||e[53]!==S?(B=i.jsxs("div",{className:"group peer hover:bg-token-interactive-bg-secondary-hover relative rounded-2xl px-4 py-5 transition-colors peer-hover:[&_.prompt-item-divider]:opacity-0 hover:[&_.prompt-item-divider]:opacity-0",children:[S,A,L]}),e[51]=A,e[52]=L,e[53]=S,e[54]=B):B=e[54],B};function n0t({conversation:t}){"use no forget";const e=te(),[n,s]=v.useState(""),r=bE(n,300).trim(),a=r.length>0,[l,c]=wo(),u=v.useRef(!1),d=()=>{rt(va,{referer:"library"})},{data:f,isLoading:m,isFetchingNextPage:p,hasNextPage:g,fetchNextPage:h}=ET({enabled:!0}),{data:_,isLoading:x,isFetchingNextPage:b,hasNextPage:y,fetchNextPage:S,isError:C}=PLe({search:r,enabled:a}),w=f?fC(f.pages.map(L=>L.prompts)):[],k=_?fC(_.pages.map(L=>L.prompts)):[],E=a?k:w,T=a?x:m,M=a?!!y:!!g,A=!a&&!m&&w.length===0,I=a&&!x&&!C&&k.length===0,j=a&&C&&!T,R=a?b:p,O=a?S:h;return v.useEffect(()=>{var B;if(u.current||!l.has($6))return;u.current=!0;const L=(B=l.get("referer"))!=null?B:"none";rt(va,{referer:L}),c(U=>(U.delete($6),U),{replace:!0})},[l,c]),v.useEffect(()=>{var B;const L=(B=l.get("referer"))!=null?B:"none";V.logEventWithStatsig("chatgpt_web_prompt_page_visited","chatgpt_web_prompt_page_visited",{referer:L})},[l]),i.jsx("div",{className:"flex h-full w-full flex-1 flex-col items-center justify-self-center",children:i.jsxs("div",{className:q("flex h-full min-h-0 w-full max-w-[960px] flex-1 flex-col px-4"),children:[i.jsxs("div",{className:"mt-10 px-4 md:px-0",children:[i.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-4",children:[i.jsxs("div",{className:"min-w-0",children:[i.jsx("h1",{className:"text-token-text-primary text-2xl font-semibold md:text-3xl",children:i.jsx(P,{id:"d8QHX8",defaultMessage:"Bookmarked prompts"})}),i.jsx("p",{className:"text-token-text-secondary mt-2 max-w-2xl text-sm",children:i.jsx(P,{id:"yoQTCL",defaultMessage:"Create, organize, and quickly reuse prompts across tasks and workflows."})})]}),i.jsx(Se,{onClick:d,className:"shrink-0",children:i.jsx(P,{id:"hv3jkZ",defaultMessage:"Create prompt"})})]}),i.jsx("div",{className:"mt-6",children:i.jsx(xd,{name:"prompt-search",type:"text",role:"searchbox",color:"search",className:"w-full",containerInputClassName:"w-full",inputClassName:"ps-7 pe-10",ariaLabel:e.formatMessage({id:"xx/Zuh",defaultMessage:"Search prompts..."}),placeholder:e.formatMessage({id:"w8YxB0",defaultMessage:"Search prompts..."}),value:n,onChange:L=>s(L.target.value),insideContainerChildren:i.jsxs(i.Fragment,{children:[i.jsx(o_,{className:"text-token-text-tertiary pointer-events-none absolute start-0 top-1/2 h-4 w-4 -translate-y-1/2","aria-hidden":"true"}),n?i.jsx("button",{type:"button",className:"text-token-text-tertiary hover:text-token-text-secondary absolute end-0 top-1/2 me-4 -translate-y-1/2 rounded-full p-1",onClick:()=>s(""),"aria-label":e.formatMessage({id:"13DqN2",defaultMessage:"Clear search"}),children:i.jsx(zw,{className:"h-3.5 w-3.5"})}):null]})})})]}),i.jsx("div",{className:"relative mt-8 flex min-h-[320px] flex-1 flex-col",children:A?i.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:i.jsx(QWe,{})}):T?i.jsx("div",{className:"mt-8 flex flex-col items-center justify-center gap-2",children:i.jsx(Us,{className:"h-4 w-4"})}):j?i.jsx("div",{className:"text-token-text-tertiary mt-10 text-center text-sm md:px-0",children:i.jsx(P,{id:"pNu5Ej",defaultMessage:"Something went wrong while searching. Try again later."})}):I?i.jsx("div",{className:"text-token-text-secondary mt-10 text-center text-sm md:px-0",children:i.jsx(P,{id:"Iv6guV",defaultMessage:"No prompts matched your search."})}):i.jsxs(i.Fragment,{children:[i.jsx("div",{children:E.map((L,B)=>{var U;return i.jsx(JWe,{conversation:t,prompt:L,isFirst:B===0},"templated_prompt_".concat((U=L.id)!=null?U:B))})}),(!a||!C)&&i.jsx("div",{className:"pb-10",children:i.jsx(zwe,{isFetchingNextPage:R,hasNextPage:M,fetchNextPage:O})})]})})]})})}function XWe(){rt(va,{referer:"library"})}function eqe(){return Ca()}function tqe(t){var e;return(e=_v[t])==null?void 0:e.icon}function nqe(t,e){return t?i.jsx(t,{className:"h-5 w-5"},e):null}const sqe=re(me,"36d8fa",20,20),oqe=re(me,"a9cb45",20,20),rqe=re(me,"155a34",20,20,!0),qT=({modelSwitcherDeny:t,value:e,label:n,subtitle:s,icon:o,onMouseEnter:r,onMouseLeave:a,onSelect:l,shouldShowUpsell:c=!1,className:u,clientThreadId:d})=>{const f=Et(),m=Tk({clientThreadId:d}),p=iF({modelSlug:e,modelSwitcherDenialsBySlug:m}),g=!p&&!c,h=bt(),_=x=>{var b;if(!c){l==null||l(x);return}V.logEvent("Account Pay: Open Payment from Message Model Picker"),gV({type:r_.RATE_LIMIT,location:"message_model_switcher_dropdown",plan_type:(b=f==null?void 0:f.planType)!=null?b:"unknown",is_hard_block:!1,hard_block_reason:"",is_new_conversation:!1}),xs(h,"Message model switcher dropdown")};return i.jsx(St,{label:t&&i.jsx(aF,{modelSwitcherDeny:t}),children:i.jsx(ee.Item,{onSelect:_,onMouseEnter:()=>p&&(r==null?void 0:r()),onMouseLeave:()=>p&&(a==null?void 0:a()),disabled:g,className:u,icon:o,trailing:c?i.jsx(aqe,{}):void 0,label:n,secondary:s})})};function aqe(){return i.jsx(Se,{color:"secondary",size:"small",children:i.jsx(P,N({},B_()))})}const iqe=re(me,"9254a2",20,20),s0t=3600*24*30;function lqe(t){var e;return((e=t.author.metadata)==null?void 0:e.real_author)===U7.ToolWeb}function o0t(t,e){return"https://chatgpt.com/search/evals/permalink/".concat(t,"/").concat(e)}function r0t(t){return u3(t.flatMap(e=>e.type==="image_v2"?e.images:[]))}function a0t(t){const e={};return t.forEach(n=>{var s,o,r,a,l,c,u;if(n.type==="grouped_webpages")n.items.forEach(d=>{var m,p;if(!d.url)return;const f=e[d.url];f?"attribution_segments"in d&&"attribution_segments"in f&&(e[d.url]=G(N({},f),{attribution_segments:[...(m=f.attribution_segments)!=null?m:[],...(p=d.attribution_segments)!=null?p:[]]})):e[d.url]=N({},d)});else if(n.type==="webpage"||n.type==="webpage_extended")n.url&&(e[n.url]||(e[n.url]=n));else if(n.type==="image_inline"){const d=(o=n.clicked_from_url)!=null?o:(s=n.asset_pointer_links)==null?void 0:s[0];if(d){const f={type:"image_inline",url:d,title:(r=n.clicked_from_title)!=null?r:"Screenshot",snippet:"",attribution:"screenshot",asset_pointer_links:n.asset_pointer_links,clicked_from_url:n.clicked_from_url,clicked_from_title:n.clicked_from_title};e[d]=f}}else if(n.type==="file"){const d="file://".concat(n.source,"/").concat(n.id),f=(a=n.name)!=null?a:n.id,m=(c=(l=n.snippet)!=null?l:n.text)!=null?c:"",p=(u=n.source)!=null?u:"file";e[d]||(e[d]=G(N({},n),{title:f,url:d,snippet:m,attribution:p}))}else"cite_map"in n&&Object.values(n.cite_map).forEach(d=>{d&&d.url&&(e[d.url]||(e[d.url]=d))})}),Object.values(e)}function uq(t,e){const{modelSwitcherDeny:n,subscriptionLevel:s}=t;return!!n&&n.reason===r_.RATE_LIMIT&&s===xv.PLUS&&!e}function cqe({messageModelEnabledTools:t,message:e,intl:n,lastResponseUsedSearch:s}){const o=t.includes(Ke.Search),r=typeof s=="boolean"?s:lqe(e);return[{key:"use-search",extraStreamParams:{forceUseSearch:!0},label:n.formatMessage({id:"eTV6j1",defaultMessage:"Search the web"}),icon:xi,condition:o&&!r,eventName:"chatgpt_regenerate_with_search_button_clicked"},{key:"use-no-search",extraStreamParams:{forceUseSearch:!1},label:n.formatMessage({id:"k/SdXa",defaultMessage:"Don't search the web"}),icon:iqe,condition:o&&r,eventName:"chatgpt_regenerate_without_search_button_clicked"}]}function uqe({clientThreadId:t,message:e,intl:n}){const s=ve.isReasoningResponseMessage(At(t),e.id);return[{key:"use-reason",extraStreamParams:{forceUseReason:!0},label:n.formatMessage({id:"4VX35n",defaultMessage:"Think longer"}),icon:P_,condition:!s,eventName:"chatgpt_regenerate_with_reason_button_clicked"}]}function Bb(t){"use forget";var m;const e=D.c(17),{clientThreadId:n,messageId:s,onModelSelect:o,modelRetryOption:r,hasPlusFeatures:a}=t;let l,c;e[0]!==r?(m=r,{value:c}=m,l=De(m,["value"]),e[0]=r,e[1]=l,e[2]=c):(l=e[1],c=e[2]);let u;e[3]!==n||e[4]!==s||e[5]!==o||e[6]!==c?(u=p=>{ft.logEvent("chatgpt_regenerate_switch_model_button_clicked",c,N({requestedModelId:c},Ms({clientThreadId:n,messageId:s}))),o({sourceEvent:p,requestedModelId:c})},e[3]=n,e[4]=s,e[5]=o,e[6]=c,e[7]=u):u=e[7];let d;e[8]!==a||e[9]!==r?(d=uq(r,a),e[8]=a,e[9]=r,e[10]=d):d=e[10];let f;return e[11]!==n||e[12]!==l||e[13]!==u||e[14]!==d||e[15]!==c?(f=i.jsx(qT,G(N({value:c,onSelect:u,shouldShowUpsell:d},l),{clientThreadId:n})),e[11]=n,e[12]=l,e[13]=u,e[14]=d,e[15]=c,e[16]=f):f=e[16],f}function dqe(t){"use forget";const e=D.c(15),{clientThreadId:n,messageId:s,onModelSelect:o,modelRetryOption:r,parentPrompt:a,hasImageGenMessage:l}=t,c=te(),u=r.value;let d;e[0]!==n||e[1]!==l||e[2]!==s||e[3]!==r.value||e[4]!==o||e[5]!==(a==null?void 0:a.id)?(d=g=>{var h;V.logEventWithStatsig("chatgpt_regenerate_try_again_button_clicked","chatgpt_regenerate_try_again_button_clicked",N({requestedModelId:r.value},Ms({clientThreadId:n,messageId:s}))),l&&V.logEventWithStatsig("ChatGPT Turn Action Imagegen Regenerate (Not Dropdown) Clicked","chatgpt_turn_action_imagegen_regenerate"),xe("3247947701")&&lT({retry_option:"try_again",parent_prompt_id:(h=a==null?void 0:a.id)!=null?h:""},Lt(n),r.value),o({sourceEvent:g,requestedModelId:r.value})},e[0]=n,e[1]=l,e[2]=s,e[3]=r.value,e[4]=o,e[5]=a==null?void 0:a.id,e[6]=d):d=e[6];let f;e[7]!==c?(f=c.formatMessage({id:"VbsBGW",defaultMessage:"Try again"}),e[7]=c,e[8]=f):f=e[8];let m;e[9]===Symbol.for("react.memo_cache_sentinel")?(m=i.jsx(vc,{className:"icon"}),e[9]=m):m=e[9];let p;return e[10]!==n||e[11]!==r||e[12]!==d||e[13]!==f?(p=i.jsx(qT,G(N({onSelect:d},r),{label:f,subtitle:void 0,icon:m,clientThreadId:n}),u),e[10]=n,e[11]=r,e[12]=d,e[13]=f,e[14]=p):p=e[14],p}function V6(t){"use forget";const e=D.c(11),{clientThreadId:n,messageId:s,onModelSelect:o,modelRetryOption:r,systemHintRetryOptions:a}=t;let l;if(e[0]!==n||e[1]!==s||e[2]!==r||e[3]!==o||e[4]!==a){let c;e[6]!==n||e[7]!==s||e[8]!==r||e[9]!==o?(c=u=>{const d=u.icon;return i.jsx(qT,G(N({onSelect:f=>{V.logEventWithStatsig(u.eventName,u.eventName,N({requestedModelId:r.value},Ms({clientThreadId:n,messageId:s}))),o({sourceEvent:f,requestedModelId:r.value,extraStreamParams:u.extraStreamParams})}},r),{label:u.label,subtitle:"",icon:i.jsx(d,{className:"icon"}),clientThreadId:n}),u.key)},e[6]=n,e[7]=s,e[8]=r,e[9]=o,e[10]=c):c=e[10],l=a.filter(fqe).map(c),e[0]=n,e[1]=s,e[2]=r,e[3]=o,e[4]=a,e[5]=l}else l=e[5];return l}function fqe(t){return t.condition}const z6="freeform_feedback",mqe="The user provided feedback on a previous completion. Use it to generate a new completion. The output should be a standalone response that reflects the feedback without acknowledging it. Do not mention, suggest, or imply that this is a revision, improvement, or result of feedback. Respond in the same language as the original completion, even if the feedback is in another language. Only switch if the feedback explicitly asks you to translate the completion. Here is the feedback:\n",W6=we({retryWithFeedback:{id:"HW5O9Q",defaultMessage:"Ask to change response"},makeLonger:{id:"s7cVzc",defaultMessage:"Add details"},makeShorter:{id:"uWyhEy",defaultMessage:"More concise"},squareAspect:{id:"kk6dTP",defaultMessage:"Square"},portraitAspect:{id:"yEJA9Q",defaultMessage:"Portrait"},landscapeAspect:{id:"bXtb1o",defaultMessage:"Landscape"}}),pqe=(t,e)=>{var n,s,o,r,a;return t?[{key:"square_aspect",messageKey:"squareAspect",prompt:(n=e.square_aspect)!=null?n:"Please regenerate the image in a square aspect ratio.",icon:i.jsx(sqe,{})},{key:"portrait_aspect",messageKey:"portraitAspect",prompt:(s=e.portrait_aspect)!=null?s:"Please regenerate the image in a portrait (vertical) aspect ratio.",icon:i.jsx(Fxe,{})},{key:"landscape_aspect",messageKey:"landscapeAspect",prompt:(o=e.landscape_aspect)!=null?o:"Please regenerate the image in a landscape (horizontal) aspect ratio.",icon:i.jsx(oqe,{})}]:[{key:"make_longer",messageKey:"makeLonger",prompt:(r=e.make_longer)!=null?r:"Please make this response longer and more detailed.",icon:i.jsx(nEe,{})},{key:"make_shorter",messageKey:"makeShorter",prompt:(a=e.make_shorter)!=null?a:"Please make this response more concise and brief.",icon:i.jsx(rqe,{})}]};function gqe({lastMessage:t,messages:e,hasImageGenMessage:n,canRegenerateResponse:s,onModelSelect:o,clientThreadId:r,retryOption:a,contentRef:l,parentPrompt:c}){var S,C,w,k;const u=te(),[d,f]=v.useState(""),m=v.useRef(null),p=mn("3586972587").get("prompt",mqe),g=mn("2881703223").get("prompts",{}),h=pqe(n,g),_=(k=(S=t.metadata)==null?void 0:S.model_slug)!=null?k:(w=(C=[...e].reverse().find(E=>{var T;return(T=E.metadata)==null?void 0:T.model_slug}))==null?void 0:C.metadata)==null?void 0:w.model_slug;v.useEffect(()=>{requestAnimationFrame(()=>{var E;(E=m.current)==null||E.focus()})},[]),v.useEffect(()=>{const E=l==null?void 0:l.current;if(!E)return;function T(M){m.current&&document.activeElement!==m.current&&(x7(M)||M.key==="Enter"||M.ctrlKey||M.metaKey||M.key.length!==1&&!y7(M)||(M.stopPropagation(),m.current.focus()))}return E.addEventListener("keydown",T),()=>{E.removeEventListener("keydown",T)}},[]);const x=v.useCallback((E,T,M,A)=>{var j;xe("3247947701")&&lT({retry_option:A,parent_prompt_id:(j=c==null?void 0:c.id)!=null?j:"",freeform_feedback:A===z6?T:void 0},Lt(r),_);const I="".concat(E).concat(T);o({sourceEvent:M,requestedModelId:_||"",appendMessages:[Dc(I,{is_visually_hidden_from_conversation:!0,is_contextual_retry_user_message:!0})]})},[o,_,r,c==null?void 0:c.id]),b=E=>{d.trim()&&(x(p,d.trim(),E,z6),f(""))},y=(E,T)=>{const M="".concat(E.prompt);x(p,M,T,E.key)};return s?i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"relative",children:[i.jsx(ee.InputItem,{selectAllOnFocus:!1,ref:m,value:d,onChange:E=>f(E.target.value),placeholder:u.formatMessage(W6.retryWithFeedback),onSubmit:b,border:!1,className:"min-w-[210px] ps-2.5 pe-9",name:"contextual-retry-dropdown-input"}),i.jsx("div",{className:"absolute end-4 top-1/2 flex -translate-y-1/2 items-center justify-center",children:i.jsx("button",{className:"icon composer-submit-btn",disabled:d.trim()==="",onClick:b,"aria-label":u.formatMessage({defaultMessage:"Submit",id:"aria.submit"}),"data-in-menu":Dm(!0),children:i.jsx(AH,{className:"icon-xs"})})})]}),i.jsx(ee.Separator,{}),!!a&&i.jsx(dqe,{clientThreadId:r,messageId:t.id,onModelSelect:o,modelRetryOption:a,parentPrompt:c,hasImageGenMessage:n}),h.map(E=>i.jsx(ee.Item,{onSelect:T=>y(E,T),label:u.formatMessage(W6[E.messageKey]),icon:E.icon},E.key))]}):null}const hqe=({clientThreadId:t,message:e})=>{var f,m,p,g,h,_,x,b;const n=Pt(t),s=X(()=>Lr(n)),o=Tk({clientThreadId:t}),r=[];for(const y of(f=s.categories)!=null?f:[]){if(H0e(y))continue;const{defaultModel:S,label:C,tagline:w,subscriptionLevel:k,subcategory:E}=y,T=(p=(m=o[S])==null?void 0:m.regenerate)==null?void 0:p[0];r.push({label:C,value:S,subtitle:w,modelSwitcherDeny:T,subscriptionLevel:k,subcategory:E})}const a=(g=e.metadata)==null?void 0:g.model_slug,l=VC(s,a),c=(l==null?void 0:l.enabledTools)||[],u=X(()=>Fn(n));let d;return l&&a?d={label:l==null?void 0:l.title,value:a,subtitle:l==null?void 0:l.description,subscriptionLevel:xv.FREE,modelSwitcherDeny:a?(_=(h=o[a])==null?void 0:h.regenerate)==null?void 0:_[0]:void 0}:u&&(d={label:u.title,value:u.id,subtitle:u.description,subscriptionLevel:xv.FREE,modelSwitcherDeny:(b=(x=o[u.id])==null?void 0:x.regenerate)==null?void 0:b[0]}),{modelOptions:r,messageModelConfig:l,messageModelEnabledTools:c,defaultModelSlug:H7(s),modelPickerVersion:s.modelPickerVersion,fallbackModelOption:d}};function _qe(t){"use forget";var sr,cs,Gr,js,Vr,pn,$n,Ps,Nl,Mo,Il,Jc;const e=D.c(79),{className:n,clientThreadId:s,lastMessage:o,messages:r,hasImageGenMessage:a,onModelSelect:l,canRegenerateResponse:c,parentPrompt:u,isMostRecentTurn:d,size:f}=t,m=f===void 0?"med":f,[p,g]=v.useState(!1),h=m_(s);let _;e[0]!==h?(_=h&&Bs(h)?h:void 0,e[0]=h,e[1]=_):_=e[1];const{data:x}=gi(_);let b;e[2]!==x?(b=l_(x),e[2]=x,e[3]=b):b=e[3];const y=b,S=!!((sr=o.metadata)!=null&&sr.image_gen_async);let C;e[4]!==((cs=o.metadata)==null?void 0:cs.model_slug)||e[5]!==r?(C=(pn=(Gr=o.metadata)==null?void 0:Gr.model_slug)!=null?pn:(Vr=(js=[...r].reverse().find(xqe))==null?void 0:js.metadata)==null?void 0:Vr.model_slug,e[4]=($n=o.metadata)==null?void 0:$n.model_slug,e[5]=r,e[6]=C):C=e[6];const w=C,k=o.id,E=te(),T=Et(),M=T==null?void 0:T.planType,A=v.useRef(null),I=v.useRef(null);yl();const[j,R]=v.useState(!1);xe("880513586");let O;e[7]!==s||e[8]!==o?(O={clientThreadId:s,message:o},e[7]=s,e[8]=o,e[9]=O):O=e[9];const{modelOptions:L,messageModelConfig:B,messageModelEnabledTools:U,defaultModelSlug:H,modelPickerVersion:$,fallbackModelOption:F}=hqe(O);let z;if(e[10]!==w||e[11]!==L){let Pn;e[13]!==w?(Pn=jl=>jl.value===w,e[13]=w,e[14]=Pn):Pn=e[14],z=L.find(Pn),e[10]=w,e[11]=L,e[12]=z}else z=e[12];const W=z;let Y;if(e[15]!==(H==null?void 0:H.id)||e[16]!==L){let Pn;e[18]!==(H==null?void 0:H.id)?(Pn=jl=>jl.value===(H==null?void 0:H.id),e[18]=H==null?void 0:H.id,e[19]=Pn):Pn=e[19],Y=L.find(Pn),e[15]=H==null?void 0:H.id,e[16]=L,e[17]=Y}else Y=e[17];const K=Y,Z=$===2;let J;e[20]!==s||e[21]!==k||e[22]!==L||e[23]!==l||e[24]!==Z?(J=i.jsx(yqe,{clientThreadId:s,messageId:k,onModelSelect:l,modelOptions:L,isModelPickerV2:Z}),e[20]=s,e[21]=k,e[22]=L,e[23]=l,e[24]=Z,e[25]=J):J=e[25];const Q=J,ne=W!=null?W:F;let ie;e[26]===Symbol.for("react.memo_cache_sentinel")?(ie=Pn=>{Pn||setTimeout(()=>{A.current&&A.current.blur()},10)},e[26]=ie):ie=e[26];const fe=ie;let ae,le;e[27]!==p?(ae=()=>{fe(p)},le=[p],e[27]=p,e[28]=ae,e[29]=le):(ae=e[28],le=e[29]),v.useEffect(ae,le);let pe,_e;e[30]!==p?(pe=()=>{p||R(!1)},_e=[p],e[30]=p,e[31]=pe,e[32]=_e):(pe=e[31],_e=e[32]),v.useEffect(pe,_e);let Ce;e[33]!==s?(Ce={clientThreadId:s},e[33]=s,e[34]=Ce):Ce=e[34];const ge=o$(Ce),Re=v.useRef(ge);let ke,he;e[35]!==ge?(ke=()=>{Re.current=ge},he=[ge],e[35]=ge,e[36]=ke,e[37]=he):(ke=e[36],he=e[37]),v.useEffect(ke,he);const Ee=jU(),Pe=(Ps=o.metadata)==null?void 0:Ps.model_slug,Ae=cqe({messageModelEnabledTools:U,message:o,intl:E});let de;e[38]!==s||e[39]!==E||e[40]!==o?(de=uqe({clientThreadId:s,message:o,intl:E}),e[38]=s,e[39]=E,e[40]=o,e[41]=de):de=e[41];const oe=de;if(!c||S)return null;const se=(Nl=o.metadata)==null?void 0:Nl.show_safety_switch_ui;if(Je("2404437118").get("edit_buttons_hidden",!1)&&!d)return null;const Ne=ee;let ze;e[42]===Symbol.for("react.memo_cache_sentinel")?(ze=Pn=>{g(Pn),fe(Pn),Pn&&V.logEventWithStatsig("Contextual Retry Dropdown Menu Opened","chatgpt_contextual_retry_dropdown_opened")},e[42]=ze):ze=e[42];let Qe;e[43]!==(B==null?void 0:B.title)||e[44]!==Pe||e[45]!==se?(Qe=se?i.jsx(P,G(N({},yu.modelUsedDescription),{values:{modelName:(Mo=B==null?void 0:B.title)!=null?Mo:Pe}})):i.jsx(P,{id:"gW2N97",defaultMessage:"Try again..."}),e[43]=B==null?void 0:B.title,e[44]=Pe,e[45]=se,e[46]=Qe):Qe=e[46];let Le;e[47]!==a||e[48]!==(B==null?void 0:B.title)||e[49]!==Pe||e[50]!==se?(Le=se||a?null:i.jsx(P,{id:"yAiiEg",defaultMessage:"Used {modelName}",values:{modelName:(Il=B==null?void 0:B.title)!=null?Il:Pe}}),e[47]=a,e[48]=B==null?void 0:B.title,e[49]=Pe,e[50]=se,e[51]=Le):Le=e[51];let ce;e[52]!==n?(ce=q("cursor-pointer",n),e[52]=n,e[53]=ce):ce=e[53];let be;e[54]!==E?(be=E.formatMessage({id:"42qUcL",defaultMessage:"Switch model"}),e[54]=E,e[55]=be):be=e[55];let He;e[56]!==se||e[57]!==m?(He=i.jsx("div",{className:"flex items-center",children:se?i.jsx(kr,{color:"var(--tag-blue)",className:m==="small"?"icon-sm":"icon"}):i.jsx(vc,{className:m==="small"?"icon-sm":"icon"})}),e[56]=se,e[57]=m,e[58]=He):He=e[58];let Ge;e[59]!==ce||e[60]!==be||e[61]!==He?(Ge=i.jsx(ee.BasicTrigger,{ref:A,className:ce,"aria-label":be,children:He}),e[59]=ce,e[60]=be,e[61]=He,e[62]=Ge):Ge=e[62];let nt;e[63]!==Qe||e[64]!==Le||e[65]!==Ge?(nt=i.jsx(St,{label:Qe,secondaryLabel:Le,children:Ge}),e[63]=Qe,e[64]=Le,e[65]=Ge,e[66]=nt):nt=e[66];const at=ee,Xe=ee,gt="top",ht=4,Zt=-10,It="start",lt="auto",Mt=j?i.jsxs(i.Fragment,{children:[i.jsx(ee.Item,{icon:i.jsx(Uu,{className:"h-4 w-4"}),color:"default",className:"mb-1 ps-1",onClick:Pn=>{Pn.preventDefault(),R(!1)},children:i.jsx(P,N({},yu.back))}),i.jsx(ee.Separator,{}),Q]}):i.jsxs(i.Fragment,{children:[i.jsx(gqe,{lastMessage:o,messages:r,hasImageGenMessage:a,canRegenerateResponse:c,onModelSelect:l,clientThreadId:s,retryOption:ne,contentRef:I,parentPrompt:u}),ne&&i.jsxs(i.Fragment,{children:[i.jsx(ee.Separator,{}),i.jsx(V6,{clientThreadId:s,messageId:k,onModelSelect:l,modelRetryOption:ne,systemHintRetryOptions:[...Ae]})]}),!!K&&!a&&(M===et.FREE||M===et.GO)&&i.jsx(V6,{clientThreadId:s,messageId:k,onModelSelect:l,modelRetryOption:K,systemHintRetryOptions:oe}),!a&&M&&gte(M)&&M!==et.GO&&!y&&!se&&i.jsxs(ee.Sub,{children:[!Ee&&i.jsxs(i.Fragment,{children:[i.jsx(ee.SubMenuTrigger,{icon:EI,children:i.jsx(P,N({},yu.switchModel))}),i.jsx(ee.Portal,{children:i.jsx(ee.SubContent,{children:Q})})]}),Ee&&i.jsx(ee.SubMenuTrigger,{icon:EI,onClick:Pn=>{Pn.preventDefault(),R(!0)},children:i.jsx(P,N({},yu.switchModel))})]}),se&&i.jsxs(i.Fragment,{children:[i.jsx(ee.Separator,{}),i.jsxs("div",{className:"px-4 py-2",children:[i.jsx("div",{className:"text-sm",children:i.jsx(P,G(N({},yu.modelUsedDescription),{values:{modelName:(Jc=B==null?void 0:B.title)!=null?Jc:Pe}}))}),i.jsx("div",{className:"text-token-text-tertiary max-w-64 py-1 text-xs",children:i.jsx(P,G(N({},yu.safetySwitchWarning),{values:{learnMoreLink:i.jsx("a",{href:"https://help.openai.com/en/articles/12454167",target:"_blank",className:"text-token-text-accent hover:text-token-text-accent/80 underline",rel:"noreferrer",children:i.jsx(P,{id:"dyuBaD",defaultMessage:"Learn more"})})}}))})]})]})]});let Yt;e[67]!==Xe.Content||e[68]!==Mt?(Yt=i.jsx(Xe.Content,{side:gt,sideOffset:ht,alignOffset:Zt,align:It,size:lt,ref:I,children:Mt}),e[67]=Xe.Content,e[68]=Mt,e[69]=Yt):Yt=e[69];let nn;e[70]!==at.Portal||e[71]!==Yt?(nn=i.jsx(at.Portal,{children:Yt}),e[70]=at.Portal,e[71]=Yt,e[72]=nn):nn=e[72];let rn;return e[73]!==p||e[74]!==Ne.Root||e[75]!==ze||e[76]!==nt||e[77]!==nn?(rn=i.jsxs(Ne.Root,{open:p,onOpenChange:ze,children:[nt,nn]}),e[73]=p,e[74]=Ne.Root,e[75]=ze,e[76]=nt,e[77]=nn,e[78]=rn):rn=e[78],rn}function xqe(t){var e;return(e=t.metadata)==null?void 0:e.model_slug}function yqe(t){"use forget";const e=D.c(41),{clientThreadId:n,messageId:s,onModelSelect:o,modelOptions:r,isModelPickerV2:a}=t,{data:l}=Uc(),c=l===void 0?null:l;let u;e[0]!==c?(u=c&&n3(c),e[0]=c,e[1]=u):u=e[1];const d=u;let f;e[2]!==r?(f=uw(r,bqe),e[2]=r,e[3]=f):f=e[3];const[m,p]=f;let g;e[4]!==d||e[5]!==r?(g=()=>{const E=r.some(T=>uq(T,d));V.logEvent("Conversation Open Message Model Selector",{has_get_plus_button:E,is_new_regen_dropdown:!0})},e[4]=d,e[5]=r,e[6]=g):g=e[6];const h=v.useEffectEvent(g);let _;e[7]!==h?(_=()=>{h()},e[7]=h,e[8]=_):_=e[8];let x;e[9]===Symbol.for("react.memo_cache_sentinel")?(x=[],e[9]=x):x=e[9],v.useEffect(_,x);let b;e[10]!==m?(b=new Map,m.forEach(E=>{var M;const T=E.subcategory;T&&(b.has(T)||b.set(T,[]),(M=b.get(T))==null||M.push(E))}),e[10]=m,e[11]=b):b=e[11];const y=b;let S;if(e[12]!==n||e[13]!==d||e[14]!==s||e[15]!==o||e[16]!==p){let E;e[18]!==n||e[19]!==d||e[20]!==s||e[21]!==o?(E=T=>i.jsx(Bb,{clientThreadId:n,messageId:s,onModelSelect:o,modelRetryOption:T,hasPlusFeatures:d},T.value),e[18]=n,e[19]=d,e[20]=s,e[21]=o,e[22]=E):E=e[22],S=p.map(E),e[12]=n,e[13]=d,e[14]=s,e[15]=o,e[16]=p,e[17]=S}else S=e[17];let C;e[23]!==n||e[24]!==d||e[25]!==a||e[26]!==s||e[27]!==o||e[28]!==y?(C=a&&[...y.entries()].map(E=>{const[T,M]=E;return M.map(A=>i.jsx(Bb,{clientThreadId:n,messageId:s,onModelSelect:o,modelRetryOption:A,hasPlusFeatures:d},T+"-"+A.value))}),e[23]=n,e[24]=d,e[25]=a,e[26]=s,e[27]=o,e[28]=y,e[29]=C):C=e[29];let w;e[30]!==n||e[31]!==d||e[32]!==a||e[33]!==s||e[34]!==o||e[35]!==y?(w=!a&&[...y.entries()].map(E=>{const[T,M]=E;return i.jsxs(ee.Sub,{children:[i.jsx(ee.SubMenuTrigger,{children:i.jsx("div",{className:"flex grow justify-between gap-2 overflow-hidden",children:T})}),i.jsx(ee.Portal,{children:i.jsx(ee.SubContent,{className:"min-w-fit",children:M.map(A=>i.jsx(Bb,{clientThreadId:n,messageId:s,onModelSelect:o,modelRetryOption:A,hasPlusFeatures:d},T+"-"+A.value))})})]},T)}),e[30]=n,e[31]=d,e[32]=a,e[33]=s,e[34]=o,e[35]=y,e[36]=w):w=e[36];let k;return e[37]!==S||e[38]!==C||e[39]!==w?(k=i.jsxs(i.Fragment,{children:[S,C,w]}),e[37]=S,e[38]=C,e[39]=w,e[40]=k):k=e[40],k}function bqe(t){return t.subcategory}const vqe=v.memo(_qe),yu=we({switchModel:{id:"RegenerateWithModelDropdown.switchModel",defaultMessage:"Switch model"},back:{id:"RegenerateWithModelDropdown.back",defaultMessage:"Back"},modelUsedDescription:{id:"RegenerateWithModelDropdown.modelUsedDescription",defaultMessage:"Used {modelName}"},safetySwitchWarning:{id:"RegenerateWithModelDropdown.safetySwitchWarning",defaultMessage:"ChatGPT routes some sensitive conversations to models that handle these topics with extra care. {learnMoreLink}"}});function KT(t){return"https://chatgpt.com/s/".concat(t)}const Fb={GenerateFailed:"generate_failed",CopyFailed:"copy_failed"};class f1 extends Error{constructor(n,s){super(n);ye(this,"code");this.code=s}}const Ou=new Map,mC=new Set,dq=()=>{mC.forEach(t=>t())},Sqe=(t,e)=>{var s,o;if(t instanceof f1){const r=(s=t.code)!=null?s:e;return new f1((o=t.message)!=null?o:"Failed to share",r)}const n=t instanceof Error?t.message:"Failed to share";return new f1(n,e)},m1=t=>(Ou.set(t.shareTargetId,t),dq(),t),Cqe=t=>{if(t)return t.status==="succeeded",t.link},wqe=(t,e,n)=>{const s=Date.now(),o=Ou.get(t),r=Cqe(o);let a,l;const c=new Promise((d,f)=>{a=d,l=f});return(async()=>{var d,f;try{const m=await n();if(!m)throw new f1("Share link not generated",Fb.GenerateFailed);const p={shareTargetId:t,shareType:e,status:"succeeded",promise:c,link:m,lastUpdated:Date.now(),succeededAt:Date.now()};m1(p),a({link:m,status:"succeeded"})}catch(m){const p=Sqe(m,Fb.GenerateFailed),g={shareTargetId:t,shareType:e,status:"failed",promise:c,link:r,error:{code:(d=p.code)!=null?d:Fb.GenerateFailed,message:(f=p.message)!=null?f:"Failed to share"},lastUpdated:Date.now(),failedAt:Date.now()};m1(g),l(p)}})(),m1({shareTargetId:t,shareType:e,status:"processing",startedAt:s,promise:c,link:r,lastUpdated:s}),c},pC={get:t=>Ou.get(t),start:(t,e,n)=>{const s=Ou.get(t);return(s==null?void 0:s.status)==="processing"?s.promise:(s==null?void 0:s.status)==="succeeded"?Promise.resolve(s):wqe(t,e,n)},setCopied:t=>{const e=Ou.get(t);e&&m1(G(N({},e),{copiedAt:Date.now(),lastUpdated:Date.now()}))},subscribe:t=>(mC.add(t),()=>{mC.delete(t)}),clearAll:()=>{Ou.clear(),dq()}},Qf=(t,e,n)=>[t,e,...n].join(":"),Dh=(t,e)=>{if(!t)throw new Error(e)},Ul=t=>encodeURIComponent(t),Ox=t=>{const{shareType:e,clientThreadId:n}=t;switch(Dh(n,"Missing clientThreadId for conversation"),e){case"conversation":return Qf(e,n,[]);case"message-slice":{const{messageSliceIds:s,parentPromptId:o}=t;Dh(Array.isArray(s)&&s.length,"Missing messageSliceIds for message slice share target");const r=s.filter(Boolean).map(l=>Ul(l)),a=o?[Ul(o)]:[];return Qf(e,n,[...r,...a])}case"image-gen":{const{imageGenMessageId:s,assetPointer:o}=t;Dh(s,"Missing fields for image generation share target");const r=[Ul(s)];return o&&r.push(Ul(o)),Qf(e,n,r)}case"odyssey":{const{odysseyShareIntent:s}=t;return Dh((s==null?void 0:s.messageId)&&(s==null?void 0:s.fileId)&&(s==null?void 0:s.serverThreadId),"Missing fields for odyssey share target"),Qf(e,n,[Ul(s.serverThreadId),Ul(s.messageId),Ul(s.fileId)])}default:return Qf(e,n,[])}},Ja=we({copyLink:{id:"postSharingModal.copyLink",defaultMessage:"Copy link"},linkCopied:{id:"postSharingModal.linkCopied",defaultMessage:"Link copied!"},failedToGenerateShareLink:{id:"postSharingModal.failedToGenerateShareLink",defaultMessage:"Failed to generate share link"},failedToCopyShareLink:{id:"postSharingModal.failedToCopyShareLink",defaultMessage:"Copy failed. Try again."},fromChatGPT:{id:"postSharingModal.fromChatGPT",defaultMessage:"From ChatGPT"},contentUnavailable:{id:"postSharingModal.contentUnavailable",defaultMessage:"Content Unavailable"},unavailableReasonGeneral:{id:"postSharingModal.unavailableReasonGeneral",defaultMessage:"This share link is not available because it doesnt exist or you dont have access to it."},unavailableReasonWorkspace:{id:"postSharingModal.unavailableReasonWorkspace",defaultMessage:"This content was shared from a workspace you dont have access to. Ask the owner to invite you if youd like to view it."},ok:{id:"postSharingModal.ok",defaultMessage:"OK"},shareLinkVisibleToWorkspaceOnly:{id:"postSharingModal.shareLinkVisibleToWorkspaceOnly",defaultMessage:"The share links are visible to workspace members only."},download:{id:"postSharingModal.download",defaultMessage:"Download"},downloadPdfButtonMenu:{id:"postSharingModal.download-pdf-button.menu",defaultMessage:"PDF Document (.pdf)"},downloadDocxButtonMenu:{id:"postSharingModal.download-docx-button.menu",defaultMessage:"Microsoft Word Document (.docx)"},downloadPptxButtonMenu:{id:"postSharingModal.download-pptx-button.menu",defaultMessage:"Microsoft PowerPoint Document (.pptx)"},downloadFileError:{id:"postSharingModal.downloadFileError",defaultMessage:"Failed to download file. Please try again later."},imageLicenseDisclaimer:{id:"postSharingModal.imageLicenseDisclaimer",defaultMessage:"Only share images you have a license to use. <link>Learn{nbsp}more</link>"},screenshotDisclaimer:{id:"postSharingModal.screenshotDisclaimer",defaultMessage:"Screenshots may contain sensitive information."}}),q6=3,kqe=async({shareRequestPromise:t,shareTargetId:e,shareType:n,shareVariant:s,toaster:o,intl:r})=>{const a=t.then(p=>p.link),l="share_variant=".concat(s,";share_type=").concat(n),c=p=>{const g=p==="success"?"Share Post: Copy Link Success":"Share Post: Copy Link Failure",h=p==="success"?"chatgpt_post_share_copy_success":"chatgpt_post_share_copy_failure";V.logEventWithStatsig(g,h,{share_type:n,share_variant:s})},u=typeof navigator<"u"?navigator.clipboard:null,d=typeof ClipboardItem<"u"&&!!(u!=null&&u.write),f=p=>p instanceof DOMException&&p.name==="NotAllowedError";if(d){const p="text/plain",g=new ClipboardItem({[p]:(async()=>{const h=await a;return new Blob([h],{type:p})})()});try{return await u.write([g]),await di.yield(),pC.setCopied(e),c("success"),o.success(r.formatMessage(Ja.linkCopied),{duration:q6,hasCloseButton:!0}),!0}catch(h){return c("failure"),Ve.addAction("share_request_auto_copy_failed",{error:h,share_target_id:e,share_type:n,share_variant:s}),f(h)||o.danger(r.formatMessage(Ja.failedToCopyShareLink),{toastId:"failed_to_copy_share_link",loggingDescription:l,hasCloseButton:!0}),!1}}if(!(u!=null&&u.writeText))return!1;let m;try{m=await a}catch(p){return!1}try{return await u.writeText(m),pC.setCopied(e),c("success"),o.success(r.formatMessage(Ja.linkCopied),{duration:q6,hasCloseButton:!0}),!0}catch(p){return c("failure"),Ve.addAction("share_request_auto_copy_failed",{error:p,share_target_id:e,share_type:n,share_variant:s}),f(p)||o.danger(r.formatMessage(Ja.failedToCopyShareLink),{toastId:"failed_to_copy_share_link",loggingDescription:l,hasCloseButton:!0}),!1}};function Lx({shareType:t,shareTargetId:e,shareVariant:n,generateShareLinkFn:s,toaster:o,intl:r,shouldPrewarm:a=!0}){let l=null;const c=()=>(l!=null||(l=pC.start(e,t,s)),l);a&&c();const u=()=>c().then(m=>m.link);let d=!1;return{ensureShareLink:u,autoCopyShareLink:()=>d?Promise.resolve(!1):(d=!0,kqe({shareRequestPromise:c(),shareTargetId:e,shareType:t,shareVariant:n,toaster:o,intl:r}))}}function YT(t){var e,n;return{shareVariant:(e=t==null?void 0:t.shareVariant)!=null?e:"control",shouldAutoCopyShareLink:(n=t==null?void 0:t.shouldAutoCopyShareLink)!=null?n:!1}}const Eg=je(()=>Me(()=>import("./c50e4b89-g9e16gmq72jzyzn2.js"),__vite__mapDeps([340,1,2,3,341,254,202,85,86,342])).then(t=>t.PostSharingModal)),Id=je(()=>Me(()=>import("./0c7275db-eiea8u1jjypyccm0.js"),__vite__mapDeps([343,1,2,3])).then(t=>t.MobilePostPreview));function Eqe(){Yn(Eg)}function Tqe(){Me(()=>Promise.resolve().then(()=>wUe),void 0)}function Mqe(t){const e=Bc(t,n=>ha.getImageAssetPointers(n).length>0);return e?ha.getImageAssetPointers(e)[0]:null}async function Aqe(t,e,n){return Mr(e.asset_pointer)?(await A5e(t,[e],null,void 0,n))[0]:null}const Nqe=async(t,e,n)=>{var a;const s=()=>ve.findNode(At(e),({message:l})=>l.id===n||!!ha.getImageAssetPointers(l).find(c=>c.asset_pointer===t));let o=s();if(!(o!=null&&o.message)&&(await sl(e),o=s(),!(o!=null&&o.message)))return null;const r=Lt(e);return{postText:(a=o.message.metadata)==null?void 0:a.image_gen_title,imageAssetPointer:Mqe([o.message]),serverThreadId:r}};async function fq(t,e,n,s,o=!1){const r=Mr(e.asset_pointer);if(!r)throw new Error("Missing image asset to generate share link");if(o){const{permalink:l}=await ue.safePost("/share/post/link",{authOption:Ot.SendIfAvailable,requestBody:{post_text:n,attachments_to_create:[{kind:"image_share",file_id:r,conversation_id:t,width:s==null?void 0:s.width,height:s==null?void 0:s.height}]}});return l}const a=await ue.safePost("/share/post",{authOption:Ot.SendIfAvailable,requestBody:{post_text:n,attachments_to_create:[{kind:"image_share",file_id:r,conversation_id:t,width:s==null?void 0:s.width,height:s==null?void 0:s.height}]}});return KT(a.post.id)}async function mq(t,e,n){const s=await ue.safePost("/share/post",{authOption:Ot.SendIfAvailable,requestBody:{post_text:n,attachments_to_create:[{kind:"message_slice",conversation_id:t,message_ids:e}]}});return KT(s.post.id)}async function Dx({postText:t,postTitle:e,clientThreadId:n,generateShareLinkFn:s,renderPreviewFn:o,usePostText:r,useShareLink:a,useShareTitle:l}){if(!Lt(n))return!1;try{const u=await s();return u?(o&&o(),await navigator.share({text:r?t:void 0,url:a?u:void 0,title:l?e:void 0}),!0):!1}catch(u){return!1}}const pq="3278106051";function Iqe(){return Je(pq).get("image_share_minimal_endpoint",!1)}function ZT(){return Je(pq).get("auto_copy_share_link",!1)?"auto_copy_share_link":"control"}async function jqe(t,e,n,s,o,r,a,l){const{shareVariant:c,shouldAutoCopyShareLink:u}=YT(l),d=await Nqe(t,e,n);if(!(d!=null&&d.imageAssetPointer)||!(d!=null&&d.serverThreadId))return;const{postText:f,imageAssetPointer:m,serverThreadId:p}=d,g=await Aqe(s,m,p);if(!g)return;const h="image-gen",_=Ox({shareType:h,clientThreadId:e,imageGenMessageId:n,assetPointer:t}),x=Iqe(),y=Lx({shareType:h,shareTargetId:_,shareVariant:c,generateShareLinkFn:()=>fq(p,m,f,g,x),toaster:r,intl:a,shouldPrewarm:u});if(o&&xe("1138231213")){const S=Je("2382399797"),C=await Dx({clientThreadId:e,postText:f,shareTargetId:_,shareType:h,generateShareLinkFn:y.ensureShareLink,usePostText:S.get("navigator_share_text",!1),useShareLink:S.get("navigator_share_link",!1)});if(u&&await y.autoCopyShareLink(),C)return}rt(Eg,{postSharingData:{clientThreadId:e,postText:f,generateShareLinkFn:y.ensureShareLink,coverImageUrl:g==null?void 0:g.url,shareTargetId:_,shareType:h}}),u&&await y.autoCopyShareLink()}async function Pqe(t,e,n,s,o,r,a,l){const{shareVariant:c,shouldAutoCopyShareLink:u}=YT(l),d=Lt(t);if(!d)return;const f=()=>mq(d,e,r),m="message-slice",p=Ox({shareType:m,clientThreadId:t,messageSliceIds:e,parentPromptId:a}),g=Lx({shareType:m,shareTargetId:p,shareVariant:c,generateShareLinkFn:f,toaster:s,intl:o,shouldPrewarm:u});if(n&&xe("1138231213")){await Dx({clientThreadId:t,shareTargetId:p,shareType:m,generateShareLinkFn:g.ensureShareLink,renderPreviewFn:()=>{rt(Id,{clientThreadId:t,coverImageUrl:void 0,messageSliceIds:e})},useShareLink:!0,useShareTitle:!0,postTitle:r}),Yn(Id),u&&await g.autoCopyShareLink();return}rt(Eg,{postSharingData:{clientThreadId:t,generateShareLinkFn:g.ensureShareLink,postText:r,messageSliceIds:e,shareTargetId:p,shareType:m}}),u&&await g.autoCopyShareLink()}const Ub=async(t,e,n,s,o,r)=>{const{shareVariant:a,shouldAutoCopyShareLink:l}=YT(r);if(!Lt(e))return;const u=async()=>{const p=await ue.safePost("/share/post",{requestBody:{attachments_to_create:[{kind:"odyssey_artifact",file_id:t.fileId,message_id:t.messageId,conversation_id:t.serverThreadId}]}});return KT(p.post.id)},d="odyssey",f=Ox({shareType:d,clientThreadId:e,odysseyShareIntent:t}),m=Lx({shareType:d,shareTargetId:f,shareVariant:a,generateShareLinkFn:u,toaster:s,intl:o,shouldPrewarm:l});if(n&&xe("1138231213")){const p=await Dx({clientThreadId:e,shareTargetId:f,shareType:d,generateShareLinkFn:m.ensureShareLink,renderPreviewFn:()=>{rt(Id,{clientThreadId:e,coverImageUrl:void 0,messageSliceIds:void 0,odysseyShareIntent:t})},useShareLink:!0,useShareTitle:!1});if(Yn(Id),l&&await m.autoCopyShareLink(),p)return}rt(Eg,{postSharingData:{clientThreadId:e,generateShareLinkFn:m.ensureShareLink,odysseyShareIntent:t,messageSliceIds:void 0,shareTargetId:f,shareType:d}}),l&&await m.autoCopyShareLink()};async function Rqe({serverThreadId:t,existingShareLinkUrl:e,piiDetected:n,prepareShareLink:s,toaster:o,intl:r}){var x,b,y;const a=ZT(),l=a==="auto_copy_share_link",c=ZR(t);let u=At(c);if(u||(await sl(c),u=At(c)),!u)return!1;const d=ve.getConversationTurns(u).flatMap(S=>S.messages.map(C=>C.id)).filter(S=>!!S);if(d.length===0)return!1;const f=!$7();((x=ve.getCurrentNode(u))==null?void 0:x.message.id)||await sl(c);const p="conversation",g=Ox({shareType:p,clientThreadId:c}),_=Lx({shareType:p,shareTargetId:g,shareVariant:a,generateShareLinkFn:async()=>{var S;return s&&await s,e||mq(t,d,(S=u.title)!=null?S:void 0)},toaster:o,intl:r,shouldPrewarm:l});return f&&xe("1138231213")?(await Dx({clientThreadId:c,postTitle:(b=u.title)!=null?b:void 0,shareTargetId:g,shareType:p,generateShareLinkFn:_.ensureShareLink,renderPreviewFn:()=>{rt(Id,{clientThreadId:c,coverImageUrl:void 0,messageSliceIds:d})},useShareLink:!0,useShareTitle:!0}),Yn(Id),l&&await _.autoCopyShareLink(),!0):(rt(Eg,{postSharingData:{clientThreadId:c,generateShareLinkFn:_.ensureShareLink,postText:(y=u.title)!=null?y:void 0,messageSliceIds:d,shareTargetId:g,shareType:p,piiDetected:n}}),l&&await _.autoCopyShareLink(),!0)}function gq(t){"use forget";const e=D.c(13),{assetPointer:n,clientThreadId:s,imageGenMessageId:o,messageSliceIds:r,odysseyShareIntent:a,parentPromptId:l}=t,c=n===void 0?null:n,u=Nt(),d=Ko(),f=Ze(s,Lqe),m=Dt(),p=te();let g;e[0]===Symbol.for("react.memo_cache_sentinel")?(g=[],e[0]=g):g=e[0],v.useEffect(Oqe,g);let h;return e[1]!==c||e[2]!==s||e[3]!==o||e[4]!==p||e[5]!==d||e[6]!==r||e[7]!==a||e[8]!==l||e[9]!==u||e[10]!==f||e[11]!==m?(h=async()=>{const _=ZT(),x=_==="auto_copy_share_link";if(o)await jqe(c,s,o,u,d,m,p,{shareVariant:_,shouldAutoCopyShareLink:x});else if(r){const y=l!=null&&Je("1547743984").get("is_message_prompt_enabled",!1)&&l?[l,...r.filter(S=>S!==l)]:r;await Pqe(s,y,d,m,p,f!=null?f:void 0,l,{shareVariant:_,shouldAutoCopyShareLink:x})}else a&&await(Ub==null?void 0:Ub(a,s,d,m,p,{shareVariant:_,shouldAutoCopyShareLink:x}))},e[1]=c,e[2]=s,e[3]=o,e[4]=p,e[5]=d,e[6]=r,e[7]=a,e[8]=l,e[9]=u,e[10]=f,e[11]=m,e[12]=h):h=e[12],h}function Oqe(){Tqe()}function Lqe(t){return t==null?void 0:t.title}function hq(t){"use forget";const e=D.c(6),n=te();switch(t){case"general":{let s;return e[0]!==n?(s=n.formatMessage(Ja.unavailableReasonGeneral),e[0]=n,e[1]=s):s=e[1],s}case"workspace":{let s;return e[2]!==n?(s=n.formatMessage(Ja.unavailableReasonWorkspace),e[2]=n,e[3]=s):s=e[3],s}default:{let s;return e[4]!==n?(s=n.formatMessage(Ja.unavailableReasonGeneral),e[4]=n,e[5]=s):s=e[5],s}}}function Dqe(t){"use forget";const e=D.c(15),{onClose:n,reason:s}=t,o=te(),r=bt();let a;e[0]!==r||e[1]!==n?(a=()=>{n(),r("/")},e[0]=r,e[1]=n,e[2]=a):a=e[2];const l=a,c=hq(s);let u;e[3]!==o?(u=o.formatMessage(Ja.contentUnavailable),e[3]=o,e[4]=u):u=e[4];let d;e[5]!==o?(d=o.formatMessage(Ja.ok),e[5]=o,e[6]=d):d=e[6];let f;e[7]!==l||e[8]!==d?(f=i.jsx(Se,{size:"large",color:"primary",className:"w-full",onClick:l,children:d}),e[7]=l,e[8]=d,e[9]=f):f=e[9];let m;return e[10]!==c||e[11]!==l||e[12]!==u||e[13]!==f?(m=i.jsx(en,{testId:"modal-post-sharing-error",isOpen:!0,type:"danger",textCenter:!0,title:u,description:c,onClose:l,footerContent:f}),e[10]=c,e[11]=l,e[12]=u,e[13]=f,e[14]=m):m=e[14],m}const i0t=Object.freeze(Object.defineProperty({__proto__:null,PostSharingErrorModal:Dqe,closePostSharingModal:Eqe,generateImageGenShareLink:fq,getShareClickBehaviorVariant:ZT,shareConversationPost:Rqe,useOpenPostSharingModal:gq,usePostSharingErrorMessage:hq},Symbol.toStringTag,{value:"Module"})),_q=async(t,e,n,s,o="mouse",r)=>{var y,S;const a=ve.getConversationTurns(At(t)),l=a[e];if(!l)return Promise.reject();const c=l.role===dt.User?l.userContinuationRootTurnId:void 0,u=c!=null?a.filter(C=>C.role===dt.User&&C.userContinuationRootTurnId===c):[l],d=(y=u[0])!=null?y:l,f=u.length>1?G(N({},d),{messages:u.flatMap(C=>C.messages)}):l,{messages:m}=f,p=s,g=((S=m[0])==null?void 0:S.author.role)===dt.User,h=p.metaKey||p.altKey,_=xe("1287696420"),x=await NWe(f,r,t,{unprocessed:h||g,enableHighlight:_});await zo(x,n,s);const b=Lt(t);b&&(rx({messageId:m[0].id,type:"copy",serverThreadId:b,selectedText:Ss(m[0]),source:o,location:"message",contentType:"text"}),V.logStructuredEvent(hte,{conversationId:b,messageId:m[0].id}))};function Bqe(t,e){var m,p,g,h;const[n,s,o]=Ze(t,_=>[ve.getIsNewConversation(_),ve.getRequestId(_),UD(_)]),r=Dr(s),a=Bze(),l=!mt(),c=((m=e==null?void 0:e.metadata)==null?void 0:m.b1de6e2_s)||((p=e==null?void 0:e.metadata)==null?void 0:p.b1de6e2_rm),u=!!((g=e==null?void 0:e.metadata)!=null&&g.n7jupd_message),d=!!((h=e==null?void 0:e.metadata)!=null&&h.image_gen_async);return!n&&!r&&!a.displayingSideBySideFeedback&&!l&&!o&&!u&&!d&&!c}async function Fqe(t,e,n){try{await t()}catch(s){e(s)}finally{n()}}function Uqe({audioAssetPointer:t,conversationId:e}){const n=Nt(),[s,o]=v.useState(!1),r=v.useRef(!0),[a,l]=v.useState(void 0),c=v.useRef(null),u=h3(),d=_3(g=>g.isPlaying&&g.sourceUrl===a),f=v.useCallback(()=>{const g=fv();if(g)c.current?c.current.then(()=>{g.stop(),c.current=null}):g.stop();else return},[]);v.useEffect(()=>(r.current=!0,()=>{r.current=!1}),[]),v.useEffect(()=>()=>{U9().isPlaying&&f()},[f]);const m=v.useCallback(async()=>{if(!u||!r.current)return;o(!0);const{url:g}=await wl.fetch(n,{asset:t,conversationId:e});o(!1),l(g),u.changeSource(g),c.current=u.play()},[t,e,u,n]);return{togglePlayback:v.useCallback(()=>{if(u)d?f():(Ut.messagePlayback.click(),m());else return},[d,m,u,f]),isPlaying:d,isLoading:s}}const xq=v.createContext({isLoading:!1,isPlaying:!1,togglePlayback:()=>{throw new Error("Invalid usage outside of VoicePlaybackContext")},mode:"readAloud"});function Hqe({children:t,audioAssetPointer:e,conversationId:n}){const{isLoading:s,isPlaying:o,togglePlayback:r}=Uqe({audioAssetPointer:e,conversationId:n});return i.jsx(xq.Provider,{value:v.useMemo(()=>({isLoading:s,isPlaying:o,togglePlayback:r,mode:"audioAsset"}),[s,o,r]),children:t})}function $qe({children:t,conversationId:e,messageId:n}){const{isLoading:s,isPlaying:o,togglePlayback:r}=hNe({conversationId:e,messageId:n});return i.jsx(xq.Provider,{value:v.useMemo(()=>({isLoading:s,isPlaying:o,togglePlayback:r,mode:"readAloud"}),[s,o,r]),children:t})}function Gqe({children:t,enable:e,lastMessage:n,serverThreadId:s}){if(!e||!n||!s)return t;const o=ha.getAudioAssetPointers(n)[0];return o?i.jsx(Hqe,{conversationId:s,audioAssetPointer:o,children:t}):i.jsx($qe,{conversationId:s,messageId:n.id,children:t})}function Vqe({onAnticipateEdit:t,onEnterEdit:e}){const n=te();return i.jsx(yo,{label:n.formatMessage({id:"gG9rea",defaultMessage:"Edit message"}),icon:tr,onClick:e,onIntent:t})}function yq({clientThreadId:t,messageId:e,isSharedConversation:n,isAuthoredByCurrentUser:s,serverThreadId:o}){const r=o!=null?o:Lt(t),a=e!=null?e:null,l=Je("1030729005").get("chatgpt_message_feedback_consolidation_enabled",!1);return{canReportMessage:!!(a&&r)&&xe("3376455464")&&!l&&!s&&!n,handleReportMessage:()=>{a&&rt(zqe,{clientThreadId:t,serverThreadId:r!=null?r:void 0,messageId:a})}}}const zqe=je(()=>Me(()=>import("./1de975ca-opfq6f6nav5b4m2m.js"),__vite__mapDeps([344,1,2,3])).then(t=>t.ThreadReportMessageModal)),Wqe=je(async()=>()=>null);je(async()=>()=>null);const qqe=()=>null,l0t=t=>{"use forget";const e=D.c(19),{alwaysShow:n,isUserTurn:s,children:o}=t,r=v.useRef(null);let a,l;e[0]!==n?(a=()=>{const x=r.current;x&&(n?requestAnimationFrame(()=>{x&&(x.style.maskPosition=n?"0% 0%":"")}):x.style.maskPosition="")},l=[n],e[0]=n,e[1]=a,e[2]=l):(a=e[1],l=e[2]),v.useEffect(a,l);const c=!n&&"absolute start-0 end-0 flex",u=s?"justify-end":"min-h-[46px] justify-start";let d;e[3]!==c||e[4]!==u?(d=q("z-0 flex",c,u),e[3]=c,e[4]=u,e[5]=d):d=e[5];const f=!s&&"touch:w-[calc(100%+--spacing(3.5))] -mt-1 w-[calc(100%+--spacing(2.5))]",m=n&&!s&&"duration-[1.5s]",p=!(n||s)&&"duration-500 group-hover/turn-messages:delay-300";let g;if(e[6]!==s||e[7]!==f||e[8]!==m||e[9]!==p){let x;e[11]!==s?(x=s&&["touch:pointer-events-auto touch:opacity-100","duration-300 group-hover/turn-messages:delay-300","pointer-events-none opacity-0 motion-safe:transition-opacity","group-hover/turn-messages:pointer-events-auto group-hover/turn-messages:opacity-100","group-focus-within/turn-messages:pointer-events-auto group-focus-within/turn-messages:opacity-100","has-data-[state=open]:pointer-events-auto has-data-[state=open]:opacity-100"],e[11]=s,e[12]=x):x=e[12],g=q("touch:-me-2 touch:-ms-3.5 -ms-2.5 -me-1 flex flex-wrap items-center gap-y-4 p-1 select-none",f,m,"focus-within:transition-none hover:transition-none",p,!s&&["touch:pointer-events-auto","pointer-events-none [mask-image:linear-gradient(to_right,black_33%,transparent_66%)] [mask-size:300%_100%] [mask-position:100%_0%] motion-safe:transition-[mask-position]","group-hover/turn-messages:pointer-events-auto group-hover/turn-messages:[mask-position:0_0]","group-focus-within/turn-messages:pointer-events-auto group-focus-within/turn-messages:[mask-position:0_0]","has-data-[state=open]:pointer-events-auto has-data-[state=open]:[mask-position:0_0]"],x),e[6]=s,e[7]=f,e[8]=m,e[9]=p,e[10]=g}else g=e[10];let h;e[13]!==o||e[14]!==g?(h=i.jsx("div",{ref:r,className:g,children:o}),e[13]=o,e[14]=g,e[15]=h):h=e[15];let _;return e[16]!==h||e[17]!==d?(_=i.jsx("div",{className:d,children:h}),e[16]=h,e[17]=d,e[18]=_):_=e[18],_},c0t=t=>{"use forget";var rn,sr,cs,Gr,js,Vr;const e=D.c(115),{activeVariantIndex:n,clientThreadId:s,conversationMode:o,lastMessage:r,messages:a,numVariants:l,onChangeIndex:c,onRate:u,showCanvasButton:d,showCopyButton:f,showPagination:m,showPlayButton:p,showRatingButtons:g,showRegenerateButton:h,turn:_,turnIndex:x,parentPrompt:b,isAgentTurn:y,isKAUR1BR5:S,isMostRecentTurn:C,reportableMessageId:w,isSharedConversation:k,serverThreadIdForReporting:E,projectConversationId:T}=t,M=k===void 0?!1:k,A=te(),I=Dt(),j=Nt(),R=X(ln);let O;e[0]===Symbol.for("react.memo_cache_sentinel")?(O=mt(),e[0]=O):O=e[0];const L=O,B=!L&&Je("2118136551").get("enable_message_sharing",!1);let U;e[1]===Symbol.for("react.memo_cache_sentinel")?(U=!1,e[1]=U):U=e[1];const H=$c(),$=(rn=r==null?void 0:r.clientMetadata)==null?void 0:rn.rating,F=(sr=r==null?void 0:r.clientMetadata)==null?void 0:sr.requestId,z=Lt(s),{onShare:W}=J_({clientThreadId:s,serverThreadId:z!=null?z:void 0}),{canReportMessage:Y,handleReportMessage:K}=yq({clientThreadId:s,messageId:(cs=w!=null?w:r==null?void 0:r.id)!=null?cs:null,isSharedConversation:M,isAuthoredByCurrentUser:!1,serverThreadId:(Gr=E!=null?E:z)!=null?Gr:null}),{imageGenMessages:Z,enableImageGenPostSharing:J,enableMessageSliceSharing:Q,hasErrorInTurn:ne,isIncomplete:ie}=qWe(a),fe=VT.useSelectedIndex();let ae;e[2]!==a?(ae=a.filter(PR).filter(Qqe),e[2]=a,e[3]=ae):ae=e[3];const pe=ae.length>0,_e=Z.length>0,Ce=Ko(),ge=L9(),Re=Hs(),ke=X(Jqe);let he;e[4]!==r?(he=r!=null&&ha.getAudioAssetPointers(r).length>0,e[4]=r,e[5]=he):he=e[5];const Ee=he;let Pe;e[6]!==(r==null?void 0:r.id)?(Pe=pn=>UD(pn,r==null?void 0:r.id),e[6]=r==null?void 0:r.id,e[7]=Pe):Pe=e[7];const Ae=Ze(s,Pe);let de;e[8]!==_e||e[9]!==pe||e[10]!==Z?(de=_e&&!pe&&Z.some(zM),e[8]=_e,e[9]=pe,e[10]=Z,e[11]=de):de=e[11];const oe=de,[se,Oe]=v.useState(void 0);let Ne;e[12]!==s||e[13]!==ne||e[14]!==ie||e[15]!==a||e[16]!==x?(Ne={clientThreadId:s,messages:a,turnIndex:x,hasErrorInTurn:ne,isIncomplete:ie},e[12]=s,e[13]=ne,e[14]=ie,e[15]=a,e[16]=x,e[17]=Ne):Ne=e[17];const ze=qqe(),Qe=!1,Le=ze==null?void 0:ze.threadOriginMessageId,ce=!1,be=z!=null&&!ne&&!ie&&!y&&(L||B)&&!ge&&!R&&!ke&&!H,He=z!=null&&!ne&&!ie&&!y&&L&&!R&&!Ae&&!Re&&!H;let Ge=null;if(be){if(J||Q){const pn=(js=Z[fe])==null?void 0:js.id,$n=b==null?void 0:b.id;let Ps;e[18]!==s||e[19]!==a||e[20]!==$n||e[21]!==pn?(Ps=i.jsx(K6,{clientThreadId:s,imageGenMessageId:pn,messages:a,parentPromptId:$n}),e[18]=s,e[19]=a,e[20]=$n,e[21]=pn,e[22]=Ps):Ps=e[22],Ge=Ps}else if(B){const pn=b==null?void 0:b.id;let $n;e[23]!==s||e[24]!==a||e[25]!==pn?($n=i.jsx(K6,{clientThreadId:s,messages:a,parentPromptId:pn}),e[23]=s,e[24]=a,e[25]=pn,e[26]=$n):$n=e[26],Ge=$n}else if(Ce&&Je("1547743984").get("show_share_button_inline",!1)){let pn;e[27]!==W?(pn=()=>{W()},e[27]=W,e[28]=pn):pn=e[28];let $n;e[29]!==A?($n=A.formatMessage({id:"ConversationTurn.shareButtonTooltip",defaultMessage:"Share conversation"}),e[29]=A,e[30]=$n):$n=e[30];let Ps;e[31]!==$n||e[32]!==pn?(Ps=i.jsx(yo,{onClick:pn,label:$n,className:"sm:hidden",icon:Kc}),e[31]=$n,e[32]=pn,e[33]=Ps):Ps=e[33],Ge=Ps}}if(r&&rce(r)&&!zM(r))return null;const nt=R?"small":"med",at=!!(p&&r&&z&&(Ee||!Re));let Xe;e[34]!==s||e[35]!==r||e[36]!==a||e[37]!==b||e[38]!==z?(Xe=!1,e[34]=s,e[35]=r,e[36]=a,e[37]=b,e[38]=z,e[39]=Xe):Xe=e[39];let gt;e[40]!==n||e[41]!==l||e[42]!==c||e[43]!==m?(gt=m&&i.jsx(lq,{currentPage:n,onChangeIndex:c,length:l}),e[40]=n,e[41]=l,e[42]=c,e[43]=m,e[44]=gt):gt=e[44];let ht;e[45]!==nt||e[46]!==s||e[47]!==oe||e[48]!==j||e[49]!==f||e[50]!==I||e[51]!==x?(ht=f&&!oe&&i.jsx(bq,{size:nt,onClick:pn=>{_q(s,x,I,pn,"mouse",j)}}),e[45]=nt,e[46]=s,e[47]=oe,e[48]=j,e[49]=f,e[50]=I,e[51]=x,e[52]=ht):ht=e[52];let Zt;e[53]!==nt||e[54]!==$||e[55]!==_e||e[56]!==A||e[57]!==u||e[58]!==g?(Zt=g&&!_e&&i.jsxs(i.Fragment,{children:[$!=="thumbsDown"&&i.jsx(yo,{size:nt,onClick:()=>u("thumbsUp"),selected:$==="thumbsUp",icon:$==="thumbsUp"?oq:WT,label:A.formatMessage({id:"ConversationTurn.goodResponseTooltip",defaultMessage:"Good response"}),testId:"good-response-turn-action-button"}),$!=="thumbsUp"&&i.jsx(yo,{size:nt,onClick:()=>u("thumbsDown"),selected:$==="thumbsDown",icon:$==="thumbsDown"?sq:zT,label:A.formatMessage({id:"ConversationTurn.badResponseTooltip",defaultMessage:"Bad response"}),testId:"bad-response-turn-action-button"})]}),e[53]=nt,e[54]=$,e[55]=_e,e[56]=A,e[57]=u,e[58]=g,e[59]=Zt):Zt=e[59];let It;e[60]!==r||e[61]!==T?(It=!1,e[60]=r,e[61]=T,e[62]=It):It=e[62];let lt;e[63]!==s||e[64]!==x?(lt=!1,e[63]=s,e[64]=x,e[65]=lt):lt=e[65];let Mt;e[66]!==nt||e[67]!==s||e[68]!==o||e[69]!==_e||e[70]!==C||e[71]!==r||e[72]!==a||e[73]!==b||e[74]!==h?(Mt=h&&r&&i.jsx(Kqe,{clientThreadId:s,conversationMode:o,lastMessage:r,messages:a,hasImageGenMessage:_e,parentPrompt:b,isMostRecentTurn:C,size:nt}),e[66]=nt,e[67]=s,e[68]=o,e[69]=_e,e[70]=C,e[71]=r,e[72]=a,e[73]=b,e[74]=h,e[75]=Mt):Mt=e[75];let Yt;e[76]!==Y||e[77]!==He||e[78]!==ce||e[79]!==s||e[80]!==se||e[81]!==K||e[82]!==_e||e[83]!==pe||e[84]!==Z||e[85]!==H||e[86]!==R||e[87]!==S||e[88]!==Ee||e[89]!==C||e[90]!==r||e[91]!==a||e[92]!==(b==null?void 0:b.id)||e[93]!==F||e[94]!==fe||e[95]!==d||e[96]!==p||e[97]!==Le||e[98]!==Qe||e[99]!==_||e[100]!==x?(Yt=!R&&i.jsx(HWe,{showPlayButton:!!(p&&r&&(pe||Ee)),showCanvasButton:!_e&&d,showBranchButton:He&&!Qe,showThreadAction:ce,threadOriginMessageId:Le,canShowScheduleButton:!S&&!H,isMostRecentTurn:C,turnIndex:x,clientThreadId:s,messages:a,imageGenMessageId:(Vr=Z[fe])==null?void 0:Vr.id,lastMessage:r,turn:_,requestId:F,parentPromptId:b==null?void 0:b.id,showReportMessageButton:Y,onReportMessage:K,createEvalData:se}),e[76]=Y,e[77]=He,e[78]=ce,e[79]=s,e[80]=se,e[81]=K,e[82]=_e,e[83]=pe,e[84]=Z,e[85]=H,e[86]=R,e[87]=S,e[88]=Ee,e[89]=C,e[90]=r,e[91]=a,e[92]=b==null?void 0:b.id,e[93]=F,e[94]=fe,e[95]=d,e[96]=p,e[97]=Le,e[98]=Qe,e[99]=_,e[100]=x,e[101]=Yt):Yt=e[101];let nn;return e[102]!==r||e[103]!==z||e[104]!==Ge||e[105]!==at||e[106]!==gt||e[107]!==ht||e[108]!==Zt||e[109]!==It||e[110]!==lt||e[111]!==Mt||e[112]!==Yt||e[113]!==Xe?(nn=i.jsxs(Gqe,{enable:at,lastMessage:r,serverThreadId:z,children:[Xe,gt,ht,Zt,It,Ge,lt,Mt,Yt]}),e[102]=r,e[103]=z,e[104]=Ge,e[105]=at,e[106]=gt,e[107]=ht,e[108]=Zt,e[109]=It,e[110]=lt,e[111]=Mt,e[112]=Yt,e[113]=Xe,e[114]=nn):nn=e[114],nn},u0t=t=>{"use forget";const e=D.c(31),{activeVariantIndex:n,clientThreadId:s,numVariants:o,onAnticipateEdit:r,onChangeIndex:a,onEnterEdit:l,showCopyButton:c,showEditMessageButton:u,showPagination:d,turnIndex:f,reportableMessageId:m,reportableMessageAuthoredByCurrentUser:p,isSharedConversation:g,serverThreadIdForReporting:h}=t,_=g===void 0?!1:g,x=Dt(),b=Nt(),y=te(),S=p!=null?p:!1,C=h!=null?h:null;let w;e[0]!==s||e[1]!==_||e[2]!==m||e[3]!==S||e[4]!==C?(w=yq({clientThreadId:s,messageId:m,isSharedConversation:_,isAuthoredByCurrentUser:S,serverThreadId:C}),e[0]=s,e[1]=_,e[2]=m,e[3]=S,e[4]=C,e[5]=w):w=e[5];const{canReportMessage:k,handleReportMessage:E}=w;let T;e[6]===Symbol.for("react.memo_cache_sentinel")?(T=Ax()||xe("2341940718"),e[6]=T):T=e[6];const M=T;let A;e[7]!==s||e[8]!==b||e[9]!==c||e[10]!==x||e[11]!==f?(A=c&&i.jsxs(i.Fragment,{children:[M&&i.jsx(ZWe,{clientThreadId:s,turnIndex:f}),i.jsx(bq,{onClick:L=>{_q(s,f,x,L,"mouse",b)}})]}),e[7]=s,e[8]=b,e[9]=c,e[10]=x,e[11]=f,e[12]=A):A=e[12];let I;e[13]!==k||e[14]!==E||e[15]!==y?(I=k&&i.jsx(yo,{icon:W_,onClick:L=>{L.stopPropagation(),E()},label:y.formatMessage({id:"ConversationTurn.reportMessageTooltip",defaultMessage:"Report message"}),testId:"report-message-turn-action-button"}),e[13]=k,e[14]=E,e[15]=y,e[16]=I):I=e[16];let j;e[17]!==r||e[18]!==l||e[19]!==u?(j=u&&i.jsx(Vqe,{onAnticipateEdit:r,onEnterEdit:l}),e[17]=r,e[18]=l,e[19]=u,e[20]=j):j=e[20];let R;e[21]!==n||e[22]!==o||e[23]!==a||e[24]!==d?(R=d&&i.jsx(lq,{currentPage:n,onChangeIndex:a,length:o}),e[21]=n,e[22]=o,e[23]=a,e[24]=d,e[25]=R):R=e[25];let O;return e[26]!==A||e[27]!==I||e[28]!==j||e[29]!==R?(O=i.jsxs(i.Fragment,{children:[A,I,j,R]}),e[26]=A,e[27]=I,e[28]=j,e[29]=R,e[30]=O):O=e[30],O},Kqe=t=>{"use forget";const e=D.c(17),{clientThreadId:n,conversationMode:s,messages:o,hasImageGenMessage:r,lastMessage:a,parentPrompt:l,isMostRecentTurn:c,size:u}=t,d=u===void 0?"med":u;let f;e[0]!==n||e[1]!==s?(f={clientThreadId:n,conversationMode:s},e[0]=n,e[1]=s,e[2]=f):f=e[2];const m=Zp(f),p=Bqe(n,a);let g;e[3]===Symbol.for("react.memo_cache_sentinel")?(g=Eo("3783715078").get("regen_enabled",!1),e[3]=g):g=e[3];const h=g;let _;e[4]!==a||e[5]!==m?(_=y=>{var E;const{sourceEvent:S,requestedModelId:C,appendMessages:w,extraStreamParams:k}=y;a&&m({sourceEvent:S,nodeId:a.id,requestedModelId:C,appendMessages:w,extraStreamParams:N({mapSearchParams:(E=a.metadata)==null?void 0:E.map_search_parameters},k)})},e[4]=a,e[5]=m,e[6]=_):_=e[6];const x=_;let b;return e[7]!==p||e[8]!==n||e[9]!==r||e[10]!==c||e[11]!==a||e[12]!==o||e[13]!==x||e[14]!==l||e[15]!==d?(b=r&&!h?i.jsx(Wqe,{messages:o,onModelSelect:x}):i.jsx(vqe,{className:"text-token-text-secondary hover:bg-token-bg-secondary touch:px-2.5 h-[30px] rounded-md px-1.5",clientThreadId:n,lastMessage:a,onModelSelect:x,canRegenerateResponse:p,parentPrompt:l,size:d,hasImageGenMessage:r,messages:o,isMostRecentTurn:c}),e[7]=p,e[8]=n,e[9]=r,e[10]=c,e[11]=a,e[12]=o,e[13]=x,e[14]=l,e[15]=d,e[16]=b):b=e[16],b},bq=t=>{"use forget";const e=D.c(10),{onClick:n,size:s}=t,o=s===void 0?"med":s,[r,a]=v.useState(!1),l=iE(),c=te();let u;e[0]!==l||e[1]!==n?(u=g=>{g.stopPropagation(),V.logEvent("ChatGPT Turn Action Copy Clicked"),n(g),a(!0),setTimeout(()=>{l()&&a(!1)},2e3),ft.logEvent("chatgpt_turn_action_copy")},e[0]=l,e[1]=n,e[2]=u):u=e[2];const d=u,f=r?Pr:tk;let m;e[3]!==c?(m=c.formatMessage({id:"CopyButton.copyTooltip",defaultMessage:"Copy"}),e[3]=c,e[4]=m):m=e[4];let p;return e[5]!==d||e[6]!==o||e[7]!==f||e[8]!==m?(p=i.jsx(yo,{icon:f,onClick:d,label:m,testId:"copy-turn-action-button",size:o}),e[5]=d,e[6]=o,e[7]=f,e[8]=m,e[9]=p):p=e[9],p};function K6(t){"use forget";var C;const e=D.c(21),{clientThreadId:n,imageGenMessageId:s,messages:o,parentPromptId:r}=t,[a,l]=v.useState(!1),c=te();let u;e:{if(s){u="media_generation";break e}u="message_slice"}const d=u;let f;e[0]!==o?(f=(C=o==null?void 0:o.map(Zqe))!=null?C:void 0,e[0]=o,e[1]=f):f=e[1];const m=f;let p;e[2]!==n||e[3]!==s||e[4]!==m||e[5]!==r?(p={clientThreadId:n,imageGenMessageId:s,messageSliceIds:m,parentPromptId:r},e[2]=n,e[3]=s,e[4]=m,e[5]=r,e[6]=p):p=e[6];const g=gq(p);let h,_;e[7]!==d?(h=()=>{V.logEvent("Share Post: Share Button Shown",{source:"turn_action",attachment_type:d})},_=[d],e[7]=d,e[8]=h,e[9]=_):(h=e[8],_=e[9]),v.useEffect(h,_);let x;e[10]!==d||e[11]!==s||e[12]!==g?(x=()=>{l(!0),Fqe(async()=>{await g()},Yqe,()=>{l(!1)}),V.logEventWithStatsig("Share Post: Share Button Clicked","chatgpt_post_share_button_clicked",N({source:"turn_action",attachment_type:d},s?{message_id:s}:{}))},e[10]=d,e[11]=s,e[12]=g,e[13]=x):x=e[13];let b;e[14]!==c?(b=c.formatMessage({id:"ConversationTurn.sharePostButtonTooltip",defaultMessage:"Share"}),e[14]=c,e[15]=b):b=e[15];const y=a?Us:Kc;let S;return e[16]!==a||e[17]!==x||e[18]!==b||e[19]!==y?(S=i.jsx(yo,{onClick:x,label:b,icon:y,disabled:a}),e[16]=a,e[17]=x,e[18]=b,e[19]=y,e[20]=S):S=e[20],S}function Yqe(){}function Zqe(t){return t.id}function Qqe(t){return t.recipient==="all"}function Jqe(){return B7(KC())}function d0t({message:t,clientThreadId:e,turnIndex:n,referenceMessageId:s,responseComplete:o}){var m,p;const r=Pt(e),a=gg("n7jupdSources"),l=Mp(),c=(m=t==null?void 0:t.metadata)==null?void 0:m.async_task_id,u=t&&((p=t.metadata)==null?void 0:p.open_tabs)&&t.metadata.open_tabs.length>0,d=(()=>{var _,x,b;if(!t)return[];const g=(_=t.metadata)!=null?_:{},h=[...(x=g.content_references)!=null?x:[],...Object.values((b=g.content_references_by_file)!=null?b:{}).flat()];return h.length===0?[]:h.flatMap(y=>{var S,C,w,k;switch(y.type){case"webpage":case"webpage_extended":return y.url?[y.url]:[];case"grouped_webpages":return(C=(S=y.items)==null?void 0:S.map(E=>E.url).filter(Boolean))!=null?C:[];case"file":return y.cloud_doc_url?[y.cloud_doc_url]:[];case"image_inline":{const E=(k=y.clicked_from_url)!=null?k:(w=y.asset_pointer_links)==null?void 0:w[0];return E?[E]:[]}default:return[]}})})();v.useEffect(()=>{if(c)return Er.retainTaskStream(c),()=>{Er.releaseTaskStream(c)}},[c]);const f=v.useCallback(()=>{eF(r,{type:"n7jupdSources",turnIndex:n||1,messageId:s},a)},[r,a,n,s]);return!o||d.length===0||u?null:i.jsx(t$,{sourcesUrls:d,onClick:()=>{f()},className:q("mt-0! mb-0!",l&&"cursor-default")})}const f0t=({clientThreadId:t})=>{const e=Lt(t),n=Ze(t,s=>ve.findNode(s,o=>{var r;return!!((r=o.message.metadata)!=null&&r.visited_risky_domain)}));return v.useEffect(()=>{if(!e||!n)return;const s=setInterval(()=>{document.visibilityState==="visible"&&ue.safePost("/conversation/{conversation_id}/agent/notify_viewing",{parameters:{path:{conversation_id:e}}})},1e3);return()=>clearInterval(s)},[e,n]),null},QT=re(xn,"6b0d8c",20,20);function vq(t){"use forget";const e=D.c(11),{className:n,direction:s,isMasked:o,children:r,style:a}=t,l=s===void 0?"horizontal":s;if(!(o===void 0?!0:o)){let m;return e[0]!==r||e[1]!==n||e[2]!==a?(m=i.jsx("div",{className:n,style:a,children:r}),e[0]=r,e[1]=n,e[2]=a,e[3]=m):m=e[3],m}const u=l==="horizontal"?"[mask-image:linear-gradient(to_right,black_calc(100%_-_2rem),transparent_100%)]":"[mask-image:linear-gradient(to_bottom,black_calc(100%_-_2rem),transparent_100%)]";let d;e[4]!==n||e[5]!==u?(d=q(u,"[mask-size:100%_100%]","[mask-repeat:no-repeat]",n),e[4]=n,e[5]=u,e[6]=d):d=e[6];let f;return e[7]!==r||e[8]!==a||e[9]!==d?(f=i.jsx("div",{className:d,style:a,children:r}),e[7]=r,e[8]=a,e[9]=d,e[10]=f):f=e[10],f}const Y6=2048;function JT(t,e){const n=encodeURIComponent(t),s=(()=>{switch(e){case it.Search:return"https://www.google.com/search?q=";case it.Images:return"https://www.google.com/search?udm=2&q=";case it.Videos:return"https://www.google.com/search?udm=7&q=";case it.News:return"https://www.google.com/search?tbm=nws&q=";default:throw new Error("Unsupported tab type: ".concat(e))}})(),o=s+n;if(o.length<=Y6)return o;const r=Math.max(0,Y6-s.length);let a=n.slice(0,r);if(/%%?$/.test(a))for(;a.endsWith("%");)a=a.slice(0,-1);return/%[0-9A-Fa-f]$/.test(a)&&(a=a.slice(0,-1)),s+a}function Sq(t){const e=/^(\S+\s+followers  )\S+\s+following  \S+\s+posts  @[A-Za-z0-9._]+:\s*(.+)$/,n=t.match(e);return n?i.jsxs("span",{children:[i.jsx("span",{className:"text-token-text-tertiary",children:n[1]}),n[2]]}):t}function Xqe(t){return Object.values(t.reduce((e,n)=>{const s=n.domain;return e[s]||(e[s]=[]),e[s].push(n),e},{}))}function Cq(t){return t.find(e=>e.content.content_type==="super_widget")}function eKe(t){const e=[];let n=0;for(;n<t.length;){if(t[n].role!==dt.User){n++;continue}const s=t[n],o=s.messages;n++;const r=[];for(;n<t.length&&t[n].role!==dt.User;)r.push(...t[n].messages),n++;e.push({id:s.id,userMessages:o,assistantMessages:r})}return e}function tKe(t){"use forget";const e=D.c(20),{navlinks:n,onSeeMoreClick:s,query:o,linkTarget:r}=t,a=X(sKe),l=te(),c=nKe;let u,d;e[0]!==a?(u=()=>{a&&V.logStructuredEvent(j1,{step:P1.ATLAS_GOOGLE_SEARCH_IT_ACTION_STEP_SHOW,turnIndex:0,fromTab:Zs.ATLAS_SUPER_WIDGET_TAB_HOME})},d=[a],e[0]=a,e[1]=u,e[2]=d):(u=e[1],d=e[2]),v.useEffect(u,d);let f;e[3]!==o?(f=JT(o,it.Search),e[3]=o,e[4]=f):f=e[4];const m=f;let p;e[5]===Symbol.for("react.memo_cache_sentinel")?(p=Je("2244444699").get("navlinks_count",2),e[5]=p):p=e[5];const h=Math.min(p,Math.max(1,n.length));let _;e[6]!==r||e[7]!==n?(_=S=>i.jsx(oKe,{index:S,navlink:n.length>S?n[S]:null,linkTarget:r},S),e[6]=r,e[7]=n,e[8]=_):_=e[8];let x;e[9]!==h||e[10]!==_?(x=kE(h,_),e[9]=h,e[10]=_,e[11]=x):x=e[11];let b;e[12]!==l||e[13]!==a||e[14]!==s||e[15]!==m?(b=a&&i.jsxs("div",{className:"@w-sm/main:px-4 mt-2.5 flex gap-2 px-2",children:[i.jsx(Se,{color:"secondary",size:"small",onClick:s,className:"gap-5 font-normal",icon:QT,children:l.formatMessage({id:"SPIK7A",defaultMessage:"More links"})}),i.jsx(Se,{color:"secondary",as:"link",to:m,size:"small",onClick:c,className:"gap-5 font-normal",icon:_p,iconClassName:"text-blue-500",children:l.formatMessage({id:"jkWaGa",defaultMessage:"Search Google"})})]}),e[12]=l,e[13]=a,e[14]=s,e[15]=m,e[16]=b):b=e[16];let y;return e[17]!==x||e[18]!==b?(y=i.jsxs("div",{className:"@w-sm/main:-mx-4 -mx-2 flex flex-col",children:[x,b]}),e[17]=x,e[18]=b,e[19]=y):y=e[19],y}function nKe(){V.logStructuredEvent(j1,{step:P1.ATLAS_GOOGLE_SEARCH_IT_ACTION_STEP_CLICK,turnIndex:0,fromTab:Zs.ATLAS_SUPER_WIDGET_TAB_HOME})}function sKe(){return Qo()}function oKe(t){"use forget";var $;const e=D.c(67),{index:n,navlink:s,linkTarget:o}=t,r=o===void 0?"_self":o,a=X(ln);let l;e[0]!==n?(l=()=>{V.logStructuredEvent(yc,{step:bc.ATLAS_NAVLINKS_ACTION_STEP_CLICK,source:xa.ATLAS_NAVLINKS_SOURCE_CHAT_CAROUSEL,navlinkIndex:n})},e[0]=n,e[1]=l):l=e[1];const c=l;let u,d,f,m,p,g,h,_,x,b,y,S,C,w,k,E,T;if(e[2]!==a||e[3]!==r||e[4]!==c||e[5]!==s){b=Symbol.for("react.early_return_sentinel");e:{const F=["w-full py-3 rounded-xl flex flex-col","hover:bg-token-bg-tertiary"];if(!s){let z;e[23]===Symbol.for("react.memo_cache_sentinel")?(z=i.jsx("div",{className:"loading-results-shimmer h-5 w-5 shrink-0 rounded-full"}),e[23]=z):z=e[23];let W;e[24]===Symbol.for("react.memo_cache_sentinel")?(W=i.jsxs("div",{className:"@w-sm/main:px-4 flex gap-4 px-2",children:[z,i.jsxs("div",{className:"flex w-full flex-col gap-0.5",children:[i.jsx("div",{className:"loading-results-shimmer h-5 w-[50%] rounded-md"}),i.jsx("div",{className:"loading-results-shimmer h-5 w-full rounded-md"})]})]}),e[24]=W):W=e[24],b=i.jsx("div",{className:q(F),children:W});break e}d=AT,e[25]!==s.url?(k=i.jsx(Ns,{url:s.url,size:32,minSize:16,applySizeToImg:!1,showLoadingAnimation:!0,className:"h-4 w-4 shrink-0 rounded-full border-1 border-gray-200"}),e[25]=s.url,e[26]=k):k=e[26],E=s.title,T=null,f=null,m=null,p=($=s.snippet)!=null?$:null,g=!1,h="rounded-xl!",_="white",x=a,u=Fs,y=s.url,S=r,C=c,w=q(F,"@w-sm/main:px-4 px-2 select-none")}e[2]=a,e[3]=r,e[4]=c,e[5]=s,e[6]=u,e[7]=d,e[8]=f,e[9]=m,e[10]=p,e[11]=g,e[12]=h,e[13]=_,e[14]=x,e[15]=b,e[16]=y,e[17]=S,e[18]=C,e[19]=w,e[20]=k,e[21]=E,e[22]=T}else u=e[6],d=e[7],f=e[8],m=e[9],p=e[10],g=e[11],h=e[12],_=e[13],x=e[14],b=e[15],y=e[16],S=e[17],C=e[18],w=e[19],k=e[20],E=e[21],T=e[22];if(b!==Symbol.for("react.early_return_sentinel"))return b;let M;e[27]!==s.url?(M=i.jsx(Ns,{url:s.url,size:32,minSize:20,applySizeToImg:!1,className:"bg-token-bg-secondary! h-5 w-5 shrink-0 rounded-full",showLoadingAnimation:!0}),e[27]=s.url,e[28]=M):M=e[28];let A;e[29]!==s.domain?(A=i.jsx("span",{className:"font-medium",children:s.domain}),e[29]=s.domain,e[30]=A):A=e[30];let I;e[31]!==s.title?(I=i.jsxs("span",{children:["  ",s.title]}),e[31]=s.title,e[32]=I):I=e[32];let j;e[33]!==A||e[34]!==I?(j=i.jsxs("span",{className:"line-clamp-1 text-sm text-[var(--interactive-label-accent-default)]",children:[A,I]}),e[33]=A,e[34]=I,e[35]=j):j=e[35];let R;e[36]!==s.snippet||e[37]!==s.title?(R=s.snippet?Sq(s.snippet):s.title,e[36]=s.snippet,e[37]=s.title,e[38]=R):R=e[38];let O;e[39]!==R?(O=i.jsx(vq,{className:"text-token-text-tertiary text-sm whitespace-nowrap",children:R}),e[39]=R,e[40]=O):O=e[40];let L;e[41]!==j||e[42]!==O?(L=i.jsxs("div",{className:"flex flex-col gap-0.5 overflow-hidden",children:[j,O]}),e[41]=j,e[42]=O,e[43]=L):L=e[43];let B;e[44]!==M||e[45]!==L?(B=i.jsxs("div",{className:"flex gap-4",children:[M,L]}),e[44]=M,e[45]=L,e[46]=B):B=e[46];let U;e[47]!==u||e[48]!==B||e[49]!==y||e[50]!==S||e[51]!==C||e[52]!==w?(U=i.jsx(u,{href:y,target:S,onClick:C,className:w,children:B}),e[47]=u,e[48]=B,e[49]=y,e[50]=S,e[51]=C,e[52]=w,e[53]=U):U=e[53];let H;return e[54]!==d||e[55]!==f||e[56]!==m||e[57]!==p||e[58]!==g||e[59]!==h||e[60]!==_||e[61]!==x||e[62]!==U||e[63]!==k||e[64]!==E||e[65]!==T?(H=i.jsx(d,{favicon:k,heading:E,title:T,quoteHeading:f,quoteText:m,snippet:p,isContentBlocked:g,contentContainerClassName:h,theme:_,disabled:x,children:U}),e[54]=d,e[55]=f,e[56]=m,e[57]=p,e[58]=g,e[59]=h,e[60]=_,e[61]=x,e[62]=U,e[63]=k,e[64]=E,e[65]=T,e[66]=H):H=e[66],H}var p1=(t=>(t[t.Classifier=0]="Classifier",t[t.Conversation=1]="Conversation",t[t.ShortQuery=2]="ShortQuery",t))(p1||{});function rKe(t){switch(t){case 0:return"navlinks_shown_cl";case 1:return"navlinks_shown_co";case 2:return"navlinks_shown_sq"}}function aKe(t,e,n,s,o,r){var m,p;if(!n)return;const a=t,l=e,c=n.getStartTime(),u={initialWindowStyle:r};if(n.logTimingOnce("navlinks_shown",{overrideDurationMs:a-c,context:u}),o!==void 0){const g=rKe(o);n.logTimingOnce(g,{overrideDurationMs:a-c,context:u}),Fe.count(Ue.DEFAULT,"navlinks_show_decision_counter",[{key:"source",value:g}])}if(!s)return;let d=0;s.requestedTimeUnixEpochMs!==void 0&&(d=l-(s==null?void 0:s.requestedTimeUnixEpochMs)-(a-c),n.logTimingOnce("navlinks_before_js",{overrideDurationMs:d,context:u}),n.logTimingOnce("navlinks_shown_total",{overrideDurationMs:l-(s==null?void 0:s.requestedTimeUnixEpochMs),context:u}));const f=o===p1.Classifier;if(s.lastStartFetch!==void 0&&s.firstStartFetch!==void 0&&s.firstNavlinkFetched!==void 0){const g=Math.max(f&&s.firstClassifierFetched!==void 0?s.firstClassifierFetched-s.lastStartFetch:0,0);let h=Math.max(Math.min(s.lastStartFetch-s.firstStartFetch,s.firstNavlinkFetched-s.firstStartFetch),0);o===p1.Conversation&&(h=0),n.logTimingOnce("navlinks_typeahead_savings",{overrideDurationMs:h,context:u}),n.logTimingOnce("navlinks_typeahead_savings_adj",{overrideDurationMs:Math.max(h-g,0),context:u})}if(s.firstRoundtripTime!==void 0&&s.firstStartFetch!==void 0&&n.logTimingOnce("navlinks_roundtrip_latency",{overrideDurationMs:s.firstRoundtripTime-s.firstStartFetch,context:u}),s.firstNavlinkFetched!==void 0&&s.firstStartFetch!==void 0&&n.logTimingOnce("navlinks_first_fetch_latency",{overrideDurationMs:s.firstNavlinkFetched-s.firstStartFetch,context:u}),s.firstClassifierFetched!==void 0&&s.lastStartFetch!==void 0&&n.logTimingOnce("navlinks_classifier_latency",{overrideDurationMs:s.firstClassifierFetched-s.lastStartFetch,context:u}),s.requestedTimeUnixEpochMs){const g=Math.max((m=s.firstNavlinksFetchedTS)!=null?m:0,f&&(p=s.firstClassifierFetchedTS)!=null?p:0,s.requestedTimeUnixEpochMs);let h=l-g;o===p1.Conversation&&(h=d),n.logTimingOnce("navlinks_wait_for_ui",{overrideDurationMs:h,context:u})}}const Z6=new Set,Hb=new Map;function iKe(t){"use forget";const e=D.c(40),{content:n,clientThreadId:s,navlinksShowDecisionSource:o,analytics:r,query:a}=t,{navlinks:l,navlinks_ready:c}=n.widgets;let u;e[0]!==s?(u={namespace:fg.SuperWidget,clientThreadId:s},e[0]=s,e[1]=u):u=e[1];const{profiler:d,isRequestActive:f}=pH(u),m=te(),p=X(lKe),g=v.useRef(!1);let h;e[2]===Symbol.for("react.memo_cache_sentinel")?(h=G7(),e[2]=h):h=e[2];const x=h&&l&&l.length>0;if(x&&a!=null){const U="".concat(s,"_").concat(a);Hb.has(U)||Hb.set(U,{perf:performance.now(),unix:Date.now()})}let b,y;e[3]!==r||e[4]!==x||e[5]!==s||e[6]!==f||e[7]!==o||e[8]!==d||e[9]!==a?(b=()=>{if(x&&d&&f&&!g.current&&a!=null){const U="".concat(s,"_").concat(a),H=Hb.get(U);!Z6.has(U)&&H&&(Z6.add(U),g.current=!0,aKe(H.perf,H.unix,d,r,o,_te()))}},y=[x,d,f,o,r,a,s],e[3]=r,e[4]=x,e[5]=s,e[6]=f,e[7]=o,e[8]=d,e[9]=a,e[10]=b,e[11]=y):(b=e[10],y=e[11]),v.useEffect(b,y);let S,C;e[12]!==x?(S=()=>{x&&V.logStructuredEvent(yc,{step:bc.ATLAS_NAVLINKS_ACTION_STEP_SHOW,source:xa.ATLAS_NAVLINKS_SOURCE_CHAT_LIST})},C=[x],e[12]=x,e[13]=S,e[14]=C):(S=e[13],C=e[14]),v.useEffect(S,C);const[,w]=kf();let k;e[15]!==w?(k=()=>{V.logStructuredEvent(yc,{step:bc.ATLAS_NAVLINKS_ACTION_STEP_SEE_MORE,source:xa.ATLAS_NAVLINKS_SOURCE_CHAT_LIST}),w({tabType:it.Search})},e[15]=w,e[16]=k):k=e[16];const E=k;if(!x)return null;let T,M;if(e[17]===Symbol.for("react.memo_cache_sentinel")){const U=Je("2244444699");T=U.get("navlinks_layout","horizontal"),M=U.get("navlinks_target","_self"),e[17]=T,e[18]=M}else T=e[17],M=e[18];const A=M;if(T==="vertical"&&a){let U;return e[19]!==E||e[20]!==A||e[21]!==l||e[22]!==a?(U=i.jsx(tKe,{navlinks:l,onSeeMoreClick:E,query:a,linkTarget:A}),e[19]=E,e[20]=A,e[21]=l,e[22]=a,e[23]=U):U=e[23],U}const I=l.length>0?l[0]:null;let j;e[24]!==A||e[25]!==I?(j=i.jsx(Q6,{index:0,navlink:I,linkTarget:A}),e[24]=A,e[25]=I,e[26]=j):j=e[26];const R=l.length>1?l[1]:null;let O;e[27]!==A||e[28]!==R?(O=i.jsx(Q6,{index:1,navlink:R,linkTarget:A}),e[27]=A,e[28]=R,e[29]=O):O=e[29];let L;e[30]!==E||e[31]!==m||e[32]!==p||e[33]!==l.length||e[34]!==c?(L=p&&i.jsxs("button",{onClick:E,"aria-label":m.formatMessage({id:"cwfmIN",defaultMessage:"See more links"}),className:q("text-token-text-tertiary flex flex-col items-center justify-center gap-1 self-stretch rounded-xl",p?"hover:bg-token-bg-tertiary bg-(--bg-quaternary) px-6":"bg-token-bg-tertiary hover:bg-token-bg-secondary px-4"),children:[i.jsx(QT,{}),i.jsx("span",{className:"min-h-[20px] text-sm",children:c?l.length:null})]}),e[30]=E,e[31]=m,e[32]=p,e[33]=l.length,e[34]=c,e[35]=L):L=e[35];let B;return e[36]!==j||e[37]!==O||e[38]!==L?(B=i.jsxs("div",{className:"flex gap-2 pt-1",children:[j,O,L]}),e[36]=j,e[37]=O,e[38]=L,e[39]=B):B=e[39],B}function lKe(){return Qo()}function Q6(t){"use forget";var B;const e=D.c(57),{index:n,navlink:s,linkTarget:o}=t,r=o===void 0?"_self":o,a=X(cKe);let l;e[0]!==n?(l=()=>{V.logStructuredEvent(yc,{step:bc.ATLAS_NAVLINKS_ACTION_STEP_CLICK,source:xa.ATLAS_NAVLINKS_SOURCE_CHAT_CAROUSEL,navlinkIndex:n})},e[0]=n,e[1]=l):l=e[1];const c=l,u=a?"hover:bg-token-bg-tertiary min-h-[76px] bg-(--bg-quaternary)":"bg-token-bg-tertiary hover:bg-token-bg-secondary min-h-[64px]";let d,f,m,p,g,h,_,x,b,y,S,C,w,k,E,T;if(e[2]!==r||e[3]!==c||e[4]!==s||e[5]!==u){y=Symbol.for("react.early_return_sentinel");e:{const U=["flex-1 rounded-xl",u];if(!s){y=i.jsx("div",{className:q(U,"loading-results-shimmer")});break e}f=AT,e[22]!==s.url?(E=i.jsx(Ns,{url:s.url,size:32,minSize:16,applySizeToImg:!1,showLoadingAnimation:!0,className:"h-4 w-4 shrink-0 rounded-full border-1 border-gray-200"}),e[22]=s.url,e[23]=E):E=e[23],T=s.title,m=null,p=null,g=null,h=(B=s.snippet)!=null?B:null,_=!1,x="rounded-xl!",b="white",d=Fs,S=s.url,C=r,w=c,k=q(U,"flex flex-col gap-1 px-4 py-3 select-none")}e[2]=r,e[3]=c,e[4]=s,e[5]=u,e[6]=d,e[7]=f,e[8]=m,e[9]=p,e[10]=g,e[11]=h,e[12]=_,e[13]=x,e[14]=b,e[15]=y,e[16]=S,e[17]=C,e[18]=w,e[19]=k,e[20]=E,e[21]=T}else d=e[6],f=e[7],m=e[8],p=e[9],g=e[10],h=e[11],_=e[12],x=e[13],b=e[14],y=e[15],S=e[16],C=e[17],w=e[18],k=e[19],E=e[20],T=e[21];if(y!==Symbol.for("react.early_return_sentinel"))return y;let M;e[24]!==s.url?(M=i.jsx(Ns,{url:s.url,size:32,minSize:16,applySizeToImg:!1,className:"bg-token-bg-secondary! h-4 w-4 shrink-0 rounded-full",showLoadingAnimation:!0}),e[24]=s.url,e[25]=M):M=e[25];let A;e[26]!==s.domain||e[27]!==s.title?(A=i.jsx("span",{className:"text-token-text-tertiary line-clamp-1 text-sm",children:i.jsxs("span",{children:[s.domain,"  ",s.title]})}),e[26]=s.domain,e[27]=s.title,e[28]=A):A=e[28];let I;e[29]!==M||e[30]!==A?(I=i.jsxs("div",{className:"flex items-center gap-2",children:[M,A]}),e[29]=M,e[30]=A,e[31]=I):I=e[31];let j;e[32]!==s.snippet||e[33]!==s.title?(j=s.snippet?Sq(s.snippet):s.title,e[32]=s.snippet,e[33]=s.title,e[34]=j):j=e[34];let R;e[35]!==j?(R=i.jsx("div",{className:"text-token-text-primary line-clamp-2 text-sm",children:j}),e[35]=j,e[36]=R):R=e[36];let O;e[37]!==d||e[38]!==I||e[39]!==R||e[40]!==S||e[41]!==C||e[42]!==w||e[43]!==k?(O=i.jsxs(d,{href:S,target:C,onClick:w,className:k,children:[I,R]}),e[37]=d,e[38]=I,e[39]=R,e[40]=S,e[41]=C,e[42]=w,e[43]=k,e[44]=O):O=e[44];let L;return e[45]!==f||e[46]!==m||e[47]!==p||e[48]!==g||e[49]!==h||e[50]!==_||e[51]!==x||e[52]!==b||e[53]!==O||e[54]!==E||e[55]!==T?(L=i.jsx(f,{favicon:E,heading:T,title:m,quoteHeading:p,quoteText:g,snippet:h,isContentBlocked:_,contentContainerClassName:x,theme:b,children:O}),e[45]=f,e[46]=m,e[47]=p,e[48]=g,e[49]=h,e[50]=_,e[51]=x,e[52]=b,e[53]=O,e[54]=E,e[55]=T,e[56]=L):L=e[56],L}function cKe(){return Qo()}const uKe=new Set(["lynx","cache"]),gC=new Set(["ocelot","caracal"]),J6=10,dKe=2,fKe=t=>{var n;return t.source&&gC.has(t.source)?!0:((n=t.sources)!=null?n:[]).some(s=>gC.has(s))};function mKe(t,e,n=!1){var l,c,u;const s=N({},e),o=[],r=[],a=[];for(const d of t){let f=!1;for(let m=0;m<1+((c=(l=d.sources)==null?void 0:l.length)!=null?c:0);m++){const p=m===0?d.source:(u=d.sources)==null?void 0:u[m-1],g=p!=="fast"?p:"cache",h=g!==void 0?[g]:[];if(g!==void 0&&uKe.has(g)&&h.push("fast"),g!==void 0&&gC.has(g)&&h.push("high-quality"),!h.some(_=>s[_]!==void 0&&s[_]<=0)){h.forEach(_=>{s[_]!==void 0&&s[_]--}),o.push(d),f=!0;break}}f||(fKe(d)?r:a).push(d)}if(n&&o.length<J6){const d=J6-o.length,f=new Set(o.map(g=>g.url)),m=(g,h)=>{let _=0;for(const x of g){if(_>=h)break;f.has(x.url)||(o.push(x),f.add(x.url),_++)}return _},p=m(r,d);p<d&&m(a,d-p)}return o}const pKe=Hn(()=>{const e=mn("3205212221").get("max_navlinks",void 0);let n;if(e&&typeof e=="object"&&!Array.isArray(e)){n={};for(const[s,o]of Object.entries(e))typeof o=="number"&&(n[s]=o)}return(!n||Object.keys(n).length===0)&&(n={fast:dKe}),n}),wq=re(me,"0c7b3e",20,20),gKe=re(xn,"b0fc5a",20,20),hKe=re(xn,"b15d71",20,20),_Ke=re(xn,"3be169",20,20);function Ef(t){switch(t){case it.Search:return QT;case it.Images:return gKe;case it.Videos:return _Ke;case it.News:return hKe;case it.Chat:return null}}function jd(t){"use forget";const e=D.c(10),{IconComponent:n,className:s,children:o}=t,r=n===void 0?wq:n;let a;e[0]!==s?(a=q("bg-token-bg-tertiary flex min-h-[160px] flex-col items-center justify-center gap-3 rounded-3xl",s),e[0]=s,e[1]=a):a=e[1];let l;e[2]!==r?(l=i.jsx(r,{className:"icon-xl text-token-text-tertiary"}),e[2]=r,e[3]=l):l=e[3];let c;e[4]!==o?(c=i.jsx("div",{className:"text-token-text-tertiary text-center",children:o}),e[4]=o,e[5]=c):c=e[5];let u;return e[6]!==a||e[7]!==l||e[8]!==c?(u=i.jsxs("div",{className:a,children:[l,c]}),e[6]=a,e[7]=l,e[8]=c,e[9]=u):u=e[9],u}function XT(t){"use forget";const e=D.c(20),{content:n,isAdultSearchEnabled:s,turnIndex:o,descriptionClassName:r,source:a,className:l}=t,c=a===void 0?"searchTab":a,{navlinks:u,navlinks_ready:d,safe_search_off:f,safety:m}=n.widgets,p=pKe(),g=u&&u.length>0,_=g&&(m!=="adult"||!f||s===!0)?cm([],mKe(u,p,d),!1):[],x=_.length>0;let b,y;if(e[0]!==x||e[1]!==c||e[2]!==o?(b=()=>{x&&(V.logStructuredEvent(yc,{step:bc.ATLAS_NAVLINKS_ACTION_STEP_SHOW,source:c==="navlinks"?xa.ATLAS_NAVLINKS_SOURCE_CHAT_LIST:xa.ATLAS_NAVLINKS_SOURCE_SEARCH_TAB}),c==="searchTab"&&V.logStructuredEvent(hl,{step:_l.ATLAS_SUPER_WIDGET_RESULTS_ACTION_STEP_SHOW,tab:Zs.ATLAS_SUPER_WIDGET_TAB_SEARCH,turnIndex:o}))},y=[x,c,o],e[0]=x,e[1]=c,e[2]=o,e[3]=b,e[4]=y):(b=e[3],y=e[4]),v.useEffect(b,y),!x){let T;e[5]===Symbol.for("react.memo_cache_sentinel")?(T=Ef(it.Search),e[5]=T):T=e[5];const M=T,A=g,I=A?"min-h-[120px]!":"";let j;e[6]!==A?(j=A?i.jsx(P,{id:"MFLPAn",defaultMessage:"No links to show"}):i.jsx(P,{id:"dOHukr",defaultMessage:"No links found"}),e[6]=A,e[7]=j):j=e[7];let R;return e[8]!==I||e[9]!==j?(R=i.jsx(jd,{IconComponent:M,className:I,children:j}),e[8]=I,e[9]=j,e[10]=R):R=e[10],R}const S=vKe(_);let C;e[11]!==l?(C=q("@w-sm/main:-mx-4 -mx-2 flex flex-col gap-3",l),e[11]=l,e[12]=C):C=e[12];let w;e[13]!==r||e[14]!==c||e[15]!==o?(w=(T,M)=>i.jsx(xKe,{groupIndex:M,navlinks:T,source:c,turnIndex:o,descriptionClassName:r},M),e[13]=r,e[14]=c,e[15]=o,e[16]=w):w=e[16];const k=S.map(w);let E;return e[17]!==C||e[18]!==k?(E=i.jsx("div",{className:C,children:k}),e[17]=C,e[18]=k,e[19]=E):E=e[19],E}function xKe(t){"use forget";const e=D.c(13),{groupIndex:n,navlinks:s,source:o,turnIndex:r,descriptionClassName:a}=t,l=s[0];let c;if(e[0]!==a||e[1]!==n||e[2]!==l||e[3]!==s||e[4]!==o||e[5]!==r){const u=s.slice(1);let d;e[7]!==a||e[8]!==n||e[9]!==l||e[10]!==o||e[11]!==r?(d=i.jsx(yKe,{navlinkIndex:n,mainNavlink:l,source:o,turnIndex:r,descriptionClassName:a}),e[7]=a,e[8]=n,e[9]=l,e[10]=o,e[11]=r,e[12]=d):d=e[12],c=i.jsxs("div",{className:"flex flex-col",children:[d,u.length>0&&i.jsx("div",{className:"ms-4 flex flex-col",children:u.map((f,m)=>i.jsx(bKe,{navlinkIndex:n+1+m,navlink:f,source:o,descriptionClassName:a},f.url))})]}),e[0]=a,e[1]=n,e[2]=l,e[3]=s,e[4]=o,e[5]=r,e[6]=c}else c=e[6];return c}function yKe(t){"use forget";const e=D.c(11),{mainNavlink:n,navlinkIndex:s,source:o,turnIndex:r,descriptionClassName:a}=t;let l;e[0]!==s||e[1]!==o||e[2]!==r?(l=()=>{V.logStructuredEvent(yc,{step:bc.ATLAS_NAVLINKS_ACTION_STEP_CLICK,source:o==="navlinks"?xa.ATLAS_NAVLINKS_SOURCE_CHAT_LIST:xa.ATLAS_NAVLINKS_SOURCE_SEARCH_TAB,navlinkIndex:s}),o==="searchTab"&&V.logStructuredEvent(hl,{step:_l.ATLAS_SUPER_WIDGET_RESULTS_ACTION_STEP_CLICK,tab:Zs.ATLAS_SUPER_WIDGET_TAB_SEARCH,turnIndex:r})},e[0]=s,e[1]=o,e[2]=r,e[3]=l):l=e[3];const c=l;let u;return e[4]!==a||e[5]!==c||e[6]!==n.domain||e[7]!==n.snippet||e[8]!==n.title||e[9]!==n.url?(u=i.jsx(Rx,{url:n.url,domain:n.domain,title:n.title,description:n.snippet,descriptionClassName:a,onLogClick:c}),e[4]=a,e[5]=c,e[6]=n.domain,e[7]=n.snippet,e[8]=n.title,e[9]=n.url,e[10]=u):u=e[10],u}function bKe(t){"use forget";const e=D.c(19),{navlink:n,navlinkIndex:s,source:o,descriptionClassName:r}=t,a=v.useRef(!1);let l;e[0]!==s||e[1]!==o?(l=()=>{V.logStructuredEvent(yc,{step:bc.ATLAS_NAVLINKS_ACTION_STEP_CLICK,source:o==="navlinks"?xa.ATLAS_NAVLINKS_SOURCE_CHAT_LIST:xa.ATLAS_NAVLINKS_SOURCE_SEARCH_TAB,navlinkIndex:s})},e[0]=s,e[1]=o,e[2]=l):l=e[2];const c=l;let u,d;e[3]===Symbol.for("react.memo_cache_sentinel")?(u=()=>a.current=!1,d=()=>a.current=!0,e[3]=u,e[4]=d):(u=e[3],d=e[4]);let f;e[5]!==c?(f=_=>a.current?(a.current=!1,_.preventDefault()):c(),e[5]=c,e[6]=f):f=e[6];let m;e[7]!==n.title?(m=i.jsx("div",{className:"mb-1 truncate text-base font-medium text-[var(--interactive-label-accent-default)]",children:n.title}),e[7]=n.title,e[8]=m):m=e[8];let p;e[9]!==r||e[10]!==n.snippet?(p=n.snippet&&i.jsx("div",{className:q("text-token-text-secondary mb-1 truncate text-sm font-normal",r),children:n.snippet}),e[9]=r,e[10]=n.snippet,e[11]=p):p=e[11];let g;e[12]!==m||e[13]!==p?(g=i.jsxs("div",{className:"flex flex-col",children:[m,p]}),e[12]=m,e[13]=p,e[14]=g):g=e[14];let h;return e[15]!==n.url||e[16]!==f||e[17]!==g?(h=i.jsx(Fs,{href:n.url,target:"_self",className:"hover:bg-token-interactive-bg-secondary-hover ms-2.5 flex flex-col rounded-xl px-4 py-2.5",draggable:!1,onMouseDown:u,onMouseMove:d,onClick:f,children:g},n.url),e[15]=n.url,e[16]=f,e[17]=g,e[18]=h):h=e[18],h}function vKe(t){return Object.values(t.reduce((e,n)=>{const s=n.domain;return e[s]||(e[s]=[]),e[s].push(n),e},{}))}const SKe=4,m0t=t=>{"use forget";const e=D.c(19),{clientThreadId:n,query:s,className:o,state:r,isAssistantResponseSuppressed:a}=t,[,l]=kf(),{showNavlinksWidget:c,showLongList:u,navlinksOptimistic:d,navlinksReady:f,imagesOptimistic:m,videosOptimistic:p,newsOptimistic:g,showReason:h,analytics:_}=r;if(!c)return null;const x=!a&&"mb-8";let b;e[0]!==o||e[1]!==x?(b=q(x,o),e[0]=o,e[1]=x,e[2]=b):b=e[2];let y;e[3]!==_||e[4]!==n||e[5]!==m||e[6]!==a||e[7]!==l||e[8]!==d||e[9]!==f||e[10]!==g||e[11]!==s||e[12]!==u||e[13]!==h||e[14]!==p?(y=u?i.jsxs(i.Fragment,{children:[i.jsx(XT,{content:{content_type:vt.SuperWidget,widgets:{navlinks:d.slice(0,SKe),images:m,videos:p,news:g,navlinks_ready:f}},className:"pt-1",descriptionClassName:"line-clamp-1",source:"navlinks",turnIndex:0}),i.jsxs("div",{className:"@w-sm/main:-mx-4 -mx-2",children:[i.jsx("div",{className:"mt-3 mb-6 flex w-full items-center justify-between px-4",children:i.jsx("button",{type:"button",onClick:()=>l({tabType:it.Search}),className:"text-token-text-primary text-sm hover:underline",children:i.jsx(P,{id:"navlinks.showAllSearchResults",defaultMessage:"Show all search results"})})}),!a&&i.jsx("hr",{className:"mx-4"})]})]}):i.jsx(iKe,{content:{content_type:vt.SuperWidget,widgets:{navlinks:d,images:m,videos:p,news:g,navlinks_ready:f}},clientThreadId:n,navlinksShowDecisionSource:h,analytics:_,query:s}),e[3]=_,e[4]=n,e[5]=m,e[6]=a,e[7]=l,e[8]=d,e[9]=f,e[10]=g,e[11]=s,e[12]=u,e[13]=h,e[14]=p,e[15]=y):y=e[15];let S;return e[16]!==b||e[17]!==y?(S=i.jsx("div",{id:"navlinks-content",className:b,children:y}),e[16]=b,e[17]=y,e[18]=S):S=e[18],S};function p0t(t){return t.split(new RegExp("[^\\p{L}\\p{N}]+","u")).filter(Boolean).length}const CKe=Hn(()=>{let e=mn("3205212221").get("numWords",3);const n=Eo("999809785").get("numWordsShowNavlinks",-1);return n!==-1&&(e=n),e});function g0t(){return CKe()}const X6=[1,2,3,4,10,20,30],wKe=1,kKe=["g-67e595af0a408191b84ee532fca12cd1","g-67ec3b78892481918c89067962526695","g-67ec3b4988f8819184c5454e18f5e84b","g-67ec3ad40750819181ccffa6a6f050d5","g-67edaaa3d3a081918205d0c470f00a32","g-67edab030ac881918ce8fa5c75a8e1b3","g-67edab2fc0f48191881a20ac98fedf6f","g-67edab4a24fc8191b975acaa8da2dcef"];function EKe({clientThreadId:t,isInline:e=!1}){var W,Y;const n=Pt(t),s=br(ma.isBusinessWorkspace),o=v.useRef(!1),r=Un(t),[a,l,c,u]=Ze(t,K=>[K==null?void 0:K.mode,ve.getRequestId(K),ve.getConversationLastTurn(K),ve.getConversationTurns(K).filter(Z=>Z.role===dt.Assistant).length]),d=X(()=>{var K;return((K=zd(n))==null?void 0:K.value)===Nn.STREAMING}),f=!mt(),m=v.useMemo(()=>{if(!r)return-1;const K=xte(r);return K()>wKe?-1:X6[Math.floor(K()*X6.length)]},[r]),p=Dr(l),g=((W=hw(t))==null?void 0:W.value)===Nn.STREAMING,h=d||p||g,_=function(){return Math.random()<.6?"default":"personality_v1"},[x,b]=v.useState(null),[y,S]=v.useState(!1),[C,w]=v.useState(!1),[k,E]=v.useState(!1),[T,M]=v.useState(_),A=(K,Z,J)=>{var ne;const Q=(ne=c==null?void 0:c.messages[0])==null?void 0:ne.id;b(K),M(Z),B(Q,K,Z,J)},I=(c==null?void 0:c.role)===dt.Assistant,j=c==null?void 0:c.messages.find(K=>{var Z;return(Z=K.metadata)==null?void 0:Z.async_task_id}),R=(Y=j==null?void 0:j.metadata)==null?void 0:Y.async_task_id,O=Zo(K=>Rm.getTask(R!=null?R:"",K)),L=!!(O&&hp(O)),B=v.useMemo(()=>tl((K,Z,J,Q)=>{r&&K&&(s?BRe({rating:iT(Z),shown_at_assistant_turn:m,prompt:J},r,K):s||ue.safePost("/conversation/{conversation_id}/rating",{parameters:{path:{conversation_id:r}},requestBody:{message_id:K,rating:Z,shown_at_assistant_turn:m,prompt:J,popup_ui_message:Q},authOption:Ot.SendIfAvailable})),V.logEvent("Conversation Rating Submitted",{rating:Z,showAtAssistantTurn:m,conversationId:r,prompt:J,popupUiMessage:Q}),S(!0),setTimeout(()=>{w(!0)},1500)},2e3),[s,r,m]),U=hs(),H=te(),$=v.useMemo(()=>T==="personality_v1"?H.formatMessage({id:"rating.instructions.personality_v1",defaultMessage:"Do you like this personality?"}):e?"Is this helpful so far?":"Is this conversation helpful so far?",[H,T,e]),F=u!==m||h||L||!I||(a==null?void 0:a.kind)!==Bt.PrimaryAssistant&&(a==null?void 0:a.kind)!==Bt.FlyingCircusCustomization&&(a==null?void 0:a.gizmo_id)!==void 0&&!kKe.includes(a==null?void 0:a.gizmo_id)||k||f||U;v.useEffect(()=>{!F&&!o.current&&(V.logEvent("Conversation Rating Shown",{showAtAssistantTurn:m,conversationId:r}),o.current=!0)},[F]);const z=dp();return k||!z.forceShowConvoRating&&F?null:i.jsxs(i.Fragment,{children:[i.jsx(In,{children:y&&!C&&i.jsx(wt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},children:i.jsx(ej,{$padded:!0,$fullRounded:e,children:i.jsx("span",{className:"text-token-text-tertiary text-sm",children:i.jsx(P,{id:"rating.thanks",defaultMessage:"Thanks for your feedback!"})})})},"submitted")}),!y&&i.jsx(wt.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.1},children:i.jsxs(ej,{$padded:!1,$fullRounded:e,children:[i.jsxs("div",{className:"text-token-text-secondary flex items-center justify-center gap-4 px-4 py-2.5 text-sm whitespace-nowrap",children:[i.jsx("span",{children:$}),i.jsxs("div",{className:"flex items-center gap-5",children:[i.jsx($b,{$selected:x==="thumbsUp",onClick:()=>A("thumbsUp",T,$),children:i.jsx(WT,{className:"icon"})}),i.jsx($b,{$selected:x==="thumbsDown",onClick:()=>A("thumbsDown",T,$),children:i.jsx(zT,{className:"icon"})})]})]}),!e&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"bg-token-main-surface-tertiary w-px flex-1 self-stretch"}),i.jsx($b,{className:"p-3",$selected:!1,onClick:()=>E(!0),children:i.jsx(ms,{className:"icon text-token-text-secondary hover:text-token-text-primary"})})]})]})},"rating")]})}var NP;const $b=Tt.button(NP||(NP=_t(["\n  ","\n  hover:text-token-text-primary\n"])),t=>t.$selected?"text-token-text-primary":"text-token-text-secondary");var IP;const ej=Tt.div(IP||(IP=_t(["inline-flex border border-gray-100 dark:border-gray-700\n","\n","\n"])),t=>t.$padded&&"py-2.5 px-4",t=>t.$fullRounded?"rounded-full":"rounded-xl"),TKe=je(()=>Me(()=>import("./24da65be-ezfot4qnl5qaq7a6.js"),__vite__mapDeps([345,1,2,3,290]))),MKe=je(()=>Me(()=>import("./f41e2eb7-hoxsbwyb0ss5q44s.js"),__vite__mapDeps([346,1,2,3,290])));function AKe(t){"use forget";var d,f;const{clientThreadId:e,canShowInlineMessageFeedback:n,messageForRating:s}=t,o=Et(),r=(d=o==null?void 0:o.isWorkspacePlan())!=null?d:!1,a=Ze(e,IKe),l=Un(e),c=gd(NKe),u=l===c;return a?"none":u&&l&&!r?"voice":(f=s.clientMetadata)!=null&&f.rating&&n?"inline":"conversation"}function NKe(t){return t.voiceFeedbackThread}function IKe(t){const e=ve.getConversationTurns(t);let n=0;for(let s=e.length-1;s>=0;s--){const o=e[s];if(o.messages.some(PKe))return!0;if(o.messages.some(jKe)&&n++,n>=3)break}return!1}function jKe(t){return t.author.role===dt.Assistant}function PKe(t){var e;return(e=t.metadata)==null?void 0:e.is_indepth_feedback}function h0t(t){"use forget";const e=D.c(15),{clientThreadId:n,canShowInlineMessageFeedback:s,messageForRating:o,allGroupedMessages:r,currentModelId:a}=t,l=$c(),c=Je("1030729005").get("chatgpt_message_feedback_consolidation_enabled",!1);let u;e[0]!==s||e[1]!==n||e[2]!==o?(u={clientThreadId:n,canShowInlineMessageFeedback:s,messageForRating:o},e[0]=s,e[1]=n,e[2]=o,e[3]=u):u=e[3];const d=AKe(u),f=Un(n),{voiceName:m}=xx();if(d==="none")return null;let p=null;if(d==="voice"&&f&&!l){Ut.feedbackShown.success({voice:m});let h;e[4]!==f?(h=i.jsx("div",{className:"text-center",children:i.jsx(LBe,{serverThreadId:f})}),e[4]=f,e[5]=h):h=e[5],p=h}else if(d==="inline"){const h=c?MKe:TKe;let _;e[6]!==r||e[7]!==n||e[8]!==a||e[9]!==o?(_=i.jsx(h,{clientThreadId:n,conversationMessage:o,allGroupedMessages:r,currentModelId:a}),e[6]=r,e[7]=n,e[8]=a,e[9]=o,e[10]=_):_=e[10],p=_}else if(d==="conversation"){let h;e[11]!==n?(h=i.jsx("div",{className:"text-center",children:i.jsx(EKe,{clientThreadId:n})}),e[11]=n,e[12]=h):h=e[12],p=h}let g;return e[13]!==p?(g=i.jsx("div",{className:"mt-3 w-full empty:hidden",children:p}),e[13]=p,e[14]=g):g=e[14],g}const RKe=je(()=>Me(()=>import("./ccdb9715-h3di4z0r3okjxkb1.js"),__vite__mapDeps([347,1,2,3,348,290,153,21,18,19,22])).then(t=>t.CAFeedbackModal));function _0t({clientThreadId:t,currentModelConfig:e}){const n=yte(t),s=pze(e,n),o=br(ma.isBusinessWorkspace),r=X(()=>Fn(Pt(t))),a=e_(r);return{onChangeRating:v.useCallback(({nodeId:c,messageId:u,rating:d})=>{var g,h;const f=Lt(t);d&&V.logEvent("Rated Result",{id:u,threadId:f,rating:d,model:e==null?void 0:e.id});const m=ve.getTree(At(t)),p=m.getNodeByIdOrMessageId(c);if(f!==void 0&&(o?d&&DRe({rating:iT(d)},f,u):o||(d?ue.safePost("/conversation/message_feedback",{requestBody:{message_id:u,conversation_id:f,rating:d},authOption:Ot.SendIfAvailable}):ue.safeDelete("/conversation/message_feedback",{requestBody:{message_id:u,conversation_id:f},authOption:Ot.SendIfAvailable}))),pt(t,_=>{fo.updateTree(_,x=>{x.updateNodeMetadata(c,{rating:d!=null?d:void 0})})}),d&&(s||a)){rt(RKe,{citations:(h=(g=p.message.metadata)==null?void 0:g.citations)!=null?h:[],rating:d,conversationId:f!=null?f:"",messageId:u,conversationTree:m,nodeId:c,isGlaux:a});return}},[t,e==null?void 0:e.id,o,s,a])}}function x0t(t){const{isCompletionRequestInProgress:e,isUserTurn:n,message:s}=t,o=te(),r=v.useRef(e);v.useEffect(()=>{if(!e)return;let a;sh.setLiveRegionAssertive(o.formatMessage({id:"0LFLpz",defaultMessage:"ChatGPT is generating a response..."}));const l=o.formatMessage({id:"uqqkLX",defaultMessage:"ChatGPT is still generating a response..."}),c=5e3;function u(){sh.setLiveRegionAssertive(""),a=window.setTimeout(()=>{sh.setLiveRegionAssertive(l),a=window.setTimeout(()=>u(),c)},1e3)}return a=window.setTimeout(u,c),()=>{window.clearTimeout(a)}},[e,o]),v.useEffect(()=>{var u,d,f;if(e||n||!s||!r.current){r.current=e;return}const{content:a}=s,l=(a.content_type===vt.Text,a),c=o.formatMessage({id:"lZ4dVJ",defaultMessage:"ChatGPT says: {message}"},{message:(f=(d=(u=l==null?void 0:l.parts)==null?void 0:u.join)==null?void 0:d.call(u,"\n"))!=null?f:""});sh.setLiveRegionAssertive(c),r.current=!1},[n,e,o,s])}var Gb,tj;function OKe(){if(tj)return Gb;tj=1;function t(e,n){for(var s=-1,o=e==null?0:e.length;++s<o;)if(!n(e[s],s,e))return!1;return!0}return Gb=t,Gb}var Vb,nj;function LKe(){if(nj)return Vb;nj=1;var t=bte();function e(n,s){var o=!0;return t(n,function(r,a,l){return o=!!s(r,a,l),o}),o}return Vb=e,Vb}var zb,sj;function DKe(){if(sj)return zb;sj=1;var t=OKe(),e=LKe(),n=vte(),s=i3(),o=l3();function r(a,l,c){var u=s(a)?t:e;return c&&o(a,l,c)&&(l=void 0),u(a,n(l,3))}return zb=r,zb}var BKe=DKe();const y0t=ps(BKe);var Wb,oj;function FKe(){if(oj)return Wb;oj=1;function t(e){return e&&e.length?e[0]:void 0}return Wb=t,Wb}var qb,rj;function UKe(){return rj||(rj=1,qb=FKe()),qb}var HKe=UKe();const b0t=ps(HKe),Ls=we({add_picture_do_rest:{id:"india-viral-image-gen-prompts.add_picture_do_rest",defaultMessage:"Just add a picture  ChatGPT will do the rest."},navratri_title:{id:"india-viral-image-gen-prompts.navratri.title",defaultMessage:"Navratri Garba Glow"},navratri_oneliner:{id:"india-viral-image-gen-prompts.navratri.oneliner",defaultMessage:"Garba night photo, styled for you"},navratri_prompt:{id:"india-viral-image-gen-prompts.navratri.prompt",defaultMessage:"Transform us into a Garba dance celebration, wearing colorful chaniya cholis and kediyus, ready to dance under strings of fairy lights in a festive ground."},diwali_title:{id:"india-viral-image-gen-prompts.diwali.title",defaultMessage:"Diwali Family Lights"},diwali_oneliner:{id:"india-viral-image-gen-prompts.diwali.oneliner",defaultMessage:"Create a Diwali card from your photo"},diwali_prompt:{id:"india-viral-image-gen-prompts.diwali.prompt",defaultMessage:"Change the photo to us wearing traditional clothes, participating in a Diwali celebration. Glowing 'Happy Diwali From [Insert Name]' text written in background with shining letters floats in the air. Make it a slightly stylized festive illustration."},childrens_title:{id:"india-viral-image-gen-prompts.childrens.title",defaultMessage:"Children's Day Story"},childrens_oneliner:{id:"india-viral-image-gen-prompts.childrens.oneliner",defaultMessage:"Make a playful Childrens Day card"},childrens_prompt:{id:"india-viral-image-gen-prompts.childrens.prompt",defaultMessage:"Create a Happy Children's Day greeting card in a photo surrealistic style. The photo looks like there is a big open book with the greeting written on it and the children are playing on swings and slides around it. There are rainbows and confetti all around."},christmas_title:{id:"india-viral-image-gen-prompts.christmas.title",defaultMessage:"Christmas Wonderland Card"},christmas_oneliner:{id:"india-viral-image-gen-prompts.christmas.oneliner",defaultMessage:"Make a snowy family Christmas card"},christmas_prompt:{id:"india-viral-image-gen-prompts.christmas.prompt",defaultMessage:'Make the family celebrate Christmas in a detailed snowy winter wonderland Christmas card style with "Merry Christmas from the [Insert Name]" written in the background.'},cricket_title:{id:"india-viral-image-gen-prompts.cricket.title",defaultMessage:"Cricket Festival Street"},cricket_oneliner:{id:"india-viral-image-gen-prompts.cricket.oneliner",defaultMessage:"Get a custom match-day photo"},cricket_prompt:{id:"india-viral-image-gen-prompts.cricket.prompt",defaultMessage:"Generate a vibrant Indian festival street scene with me included in the celebration and fans in blue jerseys dancing Garba and waving flags, colorful gulal (powder) flying in the air, and a glowing banner reading 'Chak De India' in beautiful English calligraphy."}});function v0t(){"use forget";var m;const t=D.c(14),e=te();let n;if(t[0]===Symbol.for("react.memo_cache_sentinel")){const{country:p}=Rc();n=(p!=null?p:"").toUpperCase(),t[0]=n}else n=t[0];const s=n;let o;if(t[1]!==e){const p=e.formatMessage(Ls.add_picture_do_rest),g=VKe,h=y=>{var w;const S=(w=y.trending_target_countries)!=null?w:[];return S.length===0||s===""?!1:new Set(S.map(GKe)).has(s)},x=[{type:xt.Trending,id:"india_viral_navratri_garba",title:e.formatMessage(Ls.navratri_title),body:p,oneliner:e.formatMessage(Ls.navratri_oneliner),prompt:e.formatMessage(Ls.navratri_prompt),category:"dalle",systemHints:[Ke.PictureV2],requires_dalle:!0,requires_file_upload:!0,is_trending:!0,trending_target_countries:["IN"],trending_schedule_timezone:"Asia/Kolkata",trending_schedule_utc:[{start_time_utc:"2025-09-21T18:30:00Z",end_time_utc:"2025-10-02T18:29:59Z"}],example_image_urls:[{"320_2x":"https://persistent.oaistatic.com/chatgpt/trending/image-gen/navratri-1@2x.png"},{"320_2x":"https://persistent.oaistatic.com/chatgpt/trending/image-gen/navratri-2@2x.png"}],theme:Cn.ImageGenTrending,source:"CURATED"},{type:xt.Trending,id:"india_viral_diwali_family_glow",title:e.formatMessage(Ls.diwali_title),body:p,oneliner:e.formatMessage(Ls.diwali_oneliner),prompt:e.formatMessage(Ls.diwali_prompt),category:"dalle",systemHints:[Ke.PictureV2],requires_dalle:!0,requires_file_upload:!0,is_trending:!0,trending_target_countries:["IN"],trending_schedule_timezone:"Asia/Kolkata",trending_schedule_utc:[{start_time_utc:"2025-10-14T18:30:00Z",end_time_utc:"2025-10-22T18:29:59Z"}],example_image_urls:[{"320_2x":"https://persistent.oaistatic.com/chatgpt/trending/image-gen/diwali-1@2x.png"},{"320_2x":"https://persistent.oaistatic.com/chatgpt/trending/image-gen/diwali-2@2x.png"},{"320_2x":"https://persistent.oaistatic.com/chatgpt/trending/image-gen/diwali-3@2x.png"}],theme:Cn.ImageGenTrending,source:"CURATED"},{type:xt.Trending,id:"india_viral_childrens_day_card",title:e.formatMessage(Ls.childrens_title),body:p,oneliner:e.formatMessage(Ls.childrens_oneliner),prompt:e.formatMessage(Ls.childrens_prompt),category:"dalle",systemHints:[Ke.PictureV2],requires_dalle:!0,requires_file_upload:!0,is_trending:!0,trending_target_countries:["IN"],trending_schedule_timezone:"Asia/Kolkata",trending_schedule_utc:[{start_time_utc:"2025-11-11T18:30:00Z",end_time_utc:"2025-11-14T18:29:59Z"}],example_image_urls:[{"320_2x":"https://persistent.oaistatic.com/chatgpt/trending/image-gen/childrens-day@2x.png"}],theme:Cn.ImageGenTrending,source:"CURATED"},{type:xt.Trending,id:"india_viral_christmas_card",title:e.formatMessage(Ls.christmas_title),body:p,oneliner:e.formatMessage(Ls.christmas_oneliner),prompt:e.formatMessage(Ls.christmas_prompt),category:"dalle",systemHints:[Ke.PictureV2],requires_dalle:!0,requires_file_upload:!0,is_trending:!0,trending_target_countries:["IN"],trending_schedule_timezone:"Asia/Kolkata",trending_schedule_utc:[{start_time_utc:"2025-12-24T18:30:00Z",end_time_utc:"2025-12-25T18:29:59Z"}],example_image_urls:[{"320_2x":"https://persistent.oaistatic.com/chatgpt/trending/image-gen/christmas@2x.png"}],theme:Cn.ImageGenTrending,source:"CURATED"},{type:xt.Trending,id:"india_viral_cricket_festival",title:e.formatMessage(Ls.cricket_title),body:p,oneliner:e.formatMessage(Ls.cricket_oneliner),prompt:e.formatMessage(Ls.cricket_prompt),category:"dalle",systemHints:[Ke.PictureV2],requires_dalle:!0,is_trending:!0,trending_target_countries:["IN"],trending_schedule_timezone:"Asia/Kolkata",trending_schedule_utc:[{start_time_utc:"2025-09-08T18:30:00Z",end_time_utc:"2025-09-28T18:29:59Z"},{start_time_utc:"2025-10-18T18:30:00Z",end_time_utc:"2025-10-19T18:29:59Z"},{start_time_utc:"2025-10-22T18:30:00Z",end_time_utc:"2025-10-23T18:29:59Z"},{start_time_utc:"2025-10-24T18:30:00Z",end_time_utc:"2025-10-25T18:29:59Z"},{start_time_utc:"2025-10-28T18:30:00Z",end_time_utc:"2025-10-29T18:29:59Z"},{start_time_utc:"2025-10-30T18:30:00Z",end_time_utc:"2025-10-31T18:29:59Z"},{start_time_utc:"2025-11-01T18:30:00Z",end_time_utc:"2025-11-02T18:29:59Z"},{start_time_utc:"2025-11-05T18:30:00Z",end_time_utc:"2025-11-06T18:29:59Z"},{start_time_utc:"2025-11-07T18:30:00Z",end_time_utc:"2025-11-08T18:29:59Z"},{start_time_utc:"2025-11-29T18:30:00Z",end_time_utc:"2025-11-30T18:29:59Z"},{start_time_utc:"2025-12-02T18:30:00Z",end_time_utc:"2025-12-03T18:29:59Z"},{start_time_utc:"2025-12-05T18:30:00Z",end_time_utc:"2025-12-06T18:29:59Z"},{start_time_utc:"2025-12-08T18:30:00Z",end_time_utc:"2025-12-09T18:29:59Z"},{start_time_utc:"2025-12-10T18:30:00Z",end_time_utc:"2025-12-11T18:29:59Z"},{start_time_utc:"2025-12-13T18:30:00Z",end_time_utc:"2025-12-14T18:29:59Z"},{start_time_utc:"2025-12-16T18:30:00Z",end_time_utc:"2025-12-17T18:29:59Z"},{start_time_utc:"2025-12-18T18:30:00Z",end_time_utc:"2025-12-19T18:29:59Z"}],example_image_urls:[{"320_2x":"https://persistent.oaistatic.com/chatgpt/trending/image-gen/cricket@2x.png"}],theme:Cn.ImageGenTrending,source:"CURATED"}].filter(y=>h(y)&&g(y)),b=$Ke;o=x.filter(b),t[1]=e,t[2]=o}else o=t[2];const r=o,a=r[Math.floor(Math.random()*r.length)];if(!a){let p;return t[3]===Symbol.for("react.memo_cache_sentinel")?(p=[],t[3]=p):p=t[3],p}const l=a.oneliner;let c;t[4]!==l||t[5]!==a?(c=l?G(N({},a),{title:l}):a,t[4]=l,t[5]=a,t[6]=c):c=t[6];const u=c,d=u.example_image_urls;if(Array.isArray(d)&&d.length>0){const p=d[Math.floor(Math.random()*d.length)];let g;t[7]!==p?(g=(m=p==null?void 0:p["320_2x"])!=null?m:p?Object.values(p)[0]:void 0,t[7]=p,t[8]=g):g=t[8];const h=g;if(typeof h=="string"&&h.length>0){let _;return t[9]!==u||t[10]!==h?(_=[G(N({},u),{coverImageUrl:h})],t[9]=u,t[10]=h,t[11]=_):_=t[11],_}}let f;return t[12]!==u?(f=[u],t[12]=u,t[13]=f):f=t[13],f}function $Ke(t){var e;return(e=t.systemHints)==null?void 0:e.includes(Ke.PictureV2)}function GKe(t){return t.toUpperCase()}function VKe(t){var s;const e=(s=t.trending_schedule_utc)!=null?s:[];if(e.length===0)return!1;const n=new Date;for(const o of e){const r=o.start_time_utc,a=o.end_time_utc;if(!r||!a)continue;const l=new Date(r),c=new Date(a);if(l<=n&&n<=c)return!0}return!1}function zKe(t,e=!1){return Je("4170052905").get(t,e)}const WKe=()=>{const t=[];let e=null;const n={};Ar(()=>tU(),u=>{u==null||u.forEach(d=>{var f;n[d.id]=(f=d.conversation_id)!=null?f:void 0})},{fireImmediately:!0});const s=u=>{ue.safePost("/feed/interactions",{requestBody:{events:u}})},o=()=>{if(!e)return;const{cardId:u,openTimestamp:d}=e,f=(Date.now()-d)/1e3;t.push({type:"read_expanded",card_id:u,dwell_time_seconds:f,timestamp:new Date().toISOString()}),ys().logEventWithStatsig("(Web) FYP Card Closed","chatgpt_web_fyp_card_closed",{card_id:u,dwell_time_seconds:f,conversation_id:n[u]}),e=null};return{trackCardOpen:u=>{(e==null?void 0:e.cardId)!==u&&(e&&o(),e={cardId:u,openTimestamp:Date.now()},ys().logEventWithStatsig("(Web) FYP Card Opened","chatgpt_web_fyp_card_opened",{card_id:u,conversation_id:n[u]}),Fe.count(Ue.PULSE,"chatgpt_web_fyp_card_opened"))},trackCardClose:o,trackCardImpression:u=>{t.push({type:"impression",card_id:u,dwell_time_seconds:0,timestamp:new Date().toISOString()}),ys().logEventWithStatsig("(Web) FYP Card Viewed","chatgpt_web_fyp_card_viewed",{card_id:u,conversation_id:n[u]}),Fe.count(Ue.PULSE,"chatgpt_web_fyp_card_viewed")},trackAndFlushInteractions:()=>{t.length!==0&&(s(t),t.length=0)},trackTaskPauseSurveyView:u=>{t.push({type:"task_pause_survey_impression",task_id:u,timestamp:new Date().toISOString()}),ys().logEventWithStatsig("(Web) FYP Task Pause Survey Viewed","chatgpt_web_fyp_task_pause_survey_viewed",{task_id:u}),Fe.count(Ue.PULSE,"chatgpt_web_fyp_task_pause_survey_viewed")}}},qKe=Hn(()=>WKe()),KKe=3e3,YKe=()=>{"use forget";const t=D.c(4);let e;t[0]===Symbol.for("react.memo_cache_sentinel")?(e=qKe(),t[0]=e):e=t[0];const n=e;m3(n.trackAndFlushInteractions,KKe);let s,o;t[1]===Symbol.for("react.memo_cache_sentinel")?(s=()=>{const a=Kd(window,{pagehide:n.trackAndFlushInteractions,beforeunload:n.trackAndFlushInteractions,visibilitychange:n.trackAndFlushInteractions});return()=>{a()}},o=[n.trackAndFlushInteractions],t[1]=s,t[2]=o):(s=t[1],o=t[2]),v.useEffect(s,o);let r;return t[3]===Symbol.for("react.memo_cache_sentinel")?(r={trackCardOpen:n.trackCardOpen,trackCardClose:n.trackCardClose,trackCardImpression:n.trackCardImpression,trackTaskPauseSurveyView:n.trackTaskPauseSurveyView},t[3]=r):r=t[3],r};function eM(){"use forget";const t=D.c(9);let e;t[0]===Symbol.for("react.memo_cache_sentinel")?(e=Ws(),t[0]=e):e=t[0];const{_openCardView:n,_closeCardView:s}=e,{trackCardOpen:o,trackCardClose:r}=YKe();let a;t[1]!==r?(a=()=>{s(),r()},t[1]=r,t[2]=a):a=t[2];const l=a;let c;t[3]!==l||t[4]!==o?(c=f=>{o(f),n(f,l)},t[3]=l,t[4]=o,t[5]=c):c=t[5];const u=c;let d;return t[6]!==l||t[7]!==u?(d={openView:u,closeView:l},t[6]=l,t[7]=u,t[8]=d):d=t[8],d}const ZKe=yt(()=>{var e;const t=(e=cg().data)==null?void 0:e.items;if(t){const n=Ws().activeCardId$();if(n)return Mde(t,n)}});function S0t(t){"use forget";const e=D.c(6),{show:n}=t,{openView:s}=eM(),o=X(QKe);let r;e[0]!==o||e[1]!==s||e[2]!==n?(r=n&&o&&i.jsx(JKe,{onClick:()=>{ys().logEventWithStatsig("(Web) FYP Next Card Pill Tapped","chatgpt_web_fyp_next_card_pill_tapped",{card_id:o.id}),s(o.id)},image:o.image,title:o.title}),e[0]=o,e[1]=s,e[2]=n,e[3]=r):r=e[3];let a;return e[4]!==r?(a=i.jsx(In,{children:r}),e[4]=r,e[5]=a):a=e[5],a}function QKe(){return ZKe()}const JKe=t=>{"use forget";const e=D.c(13),{image:n,title:s,onClick:o}=t;let r,a,l,c;e[0]===Symbol.for("react.memo_cache_sentinel")?(r={opacity:0},a={opacity:1},l={opacity:0},c={duration:.15,ease:"easeInOut"},e[0]=r,e[1]=a,e[2]=l,e[3]=c):(r=e[0],a=e[1],l=e[2],c=e[3]);const u=n==null?void 0:n.url,d=n==null?void 0:n.fallback_url;let f;e[4]!==u||e[5]!==d?(f=i.jsx(Tc,{src:u,fallbackSrc:d,className:"h-6 w-6 rounded-sm"}),e[4]=u,e[5]=d,e[6]=f):f=e[6];let m;e[7]!==s?(m=i.jsx("div",{className:"text-sm",children:s}),e[7]=s,e[8]=m):m=e[8];let p;return e[9]!==o||e[10]!==f||e[11]!==m?(p=i.jsxs(wt.button,{initial:r,animate:a,exit:l,transition:c,className:"border-token-border-heavy bg-token-bg-elevated-primary absolute end-1/2 bottom-[calc(var(--composer-overlap-px)+--spacing(6))] flex translate-x-1/2 items-center justify-center gap-2 rounded-4xl border bg-clip-padding px-4 py-2 shadow-[0_4px_16px_0_rgba(0,0,0,0.05)]",onClick:o,children:[f,m]}),e[9]=o,e[10]=f,e[11]=m,e[12]=p):p=e[12],p},XKe=re(me,"3df56a",18,18);function eYe(t){"use forget";var A;const e=D.c(15),{cardId:n}=t,s=te(),{mutate:o}=t2e(n),{mutate:r}=n2e(n),{data:a}=qk(n);let l;e[0]===Symbol.for("react.memo_cache_sentinel")?(l=Ws(),e[0]=l):l=e[0];const c=l,{closeView:u}=eM(),d=(A=a==null?void 0:a.card_actions)!=null?A:[],f=(a==null?void 0:a.reaction)==="like",m=(a==null?void 0:a.reaction)==="dislike",p=a==null?void 0:a.conversation_id,g=p?Lt(p):void 0,{onShare:h}=J_({clientThreadId:p,serverThreadId:g}),_=I=>{I==="remove"?ys().logEventWithStatsig("(Web) FYP Card Reaction Undone","chatgpt_web_fyp_card_reaction_undo",{card_id:n,conversation_id:g}):ys().logEventWithStatsig("(Web) FYP Card Reaction Added","chatgpt_web_fyp_card_reaction",{card_id:n,reaction:I,conversation_id:g})},x=I=>{I==="save"?ys().logEventWithStatsig("(Web) FYP Card Saved","chatgpt_web_fyp_card_saved",{card_id:n,conversation_id:g}):ys().logEventWithStatsig("(Web) FYP Card Saved Undone","chatgpt_web_fyp_card_saved_undo",{card_id:n,conversation_id:g})},y=[{type:"thumbs_up",icon:f?oq:WT,label:s.formatMessage({id:"wN6PjH",defaultMessage:"Like"}),onClick:()=>{const I=f?"remove":"like";o(I),_(I)}},{type:"thumbs_down",icon:m?sq:zT,label:s.formatMessage({id:"FMxx3D",defaultMessage:"Dislike"}),onClick:()=>{const I=m?"remove":"dislike";o(I),_(I)}},{type:"share",icon:Kc,label:s.formatMessage({id:"BNIqUa",defaultMessage:"Share"}),disabled:!g,onClick:()=>{ys().logEventWithStatsig("(Web) FYP Card Shared","chatgpt_web_fyp_card_shared",{card_id:n,conversation_id:g}),h()}},{type:"save",icon:a!=null&&a.is_saved?XKe:ff,label:s.formatMessage({id:"Fy5DRu",defaultMessage:"Save"}),onClick:()=>{const I=a!=null&&a.is_saved?"unsave":"save";r(I),x(I),g&&Zn().invalidateQueries({queryKey:B9().queryKey})},additionalText:a!=null&&a.is_saved?s.formatMessage({id:"5bP9LT",defaultMessage:"Saved as chat"}):void 0}].filter(I=>d.includes(I.type));if(y.length===0)return null;let S;e[1]!==y?(S=i.jsx("div",{className:"text-token-text-secondary flex",children:y.map(tYe)}),e[1]=y,e[2]=S):S=e[2];const C=!m&&"invisible";let w;e[3]!==C?(w=q(C),e[3]=C,e[4]=w):w=e[4];const k=!m;let E;e[5]!==n||e[6]!==u?(E=i.jsx(nYe,{onClick:I=>{u(),c.openFeedbackView({type:zn.OnCard,cardId:n}),I.stopPropagation()}}),e[5]=n,e[6]=u,e[7]=E):E=e[7];let T;e[8]!==w||e[9]!==k||e[10]!==E?(T=i.jsx("div",{className:w,"aria-hidden":k,children:E}),e[8]=w,e[9]=k,e[10]=E,e[11]=T):T=e[11];let M;return e[12]!==S||e[13]!==T?(M=i.jsxs("div",{className:"flex justify-between",children:[S,T]}),e[12]=S,e[13]=T,e[14]=M):M=e[14],M}function tYe(t){return i.jsxs("div",{className:"flex items-center gap-0.5",children:[i.jsx(yo,{icon:t.icon,label:t.label,disabled:t.disabled,onClick:e=>{e.stopPropagation(),t.onClick()}},t.type),t.additionalText&&i.jsx("span",{className:"text-token-text-secondary text-sm",children:t.additionalText})]},t.type)}const nYe=t=>{"use forget";const e=D.c(3),{onClick:n}=t;let s;e[0]===Symbol.for("react.memo_cache_sentinel")?(s=i.jsx(P,{id:"xh3p31",defaultMessage:"Share your thoughts"}),e[0]=s):s=e[0];let o;return e[1]!==n?(o=i.jsx(Se,{onClick:n,color:"secondary",children:s}),e[1]=n,e[2]=o):o=e[2],o};function C0t(t){"use forget";const e=D.c(20),{imageSrc:n,fallbackSrc:s,title:o,cardId:r,hideImage:a}=t,l=X(sYe),c=!a&&l;let u;e[0]!==o?(u=i.jsx("div",{className:"text-3xl",children:o}),e[0]=o,e[1]=u):u=e[1];let d;e[2]!==r?(d=r&&i.jsx(eYe,{cardId:r}),e[2]=r,e[3]=d):d=e[3];let f;e[4]!==u||e[5]!==d?(f=i.jsx("div",{className:"flex flex-col gap-6 pb-4",children:i.jsxs("div",{className:"flex flex-col gap-2",children:[u,d]})}),e[4]=u,e[5]=d,e[6]=f):f=e[6];const m=f;let p;e[7]!==s||e[8]!==c||e[9]!==a||e[10]!==n?(p=a?i.jsx("div",{className:"h-12"}):i.jsx("div",{className:q("relative aspect-[2/1] overflow-hidden rounded-2xl",c&&"aspect-video w-full rounded-none"),children:i.jsx(Tc,{src:n,fallbackSrc:s,className:q("h-full w-full object-cover",c&&"rounded-none")})}),e[7]=s,e[8]=c,e[9]=a,e[10]=n,e[11]=p):p=e[11];const g=p;if(c){let h;e[15]!==m?(h=i.jsx(l0,{horizontalPadding:"standard",horizontalMargin:"none",children:i.jsx(to,{children:m})}),e[15]=m,e[16]=h):h=e[16];let _;return e[17]!==g||e[18]!==h?(_=i.jsxs("div",{className:"relative flex flex-col gap-5",children:[g,h]}),e[17]=g,e[18]=h,e[19]=_):_=e[19],_}else{let h;return e[12]!==m||e[13]!==g?(h=i.jsx(l0,{horizontalPadding:"standard",horizontalMargin:"none",children:i.jsxs(to,{className:"flex flex-col gap-2",children:[g,m]})}),e[12]=m,e[13]=g,e[14]=h):h=e[14],h}}function sYe(){return Ws().isCardViewOpen$()&&lm()}function kq(t){"use forget";const e=D.c(15),{content:n,turnIndex:s}=t,{news:o}=n.widgets,r=n.widgets.news_tab_enabled,a=r&&o.length>0;let l,c;if(e[0]!==s||e[1]!==a?(l=()=>{a&&V.logStructuredEvent(hl,{step:_l.ATLAS_SUPER_WIDGET_RESULTS_ACTION_STEP_SHOW,tab:Zs.ATLAS_SUPER_WIDGET_TAB_NEWS,turnIndex:s})},c=[a,s],e[0]=s,e[1]=a,e[2]=l,e[3]=c):(l=e[2],c=e[3]),v.useEffect(l,c),!r)return null;if(!o||o.length===0){let m;e[4]===Symbol.for("react.memo_cache_sentinel")?(m=Ef(it.News),e[4]=m):m=e[4];const p=m;let g;return e[5]===Symbol.for("react.memo_cache_sentinel")?(g=i.jsx(jd,{IconComponent:p,children:i.jsx(P,{id:"sM5f1q",defaultMessage:"No news results found"})}),e[5]=g):g=e[5],g}let u,d;if(e[6]!==o||e[7]!==s){const m=Xqe(o);u="@w-sm/main:-mx-4 flex flex-col";let p;e[10]!==s?(p=(g,h)=>i.jsx(oYe,{news:g,turnIndex:s},h),e[10]=s,e[11]=p):p=e[11],d=m.map(p),e[6]=o,e[7]=s,e[8]=u,e[9]=d}else u=e[8],d=e[9];let f;return e[12]!==u||e[13]!==d?(f=i.jsx("div",{className:u,children:d}),e[12]=u,e[13]=d,e[14]=f):f=e[14],f}const oYe=v.memo(function(e){"use forget";const n=D.c(19),{news:s,turnIndex:o}=e,r=s[0];let a,l,c,u;if(n[0]!==r||n[1]!==s||n[2]!==o){const m=s.slice(1);c="flex flex-col gap-1",n[7]!==r||n[8]!==o?(u=i.jsx(aj,{news:r,turnIndex:o},r.url),n[7]=r,n[8]=o,n[9]=u):u=n[9],a="ms-4 flex flex-col gap-1";let p;n[10]!==o?(p=g=>i.jsx(aj,{news:g,showDomain:!1,turnIndex:o},g.url),n[10]=o,n[11]=p):p=n[11],l=m.map(p),n[0]=r,n[1]=s,n[2]=o,n[3]=a,n[4]=l,n[5]=c,n[6]=u}else a=n[3],l=n[4],c=n[5],u=n[6];let d;n[12]!==a||n[13]!==l?(d=i.jsx("div",{className:a,children:l}),n[12]=a,n[13]=l,n[14]=d):d=n[14];let f;return n[15]!==c||n[16]!==u||n[17]!==d?(f=i.jsxs("div",{className:c,children:[u,d]}),n[15]=c,n[16]=u,n[17]=d,n[18]=f):f=n[18],f});function aj(t){"use forget";const e=D.c(16),{news:n,showDomain:s,turnIndex:o}=t,r=s===void 0?!0:s,a=te();let l;e[0]!==n.pub_date?(l=n.pub_date?new Date(n.pub_date).getTime()/1e3:null,e[0]=n.pub_date,e[1]=l):l=e[1];const c=l;let u;e[2]!==c||e[3]!==a?(u=Ste(a,c),e[2]=c,e[3]=a,e[4]=u):u=e[4];const d=u;let f;e[5]!==o?(f=()=>{V.logStructuredEvent(hl,{step:_l.ATLAS_SUPER_WIDGET_RESULTS_ACTION_STEP_CLICK,tab:Zs.ATLAS_SUPER_WIDGET_TAB_NEWS,turnIndex:o})},e[5]=o,e[6]=f):f=e[6];const m=f,p=r?"default":"sub-result";let g;return e[7]!==d||e[8]!==m||e[9]!==n.domain||e[10]!==n.snippet||e[11]!==n.thumbnail_url||e[12]!==n.title||e[13]!==n.url||e[14]!==p?(g=i.jsx(Rx,{url:n.url,domain:n.domain,title:n.title,description:n.snippet,theme:p,subscript:d,thumbnail_url:n.thumbnail_url,onLogClick:m}),e[7]=d,e[8]=m,e[9]=n.domain,e[10]=n.snippet,e[11]=n.thumbnail_url,e[12]=n.title,e[13]=n.url,e[14]=p,e[15]=g):g=e[15],g}const rYe=re(me,"0f21eb",20,20);function Eq(t){"use forget";const e=D.c(14),{content:n,turnIndex:s}=t,{videos:o,safety:r}=n.widgets,a=r!=="adult"&&o.length>0;let l,c;if(e[0]!==s||e[1]!==a?(l=()=>{a&&V.logStructuredEvent(hl,{step:_l.ATLAS_SUPER_WIDGET_RESULTS_ACTION_STEP_SHOW,tab:Zs.ATLAS_SUPER_WIDGET_TAB_VIDEOS,turnIndex:s})},c=[a,s],e[0]=s,e[1]=a,e[2]=l,e[3]=c):(l=e[2],c=e[3]),v.useEffect(l,c),r==="adult"){let f;return e[4]===Symbol.for("react.memo_cache_sentinel")?(f=i.jsx(jd,{IconComponent:YD,children:i.jsx(P,{id:"8j9OLb",defaultMessage:"Video results not available"})}),e[4]=f):f=e[4],f}if(!o||o.length===0){let f;e[5]===Symbol.for("react.memo_cache_sentinel")?(f=Ef(it.Videos),e[5]=f):f=e[5];const m=f;let p;return e[6]===Symbol.for("react.memo_cache_sentinel")?(p=i.jsx(jd,{IconComponent:m,children:i.jsx(P,{id:"YgdAWv",defaultMessage:"No videos found"})}),e[6]=p):p=e[6],p}let u;if(e[7]!==s||e[8]!==o){let f;e[10]!==s?(f=m=>i.jsx(v.Fragment,{children:i.jsx(aYe,{video:m,turnIndex:s})},m.url),e[10]=s,e[11]=f):f=e[11],u=o.map(f),e[7]=s,e[8]=o,e[9]=u}else u=e[9];let d;return e[12]!==u?(d=i.jsx("div",{className:"flex flex-col",children:i.jsx("div",{className:"@w-sm/main:-mx-4 -mx-2 flex flex-col gap-1",children:u})}),e[12]=u,e[13]=d):d=e[13],d}function aYe(t){"use forget";const e=D.c(13),{video:n,turnIndex:s}=t;let o;e[0]!==s?(o=()=>{V.logStructuredEvent(hl,{step:_l.ATLAS_SUPER_WIDGET_RESULTS_ACTION_STEP_CLICK,tab:Zs.ATLAS_SUPER_WIDGET_TAB_VIDEOS,turnIndex:s})},e[0]=s,e[1]=o):o=e[1];const r=o;let a;e[2]!==n.duration?(a=n.duration&&i.jsxs("div",{className:"absolute start-1.5 bottom-1.5 inline-flex items-center gap-1.5 rounded-full border-[0.5px] border-white/20 bg-black/20 bg-clip-padding px-1 py-1 text-sm font-normal text-white backdrop-blur-2xl",children:[i.jsx(rYe,{className:"size-4"}),i.jsx("span",{className:"pe-1.5",children:iYe(n.duration)})]}),e[2]=n.duration,e[3]=a):a=e[3];let l;return e[4]!==r||e[5]!==a||e[6]!==n.description||e[7]!==n.domain||e[8]!==n.pub_date||e[9]!==n.thumbnail_url||e[10]!==n.title||e[11]!==n.url?(l=i.jsx(Rx,{url:n.url,domain:n.domain,title:n.title,description:n.description,pub_date:n.pub_date,thumbnail_url:n.thumbnail_url,thumbnailOverlay:a,ThumbnailErrorIcon:wq,onLogClick:r}),e[4]=r,e[5]=a,e[6]=n.description,e[7]=n.domain,e[8]=n.pub_date,e[9]=n.thumbnail_url,e[10]=n.title,e[11]=n.url,e[12]=l):l=e[12],l}function iYe(t){const e=t.split(":");if(e.length===0)return t;const n=e[0],s=/^(\d+)$/.test(n)?String(Number(n)):n;return e[0]=s,e.join(":")}const ij=180,Kb=8,lYe=130;function Tq(t){"use forget";const e=D.c(32),{content:n,turnIndex:s}=t,{images:o,safety:r}=n.widgets,a=v.useRef(null);let l;e[0]===Symbol.for("react.memo_cache_sentinel")?(l=[],e[0]=l):l=e[0];const[c,u]=v.useState(l);let d;e[1]===Symbol.for("react.memo_cache_sentinel")?(d=new Set,e[1]=d):d=e[1];const[f,m]=v.useState(d);let p;e[2]===Symbol.for("react.memo_cache_sentinel")?(p=A=>m(I=>{const j=new Set(I);return j.add(A),j}),e[2]=p):p=e[2];const g=p;let h;if(e[3]!==f||e[4]!==o){let A;e[6]!==f?(A=I=>!f.has(I.content_url),e[6]=f,e[7]=A):A=e[7],h=o.filter(A),e[3]=f,e[4]=o,e[5]=h}else h=e[5];const _=h;let x;e[8]!==_?(x=()=>{if(!a.current)return;const A=a.current.getBoundingClientRect().width,I=[];let j=[],R=0;_.forEach((O,L)=>{const{width:B,height:U}=O.content_size,$=(U?B/U:1)*ij,F=A-R;let z=Math.min($,F);const W=F-z;let Y=W<=0;W>0&&W<lYe&&(z=z+W,Y=!0),j.push({img:O,displayWidth:z}),R=R+(z+Kb),Y?(I.push(j),j=[],R=0):L===_.length-1&&I.push(j)}),u(I)},e[8]=_,e[9]=x):x=e[9];const b=x;let y;e[10]!==_?(y=[_],e[10]=_,e[11]=y):y=e[11],bs(b,y);let S;e[12]!==b?(S=()=>{if(!a.current)return;const A=new ResizeObserver(b);return A.observe(a.current),()=>A.disconnect()},e[12]=b,e[13]=S):S=e[13];let C;e[14]!==_?(C=[_],e[14]=_,e[15]=C):C=e[15],bs(S,C);const w=r!=="adult"&&_.length>0;let k,E;if(e[16]!==s||e[17]!==w?(E=()=>{w&&V.logStructuredEvent(hl,{step:_l.ATLAS_SUPER_WIDGET_RESULTS_ACTION_STEP_SHOW,tab:Zs.ATLAS_SUPER_WIDGET_TAB_IMAGES,turnIndex:s})},k=[w,s],e[16]=s,e[17]=w,e[18]=k,e[19]=E):(k=e[18],E=e[19]),v.useEffect(E,k),r==="adult"){let A;return e[20]===Symbol.for("react.memo_cache_sentinel")?(A=i.jsx(jd,{IconComponent:YD,children:i.jsx(P,{id:"H+Ty5b",defaultMessage:"Image results not available"})}),e[20]=A):A=e[20],A}if(!_||_.length===0){let A;e[21]===Symbol.for("react.memo_cache_sentinel")?(A=Ef(it.Images),e[21]=A):A=e[21];const I=A;let j;return e[22]===Symbol.for("react.memo_cache_sentinel")?(j=i.jsx(jd,{IconComponent:I,children:i.jsx(P,{id:"jtAYXl",defaultMessage:"No images found"})}),e[22]=j):j=e[22],j}let T;if(e[23]!==c||e[24]!==s||e[25]!==_){let A;e[27]!==s||e[28]!==_?(A=(I,j)=>i.jsx("div",{className:"flex",style:{gap:Kb,marginBottom:Kb},children:I.map(R=>{const{img:O,displayWidth:L}=R;return i.jsx("div",{className:"object-cover",style:{width:L,height:ij},children:i.jsx(mYe,{image:O,allImages:_,turnIndex:s,onError:()=>g(O.content_url)})},O.url)})},j),e[27]=s,e[28]=_,e[29]=A):A=e[29],T=c.map(A),e[23]=c,e[24]=s,e[25]=_,e[26]=T}else T=e[26];let M;return e[30]!==T?(M=i.jsx("div",{ref:a,className:"w-full",children:T}),e[30]=T,e[31]=M):M=e[31],M}var jP;const cYe=Tt.div(jP||(jP=_t(["\n  pointer-events-none absolute inset-0 z-10 bg-gradient-to-t\n  from-black/70 via-black/20 to-transparent\n  opacity-0 transition-opacity duration-200\n  group-hover:opacity-100 group-focus-visible:opacity-100\n  select-none flex flex-col justify-end\n"])));var PP;const uYe=Tt.div(PP||(PP=_t(["\n  flex items-center gap-2 text-xs text-white/90 text-clip whitespace-nowrap\n"])));var RP;const dYe=Tt.div(RP||(RP=_t(["\n  text-start text-sm font-medium text-white text-clip whitespace-nowrap\n"])));function fYe(t){"use forget";const e=D.c(16),{image:n}=t,[s,o]=v.useState(!1),r=n.content_url,a=!s&&"loading-results-shimmer";let l;e[0]!==a?(l=q("bg-token-bg-primary rounded-sm overflow-hidden",a),e[0]=a,e[1]=l):l=e[1];let c;e[2]===Symbol.for("react.memo_cache_sentinel")?(c=()=>o(!0),e[2]=c):c=e[2];let u;e[3]!==n.content_url||e[4]!==l?(u=i.jsx(Ns,{url:r,className:"icon-sm",containerClassName:l,size:32,minSize:16,applySizeToImg:!0,onLoad:c}),e[3]=n.content_url,e[4]=l,e[5]=u):u=e[5];let d;e[6]!==n.domain?(d=i.jsx("span",{className:"text-clip whitespace-nowrap",children:n.domain}),e[6]=n.domain,e[7]=d):d=e[7];let f;e[8]!==u||e[9]!==d?(f=i.jsxs(uYe,{children:[u,d]}),e[8]=u,e[9]=d,e[10]=f):f=e[10];let m;e[11]!==n.title?(m=i.jsx(dYe,{children:n.title}),e[11]=n.title,e[12]=m):m=e[12];let p;return e[13]!==f||e[14]!==m?(p=i.jsx(cYe,{children:i.jsxs(vq,{className:"flex flex-col gap-1 px-2.5 pb-2.5",children:[f,m]})}),e[13]=f,e[14]=m,e[15]=p):p=e[15],p}function mYe(t){"use forget";const e=D.c(28),{image:n,allImages:s,turnIndex:o,onError:r}=t,[a,l]=v.useState(!1),c=dx.useStore(),u=!a;let d;e[0]!==s||e[1]!==n||e[2]!==c||e[3]!==o?(d=()=>{V.logStructuredEvent(hl,{step:_l.ATLAS_SUPER_WIDGET_RESULTS_ACTION_STEP_CLICK,tab:Zs.ATLAS_SUPER_WIDGET_TAB_IMAGES,turnIndex:o}),c.setCurrentImage({image:n,source:NE.SuperWidget,imageResults:s,analyticsMetadata:{turnIndex:o}})},e[0]=s,e[1]=n,e[2]=c,e[3]=o,e[4]=d):d=e[4];const f=a?"pointer-events-none opacity-0":"animate-pulse opacity-100";let m;e[5]!==f?(m=q("bg-token-bg-tertiary absolute inset-0 transition-opacity duration-300",f),e[5]=f,e[6]=m):m=e[6];let p;e[7]!==m?(p=i.jsx("div",{className:m}),e[7]=m,e[8]=p):p=e[8];const g=n.content_url,h=n.title;let _;e[9]===Symbol.for("react.memo_cache_sentinel")?(_=()=>l(!0),e[9]=_):_=e[9];const x=a?"opacity-100":"opacity-0";let b;e[10]!==x?(b=q("block h-full w-full transform-gpu object-cover object-[0%_25%] transition-transform duration-300 hover:scale-103",x),e[10]=x,e[11]=b):b=e[11];let y;e[12]!==n.content_size.height||e[13]!==n.content_size.width||e[14]!==n.content_url||e[15]!==n.title||e[16]!==r||e[17]!==b?(y=i.jsx("img",{src:g,alt:h,onLoad:_,onError:r,className:b,width:n.content_size.width,height:n.content_size.height}),e[12]=n.content_size.height,e[13]=n.content_size.width,e[14]=n.content_url,e[15]=n.title,e[16]=r,e[17]=b,e[18]=y):y=e[18];let S;e[19]!==n||e[20]!==a?(S=a&&i.jsx(fYe,{image:n}),e[19]=n,e[20]=a,e[21]=S):S=e[21];let C;return e[22]!==u||e[23]!==y||e[24]!==S||e[25]!==d||e[26]!==p?(C=i.jsxs("button",{className:"border-token-border-light group relative block h-full w-full overflow-hidden rounded-lg border",disabled:u,onClick:d,children:[p,y,S]}),e[22]=u,e[23]=y,e[24]=S,e[25]=d,e[26]=p,e[27]=C):C=e[27],C}function Mq(t){"use forget";const e=D.c(15),{href:n,turnIndex:s,tabType:o}=t;let r;e[0]!==o?(r=o&&gW(o),e[0]=o,e[1]=r):r=e[1];const a=r;let l;e[2]!==a||e[3]!==s?(l=()=>{V.logStructuredEvent(j1,{step:P1.ATLAS_GOOGLE_SEARCH_IT_ACTION_STEP_CLICK,turnIndex:s,fromTab:a})},e[2]=a,e[3]=s,e[4]=l):l=e[4];const c=l;let u,d;e[5]!==a||e[6]!==s?(u=()=>{V.logStructuredEvent(j1,{step:P1.ATLAS_GOOGLE_SEARCH_IT_ACTION_STEP_SHOW,turnIndex:s,fromTab:a})},d=[s,a],e[5]=a,e[6]=s,e[7]=u,e[8]=d):(u=e[7],d=e[8]),v.useEffect(u,d);let f;e[9]===Symbol.for("react.memo_cache_sentinel")?(f={"--super-widget-link-color-hover":"oklch(from var(--interactive-label-accent-default) calc(l - 0.2) clamp(0, calc(c + 0.03), 1.0) h)"},e[9]=f):f=e[9];let m,p;e[10]===Symbol.for("react.memo_cache_sentinel")?(m=i.jsx(P,N({},pYe.googleIt)),p=i.jsx(_p,{}),e[10]=m,e[11]=p):(m=e[10],p=e[11]);let g;return e[12]!==n||e[13]!==c?(g=i.jsxs(Fs,{target:"_self",href:n,onClick:c,className:"flex items-center gap-2 text-sm text-[var(--interactive-label-accent-default)] select-none hover:text-(--super-widget-link-color-hover)",style:f,children:[m,p]}),e[12]=n,e[13]=c,e[14]=g):g=e[14],g}const pYe=we({googleIt:{id:"ZOaw3K",defaultMessage:"Google"}});st("contentOnly");const Bx=st(void 0),gYe=re(xn,"9ad1fa",20,20),hYe=re(xn,"51e280",20,20),_Ye=re(xn,"e12d54",20,20),xYe=re(xn,"2ed08e",20,20),yYe=re(xn,"19fddf",20,20),bYe=re(xn,"e5928d",20,20),vYe=re(xn,"2f9eb9",20,20),SYe=re(xn,"7544e6",20,20),CYe=re(xn,"82a99d",20,20),wYe=re(xn,"18f616",20,20);function kYe(s){var o=s,{selected:t,label:e}=o,n=De(o,["selected","label"]);const r=q(t?"text-[var(--interactive-label-accent-default)]":"text-token-text-tertiary hover:text-token-text-secondary",n.className);return i.jsx(St,{label:e,className:r,children:i.jsx("button",G(N({},n),{className:q("rounded-lg px-6 py-2.5",t&&"bg-[var(--theme-user-msg-bg)]")}))})}function EYe({selectedTab:t,selectTab:e,className:n,textClassName:s,showNewsTab:o=!0}){const r=[{key:it.Chat,label:i.jsx(P,N({},Jf.homeTab)),icon:i.jsx(hYe,{className:"icon justify-self-center"}),selectedIcon:i.jsx(gYe,{className:"icon justify-self-center"})},{key:it.Search,label:i.jsx(P,N({},Jf.searchTab)),icon:i.jsx(SYe,{className:"icon justify-self-center"}),selectedIcon:i.jsx(vYe,{className:"icon justify-self-center"})},{key:it.Images,label:i.jsx(P,N({},Jf.imagesTab)),icon:i.jsx(xYe,{className:"icon justify-self-center"}),selectedIcon:i.jsx(_Ye,{className:"icon justify-self-center"})},{key:it.Videos,label:i.jsx(P,N({},Jf.videosTab)),icon:i.jsx(wYe,{className:"icon justify-self-center"}),selectedIcon:i.jsx(CYe,{className:"icon justify-self-center"})}];return o&&r.push({key:it.News,label:i.jsx(P,N({},Jf.newsTab)),icon:i.jsx(bYe,{className:"icon justify-self-center"}),selectedIcon:i.jsx(yYe,{className:"icon justify-self-center"})}),i.jsx("div",{className:q("mx-px flex h-full items-center gap-0.5",n),id:"super-widget-tab-buttons",children:r.map(({key:a,label:l,icon:c,selectedIcon:u})=>i.jsx(kYe,{label:l,className:q("relative flex-1 sm:flex-none",t===a?"font-medium":"font-normal",s),selected:t===a,onClick:()=>e(a),children:t===a?u:c},a))})}const Jf=we({homeTab:{id:"mYiOeg",defaultMessage:"Home"},searchTab:{id:"GjXttB",defaultMessage:"Search"},imagesTab:{id:"ZY9oIP",defaultMessage:"Images"},videosTab:{id:"C8mH8+",defaultMessage:"Videos"},newsTab:{id:"2QYAL1",defaultMessage:"News"}});function Aq(t){"use forget";const e=D.c(22),{queryText:n,tabType:s,searchIt:o}=t;let r;e[0]!==s?(r=Ef(s),e[0]=s,e[1]=r):r=e[1];const a=r;let l,c;e[2]===Symbol.for("react.memo_cache_sentinel")?(l=Cte(),c=q("flex w-full items-center text-start text-sm",l&&"gap-16 font-semibold"),e[2]=l,e[3]=c):(l=e[2],c=e[3]);let u;e[4]===Symbol.for("react.memo_cache_sentinel")?(u=q("flex min-w-0 items-center",l?"text-token-text-primary":"text-token-text-tertiary max-w-[var(--user-chat-width,70%)]"),e[4]=u):u=e[4];let d;e[5]!==a?(d=!l&&i.jsx(a,{className:"me-2.5 h-4 w-4 shrink-0"}),e[5]=a,e[6]=d):d=e[6];let f;e[7]!==s?(f=AYe(s),e[7]=s,e[8]=f):f=e[8];let m;e[9]!==n?(m={prefix:MYe,query:i.jsx("span",{className:"min-w-0 flex-initial truncate",children:n}),trailingQuote:TYe},e[9]=n,e[10]=m):m=e[10];let p;e[11]!==f||e[12]!==m?(p=i.jsx(P,G(N({},f),{values:m})),e[11]=f,e[12]=m,e[13]=p):p=e[13];let g;e[14]!==d||e[15]!==p?(g=i.jsxs("span",{className:u,children:[d,p]}),e[14]=d,e[15]=p,e[16]=g):g=e[16];let h;e[17]!==o?(h=i.jsx("span",{className:"ms-auto flex-shrink-0",children:o}),e[17]=o,e[18]=h):h=e[18];let _;return e[19]!==g||e[20]!==h?(_=i.jsxs("div",{className:c,children:[g,h]}),e[19]=g,e[20]=h,e[21]=_):_=e[21],_}function TYe(t){return i.jsx("span",{"aria-hidden":"true",className:"shrink-0",children:t})}function MYe(t){return i.jsx("span",{className:"shrink-0",children:t})}function AYe(t){switch(t){case it.Images:return Bh.imageResultsFor;case it.Videos:return Bh.videoResultsFor;case it.News:return Bh.newsResultsFor;case it.Search:default:return Bh.searchResultsFor}}const Bh=we({searchResultsFor:{id:"xeT484",defaultMessage:"<prefix>Search results for </prefix>{query}<trailingQuote></trailingQuote>"},imageResultsFor:{id:"OsLjmT",defaultMessage:"<prefix>Image results for </prefix>{query}<trailingQuote></trailingQuote>"},videoResultsFor:{id:"Egf3CB",defaultMessage:"<prefix>Video results for </prefix>{query}<trailingQuote></trailingQuote>"},newsResultsFor:{id:"MtgcpS",defaultMessage:"<prefix>News results for </prefix>{query}<trailingQuote></trailingQuote>"}});function tM(t,e,n){var s,o,r;return t===0?e[0]?Ss(e[0]):null:(r=(o=(s=n[t])==null?void 0:s.widgets)==null?void 0:o.query)!=null?r:Ss(e[t])}function Fh(t,e,n,s){var a,l,c,u,d;const o=((c=(l=(a=t==null?void 0:t.widgets)==null?void 0:a[n])==null?void 0:l.length)!=null?c:0)>0&&((t==null?void 0:t.widgets.safety)!=="adult"||(t==null?void 0:t.widgets.safe_search_off)!==!0||s===!0),r=((d=(u=e==null?void 0:e[n])==null?void 0:u.length)!=null?d:0)>0&&((e==null?void 0:e.safeSearchOff)!==!0||s===!0);return o||r?0:e&&Vw(e,n)?1:2}function NYe(t,e,n,s,o,r){const a=s[t],l=tM(t,n,s),c=l?o[l]:void 0;switch(e){case it.Search:return Fh(a,c,"navlinks",r);case it.Images:return Fh(a,c,"images");case it.Videos:return Fh(a,c,"videos");case it.News:return Fh(a,c,"news");default:return 2}}function IYe(t){switch(t.safety){case ua.SAFE:return"safe";case ua.ADULT:return"adult";case ua.FLAGGED:return"flagged";case ua.NOT_RUN:return"not_run";case void 0:return}}function jYe(t,e,n,s,o,r){var d,f,m,p,g,h;const a={content_type:vt.SuperWidget,widgets:N({},(f=(d=n[t])==null?void 0:d.widgets)!=null?f:{navlinks:[],images:[],videos:[],news:[],news_tab_enabled:!0})},l=tM(t,o,n),c=l?s[l]:void 0;c&&(c.navlinks.length>0&&(a.widgets.navlinks=c.navlinks,a.widgets.navlinks_ready=((p=(m=c.fetchingStatus)==null?void 0:m.navlinks)==null?void 0:p.status)===ac.DONE||((h=(g=n[t])==null?void 0:g.widgets)==null?void 0:h.navlinks_ready)===!0,a.widgets.safe_search_off=c.safeSearchOff,a.widgets.safety=IYe(c)),c.images.length>0&&(a.widgets.images=c.images),c.videos.length>0&&(a.widgets.videos=c.videos),c.news.length>0&&(a.widgets.news=c.news));let u=!1;switch(e){case it.Search:{const _=t===n.length-1;u=a.widgets.navlinks.length>0&&(a.widgets.safety!=="adult"||a.widgets.safe_search_off!==!0||r===!0||!_)?!1:fh(l,"navlinks");break}case it.Images:u=a.widgets.images.length>0?!1:fh(l,"images");break;case it.Videos:u=a.widgets.videos.length>0?!1:fh(l,"videos");break;case it.News:u=a.widgets.news.length>0?!1:fh(l,"news");break;case it.Chat:break}return[a,u]}function w0t(){const t=hs(),e=X(ln),n=Qp(),s=sge();return t&&!e&&!n&&!s}function Nq(){const t=X(()=>Bx());return typeof t=="boolean"?t:mn("694761886").get("news_tab_enabled",!0)}function PYe({className:t,textClassName:e}){const[n,s]=kf(),o=Nq(),r=Wd.useStore(),a=Jo(),l=X(()=>H3());v.useEffect(()=>{!o&&n===it.News&&s({tabType:it.Chat})},[o,s,n]);function c(u){if(s({tabType:u}),u!==it.Chat){const d=r.getActiveSystemHintType();d&&d!==Ke.Search&&a(null)}V.logStructuredEvent(wte,{tab:gW(n)})}return l?i.jsx(EYe,{selectedTab:n,selectTab:c,className:t,textClassName:e,showNewsTab:o}):null}const RYe={[it.Chat]:()=>null,[it.Search]:XT,[it.Images]:Tq,[it.Videos]:Eq,[it.News]:kq};function OYe({userMessages:t,superWidgetMessageContents:e,tab:n,scrollToMessageId:s,isNewsTabEnabled:o,isAdultSearchEnabled:r}){"use no forget";const a=v.useRef({});function l(f,m="smooth"){const p=a.current[f];p&&p.scrollIntoView({behavior:m,block:"start"})}v.useEffect(()=>{requestAnimationFrame(()=>{if(t.length>0){const f=t[t.length-1];f&&l(f.id,"instant")}})},[]),v.useEffect(()=>{setTimeout(()=>{s&&l(s)},50)},[s]);const c=Za(f=>f.entries);if(n===it.News&&!o)return null;const u=RYe[n],d=t.map((f,m)=>NYe(m,n,t,e,c,r));return i.jsx("div",{className:"@w-sm/main:px-2 flex w-full flex-col gap-4 px-4 pt-2",children:kE(t.length,f=>{if(d[f]!==0&&f!==t.length-1)return null;const m=tM(f,t,e),p=f>0&&d[f-1]===0,g=tq([t[f]]);return i.jsxs("div",{className:"w-full",children:[p&&i.jsx("hr",{className:"border-heavy w-full pb-3.5"}),i.jsxs("div",{className:q("mb-4 flex scroll-mt-6 flex-col gap-4 text-base",p&&"mt-2.5"),ref:h=>{a.current[t[f].id]=h},children:[i.jsx(LYe,{queryText:m,tab:n,turnIndex:f}),g&&i.jsx(nq,{message:g}),!g&&i.jsx(VU,{message:t[f]})]}),(()=>{var b,y;const[h,_]=jYe(f,n,e,c,t,r),x=(f===0||((y=(b=e[f])==null?void 0:b.widgets)==null?void 0:y.query)!==void 0)&&!_;return h&&x?i.jsx(u,{content:h,isAdultSearchEnabled:r,isLatestTurn:f===e.length-1,turnIndex:f,source:"searchTab"}):i.jsx("div",{className:"min-h-[calc(100dvh_-_var(--header-height)_".concat(g?"+_330":"-_120","px)]"),children:d[f]!==2&&i.jsx("div",{className:"result-streaming pulse",children:i.jsx("span",{})})})})()]},f)})})}function LYe(t){"use forget";const e=D.c(11),{queryText:n,turnIndex:s,tab:o}=t;if(!n)return null;let r;e[0]!==n||e[1]!==o?(r=JT(n,o),e[0]=n,e[1]=o,e[2]=r):r=e[2];let a;e[3]!==r||e[4]!==o||e[5]!==s?(a=i.jsx(Mq,{href:r,turnIndex:s,tabType:o}),e[3]=r,e[4]=o,e[5]=s,e[6]=a):a=e[6];let l;return e[7]!==n||e[8]!==a||e[9]!==o?(l=i.jsx(Aq,{queryText:n,tabType:o,searchIt:a}),e[7]=n,e[8]=a,e[9]=o,e[10]=l):l=e[10],l}function k0t(t){"use forget";var B,U,H,$,F,z;const e=D.c(48),{conversation:n,children:s}=t,o=Nq(),[r,a]=kf(),l=X(HC);let c;e[0]!==n?(c=()=>dd(n),e[0]=n,e[1]=c):c=e[1];const u=X(c),{data:d,isLoading:f}=gi(u);let m;e[2]!==d?(m=ui(d),e[2]=d,e[3]=m):m=e[3];const p=m;let g,h;e[4]!==d||e[5]!==a||e[6]!==r?(g=()=>{ui(d)&&r!==it.Chat&&a({tabType:it.Chat})},h=[d,a,r],e[4]=d,e[5]=a,e[6]=r,e[7]=g,e[8]=h):(g=e[7],h=e[8]),v.useEffect(g,h);const[_,x,b]=Ze(n.id,FYe),y=x[x.length-1],S=(U=(B=y==null?void 0:y.content)==null?void 0:B.widgets)==null?void 0:U.news_tab_enabled;let C,w;e[9]!==S?(C=()=>{Bx.set(typeof S=="boolean"?S:void 0)},w=[S],e[9]=S,e[10]=C,e[11]=w):(C=e[10],w=e[11]),v.useEffect(C,w);let k,E;e[12]!==o||e[13]!==a||e[14]!==r?(k=()=>{!o&&r===it.News&&a({tabType:it.Chat})},E=[o,a,r],e[12]=o,e[13]=a,e[14]=r,e[15]=k,e[16]=E):(k=e[15],E=e[16]),v.useEffect(k,E);let T;e[17]!==l||e[18]!==f||e[19]!==o||e[20]!==p||e[21]!==(($=(H=y==null?void 0:y.content)==null?void 0:H.widgets)==null?void 0:$.query)||e[22]!==r||e[23]!==_?(T=()=>{var J,Q,ne,ie,fe;if(f||p)return;const W=_[0],Y=W?Ss(W):null,K=(ne=(Q=(J=y==null?void 0:y.content)==null?void 0:J.widgets)==null?void 0:Q.query)!=null?ne:"",Z=((fe=(ie=K==null?void 0:K.trim())==null?void 0:ie.length)!=null?fe:0)>0?K:Y;Z&&(r==="search"?um(Z,"navlinks",l):r==="images"?um(Z,"images"):r==="videos"?um(Z,"videos"):r==="news"&&o&&um(Z,"news"))},e[17]=l,e[18]=f,e[19]=o,e[20]=p,e[21]=(z=(F=y==null?void 0:y.content)==null?void 0:F.widgets)==null?void 0:z.query,e[22]=r,e[23]=_,e[24]=T):T=e[24];let M;if(e[25]!==l||e[26]!==f||e[27]!==o||e[28]!==p||e[29]!==y||e[30]!==r||e[31]!==_?(M=[r,_,o,y,l,p,f],e[25]=l,e[26]=f,e[27]=o,e[28]=p,e[29]=y,e[30]=r,e[31]=_,e[32]=M):M=e[32],v.useEffect(T,M),!X(BYe))return s;const I=r===it.Chat?"block":"hidden";let j;e[33]!==s||e[34]!==I?(j=i.jsx("div",{id:"mini-chat-content",className:I,children:s}),e[33]=s,e[34]=I,e[35]=j):j=e[35];let R;e[36]!==l||e[37]!==o||e[38]!==b||e[39]!==r||e[40]!==x||e[41]!==_?(R=r!==it.Chat&&(r!==it.News||o)&&i.jsx(OYe,{userMessages:_,superWidgetMessageContents:x.map(DYe),tab:r,scrollToMessageId:b,isNewsTabEnabled:o,isAdultSearchEnabled:l},r),e[36]=l,e[37]=o,e[38]=b,e[39]=r,e[40]=x,e[41]=_,e[42]=R):R=e[42];let O;e[43]!==R?(O=i.jsx(to,{children:R}),e[43]=R,e[44]=O):O=e[44];let L;return e[45]!==j||e[46]!==O?(L=i.jsxs("div",{children:[j,O]}),e[45]=j,e[46]=O,e[47]=L):L=e[47],L}function DYe(t){return t.content}function BYe(){return H3()}function FYe(t){return[ve.getUserMessages(t).filter(UYe),ve.getSuperWidgetMessages(t),t==null?void 0:t.scrollToMessageId]}function UYe(t){var e;return!((e=t.metadata)!=null&&e.is_visually_hidden_from_conversation)}function HYe(t){"use forget";const e=D.c(8),{tab:n,onFetchResults:s}=t;let o;e[0]!==n?(o=Ef(n),e[0]=n,e[1]=o):o=e[1];const r=o;let a;e:{switch(n){case it.Chat:case it.Search:{a=Uh.search;break e}case it.Images:{a=Uh.image;break e}case it.Videos:{a=Uh.video;break e}case it.News:{a=Uh.news;break e}}a=void 0}const l=a;let c;e[2]!==l?(c=i.jsx("div",{className:"text-token-text-secondary text-center",children:i.jsx(P,N({},l))}),e[2]=l,e[3]=c):c=e[3];let u;return e[4]!==r||e[5]!==s||e[6]!==c?(u=i.jsx(Se,{icon:r,iconClassName:"text-token-text-secondary",color:"secondary",onClick:s,children:c}),e[4]=r,e[5]=s,e[6]=c,e[7]=u):u=e[7],u}const Uh=we({search:{id:"dfFwjt",defaultMessage:"Search for results"},image:{id:"eGtFAS",defaultMessage:"Search for images"},video:{id:"SsLPZj",defaultMessage:"Search for videos"},news:{id:"Ev34Wn",defaultMessage:"Search for news"}}),$Ye={content_type:vt.SuperWidget,widgets:{navlinks:[],images:[],videos:[],news:[],news_tab_enabled:!0}};function lj(t){switch(t.safety){case ua.SAFE:return"safe";case ua.ADULT:return"adult";case ua.FLAGGED:return"flagged";case ua.NOT_RUN:return"not_run";case void 0:return}}function GYe(t){switch(t){case it.Search:case it.Chat:return"navlinks";case it.Images:return"images";case it.Videos:return"videos";case it.News:return"news"}}function cj(t,e,n,s,o){if(!t)return!1;switch(e){case"navlinks":return t.navlinks.length===0?!1:n==="adult"?!!s==!!o:!0;case"images":return t.images.length>0;case"videos":return t.videos.length>0;case"news":return t.news.length>0}}function VYe(){"use forget";const t=D.c(1),e=X(zYe);if(typeof e=="boolean")return e;let n;return t[0]===Symbol.for("react.memo_cache_sentinel")?(n=mn("694761886").get("news_tab_enabled",!0),t[0]=n):n=t[0],n}function zYe(){return Bx()}const WYe={[it.Chat]:()=>null,[it.Search]:XT,[it.Images]:Tq,[it.Videos]:Eq,[it.News]:kq};function qYe(t){"use forget";const e=D.c(34),{messages:n,query:s,turnIndex:o,isFinalTurn:r,tab:a,scrollToMessageId:l,hasScrolledOnMount:c}=t,u=o>0;let d;e[0]!==n?(d=tq(n),e[0]=n,e[1]=d):d=e[1];const f=d,m=v.useRef(null);let p;e[2]===Symbol.for("react.memo_cache_sentinel")?(p=function(R){const O=R===void 0?"smooth":R;m.current&&m.current.scrollIntoView({behavior:O,block:"start"})},e[2]=p):p=e[2];const g=p;let h,_;e[3]!==c||e[4]!==r?(h=()=>{requestAnimationFrame(()=>{!c&&r&&g("instant")})},_=[r,c],e[3]=c,e[4]=r,e[5]=h,e[6]=_):(h=e[5],_=e[6]),v.useEffect(h,_);let x;e[7]!==n||e[8]!==l?(x=l&&n.some(j=>j.id===l),e[7]=n,e[8]=l,e[9]=x):x=e[9];const b=x;let y,S;e[10]!==b?(y=()=>{b&&setTimeout(()=>{g("smooth")})},S=[b],e[10]=b,e[11]=y,e[12]=S):(y=e[11],S=e[12]),v.useEffect(y,S);let C;e[13]!==u?(C=u&&i.jsx("hr",{className:"border-heavy w-full pb-3.5"}),e[13]=u,e[14]=C):C=e[14];const w=u&&"mt-2.5";let k;e[15]!==w?(k=q("mb-4 flex scroll-mt-[calc(var(--header-height)+24px)] flex-col gap-4 text-base",w),e[15]=w,e[16]=k):k=e[16];let E;e[17]!==s||e[18]!==a||e[19]!==o?(E=i.jsx(JYe,{queryText:s,tab:a,turnIndex:o}),e[17]=s,e[18]=a,e[19]=o,e[20]=E):E=e[20];let T;e[21]!==f?(T=f&&i.jsx(nq,{message:f}),e[21]=f,e[22]=T):T=e[22];let M;e[23]!==f||e[24]!==n?(M=!f&&i.jsx(VU,{message:n[0]}),e[23]=f,e[24]=n,e[25]=M):M=e[25];let A;e[26]!==k||e[27]!==E||e[28]!==T||e[29]!==M?(A=i.jsxs("div",{ref:m,className:k,children:[E,T,M]}),e[26]=k,e[27]=E,e[28]=T,e[29]=M,e[30]=A):A=e[30];let I;return e[31]!==A||e[32]!==C?(I=i.jsxs(i.Fragment,{children:[C,A]}),e[31]=A,e[32]=C,e[33]=I):I=e[33],I}function KYe(t){"use forget";var j,R;const e=D.c(44),{conversationId:n,messages:s,query:o,isRewrittenQuery:r,turnIndex:a,isFinalTurn:l,tab:c,isAdultSearchEnabled:u}=t,d=WYe[c],f=Za(YYe);let m;e[0]!==c?(m=GYe(c),e[0]=c,e[1]=m):m=e[1];const p=m;let g;e[2]!==s?(g=_a(s),e[2]=s,e[3]=g):g=e[3];const h=g;let _;e[4]!==h?(_=O=>[ve.getRequestId(O,h==null?void 0:h.id),h!=null&&!_7(h.id)&&ve.isMessageTurnEnded(O,h.id)],e[4]=h,e[5]=_):_=e[5];const[x,b]=Ze(n,_),S=Dr(x)&&!b,C=r||a===0||!S;let w;e[6]!==u||e[7]!==C||e[8]!==o||e[9]!==p?(w=()=>{C&&um(o,p,p==="navlinks"?u:void 0)},e[6]=u,e[7]=C,e[8]=o,e[9]=p,e[10]=w):w=e[10];const k=w;let E,T;e[11]!==k||e[12]!==l?(E=()=>{l&&k()},T=[k,l],e[11]=k,e[12]=l,e[13]=E,e[14]=T):(E=e[13],T=e[14]),v.useEffect(E,T);let M=null;const A=o?f[o]:void 0;if(A&&cj(A,p,lj(A),A.safeSearchOff,u)){const L=A.navlinks,B=A.images,U=A.videos,H=A.news,$=A.safeSearchOff;let F;e[15]!==A?(F=lj(A),e[15]=A,e[16]=F):F=e[16];let z;e[17]!==A.images||e[18]!==A.navlinks||e[19]!==A.news||e[20]!==A.safeSearchOff||e[21]!==A.videos||e[22]!==F?(z={content_type:vt.SuperWidget,widgets:{navlinks:L,images:B,videos:U,news:H,news_tab_enabled:!0,safe_search_off:$,safety:F}},e[17]=A.images,e[18]=A.navlinks,e[19]=A.news,e[20]=A.safeSearchOff,e[21]=A.videos,e[22]=F,e[23]=z):z=e[23],M=z}if(e[24]!==M||e[25]!==u||e[26]!==s||e[27]!==p){const O=Cq(s);!M&&O&&cj((j=O.content)==null?void 0:j.widgets,p,O.content.widgets.safety,(R=O.content)==null?void 0:R.widgets.safe_search_off,u)&&(M=O.content),e[24]=M,e[25]=u,e[26]=s,e[27]=p,e[28]=M}else M=e[28];if(M){let O;return e[29]!==d||e[30]!==M||e[31]!==u||e[32]!==l||e[33]!==a?(O=i.jsx("div",{className:"mb-6",children:i.jsx(d,{content:M,isAdultSearchEnabled:u,isLatestTurn:l,turnIndex:a,source:"searchTab"})}),e[29]=d,e[30]=M,e[31]=u,e[32]=l,e[33]=a,e[34]=O):O=e[34],O}if(!S&&(!A||!Vw(A,p))){if(!A||!A.fetchingStatus||!A.fetchingStatus[p]){let B;return e[35]!==k||e[36]!==c?(B=i.jsx(HYe,{tab:c,onFetchResults:k}),e[35]=k,e[36]=c,e[37]=B):B=e[37],B}let L;return e[38]!==d||e[39]!==u||e[40]!==l||e[41]!==a?(L=i.jsx(d,{content:$Ye,isAdultSearchEnabled:u,isLatestTurn:l,turnIndex:a,source:"searchTab"}),e[38]=d,e[39]=u,e[40]=l,e[41]=a,e[42]=L):L=e[42],L}let I;return e[43]===Symbol.for("react.memo_cache_sentinel")?(I=i.jsx("div",{className:"result-streaming pulse",children:i.jsx("span",{})}),e[43]=I):I=e[43],I}function YYe(t){return t.entries}function ZYe(t){"use forget";const e=D.c(11),{conversationId:n,tab:s,isNewsTabEnabled:o,isAdultSearchEnabled:r}=t,[a,l]=Ze(n,QYe),[c,u]=v.useState(!1);if(s===it.News&&!o)return null;let d,f;if(e[0]!==n||e[1]!==a||e[2]!==c||e[3]!==r||e[4]!==l||e[5]!==s){const p=eKe(a);d="@w-sm/main:px-2 flex w-full flex-col gap-4 px-4 pt-2",f=p.map((g,h)=>{var k;const{userMessages:_,assistantMessages:x}=g,b=Cq(x),y=_.length>0?_.find(k3):void 0;let S=y&&Ss(y),C=!1;if(b){const E=(k=b.content.widgets)==null?void 0:k.query;E&&(S=E,C=!0)}if(!S)return null;const w=h===p.length-1;return i.jsxs("div",{ref:()=>u(!0),className:q("w-full",w&&"min-h-[calc(100dvh-var(--header-height)-88px)]"),children:[i.jsx(qYe,{messages:_,query:S,turnIndex:h,isFinalTurn:w,tab:s,scrollToMessageId:l,hasScrolledOnMount:c}),i.jsx("div",{className:"min-h-[36px]",children:i.jsx(KYe,{conversationId:n,messages:x,query:S,isRewrittenQuery:C,turnIndex:h,isFinalTurn:w,tab:s,isAdultSearchEnabled:r})})]},g.id)}),e[0]=n,e[1]=a,e[2]=c,e[3]=r,e[4]=l,e[5]=s,e[6]=d,e[7]=f}else d=e[6],f=e[7];let m;return e[8]!==d||e[9]!==f?(m=i.jsx("div",{className:d,children:f}),e[8]=d,e[9]=f,e[10]=m):m=e[10],m}function QYe(t){return[ve.getConversationTurns(t),t==null?void 0:t.scrollToMessageId]}function JYe(t){"use forget";const e=D.c(11),{queryText:n,turnIndex:s,tab:o}=t;if(!n)return null;let r;e[0]!==n||e[1]!==o?(r=JT(n,o),e[0]=n,e[1]=o,e[2]=r):r=e[2];let a;e[3]!==r||e[4]!==o||e[5]!==s?(a=i.jsx(Mq,{href:r,turnIndex:s,tabType:o}),e[3]=r,e[4]=o,e[5]=s,e[6]=a):a=e[6];let l;return e[7]!==n||e[8]!==a||e[9]!==o?(l=i.jsx(Aq,{queryText:n,tabType:o,searchIt:a}),e[7]=n,e[8]=a,e[9]=o,e[10]=l):l=e[10],l}function E0t(t){"use forget";var j;const e=D.c(31),{conversation:n,children:s}=t,o=VYe(),[r,a]=kf();let l;e[0]!==n?(l=()=>[HC(),dd(n),H3()],e[0]=n,e[1]=l):l=e[1];const[c,u,d]=X(l),{data:f,isLoading:m}=gi(u);let p;e[2]!==f?(p=ui(f),e[2]=f,e[3]=p):p=e[3];const g=p;let h,_;e[4]!==f||e[5]!==a||e[6]!==r?(h=()=>{ui(f)&&r!==it.Chat&&a({tabType:it.Chat})},_=[f,a,r],e[4]=f,e[5]=a,e[6]=r,e[7]=h,e[8]=_):(h=e[7],_=e[8]),v.useEffect(h,_);const x=Ze(n.id,XYe),b=(j=x==null?void 0:x.content.widgets)==null?void 0:j.news_tab_enabled;let y,S;e[9]!==b?(y=()=>{Bx.set(typeof b=="boolean"?b:void 0)},S=[b],e[9]=b,e[10]=y,e[11]=S):(y=e[10],S=e[11]),v.useEffect(y,S);let C,w;if(e[12]!==o||e[13]!==a||e[14]!==r?(C=()=>{!o&&r===it.News&&a({tabType:it.Chat})},w=[o,a,r],e[12]=o,e[13]=a,e[14]=r,e[15]=C,e[16]=w):(C=e[15],w=e[16]),v.useEffect(C,w),!d)return s;const k=r!==it.Chat&&(r!==it.News||o)&&!m&&!g,E=r===it.Chat?"block":"hidden";let T;e[17]!==s||e[18]!==E?(T=i.jsx("div",{id:"mini-chat-content",className:E,children:s}),e[17]=s,e[18]=E,e[19]=T):T=e[19];let M;e[20]!==n.id||e[21]!==c||e[22]!==o||e[23]!==r||e[24]!==k?(M=k&&i.jsx(ZYe,{conversationId:n.id,tab:r,isNewsTabEnabled:o,isAdultSearchEnabled:c},r),e[20]=n.id,e[21]=c,e[22]=o,e[23]=r,e[24]=k,e[25]=M):M=e[25];let A;e[26]!==M?(A=i.jsx(to,{children:M}),e[26]=M,e[27]=A):A=e[27];let I;return e[28]!==T||e[29]!==A?(I=i.jsxs("div",{children:[T,A]}),e[28]=T,e[29]=A,e[30]=I):I=e[30],I}function XYe(t){return ve.getLastSuperWidgetMessage(t)}function T0t({isSharedConversation:t,clientThreadId:e}){const n=xe("2287071194"),s=v.useRef(!1),{clearAllSystemHintModeTriggers:o,setThreadSystemHintMode:r}=Cl(),l=Ze(e,u=>ve.getLastMessageSystemHints(u)).includes(Ke.Tatertot),c=n&&t&&kte()&&l;v.useEffect(()=>{!c||s.current||(o(),r(Ke.Tatertot,!0,{clientThreadId:e}),s.current=!0)},[c,s,e,o,r,l])}const Xf="m",eZe=2e3,tZe="skip_instant_query",nZe="client_reported_search_source",sZe=Ete;function M0t(t){var A,I;const{clientThreadId:e,handleRequestCompletion:n}=t,s=Pt(e),o=v.useRef(!1),r=v.useRef(null),a=X(()=>Lr(s)),l=Kw.useIsEnabled(e),{isLoading:c,data:u}=Uc(),d=Ze(e,ve.hasUserMessage),f=s9(u),[m,p]=wo(),g=Dt(),h=X(()=>Ca()),_=L0(),x=C_(_,"images-app"),b=(A=T9(()=>window.location.pathname))!=null?A:null,y=(I=m.get(Af))!=null?I:m.get(Xf),S=m.get(WM)==="ipl";v.useEffect(()=>{M(!0),o.current=!1,r.current=null},[y]);const C=v.useCallback(({content:j,attachments:R},O,L)=>{const B=xw(),U=R.length>0?{attachments:R}:{};U.system_hints=O.systemHints,Object.keys(B).length>0&&(U.__internal={search_settings:B});const{extraStreamParams:H}=Zw(O.systemHints?O.systemHints:[],{enableMessageFollowups:l});n({promptMessage:Dc(j,U,S?{real_author:U7.IPL}:void 0),requestedModelId:L,eventSource:"url",completionMetadata:O,extraStreamParams:H})},[n,l,S]),w=sZe(),k=!c&&b!=null,E=F9(),[T,M]=v.useState(!0);return v.useEffect(()=>{var pe,_e,Ce,ge,Re;if(!T||o.current)return;const j=(pe=At(e))==null?void 0:pe.mode;if(!k||j==null||(m.has(p_)||m.has(Tte))&&h==null)return;if(!aZe(b)||oZe(b)&&w===void 0||Lt(e)!=null){M(!1);return}const O=(()=>{try{return Object.fromEntries(new URLSearchParams(location.hash.slice(1)).entries())}catch(ke){return{}}})(),L=N(N({},Object.fromEntries(m)),O),{[Af]:B,[Xf]:U,model:H,[tZe]:$,[nZe]:F,[ly]:z}=L,W=(_e=typeof B=="string"?B:null)!=null?_e:typeof U=="string"?U:null,Y=Object.values(Pm).includes(F)?F:void 0,K=z!==void 0;if(!W||!W.trim()){M(!1);return}else r.current=Date.now();const Z=Mte(m,{availableHints:h}),J=x?Array.from(new Set([...Z,Ke.PictureV2])):Z;o.current=!0;const Q=J.find(pc),ne=EG(H!=null?H:null,Q);let fe=E.secFetchSite==="same-site"||E.secFetchSite==="none"&&(((ge=(Ce=document==null?void 0:document.documentElement)==null?void 0:Ce.dataset)==null?void 0:ge.searchExtension)==="1"||E7());if(mt()||(fe=!0),K&&(fe=!1),ne&&(fe=!1),as()&&(fe=!1),!fe){p(ke=>{const he=new URLSearchParams(ke);return he.delete(Af),he.delete(Xf),he.delete(WM),he.delete(ly),he.append("prompt",W),he}),M(!1),K||Ve.addAction("pageload-completion.disallowed",{secFetchSite:E.secFetchSite,referrer:document.referrer});return}const ae=J.includes(Ke.Search);let le=H7(a);ae&&a&&(le=Array.from(a.models.values()).find(ke=>{var he;return(he=ke.enabledTools)==null?void 0:he.includes(Ep.Search)})),((Re=t.prefetchSearchThreadIdPromise)!=null?Re:Promise.resolve(null)).then(ke=>{var Ee;p(Pe=>{const Ae=new URLSearchParams(Pe);return Ae.delete(Af),Ae.delete(Xf),Ae.delete("skip_instant_query"),Ae.delete(ly),le&&Ae.append("model",le.id),Ae});const he=Y!=null?Y:ae?Pm.URL_SEARCH_HINT:void 0;C({content:W,attachments:[]},{conversationMode:j,source:$?void 0:"instant-query",systemHints:J,prefetchIds:ke!=null?[ke]:void 0,searchSource:he},(Ee=le==null?void 0:le.id)!=null?Ee:void 0),ke!=null&&Ve.addFirstTiming("createCompletion.prefetchSearch")})},[c,k,b,x,a,f,C,T,e,w,E.secFetchSite,g,t.prefetchSearchThreadIdPromise,m,p,h]),T&&(t.prefetchSearchThreadIdPromise!=null||m.has(Af)||m.has(Xf)?!0:r.current?d||Date.now()-r.current>eZe?(r.current=null,M(!1),!1):!0:!1)}function oZe(t){return Iq(t)}function Iq(t){return t==null?!1:/^\/g\/[\w-]+$/.test(t)}function rZe(t){const e=t.replace(/\/+$/,"");if(e==="/images")return!0;const n=e.split("/").filter(Boolean);return n.length===2&&Ate(n[0])!=null&&n[1]==="images"}function aZe(t){return t==null?!1:t==="/"||Iq(t)||rZe(t)}const iZe="webrtc-cert-db",lZe=1,Pd="certs",uj="ecdsa-p256:v1",cZe={name:"ECDSA",namedCurve:"P-256",expires:365*24*60*60*1e3};function uZe(){return new Promise((t,e)=>{const n=indexedDB.open(iZe,lZe);n.onupgradeneeded=()=>{const s=n.result;s.objectStoreNames.contains(Pd)||s.createObjectStore(Pd)},n.onsuccess=()=>t(n.result),n.onerror=()=>e(n.error)})}function dZe(t,e){return new Promise((n,s)=>{const r=t.transaction(Pd,"readonly").objectStore(Pd).get(e);r.onsuccess=()=>n(r.result),r.onerror=()=>s(r.error)})}function fZe(t,e,n){return new Promise((s,o)=>{const a=t.transaction(Pd,"readwrite").objectStore(Pd).put(n,e);a.onsuccess=()=>s(),a.onerror=()=>o(a.error)})}function jq(t){const e=Date.now();return t.expires<=e}async function mZe(){try{"storage"in navigator&&"persist"in navigator.storage&&await navigator.storage.persist()}catch(t){Ut.certificateLocalDb.saveFailed(t)}}async function dj(t){const e=await RTCPeerConnection.generateCertificate(t);return Ut.certificateLocalDb.generated(),e}async function pZe(t={}){const{generationParams:e=cZe,disablePersistence:n=!1}=t;if(!n&&"indexedDB"in window)try{await mZe();const s=await uZe(),o=await dZe(s,uj);if(o&&!jq(o))return Ut.certificateLocalDb.hit(),o;const r=await dj(e);return fZe(s,uj,r).catch(a=>{Ut.certificateLocalDb.saveFailed(a)}),r}catch(s){Ut.certificateLocalDb.loadFailed(s)}return dj(e)}let mm,Ua;const P0=st(!0);function fj(t,e){pZe({generationParams:{name:"ECDSA",namedCurve:"P-256"}}).then(n=>{Ua=n}).catch(n=>{t.current||(t.current=!0,Ut.certificateCache.unsupported(n))}).finally(()=>{e.current=!1})}function mj(){try{mm=Pq.createPeerConnection("cache"),P0.set(!1)}catch(t){Ut.peerConnectionCache.unsupported(t)}}const A0t=()=>{const t=v.useRef(!1),e=v.useRef(!1),n=mt(),s=X(P0);return v.useEffect(()=>{n&&!t.current&&Ua===void 0&&(t.current=!0,qM("defer-pc")?di.postTask(()=>fj(e,t)):fj(e,t))},[n]),v.useEffect(()=>{n&&s&&(qM("defer-pc")?di.postTask(()=>mj()):mj())},[s,n]),null};function gZe(t){return!(!t||t.signalingState==="closed"||t.connectionState!=="new"||t.iceConnectionState!=="new")}const Pq={createPeerConnection:t=>(Ua&&jq(Ua)&&(Ut.certificateCache.expired({expires:Ua.expires}),Ua=void 0),Ua===void 0?(Ut.certificateCache.miss({reason:t}),new RTCPeerConnection({bundlePolicy:"max-bundle"})):(Ut.certificateCache.hit({reason:t}),new RTCPeerConnection({bundlePolicy:"max-bundle",certificates:[Ua]}))),getFreshPeerConnection:t=>{try{return gZe(mm)?(Ut.peerConnectionCache.hit(),mm):(Ut.peerConnectionCache.miss(),Pq.createPeerConnection(t))}finally{P0.set(!0),mm=void 0}},resetAll:()=>{mm=void 0,Ua=void 0,P0.set(!0)}},N0t=()=>{const t=ST();return v.useEffect(()=>{x_.set(t?"transceiver":"livekit")},[t]),null};function I0t({children:t}){let e;return v.Children.forEach(t,n=>{if(v.isValidElement(n)&&n.type==="title"){const s=v.Children.toArray(n.props.children)[0];typeof s=="string"&&(e=s)}}),v.useEffect(()=>{if(e!=null){const n=document.title;return document.title=e,()=>{document.title=n}}},[e]),null}var hZe=(t=>(t[t.ADAVisualization=0]="ADAVisualization",t[t.Image=1]="Image",t))(hZe||{});function _Ze({clientThreadId:t}){return dx.useCurrentImage()?i.jsx(xZe,{clientThreadId:t}):null}const xZe=je(()=>Me(()=>import("./1ff16152-ha0qjhfdhvgtw1u1.js"),__vite__mapDeps([349,1,2,3,350,25,351,352])).then(t=>t.ImageLightbox));function j0t(){const t=KM(n=>n.liveRegionAssertive),e=KM(n=>n.liveRegionPolite);return i.jsxs(i.Fragment,{children:[i.jsx("div",{"aria-live":"assertive","aria-atomic":"true",className:"sr-only",id:"live-region-assertive",children:t}),i.jsx("div",{"aria-live":"polite","aria-atomic":"true",className:"sr-only",id:"live-region-polite",children:e})]})}function P0t({clientThreadId:t}){const e=Nte(o=>o.notifications),n=v.useRef(new Set),s=q("pointer-events-auto fixed end-4 top-8 z-100 my-2 flex max-h-[90vh] flex-col-reverse space-y-2 space-y-reverse px-2 py-4",e.length>3&&"overflow-y-auto");return v.useEffect(()=>{e.filter(r=>r.clientThreadId===void 0||t===r.clientThreadId).map(r=>r.id).filter(r=>r!==void 0).forEach(r=>V7(r)),e.forEach(r=>{r.id&&!n.current.has(r.id)&&(ft.logEvent("chatgpt_notification_shown"),V.logEvent("Notifications: Notification Shown to User"),n.current.add(r.id))})},[t,e]),e.length===0||Uo?null:i.jsx("div",{className:s,children:i.jsx(In,{children:e.map(o=>i.jsx(bZe,N({},o),o.id))})})}function yZe({notification:t}){return t.userAvatar!=null?i.jsx(s3,{user:t.userAvatar}):t.icon?i.jsx(Ite,{className:"border-token-secondary bg-token-main-surface-primary text-token-text-primary rounded-full border",IconComponent:t.icon}):i.jsx(I1,{iconName:"openai",className:"border-token-secondary bg-token-main-surface-primary text-token-text-primary rounded-full border"})}function bZe(e){var t=De(e,[]);var l,c;const n=bt(),s=Nt(),o=te(),r=Un(t.clientThreadId),a=()=>{ft.logEvent("chatgpt_notification_clicked"),V.logEvent("Notifications: User Clicked Notification"),t.onClick!=null?t.onClick():r&&xL(n,s,r),t.id&&V7(t.id)};return i.jsxs(wt.div,{onClick:a,className:"border-token-border-default bg-token-bg-primary z-100 inline-flex w-80 cursor-pointer items-center justify-start gap-3 rounded-[1.25rem] border p-4 align-middle shadow-lg","data-ignore-for-page-load":!0,initial:{opacity:0,x:320},animate:{opacity:1,x:0},exit:{opacity:0,x:320},transition:{duration:.5},children:[t.thumbnail?t.thumbnail:i.jsx(yZe,{notification:t}),i.jsxs("div",{className:"inline-flex w-full shrink grow basis-0 flex-col items-start justify-start overflow-hidden",children:[i.jsx("div",{className:"text-token-text-primary w-full truncate text-sm font-medium",children:(l=t.title)!=null?l:o.formatMessage({id:"mpXAeu",defaultMessage:"New chat"})}),t.subtitle&&i.jsx("div",{className:"text-token-text-tertiary w-full truncate text-sm",children:t.subtitle}),((c=t.payload)==null?void 0:c.display_image_url)&&i.jsx("img",{className:"mt-2 h-12 w-12 rounded-xs",src:t.payload.display_image_url,alt:t.payload.image_alt})]})]})}function R0t(){const t=Nt(),e=v.useCallback(function(s){var l,c;const o=s.data.conversation_id;if(!o)return;const r=(c=(l=At(o))==null?void 0:l.title)!=null?c:void 0,a=ve.getGizmoId(At(o));iv({title:r,subtitle:s.title,clientThreadId:o}),Fo(t,a),sl(o)},[t]),n=v.useCallback(function(s){var a,l;const o=s.data.conversation_id;if(!o)return;const r=(l=(a=At(o))==null?void 0:a.title)!=null?l:void 0;iv({title:r,subtitle:s.body,clientThreadId:o})},[]);return v.useEffect(()=>{const s={"new-message":e,"automation-error":n},o=r=>{if(r.data.type in s){const a=r.data.type;s[a](r.data)}};return"serviceWorker"in navigator&&navigator.serviceWorker.addEventListener("message",o),()=>{"serviceWorker"in navigator&&navigator.serviceWorker.removeEventListener("message",o)}},[e,n,t]),null}function O0t(){"use forget";const t=D.c(1);let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=i.jsx("a",{"data-skip-to-content":"",className:"bg-token-main-surface-primary fixed start-1/2 top-1 z-50 mx-auto w-fit -translate-x-1/2 translate-y-[-100lvh] rounded-full px-3 py-2 focus-visible:translate-y-0 print:hidden",href:"#main",children:i.jsx(P,{id:"thread.skipToContent",defaultMessage:"Skip to content"})}),t[0]=e):e=t[0],e}function vZe(){"use forget";const t=D.c(7),e=jn();let n,s;t[0]===Symbol.for("react.memo_cache_sentinel")?(n=ef("/apps"),s=bz("sidebar"),t[0]=n,t[1]=s):(n=t[0],s=t[1]);let o;t[2]!==e.pathname?(o=e.pathname.startsWith("/apps"),t[2]=e.pathname,t[3]=o):o=t[3];let r;t[4]===Symbol.for("react.memo_cache_sentinel")?(r=i.jsx(P,{id:"N6Qn+a",defaultMessage:"Apps"}),t[4]=r):r=t[4];let a;return t[5]!==o?(a=i.jsx(zs,{icon:MT,"data-testid":"apps-button",to:n,state:s,active:o,label:r}),t[5]=o,t[6]=a):a=t[6],a}function Rq(t){"use forget";const e=D.c(8),{inExpandoSidebarSection:n}=t,s=n===void 0?!1:n;let o;e[0]===Symbol.for("react.memo_cache_sentinel")?(o=cDe(),e[0]=o):o=e[0];const r=o,a=te(),l=jn();let c;e[1]!==s||e[2]!==a?(c=s?r?a.formatMessage({id:"gizmo.exploreGPTsEnabled.short.expando",defaultMessage:"Explore GPTs"}):a.formatMessage({id:"gizmo.exploreStoreEnabled.short.expando",defaultMessage:"Explore"}):a.formatMessage({id:"gizmo.exploreStoreEnabled.short",defaultMessage:"GPTs"}),e[1]=s,e[2]=a,e[3]=c):c=e[3];const u=c;let d;e[4]===Symbol.for("react.memo_cache_sentinel")?(d=ef(jte()),e[4]=d):d=e[4];const f=l.pathname==="/gpts";let m;return e[5]!==u||e[6]!==f?(m=i.jsx(zs,{icon:r?nC:MT,"data-testid":"explore-gpts-button",to:d,active:f,onClick:SZe,label:u}),e[5]=u,e[6]=f,e[7]=m):m=e[7],m}function SZe(){V.logEventWithStatsig("Sidebar Click Gizmo","chatgpt_sidebar_click_explore_gpts",{gizmo_id:"explore_gpts"})}const Oq=st({});function pj(t){var e;return(e=Oq()[t])!=null?e:null}function nM(t,e){Oq.set(n=>G(N({},n),{[t]:e}))}const Rd=tn(ls(()=>({dragData:null,conversationDropTargetCount:0}))),Lq=()=>{"use forget";return Rd(TZe)},CZe=t=>{Rd.setState({dragData:t})},wZe=()=>{Rd.setState(t=>{t.dragData=null})},kZe=()=>(Rd.setState(t=>{t.conversationDropTargetCount+=1}),()=>{Rd.setState(t=>{t.conversationDropTargetCount=Math.max(0,t.conversationDropTargetCount-1)})}),EZe=()=>{"use forget";return Rd(MZe)};function TZe(t){return t.dragData}function MZe(t){return t.conversationDropTargetCount>0}function Dq(t,e){"use forget";const n=D.c(13),s=Lq(),o=bt(),r=sk(),a=(s==null?void 0:s.kind)==="conversation"&&s.gizmoId!==e;let l;n[0]===Symbol.for("react.memo_cache_sentinel")?(l=[],n[0]=l):l=n[0],v.useEffect(NZe,l);let c;n[1]!==o||n[2]!==r?(c=async function(g){const{conversation:h,newGizmoId:_,previousGizmoId:x}=g;await(async()=>{nM(_,!0),await r({newGizmoId:_,conversation:h,previousGizmoId:x}),o("/g/".concat(_,"/project"))})()},n[1]=o,n[2]=r,n[3]=c):c=n[3];const u=c;let d;n[4]!==u||n[5]!==a||n[6]!==s||n[7]!==e||n[8]!==t?(d=()=>{if(!a)return;const{conversation:p,gizmoId:g}=s;if(e)return u({conversation:p,newGizmoId:e,previousGizmoId:g});rt(Ec,{onClose:AZe,onSuccess:h=>{h&&(Yn(Ec),u({conversation:p,newGizmoId:h,previousGizmoId:g}),V.logEventWithStatsig("Projects: Create Open","chatgpt_web_projects_create_open",{source:t}))}})},n[4]=u,n[5]=a,n[6]=s,n[7]=e,n[8]=t,n[9]=d):d=n[9];const f=d;let m;return n[10]!==a||n[11]!==f?(m={canDropConversation:a,onDropConversation:f},n[10]=a,n[11]=f,n[12]=m):m=n[12],m}function AZe(){return Yn(Ec)}function NZe(){return kZe()}function Bq(t){"use forget";const e=D.c(31),{hasProjects:n}=t,s=bt(),o=te(),[r,a]=v.useState(!1),{onDropConversation:l,canDropConversation:c}=Dq("sidebar_header_plus");let u;e[0]!==n?(u={hasProjects:n},e[0]=n,e[1]=u):u=e[1];const{eligibleNux:d,announcementKey:f}=PZe(u),{canCreate:m}=XB(),g=X(jZe),h=r&&"bg-token-bg-tertiary";let _;e[2]!==h?(_=q(h),e[2]=h,e[3]=_):_=e[3];let x;e[4]!==c?(x=I=>{c&&(I.preventDefault(),a(!0))},e[4]=c,e[5]=x):x=e[5];let b;e[6]!==c||e[7]!==l?(b=I=>{c&&(I.preventDefault(),I.stopPropagation(),a(!1),l())},e[6]=c,e[7]=l,e[8]=b):b=e[8];let y;e[9]===Symbol.for("react.memo_cache_sentinel")?(y=()=>{a(!1)},e[9]=y):y=e[9];const S=!m,C=(d==null?void 0:d.type)==="badge"?q_:yB;let w;e[10]!==f||e[11]!==g||e[12]!==s?(w=I=>{g&&(I.preventDefault(),I.stopPropagation()),rt(Ec,{onClose:IZe,onSuccess:j=>{j&&(s("/g/".concat(j,"/project")),Yn(Ec))}}),f&&kt(f),V.logEventWithStatsig("Projects: Create Open","chatgpt_web_projects_create_open",{source:"sidebar_row_button"})},e[10]=f,e[11]=g,e[12]=s,e[13]=w):w=e[13];const k=(d==null?void 0:d.type)==="badge"?d.title:void 0;let E;e[14]!==(d==null?void 0:d.type)||e[15]!==n?(E=!n||(d==null?void 0:d.type)==="badge"?i.jsx(P,N({},kn.newProjectButtonWithNoProjects)):i.jsx(P,N({},kn.newProjectButton)),e[14]=d==null?void 0:d.type,e[15]=n,e[16]=E):E=e[16];let T;e[17]!==k||e[18]!==E||e[19]!==_||e[20]!==x||e[21]!==b||e[22]!==S||e[23]!==C||e[24]!==w?(T=i.jsx(kc,{className:_,onDragEnter:x,onDrop:b,onDragLeave:y,disabled:S,icon:C,onClick:w,badge:k,label:E}),e[17]=k,e[18]=E,e[19]=_,e[20]=x,e[21]=b,e[22]=S,e[23]=C,e[24]=w,e[25]=T):T=e[25];const M=T;let A;return e[26]!==m||e[27]!==d||e[28]!==o||e[29]!==M?(A=m?i.jsx(RZe,{nux:d,children:M}):i.jsx(St,{label:o.formatMessage(kn.createProjectDisabledByAdmin),children:M}),e[26]=m,e[27]=d,e[28]=o,e[29]=M,e[30]=A):A=e[30],A}function IZe(){return Yn(Ec)}function jZe(){return Qo()}function PZe({hasProjects:t}){const e=te(),n=xe("2711769261"),s=Ct(We.hasSeenProjectsWebNuxTooltip),o=Ct(We.hasSeenProjectsUpdateNuxTooltip),r=Ct(We.hasSeenProjectsToFree),a=!t&&!r.isLoading&&r.eligible,l=t&&n&&!o.isLoading&&o.eligible,c=!l&&!o.isLoading&&!s.isLoading&&s.eligible,u={announcement:r,description:"",key:We.hasSeenProjectsToFree,title:e.formatMessage(kn.projectsToFreeTitle),type:"badge"},d={announcement:o,description:e.formatMessage(kn.projectsUpdateTooltipDescription),key:We.hasSeenProjectsUpdateNuxTooltip,title:e.formatMessage(kn.projectsUpdateTooltipTitle),type:"tooltip"},f={announcement:s,description:e.formatMessage(kn.projectsNuxTooltipDescription),key:We.hasSeenProjectsWebNuxTooltip,title:e.formatMessage(kn.projectsNuxTooltipTitle),type:"tooltip"};let m=null;return a?m=u:l?m=d:c&&(m=f),{announcementKey:m==null?void 0:m.key,eligibleNux:m,projectUpdateTooltip:d,projectTooltip:f,showProjectUpdateTooltip:l,showProjectTooltip:c}}function RZe(t){"use forget";const e=D.c(10),{children:n,nux:s}=t,o=z7(),r=Ko(),a=Bd();if(!s||r||!a||!o||s.type==="badge"){let u;return e[0]!==n?(u=i.jsx(i.Fragment,{children:n}),e[0]=n,e[1]=u):u=e[1],u}let l;e[2]!==s.key?(l=()=>kt(s.key),e[2]=s.key,e[3]=l):l=e[3];let c;return e[4]!==n||e[5]!==s.description||e[6]!==s.key||e[7]!==s.title||e[8]!==l?(c=i.jsx(hf,{announcementKey:s.key,theme:"bright",side:"right",show:!0,badge:"new",dismissOnOutsideClick:!0,title:s.title,description:s.description,onDismiss:l,sideOffset:-5,children:n}),e[4]=n,e[5]=s.description,e[6]=s.key,e[7]=s.title,e[8]=l,e[9]=c):c=e[9],c}const OZe=t=>v.createElement("svg",N({xmlns:"http://www.w3.org/2000/svg",width:"900.000000pt",height:"900.000000pt",viewBox:"0 0 900.000000 900.000000",preserveAspectRatio:"xMidYMid meet"},t),v.createElement("metadata",null,"\n    Created by potrace 1.10, written by Peter Selinger 2001-2011\n  "),v.createElement("g",{transform:"translate(0.000000,900.000000) scale(0.100000,-0.100000)",fill:"currentColor",stroke:"none"},v.createElement("path",{d:"M1844 8225 c-10 -8 -31 -15 -46 -15 -23 0 -100 -49 -133 -84 -29 -31 -65 -97 -81 -146 -9 -30 -22 -61 -28 -69 -12 -15 -14 -547 -3 -631 12 -91 25 -156 41 -205 9 -27 14 -56 11 -63 -3 -7 1 -25 9 -40 15 -29 45 -129 51 -171 2 -13 8 -28 14 -34 6 -6 11 -25 11 -43 0 -17 7 -37 14 -44 8 -6 20 -28 27 -48 35 -112 261 -524 319 -582 7 -7 83 -102 95 -119 5 -8 60 -64 120 -125 108 -109 188 -177 272 -229 24 -15 45 -38 49 -51 6 -25 -12 -67 -43 -101 -40 -45 -112 -134 -161 -200 -28 -38 -55 -74 -59 -80 -5 -5 -16 -22 -25 -36 -9 -14 -23 -32 -30 -40 -8 -8 -26 -34 -41 -59 -14 -25 -34 -54 -44 -65 -18 -21 -44 -57 -127 -178 -43 -64 -68 -105 -121 -202 -12 -22 -31 -56 -43 -75 -33 -52 -104 -200 -157 -325 -26 -60 -53 -123 -60 -140 -7 -16 -21 -57 -30 -90 -10 -33 -22 -66 -28 -73 -5 -7 -11 -27 -13 -45 -2 -17 -10 -50 -18 -72 -30 -89 -36 -113 -36 -149 0 -20 -9 -55 -20 -77 -12 -22 -18 -44 -15 -49 3 -5 0 -75 -7 -157 -13 -171 4 -540 27 -577 7 -12 15 -43 19 -70 3 -27 10 -54 14 -60 4 -6 16 -38 26 -71 24 -80 33 -101 96 -230 52 -106 107 -204 120 -215 3 -3 17 -23 30 -45 37 -61 127 -181 199 -265 127 -149 507 -514 626 -602 6 -4 37 -30 70 -56 33 -27 83 -64 110 -83 28 -19 52 -37 55 -40 3 -4 24 -17 48 -29 23 -12 44 -26 47 -30 3 -5 19 -11 35 -15 16 -4 51 -17 77 -31 27 -13 55 -24 64 -24 9 0 34 -8 55 -17 59 -26 404 -26 489 0 128 40 228 76 235 86 3 5 22 16 42 25 l37 18 48 -34 c26 -18 57 -41 68 -52 30 -27 165 -116 177 -116 5 0 24 -6 41 -14 18 -7 46 -19 62 -26 92 -39 315 -59 435 -40 158 25 173 29 295 74 134 49 315 165 455 290 95 85 363 361 554 570 49 53 104 109 123 123 l34 26 62 -15 c34 -9 105 -28 156 -42 52 -14 105 -26 117 -26 13 0 25 -4 28 -8 6 -10 273 -33 401 -35 97 -2 294 20 310 34 5 5 17 9 27 9 49 0 240 86 330 148 99 70 146 115 236 227 67 82 67 81 130 210 63 128 80 171 88 220 4 22 11 45 16 52 14 18 21 308 10 378 -19 113 -33 159 -69 230 -42 82 -59 112 -78 135 -41 52 -243 246 -290 280 -27 19 -56 42 -64 50 -9 9 -38 33 -66 55 -84 67 -317 305 -386 395 -83 107 -212 298 -260 385 -9 17 -27 50 -41 75 -14 25 -42 77 -63 115 -21 39 -50 93 -65 120 -16 28 -36 66 -46 85 -11 19 -22 37 -25 40 -3 3 -14 21 -25 40 -10 19 -38 62 -60 95 -43 62 -60 111 -50 143 3 10 30 35 59 57 28 21 57 44 62 49 6 6 30 25 55 41 60 40 312 291 386 385 48 62 119 165 201 296 60 94 182 380 203 474 4 19 13 48 19 63 6 16 11 40 11 54 0 15 6 49 14 77 15 52 30 135 45 241 5 33 14 78 20 100 17 63 14 431 -4 491 -8 27 -15 65 -15 84 0 19 -7 57 -15 84 -8 27 -15 64 -15 82 0 18 -4 35 -9 38 -5 4 -14 29 -20 57 -22 102 -109 250 -181 309 -81 66 -120 80 -229 80 -75 0 -101 -4 -111 -15 -7 -8 -23 -15 -36 -15 -12 0 -29 -7 -38 -15 -8 -8 -18 -15 -21 -15 -4 0 -27 -13 -52 -30 -24 -16 -47 -30 -50 -30 -3 0 -22 -13 -43 -30 -21 -16 -41 -30 -45 -30 -7 0 -85 -58 -95 -71 -3 -3 -34 -30 -70 -59 -76 -62 -213 -202 -308 -314 -37 -43 -87 -103 -112 -132 -25 -29 -58 -71 -75 -94 -16 -22 -55 -72 -85 -110 -73 -91 -202 -292 -255 -395 -8 -16 -28 -52 -44 -80 -17 -27 -39 -70 -51 -95 -12 -25 -26 -52 -31 -60 -5 -8 -12 -22 -15 -30 -3 -8 -12 -31 -21 -50 -16 -38 -36 -85 -60 -140 -38 -90 -50 -105 -84 -108 -22 -2 -50 6 -79 22 -51 28 -185 94 -215 107 -11 4 -41 17 -67 28 -26 12 -53 21 -60 21 -8 0 -18 4 -24 9 -12 11 -142 51 -166 51 -11 0 -28 5 -40 11 -23 13 -221 32 -323 32 -95 -1 -257 -18 -281 -31 -10 -5 -38 -13 -62 -17 -40 -6 -44 -5 -77 31 -19 21 -35 42 -35 47 0 13 -72 131 -82 135 -4 2 -8 12 -8 22 0 10 -4 21 -9 24 -5 4 -30 38 -56 77 -117 177 -372 459 -565 623 -77 66 -314 246 -323 246 -2 0 -44 26 -93 58 -49 33 -118 75 -154 94 -36 19 -81 45 -100 57 -19 11 -42 23 -50 26 -8 4 -41 19 -72 36 -32 16 -66 29 -77 29 -10 0 -24 7 -31 15 -7 8 -20 15 -29 15 -9 0 -25 7 -35 15 -11 8 -27 15 -37 15 -9 0 -22 7 -29 15 -7 8 -24 15 -39 15 -14 1 -37 7 -51 15 -14 8 -35 14 -46 15 -12 0 -27 7 -34 15 -7 9 -30 15 -54 15 -22 0 -50 7 -60 15 -14 11 -46 15 -111 15 -65 0 -97 -4 -111 -15z m340 -630 c11 -8 29 -15 40 -15 24 0 126 -37 141 -51 5 -5 16 -9 24 -9 8 0 22 -6 30 -14 14 -12 65 -42 166 -96 17 -8 83 -52 148 -95 65 -44 126 -84 135 -90 18 -11 65 -50 91 -76 9 -9 31 -26 49 -37 31 -18 226 -204 282 -268 43 -50 150 -184 150 -189 0 -2 26 -39 58 -82 69 -92 90 -127 173 -293 58 -117 114 -256 144 -360 7 -25 18 -57 24 -73 6 -15 15 -58 21 -95 6 -37 16 -82 22 -99 11 -29 9 -35 -12 -58 -20 -21 -32 -25 -84 -25 -34 1 -72 7 -86 15 -14 8 -42 14 -62 15 -34 0 -120 27 -160 50 -10 6 -28 10 -42 10 -22 0 -173 73 -253 123 -21 13 -45 26 -53 30 -36 16 -200 129 -295 202 -186 145 -366 371 -496 623 -28 53 -55 101 -60 107 -5 5 -9 18 -9 28 0 10 -6 31 -13 45 -8 15 -21 42 -30 60 -9 19 -17 41 -17 51 0 9 -6 25 -14 36 -7 11 -16 41 -20 67 -4 26 -11 50 -17 53 -5 4 -9 18 -9 32 0 14 -7 39 -15 56 -22 49 -37 373 -18 410 15 30 38 34 67 12z m4964 2 c11 -13 27 -139 39 -298 3 -48 1 -129 -5 -180 -7 -52 -15 -146 -18 -209 -4 -72 -12 -122 -20 -135 -8 -11 -14 -36 -14 -57 0 -20 -4 -39 -9 -42 -5 -3 -12 -27 -16 -53 -4 -26 -13 -56 -21 -67 -8 -11 -14 -29 -14 -40 0 -16 -45 -116 -80 -176 -5 -8 -11 -22 -14 -30 -6 -16 -9 -21 -76 -125 -25 -38 -47 -72 -50 -75 -3 -3 -37 -45 -75 -95 -94 -121 -324 -351 -402 -402 -36 -24 -63 -9 -133 69 -36 39 -107 114 -157 165 -77 77 -93 98 -93 124 0 28 147 339 212 449 20 34 58 102 102 185 12 22 41 68 64 103 23 35 42 66 42 70 0 4 14 25 30 46 17 22 30 43 30 48 0 4 8 16 18 26 9 11 45 59 79 108 34 49 71 99 83 112 11 12 42 50 68 85 70 90 382 407 402 407 10 0 22 -6 28 -13z m-2448 -1557 c25 -5 79 -14 120 -20 66 -9 119 -23 185 -50 11 -5 43 -16 70 -26 119 -43 287 -144 424 -257 150 -122 293 -274 412 -436 95 -129 299 -441 299 -456 0 -7 9 -20 20 -30 11 -10 20 -25 20 -33 0 -7 8 -26 19 -40 10 -15 31 -49 46 -77 15 -27 41 -72 57 -100 16 -27 36 -63 44 -80 8 -16 21 -39 27 -50 7 -11 39 -65 71 -120 81 -137 174 -283 208 -325 33 -41 38 -47 59 -80 9 -14 26 -36 38 -50 11 -14 24 -29 28 -35 40 -51 216 -244 272 -297 46 -44 71 -75 71 -90 0 -22 -36 -68 -52 -68 -9 0 -83 -55 -103 -76 -5 -6 -30 -26 -55 -45 -97 -74 -317 -319 -358 -399 -108 -210 -105 -201 -112 -380 l-5 -155 -29 -3 c-18 -2 -40 4 -57 17 -16 12 -34 21 -40 21 -7 0 -27 11 -45 25 -18 14 -37 25 -42 25 -5 0 -20 10 -33 21 -13 12 -35 28 -49 37 -54 34 -166 107 -175 115 -70 56 -160 125 -200 152 -27 19 -68 47 -90 63 -61 42 -211 124 -295 161 -41 18 -83 37 -93 42 -10 5 -54 21 -97 35 -44 14 -83 30 -86 35 -3 5 -17 9 -32 9 -15 0 -37 7 -48 15 -12 8 -39 19 -60 24 -22 5 -56 14 -78 20 -21 5 -43 14 -49 20 -6 6 -22 11 -35 11 -13 0 -36 6 -50 14 -15 8 -54 22 -87 31 -33 9 -75 23 -93 31 -18 8 -39 14 -46 14 -7 0 -25 9 -39 20 -14 11 -32 18 -40 15 -7 -3 -20 1 -27 10 -7 8 -27 15 -46 15 -23 0 -37 6 -44 20 -6 11 -20 20 -32 20 -25 0 -137 64 -223 128 -84 62 -250 234 -323 333 -34 46 -73 98 -87 114 -13 17 -25 38 -25 48 0 10 -7 20 -15 23 -8 4 -15 12 -15 19 0 6 -13 31 -30 53 -16 23 -30 46 -30 51 0 5 -6 16 -13 23 -24 26 -77 96 -77 103 0 17 -130 139 -181 171 -52 31 -63 34 -136 34 -73 0 -84 -3 -124 -31 -64 -46 -71 -54 -170 -200 -49 -72 -48 -71 -119 -185 -27 -45 -57 -87 -65 -94 -8 -7 -15 -21 -15 -31 0 -10 -4 -20 -10 -24 -14 -8 -133 -211 -165 -280 -90 -197 -106 -264 -112 -465 -5 -148 10 -255 44 -320 7 -14 13 -31 13 -37 0 -19 110 -194 161 -258 5 -5 25 -30 44 -55 35 -44 85 -103 155 -184 19 -22 67 -72 105 -112 39 -39 165 -170 280 -290 116 -120 252 -259 303 -309 77 -77 92 -97 92 -123 0 -48 -29 -62 -128 -62 -86 0 -184 21 -213 46 -8 8 -23 14 -32 14 -10 0 -36 14 -59 30 -22 17 -47 30 -54 30 -7 0 -14 3 -16 8 -1 4 -25 25 -53 47 -27 22 -72 61 -100 86 -27 26 -82 75 -120 110 -63 57 -137 132 -307 310 -78 82 -136 152 -252 304 -115 152 -143 201 -221 390 -45 107 -68 387 -44 525 5 30 16 98 23 150 16 107 34 190 46 205 5 6 11 28 16 49 4 22 13 51 20 65 8 14 14 34 14 43 0 9 5 20 10 23 6 3 10 13 10 22 0 9 10 37 22 62 60 129 115 240 134 271 11 19 25 46 29 59 9 28 63 119 82 139 7 7 13 18 13 24 0 6 11 26 25 44 14 18 25 35 25 38 0 3 22 38 49 78 26 40 78 118 115 173 37 55 107 159 157 230 49 72 102 148 117 170 76 115 113 155 141 155 16 0 81 -27 145 -60 65 -33 124 -60 132 -60 9 0 48 -11 87 -25 40 -13 113 -30 162 -37 112 -16 432 -16 499 0 60 15 126 43 126 54 0 4 7 8 16 8 25 0 119 97 149 154 30 55 47 150 47 256 0 106 -17 283 -29 305 -20 37 -34 162 -21 190 11 25 12 25 137 25 69 -1 146 -5 171 -10z m-1436 -2361 c14 -11 26 -24 26 -29 0 -15 150 -232 225 -325 81 -101 236 -257 287 -289 18 -11 39 -26 46 -33 8 -8 28 -21 45 -30 18 -9 46 -26 62 -38 40 -29 158 -90 218 -111 26 -9 47 -21 47 -25 0 -5 5 -9 11 -9 11 0 47 -15 125 -51 23 -10 48 -19 57 -19 9 0 18 -4 22 -9 3 -6 26 -13 50 -17 25 -3 48 -10 51 -15 3 -5 13 -9 22 -9 9 0 30 -7 46 -15 16 -8 47 -18 69 -22 23 -3 52 -12 66 -20 14 -7 30 -13 34 -13 15 0 46 -44 47 -64 0 -12 -87 -105 -227 -246 -126 -124 -280 -280 -343 -346 -102 -108 -119 -122 -155 -126 -90 -12 -91 -11 -318 217 -117 116 -244 245 -282 286 -338 358 -460 498 -501 573 -39 71 -46 211 -15 303 12 34 21 70 21 78 0 9 11 40 24 68 13 29 34 75 46 102 66 147 95 203 118 228 31 32 41 33 76 6z m4373 -715 c13 -4 32 -21 43 -40 19 -30 21 -45 17 -176 -3 -136 -19 -238 -37 -238 -4 0 -11 -12 -14 -26 -4 -14 -18 -44 -33 -67 -29 -48 -160 -177 -179 -177 -7 0 -19 -7 -27 -14 -18 -19 -134 -46 -193 -46 -59 0 -137 26 -164 55 -20 21 -22 31 -18 132 3 94 7 116 32 168 16 33 45 80 64 105 83 106 279 263 397 319 23 11 80 13 112 5z m-2192 -632 c17 -10 87 -61 156 -113 70 -52 149 -108 175 -124 68 -43 65 -64 -24 -157 -38 -40 -82 -87 -98 -105 -89 -98 -159 -176 -217 -244 -97 -111 -258 -249 -292 -249 -8 0 -18 -7 -21 -15 -4 -8 -14 -15 -24 -15 -10 0 -25 -7 -34 -15 -8 -8 -22 -15 -32 -15 -10 0 -25 -7 -34 -15 -10 -9 -43 -16 -84 -18 -37 -2 -72 -9 -79 -16 -14 -14 -121 -15 -147 -1 -11 6 -41 12 -68 15 -28 3 -63 12 -78 20 -16 8 -35 15 -41 15 -7 0 -13 4 -13 9 0 5 -13 14 -30 20 -30 10 -36 24 -30 76 1 11 117 135 263 281 254 253 296 297 531 544 142 150 159 159 221 122z"})));function Fq(){return xe("2459568560")}function LZe(){return xe("833571076")}function DZe(){return Fq()}function L0t(){return Fq()&&LZe()}const BZe=({as:t=zs})=>{const e=te();return DZe()?i.jsx(t,{to:"/aardvark",icon:OZe,external:!Ap(),label:e.formatMessage({id:"AardvarkSidebarListItem.aardvark",defaultMessage:"Aardvark"})}):null},FZe=t=>{"use forget";const e=D.c(4),{as:n}=t,s=n===void 0?zs:n,o=L3()||hc(),r=ek();let a;e:{if(!Js){a="/";break e}new URLSearchParams().set(p_,Js),a="/deep-research"}const l=a;if(!o)return null;let c;e[0]===Symbol.for("react.memo_cache_sentinel")?(c=i.jsx(P,{id:"Rq6qbY",defaultMessage:"Research"}),e[0]=c):c=e[0];let u;return e[1]!==s||e[2]!==r?(u=i.jsx(s,{to:l,state:r,onClick:UZe,icon:mi,label:c,"data-testid":"deep-research-sidebar-item"}),e[1]=s,e[2]=r,e[3]=u):u=e[3],u};function UZe(t){Ve.addAction("deep-research-landing-page.sidebar-item-click"),Sk(t,{location:"Sidebar apps list (Deep Research)"})}const D0t=re(me,"730668",20,20),Uq=re(me,"a1bba7",20,20),HZe=Object.freeze(Object.defineProperty({__proto__:null,default:Uq},Symbol.toStringTag,{value:"Module"}));function $Ze(t){"use forget";const e=D.c(8),{ptnSnorlax:n,isPtnLoading:s,currentGizmoId:o,activeThreadId:r}=t,a=bt(),{eligible:l}=Ct(We.hasSeenPotionOnboarding);let c;e[0]===Symbol.for("react.memo_cache_sentinel")?(c=ef("/g/health"),e[0]=c):c=e[0];const u=c;let d;return e[1]!==r||e[2]!==o||e[3]!==s||e[4]!==l||e[5]!==a||e[6]!==n?(d=i.jsx(i.Fragment,{children:(s||!n)&&!hc()?i.jsx(vs,{}):i.jsx(kc,{id:"potion",icon:i.jsx(Uq,{}),highlighted:n!=null&&n.gizmo.id===o&&r==null,label:i.jsx(P,{id:"sidebar.potion",defaultMessage:"Health"}),badge:i.jsx(P,{id:"sidebar.health.newBadge",defaultMessage:"New"}),onClick:f=>{var g;if(hc())return;const m=Kt(VZe),p=(g=n==null?void 0:n.gizmo.id)!=null?g:"potion";if(kl({location:"Sidebar potion project",gizmo_id:p}),V.logEvent("Sidebar Click Gizmo",{gizmo_id:p}),l&&(n!=null&&n.gizmo.id)){m&&(f.preventDefault(),f.stopPropagation()),rt(ii,{onDismiss:GZe,onComplete:async()=>{await kt(We.hasSeenPotionOnboarding),m&&As.setSidebarOpen(!1),Yn(ii),a(u)}});return}a(u)}})}),e[1]=r,e[2]=o,e[3]=s,e[4]=l,e[5]=a,e[6]=n,e[7]=d):d=e[7],d}function GZe(){Yn(ii)}function VZe(){return Qo()}const zZe=re(me,"481f90",25,25),WZe=({as:t=zs})=>i.jsx(t,{to:"/atlas",external:!0,onClick:()=>{kl({location:"Sidebar gizmo list",gizmo_id:"atlas"}),V.logEventWithStatsig("Sidebar Click Atlas","chatgpt_sidebar_click_atlas",{gizmo_id:"atlas"})},icon:zZe,label:i.jsx(P,{id:"n0YPrC",defaultMessage:"Atlas"})});function qZe(){"use forget";const t=D.c(1),e=xe("733205176"),n=xe("1767304360");if(!(e&&n))return null;let o;return t[0]===Symbol.for("react.memo_cache_sentinel")?(o=i.jsx(KZe,{}),t[0]=o):o=t[0],o}function KZe(){const{scheduledAutomations:t}=mB({enabled:!0,staleTimeMs:1/0}),e=te(),n=jn(),s=Pte();return t.length>0?i.jsx(zs,{icon:wc,"data-testid":"schedule-sidebar-button",to:s,active:n.pathname===s,label:e.formatMessage({id:"sidebar.schedulesItem",defaultMessage:"Schedules"})}):null}const YZe=t=>{"use forget";const e=D.c(3),{as:n}=t,s=n===void 0?zs:n,o=Rte(),r=qme();if(!o||r==="DISABLED")return null;const a=tQe;let l;e[0]===Symbol.for("react.memo_cache_sentinel")?(l=i.jsx(P,{id:"EFFUeE",defaultMessage:"Codex"}),e[0]=l):l=e[0];let c;return e[1]!==s?(c=i.jsx(ZZe,{children:i.jsx(s,{to:"/codex",external:!0,onClick:a,icon:Zme,label:l})}),e[1]=s,e[2]=c):c=e[2],c};function ZZe(t){"use forget";const e=D.c(4),{children:n}=t;if(zKe("is_codex_sidebar_tooltip_migrated")){let r;return e[0]!==n?(r=i.jsx(QZe,{children:n}),e[0]=n,e[1]=r):r=e[1],r}let o;return e[2]!==n?(o=i.jsx(JZe,{children:n}),e[2]=n,e[3]=o):o=e[3],o}function QZe(t){"use forget";const e=D.c(17),{children:n}=t,s=mo();let o;e[0]!==s?(o=()=>s==null?void 0:s.serverId$(),e[0]=s,e[1]=o):o=e[1];const r=X(o),a=Ze(s==null?void 0:s.id,ve.getCurrentLeafId),l=s?a:void 0;let c;e[2]!==r||e[3]!==l?(c={serverThreadId:r,leafId:l},e[2]=r,e[3]=l,e[4]=c):c=e[4];const u=Sw(c),{mutate:d}=bg(),{mutate:f}=vg(),m=(u==null?void 0:u.beacon_id)==="codex_sidebar_tooltip";let p,g;e[5]!==u||e[6]!==d||e[7]!==m?(p=()=>{!m||!u||(Ad(u,"show"),d(u.beacon_id))},g=[u,d,m],e[5]=u,e[6]=d,e[7]=m,e[8]=p,e[9]=g):(p=e[8],g=e[9]),v.useEffect(p,g);let h;e[10]!==u||e[11]!==f?(h=()=>{u&&(Ad(u,"dismiss"),f(u.beacon_id),kt(b_),Wo.dismiss())},e[10]=u,e[11]=f,e[12]=h):h=e[12];const _=h;let x;return e[13]!==n||e[14]!==_||e[15]!==m?(x=i.jsx(Hq,{show:m,onDismiss:_,children:n}),e[13]=n,e[14]=_,e[15]=m,e[16]=x):x=e[16],x}function JZe(t){"use forget";const e=D.c(3),{children:n}=t,s=jne(),o=!s.isLoading&&s.eligible;let r;return e[0]!==n||e[1]!==o?(r=i.jsx(Hq,{show:o,onDismiss:XZe,children:n}),e[0]=n,e[1]=o,e[2]=r):r=e[2],r}function XZe(){return kt(b_)}function Hq(t){"use forget";const e=D.c(9),{children:n,onDismiss:s,show:o}=t,r=te();if(!o)return n;let a;e[0]!==r?(a=r.formatMessage({id:"wham.sidebarListItem.nuxTooltip.title",defaultMessage:"Software engineering agent"}),e[0]=r,e[1]=a):a=e[1];let l;e[2]!==r?(l=r.formatMessage({id:"wham.whamSidebarListItem.writeInCodebase",defaultMessage:"Answers questions, runs code, and drafts PRs."}),e[2]=r,e[3]=l):l=e[3];let c;return e[4]!==n||e[5]!==s||e[6]!==a||e[7]!==l?(c=i.jsx(hf,{show:!0,side:"right",theme:"bright",dismissOnOutsideClick:!0,badge:"new",sideOffset:0,className:"xs:max-w-sm! max-w-2xs!",childrenWrapperClassName:"!w-full",announcementKey:b_,title:a,description:l,onDismiss:s,children:n}),e[4]=n,e[5]=s,e[6]=a,e[7]=l,e[8]=c):c=e[8],c}function eQe(){return Qo()}function tQe(t){var e;if(kl({location:"Sidebar gizmo list",gizmo_id:"codex"}),V.logEventWithStatsig("Sidebar Click Gizmo","chatgpt_sidebar_click_codex",{gizmo_id:"codex"}),Kt(eQe)){const n=new URL("/codex",window.location.origin);(e=N1())==null||e.handleLink(n.toString(),"_blank"),t.preventDefault()}}const nQe=t=>{"use forget";var J,Q,ne,ie,fe;const e=D.c(57),{as:n,ptnSidebarProps:s,jobsSidebarProps:o}=t;let r;e[0]===Symbol.for("react.memo_cache_sentinel")?(r=!as()&&Ote(),e[0]=r):r=e[0];const a=r;let l;e[1]!==(s==null?void 0:s.isFirstPartySnorlaxLoading)||e[2]!==(s==null?void 0:s.isPtnEnabled)||e[3]!==(s==null?void 0:s.ptnSnorlax)?(l=!!(s!=null&&s.isPtnEnabled&&((J=s==null?void 0:s.isFirstPartySnorlaxLoading)!=null&&J||((Q=s==null?void 0:s.ptnSnorlax)!=null?Q:null)!=null))||hc(),e[1]=s==null?void 0:s.isFirstPartySnorlaxLoading,e[2]=s==null?void 0:s.isPtnEnabled,e[3]=s==null?void 0:s.ptnSnorlax,e[4]=l):l=e[4];const c=l,u=!!(o!=null&&o.isJobsEnabled&&((ne=o==null?void 0:o.isFirstPartySnorlaxLoading)!=null&&ne||((ie=o==null?void 0:o.jobsSnorlax)!=null?ie:null)!=null));let d;e[5]===Symbol.for("react.memo_cache_sentinel")?(d=xe("713974087"),e[5]=d):d=e[5];let f;e[6]===Symbol.for("react.memo_cache_sentinel")?(f=xe("3194776735"),e[6]=f):f=e[6];let m;e[7]===Symbol.for("react.memo_cache_sentinel")?(m=L3(),e[7]=m):m=e[7];const p=m;let g;e[8]===Symbol.for("react.memo_cache_sentinel")?(g=Je("1570743643").get("menu_sidebar_entrypoint_enabled",!1),e[8]=g):g=e[8];const h=g;let _;e[9]===Symbol.for("react.memo_cache_sentinel")?(_=xe("2064584210"),e[9]=_):_=e[9];const x=_,b=X(Ca);let y;e[10]===Symbol.for("react.memo_cache_sentinel")?(y=!1,e[10]=y):y=e[10];let S;e[11]===Symbol.for("react.memo_cache_sentinel")?(S=xe("3999836663"),e[11]=S):S=e[11];const C=S;let w;e[12]!==b?(w=b==null?void 0:b.some(sQe),e[12]=b,e[13]=w):w=e[13];const k=!!w;let E;e[14]!==k?(E=p&&h&&x&&k||hc(),e[14]=k,e[15]=E):E=e[15];const T=E;let M,A,I;e[16]===Symbol.for("react.memo_cache_sentinel")?(M=!1,A=!1,I=!1,e[16]=M,e[17]=A,e[18]=I):(M=e[16],A=e[17],I=e[18]);let j;e[19]!==n||e[20]!==T?(j=T&&i.jsx(FZe,{as:n}),e[19]=n,e[20]=T,e[21]=j):j=e[21];let R;e[22]!==n?(R=!1,e[22]=n,e[23]=R):R=e[23];let O,L,B,U;e[24]===Symbol.for("react.memo_cache_sentinel")?(O=!1,L=!1,B=!1,U=!1,e[24]=O,e[25]=L,e[26]=B,e[27]=U):(O=e[24],L=e[25],B=e[26],U=e[27]);let H;e[28]!==(s==null?void 0:s.activeThreadId)||e[29]!==(s==null?void 0:s.currentGizmoId)||e[30]!==(s==null?void 0:s.isFirstPartySnorlaxLoading)||e[31]!==(s==null?void 0:s.ptnSnorlax)||e[32]!==c?(H=c&&i.jsx($Ze,{ptnSnorlax:s==null?void 0:s.ptnSnorlax,isPtnLoading:(fe=s==null?void 0:s.isFirstPartySnorlaxLoading)!=null?fe:!1,currentGizmoId:s==null?void 0:s.currentGizmoId,activeThreadId:s==null?void 0:s.activeThreadId}),e[28]=s==null?void 0:s.activeThreadId,e[29]=s==null?void 0:s.currentGizmoId,e[30]=s==null?void 0:s.isFirstPartySnorlaxLoading,e[31]=s==null?void 0:s.ptnSnorlax,e[32]=c,e[33]=H):H=e[33];let $;e[34]!==(o==null?void 0:o.activeThreadId)||e[35]!==(o==null?void 0:o.currentGizmoId)||e[36]!==(o==null?void 0:o.isFirstPartySnorlaxLoading)||e[37]!==(o==null?void 0:o.jobsSnorlax)||e[38]!==u?($=!1,e[34]=o==null?void 0:o.activeThreadId,e[35]=o==null?void 0:o.currentGizmoId,e[36]=o==null?void 0:o.isFirstPartySnorlaxLoading,e[37]=o==null?void 0:o.jobsSnorlax,e[38]=u,e[39]=$):$=e[39];let F;e[40]!==n?(F=C&&i.jsx(YZe,{as:n}),e[40]=n,e[41]=F):F=e[41];let z;e[42]!==n?(z=a&&i.jsx(WZe,{as:n}),e[42]=n,e[43]=z):z=e[43];let W,Y;e[44]!==n?(W=i.jsx(BZe,{as:n}),Y=!1,e[44]=n,e[45]=W,e[46]=Y):(W=e[45],Y=e[46]);let K;e[47]===Symbol.for("react.memo_cache_sentinel")?(K=i.jsx(qZe,{}),e[47]=K):K=e[47];let Z;return e[48]!==j||e[49]!==R||e[50]!==H||e[51]!==$||e[52]!==F||e[53]!==z||e[54]!==W||e[55]!==Y?(Z=i.jsxs(i.Fragment,{children:[M,A,I,j,R,O,L,B,U,H,$,F,z,W,Y,K]}),e[48]=j,e[49]=R,e[50]=H,e[51]=$,e[52]=F,e[53]=z,e[54]=W,e[55]=Y,e[56]=Z):Z=e[56],Z};function sQe(t){return t.systemHint===Js}function B0t(t){"use forget";const e=D.c(17),{showAppsSidebarItem:n,showGPTsSidebarItem:s,showNewProjectButton:o,numLoadingItems:r,ptnSidebarProps:a,jobsSidebarProps:l}=t,c=r===void 0?0:r;let u;e[0]!==n?(u=n&&i.jsx(vZe,{}),e[0]=n,e[1]=u):u=e[1];let d;e[2]!==l||e[3]!==a?(d=i.jsx(nQe,{ptnSidebarProps:a,jobsSidebarProps:l}),e[2]=l,e[3]=a,e[4]=d):d=e[4];let f;e[5]!==s?(f=s&&i.jsx(Rq,{}),e[5]=s,e[6]=f):f=e[6];let m;e[7]!==o?(m=o&&i.jsx(Bq,{hasProjects:!1}),e[7]=o,e[8]=m):m=e[8];let p;e[9]!==c?(p=kE(c,oQe),e[9]=c,e[10]=p):p=e[10];let g;return e[11]!==u||e[12]!==d||e[13]!==f||e[14]!==m||e[15]!==p?(g=i.jsxs("div",{className:"pb-[calc(var(--sidebar-section-margin-top)-var(--sidebar-section-first-margin-top))]",children:[u,d,f,m,p]}),e[11]=u,e[12]=d,e[13]=f,e[14]=m,e[15]=p,e[16]=g):g=e[16],g}function oQe(t){return i.jsx(vs,{size:"long"},t)}function Hl(t){"use forget";const e=D.c(10),{data:n,className:s,size:o,style:r}=t,a=n.avatarUrl,l=n.name;let c;e[0]!==s?(c=q("rounded-full object-cover",s),e[0]=s,e[1]=c):c=e[1];let u;e[2]!==o||e[3]!==r?(u=N({width:o,height:o},r),e[2]=o,e[3]=r,e[4]=u):u=e[4];let d;return e[5]!==n.avatarUrl||e[6]!==n.name||e[7]!==c||e[8]!==u?(d=i.jsx("img",{src:a,alt:l,className:c,style:u}),e[5]=n.avatarUrl,e[6]=n.name,e[7]=c,e[8]=u,e[9]=d):d=e[9],d}function rQe({list:t,baseSize:e=40,variant:n="compact",excludeViewer:s=!0,isActive:o=!1}){var c;const r=(c=Et())==null?void 0:c.normalizedAccountUserId,a=t.filter(u=>s?u.id!==r:!0);if(n==="horizontal-stack"){const d=a.slice(0,3),f=Math.round(e*.33),m=a.length<=3?0:a.length-2;return i.jsx("div",{className:"relative flex shrink-0 items-center",children:d.length>=2?i.jsxs(i.Fragment,{children:[d.map((p,g)=>i.jsx(Hl,{data:p,className:"bg-token-bg-primary gizmo-shadow-stroke relative box-content rounded-full",size:e,style:{padding:2,marginLeft:g===0?0:-f,zIndex:100+(g+1)*10}},p.id)),m===0?null:i.jsx("div",{className:"absolute box-content flex items-center justify-center rounded-full bg-black/60 text-white",style:{width:e,height:e,left:(e+4-f)*2+2,zIndex:100+(d.length+1)*10,fontSize:Math.min(16,Math.round(e*.5-2))},children:m},"overlay")]}):a.length===1?i.jsx(Hl,{data:a[0],className:"bg-token-bg-primary gizmo-shadow-stroke box-content rounded-full",size:e,style:{padding:2}}):t.length>=1?i.jsx(Hl,{data:t[0],className:"bg-token-bg-primary gizmo-shadow-stroke box-content rounded-full",size:e,style:{padding:2}}):null})}const l=Math.round(e*.7);return i.jsx("div",{className:"relative shrink-0",style:{width:e,height:e},children:a.length>=2?i.jsxs(i.Fragment,{children:[i.jsx(Hl,{data:a[0],className:"absolute start-0 top-0",size:l}),i.jsx("div",{className:q("absolute -end-0.5 -bottom-0.5 rounded-full p-0.5",o?"bg-token-bg-secondary":"bg-token-bg-elevated-secondary"),children:i.jsx(Hl,{data:a[1],size:l})})]}):a.length===1?i.jsx(Hl,{data:a[0],className:"gizmo-shadow-stroke",size:e}):t.length>=1?i.jsx(Hl,{data:t[0],className:"gizmo-shadow-stroke",size:e}):null})}function aQe({room:t,baseSize:e=40,variant:n="compact",isActive:s=!1}){const o=X(()=>t.members$().map(r=>({id:r.accountUserId,avatarUrl:r.avatarUrl,name:r.name})));return i.jsx(rQe,{list:o,baseSize:e,variant:n,isActive:s})}const iQe=re(me,"115ad0",20,20);function lQe(t,e){return t in hC&&typeof e=="boolean"}const hC={apps:!1,projects:!0,templates:!1,gpts:!0,chats:!0,favorites:!1,groupChats:!0},cQe=Hn(()=>{const t=uQe(),e={apps:st(t.sectionStates.apps),projects:st(t.sectionStates.projects),templates:st(t.sectionStates.templates),gpts:st(t.sectionStates.gpts),chats:st(t.sectionStates.chats),favorites:st(t.sectionStates.favorites),groupChats:st(t.sectionStates.groupChats)};return{sidebarSectionState:e,expandSection:s=>{e[s].set(!0),gj(e)},collapseSection:s=>{e[s].set(!1),gj(e)}}});function gj(t){const e={apps:t.apps(),projects:t.projects(),templates:t.templates(),gpts:t.gpts(),chats:t.chats(),favorites:t.favorites(),groupChats:t.groupChats()};dQe({sectionStates:e})}function uQe(){try{const t=Je("923802675"),e=G(N({},hC),{gpts:!t.get("are_gpts_collapsed",!1),projects:!t.get("are_projects_collapsed",!1),apps:!t.get("are_apps_collapsed",!1),groupChats:!t.get("are_group_chats_collapsed",!1),chats:!t.get("are_chats_collapsed",!1)}),n=Xs.getCookie(eo.SidebarSections);if(n){const s=JSON.parse(n);if(s&&typeof s.sectionStates=="object"){for(const[o,r]of Object.entries(s.sectionStates))lQe(o,r)&&(t.get("override_cookie_open",!1)?e[o]&&(e[o]=r):e[o]=r);return{sectionStates:e}}}return{sectionStates:e}}catch(t){return Ve.addError(new Error("Failed to load sidebar section state",{cause:t})),{sectionStates:hC}}}function dQe(t){try{Xs.setCookie(eo.SidebarSections,JSON.stringify({sectionStates:t.sectionStates}))}catch(e){Ve.addError(new Error("Failed to save sidebar section state",{cause:e}))}}function ep(t){"use forget";const e=D.c(19),{title:n,id:s,children:o}=t;let r;e[0]===Symbol.for("react.memo_cache_sentinel")?(r=cQe(),e[0]=r):r=e[0];const a=r,l=X(a.sidebarSectionState[s]);let c;e[1]!==s||e[2]!==l?(c=()=>{l?a.collapseSection(s):a.expandSection(s)},e[1]=s,e[2]=l,e[3]=c):c=e[3];const u=c,d=l?"mb-[var(--sidebar-expanded-section-margin-bottom)]":"mb-[var(--sidebar-collapsed-section-margin-bottom)]";let f;e[4]!==d?(f=q("group/sidebar-expando-section",d),e[4]=d,e[5]=f):f=e[5];let m;e[6]!==n?(m=i.jsx(Pk,{"data-no-spacing":!0,children:n}),e[6]=n,e[7]=m):m=e[7];let p;e[8]!==l?(p=l?i.jsx($o,{className:"hidden h-3 w-3 group-hover/sidebar-expando-section:block"}):i.jsx(zi,{className:"h-3 w-3 group-hover/sidebar-expando-section:block"}),e[8]=l,e[9]=p):p=e[9];let g;e[10]!==u||e[11]!==l||e[12]!==m||e[13]!==p?(g=i.jsxs("button",{onClick:u,"aria-expanded":l,className:"text-token-text-tertiary flex w-full items-center justify-start gap-0.5 px-4 py-1.5",children:[m,p]}),e[10]=u,e[11]=l,e[12]=m,e[13]=p,e[14]=g):g=e[14];const h=l&&o;let _;return e[15]!==f||e[16]!==g||e[17]!==h?(_=i.jsxs("div",{className:f,children:[g,h]}),e[15]=f,e[16]=g,e[17]=h,e[18]=_):_=e[18],_}function fQe(){return Dp().hasAccess?i.jsx(mQe,{}):null}function mQe(){const t=Dp(),e=X(()=>t.sortedRooms$()),n=X(()=>t.hasFetchedRooms$()),s=X(()=>t.isFetchingMoreRooms$()),o=X(()=>t.roomsPaginationCursor$()!=null),r=v.useRef(!1);return v.useEffect(()=>{r.current||e.length===0||(r.current=!0,V.logStructuredEvent(yv,{step:bv.GROUP_CHATS_SIDEBAR_ACTIONS_STEP_VIEW_GROUP_CHATS,numberOfGroupChatsShown:e.length}))},[e.length]),e.length===0?null:i.jsxs(ep,{id:"groupChats",title:i.jsx(P,{id:"Job6E6",defaultMessage:"Group chats"}),children:[e.map(a=>i.jsx($q,{room:a},a.id)),n&&o?i.jsx(kc,{disabled:s,onClick:a=>{a.preventDefault(),V.logStructuredEvent(yv,{step:bv.GROUP_CHATS_SIDEBAR_ACTIONS_STEP_CLICK_SEE_MORE,numberOfGroupChatsShown:e.length}),t.fetchMoreRooms$()},children:i.jsx(P,{id:"79QD5f",defaultMessage:"See more"})}):null]})}function $q({room:t}){const n=Lte()===t.id,s=Dp(),o=X(()=>t.name$()),r=X(()=>t.unreadMessageCount$()>0),a=X(()=>t.members$().length===1),l=v.useRef(null),c=i.jsxs("div",{className:"flex items-center space-x-3",children:[r?i.jsx(hj,{}):null,a?i.jsx(iQe,{className:"icon-lg text-token-icon-primary -m-0.5 opacity-[0.15]"}):i.jsx(aQe,{room:t,baseSize:20,isActive:n})]}),u=i.jsxs("div",{className:"flex items-center space-x-2",children:[r?i.jsx(hj,{}):null,i.jsx(pQe,{room:t})]});return i.jsx(zs,{to:"/gg/".concat(t.id),draggable:!1,label:o,trailing:c,active:n,highlightTrailing:u,onClick:()=>{V.logStructuredEvent(yv,{step:bv.GROUP_CHATS_SIDEBAR_ACTIONS_STEP_CLICK_OPEN_GROUP_CHAT,roomId:t.id,isUnread:r})},onMouseOver:()=>{l.current!==t.id&&(l.current=t.id,s.fetchMessages$({roomId:t.id}))}})}function pQe({room:t}){const e=te(),n=v.useRef(null),[s,o]=v.useState(!1),r=X(()=>t.members$().length===1);return i.jsx(Xo,{open:s,onOpenChange:a=>{o(a)},side:"bottom",contentAlign:"start",alignOffset:-8,sideOffset:-4,triggerButton:i.jsx(Gc,{ref:n,"aria-label":e.formatMessage({id:"oUP76h",defaultMessage:"Open group chat options"}),icon:$s}),size:"auto",children:s?i.jsxs(i.Fragment,{children:[i.jsx(ee.Item,{onClick:()=>{rt(tge,{room:t})},icon:tr,children:i.jsx(P,{id:"2O0yli",defaultMessage:"Rename"})}),i.jsx(ee.Item,{onClick:()=>{V.logStructuredEvent(ov,{step:av.GROUP_CHATS_INVITE_ACTIONS_STEP_CLICK_ADD_PEOPLE_BUTTON,source:rv.GROUP_CHATS_INVITE_ACTIONS_SOURCE_ROOM_MENU_ADD_MEMBER,roomId:t.id}),rt(ege,{room:t})},icon:kk,children:i.jsx(P,{id:"qShpjO",defaultMessage:"Add people via group link"})}),r?i.jsx(ee.Item,{onClick:()=>{rt(Xpe,{room:t})},icon:yi,color:"danger",children:i.jsx(P,{id:"wkwt0O",defaultMessage:"Delete"})}):i.jsx(ee.Item,{onClick:()=>{rt(Jpe,{room:t})},icon:MD,color:"danger",children:i.jsx(P,{id:"HxAKnp",defaultMessage:"Leave"})})]}):null})}function hj(){return i.jsx(St,{label:i.jsx(P,{id:"ruB6tr",defaultMessage:"Unread"}),triggerAs:null,side:"top",children:i.jsx("span",{className:"bg-token-interactive-icon-accent-default inline-block h-2 w-2 flex-shrink-0 rounded-full"})})}function Gq(t){"use forget";var C;const e=D.c(30);let n,s,o,r,a,l;e[0]!==t?(C=t,{initialValue:s,onCommit:a,onCancel:r,autoFocus:l,className:n}=C,o=De(C,["initialValue","onCommit","onCancel","autoFocus","className"]),e[0]=t,e[1]=n,e[2]=s,e[3]=o,e[4]=r,e[5]=a,e[6]=l):(n=e[1],s=e[2],o=e[3],r=e[4],a=e[5],l=e[6]);const c=l===void 0?!0:l,[u,d]=v.useState(s),f=v.useRef(!1);let m;e[7]!==s||e[8]!==r||e[9]!==a||e[10]!==u?(m=function(){u.length===0||u===s?r():a(u)},e[7]=s,e[8]=r,e[9]=a,e[10]=u,e[11]=m):m=e[11];const p=m;let g;e[12]===Symbol.for("react.memo_cache_sentinel")?(g=()=>{f.current=!0},e[12]=g):g=e[12];let h;e[13]!==p||e[14]!==r?(h=()=>{f.current?r():p()},e[13]=p,e[14]=r,e[15]=h):h=e[15];let _;e[16]!==n?(_=q("w-full border-none bg-transparent p-0 text-sm focus:ring-0",n),e[16]=n,e[17]=_):_=e[17];let x;e[18]===Symbol.for("react.memo_cache_sentinel")?(x=w=>{d(w.target.value)},e[18]=x):x=e[18];let b;e[19]!==p?(b=w=>{w.key==="Enter"&&s7(w)&&p()},e[19]=p,e[20]=b):b=e[20];let y;e[21]!==c||e[22]!==o||e[23]!==_||e[24]!==b||e[25]!==u?(y=i.jsx("input",G(N({type:"text"},o),{className:_,autoFocus:c,onFocus:gQe,value:u,onChange:x,onClick:Dte,onKeyDown:b})),e[21]=c,e[22]=o,e[23]=_,e[24]=b,e[25]=u,e[26]=y):y=e[26];let S;return e[27]!==h||e[28]!==y?(S=i.jsx(z0,{asChild:!0,onEscapeKeyDown:g,onDismiss:h,children:y}),e[27]=h,e[28]=y,e[29]=S):S=e[29],S}function gQe(t){var e;(e=t.currentTarget)==null||e.select()}const hQe=je(()=>Me(()=>import("./1baca111-jhn06hcx8b9u14tw.js"),__vite__mapDeps([353,1,2,3])).then(t=>t.ProjectDeletionModal));function _Qe({task:t}){const e=pF(t);return t.status===wn.UNDETERMINED?i.jsx(Cd,{percentage:0,thickness:1/10,className:"h-4 w-4 text-blue-400",backgroundStrokeClassName:"stroke-black/10 dark:stroke-white/10",transitionDuration:"0.2s",transitionTimingFunction:"cubic-bezier(0.55, 0, 1, 1)"}):Bte(t)?i.jsx(CNe,{className:"text-token-text-secondary"}):i.jsx(Cd,{percentage:e,thickness:1/10,className:"h-4 w-4 text-blue-400",backgroundStrokeClassName:"stroke-black/10 dark:stroke-white/10",transitionDuration:"".concat((100-e)/100*.2,"s"),transitionTimingFunction:"cubic-bezier(0.55, 0, 1, 1)"})}const _j=re(me,"a8c6bd",20,20);function xQe({text:t}){const e=iE(),[n,s]=v.useState({finalText:t,pos:0,isTyping:!!t});v.useEffect(()=>{s(t?{finalText:t,pos:0,isTyping:!0}:{finalText:"",pos:0,isTyping:!1})},[t]);const o=v.useMemo(()=>Array.from(n.finalText),[n.finalText]),r=v.useMemo(()=>n.finalText?new yQe().humanTypingDelaysQuertyDistance(o):[],[o,n.finalText]);return v.useEffect(()=>{if(!n.isTyping)return;const a=r.map((l,c)=>setTimeout(()=>{e()&&s(u=>G(N({},u),{pos:c+1,isTyping:c+1<o.length}))},l));return()=>a.forEach(clearTimeout)},[n.isTyping,r,o,e]),i.jsx(i.Fragment,{children:n.finalText.slice(0,n.pos)})}class yQe{qwertyDistance(e,n){var c,u;const s={q:[0,0],w:[1,0],e:[2,0],r:[3,0],t:[4,0],y:[5,0],u:[6,0],i:[7,0],o:[8,0],p:[9,0],a:[0,1],s:[1,1],d:[2,1],f:[3,1],g:[4,1],h:[5,1],j:[6,1],k:[7,1],l:[8,1],z:[0,2],x:[1,2],c:[2,2],v:[3,2],b:[4,2],n:[5,2],m:[6,2]},[o,r]=(c=s[e.toLowerCase()])!=null?c:[0,0],[a,l]=(u=s[n.toLowerCase()])!=null?u:[0,0];return Math.abs(o-a)+Math.abs(r-l)}humanTypingDelaysQuertyDistance(e,n=10,s=100){let o=0;const r=[];for(let a=0;a<e.length;++a){let l;if(a>0){const c=this.qwertyDistance(e[a-1],e[a]);c===0?l=this.getRandomInt(n,Math.floor(s/2)):c===1?l=this.getRandomInt(n,Math.floor(s*2/3)):l=this.getRandomInt(n,s)}else l=this.getRandomInt(n,s);r.push(l+o),o+=l}return r}getRandomInt(e,n){return Math.floor(Math.random()*(n-e+1))+e}}function bQe(t){const[e,n]=v.useState(()=>Kt(()=>Fte().some(s=>s.conversationId===t)));return v.useEffect(()=>{var o;let s=(o=At(t))==null?void 0:o.title;return TR.subscribe(r=>{const a=At(t,r),l=a==null?void 0:a.title;l!==s&&((a==null?void 0:a.titleSource)===W7.Generated&&$7()?n(!0):n(!1),s=l)})},[t]),e}function vQe(t){"use forget";const e=D.c(8),{clientThreadId:n,historyConversationResponse:s,shouldShowLoadingShimmer$:o}=t,r=X(o);let a;e[0]!==r?(a=q({"loading-shimmer":r}),e[0]=r,e[1]=a):a=e[1];let l;e[2]!==n||e[3]!==s?(l=i.jsx(SQe,{clientThreadId:n,historyConversationResponse:s}),e[2]=n,e[3]=s,e[4]=l):l=e[4];let c;return e[5]!==a||e[6]!==l?(c=i.jsx("span",{className:a,dir:"auto",children:l}),e[5]=a,e[6]=l,e[7]=c):c=e[7],c}function SQe(t){"use forget";const e=D.c(2),{clientThreadId:n,historyConversationResponse:s}=t,o=Ze(n,CQe),r=bQe(n),a=o!=null?o:s.title;if(r){const l=a!=null?a:"";let c;return e[0]!==l?(c=i.jsx(xQe,{text:l}),e[0]=l,e[1]=c):c=e[1],c}return a}function CQe(t){return t==null?void 0:t.title}function wQe(t){"use forget";const e=D.c(11),{conversationId:n,historyConversationResponse:s,onClose:o}=t;let r;e[0]!==n||e[1]!==s?(r=()=>{var d,f,m;return(m=(f=(d=At(n))==null?void 0:d.title)!=null?f:s.title)!=null?m:""},e[0]=n,e[1]=s,e[2]=r):r=e[2];const[a]=v.useState(r);let l;e[3]!==n||e[4]!==s||e[5]!==o?(l=function(f){Yle(n,f,W7.User),V.logEvent("Rename Thread",{threadId:n,content:f}),(xe("3195513281")?ue.safePost("/conversation/id/{conversation_id}/rename",{parameters:{path:{conversation_id:n}},requestBody:{title:f}}):ue.safePatch("/conversation/{conversation_id}",{parameters:{path:{conversation_id:n}},requestBody:{title:f}})).then(()=>{Fo(Zn(),s.gizmo_id)}),o()},e[3]=n,e[4]=s,e[5]=o,e[6]=l):l=e[6];const c=l;let u;return e[7]!==o||e[8]!==a||e[9]!==c?(u=i.jsx(Gq,{name:"title-editor",initialValue:a,onCommit:c,onCancel:o}),e[7]=o,e[8]=a,e[9]=c,e[10]=u):u=e[10],u}const Vq=je(()=>Me(()=>import("./0edf3897-hr7yxyvq54jqn6lw.js"),__vite__mapDeps([354,1,2,3,158,18,19])).then(t=>t.GizmoConversationOptionsDropdown)),kQe=new Date(2024,9,11,0);function EQe(t){V.logEvent("Load Thread",{threadId:t})}function F0t(t){"use forget";const e=D.c(11),{conversation:n,onOpenChange:s,testId:o,inMainScreen:r,isActiveConversation:a}=t,l=r===void 0?!1:r,c=te();if(!mt())return null;let d;e[0]!==c?(d=c.formatMessage({id:"idEcXk",defaultMessage:"Open conversation options"}),e[0]=c,e[1]=d):d=e[1];let f;e[2]!==d||e[3]!==o?(f=i.jsx(Gc,{"data-testid":o,className:"m-0","data-prevent-default":!0,"aria-label":d,icon:$s}),e[2]=d,e[3]=o,e[4]=f):f=e[4];let m;return e[5]!==n||e[6]!==l||e[7]!==a||e[8]!==s||e[9]!==f?(m=i.jsx(Vq,{conversation:n,onOpenChange:s,inMainScreen:l,isActiveConversation:a,children:f}),e[5]=n,e[6]=l,e[7]=a,e[8]=s,e[9]=f,e[10]=m):m=e[10],m}const Fx=v.memo(TQe);function TQe(t){"use forget";var gt,ht,Zt,It;const e=D.c(108),{conversation:n,className:s,hideOverflowMenu:o,isActive:r,elementRef:a,testId:l,onSelect:c,icon:u,isStarred:d}=t,f=o===void 0?!1:o,m=te(),[p,g]=v.useState(!1),h=Tn(),_="owner"in n?(gt=n.owner)==null?void 0:gt.user_id:null,x=_==null||_===(h==null?void 0:h.normalizedAccountUserId);let b;e[0]===Symbol.for("react.memo_cache_sentinel")?(b=xe("232791851"),e[0]=b):b=e[0];const y=b;let S,C;e[1]!==n.async_status||e[2]!==n.id?(S=()=>{if(n.id!=null&&n.async_status!=null){const lt=Pt(n.id);CR(lt,{source:Ka.SERVER,value:n.async_status})}},C=[n.id,n.async_status],e[1]=n.async_status,e[2]=n.id,e[3]=S,e[4]=C):(S=e[3],C=e[4]),v.useEffect(S,C);let w;e[5]!==n.id?(w=()=>{if(n.id===void 0)return null;const lt=Pt(n.id);return zd(lt)},e[5]=n.id,e[6]=w):w=e[6];const k=w;let E;e[7]!==k?(E=()=>{var lt,Mt;return(Mt=(lt=k())==null?void 0:lt.value)!=null?Mt:null},e[7]=k,e[8]=E):E=e[8];const T=E;let M;e[9]!==k?(M=()=>{var lt,Mt;return(Mt=(lt=k())==null?void 0:lt.source)!=null?Mt:null},e[9]=k,e[10]=M):M=e[10];const A=M,I=Ze(n.id,ve.getRequestId);let j;e[11]!==I?(j=()=>Hte(I),e[11]=I,e[12]=j):j=e[12];const R=j;let O;e[13]!==n.update_time?(O=Y0(new Date,new Date((ht=n.update_time)!=null?ht:0)),e[13]=n.update_time,e[14]=O):O=e[14];const L=O<UL(U1.Standard);let B;e[15]!==n.update_time?(B=n.update_time&&Ute(new Date(n.update_time),kQe),e[15]=n.update_time,e[16]=B):B=e[16];const U=B;let H;e[17]!==T||e[18]!==L?(H=()=>(T()===Nn.STREAMING||T()===Nn.REALTIME)&&L,e[17]=T,e[18]=L,e[19]=H):H=e[19];const $=H;let F;e[20]!==T||e[21]!==U||e[22]!==r||e[23]!==R?(F=()=>!!(y&&!r&&!R()&&U&&T()===Nn.UNREAD&&!ln()),e[20]=T,e[21]=U,e[22]=r,e[23]=R,e[24]=F):F=e[24];const z=F;let W;e[25]!==T||e[26]!==$||e[27]!==r||e[28]!==R?(W=()=>y&&!r&&(R()||$()||T()===Nn.REALTIME_BUSY),e[25]=T,e[26]=$,e[27]=r,e[28]=R,e[29]=W):W=e[29];const Y=W,K=y&&!r;let Z;e[30]!==$||e[31]!==r||e[32]!==R||e[33]!==Y?(Z=()=>!Y()&&y&&!r&&(R()||$()),e[30]=$,e[31]=r,e[32]=R,e[33]=Y,e[34]=Z):Z=e[34];const J=Z,Q=VL(n.id)&&!r,ne=v.useRef(!1);let ie,fe;e[35]!==A||e[36]!==T||e[37]!==n.id||e[38]!==r||e[39]!==R?(ie=()=>{if(!ne.current&&xe("3922476776"))return r?Ar(()=>(R(),T()===Nn.UNREAD),async lt=>{lt&&(A()===Ka.SERVER&&(ne.current=!0,await ue.safePost("/conversation/{conversation_id}/async-status",{parameters:{path:{conversation_id:n.id}},requestBody:{status:null}})),yd(n.id,null),ne.current=!1)},{fireImmediately:!0}):Ar(()=>(R(),A()===Ka.CLIENT&&T()===Nn.UNREAD),async lt=>{lt&&(ne.current=!0,await ue.safePost("/conversation/{conversation_id}/async-status",{parameters:{path:{conversation_id:n.id}},requestBody:{status:T()}}),yd(n.id,{value:Nn.UNREAD,source:Ka.SERVER}),ne.current=!1)})},fe=[r,n.id,T,A,R],e[35]=A,e[36]=T,e[37]=n.id,e[38]=r,e[39]=R,e[40]=ie,e[41]=fe):(ie=e[40],fe=e[41]),v.useEffect(ie,fe);let ae,le;e[42]!==n.id||e[43]!==r||e[44]!==x?(ae=()=>$te(S0e,{editTitle:lt=>{const{serverThreadId:Mt}=lt;x&&(Mt?Mt===n.id:r)&&g(!0)}}),le=[n.id,r,x],e[42]=n.id,e[43]=r,e[44]=x,e[45]=ae,e[46]=le):(ae=e[45],le=e[46]),v.useEffect(ae,le);let pe;e[47]!==n.conversation_template_id?(pe=()=>{var lt,Mt;if(n.conversation_template_id!=null)return(Mt=(lt=Gte().data)==null?void 0:lt.gizmos.find(Yt=>Yt.resource.gizmo.id===n.conversation_template_id))==null?void 0:Mt.resource},e[47]=n.conversation_template_id,e[48]=pe):pe=e[48];const _e=X(pe),Ce=v.useRef(null);let ge;e[49]!==_e||e[50]!==n.gizmo_id?(ge=n_(n.gizmo_id)&&_e?_e.gizmo:void 0,e[49]=_e,e[50]=n.gizmo_id,e[51]=ge):ge=e[51];const Re=ge,ke=n.gizmo_id&&Bs(n.gizmo_id)&&"owner"in n?{id:n.gizmo_id}:void 0,he="owner"in n?(Zt=n.owner)==null?void 0:Zt.user_id:void 0,Ee=(It=Et())==null?void 0:It.normalizedAccountUserId,Pe=EZe(),Ae=v.useRef(null),de=zs;let oe;e[52]!==n.gizmo_id||e[53]!==Pe||e[54]!==p||e[55]!==d?(oe=!p&&Pe&&yA(n.gizmo_id,d),e[52]=n.gizmo_id,e[53]=Pe,e[54]=p,e[55]=d,e[56]=oe):oe=e[56];let se;e[57]!==n||e[58]!==d?(se=lt=>{var nn;if(!yA(n.gizmo_id,d))return;const Mt=lt.currentTarget,Yt=Ce.current;Yt&&(Yt.style.display="none"),Mt.style.opacity="0.99",Yt&&requestAnimationFrame(()=>{Yt.style.display="",Mt.style.opacity="0"}),lt.dataTransfer.effectAllowed="move",CZe({kind:"conversation",conversation:n,gizmoId:(nn=n.gizmo_id)!=null?nn:null})},e[57]=n,e[58]=d,e[59]=se):se=e[59];const Oe=MQe;let Ne;e[60]!==a?(Ne=q7(a,Ae),e[60]=a,e[61]=Ne):Ne=e[61];const ze=ia(n.id,{gizmo:Re?{gizmo:Re}:void 0,project:ke||void 0,ownerUserId:he,accountUserId:Ee});let Qe;e[62]!==n.id||e[63]!==r||e[64]!==c?(Qe=lt=>{lt.metaKey||lt.ctrlKey||!r&&!lt.defaultPrevented&&(EQe(n.id),c==null||c())},e[62]=n.id,e[63]=r,e[64]=c,e[65]=Qe):Qe=e[65];let Le;e[66]===Symbol.for("react.memo_cache_sentinel")?(Le=()=>{g(!0)},e[66]=Le):Le=e[66];const ce=!!d;let be;e[67]!==K||e[68]!==n.id||e[69]!==r||e[70]!==p||e[71]!==Y||e[72]!==z||e[73]!==ce?(be=i.jsx(AQe,{conversationId:n.id,isActive:r,isEditingTitle:p,isStarred:ce,canShowAsyncTaskProgressCircle:K,shouldShowUnreadNotification$:z,shouldShowLoadingSpinner$:Y}),e[67]=K,e[68]=n.id,e[69]=r,e[70]=p,e[71]=Y,e[72]=z,e[73]=ce,e[74]=be):be=e[74];let He;e[75]!==n||e[76]!==f||e[77]!==m||e[78]!==r||e[79]!==p||e[80]!==l?(He=!f&&!p&&i.jsx(Vq,{conversation:n,isActiveConversation:r,onOpenChange:lt=>{lt&&V.logEvent("Conversation History Item Open Menu",{conversationId:n.id})},children:i.jsx(Gc,{ref:Ce,"data-testid":"".concat(l,"-options"),"aria-label":m.formatMessage({id:"idEcXk",defaultMessage:"Open conversation options"}),icon:$s})}),e[75]=n,e[76]=f,e[77]=m,e[78]=r,e[79]=p,e[80]=l,e[81]=He):He=e[81];let Ge;e[82]!==n||e[83]!==p||e[84]!==J?(Ge=!p&&i.jsx(vQe,{clientThreadId:n.id,historyConversationResponse:n,shouldShowLoadingShimmer$:J}),e[82]=n,e[83]=p,e[84]=J,e[85]=Ge):Ge=e[85];let nt;e[86]!==n.id||e[87]!==Q?(nt=Q&&i.jsx(GL,{threadId:n.id}),e[86]=n.id,e[87]=Q,e[88]=nt):nt=e[88];let at;e[89]!==n||e[90]!==p?(at=p?i.jsx(wQe,{conversationId:n.id,historyConversationResponse:n,onClose:()=>{g(!1)}}):null,e[89]=n,e[90]=p,e[91]=at):at=e[91];let Xe;return e[92]!==de||e[93]!==s||e[94]!==u||e[95]!==r||e[96]!==oe||e[97]!==se||e[98]!==Oe||e[99]!==Ne||e[100]!==ze||e[101]!==Qe||e[102]!==be||e[103]!==He||e[104]!==Ge||e[105]!==nt||e[106]!==at?(Xe=i.jsxs(de,{icon:u,draggable:oe,onDragStart:se,onDragEnd:Oe,ref:Ne,active:r,className:s,to:ze,onClick:Qe,onDoubleClick:Le,trailing:be,highlightTrailing:He,label:Ge,children:[nt,at]}),e[92]=de,e[93]=s,e[94]=u,e[95]=r,e[96]=oe,e[97]=se,e[98]=Oe,e[99]=Ne,e[100]=ze,e[101]=Qe,e[102]=be,e[103]=He,e[104]=Ge,e[105]=nt,e[106]=at,e[107]=Xe):Xe=e[107],Xe}function MQe(t){t.currentTarget.style.opacity="",wZe()}function AQe(t){"use forget";const e=D.c(8),{conversationId:n,isActive:s,isEditingTitle:o,isStarred:r,shouldShowUnreadNotification$:a,canShowAsyncTaskProgressCircle:l,shouldShowLoadingSpinner$:c}=t,u=j3(n),d=X(a),f=X(c);let m;return e[0]!==l||e[1]!==u||e[2]!==s||e[3]!==o||e[4]!==r||e[5]!==f||e[6]!==d?(m=!o&&((!s&&d?r?i.jsx(_j,{className:"icon-xs text-blue-500"}):i.jsx(TD,{color:"blue"}):l&&u.length>0?i.jsx(_Qe,{task:u[0]}):!s&&f?i.jsx(Wge,{size:16,backgroundStrokeClassName:"stroke-black/10 dark:stroke-white/10"}):null)||(r?i.jsx(_j,{className:"icon-xs text-token-icon-tertiary opacity-50"}):null)),e[0]=l,e[1]=u,e[2]=s,e[3]=o,e[4]=r,e[5]=f,e[6]=d,e[7]=m):m=e[7],m}function NQe(t){"use forget";const e=D.c(8),{serverThreadId:n,conversations:s}=t;let o;if(e[0]!==s||e[1]!==n){const r=s!=null?s:[];let a;e[3]!==n?(a=f=>f.id===n,e[3]=n,e[4]=a):a=e[4];const l=r.findIndex(a),c=r.slice(0,cy);l!=null&&l>=cy&&(c[cy-1]=r[l]);let u;e[5]===Symbol.for("react.memo_cache_sentinel")?(u=i.jsx(Pk,{"data-no-spacing":!0,className:"ps-10.5 pe-2.5 pt-2 pb-1 text-xs",children:i.jsx(P,N({},kn.recentChatsLabel))}),e[5]=u):u=e[5];let d;e[6]!==n?(d=f=>i.jsx(Fx,{className:"ps-9",conversation:f,isActive:f.id===n},f.id),e[6]=n,e[7]=d):d=e[7],o=i.jsxs(i.Fragment,{children:[u,c.map(d)]}),e[0]=s,e[1]=n,e[2]=o}else o=e[2];return o}const zq=we({exploreStoreEnabled:{id:"gizmo.exploreStoreEnabled",defaultMessage:"Explore GPTs"},keepInSidebar:{id:"gizmo.keepInSidebar",defaultMessage:"Keep in sidebar"},newChat:{id:"gizmo.newChat",defaultMessage:"New chat"},clearChat:{id:"gizmo.clearChat",defaultMessage:"Clear chat"}}),IQe={open:{opacity:1,y:0,transition:{duration:.15,ease:"easeOut"}},closed:{opacity:0,y:-5,transition:{duration:.15,ease:"easeIn"}}};function jQe(t){"use forget";const e=D.c(20),{color:n,emoji:s,isFolderExpanded:o,gizmoId:r,isSharedProject:a}=t,l=te(),[c,u]=v.useState(!1);let d;e[0]!==l||e[1]!==o?(d=l.formatMessage(o?kn.hideChatsForProjectTooltip:kn.showChatsForProjectTooltip),e[0]=l,e[1]=o,e[2]=d):d=e[2];let f;e[3]!==r||e[4]!==o?(f=x=>{x.preventDefault(),nM(r,!o)},e[3]=r,e[4]=o,e[5]=f):f=e[5];let m,p;e[6]===Symbol.for("react.memo_cache_sentinel")?(m=()=>u(!0),p=()=>u(!1),e[6]=m,e[7]=p):(m=e[6],p=e[7]);let g;e[8]!==n||e[9]!==s||e[10]!==o||e[11]!==c||e[12]!==a?(g=s?i.jsx(ag,{color:n,emoji:s,isSharedProject:a,strict:!0}):i.jsx(Y1e,{isOpen:!!o,isHovered:c,color:n,isSharedProject:a}),e[8]=n,e[9]=s,e[10]=o,e[11]=c,e[12]=a,e[13]=g):g=e[13];let h;e[14]!==f||e[15]!==g?(h=i.jsx("button",{className:"icon",onClick:f,onMouseEnter:m,onMouseLeave:p,children:g}),e[14]=f,e[15]=g,e[16]=h):h=e[16];let _;return e[17]!==d||e[18]!==h?(_=i.jsx(St,{label:d,triggerAs:null,children:h}),e[17]=d,e[18]=h,e[19]=_):_=e[19],_}function sM({gizmo:t,historyDisabled:e,flair:n,onClick:s,isActive:o,hideOverflowMenu:r=!1,inGPTDropdown:a=!1}){"use no forget";var $,F,z;const l=vn(),c=mo(),u=X(()=>c==null?void 0:c.serverId$()),d=bt(),f=te(),m=P3(),p=t.gizmo.id,g=X(()=>pj(p)),h=Dt(),_=!!(($=t.gizmo.tags)!=null&&$.includes(A1.FirstParty)),{items:x=[]}=K7(t.gizmo.id),b=(F=Et())==null?void 0:F.normalizedAccountUserId,y=v.useMemo(()=>b?x.filter(W=>{var Y;return"owner"in W?((Y=W.owner)==null?void 0:Y.user_id)===b:!0}):x,[x,b]),S=gl(p),C=y_(l,p),w=X(()=>C.isSkeleton$()?Y7(t):C.theme$()),k=X(()=>C.isSkeleton$()?Z7(t):C.emoji$()),E=X(()=>C.isSkeleton$()?Q7(t):C.title$()),T=X(()=>m.projects.renamingProjectId$()===p),M=o&&(!S||!(g&&u));v.useEffect(()=>{pj(p)==null&&o&&u&&nM(p,!0)},[o,u,p]);let A;t!=null?A=(z=S?E:t.gizmo.display.name)!=null?z:Vte:e?A=f.formatMessage(zq.clearChat):A=J7;const[I,j]=v.useState(!1),{canDropConversation:R,onDropConversation:O}=Dq("sidebar_row_button",p),L=()=>{v.startTransition(()=>{Nr(()=>{m.composer.reset(),m.projects.reset()})})},B=T?i.jsx(Gq,{name:"title-editor",initialValue:A,onCommit:async W=>{L();try{const{resource:Y}=await C.queueUpdate$({name:W}),K=window.location.pathname;Y&&o&&K===window.location.pathname&&d(gc(Y),{replace:!0})}catch(Y){const K=Q0(Y);return h==null||h.warning(K!=null?K:"Error",{duration:5,hasCloseButton:!0}),{id:C.id}}},onCancel:L}):A,U=a&&!S?ee.LinkItem:zs,H=t&&S?O3(t):!1;return i.jsxs(i.Fragment,{children:[i.jsx(U,{className:q(I&&"[&>*]:pointer-events-none"),highlighted:I,onDrop:W=>{R&&(W.preventDefault(),W.stopPropagation(),j(!1),O())},onDragEnter:W=>{R&&W.target===W.currentTarget&&S&&(W.preventDefault(),j(!0))},onDragLeave:W=>{W.target===W.currentTarget&&j(!1)},to:gc(t),onDoubleClick:()=>{Nr(()=>{m.projects.renamingProjectId$.set(p),m.composer.autofocusDisabled$.set(!0)})},onClick:W=>{var K;const Y=(K=t==null?void 0:t.gizmo.id)!=null?K:"primary";kl({location:"Sidebar gizmo list",gizmo_id:Y}),V.logEvent("Sidebar Click Gizmo",{gizmo_id:Y}),s==null||s(W)},active:I?!1:M,icon:S?y.length>0?i.jsx(jQe,{color:w,emoji:k,isFolderExpanded:g,gizmoId:p,isSharedProject:H}):i.jsx(ag,{color:w,emoji:k,isSharedProject:H,strict:!0}):i.jsx(Mx,{simple:!0,isFirstParty:_,src:t==null?void 0:t.gizmo.display.profile_picture_url,className:"icon",alt:""}),label:B,trailing:n===Jr.Workspace&&i.jsx(PQe,{}),highlightTrailing:!r&&!I&&!T&&(S?i.jsx(OQe,{gizmoResource:t,isActive:o}):i.jsx(RQe,{gizmoResource:t,flair:n}))}),i.jsx(In,{initial:!1,children:S&&g&&y.length>0&&i.jsx(wt.div,{initial:"closed",animate:"open",exit:"closed",variants:IQe,className:"overflow-hidden",children:i.jsx(NQe,{serverThreadId:u,conversations:y})},"nested-conversations")})]})}const PQe=()=>{"use forget";var l;const t=D.c(8),e=te(),n=Tn();let s;t[0]!==n||t[1]!==e?(s=n!=null&&n.name?e.formatMessage({id:"gizmo.workspaceRecommended",defaultMessage:"Recommended at {workspace_name}"},{workspace_name:(l=n.name)!=null?l:"Your Workspace"}):e.formatMessage({id:"gizmo.workspaceRecommended.noWorkplaceName",defaultMessage:"Recommended at your workplace"}),t[0]=n,t[1]=e,t[2]=s):s=t[2];const o=s;let r;t[3]!==o?(r=i.jsx(hF,{className:"icon",alt:o}),t[3]=o,t[4]=r):r=t[4];let a;return t[5]!==o||t[6]!==r?(a=i.jsx(St,{side:"right",label:o,children:r}),t[5]=o,t[6]=r,t[7]=a):a=t[7],a},Wq=je(()=>Me(()=>import("./a8077c3c-n3vik6lcxatdsuys.js"),__vite__mapDeps([355,1,2,3])).then(t=>t.GizmoKeepInSidebarMenuItem)),RQe=t=>{"use forget";const e=D.c(10),{gizmoResource:n,flair:s}=t,o=Nt();let r;e[0]===Symbol.for("react.memo_cache_sentinel")?(r=i.jsx(Gc,{onMouseOver:LQe,icon:$s}),e[0]=r):r=e[0];let a;e[1]!==s||e[2]!==n||e[3]!==o?(a=(s===Jr.Recent||s===Jr.Mine)&&i.jsx(ee.Item,{onClick:()=>{D3.updateGizmoSidebar(o,Kte,n.gizmo.id,"keep","sidebar")},children:i.jsx(P,N({},zq.keepInSidebar))}),e[1]=s,e[2]=n,e[3]=o,e[4]=a):a=e[4];let l;e[5]!==n?(l=i.jsx(Wq,{gizmoResource:n,location:"sidebar"}),e[5]=n,e[6]=l):l=e[6];let c;return e[7]!==a||e[8]!==l?(c=i.jsxs(Xo,{triggerButton:r,contentAlign:"start",sideOffset:-4,alignOffset:-8,size:"auto",children:[a,l]}),e[7]=a,e[8]=l,e[9]=c):c=e[9],c},OQe=t=>{"use forget";var k;const e=D.c(49),{gizmoResource:n,isActive:s}=t,o=vn(),r=bt();let a;e[0]===Symbol.for("react.memo_cache_sentinel")?(a=P3(),e[0]=a):a=e[0];const l=a,c=Et(),u=((k=n.gizmo.author)==null?void 0:k.user_id)===(c==null?void 0:c.normalizedAccountUserId),{canDelete:d}=Z1e(n),{mutateAsync:f,isPending:m}=zte(),{mutateAsync:p,isPending:g}=Wte();let h;e[1]!==o||e[2]!==n.gizmo.id?(h=y_(o,n.gizmo.id),e[1]=o,e[2]=n.gizmo.id,e[3]=h):h=e[3];const _=h,x=c!=null&&c.normalizedAccountUserId?Q1e({gizmo:n,user_id:c.normalizedAccountUserId}):!0,b=!u&&!x;let y;e[4]!==n?(y=()=>{rt(BF,{gizmo:Yte(n),publishedGizmo:n,onClose:DQe})},e[4]=n,e[5]=y):y=e[5];const S=y,C=[];if(X(()=>qte(_)())&&x&&!ui(n)){let E;e[6]===Symbol.for("react.memo_cache_sentinel")?(E=i.jsx(P,N({},kn.projectShareButton)),e[6]=E):E=e[6];let T;e[7]!==S?(T=i.jsx(ee.Item,{onClick:S,icon:Kc,children:E},"share"),e[7]=S,e[8]=T):T=e[8],C.push(T)}if(u){let E;e[9]!==n.gizmo.id?(E=()=>{l.composer.autofocusDisabled$.set(!0),l.projects.renamingProjectId$.set(n.gizmo.id)},e[9]=n.gizmo.id,e[10]=E):E=e[10];let T;e[11]===Symbol.for("react.memo_cache_sentinel")?(T=i.jsx(P,N({},kn.editProjectNameDropdownButton)),e[11]=T):T=e[11];let M;e[12]!==E?(M=i.jsx(ee.Item,{onClick:E,icon:tr,children:T},"rename"),e[12]=E,e[13]=M):M=e[13],C.push(M)}else if(b){let E;e[14]!==n.gizmo.id||e[15]!==f?(E=async L=>{L.preventDefault(),L.stopPropagation(),await f({gizmoId:n.gizmo.id})},e[14]=n.gizmo.id,e[15]=f,e[16]=E):E=e[16];const T=m||g;let M;e[17]===Symbol.for("react.memo_cache_sentinel")?(M=i.jsx(P,N({},kn.joinProjectButtonLabel)),e[17]=M):M=e[17];let A;e[18]!==E||e[19]!==T?(A=i.jsx(ee.Item,{onClick:E,icon:Pr,disabled:T,children:M},"join"),e[18]=E,e[19]=T,e[20]=A):A=e[20],C.push(A);let I;e[21]!==p||e[22]!==n.gizmo.id||e[23]!==s||e[24]!==r?(I=async L=>{L.preventDefault(),L.stopPropagation(),await p({gizmoId:n.gizmo.id}),s&&r("/")},e[21]=p,e[22]=n.gizmo.id,e[23]=s,e[24]=r,e[25]=I):I=e[25];const j=m||g;let R;e[26]===Symbol.for("react.memo_cache_sentinel")?(R=i.jsx(P,N({},kn.declineInviteButtonLabel)),e[26]=R):R=e[26];let O;e[27]!==I||e[28]!==j?(O=i.jsx(ee.Item,{color:"danger",onClick:I,icon:ms,disabled:j,children:R},"decline"),e[27]=I,e[28]=j,e[29]=O):O=e[29],C.push(O)}else{let E;e[30]!==n.gizmo.display.name||e[31]!==n.gizmo.id||e[32]!==s||e[33]!==r?(E=I=>{I.preventDefault(),I.stopPropagation();const j=()=>{s&&r("/")};rt($xe,{gizmoId:n.gizmo.id,projectName:n.gizmo.display.name,handleLeaveComplete:j})},e[30]=n.gizmo.display.name,e[31]=n.gizmo.id,e[32]=s,e[33]=r,e[34]=E):E=e[34];let T;e[35]===Symbol.for("react.memo_cache_sentinel")?(T=i.jsx(P,N({},kn.leaveProjectDropdownButton)),e[35]=T):T=e[35];let M;e[36]!==E?(M=i.jsx(ee.Item,{color:"danger",onClick:E,icon:MD,children:T},"leave"),e[36]=E,e[37]=M):M=e[37];const A=M;C.push(A)}if(d){let E;e[38]!==n.gizmo.id||e[39]!==s||e[40]!==r?(E=R=>{R.preventDefault(),R.stopPropagation();const O=()=>{s&&r("/")};rt(hQe,{gizmoId:n.gizmo.id,handleDelete:O})},e[38]=n.gizmo.id,e[39]=s,e[40]=r,e[41]=E):E=e[41];let T;e[42]===Symbol.for("react.memo_cache_sentinel")?(T=i.jsx(P,N({},kn.deleteProjectDropdownButton)),e[42]=T):T=e[42];let M;e[43]!==E?(M=i.jsx(ee.Item,{color:"danger",onClick:E,icon:yi,children:T},"delete"),e[43]=E,e[44]=M):M=e[44];const A=M,I=C.length>0;let j;e[45]!==A||e[46]!==I?(j=I?i.jsx(ee.Group,{separator:I,children:A},"delete-group"):A,e[45]=A,e[46]=I,e[47]=j):j=e[47],C.push(j)}if(C.length===0)return null;let w;return e[48]===Symbol.for("react.memo_cache_sentinel")?(w=i.jsx(Gc,{icon:$s}),e[48]=w):w=e[48],i.jsx(i.Fragment,{children:i.jsx(Xo,{triggerButton:w,contentAlign:"start",sideOffset:-4,alignOffset:-8,size:"auto",children:C})})};function LQe(){return Wq.prefetch()}function DQe(){return Yn(BF)}const xj=2,yj=3;function BQe(t,e){var d,f,m,p,g,h,_;const n=Zd(t,x=>x.flair.kind);let s=[],o=[];const r=(d=n[Jr.Recent])==null?void 0:d.slice(0,xj),a=(f=n[Jr.Recent])==null?void 0:f.slice(xj),l=(m=n[Jr.Workspace])==null?void 0:m.slice(0,yj),c=(p=n[Jr.Workspace])==null?void 0:p.slice(yj),u=(g=n[Jr.Mine])!=null?g:[];return s=[...l!=null?l:[],...(h=n[Jr.FirstParty])!=null?h:[],...(_=n[Jr.SidebarKeep])!=null?_:[],...r!=null?r:[],...e?u:[]],o=[...a!=null?a:[],...c!=null?c:[]],{topGizmos:s,remainingGizmos:o}}function FQe(t){"use forget";const e=D.c(17),{currentGizmoId:n}=t,s=Tn();let o;e[0]===Symbol.for("react.memo_cache_sentinel")?(o=Zte(),e[0]=o):o=e[0];const r=o,{data:a}=X7();let l;e[1]!==a?(l=a===void 0?{}:a,e[1]=a,e[2]=l):l=e[2];const{gizmos:c}=l;let u;e[3]!==c?(u=c===void 0?[]:c,e[3]=c,e[4]=u):u=e[4];const d=u;let f;e[5]===Symbol.for("react.memo_cache_sentinel")?(f=xe("1524046265"),e[5]=f):f=e[5];const m=f;let p;e[6]!==d?(p=r?d.filter(UQe):d,e[6]=d,e[7]=p):p=e[7];const g=p;let h;e[8]!==g?(h=BQe(g,m),e[8]=g,e[9]=h):h=e[9];const{topGizmos:_,remainingGizmos:x}=h;let b;e[10]!==x||e[11]!==_?(b={topGizmos:_,remainingGizmos:x},e[10]=x,e[11]=_,e[12]=b):b=e[12];const{topGizmos:y,remainingGizmos:S}=b;if(!s)return null;let C;return e[13]!==n||e[14]!==S||e[15]!==y?(C=i.jsx(HQe,{currentGizmoId:n,maxToShowOnLoad:4,topGizmos:y,remainingGizmos:S}),e[13]=n,e[14]=S,e[15]=y,e[16]=C):C=e[16],C}function UQe(t){return!M3(t.resource)}const HQe=t=>{"use forget";var _;const e=D.c(16),{currentGizmoId:n,maxToShowOnLoad:s,topGizmos:o,remainingGizmos:r}=t;let a;e[0]===Symbol.for("react.memo_cache_sentinel")?(a=!((_=tt.getItem(Ie.IsGptListCollapsed))==null||_),e[0]=a):a=e[0];const[l,c]=v.useState(a),u=Math.max(o.length,s);let d;e[1]!==r||e[2]!==o?(d=[...o,...r],e[1]=r,e[2]=o,e[3]=d):d=e[3];let f=d;const m=f.length>u;if(m&&!l){let x;e[4]!==f||e[5]!==u?(x=f.slice(0,u-1),e[4]=f,e[5]=u,e[6]=x):x=e[6],f=x}let p;e[7]!==n||e[8]!==f?(p=f.map(x=>i.jsx(sM,{gizmo:x.resource,isActive:x.resource.gizmo.id===n,flair:x.flair.kind},x.resource.gizmo.id)),e[7]=n,e[8]=f,e[9]=p):p=e[9];let g;e[10]!==m||e[11]!==l?(g=m&&i.jsx(kc,{onClick:x=>{x.preventDefault(),c($Qe)},icon:$s,children:l?i.jsx(P,{id:"GizmoSidebarList.showLess",defaultMessage:"Show less"}):i.jsx(P,{id:"GizmoSidebarList.showMoreItems",defaultMessage:"Show more"})}),e[10]=m,e[11]=l,e[12]=g):g=e[12];let h;return e[13]!==p||e[14]!==g?(h=i.jsxs(i.Fragment,{children:[p,g]}),e[13]=p,e[14]=g,e[15]=h):h=e[15],h};function $Qe(t){const e=!t;return tt.setItem(Ie.IsGptListCollapsed,!e),e}const GQe=5;function qq(t){"use forget";const e=D.c(9),{activeId:n,items:s,hasNextPage:o,infiniteScrollTriggerElementRef:r,hideOverflowMenu:a,onSelect:l}=t;let c;e[0]!==n||e[1]!==o||e[2]!==a||e[3]!==r||e[4]!==s||e[5]!==l?(c=s.map((f,m)=>{var g;const p=o&&((g=s[s.length-GQe-1])==null?void 0:g.id)===f.id?r:void 0;return Kq(f)?i.jsx("div",{ref:p!=null?p:void 0,children:i.jsx($q,{room:f})},f.id):i.jsx(Fx,{conversation:f,hideOverflowMenu:a,isActive:n===f.id,elementRef:p,testId:"history-item-".concat(m),onSelect:l},f.id)}),e[0]=n,e[1]=o,e[2]=a,e[3]=r,e[4]=s,e[5]=l,e[6]=c):c=e[6];let u;return e[7]!==c?(u=i.jsx(i.Fragment,{children:c}),e[7]=c,e[8]=u):u=e[8],u}function Kq(t){return"groupLink$"in t}const VQe=(t,e)=>t.timestampMs===e.timestampMs?t.index-e.index:e.timestampMs-t.timestampMs;function zQe(t,e){var s;if(Kq(t))return Kt(()=>t.updatedAt$().getTime());const n=(s=t.update_time)!=null?s:t.create_time;return n==null?e:new Date(n).getTime()}function bj(t,e){return t.map((n,s)=>({item:n,index:s,timestampMs:zQe(n,e)})).sort(VQe)}function WQe(t,e,n){const s=[];let o=0,r=0;for(;s.length<n&&(o<t.length||r<e.length);){const a=t[o],l=e[r];if(l&&(!a||l.timestampMs>=a.timestampMs)){s.push(l.item),r+=1;continue}a&&(s.push(a.item),o+=1)}return s}function qQe(t){"use forget";const e=D.c(44),{conversations:n,hasNextConversationPage:s,isLoading:o,isFetchingNextConversationPage:r,fetchNextConversationPage:a,pageSize:l}=t,c=l===void 0?JR:l;let u;e[0]===Symbol.for("react.memo_cache_sentinel")?(u=xe("756729316"),e[0]=u):u=e[0];const d=u,f=vn();let m;e[1]!==f?(m=d?Dp(f):null,e[1]=f,e[2]=m):m=e[2];const p=m,g=d&&(p==null?void 0:p.hasAccess)===!0,[h,_]=v.useState(1),x=h*c,b=Number.MAX_SAFE_INTEGER;let y;e[3]!==n?(y=st(n),e[3]=n,e[4]=y):y=e[4];const S=y;let C;e[5]!==p||e[6]!==g?(C=()=>!g||p==null?[]:p.sortedRooms$(),e[5]=p,e[6]=g,e[7]=C):C=e[7];const w=X(C);let k;e[8]!==p||e[9]!==g?(k=()=>!g||p==null?!1:p.roomsPaginationCursor$()!=null,e[8]=p,e[9]=g,e[10]=k):k=e[10];const E=X(k);let T;e[11]!==p||e[12]!==g?(T=()=>!g||p==null?!1:p.isFetchingMoreRooms$(),e[11]=p,e[12]=g,e[13]=T):T=e[13];const M=X(T);let A;e[14]!==n||e[15]!==g?(A=g?bj(n,b):[],e[14]=n,e[15]=g,e[16]=A):A=e[16];const I=A;let j;e[17]!==w||e[18]!==g?(j=g?bj(w,b):[],e[17]=w,e[18]=g,e[19]=j):j=e[19];const R=j;let O;e[20]!==I||e[21]!==g||e[22]!==S||e[23]!==R||e[24]!==x?(O=yt(()=>{const pe=S();return g?WQe(I,R,x):pe}),e[20]=I,e[21]=g,e[22]=S,e[23]=R,e[24]=x,e[25]=O):O=e[25];const L=O;let B;e[26]!==L?(B=()=>L(),e[26]=L,e[27]=B):B=e[27];const U=X(B),H=n.length,$=w.length,F=g?H+$:n.length,z=g?r||M:r,W=g?F>x||s||E:s,Y=!g||H>=x||!s,K=!g||$>=x||!E,Z=!g||Y&&K&&!z;let J;e[28]!==Z||e[29]!==a||e[30]!==g?(J=()=>{if(!g){a();return}Z&&_(KQe)},e[28]=Z,e[29]=a,e[30]=g,e[31]=J):J=e[31];const Q=J,ne=g&&!o&&s&&!r&&H<x,ie=g&&p!=null&&E&&!M&&$<x;let fe,ae;e[32]!==p||e[33]!==a||e[34]!==g||e[35]!==ne||e[36]!==ie?(fe=()=>{!g||p==null||(ne&&a(),ie&&p.fetchMoreRooms$())},ae=[g,ne,ie,a,p],e[32]=p,e[33]=a,e[34]=g,e[35]=ne,e[36]=ie,e[37]=fe,e[38]=ae):(fe=e[37],ae=e[38]),v.useEffect(fe,ae);let le;return e[39]!==Q||e[40]!==W||e[41]!==z||e[42]!==U?(le={items:U,hasNextPage:W,isFetchingMore:z,fetchNextPage:Q},e[39]=Q,e[40]=W,e[41]=z,e[42]=U,e[43]=le):le=e[43],le}function KQe(t){return t+1}function YQe(t){"use forget";const e=D.c(4),{activeId:n}=t,{conversations:s,isLoading:o}=sF();if(!o&&s.length===0)return null;let r;return e[0]!==n||e[1]!==s||e[2]!==o?(r=o?i.jsxs(Fc,{children:[i.jsx(vs,{}),i.jsx(vs,{})]}):s.map(a=>i.jsx(Fx,{conversation:a,isActive:n===a.id,isStarred:!0},a.id)),e[0]=n,e[1]=s,e[2]=o,e[3]=r):r=e[3],r}const vj=we({unableToLoadHistory:{id:"history.unableToLoad",defaultMessage:"Unable to load history"},retryButton:{id:"history.retryButton",defaultMessage:"Retry"}});function ZQe(t){"use forget";const e=D.c(64),{activeId:n,hideOverflowMenu:s}=t,o=Nt(),[r,a]=v.useState(!1),[l,c]=v.useState(0),u=gne(),[d,f]=v.useState(!1),[m,p]=v.useState(null),g=v.useRef(null),h=Lq(),_=sk(),{conversations:x,hasNextPage:b,fetchNextPage:y,isLoading:S,isFetchingNextPage:C,isError:w}=$3(),k=tF(x),{conversations:E}=sF();let T;e[0]!==k||e[1]!==b||e[2]!==C||e[3]!==S||e[4]!==y?(T={conversations:k,hasNextConversationPage:b,isLoading:S,isFetchingNextConversationPage:C,fetchNextConversationPage:y},e[0]=k,e[1]=b,e[2]=C,e[3]=S,e[4]=y,e[5]=T):T=e[5];const{items:M,hasNextPage:A,isFetchingMore:I,fetchNextPage:j}=qQe(T);let R;e[6]===Symbol.for("react.memo_cache_sentinel")?(R=Ae=>{p(Ae)},e[6]=R):R=e[6];const O=R;let L,B;e[7]!==j||e[8]!==A||e[9]!==S||e[10]!==m?(L=()=>{if(g.current&&(g.current.disconnect(),g.current=null),S||m==null||!A)return;const Ae=new IntersectionObserver(de=>{var oe;(oe=de[0])!=null&&oe.isIntersecting&&A&&j()});return Ae.observe(m),g.current=Ae,()=>{Ae.disconnect()}},B=[S,m,A,j],e[7]=j,e[8]=A,e[9]=S,e[10]=m,e[11]=L,e[12]=B):(L=e[11],B=e[12]),v.useEffect(L,B);let U,H;e[13]!==k?(U=()=>{MR.publish({kind:"refreshHistory",conversations:k})},H=[k],e[13]=k,e[14]=U,e[15]=H):(U=e[14],H=e[15]),v.useEffect(U,H);let $,F;e[16]!==o?($=()=>RR("conversations").onMessage(de=>{de.type==="conversation-created"?xe("1163864876")&&Fo(o,de.payload.conversation_id):["conversation-history-update"].includes(de.type)&&xe("4273480746")&&Fo(o)}),F=[o],e[16]=o,e[17]=$,e[18]=F):($=e[17],F=e[18]),v.useEffect($,F);let z,W;e[19]!==l||e[20]!==u?(W=()=>{const Ae=Qte(Jte(),Date.now());u(()=>{c(l+1)},Ae+1e3)},z=[l,u],e[19]=l,e[20]=u,e[21]=z,e[22]=W):(z=e[21],W=e[22]),v.useEffect(W,z);const Y=M.length===0&&E.length===0;da.markStart("History",da.NS_SIDEBAR),Et()!=null&&!S&&da.markRendered("History",da.NS_SIDEBAR);let J;e[23]!==h?(J=h!=null&&h.kind==="conversation"&&h.gizmoId!=null&&Bs(h.gizmoId),e[23]=h,e[24]=J):J=e[24];const Q=J,ne=S||w||Y,ie=v.useRef(0),fe=ne&&"h-full items-center justify-center empty:hidden",ae=d&&"opacity-50";let le;e[25]!==fe||e[26]!==ae?(le=q(fe,ae),e[25]=fe,e[26]=ae,e[27]=le):le=e[27];let pe;e[28]!==Q?(pe=Ae=>{Ae.preventDefault(),Q&&f(!0)},e[28]=Q,e[29]=pe):pe=e[29];let _e;e[30]!==Q||e[31]!==h||e[32]!==_?(_e=Ae=>{var de;Ae.preventDefault(),Q&&(ie.current=0,f(!1),_({newGizmoId:null,conversation:h.conversation,previousGizmoId:(de=h.gizmoId)!=null?de:null}))},e[30]=Q,e[31]=h,e[32]=_,e[33]=_e):_e=e[33];let Ce,ge;e[34]!==Q?(Ce=Ae=>{Ae.preventDefault(),Q&&(ie.current=ie.current+1)},ge=Ae=>{Ae.preventDefault(),Q&&(ie.current=ie.current-1,ie.current===0&&f(!1))},e[34]=Q,e[35]=Ce,e[36]=ge):(Ce=e[35],ge=e[36]);let Re;e[37]!==Y||e[38]!==S?(Re=Y&&S&&i.jsx(Fc,{children:i.jsx(Us,{className:"m-auto"})}),e[37]=Y,e[38]=S,e[39]=Re):Re=e[39];let ke;e[40]!==r||e[41]!==Y||e[42]!==w||e[43]!==o?(ke=Y&&w&&i.jsxs("div",{className:"text-token-text-tertiary p-3 text-center italic",children:[i.jsx(P,N({},vj.unableToLoadHistory)),!r&&i.jsx("div",{className:"mt-1",children:i.jsx(Se,{as:"button",color:"primary",size:"small",className:"m-auto mt-2",onClick:()=>{a(!0),Fo(o)},children:i.jsx(P,N({},vj.retryButton))})})]}),e[40]=r,e[41]=Y,e[42]=w,e[43]=o,e[44]=ke):ke=e[44];let he;e[45]!==n||e[46]!==A||e[47]!==s||e[48]!==M||e[49]!==Y||e[50]!==S?(he=!S&&!Y&&i.jsxs(i.Fragment,{children:[i.jsx(YQe,{activeId:n}),i.jsx(qq,{activeId:n,hasNextPage:A,items:M,infiniteScrollTriggerElementRef:O,hideOverflowMenu:s})]}),e[45]=n,e[46]=A,e[47]=s,e[48]=M,e[49]=Y,e[50]=S,e[51]=he):he=e[51];let Ee;e[52]!==I?(Ee=I&&i.jsxs("div",{className:"mb-5",children:[i.jsx(vs,{}),i.jsx(vs,{}),i.jsx(vs,{})]}),e[52]=I,e[53]=Ee):Ee=e[53];let Pe;return e[54]!==le||e[55]!==pe||e[56]!==_e||e[57]!==Ce||e[58]!==ge||e[59]!==Re||e[60]!==ke||e[61]!==he||e[62]!==Ee?(Pe=i.jsxs("div",{id:"history",className:le,onDragOver:pe,onDrop:_e,onDragEnter:Ce,onDragLeave:ge,children:[Re,ke,he,Ee]}),e[54]=le,e[55]=pe,e[56]=_e,e[57]=Ce,e[58]=ge,e[59]=Re,e[60]=ke,e[61]=he,e[62]=Ee,e[63]=Pe):Pe=e[63],Pe}const QQe=Od.memo(ZQe);function JQe({showRetry:t,refetch:e}){return i.jsxs("div",{className:"text-token-text-tertiary mt-5 p-3 text-center italic",children:[i.jsx(P,N({},kn.unableToLoadHistory)),t&&i.jsx("div",{className:"mt-1",children:i.jsx(Se,{as:"button",color:"primary",size:"small",className:"m-auto mt-2",onClick:()=>{e(!0)},children:i.jsx(P,N({},kn.retryLoadingHistory))})})]})}function XQe(t){return i.jsx(Xo,{side:"right",sideOffset:-4,alignOffset:-7,size:"auto",contentClassName:"max-h-[50dvh]",triggerButton:i.jsx(o9,{as:"div",icon:t.icon,label:t.label,highlightTrailing:t.highlightTrailing}),children:i.jsx("div",{className:"max-w-(--sidebar-width) overflow-x-auto [scrollbar-gutter:stable]",children:i.jsx(Fc,{children:t.children})})})}function eJe({currentGizmoId:t}){return i.jsx(XQe,{label:i.jsx(P,N({},kn.seeMoreProjectItems)),icon:$s,children:i.jsx(J1e,{currentGizmoId:t,inSidebarFlyout:!0})})}function tJe(t){"use forget";const e=D.c(7),{projects:n,currentGizmoId:s}=t;let o;if(e[0]!==s||e[1]!==n){let a;e[3]!==s?(a=l=>i.jsx(sM,{gizmo:l.gizmo,isActive:l.gizmo.gizmo.id===s},l.gizmo.gizmo.id),e[3]=s,e[4]=a):a=e[4],o=n.map(a),e[0]=s,e[1]=n,e[2]=o}else o=e[2];let r;return e[5]!==o?(r=i.jsx(i.Fragment,{children:o}),e[5]=o,e[6]=r):r=e[6],r}function nJe(t){"use forget";const e=D.c(30),{currentGizmoId:n}=t,s=X(Xte),{projects:o,data:r,isLoading:a,isError:l,refetch:c,hasNextPage:u}=QC(),d=o.slice(0,hm),f=gl(n),[m,p]=v.useState(!1),[g,h]=v.useState(!0);let _;e[0]!==c?(_=function($){$&&h(!1),c()},e[0]=c,e[1]=_):_=e[1];const x=_s(_),b=l||r===void 0&&!a&&m;da.markStart("SnorlaxSidebarList",da.NS_SIDEBAR),r!=null&&!a&&da.markRendered("SnorlaxSidebarList",da.NS_SIDEBAR);const y=r===void 0&&!a&&!m;let S,C;e[2]!==x||e[3]!==y?(S=()=>{y&&v.startTransition(()=>{p(!0),x(!1)})},C=[y,x],e[2]=x,e[3]=y,e[4]=S,e[5]=C):(S=e[4],C=e[5]),v.useEffect(S,C);let w;e[6]!==n||e[7]!==o?(w=o==null?void 0:o.find(H=>H.gizmo.gizmo.id===n),e[6]=n,e[7]=o,e[8]=w):w=e[8];const k=w;let E;e[9]!==n?(E=H=>H.gizmo.gizmo.id===n,e[9]=n,e[10]=E):E=e[10];const T=d.some(E);let M;!f||T?M=hm:M=hm+1;const A=o&&(o.length>M||u);let I;e[11]!==s?(I=i.jsx(Bq,{hasProjects:s}),e[11]=s,e[12]=I):I=e[12];let j;e[13]!==k||e[14]!==T||e[15]!==n||e[16]!==a||e[17]!==d||e[18]!==A?(j=a?i.jsxs(i.Fragment,{children:[i.jsx(vs,{}),i.jsx(vs,{})]}):i.jsxs(i.Fragment,{children:[i.jsx(tJe,{projects:d,currentGizmoId:n}),k&&!T&&i.jsx(sM,{gizmo:k.gizmo,isActive:!0}),A&&i.jsx(eJe,{currentGizmoId:n})]}),e[13]=k,e[14]=T,e[15]=n,e[16]=a,e[17]=d,e[18]=A,e[19]=j):j=e[19];let R;e[20]!==I||e[21]!==j?(R=i.jsxs(i.Fragment,{children:[I,j]}),e[20]=I,e[21]=j,e[22]=R):R=e[22];const O=R;let L;e[23]!==b||e[24]!==x||e[25]!==g?(L=b&&i.jsx(JQe,{showRetry:g,refetch:x}),e[23]=b,e[24]=x,e[25]=g,e[26]=L):L=e[26];const B=!b&&O;let U;return e[27]!==B||e[28]!==L?(U=i.jsxs(i.Fragment,{children:[L,B]}),e[27]=B,e[28]=L,e[29]=U):U=e[29],U}const sJe=8,oJe=()=>{"use forget";const t=D.c(1);if(!xe("2341940718"))return null;let n;return t[0]===Symbol.for("react.memo_cache_sentinel")?(n=i.jsx(ep,{id:"templates",title:i.jsx(P,{id:"LhlEmc",defaultMessage:"Your templates"}),children:i.jsx(rJe,{})}),t[0]=n):n=t[0],n},rJe=()=>{"use forget";const t=D.c(8);let e;t[0]===Symbol.for("react.memo_cache_sentinel")?(e={enabled:!0,limit:sJe},t[0]=e):e=t[0];const{data:n,isLoading:s}=ET(e);let o;if(t[1]!==n||t[2]!==s){const r=n?fC(n.pages.map(aJe)):[],a=iJe,l=lJe;let c;t[4]===Symbol.for("react.memo_cache_sentinel")?(c=i.jsx(kc,{icon:Rk,onClick:a,children:i.jsx(P,{id:"G5hcq/",defaultMessage:"Create template"})}),t[4]=c):c=t[4];let u;t[5]===Symbol.for("react.memo_cache_sentinel")?(u=i.jsx(zs,{icon:ff,to:"/bookmarked-prompts?referer=sidebar",children:i.jsx(P,{id:"72yor1",defaultMessage:"Manage templates"})}),t[5]=u):u=t[5];let d;t[6]!==s?(d=s&&i.jsxs(i.Fragment,{children:[i.jsx(vs,{}),i.jsx(vs,{})]}),t[6]=s,t[7]=d):d=t[7],o=i.jsxs(i.Fragment,{children:[c,u,d,!s&&r.map((f,m)=>{var p,g;return i.jsx(kc,{onClick:()=>{l(f)},children:(p=f.name)!=null?p:f.prompt},(g=f.id)!=null?g:"prompt-template-".concat(m))})]}),t[1]=n,t[2]=s,t[3]=o}else o=t[3];return o};function aJe(t){return t.prompts}function iJe(){rt(va,{referer:"sidebar"})}function lJe(t){F7({prompt:t,referer:"sidebar"})}function U0t(t){"use forget";const e=D.c(23),{currentGizmoId:n,activeId:s,isProjectsEnabled:o,hasProjects:r,hasChats:a,isLoadingChats:l}=t;let c;e[0]===Symbol.for("react.memo_cache_sentinel")?(c=Dp(),e[0]=c):c=e[0];const u=c,d=X(cJe),f=a||d&&l,m=d?v.Fragment:v.Suspense,p=d?v.Suspense:v.Fragment;let g;e[1]===Symbol.for("react.memo_cache_sentinel")?(g=xe("756729316"),e[1]=g):g=e[1];const h=g;let _;e[2]!==n?(_=i.jsx(WC,{name:"GPTsExpandoSection",children:i.jsx(Fc,{fallback:null,children:i.jsx(uJe,{currentGizmoId:n})})}),e[2]=n,e[3]=_):_=e[3];let x;e[4]!==n||e[5]!==r||e[6]!==o?(x=o&&r&&i.jsx(ep,{id:"projects",title:i.jsx(P,{id:"sidebar.projects",defaultMessage:"Projects"}),children:i.jsx(nJe,{currentGizmoId:n})}),e[4]=n,e[5]=r,e[6]=o,e[7]=x):x=e[7];let b,y;e[8]===Symbol.for("react.memo_cache_sentinel")?(b=i.jsx(oJe,{}),y=u.hasAccess&&!h?i.jsx(fQe,{}):null,e[8]=b,e[9]=y):(b=e[8],y=e[9]);let S;e[10]!==p||e[11]!==_||e[12]!==x?(S=i.jsxs(p,{children:[_,x,b,y]}),e[10]=p,e[11]=_,e[12]=x,e[13]=S):S=e[13];let C;e[14]!==s||e[15]!==a||e[16]!==d||e[17]!==f?(C=f&&i.jsx(ep,{id:"chats",title:d&&!a?null:u.hasAccess&&!h?i.jsx(P,{id:"zPF8DN",defaultMessage:"Your chats"}):i.jsx(P,{id:"sidebar.chats",defaultMessage:"Chats"}),children:i.jsx(QQe,{activeId:s})}),e[14]=s,e[15]=a,e[16]=d,e[17]=f,e[18]=C):C=e[18];let w;return e[19]!==m||e[20]!==S||e[21]!==C?(w=i.jsxs(m,{children:[S,C]}),e[19]=m,e[20]=S,e[21]=C,e[22]=w):w=e[22],w}function cJe(){return DP()}function uJe(t){"use forget";const e=D.c(6),{currentGizmoId:n}=t,{data:s}=X7(),{gizmos:o}=s===void 0?{}:s;if((o===void 0?[]:o).length===0)return null;let a;e[0]===Symbol.for("react.memo_cache_sentinel")?(a=i.jsx(P,{id:"sidebar.gpts",defaultMessage:"GPTs"}),e[0]=a):a=e[0];let l;e[1]!==n?(l=i.jsx(FQe,{currentGizmoId:n}),e[1]=n,e[2]=l):l=e[2];let c;e[3]===Symbol.for("react.memo_cache_sentinel")?(c=i.jsx(Rq,{inExpandoSidebarSection:!0}),e[3]=c):c=e[3];let u;return e[4]!==l?(u=i.jsxs(ep,{id:"gpts",title:a,children:[l,c]}),e[4]=l,e[5]=u):u=e[5],u}const dJe=768,fJe=320,mJe=140,Hh=8,pJe=12;function gJe(t,e,n){const[s,o]=v.useState(null),[r,a]=v.useState(!1),[l,c]=v.useState(null),u=v.useRef(null),d=v.useRef(null),f=v.useRef(null),m=()=>{var _,x,b,y,S;const p=e.current;if(!p)return;let g=null;if(t){const C='nav a[href*="/c/'.concat(t,'"]'),w=document.querySelector(C);if(!w){o(null),c(null);return}if(c(w),g=w.getBoundingClientRect(),g.bottom<=0||g.top>=window.innerHeight){o(null),c(null);return}}else c(null),g=((_=document.querySelector("nav"))!=null?_:p).getBoundingClientRect();if(window.matchMedia("(max-width: ".concat(dJe,"px)")).matches){const C=(b=(x=n.current)==null?void 0:x.getBoundingClientRect().width)!=null?b:fJe,w=(S=(y=n.current)==null?void 0:y.getBoundingClientRect().height)!=null?S:mJe,k=g.left+g.width/2-C/2,E=Math.max(Hh,Math.min(k,window.innerWidth-C-Hh)),T=g.top-w-Hh,M=Math.max(Hh,T);a(!0),o({top:M,left:E})}else{const C=g.top+g.height/2,w=g.right+pJe;a(!1),o({top:C,left:w})}};return bs(()=>{m();const p=()=>{u.current&&cancelAnimationFrame(u.current),u.current=requestAnimationFrame(m)},g=()=>{p()};window.addEventListener("resize",g),window.addEventListener("scroll",g,!0);const h=document.querySelector("nav");if(h&&typeof MutationObserver<"u"){const _=new MutationObserver(()=>p());_.observe(h,{childList:!0,subtree:!0}),d.current=_}if(typeof ResizeObserver<"u"){const _=new ResizeObserver(()=>p());h&&_.observe(h),n.current&&_.observe(n.current),f.current=_}return()=>{window.removeEventListener("resize",g),window.removeEventListener("scroll",g,!0),u.current&&cancelAnimationFrame(u.current),d.current&&(d.current.disconnect(),d.current=null),f.current&&(f.current.disconnect(),f.current=null)}},[t]),{pos:s,isMobileAbove:r,targetEl:l,remeasure:m}}function hJe({conversationId:t,children:e,onClose:n,clickOutsideToClose:s=!1,onVisibilityChange:o=()=>{}}){const[r,a]=v.useState(!1),l=te(),c=v.useRef(null),u=v.useRef(null),d=z7(),{pos:f,isMobileAbove:m,targetEl:p}=gJe(t,c,u);bs(()=>{d||As.setSidebarOpen(!0)},[d]),bs(()=>{if(!s)return;const x=b=>{const y=u.current;y&&b.target instanceof Node&&!y.contains(b.target)&&n()};return document.addEventListener("mousedown",x,!0),()=>document.removeEventListener("mousedown",x,!0)},[n,s]),bs(()=>{if(!f)return;a(!1);const x=requestAnimationFrame(()=>a(!0));return()=>cancelAnimationFrame(x)},[f]),bs(()=>{if(!f||!p)return;const x=["ring-2","ring-blue-500","rounded-md"];return p.classList.add(...x),()=>{p.classList.remove(...x)}},[f,p,t]);const g=_s(o);v.useEffect(()=>{const x=!!f;g==null||g(x)},[f,g]);const h=i.jsx("span",{ref:c,role:"presentation",style:{display:"none"}});if(!f)return h;const _=i.jsxs("div",{ref:u,style:{position:"fixed",top:f.top,left:f.left,zIndex:1e3},className:"border-token-border-light relative max-h-[60vh] max-w-md transform rounded-lg border bg-blue-500 p-4 text-sm text-white shadow-2xl transition-opacity duration-200 "+(m?"":"-translate-y-1/2")+(r?" opacity-100":" opacity-0"),children:[i.jsx(Wn,{onClick:n,className:"absolute end-2 top-2 text-white hover:bg-blue-400/20! hover:text-white",bg:"transparent","aria-label":l.formatMessage({id:"n7Yh10",defaultMessage:"Close survey"})}),m?i.jsx("div",{className:"border-token-border-light absolute start-4 -bottom-2 h-4 w-4 rotate-45 border bg-blue-500"}):i.jsx("div",{className:"border-token-border-light absolute -start-2 top-1/2 h-4 w-4 -translate-y-1/2 rotate-45 border bg-blue-500"}),e]});return i.jsxs(i.Fragment,{children:[h,Xa.createPortal(_,document.body)]})}const _Je=5;function H0t(){"use forget";const t=D.c(1);let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=i.jsx(xJe,{}),t[0]=e):e=t[0],e}function xJe(){"use forget";const t=D.c(30),{survey:e,finishSurvey:n}=rde(),{conversations:s}=$3();ade();const o=!X(vJe),r=v.useRef(null),l=(Array.isArray(s)?s:[]).slice(0,_Je),c=!!(e&&l.some(A=>(A==null?void 0:A.id)===(e==null?void 0:e.conversation_id))),u=!(e!=null&&e.survey_display_type)||e.survey_display_type==="CONVERSATION_COACHMARK",d=!(e!=null&&e.trigger_event_type)||e.trigger_event_type==="NEW_CHAT_CLICK",f=!!(e!=null&&e.content),m=!!(e&&c&&f&&u&&d&&!o);let p;t[0]!==e?(p=A=>{var R;if(!A||!e)return;const I=e.conversation_id,j=e.survey_election_id;!I||!j||r.current!==j&&(HRe({survey_campaign_name:e.survey_campaign_name,survey_election_id:j},I),ga("chatgpt_survey_seen",void 0,{survey_campaign_name:String((R=e.survey_campaign_name)!=null?R:""),survey_election_id:j,conversation_id:I}),r.current=j)},t[0]=e,t[1]=p):p=t[1];const g=p;if(!m||!e)return null;const{conversation_id:h}=e,_=e.content;let x;t[2]!==_.answers?(x=Array.isArray(_==null?void 0:_.answers)?_.answers:[],t[2]=_.answers,t[3]=x):x=t[3];const b=x,y=bJe,S=yJe,C=e.conversation_id;let w;t[4]!==n||t[5]!==e?(w=()=>{e&&S({conversation_id:e.conversation_id,election_id:e.survey_election_id,campaign_name:e.survey_campaign_name}),n()},t[4]=n,t[5]=e,t[6]=w):w=t[6];let k;t[7]!==_.question?(k=i.jsx("div",{className:"mb-3 pe-8 font-medium break-words",children:_.question}),t[7]=_.question,t[8]=k):k=t[8];let E;if(t[9]!==b||t[10]!==_.question||t[11]!==h||t[12]!==n||t[13]!==e.survey_campaign_name||t[14]!==e.survey_election_id){let A;t[16]!==_.question||t[17]!==h||t[18]!==n||t[19]!==e.survey_campaign_name||t[20]!==e.survey_election_id?(A=I=>i.jsx("button",{className:"rounded-full border border-gray-300 bg-white px-4 py-2 font-medium whitespace-nowrap text-black hover:bg-gray-100",onClick:()=>{y({conversation_id:h,election_id:e.survey_election_id,campaign_name:e.survey_campaign_name,question:_.question,answer_id:I.answer_id,answer_text:I.text}),n()},children:I.text},I.answer_id),t[16]=_.question,t[17]=h,t[18]=n,t[19]=e.survey_campaign_name,t[20]=e.survey_election_id,t[21]=A):A=t[21],E=b.map(A),t[9]=b,t[10]=_.question,t[11]=h,t[12]=n,t[13]=e.survey_campaign_name,t[14]=e.survey_election_id,t[15]=E}else E=t[15];let T;t[22]!==E?(T=i.jsx("div",{className:"flex gap-2",children:E}),t[22]=E,t[23]=T):T=t[23];let M;return t[24]!==g||t[25]!==e.conversation_id||t[26]!==w||t[27]!==k||t[28]!==T?(M=i.jsxs(hJe,{conversationId:C,onClose:w,onVisibilityChange:g,children:[k,T]}),t[24]=g,t[25]=e.conversation_id,t[26]=w,t[27]=k,t[28]=T,t[29]=M):M=t[29],M}function yJe(t){var e,n;$Re({survey_campaign_name:t.campaign_name,survey_election_id:t.election_id},t.conversation_id),ga("chatgpt_survey_dismissed",void 0,{survey_campaign_name:String((e=t.campaign_name)!=null?e:""),survey_election_id:String((n=t.election_id)!=null?n:""),conversation_id:t.conversation_id})}function bJe(t){var e,n,s,o;URe({survey_campaign_name:t.campaign_name,survey_election_id:t.election_id,question_id:void 0,question_text:(e=t.question)!=null?e:null,answer_id:t.answer_id,answer_text:(n=t.answer_text)!=null?n:null,tags:null},t.conversation_id),ga("chatgpt_survey_response",void 0,{survey_campaign_name:t.campaign_name,survey_election_id:t.election_id,conversation_id:t.conversation_id,question_text:(s=t.question)!=null?s:"",answer_id:t.answer_id,answer_text:(o=t.answer_text)!=null?o:""})}function vJe(){return gp()}const SJe=je(()=>Me(()=>import("./5a741dc9-i3az58p6jwzljp2s.js"),__vite__mapDeps([356,216,2,1,3])).then(t=>t.FannyPackInitializer));function $0t(){const{isFannyPackEnabled:t,isFannyPackInitializerEnabled:e}=wk();return t||!e?null:i.jsx(SJe,{})}const CJe="sPZ93q_leadingBar",wJe="sPZ93q_leadingBarScrollAnimation",kJe="sPZ93q_primary",EJe="sPZ93q_trailingBar",TJe="sPZ93q_trailingBarScrollAnimation",em={leadingBar:CJe,leadingBarScrollAnimation:wJe,primary:kJe,trailingBar:EJe,trailingBarScrollAnimation:TJe};function MJe({disabled:t=!1,track:e}={}){const[n,s]=v.useState(null),o=v.useRef(null),r=v.useRef(null),a=v.useCallback(l=>{if(r.current&&(r.current.disconnect(),r.current=null),o.current=l,t||!l)return;const c=new ResizeObserver(u=>{if(!u.length)return;const d=u[0],{width:f,height:m}=AJe(d);v.startTransition(()=>{s(p=>{const g={width:f,height:m};return!p||e==="width"&&p.width!==f||e==="height"&&p.height!==m||p.width!==f||p.height!==m?g:p})})});c.observe(l),r.current=c},[t,e]);return[n,a]}function AJe(t){let e,n;if(t.borderBoxSize){const s=Array.isArray(t.borderBoxSize)?t.borderBoxSize[0]:t.borderBoxSize;e=s.inlineSize,n=s.blockSize}else e=t.contentRect.width,n=t.contentRect.height;return{width:e,height:n}}function g1({disableSizeTracking:t,name:e,track:n}){const[s,o]=MJe({disabled:n===void 0||t,track:n});let r={};return e&&!t&&n&&s&&(r={["--".concat(e,"-").concat(n)]:"".concat(s[n==="width"?"width":"height"],"px")}),[r,o,s]}function NJe(t){var g;const p=t,{axis:e="horizontal",children:n,className:s,hidden:o,leading:r,trailing:a,ref:l,style:c,type:u}=p,d=De(p,["axis","children","className","hidden","leading","trailing","ref","style","type"]),[f,m]=g1(d);return i.jsx("div",{"bar-type":u,hidden:o,"data-testid":"bar-".concat((g=d.name)!=null?g:"default"),className:q("gap-bar grid",e==="vertical"&&"flex-col",r&&[em.leadingBar,em.leadingBarScrollAnimation],a&&[em.trailingBar,em.trailingBarScrollAnimation],u==="primary"&&em.primary,s),ref:l!=null?l:m,style:N(N({},c),f),children:n})}const IJe="_56rfYG_screen",jJe={screen:IJe};function PJe(t){const w=t,{anchor:e,children:n,className:s,contentClassName:o,leading:r,leadingClassName:a,primaryScrollContainer:l,ref:c,style:u,trailing:d,trackLeading:f,trackTrailing:m}=w,p=De(w,["anchor","children","className","contentClassName","leading","leadingClassName","primaryScrollContainer","ref","style","trailing","trackLeading","trackTrailing"]),{name:g}=p,[h,_]=g1(p),[x,b]=g1({disableSizeTracking:!f,name:"".concat(g,"-leading"),track:"height"}),[y,S]=g1({disableSizeTracking:!m,name:"".concat(g,"-trailing"),track:"height"}),C=g!=null?g:"default";return i.jsxs("section",{className:q(jJe.screen,"h-[var(--screen-height-override,calc(var(--cqh-full)-var(--screen-height-offset,0px)))]","keyboard-open:h-[var(--screen-height-override,calc(var(--cqh-full)-env(keyboard-inset-height,0px)-var(--screen-height-offset,0px)-var(--force-redraw,0px)))]",s),"data-testid":"screen-".concat(C),"data-primary-scroller":l,"screen-anchor":e,ref:q7(_,c),style:G(N(N(N(N({},u),h),x),y),{container:g?"".concat(g," / inline-size"):void 0,minWidth:"min(var(--screen-".concat(C,"_min-width), 100cqw)")}),children:[i.jsx("div",{slot:"leading",ref:b,className:a,children:r}),i.jsx("div",{slot:"content",className:o,children:n}),i.jsx("div",{slot:"trailing",ref:k=>{S(k)},children:d})]})}function G0t(p){var g=p,{ariaLabel:t,className:e,leadingFullBleed:n,headerActions:s,trailing:o,handleClose:r,closeButtonTestId:a,showScrollToBottomButton:l=!1,children:c,onScroll:u,restoreScrollTop:d,scrollMode:f="full-screen"}=g,m=De(g,["ariaLabel","className","leadingFullBleed","headerActions","trailing","handleClose","closeButtonTestId","showScrollToBottomButton","children","onScroll","restoreScrollTop","scrollMode"]);const h=hs(),_=v.useRef(null),[x,b]=v.useState(!0);return v.useEffect(()=>{const y=_.current;if(!y||typeof u!="function")return;function S(){y&&u&&u(y.scrollTop)}return y.addEventListener("scroll",S,{passive:!0}),()=>{y.removeEventListener("scroll",S)}},[u]),v.useEffect(()=>{const y=_.current;!y||d==null||requestAnimationFrame(()=>{y.scrollTop=d})},[d]),i.jsxs(i.Fragment,{children:[i.jsxs(PJe,{ref:_,anchor:"top",className:q("relative flex-1 [--sticky-padding-top:0px]",h?"border-s-thin border-(--bento-border-color)":"border-s-token-border-sharp dark:border-token-main-surface-secondary border-s",e),style:f==="content-only"?{overflow:"hidden"}:void 0,name:"threadFlyOut",ariaLabel:t,primaryScrollContainer:!0,trackLeading:!0,trailing:o,contentClassName:q("bg-token-bg-primary",f==="content-only"&&"overflow-y-auto"),leading:(()=>{if("renderLeading"in m)return m.renderLeading({handleClose:r});const{leading:y}=m;return i.jsx(NJe,{name:"search-sources-header",type:"primary",className:q("flex items-center ".concat(y?"":"justify-end p-1.5"," bg-transparent!"),n&&"pointer-events-none",h?"min-h-[var(--header-height,3.5rem)]":"min-h-[calc(var(--header-height,3.5rem)+1px)]"),children:y?i.jsxs("div",{className:q("flex items-center justify-between px-4 py-3",h?"h-[var(--header-height,3.5rem)] border-(--bento-border-color)":"border-token-border-sharp h-[calc(var(--header-height,3.5rem)+1px)]",n?"pointer-events-none bg-transparent":h?"bg-token-main-surface-primary border-b-thin border-(--bento-border-color)":"bg-token-main-surface-primary border-b"),children:[y,i.jsxs("div",{className:q("flex items-center gap-1",n&&"pointer-events-auto"),children:[s,i.jsx(Wn,{className:q("bg-token-main-surface-primary pointer-events-auto -me-2.5",n&&"opacity-80"),bg:n?"primary":"transparent",onClick:r,"data-testid":a})]})]}):s?i.jsxs("div",{className:"me-3 flex items-center gap-1",children:[s,i.jsx(Wn,{className:"bg-token-main-surface-primary! hover:bg-token-main-surface-secondary! p-1",onClick:r,"data-testid":a})]}):i.jsx(Wn,{className:"bg-token-main-surface-primary! hover:bg-token-main-surface-secondary! me-3 p-1",onClick:r,"data-testid":a})})})(),leadingClassName:n?"pointer-events-none":void 0,children:[c,l&&i.jsx(ene,{setIsScrolledToEdge:y=>{b(!y)},options:{rootMargin:"0px 0px 80px 0px"}})]}),l&&i.jsx(pGe,{show:!x,className:"bottom-8",onClick:()=>{var y,S;(S=_==null?void 0:_.current)==null||S.scrollTo({top:(y=_==null?void 0:_.current)==null?void 0:y.scrollHeight,behavior:"smooth"})}})]})}const RJe=je(()=>Me(()=>import("./20b859e0-gwcqkajwbyf66cvp.js"),__vite__mapDeps([159,1,2,3,160,140,17,18,19,141,142,22,143,144,145,146,147,148,149,150,151,152,21,153,154,155,156,157,158])).then(t=>t.ThreadModal)),V0t=t=>{"use forget";const e=D.c(23),{clientThreadId:n,shouldScrollToBottom:s,threadContent:o}=t,r=s===void 0?!1:s;let a;e[0]!==n?(a=Pt(n),e[0]=n,e[1]=a):a=e[1];const l=a;let c;e[2]===Symbol.for("react.memo_cache_sentinel")?(c={kind:Bt.PrimaryAssistant},e[2]=c):c=e[2];let u;e[3]!==r?(u={shouldScrollToBottom:r,disableConversationNavigation:!0},e[3]=r,e[4]=u):u=e[4],J$(n,c,u);let d,f;if(e[5]!==n?(d=()=>(fc.retainThread(n),()=>{setTimeout(()=>{Zn().invalidateQueries(O_({clientThreadId:n}))},0),fc.releaseThread(n)}),f=[n],e[5]=n,e[6]=d,e[7]=f):(d=e[6],f=e[7]),v.useEffect(d,f),!n)return null;let m;e[8]!==l?(m=i.jsx(RJe,{conversation:l,allowAnyScreenSize:!0}),e[8]=l,e[9]=m):m=e[9];let p;e[10]!==l.id?(p=i.jsx(_Ze,{clientThreadId:l.id}),e[10]=l.id,e[11]=p):p=e[11];let g;e[12]!==l||e[13]!==m||e[14]!==p||e[15]!==o?(g=i.jsx(nne,{children:i.jsxs(sne,{conversation:l,children:[o,m,p]})}),e[12]=l,e[13]=m,e[14]=p,e[15]=o,e[16]=g):g=e[16];let h;e[17]!==n||e[18]!==g?(h=i.jsx(pTe,{clientThreadId:n,children:g}),e[17]=n,e[18]=g,e[19]=h):h=e[19];let _;return e[20]!==l||e[21]!==h?(_=i.jsx(tne.Provider,{value:l,children:h}),e[20]=l,e[21]=h,e[22]=_):_=e[22],_},OJe=je(()=>Me(()=>import("./1de975ca-opfq6f6nav5b4m2m.js"),__vite__mapDeps([344,1,2,3])).then(t=>t.ThreadReportConversationModal)),$h=we({actions:{id:"pulse.conversation.actions",defaultMessage:"Actions"},report:{id:"pulse.conversation.report",defaultMessage:"Report"},leaveFeedback:{id:"pulse.conversation.giveFeedback",defaultMessage:"Give feedback"},share:{id:"pulse.conversation.share",defaultMessage:"Share"}});function LJe(t){"use forget";const e=D.c(32),{className:n,card:s}=t,o=te(),{closeView:r}=eM(),a=s.conversation_id;let l;e[0]!==a?(l=a?Lt(a):void 0,e[0]=a,e[1]=l):l=e[1];const c=l;let u;e[2]!==a||e[3]!==c?(u={clientThreadId:a,serverThreadId:c},e[2]=a,e[3]=c,e[4]=u):u=e[4];const{onShare:d}=J_(u);let f;e[5]!==s.id||e[6]!==r?(f=()=>{const T=Ws();r(),T.openFeedbackView({type:zn.OnCard,cardId:s.id})},e[5]=s.id,e[6]=r,e[7]=f):f=e[7];const m=f;let p;e[8]!==n?(p=q("hover:bg-token-bg-secondary touch:w-10 flex h-8 w-8 items-center justify-center rounded-lg",n),e[8]=n,e[9]=p):p=e[9];let g;e[10]===Symbol.for("react.memo_cache_sentinel")?(g=i.jsx($s,{className:"icon"}),e[10]=g):g=e[10];let h;e[11]!==p?(h=i.jsx("button",{className:p,onMouseOver:DJe,children:g}),e[11]=p,e[12]=h):h=e[12];let _;e[13]!==o?(_=o.formatMessage($h.actions),e[13]=o,e[14]=_):_=e[14];let x;e[15]===Symbol.for("react.memo_cache_sentinel")?(x=i.jsx(P,N({},$h.leaveFeedback)),e[15]=x):x=e[15];let b;e[16]!==m?(b=i.jsx(ee.Item,{icon:ll,onClick:m,children:x}),e[16]=m,e[17]=b):b=e[17];let y;e[18]!==a?(y=()=>{rt(OJe,{clientThreadId:a,isSharedConversation:!1,isStaticSharedThread:!1})},e[18]=a,e[19]=y):y=e[19];let S;e[20]===Symbol.for("react.memo_cache_sentinel")?(S=i.jsx(P,N({},$h.report)),e[20]=S):S=e[20];let C;e[21]!==y?(C=i.jsx(ee.Item,{icon:W_,onClick:y,children:S}),e[21]=y,e[22]=C):C=e[22];let w;e[23]===Symbol.for("react.memo_cache_sentinel")?(w=i.jsx(P,N({},$h.share)),e[23]=w):w=e[23];let k;e[24]!==d?(k=i.jsx(ee.Item,{icon:Kc,onClick:d,children:w}),e[24]=d,e[25]=k):k=e[25];let E;return e[26]!==C||e[27]!==k||e[28]!==h||e[29]!==_||e[30]!==b?(E=i.jsxs(Xo,{triggerButton:h,size:"auto",contentAlign:"start",alignOffset:-7,side:"top",sideOffset:4,tooltip:_,children:[b,C,k]}),e[26]=C,e[27]=k,e[28]=h,e[29]=_,e[30]=b,e[31]=E):E=e[31],E}function DJe(){}const z0t=t=>{"use forget";const e=D.c(3),{className:n}=t,s=X(BJe),o=X(FJe),{data:r}=qk(s?null:o),a=s!=null?s:r;let l;return e[0]!==n||e[1]!==a?(l=a&&i.jsx(LJe,{className:n,card:a}),e[0]=n,e[1]=a,e[2]=l):l=e[2],l};function BJe(){return f2e()}function FJe(){return Ws().activeCardId$()}const UJe=je(()=>Me(()=>import("./b18bdd4a-kenkf1hfr1kes1pk.js"),__vite__mapDeps([184,1,2,3])).then(t=>t.DeleteConversationConfirmationModal)),Yb=we({actions:{id:"pulse.conversation.actions",defaultMessage:"Actions"},deleteFeedback:{id:"pulse.conversation.deleteHistory",defaultMessage:"Delete history"},pulseConversationTitle:{id:"pulse.conversation.title",defaultMessage:"Pulse Feedback Conversation"}});function HJe(t){"use forget";const e=D.c(23),{clientThreadId:n,className:s}=t,o=te(),{mutate:r}=X(VJe);let a;e[0]!==n?(a=n?Lt(n):void 0,e[0]=n,e[1]=a):a=e[1];const l=a;let c;e[2]!==n||e[3]!==r?(c=()=>{r(),Ws().closeFeedbackView(),ys().logEventWithStatsig("(Web) FYP Feedback Conversation Deletion","chatgpt_web_fyp_feedback_conversation_deletion",{feedback_conversation_id:n})},e[2]=n,e[3]=r,e[4]=c):c=e[4];const u=c;let d;e[5]!==s?(d=q("hover:bg-token-bg-secondary touch:w-10 flex h-8 w-8 items-center justify-center rounded-lg",s),e[5]=s,e[6]=d):d=e[6];let f;e[7]===Symbol.for("react.memo_cache_sentinel")?(f=i.jsx($s,{className:"icon"}),e[7]=f):f=e[7];let m;e[8]!==d?(m=i.jsx("button",{className:d,onMouseOver:GJe,children:f}),e[8]=d,e[9]=m):m=e[9];let p;e[10]!==o?(p=o.formatMessage(Yb.actions),e[10]=o,e[11]=p):p=e[11];let g;e[12]!==u||e[13]!==o||e[14]!==l?(g=()=>{l&&rt(UJe,{title:o.formatMessage(Yb.pulseConversationTitle),handleDelete:u,onClose:$Je})},e[12]=u,e[13]=o,e[14]=l,e[15]=g):g=e[15];let h;e[16]===Symbol.for("react.memo_cache_sentinel")?(h=i.jsx(P,N({},Yb.deleteFeedback)),e[16]=h):h=e[16];let _;e[17]!==g?(_=i.jsx(ee.Item,{color:"danger",icon:yi,onClick:g,children:h}),e[17]=g,e[18]=_):_=e[18];let x;return e[19]!==m||e[20]!==p||e[21]!==_?(x=i.jsx(Xo,{triggerButton:m,size:"auto",contentAlign:"start",alignOffset:-7,side:"top",sideOffset:4,tooltip:p,children:_}),e[19]=m,e[20]=p,e[21]=_,e[22]=x):x=e[22],x}function $Je(){}function GJe(){}function VJe(){return e2e()}function zJe(t){"use forget";const e=D.c(24),{taskId:n,className:s}=t,{automation:o}=Kk(n);let r;e[0]!==o?(r=()=>{o!=null&&o.conversation_id&&window.open(ia(o.conversation_id),"_blank")},e[0]=o,e[1]=r):r=e[1];const a=r;let l;e[2]!==o?(l=()=>rt(lk,{item:o,onConfirm:qJe}),e[2]=o,e[3]=l):l=e[3];let c;e[4]!==s?(c=q("text-token-icon-status-error rounded-md",s),e[4]=s,e[5]=c):c=e[5];let u;e[6]!==l||e[7]!==c?(u=i.jsx(Se,{color:"ghost",icon:yi,onClick:l,className:c}),e[6]=l,e[7]=c,e[8]=u):u=e[8];let d;e[9]!==s?(d=q("hover:bg-token-bg-secondary touch:w-10 flex h-8 w-8 items-center justify-center rounded-lg",s),e[9]=s,e[10]=d):d=e[10];let f;e[11]===Symbol.for("react.memo_cache_sentinel")?(f=i.jsx($s,{className:"icon"}),e[11]=f):f=e[11];let m;e[12]!==d?(m=i.jsx("button",{className:d,onMouseOver:WJe,children:f}),e[12]=d,e[13]=m):m=e[13];const p=!(o!=null&&o.conversation_id);let g;e[14]===Symbol.for("react.memo_cache_sentinel")?(g=i.jsx(P,{id:"gF3w1N",defaultMessage:"Open Conversation"}),e[14]=g):g=e[14];let h;e[15]!==a||e[16]!==p?(h=i.jsx(ee.Item,{icon:xg,disabled:p,onClick:a,children:g}),e[15]=a,e[16]=p,e[17]=h):h=e[17];let _;e[18]!==h||e[19]!==m?(_=i.jsx(Xo,{triggerButton:m,size:"auto",contentAlign:"start",alignOffset:-7,side:"top",sideOffset:4,children:h}),e[18]=h,e[19]=m,e[20]=_):_=e[20];let x;return e[21]!==_||e[22]!==u?(x=i.jsxs(i.Fragment,{children:[u,_]}),e[21]=_,e[22]=u,e[23]=x):x=e[23],x}function WJe(){}function qJe(){return Ws().openFeedbackView()}const W0t=t=>{"use forget";const e=D.c(11),{feedbackState:n,className:s}=t,o=cf(),r=X(KJe),a=Ze(r,ve.hasUserMessage);if(!r)return null;if((n==null?void 0:n.type)===zn.Preview&&a){let l;e[0]!==s?(l=q("text-token-text-secondary rounded-md",s),e[0]=s,e[1]=l):l=e[1];let c;e[2]===Symbol.for("react.memo_cache_sentinel")?(c=i.jsx(P,{id:"E03X7s",defaultMessage:"Feedback history"}),e[2]=c):c=e[2];let u;return e[3]!==l?(u=i.jsx(Se,{color:"ghost",className:l,icon:xg,onClick:YJe,children:c}),e[3]=l,e[4]=u):u=e[4],u}else if((n==null?void 0:n.type)===zn.Conversation){let l;return e[5]!==s||e[6]!==r?(l=i.jsx(HJe,{className:s,clientThreadId:r}),e[5]=s,e[6]=r,e[7]=l):l=e[7],l}else if((n==null?void 0:n.type)===zn.TaskEdit&&o){let l;return e[8]!==s||e[9]!==n.taskId?(l=i.jsx(zJe,{taskId:n.taskId,className:s}),e[8]=s,e[9]=n.taskId,e[10]=l):l=e[10],l}return null};function KJe(){return JF()}function YJe(){return Ws().openFeedbackView({type:zn.Conversation})}function q0t({clientThreadId:t,urlThreadId:e}){const n=te(),s=bt(),o=Hs();return i.jsx(Fc,{children:o&&t&&!!e&&i.jsx(ik,{isOpen:!0,title:i.jsx(P,{id:"HistoryGizmoItem.leaveTempChatTitle",defaultMessage:"Leave Temporary Chat?"}),description:i.jsx(P,{id:"HistoryGizmoItem.leaveTempChatDescription",defaultMessage:"Temporary Chats don't appear in your history, so you won't be able to come back to it."}),confirmText:n.formatMessage({id:"HistoryGizmoItem.leaveTempChatConfirm",defaultMessage:"Leave Temporary Chat"}),onClose:()=>{s("/")},onConfirm:()=>{i_.set(!1)}})})}const ZJe=re(me,"59f270",20,20,!0);function QJe(t){"use forget";var y,S;const e=D.c(16),{conversation:n,isRootVisible:s,isPanelVisible:o,onOpenPanel:r,onClosePanel:a,backMessage:l}=t;let c;e[0]!==n?(c=()=>Fn(n),e[0]=n,e[1]=c):c=e[1];const u=X(c),d=Mk(),f=Nk(n,d,!1),m=(S=(y=u==null?void 0:u.title)!=null?y:u==null?void 0:u.id)!=null?S:null;let p;e[2]!==m?(p={primaryModelLabel:m},e[2]=m,e[3]=p):p=e[3];const{primaryModelLabel:g}=p,h=s&&g;let _;e[4]!==r||e[5]!==g||e[6]!==h?(_=h?i.jsx(i.Fragment,{children:i.jsx(ee.Item,{fillContainer:!0,onSelect:C=>{C.preventDefault(),r()},subMenu:!0,children:i.jsx("div",{className:"flex w-full items-baseline gap-2 text-sm",children:i.jsx("span",{className:"text-token-text-primary",children:g})})})}):null,e[4]=r,e[5]=g,e[6]=h,e[7]=_):_=e[7];let x;e[8]!==l||e[9]!==f||e[10]!==o||e[11]!==a?(x=o?i.jsxs(i.Fragment,{children:[i.jsx(ee.Item,{icon:i.jsx(Uu,{className:"h-4 w-4"}),color:"default",className:"mb-1 ps-1",onClick:C=>{C.preventDefault(),a()},fillContainer:!0,children:i.jsx(P,N({},l))}),i.jsx(ee.Separator,{}),i.jsx(ee.Group,{"data-desktop-skip-link-handler":!0,className:"-mb-1.5 max-h-[50dvh] w-70 overflow-y-auto pb-1.5",separator:!1,children:i.jsx(Ak,{sections:f})})]}):null,e[8]=l,e[9]=f,e[10]=o,e[11]=a,e[12]=x):x=e[12];let b;return e[13]!==_||e[14]!==x?(b=i.jsxs(i.Fragment,{children:[_,x]}),e[13]=_,e[14]=x,e[15]=b):b=e[15],b}function Sj(t){"use forget";const e=D.c(31),{activeId:n,hideOverflowMenu:s,onSelect:o}=t,{conversations:r,hasNextPage:a,fetchNextPage:l,isLoading:c,isFetchingNextPage:u,refetch:d}=$3();let f,m;e[0]!==d?(f=()=>{d()},m=[d],e[0]=d,e[1]=f,e[2]=m):(f=e[1],m=e[2]),v.useEffect(f,m);let p;e[3]!==l||e[4]!==a?(p=w=>{if(w==null)return;const k=new IntersectionObserver(E=>{E[0].isIntersecting&&a&&l()});return k.observe(w),()=>{k.disconnect()}},e[3]=l,e[4]=a,e[5]=p):p=e[5];const g=p;let h;if(e[6]!==n||e[7]!==r){let w;e[9]!==n?(w=k=>k.id!==n,e[9]=n,e[10]=w):w=e[10],h=r.filter(w),e[6]=n,e[7]=r,e[8]=h}else h=e[8];const _=h;let x;e[11]!==g||e[12]!==c?(x=c?JJe:g,e[11]=g,e[12]=c,e[13]=x):x=e[13];let b;e[14]!==n||e[15]!==a||e[16]!==s||e[17]!==_||e[18]!==o||e[19]!==x?(b=i.jsx(qq,{activeId:n,hasNextPage:a,items:_,infiniteScrollTriggerElementRef:x,hideOverflowMenu:s,onSelect:o}),e[14]=n,e[15]=a,e[16]=s,e[17]=_,e[18]=o,e[19]=x,e[20]=b):b=e[20];let y;e[21]!==c||e[22]!==_.length?(y=_.length===0&&!c&&i.jsx("div",{className:"px-4 py-2 text-sm text-gray-500",children:i.jsx(P,N({},XJe.noConversations))}),e[21]=c,e[22]=_.length,e[23]=y):y=e[23];let S;e[24]!==u||e[25]!==c?(S=(c||u)&&i.jsxs("div",{children:[i.jsx(vs,{}),i.jsx(vs,{}),i.jsx(vs,{})]}),e[24]=u,e[25]=c,e[26]=S):S=e[26];let C;return e[27]!==b||e[28]!==y||e[29]!==S?(C=i.jsxs(i.Fragment,{children:[b,y,S]}),e[27]=b,e[28]=y,e[29]=S,e[30]=C):C=e[30],C}function JJe(){}const XJe=we({noConversations:{id:"SidebarHistory.noConversations",defaultMessage:"No previous chats"}}),sd=we({projects:{id:"SidebarHeader.projects",defaultMessage:"Projects"},noProjects:{id:"SidebarHeader.noProjects",defaultMessage:"No projects yet"},noProjectChats:{id:"SidebarHeader.noProjectChats",defaultMessage:"No chats in this project"},startProjectChat:{id:"SidebarHeader.startProjectChat",defaultMessage:"Start a new chat in this project"}}),eXe=20;function tXe(){"use forget";const t=D.c(9),{projects:e,isLoading:n,refetch:s}=QC();let o;t[0]!==e?(o=e!=null?e:[],t[0]=e,t[1]=o):o=t[1];let r;t[2]!==o?(r=o.slice(0,hm),t[2]=o,t[3]=r):r=t[3];const a=r,l=e.length>0;let c;return t[4]!==n||t[5]!==a||t[6]!==s||t[7]!==l?(c={projects:a,areProjectsLoading:n,hasProjects:l,refetchProjects:s},t[4]=n,t[5]=a,t[6]=s,t[7]=l,t[8]=c):c=t[8],c}function Yq(t){"use forget";const e=D.c(3),n=vn();let s;return e[0]!==n||e[1]!==t?(s=()=>{var u,d,f,m;if(!t)return"";const o=t.gizmo,r=o.gizmo.id,a=(d=(u=o.gizmo.display.name)==null?void 0:u.trim())!=null?d:r,l=y_(n,r);if(l.isSkeleton$()){const p=(f=Q7(o))==null?void 0:f.trim();return p&&p.length>0?p:a}const c=(m=l.title$())==null?void 0:m.trim();return c&&c.length>0?c:a},e[0]=n,e[1]=t,e[2]=s):s=e[2],X(s)}function _C(t){"use forget";const e=D.c(2),{project:n}=t,s=Yq(n);let o;return e[0]!==s?(o=i.jsx("span",{className:"text-token-text-primary truncate text-sm",children:s}),e[0]=s,e[1]=o):o=e[1],o}function nXe(t){"use forget";const e=D.c(19),{projects:n,hasProjects:s,serverThreadId:o,onClose:r,onStartProjectChat:a,startProjectChatLabel:l,onOpenProjects:c}=t;if(!s)return null;let u;e[0]!==c?(u=g=>{g&&(c==null||c())},e[0]=c,e[1]=u):u=e[1];let d;e[2]===Symbol.for("react.memo_cache_sentinel")?(d=i.jsx(ee.SubMenuTrigger,{fillContainer:!0,children:i.jsx(P,N({},sd.projects))}),e[2]=d):d=e[2];let f;if(e[3]!==r||e[4]!==a||e[5]!==n||e[6]!==o||e[7]!==l){let g;e[9]!==r||e[10]!==a||e[11]!==o||e[12]!==l?(g=h=>{const _=h.gizmo.gizmo.id;return i.jsxs(ee.Sub,{children:[i.jsx(ee.SubMenuTrigger,{fillContainer:!0,children:i.jsx("span",{className:"flex w-full items-center justify-between gap-2",children:i.jsx(_C,{project:h})})}),i.jsx(ee.Portal,{children:i.jsx(ee.SubContent,{className:"max-h-[50dvh] w-72 overflow-y-auto",children:i.jsxs(ee.Group,{"data-desktop-skip-link-handler":!0,className:"-mb-1.5 max-h-[50dvh] w-70 overflow-y-auto pb-1.5",separator:!1,children:[i.jsx(ee.Item,{fillContainer:!0,className:"mb-1 ps-1",onSelect:sXe,trailing:i.jsx(Gc,{"aria-label":l,onPointerDown:x=>{a(x,_)},onClick:x=>{a(x,_)},icon:Bp}),children:i.jsx(_C,{project:h})}),i.jsx(ee.Separator,{}),i.jsx(Zq,{project:h,serverThreadId:o,onSelectConversation:r})]})})})]},_)},e[9]=r,e[10]=a,e[11]=o,e[12]=l,e[13]=g):g=e[13],f=n.map(g),e[3]=r,e[4]=a,e[5]=n,e[6]=o,e[7]=l,e[8]=f}else f=e[8];let m;e[14]!==f?(m=i.jsx(ee.Portal,{children:i.jsx(ee.SubContent,{className:"max-h-[50dvh] w-72 overflow-y-auto",children:i.jsx(ee.Group,{separator:!1,children:f})})}),e[14]=f,e[15]=m):m=e[15];let p;return e[16]!==u||e[17]!==m?(p=i.jsxs(ee.Sub,{onOpenChange:u,children:[d,m]}),e[16]=u,e[17]=m,e[18]=p):p=e[18],p}function sXe(t){t.preventDefault()}function oXe(t){"use forget";const e=D.c(9),{projects:n,areProjectsLoading:s,onSelectProject:o}=t;if(s&&n.length===0){let l;return e[0]===Symbol.for("react.memo_cache_sentinel")?(l=i.jsxs(i.Fragment,{children:[i.jsx(vs,{}),i.jsx(vs,{})]}),e[0]=l):l=e[0],l}if(n.length===0){let l;return e[1]===Symbol.for("react.memo_cache_sentinel")?(l=i.jsx("div",{className:"text-token-text-secondary px-4 py-2 text-sm",children:i.jsx(P,N({},sd.noProjects))}),e[1]=l):l=e[1],l}let r;if(e[2]!==o||e[3]!==n){let l;e[5]!==o?(l=c=>{const u=c.gizmo.gizmo.id;return i.jsx(ee.Item,{fillContainer:!0,onSelect:d=>{d.preventDefault(),o(u)},subMenu:!0,children:i.jsx(_C,{project:c})},u)},e[5]=o,e[6]=l):l=e[6],r=n.map(l),e[2]=o,e[3]=n,e[4]=r}else r=e[4];let a;return e[7]!==r?(a=i.jsx(i.Fragment,{children:r}),e[7]=r,e[8]=a):a=e[8],a}function rXe(t){"use forget";const e=D.c(4),{project:n,serverThreadId:s,onSelectConversation:o}=t;if(!n)return null;let r;return e[0]!==o||e[1]!==n||e[2]!==s?(r=i.jsx(Zq,{project:n,serverThreadId:s,onSelectConversation:o}),e[0]=o,e[1]=n,e[2]=s,e[3]=r):r=e[3],r}function Zq(t){"use forget";const e=D.c(18),{project:n,serverThreadId:s,onSelectConversation:o}=t,r=n.gizmo.gizmo.id,{items:a,isLoading:l,refetch:c}=K7(r);let u;e[0]!==c?(u=()=>{c()},e[0]=c,e[1]=u):u=e[1];let d;e[2]!==r||e[3]!==c?(d=[r,c],e[2]=r,e[3]=c,e[4]=d):d=e[4],v.useEffect(u,d);let f,m;if(e[5]!==l||e[6]!==a||e[7]!==o||e[8]!==s){m=Symbol.for("react.early_return_sentinel");e:{const g=a.slice(0,eXe);if(l&&g.length===0){let _;e[11]===Symbol.for("react.memo_cache_sentinel")?(_=i.jsxs(i.Fragment,{children:[i.jsx(vs,{}),i.jsx(vs,{})]}),e[11]=_):_=e[11],m=_;break e}if(!l&&g.length===0){let _;e[12]===Symbol.for("react.memo_cache_sentinel")?(_=i.jsx("div",{className:"text-token-text-secondary px-4 py-2 text-sm",children:i.jsx(P,N({},sd.noProjectChats))}),e[12]=_):_=e[12],m=_;break e}let h;e[13]!==o||e[14]!==s?(h=_=>i.jsx(Fx,{className:"ps-2",conversation:_,hideOverflowMenu:!0,isActive:_.id===s,onSelect:o},_.id),e[13]=o,e[14]=s,e[15]=h):h=e[15],f=g.map(h)}e[5]=l,e[6]=a,e[7]=o,e[8]=s,e[9]=f,e[10]=m}else f=e[9],m=e[10];if(m!==Symbol.for("react.early_return_sentinel"))return m;let p;return e[16]!==f?(p=i.jsx(i.Fragment,{children:f}),e[16]=f,e[17]=p):p=e[17],p}function aXe(t){"use forget";var ae;const e=D.c(63),{serverThreadId:n,isAuth:s,isNarrowSidebar:o,isRootMenuVisible:r,onActiveStateChange:a,onClose:l,backMessage:c,switchChatMessage:u}=t,d=te(),{projects:f,areProjectsLoading:m,hasProjects:p,refetchProjects:g}=tXe(),[h,_]=v.useState("root"),[x,b]=v.useState(null);let y;e:{if(!x){y=null;break e}let le;e[0]!==x||e[1]!==f?(le=(ae=f.find(pe=>{const{gizmo:_e}=pe;return _e.gizmo.id===x}))!=null?ae:null,e[0]=x,e[1]=f,e[2]=le):le=e[2],y=le}const S=y;let C=h;!o&&C!=="root"&&(C="root"),!p&&(C==="projectsList"||C==="projectChats")&&(C="history"),C==="projectChats"&&!S&&(C="projectsList");const w=C,k=w==="projectChats"?S:null,E=Yq(k);let T;e[3]!==d?(T=d.formatMessage(sd.startProjectChat),e[3]=d,e[4]=T):T=e[4];const M=T;let A;e[5]!==o||e[6]!==l?(A=(le,pe)=>{le.preventDefault(),le.stopPropagation(),ot.newConversationGizmoId$.set(pe),ot.wantsNewConversation$.set(!0),ot.selectedConversationId$.set(void 0),o&&(b(null),_("root")),l()},e[5]=o,e[6]=l,e[7]=A):A=e[7];const I=A;let j,R;e[8]!==r||e[9]!==g?(j=()=>{r&&g()},R=[r,g],e[8]=r,e[9]=g,e[10]=j,e[11]=R):(j=e[10],R=e[11]),v.useEffect(j,R);let O,L;e[12]!==g||e[13]!==w?(O=()=>{w==="projectsList"&&g()},L=[w,g],e[12]=g,e[13]=w,e[14]=O,e[15]=L):(O=e[14],L=e[15]),v.useEffect(O,L);let B,U;if(e[16]!==a||e[17]!==w?(B=()=>{a(w!=="root")},U=[a,w],e[16]=a,e[17]=w,e[18]=B,e[19]=U):(B=e[18],U=e[19]),v.useEffect(B,U),!s)return null;let H;e[20]!==I||e[21]!==p||e[22]!==o||e[23]!==r||e[24]!==l||e[25]!==f||e[26]!==g||e[27]!==w||e[28]!==n||e[29]!==M||e[30]!==u?(H=()=>!r||w!=="root"?null:i.jsx(i.Fragment,{children:i.jsxs(ee.Sub,{children:[i.jsx(ee.SubMenuTrigger,{fillContainer:!0,onClick:le=>{o&&(le.preventDefault(),_("history"))},children:i.jsx(P,N({},u))}),o?null:i.jsx(ee.Portal,{children:i.jsxs(ee.SubContent,{"data-desktop-skip-link-handler":!0,className:"max-h-[50dvh] w-72 overflow-y-auto",children:[p?i.jsx(nXe,{projects:f,hasProjects:p,serverThreadId:n,onClose:l,onStartProjectChat:(le,pe)=>I(le,pe),startProjectChatLabel:M,onOpenProjects:g}):null,i.jsx(Sj,{activeId:n,hideOverflowMenu:!0,onSelect:l})]})})]})}),e[20]=I,e[21]=p,e[22]=o,e[23]=r,e[24]=l,e[25]=f,e[26]=g,e[27]=w,e[28]=n,e[29]=M,e[30]=u,e[31]=H):H=e[31];const $=H;let F;e[32]!==c||e[33]!==p||e[34]!==l||e[35]!==w||e[36]!==n?(F=()=>w!=="history"?null:i.jsxs(i.Fragment,{children:[i.jsx(ee.Item,{icon:i.jsx(Uu,{className:"h-4 w-4"}),color:"default",className:"mb-1 ps-1",onClick:le=>{le.preventDefault(),_("root")},fillContainer:!0,children:i.jsx(P,N({},c))}),i.jsx(ee.Separator,{}),i.jsxs(ee.Group,{"data-desktop-skip-link-handler":!0,className:"-mb-1.5 max-h-[50dvh] w-70 overflow-y-auto pb-1.5",separator:!1,children:[p?i.jsx(ee.Item,{fillContainer:!0,onSelect:le=>{le.preventDefault(),b(null),_("projectsList")},subMenu:!0,children:i.jsx(P,N({},sd.projects))}):null,i.jsx(Sj,{activeId:n,hideOverflowMenu:!0,onSelect:()=>{_("root"),l()}})]})]}),e[32]=c,e[33]=p,e[34]=l,e[35]=w,e[36]=n,e[37]=F):F=e[37];const z=F;let W;e[38]!==m||e[39]!==f||e[40]!==w?(W=()=>w!=="projectsList"?null:i.jsxs(i.Fragment,{children:[i.jsx(ee.Item,{icon:i.jsx(Uu,{className:"h-4 w-4"}),color:"default",className:"mb-1 ps-1",onClick:le=>{le.preventDefault(),_("history")},fillContainer:!0,children:i.jsx(P,N({},sd.projects))}),i.jsx(ee.Group,{"data-desktop-skip-link-handler":!0,className:"-mb-1.5 max-h-[50dvh] w-70 overflow-y-auto pb-1.5",separator:!1,children:i.jsx(oXe,{projects:f,areProjectsLoading:m,onSelectProject:le=>{b(le),_("projectChats")}})})]}),e[38]=m,e[39]=f,e[40]=w,e[41]=W):W=e[41];const Y=W;let K;e[42]!==k||e[43]!==E||e[44]!==I||e[45]!==l||e[46]!==w||e[47]!==n||e[48]!==M?(K=()=>w!=="projectChats"||!k?null:i.jsxs(i.Fragment,{children:[i.jsx(ee.Item,{icon:i.jsx(Uu,{className:"h-4 w-4"}),color:"default",className:"mb-1 ps-1",onClick:le=>{le.preventDefault(),_("projectsList")},fillContainer:!0,trailing:i.jsx(Gc,{"aria-label":M,onPointerUp:le=>I(le,k.gizmo.gizmo.id),onClick:le=>I(le,k.gizmo.gizmo.id),icon:Bp}),children:E}),i.jsx(ee.Separator,{}),i.jsx(ee.Group,{"data-desktop-skip-link-handler":!0,className:"-mb-1.5 max-h-[50dvh] w-70 overflow-y-auto pb-1.5",separator:!1,children:i.jsx(rXe,{project:k,serverThreadId:n,onSelectConversation:()=>{_("root"),b(null),l()}})})]}),e[42]=k,e[43]=E,e[44]=I,e[45]=l,e[46]=w,e[47]=n,e[48]=M,e[49]=K):K=e[49];const Z=K;let J;e[50]!==$?(J=$(),e[50]=$,e[51]=J):J=e[51];let Q;e[52]!==z?(Q=z(),e[52]=z,e[53]=Q):Q=e[53];let ne;e[54]!==Y?(ne=Y(),e[54]=Y,e[55]=ne):ne=e[55];let ie;e[56]!==Z?(ie=Z(),e[56]=Z,e[57]=ie):ie=e[57];let fe;return e[58]!==J||e[59]!==Q||e[60]!==ne||e[61]!==ie?(fe=i.jsxs(i.Fragment,{children:[J,Q,ne,ie]}),e[58]=J,e[59]=Q,e[60]=ne,e[61]=ie,e[62]=fe):fe=e[62],fe}const iXe=je(()=>Me(()=>import("./b18bdd4a-kenkf1hfr1kes1pk.js"),__vite__mapDeps([184,1,2,3])).then(t=>t.DeleteConversationConfirmationModalContainer));je(()=>Me(()=>import("./cf5af22f-o10ev2x7wsumpww2.js"),__vite__mapDeps([188,1,2,3])).then(t=>t.default));function lXe(t){"use forget";const e=D.c(25),{clientThreadId:n,onClose:s}=t,o=Un(n),r=e8();let a;e[0]!==n?(a=Pt(n),e[0]=n,e[1]=a):a=e[1];const l=a;let c;e[2]===Symbol.for("react.memo_cache_sentinel")?(c=mt(),e[2]=c):c=e[2];const u=c;let d;e[3]!==r?(d=()=>{r==null||r.openInNewTab()},e[3]=r,e[4]=d):d=e[4];const f=d,m=jU(),[p,g]=v.useState(!1),[h,_]=v.useState(!1),x=!p&&!h;let b,y;e[5]===Symbol.for("react.memo_cache_sentinel")?(b=()=>g(!0),y=()=>g(!1),e[5]=b,e[6]=y):(b=e[5],y=e[6]);let S;e[7]!==l||e[8]!==p||e[9]!==x?(S=i.jsx(QJe,{conversation:l,isRootVisible:x,isPanelVisible:p,onOpenPanel:b,onClosePanel:y,backMessage:tm.back}),e[7]=l,e[8]=p,e[9]=x,e[10]=S):S=e[10];let C;e[11]!==m||e[12]!==x||e[13]!==s||e[14]!==o?(C=i.jsx(aXe,{serverThreadId:o,isAuth:u,isNarrowSidebar:m,isRootMenuVisible:x,onActiveStateChange:_,onClose:s,backMessage:tm.back,switchChatMessage:tm.switchChat}),e[11]=m,e[12]=x,e[13]=s,e[14]=o,e[15]=C):C=e[15];let w;e[16]!==f||e[17]!==x||e[18]!==s||e[19]!==o?(w=x?i.jsxs(i.Fragment,{children:[o?i.jsxs(i.Fragment,{children:[i.jsx(ee.Item,{icon:ka,onClick:f,fillContainer:!0,children:i.jsx(P,N({},tm.openChatInTab))}),i.jsx(ee.Item,{icon:yi,color:"danger",onClick:()=>{o&&(rt(iXe,{serverThreadId:o,isActiveConversation:!0}),s())},fillContainer:!0,children:i.jsx(P,N({},tm.deleteChat))})]}):null,null]}):null,e[16]=f,e[17]=x,e[18]=s,e[19]=o,e[20]=w):w=e[20];let k;return e[21]!==S||e[22]!==C||e[23]!==w?(k=i.jsxs(i.Fragment,{children:[S,C,w]}),e[21]=S,e[22]=C,e[23]=w,e[24]=k):k=e[24],k}const tm=we({switchChat:{id:"SidebarHeader.switchChat",defaultMessage:"Switch Chat"},openChatInTab:{id:"SidebarHeader.openChatInTab",defaultMessage:"Open Chat in Tab"},deleteChat:{id:"SidebarHeader.deleteChat",defaultMessage:"Delete Chat"},openFeedbackModal:{id:"SidebarHeader.openFeedbackModal",defaultMessage:"Share Feedback"},back:{id:"SidebarHeader.back",defaultMessage:"Back"}});var OP;const Gh=Tt.button(OP||(OP=_t(["\n  hover:bg-token-interactive-bg-secondary-hover\n  focus-visible:bg-token-interactive-bg-secondary-hover\n  radix-state-open:bg-token-interactive-bg-secondary-hover\n  flex h-[34px] w-[34px] items-center justify-center rounded-[8px]\n  focus-visible:outline-0\n"])));function K0t(t){"use forget";const e=D.c(41),{clientThreadId:n}=t,s=te(),[o,r]=v.useState(!1),a=e8();let l;e[0]===Symbol.for("react.memo_cache_sentinel")?(l=G7(),e[0]=l):l=e[0];const c=l;let u;e[1]!==a?(u=()=>{_c()&&Q9.set("new_page_view"),a==null||a.becomeMainPage()},e[1]=a,e[2]=u):u=e[2];const d=u,f=cXe;let m;e[3]!==a?(m=()=>{var L;(L=a==null?void 0:a.closeSideChat)==null||L.call(a)},e[3]=a,e[4]=m):m=e[4];const p=m;let g;e[5]!==d||e[6]!==s?(g=c&&i.jsx(St,{triggerAs:null,label:i.jsx(P,N({},Mi.expandSidebar)),children:i.jsx(Gh,{"aria-label":s.formatMessage(Mi.expandSidebar),onClick:d,children:i.jsx(ZJe,{className:"icon -scale-x-100"})})}),e[5]=d,e[6]=s,e[7]=g):g=e[7];let h;e[8]===Symbol.for("react.memo_cache_sentinel")?(h=i.jsx(P,N({},Mi.openChatMenu)),e[8]=h):h=e[8];let _;e[9]!==s?(_=s.formatMessage(Mi.openChatMenu),e[9]=s,e[10]=_):_=e[10];let x;e[11]===Symbol.for("react.memo_cache_sentinel")?(x=i.jsx($s,{className:"icon"}),e[11]=x):x=e[11];let b;e[12]!==_?(b=i.jsx(St,{triggerAs:null,label:h,children:i.jsx(ee.BasicTrigger,{asChild:!0,children:i.jsx(Gh,{"aria-label":_,children:x})})}),e[12]=_,e[13]=b):b=e[13];let y;e[14]===Symbol.for("react.memo_cache_sentinel")?(y=()=>r(!1),e[14]=y):y=e[14];let S;e[15]!==n?(S=i.jsx(ee.Portal,{children:i.jsx(ee.Content,{children:i.jsx(lXe,{clientThreadId:n,onClose:y})})}),e[15]=n,e[16]=S):S=e[16];let C;e[17]!==o||e[18]!==S||e[19]!==b?(C=i.jsxs(ee.Root,{open:o,onOpenChange:r,children:[b,S]}),e[17]=o,e[18]=S,e[19]=b,e[20]=C):C=e[20];let w;e[21]===Symbol.for("react.memo_cache_sentinel")?(w=i.jsx(P,N({},Mi.newChat)),e[21]=w):w=e[21];let k;e[22]!==s?(k=s.formatMessage(Mi.newChat),e[22]=s,e[23]=k):k=e[23];let E;e[24]===Symbol.for("react.memo_cache_sentinel")?(E=i.jsx(Bp,{className:"icon"}),e[24]=E):E=e[24];let T;e[25]!==k?(T=i.jsx(St,{triggerAs:null,label:w,children:i.jsx(Gh,{"aria-label":k,onClick:f,children:E})}),e[25]=k,e[26]=T):T=e[26];let M;e[27]===Symbol.for("react.memo_cache_sentinel")?(M=i.jsx(P,N({},Mi.closeSidebar)),e[27]=M):M=e[27];let A;e[28]!==s?(A=s.formatMessage(Mi.closeSidebar),e[28]=s,e[29]=A):A=e[29];let I;e[30]===Symbol.for("react.memo_cache_sentinel")?(I=i.jsx(d8,{className:"icon"}),e[30]=I):I=e[30];let j;e[31]!==p||e[32]!==A?(j=i.jsx(St,{triggerAs:null,label:M,children:i.jsx(Gh,{"aria-label":A,onClick:p,children:I})}),e[31]=p,e[32]=A,e[33]=j):j=e[33];let R;e[34]!==C||e[35]!==T||e[36]!==j?(R=i.jsxs("div",{className:"ms-auto flex items-center gap-2",children:[C,T,j]}),e[34]=C,e[35]=T,e[36]=j,e[37]=R):R=e[37];let O;return e[38]!==R||e[39]!==g?(O=i.jsxs("div",{className:"flex w-full items-center justify-between",children:[g,R]}),e[38]=R,e[39]=g,e[40]=O):O=e[40],O}function cXe(){ot.newConversationGizmoId$.set(void 0),ot.wantsNewConversation$.set(!0),ot.selectedConversationId$.set(void 0)}const Mi=we({expandSidebar:{id:"SidebarHeader.expandSidebar",defaultMessage:"Back to ChatGPT"},openChatMenu:{id:"SidebarHeader.openChatMenu",defaultMessage:"Open chat menu"},newChat:{id:"SidebarHeader.startNewChat",defaultMessage:"New chat"},closeSidebar:{id:"SidebarHeader.closeSidebar",defaultMessage:"Close side chat"}});function uXe({projectResource:t}){var S;const e=te(),n=(S=t.gizmo)==null?void 0:S.id,s=gl(n),o=X(ln),r=jn(),a=ui(t),l=l_(t),c=(()=>{const C=r.pathname.replace(/\/+$/,"");return/^\/g\/[^/]+\/project$/.test(C)})(),u=O3(t),d=t.gizmo.display.name,f=X(()=>Y7(t)),m=X(()=>Z7(t));if(!(s&&!o&&!c)||t.gizmo.gizmo_type!==r7.PROJECT)return null;const g=d?e.formatMessage(Zb.openProjectHome,{projectName:d}):e.formatMessage(Zb.openProjectHomeFallback),h=gc(t);let _=i.jsx(ag,{color:f,emoji:m,strict:!0,isSharedProject:u});l&&(_=i.jsx(GW,{className:"icon shrink-0","aria-hidden":!0}));let x=g;l&&(x=e.formatMessage(TLe.potionAgentInternal));const b=i.jsx(ko,{to:h,"aria-label":x,className:q("hover:bg-token-bg-tertiary focus-visible:outline-token-outline-primary text-token-text-secondary ms-2 inline-flex items-center justify-center rounded-lg focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2",a?"h-9 gap-2 px-3":"h-9 w-9"),children:a?i.jsxs("div",{className:"flex items-center gap-1.5",children:[_,i.jsx("span",{className:"text-token-text-primary text-lg",children:x})]}):_}),y=a?null:d!=null?d:e.formatMessage(Zb.projectNameFallback);return i.jsxs("div",{className:"flex items-center",children:[i.jsx(St,{label:y,children:b}),!a&&i.jsx(zi,{className:"icon-sm text-token-text-tertiary","aria-hidden":"true"})]})}const Zb=we({openProjectHome:{id:"threadHeader.openProjectHome",defaultMessage:"Open {projectName} project"},openProjectHomeFallback:{id:"threadHeader.openProjectHomeFallback",defaultMessage:"Open project home"},projectNameFallback:{id:"threadHeader.projectNameFallback",defaultMessage:"Project"}});function Y0t(t){"use forget";const e=D.c(15),{className:n,threadHeaderDropdown:s,conversationActions:o,superWidgetTabs:r,projectResource:a}=t,l=cp(),c=_c();let u;e[0]!==l?(u=l&&!mt(),e[0]=l,e[1]=u):u=e[1];const d=!u;let f;e[2]!==r?(f=r!=null?r:i.jsx(PYe,{textClassName:"text-sm"}),e[2]=r,e[3]=f):f=e[3];const m=f;if(c){const h=d&&s;let _;return e[4]!==n||e[5]!==o||e[6]!==a||e[7]!==h||e[8]!==m?(_=i.jsx(dXe,{className:n,conversationActions:o,threadHeaderDropdown:h,superWidgetTabs:m,projectResource:a}),e[4]=n,e[5]=o,e[6]=a,e[7]=h,e[8]=m,e[9]=_):_=e[9],_}const p=d&&s;let g;return e[10]!==n||e[11]!==o||e[12]!==p||e[13]!==m?(g=i.jsx(fXe,{className:n,conversationActions:o,threadHeaderDropdown:p,superWidgetTabs:m}),e[10]=n,e[11]=o,e[12]=p,e[13]=m,e[14]=g):g=e[14],g}function dXe(t){"use forget";const e=D.c(22),{className:n,conversationActions:s,threadHeaderDropdown:o,superWidgetTabs:r,projectResource:a}=t,l=v.useRef(null),c=v.useRef(null),u=v.useRef(null),d=v.useRef(null);let f,m;e[0]===Symbol.for("react.memo_cache_sentinel")?(f=()=>{const w=l.current,k=c.current,E=u.current,T=d.current;if(!w||!k||!E||!T)return;const M=()=>{const I=w.getBoundingClientRect().width,j=E.getBoundingClientRect().width,R=k.getBoundingClientRect(),O=.5*(I-j),L=R.right>O;E.style.justifySelf=L?"start":"center"},A=new ResizeObserver(M);return A.observe(w,{box:"border-box"}),A.observe(k,{box:"border-box"}),A.observe(E,{box:"border-box"}),M(),()=>{A.disconnect()}},m=[],e[0]=f,e[1]=m):(f=e[0],m=e[1]),bs(f,m);let p;e[2]!==n?(p=q("h-header-height w-full px-2 sm:grid sm:grid-cols-[minmax(max-content,1fr)_auto_minmax(0,1fr)] sm:px-0",n),e[2]=n,e[3]=p):p=e[3];let g;e[4]!==a?(g=a?i.jsx(uXe,{projectResource:a}):null,e[4]=a,e[5]=g):g=e[5];let h;e[6]!==o?(h=i.jsx("div",{ref:c,children:o}),e[6]=o,e[7]=h):h=e[7];let _;e[8]!==g||e[9]!==h?(_=i.jsxs("div",{className:"z-10 col-start-1 row-start-1 hidden items-center self-center justify-self-start md:flex",children:[g,h]}),e[8]=g,e[9]=h,e[10]=_):_=e[10];let x,b;e[11]===Symbol.for("react.memo_cache_sentinel")?(x=i.jsx(to,{className:"col-span-3 col-start-1 row-start-1 w-full",children:i.jsx("div",{className:"w-full",ref:d})}),b=q("no-scrollbar col-start-2 row-start-1 -mb-px h-full w-full min-w-0 overflow-x-auto overflow-y-hidden"),e[11]=x,e[12]=b):(x=e[11],b=e[12]);let y;e[13]!==r?(y=i.jsx("div",{className:b,ref:u,children:r}),e[13]=r,e[14]=y):y=e[14];let S;e[15]!==s?(S=i.jsx("div",{className:"col-start-3 row-start-1 hidden items-center justify-self-end overflow-visible md:flex",children:s}),e[15]=s,e[16]=S):S=e[16];let C;return e[17]!==S||e[18]!==p||e[19]!==_||e[20]!==y?(C=i.jsxs("div",{className:p,ref:l,children:[_,x,y,S]}),e[17]=S,e[18]=p,e[19]=_,e[20]=y,e[21]=C):C=e[21],C}function fXe(t){"use forget";const e=D.c(17),{className:n,conversationActions:s,threadHeaderDropdown:o,superWidgetTabs:r}=t,a=v.useRef(null),l=v.useRef(null),c=v.useRef(null),u=v.useRef(null);let d,f;e[0]===Symbol.for("react.memo_cache_sentinel")?(d=()=>{const y=a.current,S=l.current,C=c.current,w=u.current;if(!y||!S||!C||!w)return;const k=()=>{const T=y.getBoundingClientRect().width,M=C.getBoundingClientRect().width,A=S.getBoundingClientRect(),I=.5*(T-M),j=A.right>I;C.style.justifySelf=j?"start":"center"},E=new ResizeObserver(k);return E.observe(y,{box:"border-box"}),E.observe(S,{box:"border-box"}),E.observe(C,{box:"border-box"}),k(),()=>{E.disconnect()}},f=[],e[0]=d,e[1]=f):(d=e[0],f=e[1]),bs(d,f);let m;e[2]!==n?(m=q("h-header-height w-full px-2 sm:grid sm:grid-cols-[minmax(max-content,1fr)_auto_minmax(0,1fr)] sm:px-0",n),e[2]=n,e[3]=m):m=e[3];let p;e[4]!==o?(p=i.jsx("div",{className:"z-10 col-start-1 row-start-1 hidden self-center justify-self-start pe-2 md:flex",ref:l,children:o}),e[4]=o,e[5]=p):p=e[5];let g,h;e[6]===Symbol.for("react.memo_cache_sentinel")?(g=i.jsx(to,{className:"col-span-3 col-start-1 row-start-1 w-full",children:i.jsx("div",{className:"w-full",ref:u})}),h=q("no-scrollbar col-start-2 row-start-1 -mb-px h-full w-full min-w-0 overflow-x-auto overflow-y-hidden"),e[6]=g,e[7]=h):(g=e[6],h=e[7]);let _;e[8]!==r?(_=i.jsx("div",{className:h,ref:c,children:r}),e[8]=r,e[9]=_):_=e[9];let x;e[10]!==s?(x=i.jsx("div",{className:"col-start-3 row-start-1 hidden items-center justify-self-end overflow-visible md:flex",children:s}),e[10]=s,e[11]=x):x=e[11];let b;return e[12]!==m||e[13]!==p||e[14]!==_||e[15]!==x?(b=i.jsxs("div",{className:m,ref:a,children:[p,g,_,x]}),e[12]=m,e[13]=p,e[14]=_,e[15]=x,e[16]=b):b=e[16],b}const mXe="https://openai.com/news/";function pXe(t){return i.jsx(P,{id:"5-2-nux-description",defaultMessage:"Our latest model with improvements in writing, coding, and reasoning. {learnMore}",values:{learnMore:i.jsx(Fs,{href:t,className:"underline",children:i.jsx(P,{id:"S50a4f",defaultMessage:"Learn more"})})}})}function Z0t(t){"use forget";var R;const e=D.c(27),{conversation:n,children:s}=t;let o;e[0]!==n?(o=()=>n.serverId$(),e[0]=n,e[1]=o):o=e[1];const r=X(o),a=Ze(n.id,ve.getCurrentLeafId);let l;e[2]!==a||e[3]!==r?(l={serverThreadId:r,leafId:a},e[2]=a,e[3]=r,e[4]=l):l=e[4];const c=Sw(l),{mutate:u}=bg(),{mutate:d}=vg();let f;e[5]===Symbol.for("react.memo_cache_sentinel")?(f=mn("1760795888"),e[5]=f):f=e[5];const m=f.value,p=X(hXe);let g;e[6]!==n?(g=()=>Lr(n),e[6]=n,e[7]=g):g=e[7];const h=X(g),_=String((R=m==null?void 0:m.blog_post_link)!=null?R:mXe);let x;e[8]!==h.categories?(x=h.categories.some(gXe),e[8]=h.categories,e[9]=x):x=e[9];const b=x,y=(c==null?void 0:c.beacon_id)==="purple_rain_nux"&&b,S=v.useRef(!1),C=v.useRef(!1);let w,k;e[10]!==c||e[11]!==u||e[12]!==y?(w=()=>{!y||!c||S.current||(Ad(c,"show"),u(c.beacon_id),S.current=!0)},k=[c,u,y],e[10]=c,e[11]=u,e[12]=y,e[13]=w,e[14]=k):(w=e[13],k=e[14]),v.useEffect(w,k);let E;e[15]!==c||e[16]!==d||e[17]!==y?(E=()=>{!y||!c||C.current||(Ad(c,"dismiss"),d(c.beacon_id),kt(We.hasSeenPurpleRainNux),Wo.dismiss(),C.current=!0)},e[15]=c,e[16]=d,e[17]=y,e[18]=E):E=e[18];const T=E;if(!y){let O;return e[19]!==s?(O=i.jsx(i.Fragment,{children:s}),e[19]=s,e[20]=O):O=e[20],O}let M,A;e[21]===Symbol.for("react.memo_cache_sentinel")?(A=i.jsx(P,{id:"5-2-nux-title",defaultMessage:"GPT 5.2"}),M=pXe(_),e[21]=M,e[22]=A):(M=e[21],A=e[22]);const I=p?"start":"center";let j;return e[23]!==s||e[24]!==T||e[25]!==I?(j=i.jsx(hf,{announcementKey:We.hasSeenPurpleRainNux,show:!0,side:"bottom",theme:"bright",dismissOnOutsideClick:!0,badge:"new",title:A,description:M,onDismiss:T,sideOffset:0,align:I,alignOffset:0,children:s}),e[23]=s,e[24]=T,e[25]=I,e[26]=j):j=e[26],j}function gXe(t){return t.defaultModel==="gpt-5-2"}function hXe(){return gp()}const Qq=We.TemporaryChatOnboarding;function Q0t(){const t=xe("2322626856"),e=Hs(),{eligible:n}=Ct(Qq);return t?!1:n&&e}function nm({icon:t,title:e,description:n}){return i.jsxs("div",{className:"flex items-start",children:[i.jsx("div",{className:"mt-1 h-5 w-5 shrink-0",children:t}),i.jsxs("div",{className:"ms-4",children:[i.jsx("div",{className:"text-lg font-semibold",children:e}),i.jsx("p",{className:"text-token-text-secondary mt-1 text-sm",children:n})]})]})}const _Xe=({className:t})=>i.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:t,children:[i.jsx("rect",{x:"2",y:"6",width:"5",height:"12",rx:"2",stroke:"currentColor",strokeWidth:"2"}),i.jsx("path",{d:"M2 12H1",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M22 12H23",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("rect",{x:"17",y:"6",width:"5",height:"12",rx:"2",stroke:"currentColor",strokeWidth:"2"}),i.jsx("path",{d:"M7 12L12 12",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M16 12H17",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M9 3L15 21",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]});function J0t({onClose:t}){const[e,n]=v.useState(!0),s=Et(),o=te(),r=Fp(),a=v.useCallback(()=>{kt(Qq),n(!1),t==null||t()},[t]);return v.useEffect(()=>{V.logUpsellOrModalEvent(qn,{eventId:"temporary_chat_onboarding_modal_shown",type:Kn.UPSELL_OR_MODAL_TYPE_CUSTOM_NUX_MODAL})},[]),s!=null&&s.isWorkspaceAccount()?i.jsx(en,{testId:"modal-temporary-chat-onboarding",isOpen:e,onClose:uo,size:"custom",className:"max-w-xl",type:"success",title:o.formatMessage(Cs.title),primaryButton:i.jsx(Es.Button,{onClick:a,title:o.formatMessage(Cs.continue),color:"primary"}),children:i.jsxs("div",{className:"mb-6 flex flex-col gap-3",children:[i.jsx(nm,{icon:i.jsx(wd,{className:"h-full w-full"}),title:o.formatMessage(Cs.bulletTitle1),description:o.formatMessage({id:"nSGhxr",defaultMessage:"Temporary chats won't appear in your history."})}),i.jsx(nm,{icon:r?i.jsx(jr,{className:"h-full w-full"}):i.jsx(q4,{className:"h-full w-full"}),title:o.formatMessage(r?Cs.bulletTitle2MemoryAvailable:Cs.bulletTitle2MemoryUnavailable),description:o.formatMessage(r?Cs.bulletDescription2MemoryAvailable:Cs.bulletDescription2MemoryUnavailable)})]})}):i.jsx(en,{testId:"modal-temporary-chat-onboarding",isOpen:e,onClose:uo,size:"custom",className:"max-w-xl",type:"success",title:o.formatMessage(Cs.title),primaryButton:i.jsx(Es.Button,{onClick:a,title:o.formatMessage(Cs.continue),color:"primary"}),children:i.jsxs("div",{className:"mb-6 flex flex-col gap-3",children:[i.jsx(nm,{icon:i.jsx(wd,{className:"h-full w-full"}),title:o.formatMessage(Cs.bulletTitle1),description:o.formatMessage(Cs.bulletDescription1)}),i.jsx(nm,{icon:i.jsx(_Xe,{className:"h-full w-full"}),title:o.formatMessage(Cs.bulletTitle3),description:o.formatMessage(Cs.bulletDescription3)}),i.jsx(nm,{icon:r?i.jsx(jr,{className:"h-full w-full"}):i.jsx(q4,{className:"h-full w-full"}),title:o.formatMessage(r?Cs.bulletTitle2MemoryAvailable:Cs.bulletTitle2MemoryUnavailable),description:o.formatMessage(r?Cs.bulletDescription2MemoryAvailable:Cs.bulletDescription2MemoryUnavailable)})]})})}const Cs=we({title:{id:"TemporaryChatOnboardingModal.title",defaultMessage:"Temporary Chat"},bulletTitle1:{Icon:i.jsx(wd,{className:"h-full w-full"}),id:"TemporaryChatOnboardingModal.bulletTitle1",defaultMessage:"Not in history"},bulletDescription1:{id:"TemporaryChatOnboardingModal.bulletDescription1.1",defaultMessage:"Temporary chats won't appear in your history. For safety purposes, we may keep a copy of your chat for up to 30 days."},bulletTitle2MemoryAvailable:{id:"TemporaryChatOnboardingModal.bulletTitle2MemoryAvailable",defaultMessage:"Memory off"},bulletDescription2MemoryAvailable:{id:"rmWwWN",defaultMessage:"While in a temporary chat, ChatGPT won't use or update its memory. Custom instructions will still be followed if you have them enabled."},bulletTitle2MemoryUnavailable:{id:"TemporaryChatOnboardingModal.bulletTitle2MemoryUnavailable",defaultMessage:"Follows Custom Instructions"},bulletDescription2MemoryUnavailable:{id:"TemporaryChatOnboardingModal.bulletDescription2MemoryUnavailable",defaultMessage:"Custom Instructions will still be followed if you have them enabled."},bulletTitle3:{id:"TemporaryChatOnboardingModal.bulletTitle3",defaultMessage:"No model training"},bulletDescription3:{id:"TemporaryChatOnboardingModal.bulletDescription3",defaultMessage:"Temporary chats won't be used to improve our models."},continue:{id:"TemporaryChatOnboardingModal.continue",defaultMessage:"Continue"}});var Jq=(t=>(t.GENERIC="generic",t.GENERIC_FREE_TRIAL="generic_free_trial",t.GO="go",t.PLUS="plus",t.FREE_WORKSPACE="free_workspace",t))(Jq||{});const Qb="thread_header_upgrade_pill_dismissed_event",xXe=1440*60*1e3,yXe=3e3,bXe=new Set(["constant","convo","chat"]);function vXe(t){switch(t){case et.PLUS:return"Plus";case et.GO:return"Go";case et.SELF_SERVE_BUSINESS:return"Business";default:return t}}function Cj(t){if(typeof t=="number"&&Number.isFinite(t))return t;if(typeof t=="string"){const e=Number(t);return Number.isFinite(e)?e:null}return null}function SXe(){"use forget";const t=D.c(21),e=mo(),n=e==null?void 0:e.id,s=Ze(n,CXe),[o,r]=v.useState(!1),a=v.useRef(null),l=v.useRef(null),c=v.useRef(!1),u=v.useRef(!1),d=v.useRef(null);let f,m,p;if(t[0]===Symbol.for("react.memo_cache_sentinel")){const U=Je("2740442031");f=U.get("animate_button_glimmer",!1);const H=U.get("glimmer_mode","off"),$=U.get("glimmer_animate_delay",10);m=Math.max(0,$)*1e3,p=bXe.has(H)?H:"off",t[0]=f,t[1]=m,t[2]=p}else f=t[0],m=t[1],p=t[2];const g=p,h=f;let _;t[3]===Symbol.for("react.memo_cache_sentinel")?(_=()=>{typeof window>"u"||(a.current&&window.clearTimeout(a.current),l.current&&window.clearTimeout(l.current))},t[3]=_):_=t[3];const x=_;let b;t[4]===Symbol.for("react.memo_cache_sentinel")?(b=()=>{window.requestAnimationFrame(()=>{r(!0),a.current=window.setTimeout(()=>{r(!1)},yXe)})},t[4]=b):b=t[4];const y=b;let S;t[5]===Symbol.for("react.memo_cache_sentinel")?(S=U=>{const H=U===void 0?0:U;!h||typeof window>"u"||(x(),l.current=window.setTimeout(y,Math.max(0,H)))},t[5]=S):S=t[5];const C=S;let w,k;t[6]===Symbol.for("react.memo_cache_sentinel")?(w=()=>()=>{x()},k=[x],t[6]=w,t[7]=k):(w=t[6],k=t[7]),v.useEffect(w,k);let E,T;t[8]===Symbol.for("react.memo_cache_sentinel")?(E=()=>{h||x()},T=[x,h],t[8]=E,t[9]=T):(E=t[8],T=t[9]),v.useEffect(E,T);let M,A;t[10]===Symbol.for("react.memo_cache_sentinel")?(M=()=>{g!=="convo"&&g!=="chat"||u.current||(u.current=!0,C(m))},A=[g,m,C],t[10]=M,t[11]=A):(M=t[10],A=t[11]),v.useEffect(M,A);let I;t[12]===Symbol.for("react.memo_cache_sentinel")?(I=()=>{if(!(g!=="convo"&&g!=="chat")){if(!c.current){c.current=!0;return}C(0)}},t[12]=I):I=t[12];let j;t[13]!==n?(j=[n,g,C],t[13]=n,t[14]=j):j=t[14],v.useEffect(I,j);let R;t[15]===Symbol.for("react.memo_cache_sentinel")?(R=()=>{d.current=null},t[15]=R):R=t[15];let O;t[16]!==n?(O=[n],t[16]=n,t[17]=O):O=t[17],v.useEffect(R,O);let L,B;return t[18]!==s?(L=()=>{if(!(g!=="chat"||!s)){if(d.current==null){d.current=s;return}d.current!==s&&(d.current=s,C(0))}},B=[g,s,C],t[18]=s,t[19]=L,t[20]=B):(L=t[19],B=t[20]),v.useEffect(L,B),h?g==="constant"?!0:o:!1}function CXe(t){var e,n;return(n=(e=ve.lastUserMessage(t))==null?void 0:e.id)!=null?n:null}function X0t(t){"use forget";var Z,J,Q,ne,ie,fe;const e=D.c(23),{clientThreadId:n,fromHeader:s}=t,o=Jxe(),{enableThreadHeaderUpgradePill:r}=__e();let a;e[0]!==n?(a=hi(n),e[0]=n,e[1]=a):a=e[1];const l=a,c=Ze(n,wXe),u=Ze(n,ve.getCurrentLeafId),d=E3(),f=Un(n);let m;e[2]!==u||e[3]!==f?(m={serverThreadId:f,leafId:u},e[2]=u,e[3]=f,e[4]=m):m=e[4];const p=vw(m);let g;e[5]!==(d==null?void 0:d.call_to_action)?(g=((Z=d==null?void 0:d.call_to_action)==null?void 0:Z.includes(an.GET_PLUS))||((J=d==null?void 0:d.call_to_action)==null?void 0:J.includes(an.UPGRADE_TO_GO))||((Q=d==null?void 0:d.call_to_action)==null?void 0:Q.includes(an.GET_BUSINESS_TRIAL))||((ne=d==null?void 0:d.call_to_action)==null?void 0:ne.includes(an.GET_PLUS_TRIAL))||((ie=d==null?void 0:d.call_to_action)==null?void 0:ie.includes(an.GET_PRO))||((fe=d==null?void 0:d.call_to_action)==null?void 0:fe.includes(an.GET_BUSINESS)),e[5]=d==null?void 0:d.call_to_action,e[6]=g):g=e[6];const h=g,_=l&&!c,[x,b]=v.useState(null),y=x!==null,[S,C]=v.useState(null);let w,k;if(e[7]===Symbol.for("react.memo_cache_sentinel")){const ae=Je("2171918831");w=ae.get("enable_pricing_bounce_suppression",!1),k=ae.get("pricing_bounce_suppression_days",0),e[7]=w,e[8]=k}else w=e[7],k=e[8];const T=Math.max(0,k)*24*60*60*1e3;let M,A;e[9]!==n||e[10]!==f?(M=()=>{if(typeof window>"u")return;const ae=Cj(tt.getItem(Ie.ThreadHeaderUpgradePillDismissals));ae!=null&&Date.now()-ae<xXe?b(ae):ae!=null&&tt.setItem(Ie.ThreadHeaderUpgradePillDismissals,null);const le=pe=>{const _e=pe.detail;(_e===n||f&&_e===f)&&b(Date.now())};return window.addEventListener(Qb,le),()=>{window.removeEventListener(Qb,le)}},A=[n,f],e[9]=n,e[10]=f,e[11]=M,e[12]=A):(M=e[11],A=e[12]),v.useEffect(M,A);let I,j;e[13]===Symbol.for("react.memo_cache_sentinel")?(I=()=>{if(!w||T<=0){C(null);return}const ae=Cj(tt.getItem(Ie.ThreadHeaderUpgradePillPricingBounceAt));ae!=null&&Date.now()-ae<T?C(ae):C(null)},j=[w,T],e[13]=I,e[14]=j):(I=e[13],j=e[14]),v.useEffect(I,j);const R=o&&r&&!h,O=R&&_,L=w&&S!==null;let B;e[15]===Symbol.for("react.memo_cache_sentinel")?(B=Je(jXe,{disableExposureLog:!0}).get(PXe,!1),e[15]=B):B=e[15];const U=B,$=(p==null?void 0:p.beacon_id)===uV&&U;let F=!1;if(!$&&s&&R&&n){let ae;e[16]===Symbol.for("react.memo_cache_sentinel")?(ae=Je("684023316").get("show_persistent_generic_upsell",!1),e[16]=ae):ae=e[16],F=ae}let z;e[17]!==n||e[18]!==f?(z=()=>{const ae=f!=null?f:n,le=Date.now();if(tt.setItem(Ie.ThreadHeaderUpgradePillDismissals,le),b(le),typeof window<"u"){const pe=new Set([ae]);f&&f!==n&&pe.add(n);for(const _e of pe)window.dispatchEvent(new CustomEvent(Qb,{detail:_e}))}},e[17]=n,e[18]=f,e[19]=z):z=e[19];const W=z,Y=!$&&!L&&(O||F&&!y);let K;return e[20]!==W||e[21]!==Y?(K={shouldShow:Y,showCloseButton:!0,handleClose:W},e[20]=W,e[21]=Y,e[22]=K):K=e[22],K}function wXe(t){return ve.hasUserMessage(t)}function e_t(t){"use forget";var j,R;const e=D.c(23),{clientThreadId:n,onClose:s,showCloseButton:o}=t,r=o===void 0?!0:o,a=Tn(),l=wF(),c=gxe();let u;e[0]!==n?(u=hi(n),e[0]=n,e[1]=u):u=e[1];const d=u,f=Ze(n,EXe),m=r&&(!d||f),p=X(kXe);let g=null,h,_;c.eligible?(g=et.SELF_SERVE_BUSINESS,h=c.campaignId):l.eligible&&(g=et.PLUS,h=l.campaignId);const x=g!==null,b=SXe(),y=k_(),{isLoading:S}=bo(Ft.Sunshine);let C;e[2]!==y?(C={includeMemoryEntries:!1,enabled:y},e[2]=y,e[3]=C):C=e[3];const{data:w,isLoading:k}=Vp(C),E=y&&((j=w==null?void 0:w.memoryFullPct)!=null?j:0)>=100,T=k&&(S||E),M=(R=a==null?void 0:a.isPro())!=null?R:!1;if(!a||T||M)return null;const A=a.isFreeWorkspace();let I;if(x)I="generic_free_trial";else if(A)I="free_workspace";else if(p)Hv()?I="go":I="plus";else if(Hv())I="go";else{const L=Je("497415788").get("upgrade_pill_type","plus");if(AXe(L))I=L;else return null}switch(I){case"generic":{let O;return e[4]!==s||e[5]!==b||e[6]!==m?(O=i.jsx(wj,{onClose:s,shouldGlimmer:b,showCloseButton:m}),e[4]=s,e[5]=b,e[6]=m,e[7]=O):O=e[7],O}case"generic_free_trial":{if(!g)return null;let O;return e[8]!==g||e[9]!==h||e[10]!==s||e[11]!==b||e[12]!==m?(O=i.jsx(MXe,{onClose:s,planType:g,promoCampaign:h,promoCode:_,shouldGlimmer:b,showCloseButton:m}),e[8]=g,e[9]=h,e[10]=s,e[11]=b,e[12]=m,e[13]=O):O=e[13],O}case"go":case"plus":{let O;return e[14]!==p||e[15]!==s||e[16]!==b||e[17]!==m?(O=i.jsx(TXe,{isMobileWeb:p,onClose:s,shouldGlimmer:b,showCloseButton:m}),e[14]=p,e[15]=s,e[16]=b,e[17]=m,e[18]=O):O=e[18],O}case"free_workspace":{let O;return e[19]!==s||e[20]!==b||e[21]!==m?(O=i.jsx(wj,{onClose:s,shouldGlimmer:b,showCloseButton:m}),e[19]=s,e[20]=b,e[21]=m,e[22]=O):O=e[22],O}}}function kXe(){return BC()}function EXe(t){return ve.hasUserMessage(t)}function TXe(t){"use forget";const e=D.c(13),{isMobileWeb:n,onClose:s,shouldGlimmer:o,showCloseButton:r}=t,a=bt();let l;e[0]!==a?(l=()=>{xs(a,"thread_header_get_plus_pill")},e[0]=a,e[1]=l):l=e[1];const c=l;let u;e[2]===Symbol.for("react.memo_cache_sentinel")?(u=i.jsx(Cg,{className:"icon-sm"}),e[2]=u):u=e[2];let d;e[3]!==n?(d=NXe(n),e[3]=n,e[4]=d):d=e[4];let f;e[5]!==d?(f=i.jsx(P,N({},d)),e[5]=d,e[6]=f):f=e[6];let m;return e[7]!==c||e[8]!==s||e[9]!==o||e[10]!==r||e[11]!==f?(m=i.jsxs(oM,{onClick:c,className:"bg-[#F1F1FB] text-[#5D5BD0] hover:bg-[#E4E4F6] dark:bg-[#373669] dark:text-[#DCDBF6] dark:hover:bg-[#414071]",onClose:s,shouldGlimmer:o,showCloseButton:r,type:"plus",children:[u,f]}),e[7]=c,e[8]=s,e[9]=o,e[10]=r,e[11]=f,e[12]=m):m=e[12],m}function wj(t){"use forget";const e=D.c(9),{onClose:n,shouldGlimmer:s,showCloseButton:o}=t,r=bt();let a;e[0]!==r?(a=()=>{xs(r,"thread_header_generic_upgrade_pill_button")},e[0]=r,e[1]=a):a=e[1];const l=a;let c,u;e[2]===Symbol.for("react.memo_cache_sentinel")?(c=i.jsx(Cg,{className:"icon-sm"}),u=i.jsx(P,N({},yn.upgrade)),e[2]=c,e[3]=u):(c=e[2],u=e[3]);let d;return e[4]!==l||e[5]!==n||e[6]!==s||e[7]!==o?(d=i.jsxs(oM,{onClick:l,className:"bg-[#F1F1FB] text-[#5D5BD0] hover:bg-[#E4E4F6] dark:bg-[#373669] dark:text-[#DCDBF6] dark:hover:bg-[#414071]",onClose:n,shouldGlimmer:s,showCloseButton:o,type:"generic",children:[c,u]}),e[4]=l,e[5]=n,e[6]=s,e[7]=o,e[8]=d):d=e[8],d}function MXe(t){"use forget";const e=D.c(27),{onClose:n,planType:s,promoCampaign:o,promoCode:r,shouldGlimmer:a,showCloseButton:l}=t,c=bt();let u;e[0]!==s?(u=s&&Je("1288455623").get("enabled",!1),e[0]=s,e[1]=u):u=e[1];const d=u,f=d?Je("1288455623",{disableExposureLog:!0}).get("message_type","upgrade_for_free"):null;let m;e[2]!==d?(m=d&&Je("1288455623",{disableExposureLog:!0}).get("icon_type","sparkle_icon"),e[2]=d,e[3]=m):m=e[3];const p=m,g=f?IXe[f]:yn.upgradeForFree;let h;if(e[4]!==o||e[5]!==r){const T=new URLSearchParams;r&&T.set(YG,r),o&&T.set(gw,o),h=T.toString(),e[4]=o,e[5]=r,e[6]=h}else h=e[6];const _=h,x=_?"/buy/".concat(s,"?").concat(_):"/buy/".concat(s);let b;e[7]!==x||e[8]!==c||e[9]!==s?(b=()=>{s!==et.SELF_SERVE_BUSINESS&&Je("1417507197").get("redirect_personal_to_checkout",!1)?c(x):xs(c,"thread_header_generic_free_trial_upgrade_pill_button")},e[7]=x,e[8]=c,e[9]=s,e[10]=b):b=e[10];const y=b;let S;e[11]!==p?(S=p==="gift_icon"?i.jsx(AD,{className:"icon-sm"}):i.jsx(Cg,{className:"icon-sm"}),e[11]=p,e[12]=S):S=e[12];let C;e[13]!==s?(C=vXe(s),e[13]=s,e[14]=C):C=e[14];let w;e[15]!==C?(w={planName:C},e[15]=C,e[16]=w):w=e[16];let k;e[17]!==g||e[18]!==w?(k=i.jsx(P,G(N({},g),{values:w})),e[17]=g,e[18]=w,e[19]=k):k=e[19];let E;return e[20]!==y||e[21]!==n||e[22]!==a||e[23]!==l||e[24]!==S||e[25]!==k?(E=i.jsxs(oM,{onClick:y,className:"bg-[#F1F1FB] text-[#5D5BD0] hover:bg-[#E4E4F6] dark:bg-[#373669] dark:text-[#DCDBF6] dark:hover:bg-[#414071]",onClose:n,shouldGlimmer:a,showCloseButton:l,type:"generic_free_trial",children:[S,k]}),e[20]=y,e[21]=n,e[22]=a,e[23]=l,e[24]=S,e[25]=k,e[26]=E):E=e[26],E}function oM(t){"use forget";const e=D.c(35),{children:n,className:s,onClick:o,onClose:r,shouldGlimmer:a,showCloseButton:l,type:c}=t,u=a===void 0?!1:a,d=te(),[f,m]=v.useState(!1),p=v.useRef(null);let g="py-2",h="";Je("3204206607").get("padding_enabled",!1)&&(g="",h="py-2");const _=l?"pe-2":"",x=u&&"button-glimmer";let b;e[0]!==s||e[1]!==_||e[2]!==x?(b=q("inline-flex items-center gap-1 rounded-full text-sm font-medium",_,g,s,x),e[0]=s,e[1]=_,e[2]=x,e[3]=b):b=e[3];const y=b,S=l?"pe-0":"pe-3",C=u&&"button-text-shine";let w;e[4]!==S||e[5]!==C?(w=q("button-glimmer-cta relative flex items-center gap-1 rounded-full bg-transparent ps-2.5 text-current focus:outline-none",h,S,C),e[4]=S,e[5]=C,e[6]=w):w=e[6];const k=w;let E,T;e[7]!==c?(E=()=>{V.logEventWithStatsig("Thread Header Upgrade Pill Button Shown","chatgpt_thread_header_upgrade_pill_button_shown",{type:c})},T=[c],e[7]=c,e[8]=E,e[9]=T):(E=e[8],T=e[9]),v.useEffect(E,T);let M;e[10]!==o||e[11]!==c?(M=()=>{V.logEventWithStatsig("Thread Header Upgrade Pill Button Clicked","chatgpt_thread_header_upgrade_pill_button_clicked",{type:c}),o==null||o()},e[10]=o,e[11]=c,e[12]=M):M=e[12];const A=M;let I;e[13]!==r||e[14]!==c?(I=()=>{V.logEventWithStatsig("Thread Header Upgrade Pill Button Dismissed","chatgpt_thread_header_upgrade_pill_button_dismissed",{type:c}),r()},e[13]=r,e[14]=c,e[15]=I):I=e[15];const j=I;let R,O;e[16]!==l?(R=()=>{if(!l){m(!1);return}if(typeof window>"u"){m(!0);return}const $=window.requestAnimationFrame(()=>{m(!0)});return()=>{window.cancelAnimationFrame($)}},O=[l],e[16]=l,e[17]=R,e[18]=O):(R=e[17],O=e[18]),v.useEffect(R,O);let L;e[19]!==u?(L=u?i.jsx("div",{className:"feh-border-mask","aria-hidden":"true",children:i.jsx("div",{className:"feh-border-glow"})}):null,e[19]=u,e[20]=L):L=e[20];let B;e[21]!==n||e[22]!==k||e[23]!==A?(B=i.jsx("button",{type:"button",onClick:A,className:k,children:n}),e[21]=n,e[22]=k,e[23]=A,e[24]=B):B=e[24];let U;e[25]!==j||e[26]!==d||e[27]!==f||e[28]!==l?(U=l?i.jsx("button",{type:"button",onClick:j,className:q("ms-0 flex h-4 w-4 items-center justify-center rounded-full text-[black] hover:bg-[#E4E4F6] dark:text-[white] dark:hover:bg-[#414071]","transform transition-all duration-200 ease-out",f?"pointer-events-auto visible translate-x-0 opacity-100":"pointer-events-none invisible -translate-x-1 opacity-0"),"aria-label":d.formatMessage(yn.dismissUpgradeReminder),tabIndex:f?0:-1,children:i.jsx(zw,{height:20,width:20,color:"text-token-text-primary"})}):null,e[25]=j,e[26]=d,e[27]=f,e[28]=l,e[29]=U):U=e[29];let H;return e[30]!==y||e[31]!==L||e[32]!==B||e[33]!==U?(H=i.jsxs("div",{className:y,ref:p,children:[L,B,U]}),e[30]=y,e[31]=L,e[32]=B,e[33]=U,e[34]=H):H=e[34],H}function AXe(t){return Object.values(Jq).includes(t)}function NXe(t){const e=Je("497415788");return t&&e.get("should_show_upgrade_cta_mobile_web",!1)?yn.upgrade:yn.getPlus}const Vh=we({freeTrial:{id:"2LxsIm",defaultMessage:"Free trial"},freeOffer:{id:"1B7DRo",defaultMessage:"Free offer"},startTrial:{id:"aivnYo",defaultMessage:"Start trial"},tryPlanNameFree:{id:"TOyll+",defaultMessage:"Try {planName} free"}}),IXe={free_trial:Vh.freeTrial,free_offer:Vh.freeOffer,start_trial:Vh.startTrial,try_plan_name_free:Vh.tryPlanNameFree,upgrade_for_free:yn.upgradeForFree},jXe="2850117686",PXe="hide_thread_header_upgrade_pill_button";var LP;const RXe=Tt.button(LP||(LP=_t(["group flex cursor-pointer justify-center items-center gap-1 rounded-lg min-h-9 touch:min-h-10 px-2.5 text-lg hover:bg-token-surface-hover focus-visible:bg-token-surface-hover font-normal whitespace-nowrap focus-visible:outline-none"]))),OXe=t=>{"use forget";const e=D.c(4),{headerTextClassName:n}=t,s=n!=null?n:"px-2.5 text-lg";let o;e[0]===Symbol.for("react.memo_cache_sentinel")?(o=i.jsx(P,{id:"mhGPZ6",defaultMessage:"ChatGPT"}),e[0]=o):o=e[0];let r;e[1]===Symbol.for("react.memo_cache_sentinel")?(r=i.jsx("span",{className:"text-token-text-tertiary ms-1",children:i.jsx(P,{id:"0GIpXd",defaultMessage:"Voice"})}),e[1]=r):r=e[1];let a;return e[2]!==s?(a=i.jsxs("div",{className:s,children:[o,r]}),e[2]=s,e[3]=a):a=e[3],a};function LXe(t,e){var s;const n=e.categories.find(({defaultModel:o,supportedModels:r})=>o===t||(r==null?void 0:r.includes(t)));return(s=n==null?void 0:n.renderHeaderType)!=null?s:vv.SHORT_LABEL}function DXe(t,e){const n=e.groups.find(({modelIds:s})=>s.includes(t));return(n==null?void 0:n.group)!=null}function BXe(){return xe("3356163112")}const FXe=je(()=>Me(()=>import("./46f42e08-dvy2cfyypprs4l2w.js"),__vite__mapDeps([357,1,2,3])).then(t=>t.GizmoModelPicker)),kj=we({k12AssistantName:{id:"threadHeaderDropdown.k12AssistantName",defaultMessage:"ChatGPT for Teachers"},orgMemoryThreadHeaderIndicator:{id:"orgMemory.threadHeaderIndicator",defaultMessage:"Org Memory"}}),UXe=t=>{"use forget";const e=D.c(2),{conversation:n,shouldShowFinchSection:s,preferredModelId:o}=t,r=Mk(),a=Nk(n,r,s,void 0,o);let l;return e[0]!==a?(l=i.jsx(Ak,{sections:a}),e[0]=a,e[1]=l):l=e[1],l};function HXe(t){"use forget";var ke,he,Ee;const e=D.c(64),{conversation:n,preferredModelId:s,headerTextClassName:o,chevronClassName:r,assistantName:a}=t,l=te();let c;e[0]===Symbol.for("react.memo_cache_sentinel")?(c={},e[0]=c):c=e[0],Wd.useStoreWithInit(c);const u=Is();let d;e[1]!==u?(d=ku(u),e[1]=u,e[2]=d):d=e[2];const f=d,m=pc(u),p=XC(),g=Et(),h=(he=(ke=g==null?void 0:g.isK12)==null?void 0:ke.call(g))!=null?he:!1,_=gd(GXe),x=one((Ee=rne())==null?void 0:Ee.user,g);let b;e[3]!==n?(b=()=>Fn(n).id,e[3]=n,e[4]=b):b=e[4];const y=X(b);let S;e[5]!==n?(S=()=>Lr(n),e[5]=n,e[6]=S):S=e[6];const C=X(S),w=f?null:y;let k;e[7]!==C||e[8]!==w?(k=J1(w,C),e[7]=C,e[8]=w,e[9]=k):k=e[9];const{modelLabel:E}=k,T=a||(h?l.formatMessage(kj.k12AssistantName):J7);let M;e[10]!==f?(M=f&&BXe(),e[10]=f,e[11]=M):M=e[11];const A=M;let I;e[12]!==E||e[13]!==l||e[14]!==A?(I=A?l.formatMessage(kj.orgMemoryThreadHeaderIndicator):E,e[12]=E,e[13]=l,e[14]=A,e[15]=I):I=e[15];const j=I;let R;e[16]!==f||e[17]!==y||e[18]!==C?(R=f?vv.SHORT_LABEL:LXe(y,C),e[16]=f,e[17]=y,e[18]=C,e[19]=R):R=e[19];const O=R,B=!!mt()&&!(g!=null&&g.isFree()||g!=null&&g.isFreeWorkspace())||x;let U;e:{if(!mt()){U=!1;break e}if(!$0e(g,p,C)){U=!1;break e}z0e()&&!_&&As.setThreadModelPickerAlertDot(!0),U=!0}const H=U;if($c()){let Pe;return e[20]!==o?(Pe=i.jsx(OXe,{headerTextClassName:o}),e[20]=o,e[21]=Pe):Pe=e[21],Pe}if(m){const Pe=o!=null?o:"text-lg";let Ae;e[22]!==Pe?(Ae=q("text-token-text-primary px-3",Pe),e[22]=Pe,e[23]=Ae):Ae=e[23];let de;return e[24]!==T||e[25]!==Ae?(de=i.jsx("div",{className:Ae,children:T}),e[24]=T,e[25]=Ae,e[26]=de):de=e[26],de}B&&(da.markStart("ThreadModelSelector"),j!=null&&da.markRendered("ThreadModelSelector"));let F;e[27]!==j||e[28]!==O||e[29]!==T?(F=O===vv.TITLE?i.jsx(i.Fragment,{children:j}):i.jsxs(i.Fragment,{children:[T," ",i.jsx("span",{className:"text-token-text-tertiary",children:j})]}),e[27]=j,e[28]=O,e[29]=T,e[30]=F):F=e[30];const z=F,W=j!=null&&(B||f)?z:T;let Y;e[31]!==o||e[32]!==W?(Y=i.jsx("div",{className:o,children:W}),e[31]=o,e[32]=W,e[33]=Y):Y=e[33];const K=Y;let Z;e[34]!==f||e[35]!==y||e[36]!==C?(Z=!f&&DXe(y,C),e[34]=f,e[35]=y,e[36]=C,e[37]=Z):Z=e[37];const J=Z;let Q;e[38]===Symbol.for("react.memo_cache_sentinel")?(Q={viewTransitionName:"var(--vt-thread-model-switcher)"},e[38]=Q):Q=e[38];let ne;e[39]!==j||e[40]!==l?(ne=j?l.formatMessage({id:"JrtGPQ",defaultMessage:"Model selector, current model is {modelLabel}"},{modelLabel:j}):l.formatMessage({id:"/D1dJC",defaultMessage:"Model selector"}),e[39]=j,e[40]=l,e[41]=ne):ne=e[41];let ie;e[42]!==K||e[43]!==y||e[44]!==J?(ie=J?i.jsx(St,{label:y,side:"right",children:K}):K,e[42]=K,e[43]=y,e[44]=J,e[45]=ie):ie=e[45];const fe=r!=null?r:"icon-sm";let ae;e[46]!==fe?(ae=q(fe,"text-token-text-tertiary"),e[46]=fe,e[47]=ae):ae=e[47];let le;e[48]!==ae?(le=i.jsx($o,{className:ae}),e[48]=ae,e[49]=le):le=e[49];let pe;e[50]!==_?(pe=_&&i.jsx(TD,{color:"blue",className:"ms-1"}),e[50]=_,e[51]=pe):pe=e[51];let _e;e[52]!==ne||e[53]!==ie||e[54]!==le||e[55]!==pe?(_e=i.jsxs(RXe,{style:Q,"aria-label":ne,children:[ie,le,pe]}),e[52]=ne,e[53]=ie,e[54]=le,e[55]=pe,e[56]=_e):_e=e[56];const Ce=_e;if(C===void 0)return Ce;let ge;e[57]!==n||e[58]!==s||e[59]!==H?(ge=i.jsx(UXe,{conversation:n,shouldShowFinchSection:H,preferredModelId:s}),e[57]=n,e[58]=s,e[59]=H,e[60]=ge):ge=e[60];let Re;return e[61]!==ge||e[62]!==Ce?(Re=i.jsx(Xo,{alignOffset:-4,size:"small",triggerButton:Ce,onOpenChange:$Xe,testId:"model-switcher-dropdown",children:ge}),e[61]=ge,e[62]=Ce,e[63]=Re):Re=e[63],Re}function $Xe(t){V.logEvent("Toggle Model Switcher",{isOpen:t}),ft.logEvent("toggle_model_switcher",null,{isOpen:String(t)})}function GXe(t){return t.shouldShowThreadModelPickerDot}function t_t(t){"use forget";var u;const e=D.c(13),{conversation:n,textClassName:s,chevronClassName:o,assistantName:r}=t;let a;e[0]!==n?(a=()=>dd(n),e[0]=n,e[1]=a):a=e[1];const l=X(a),{data:c}=gi(l);if(ui(c))return null;if(l==null||gl(l)){const d=(u=c==null?void 0:c.gizmo.default_model)!=null?u:void 0;let f;return e[2]!==r||e[3]!==o||e[4]!==n||e[5]!==d||e[6]!==s?(f=i.jsx(HXe,{conversation:n,preferredModelId:d,headerTextClassName:s,chevronClassName:o,assistantName:r}),e[2]=r,e[3]=o,e[4]=n,e[5]=d,e[6]=s,e[7]=f):f=e[7],f}else{let d;return e[8]!==o||e[9]!==n||e[10]!==l||e[11]!==s?(d=i.jsx(FXe,{gizmoId:l,conversation:n,textClassName:s,chevronClassName:o}),e[8]=o,e[9]=n,e[10]=l,e[11]=s,e[12]=d):d=e[12],d}}const VXe={"/apps/spotify/":{"am-ET":!0,"bg-BG":!0,"bn-BD":!0,"bs-BA":!0,"cs-CZ":!0,"da-DK":!0,"de-DE":!0,"el-GR":!0,"es-419":!0,"es-ES":!0,"et-EE":!0,"fi-FI":!0,"fil-PH":!0,"fr-CA":!0,"fr-FR":!0,"hi-IN":!0,"hr-HR":!0,"hu-HU":!0,"hy-AM":!0,"id-ID":!0,"is-IS":!0,"it-IT":!0,"ja-JP":!0,"kn-IN":!0,"ko-KR":!0,"lt-LT":!0,"lv-LV":!0,"mk-MK":!0,"ml-IN":!0,"mr-IN":!0,"ms-BN":!0,"nb-NO":!0,"nl-NL":!0,"pl-PL":!0,"pt-BR":!0,"pt-PT":!0,"ro-RO":!0,"ru-RU":!0,"sk-SK":!0,"sl-SI":!0,"sq-AL":!0,"sv-SE":!0,"sw-KE":!0,"ta-IN":!0,"te-IN":!0,"th-TH":!0,"tr-TR":!0,"uk-UA":!0,"vi-VN":!0,"zh-Hans-CN":!0,"zh-Hant":!0,"zh-Hant-HK":!0},"/atlas/":{"am-ET":!0,"bg-BG":!0,"bn-BD":!0,"bs-BA":!0,"cs-CZ":!0,"da-DK":!0,"de-DE":!0,"el-GR":!0,"es-419":!0,"es-ES":!0,"et-EE":!0,"fi-FI":!0,"fil-PH":!0,"fr-CA":!0,"fr-FR":!0,"hi-IN":!0,"hr-HR":!0,"hu-HU":!0,"hy-AM":!0,"id-ID":!0,"is-IS":!0,"it-IT":!0,"ja-JP":!0,"kn-IN":!0,"ko-KR":!0,"lt-LT":!0,"lv-LV":!0,"mk-MK":!0,"ml-IN":!0,"mr-IN":!0,"ms-BN":!0,"nb-NO":!0,"nl-NL":!0,"pl-PL":!0,"pt-BR":!0,"pt-PT":!0,"ro-RO":!0,"ru-RU":!0,"sk-SK":!0,"sl-SI":!0,"sq-AL":!0,"sv-SE":!0,"sw-KE":!0,"ta-IN":!0,"te-IN":!0,"th-TH":!0,"tr-TR":!0,"uk-UA":!0,"vi-VN":!0,"zh-Hans-CN":!0,"zh-Hant":!0,"zh-Hant-HK":!0},"/atlas/get-started/":{"am-ET":!0,"bg-BG":!0,"bn-BD":!0,"bs-BA":!0,"cs-CZ":!0,"da-DK":!0,"de-DE":!0,"el-GR":!0,"es-419":!0,"es-ES":!0,"et-EE":!0,"fi-FI":!0,"fil-PH":!0,"fr-CA":!0,"fr-FR":!0,"hi-IN":!0,"hr-HR":!0,"hu-HU":!0,"hy-AM":!0,"id-ID":!0,"is-IS":!0,"it-IT":!0,"ja-JP":!0,"kn-IN":!0,"ko-KR":!0,"lt-LT":!0,"lv-LV":!0,"mk-MK":!0,"ml-IN":!0,"mr-IN":!0,"ms-BN":!0,"nb-NO":!0,"nl-NL":!0,"pl-PL":!0,"pt-BR":!0,"pt-PT":!0,"ro-RO":!0,"ru-RU":!0,"sk-SK":!0,"sl-SI":!0,"sq-AL":!0,"sv-SE":!0,"sw-KE":!0,"ta-IN":!0,"te-IN":!0,"th-TH":!0,"tr-TR":!0,"uk-UA":!0,"vi-VN":!0,"zh-Hans-CN":!0,"zh-Hant":!0,"zh-Hant-HK":!0},"/business/":{"am-ET":!0,"bg-BG":!0,"bn-BD":!0,"bs-BA":!0,"cs-CZ":!0,"da-DK":!0,"de-DE":!0,"el-GR":!0,"es-419":!0,"es-ES":!0,"et-EE":!0,"fi-FI":!0,"fil-PH":!0,"fr-CA":!0,"fr-FR":!0,"hi-IN":!0,"hr-HR":!0,"hu-HU":!0,"hy-AM":!0,"id-ID":!0,"is-IS":!0,"it-IT":!0,"ja-JP":!0,"kn-IN":!0,"ko-KR":!0,"lt-LT":!0,"lv-LV":!0,"mk-MK":!0,"ml-IN":!0,"mr-IN":!0,"ms-BN":!0,"nb-NO":!0,"nl-NL":!0,"pl-PL":!0,"pt-BR":!0,"pt-PT":!0,"ro-RO":!0,"ru-RU":!0,"sk-SK":!0,"sl-SI":!0,"sq-AL":!0,"sv-SE":!0,"sw-KE":!0,"ta-IN":!0,"te-IN":!0,"th-TH":!0,"tr-TR":!0,"uk-UA":!0,"vi-VN":!0,"zh-Hans-CN":!0,"zh-Hant":!0,"zh-Hant-HK":!0},"/business/ai-for-data-science-analytics/":{"am-ET":!0,"bg-BG":!0,"bn-BD":!0,"bs-BA":!0,"cs-CZ":!0,"da-DK":!0,"de-DE":!0,"el-GR":!0,"es-419":!0,"es-ES":!0,"et-EE":!0,"fi-FI":!0,"fil-PH":!0,"fr-CA":!0,"fr-FR":!0,"hi-IN":!0,"hr-HR":!0,"hu-HU":!0,"hy-AM":!0,"id-ID":!0,"is-IS":!0,"it-IT":!0,"ja-JP":!0,"kn-IN":!0,"ko-KR":!0,"lt-LT":!0,"lv-LV":!0,"mk-MK":!0,"ml-IN":!0,"mr-IN":!0,"ms-BN":!0,"nb-NO":!0,"nl-NL":!0,"pl-PL":!0,"pt-BR":!0,"pt-PT":!0,"ro-RO":!0,"ru-RU":!0,"sk-SK":!0,"sl-SI":!0,"sq-AL":!0,"sv-SE":!0,"sw-KE":!0,"ta-IN":!0,"te-IN":!0,"th-TH":!0,"tr-TR":!0,"uk-UA":!0,"vi-VN":!0,"zh-Hans-CN":!0,"zh-Hant":!0,"zh-Hant-HK":!0},"/business/ai-for-engineering/":{"am-ET":!0,"bg-BG":!0,"bn-BD":!0,"bs-BA":!0,"cs-CZ":!0,"da-DK":!0,"de-DE":!0,"el-GR":!0,"es-419":!0,"es-ES":!0,"et-EE":!0,"fi-FI":!0,"fil-PH":!0,"fr-CA":!0,"fr-FR":!0,"hi-IN":!0,"hr-HR":!0,"hu-HU":!0,"hy-AM":!0,"id-ID":!0,"is-IS":!0,"it-IT":!0,"ja-JP":!0,"kn-IN":!0,"ko-KR":!0,"lt-LT":!0,"lv-LV":!0,"mk-MK":!0,"ml-IN":!0,"mr-IN":!0,"ms-BN":!0,"nb-NO":!0,"nl-NL":!0,"pl-PL":!0,"pt-BR":!0,"pt-PT":!0,"ro-RO":!0,"ru-RU":!0,"sk-SK":!0,"sl-SI":!0,"sq-AL":!0,"sv-SE":!0,"sw-KE":!0,"ta-IN":!0,"te-IN":!0,"th-TH":!0,"tr-TR":!0,"uk-UA":!0,"vi-VN":!0,"zh-Hans-CN":!0,"zh-Hant":!0,"zh-Hant-HK":!0},"/business/ai-for-finance/":{"am-ET":!0,"bg-BG":!0,"bs-BA":!0,"cs-CZ":!0,"da-DK":!0,"de-DE":!0,"el-GR":!0,"es-419":!0,"es-ES":!0,"et-EE":!0,"fi-FI":!0,"fil-PH":!0,"fr-CA":!0,"fr-FR":!0,"hi-IN":!0,"hr-HR":!0,"hu-HU":!0,"hy-AM":!0,"id-ID":!0,"is-IS":!0,"it-IT":!0,"ja-JP":!0,"kn-IN":!0,"ko-KR":!0,"lt-LT":!0,"lv-LV":!0,"mk-MK":!0,"ml-IN":!0,"mr-IN":!0,"ms-BN":!0,"nb-NO":!0,"nl-NL":!0,"pl-PL":!0,"pt-BR":!0,"pt-PT":!0,"ro-RO":!0,"ru-RU":!0,"sk-SK":!0,"sl-SI":!0,"sq-AL":!0,"sv-SE":!0,"sw-KE":!0,"ta-IN":!0,"th-TH":!0,"tr-TR":!0,"uk-UA":!0,"vi-VN":!0,"zh-Hans-CN":!0,"zh-Hant":!0,"zh-Hant-HK":!0},"/business/ai-for-product-management/":{"am-ET":!0,"bg-BG":!0,"bn-BD":!0,"bs-BA":!0,"cs-CZ":!0,"da-DK":!0,"de-DE":!0,"el-GR":!0,"es-419":!0,"es-ES":!0,"et-EE":!0,"fi-FI":!0,"fil-PH":!0,"fr-CA":!0,"fr-FR":!0,"hi-IN":!0,"hr-HR":!0,"hu-HU":!0,"hy-AM":!0,"id-ID":!0,"is-IS":!0,"it-IT":!0,"ja-JP":!0,"kn-IN":!0,"ko-KR":!0,"lt-LT":!0,"lv-LV":!0,"mk-MK":!0,"ml-IN":!0,"mr-IN":!0,"ms-BN":!0,"nb-NO":!0,"nl-NL":!0,"pl-PL":!0,"pt-BR":!0,"pt-PT":!0,"ro-RO":!0,"ru-RU":!0,"sk-SK":!0,"sl-SI":!0,"sq-AL":!0,"sv-SE":!0,"sw-KE":!0,"ta-IN":!0,"te-IN":!0,"th-TH":!0,"tr-TR":!0,"uk-UA":!0,"vi-VN":!0,"zh-Hans-CN":!0,"zh-Hant":!0,"zh-Hant-HK":!0},"/business/ai-for-sales-marketing-v3/":{"am-ET":!0,"bg-BG":!0,"bs-BA":!0,"cs-CZ":!0,"da-DK":!0,"de-DE":!0,"el-GR":!0,"es-419":!0,"es-ES":!0,"et-EE":!0,"fi-FI":!0,"fil-PH":!0,"fr-CA":!0,"fr-FR":!0,"hi-IN":!0,"hr-HR":!0,"hu-HU":!0,"hy-AM":!0,"id-ID":!0,"is-IS":!0,"it-IT":!0,"ja-JP":!0,"kn-IN":!0,"ko-KR":!0,"lt-LT":!0,"lv-LV":!0,"mk-MK":!0,"ml-IN":!0,"mr-IN":!0,"ms-BN":!0,"nb-NO":!0,"nl-NL":!0,"pl-PL":!0,"pt-BR":!0,"pt-PT":!0,"ro-RO":!0,"ru-RU":!0,"sk-SK":!0,"sl-SI":!0,"sq-AL":!0,"sv-SE":!0,"sw-KE":!0,"ta-IN":!0,"th-TH":!0,"tr-TR":!0,"uk-UA":!0,"vi-VN":!0,"zh-Hans-CN":!0,"zh-Hant":!0,"zh-Hant-HK":!0},"/business/ai-for-sales-marketing/":{"am-ET":!0,"bg-BG":!0,"bs-BA":!0,"cs-CZ":!0,"da-DK":!0,"de-DE":!0,"el-GR":!0,"es-419":!0,"es-ES":!0,"et-EE":!0,"fi-FI":!0,"fil-PH":!0,"fr-CA":!0,"fr-FR":!0,"hi-IN":!0,"hr-HR":!0,"hu-HU":!0,"hy-AM":!0,"id-ID":!0,"is-IS":!0,"it-IT":!0,"ja-JP":!0,"kn-IN":!0,"ko-KR":!0,"lt-LT":!0,"lv-LV":!0,"mk-MK":!0,"ml-IN":!0,"mr-IN":!0,"ms-BN":!0,"nb-NO":!0,"nl-NL":!0,"pl-PL":!0,"pt-BR":!0,"pt-PT":!0,"ro-RO":!0,"ru-RU":!0,"sk-SK":!0,"sl-SI":!0,"sq-AL":!0,"sv-SE":!0,"sw-KE":!0,"ta-IN":!0,"th-TH":!0,"tr-TR":!0,"uk-UA":!0,"vi-VN":!0,"zh-Hans-CN":!0,"zh-Hant":!0,"zh-Hant-HK":!0},"/business/business-plan/":{"am-ET":!0,"bg-BG":!0,"bn-BD":!1,"bs-BA":!0,"cs-CZ":!0,"da-DK":!0,"de-DE":!0,"el-GR":!0,"es-419":!0,"es-ES":!0,"et-EE":!0,"fi-FI":!0,"fil-PH":!0,"fr-CA":!0,"fr-FR":!0,"hi-IN":!0,"hr-HR":!0,"hu-HU":!0,"hy-AM":!0,"id-ID":!0,"is-IS":!0,"it-IT":!0,"ja-JP":!0,"kn-IN":!0,"ko-KR":!0,"lt-LT":!0,"lv-LV":!0,"mk-MK":!0,"ml-IN":!0,"mr-IN":!0,"ms-BN":!0,"nb-NO":!0,"nl-NL":!0,"pl-PL":!0,"pt-BR":!0,"pt-PT":!0,"ro-RO":!0,"ru-RU":!0,"sk-SK":!0,"sl-SI":!0,"sq-AL":!0,"sv-SE":!0,"sw-KE":!0,"ta-IN":!0,"te-IN":!1,"th-TH":!0,"tr-TR":!0,"uk-UA":!0,"vi-VN":!0,"zh-Hans-CN":!0,"zh-Hant":!0,"zh-Hant-HK":!0},"/business/education/":{"am-ET":!0,"bg-BG":!0,"bn-BD":!1,"bs-BA":!0,"cs-CZ":!0,"da-DK":!0,"de-DE":!0,"el-GR":!0,"es-419":!0,"es-ES":!0,"et-EE":!0,"fi-FI":!0,"fil-PH":!0,"fr-CA":!0,"fr-FR":!0,"hi-IN":!0,"hr-HR":!0,"hu-HU":!0,"hy-AM":!0,"id-ID":!0,"is-IS":!0,"it-IT":!0,"ja-JP":!0,"kn-IN":!0,"ko-KR":!0,"lt-LT":!0,"lv-LV":!0,"mk-MK":!0,"ml-IN":!0,"mr-IN":!0,"ms-BN":!0,"nb-NO":!0,"nl-NL":!0,"pl-PL":!0,"pt-BR":!0,"pt-PT":!0,"ro-RO":!0,"ru-RU":!0,"sk-SK":!0,"sl-SI":!0,"sq-AL":!0,"sv-SE":!0,"sw-KE":!0,"ta-IN":!0,"te-IN":!1,"th-TH":!0,"tr-TR":!0,"uk-UA":!0,"vi-VN":!0,"zh-Hans-CN":!0,"zh-Hant":!0,"zh-Hant-HK":!0},"/business/enterprise/":{"am-ET":!0,"bg-BG":!0,"bn-BD":!0,"bs-BA":!0,"cs-CZ":!0,"da-DK":!0,"de-DE":!0,"el-GR":!0,"es-419":!0,"es-ES":!0,"et-EE":!0,"fi-FI":!0,"fil-PH":!0,"fr-CA":!0,"fr-FR":!0,"hi-IN":!0,"hr-HR":!0,"hu-HU":!0,"hy-AM":!0,"id-ID":!0,"is-IS":!0,"it-IT":!0,"ja-JP":!0,"kn-IN":!0,"ko-KR":!0,"lt-LT":!0,"lv-LV":!0,"mk-MK":!0,"ml-IN":!0,"mr-IN":!0,"ms-BN":!0,"nb-NO":!0,"nl-NL":!0,"pl-PL":!0,"pt-BR":!0,"pt-PT":!0,"ro-RO":!0,"ru-RU":!0,"sk-SK":!0,"sl-SI":!0,"sq-AL":!0,"sv-SE":!0,"sw-KE":!0,"ta-IN":!0,"te-IN":!0,"th-TH":!0,"tr-TR":!0,"uk-UA":!0,"vi-VN":!0,"zh-Hans-CN":!0,"zh-Hant":!0,"zh-Hant-HK":!0},"/college-students/":{"am-ET":!0,"bg-BG":!0,"bn-BD":!0,"bs-BA":!0,"cs-CZ":!0,"da-DK":!0,"de-DE":!0,"el-GR":!0,"es-419":!0,"es-ES":!0,"et-EE":!0,"fi-FI":!0,"fil-PH":!0,"fr-CA":!0,"fr-FR":!0,"hi-IN":!0,"hr-HR":!0,"hu-HU":!0,"hy-AM":!0,"id-ID":!0,"is-IS":!0,"it-IT":!0,"ja-JP":!0,"kn-IN":!0,"ko-KR":!0,"lt-LT":!0,"lv-LV":!0,"mk-MK":!0,"ml-IN":!0,"mr-IN":!0,"ms-BN":!0,"nb-NO":!0,"nl-NL":!0,"pl-PL":!0,"pt-BR":!0,"pt-PT":!0,"ro-RO":!0,"ru-RU":!0,"sk-SK":!0,"sl-SI":!0,"sq-AL":!0,"sv-SE":!0,"sw-KE":!0,"ta-IN":!0,"te-IN":!0,"th-TH":!0,"tr-TR":!0,"uk-UA":!0,"vi-VN":!0,"zh-Hans-CN":!0,"zh-Hant":!0,"zh-Hant-HK":!0},"/contact-sales/":{"am-ET":!0,"bg-BG":!0,"bn-BD":!0,"bs-BA":!0,"cs-CZ":!0,"da-DK":!0,"de-DE":!0,"el-GR":!0,"es-419":!0,"es-ES":!0,"et-EE":!0,"fi-FI":!0,"fil-PH":!0,"fr-CA":!0,"fr-FR":!0,"hi-IN":!0,"hr-HR":!0,"hu-HU":!0,"hy-AM":!0,"id-ID":!0,"is-IS":!0,"it-IT":!0,"ja-JP":!0,"kn-IN":!0,"ko-KR":!0,"lt-LT":!0,"lv-LV":!0,"mk-MK":!0,"ml-IN":!0,"mr-IN":!0,"ms-BN":!0,"nb-NO":!0,"nl-NL":!0,"pl-PL":!0,"pt-BR":!0,"pt-PT":!0,"ro-RO":!0,"ru-RU":!0,"sk-SK":!0,"sl-SI":!0,"sq-AL":!0,"sv-SE":!0,"sw-KE":!0,"ta-IN":!0,"te-IN":!0,"th-TH":!0,"tr-TR":!0,"uk-UA":!0,"vi-VN":!0,"zh-Hans-CN":!0,"zh-Hant":!0,"zh-Hant-HK":!0},"/download/":{"am-ET":!0,"bg-BG":!0,"bn-BD":!0,"bs-BA":!0,"cs-CZ":!0,"da-DK":!0,"de-DE":!0,"el-GR":!0,"es-419":!0,"es-ES":!0,"et-EE":!0,"fi-FI":!0,"fil-PH":!0,"fr-CA":!0,"fr-FR":!0,"hi-IN":!0,"hr-HR":!0,"hu-HU":!0,"hy-AM":!0,"id-ID":!0,"is-IS":!0,"it-IT":!0,"ja-JP":!0,"kn-IN":!0,"ko-KR":!0,"lt-LT":!0,"lv-LV":!0,"mk-MK":!0,"ml-IN":!0,"mr-IN":!0,"ms-BN":!0,"nb-NO":!0,"nl-NL":!0,"pl-PL":!0,"pt-BR":!0,"pt-PT":!0,"ro-RO":!0,"ru-RU":!0,"sk-SK":!0,"sl-SI":!0,"sq-AL":!0,"sv-SE":!0,"sw-KE":!0,"ta-IN":!0,"te-IN":!0,"th-TH":!0,"tr-TR":!0,"uk-UA":!0,"vi-VN":!0,"zh-Hans-CN":!0,"zh-Hant":!0,"zh-Hant-HK":!0},"/features/agent/":{"am-ET":!0,"bg-BG":!0,"bn-BD":!0,"bs-BA":!0,"cs-CZ":!0,"da-DK":!0,"de-DE":!0,"el-GR":!0,"es-419":!0,"es-ES":!0,"et-EE":!0,"fi-FI":!0,"fil-PH":!0,"fr-CA":!0,"fr-FR":!0,"hi-IN":!0,"hr-HR":!0,"hu-HU":!0,"hy-AM":!0,"id-ID":!0,"is-IS":!0,"it-IT":!0,"ja-JP":!0,"kn-IN":!0,"ko-KR":!0,"lt-LT":!0,"lv-LV":!0,"mk-MK":!0,"ml-IN":!0,"mr-IN":!0,"ms-BN":!0,"nb-NO":!0,"nl-NL":!0,"pl-PL":!0,"pt-BR":!0,"pt-PT":!0,"ro-RO":!0,"ru-RU":!0,"sk-SK":!0,"sl-SI":!0,"sq-AL":!0,"sv-SE":!0,"sw-KE":!0,"ta-IN":!0,"te-IN":!0,"th-TH":!0,"tr-TR":!0,"uk-UA":!0,"vi-VN":!0,"zh-Hans-CN":!0,"zh-Hant":!0,"zh-Hant-HK":!0},"/features/apps/":{"am-ET":!0,ar:!0,"bg-BG":!0,"bn-BD":!0,"bs-BA":!0,"cs-CZ":!0,"da-DK":!0,"de-DE":!0,"el-GR":!0,"es-419":!0,"es-ES":!0,"et-EE":!0,"fa-IR":!0,"fi-FI":!0,"fil-PH":!0,"fr-CA":!0,"fr-FR":!0,"hi-IN":!0,"hr-HR":!0,"hu-HU":!0,"hy-AM":!0,"id-ID":!0,"is-IS":!0,"it-IT":!0,"ja-JP":!0,"kn-IN":!0,"ko-KR":!0,"lt-LT":!0,"lv-LV":!0,"mk-MK":!0,"ml-IN":!0,"mr-IN":!0,"ms-BN":!0,"nb-NO":!0,"nl-NL":!0,"pl-PL":!0,"pt-BR":!0,"pt-PT":!0,"ro-RO":!0,"ru-RU":!0,"sk-SK":!0,"sl-SI":!0,"sq-AL":!0,"sv-SE":!0,"sw-KE":!0,"ta-IN":!0,"te-IN":!0,"th-TH":!0,"tr-TR":!0,"uk-UA":!0,"ur-IN":!0,"vi-VN":!0,"zh-Hans-CN":!0,"zh-Hant":!0,"zh-Hant-HK":!0},"/features/chat-with-pdfs/":{"am-ET":!0,"bg-BG":!0,"bn-BD":!0,"bs-BA":!0,"cs-CZ":!0,"da-DK":!0,"de-DE":!0,"el-GR":!0,"es-419":!0,"es-ES":!0,"et-EE":!0,"fi-FI":!0,"fil-PH":!0,"fr-CA":!0,"fr-FR":!0,"hi-IN":!0,"hr-HR":!0,"hu-HU":!0,"hy-AM":!0,"id-ID":!0,"is-IS":!0,"it-IT":!0,"ja-JP":!0,"kn-IN":!0,"ko-KR":!0,"lt-LT":!0,"lv-LV":!0,"mk-MK":!0,"ml-IN":!0,"mr-IN":!0,"ms-BN":!0,"nb-NO":!0,"nl-NL":!0,"pl-PL":!0,"pt-BR":!0,"pt-PT":!0,"ro-RO":!0,"ru-RU":!0,"sk-SK":!0,"sl-SI":!0,"sq-AL":!0,"sv-SE":!0,"sw-KE":!0,"ta-IN":!0,"te-IN":!0,"th-TH":!0,"tr-TR":!0,"uk-UA":!0,"vi-VN":!0,"zh-Hans-CN":!0,"zh-Hant":!0,"zh-Hant-HK":!0},"/features/chatgpt-in-whatsapp/":{"am-ET":!0,"bg-BG":!0,"bn-BD":!0,"bs-BA":!0,"cs-CZ":!0,"da-DK":!0,"de-DE":!0,"el-GR":!0,"es-419":!0,"es-ES":!0,"et-EE":!0,"fi-FI":!0,"fil-PH":!0,"fr-CA":!0,"fr-FR":!0,"hi-IN":!0,"hr-HR":!0,"hu-HU":!0,"hy-AM":!0,"id-ID":!0,"is-IS":!0,"it-IT":!0,"ja-JP":!0,"kn-IN":!0,"ko-KR":!0,"lt-LT":!0,"lv-LV":!0,"mk-MK":!0,"ml-IN":!0,"mr-IN":!0,"ms-BN":!0,"nb-NO":!0,"nl-NL":!0,"pl-PL":!0,"pt-BR":!0,"pt-PT":!0,"ro-RO":!0,"ru-RU":!0,"sk-SK":!0,"sl-SI":!0,"sq-AL":!0,"sv-SE":!0,"sw-KE":!0,"ta-IN":!0,"te-IN":!0,"th-TH":!0,"tr-TR":!0,"uk-UA":!0,"vi-VN":!0,"zh-Hans-CN":!0,"zh-Hant":!0,"zh-Hant-HK":!0},"/features/codex/":{"am-ET":!0,"bg-BG":!0,"bn-BD":!0,"bs-BA":!0,"cs-CZ":!0,"da-DK":!0,"de-DE":!0,"el-GR":!0,"es-419":!0,"es-ES":!0,"et-EE":!0,"fi-FI":!0,"fil-PH":!0,"fr-CA":!0,"fr-FR":!0,"hi-IN":!0,"hr-HR":!0,"hu-HU":!0,"hy-AM":!0,"id-ID":!0,"is-IS":!0,"it-IT":!0,"ja-JP":!0,"kn-IN":!0,"ko-KR":!0,"lt-LT":!0,"lv-LV":!0,"mk-MK":!0,"ml-IN":!0,"mr-IN":!0,"ms-BN":!0,"nb-NO":!0,"nl-NL":!0,"pl-PL":!0,"pt-BR":!0,"pt-PT":!0,"ro-RO":!0,"ru-RU":!0,"sk-SK":!0,"sl-SI":!0,"sq-AL":!0,"sv-SE":!0,"sw-KE":!0,"ta-IN":!0,"te-IN":!0,"th-TH":!0,"tr-TR":!0,"uk-UA":!0,"vi-VN":!0,"zh-Hans-CN":!0,"zh-Hant":!0,"zh-Hant-HK":!0},"/features/deep-research/":{"am-ET":!0,"bg-BG":!0,"bn-BD":!0,"bs-BA":!0,"cs-CZ":!0,"da-DK":!0,"de-DE":!0,"el-GR":!0,"es-419":!0,"es-ES":!0,"et-EE":!0,"fi-FI":!0,"fil-PH":!0,"fr-CA":!0,"fr-FR":!0,"hi-IN":!0,"hr-HR":!0,"hu-HU":!0,"hy-AM":!0,"id-ID":!0,"is-IS":!0,"it-IT":!0,"ja-JP":!0,"kn-IN":!0,"ko-KR":!0,"lt-LT":!0,"lv-LV":!0,"mk-MK":!0,"ml-IN":!0,"mr-IN":!0,"ms-BN":!0,"nb-NO":!0,"nl-NL":!0,"pl-PL":!0,"pt-BR":!0,"pt-PT":!0,"ro-RO":!0,"ru-RU":!0,"sk-SK":!0,"sl-SI":!0,"sq-AL":!0,"sv-SE":!0,"sw-KE":!0,"ta-IN":!0,"te-IN":!0,"th-TH":!0,"tr-TR":!0,"uk-UA":!0,"vi-VN":!0,"zh-Hans-CN":!0,"zh-Hant":!0,"zh-Hant-HK":!0},"/features/desktop/":{"am-ET":!0,"bg-BG":!0,"bn-BD":!1,"bs-BA":!0,"cs-CZ":!0,"da-DK":!0,"de-DE":!0,"el-GR":!0,"es-419":!0,"es-ES":!0,"et-EE":!0,"fi-FI":!0,"fil-PH":!0,"fr-CA":!0,"fr-FR":!0,"hi-IN":!0,"hr-HR":!0,"hu-HU":!0,"hy-AM":!0,"id-ID":!0,"is-IS":!0,"it-IT":!0,"ja-JP":!0,"kn-IN":!0,"ko-KR":!0,"lt-LT":!0,"lv-LV":!0,"mk-MK":!0,"ml-IN":!0,"mr-IN":!0,"ms-BN":!0,"nb-NO":!0,"nl-NL":!0,"pl-PL":!0,"pt-BR":!0,"pt-PT":!0,"ro-RO":!0,"ru-RU":!0,"sk-SK":!0,"sl-SI":!0,"sq-AL":!0,"sv-SE":!0,"sw-KE":!0,"ta-IN":!0,"te-IN":!1,"th-TH":!0,"tr-TR":!0,"uk-UA":!0,"vi-VN":!0,"zh-Hans-CN":!0,"zh-Hant":!0,"zh-Hant-HK":!0},"/features/group-chats/":{"am-ET":!0,"bg-BG":!0,"bn-BD":!1,"bs-BA":!0,"cs-CZ":!0,"da-DK":!0,"de-DE":!0,"el-GR":!0,"es-419":!0,"es-ES":!0,"et-EE":!0,"fi-FI":!0,"fil-PH":!0,"fr-CA":!0,"fr-FR":!0,"hi-IN":!0,"hr-HR":!0,"hu-HU":!0,"hy-AM":!0,"id-ID":!0,"is-IS":!0,"it-IT":!0,"ja-JP":!0,"kn-IN":!0,"ko-KR":!0,"lt-LT":!0,"lv-LV":!0,"mk-MK":!0,"ml-IN":!0,"mr-IN":!0,"ms-BN":!0,"nb-NO":!0,"nl-NL":!0,"pl-PL":!0,"pt-BR":!0,"pt-PT":!0,"ro-RO":!0,"ru-RU":!0,"sk-SK":!0,"sl-SI":!0,"sq-AL":!0,"sv-SE":!0,"sw-KE":!0,"ta-IN":!0,"te-IN":!1,"th-TH":!0,"tr-TR":!0,"uk-UA":!0,"vi-VN":!0,"zh-Hans-CN":!0,"zh-Hant":!0,"zh-Hant-HK":!0},"/features/image-generation/":{"am-ET":!0,"bg-BG":!0,"bn-BD":!0,"bs-BA":!0,"cs-CZ":!0,"da-DK":!0,"de-DE":!0,"el-GR":!0,"es-419":!0,"es-ES":!0,"et-EE":!0,"fi-FI":!0,"fil-PH":!0,"fr-CA":!0,"fr-FR":!0,"hi-IN":!0,"hr-HR":!0,"hu-HU":!0,"hy-AM":!0,"id-ID":!0,"is-IS":!0,"it-IT":!0,"ja-JP":!0,"kn-IN":!0,"ko-KR":!0,"lt-LT":!0,"lv-LV":!0,"mk-MK":!0,"ml-IN":!0,"mr-IN":!0,"ms-BN":!0,"nb-NO":!0,"nl-NL":!0,"pl-PL":!0,"pt-BR":!0,"pt-PT":!0,"ro-RO":!0,"ru-RU":!0,"sk-SK":!0,"sl-SI":!0,"sq-AL":!0,"sv-SE":!0,"sw-KE":!0,"ta-IN":!0,"te-IN":!0,"th-TH":!0,"tr-TR":!0,"uk-UA":!0,"vi-VN":!0,"zh-Hans-CN":!0,"zh-Hant":!0,"zh-Hant-HK":!0},"/features/images/":{"am-ET":!0,ar:!0,"bg-BG":!0,"bn-BD":!0,"bs-BA":!0,"cs-CZ":!0,"da-DK":!0,"de-DE":!0,"el-GR":!0,"es-419":!0,"es-ES":!0,"et-EE":!0,"fa-IR":!0,"fi-FI":!0,"fil-PH":!0,"fr-CA":!0,"fr-FR":!0,"hi-IN":!0,"hr-HR":!0,"hu-HU":!0,"hy-AM":!0,"id-ID":!0,"is-IS":!0,"it-IT":!0,"ja-JP":!0,"kn-IN":!0,"ko-KR":!0,"lt-LT":!0,"lv-LV":!0,"mk-MK":!0,"ml-IN":!0,"mr-IN":!0,"ms-BN":!0,"nb-NO":!0,"nl-NL":!0,"pl-PL":!0,"pt-BR":!0,"pt-PT":!0,"ro-RO":!0,"ru-RU":!0,"sk-SK":!0,"sl-SI":!0,"sq-AL":!0,"sv-SE":!0,"sw-KE":!0,"ta-IN":!0,"te-IN":!0,"th-TH":!0,"tr-TR":!0,"uk-UA":!0,"ur-IN":!0,"vi-VN":!0,"zh-Hans-CN":!0,"zh-Hant":!0,"zh-Hant-HK":!0},"/features/shopping-research/":{"am-ET":!0,"bg-BG":!0,"bn-BD":!0,"bs-BA":!0,"cs-CZ":!0,"da-DK":!0,"de-DE":!0,"el-GR":!0,"es-419":!0,"es-ES":!0,"et-EE":!0,"fi-FI":!0,"fil-PH":!0,"fr-CA":!0,"fr-FR":!0,"hi-IN":!0,"hr-HR":!0,"hu-HU":!0,"hy-AM":!0,"id-ID":!0,"is-IS":!0,"it-IT":!0,"ja-JP":!0,"kn-IN":!0,"ko-KR":!0,"lt-LT":!0,"lv-LV":!0,"mk-MK":!0,"ml-IN":!0,"mr-IN":!0,"ms-BN":!0,"nb-NO":!0,"nl-NL":!0,"pl-PL":!0,"pt-BR":!0,"pt-PT":!0,"ro-RO":!0,"ru-RU":!0,"sk-SK":!0,"sl-SI":!0,"sq-AL":!0,"sv-SE":!0,"sw-KE":!0,"ta-IN":!0,"te-IN":!0,"th-TH":!0,"tr-TR":!0,"uk-UA":!0,"vi-VN":!0,"zh-Hans-CN":!0,"zh-Hant":!0,"zh-Hant-HK":!0},"/features/study-mode/":{"am-ET":!0,"bg-BG":!0,"bn-BD":!0,"bs-BA":!0,"cs-CZ":!0,"da-DK":!0,"de-DE":!0,"el-GR":!0,"es-419":!0,"es-ES":!0,"et-EE":!0,"fi-FI":!0,"fil-PH":!0,"fr-CA":!0,"fr-FR":!0,"hi-IN":!0,"hr-HR":!0,"hu-HU":!0,"hy-AM":!0,"id-ID":!0,"is-IS":!0,"it-IT":!0,"ja-JP":!0,"kn-IN":!0,"ko-KR":!0,"lt-LT":!0,"lv-LV":!0,"mk-MK":!0,"ml-IN":!0,"mr-IN":!0,"ms-BN":!0,"nb-NO":!0,"nl-NL":!0,"pl-PL":!0,"pt-BR":!0,"pt-PT":!0,"ro-RO":!0,"ru-RU":!0,"sk-SK":!0,"sl-SI":!0,"sq-AL":!0,"sv-SE":!0,"sw-KE":!0,"ta-IN":!0,"te-IN":!0,"th-TH":!0,"tr-TR":!0,"uk-UA":!0,"vi-VN":!0,"zh-Hans-CN":!0,"zh-Hant":!0,"zh-Hant-HK":!0},"/features/voice-with-video/":{"am-ET":!0,"bg-BG":!0,"bn-BD":!0,"bs-BA":!0,"cs-CZ":!0,"da-DK":!0,"de-DE":!0,"el-GR":!0,"es-419":!0,"es-ES":!0,"et-EE":!0,"fi-FI":!0,"fil-PH":!0,"fr-CA":!0,"fr-FR":!0,"hi-IN":!0,"hr-HR":!0,"hu-HU":!0,"hy-AM":!0,"id-ID":!0,"is-IS":!0,"it-IT":!0,"ja-JP":!0,"kn-IN":!0,"ko-KR":!0,"lt-LT":!0,"lv-LV":!0,"mk-MK":!0,"ml-IN":!0,"mr-IN":!0,"ms-BN":!0,"nb-NO":!0,"nl-NL":!0,"pl-PL":!0,"pt-BR":!0,"pt-PT":!0,"ro-RO":!0,"ru-RU":!0,"sk-SK":!0,"sl-SI":!0,"sq-AL":!0,"sv-SE":!0,"sw-KE":!0,"ta-IN":!0,"te-IN":!0,"th-TH":!0,"tr-TR":!0,"uk-UA":!0,"vi-VN":!0,"zh-Hans-CN":!0,"zh-Hant":!0,"zh-Hant-HK":!0},"/features/voice/":{"am-ET":!0,"bg-BG":!0,"bn-BD":!0,"bs-BA":!0,"cs-CZ":!0,"da-DK":!0,"de-DE":!0,"el-GR":!0,"es-419":!0,"es-ES":!0,"et-EE":!0,"fi-FI":!0,"fil-PH":!0,"fr-CA":!0,"fr-FR":!0,"hi-IN":!0,"hr-HR":!0,"hu-HU":!0,"hy-AM":!0,"id-ID":!0,"is-IS":!0,"it-IT":!0,"ja-JP":!0,"kn-IN":!0,"ko-KR":!0,"lt-LT":!0,"lv-LV":!0,"mk-MK":!0,"ml-IN":!0,"mr-IN":!0,"ms-BN":!0,"nb-NO":!0,"nl-NL":!0,"pl-PL":!0,"pt-BR":!0,"pt-PT":!0,"ro-RO":!0,"ru-RU":!0,"sk-SK":!0,"sl-SI":!0,"sq-AL":!0,"sv-SE":!0,"sw-KE":!0,"ta-IN":!0,"te-IN":!0,"th-TH":!0,"tr-TR":!0,"uk-UA":!0,"vi-VN":!0,"zh-Hans-CN":!0,"zh-Hant":!0,"zh-Hant-HK":!0},"/first-party-gpts/":{"am-ET":!0,"bg-BG":!0,"bn-BD":!0,"bs-BA":!0,"cs-CZ":!0,"da-DK":!0,"de-DE":!0,"el-GR":!0,"es-419":!0,"es-ES":!0,"et-EE":!0,"fi-FI":!0,"fil-PH":!0,"fr-CA":!0,"fr-FR":!0,"hi-IN":!0,"hr-HR":!0,"hu-HU":!0,"hy-AM":!0,"id-ID":!0,"is-IS":!0,"it-IT":!0,"ja-JP":!0,"kn-IN":!0,"ko-KR":!0,"lt-LT":!0,"lv-LV":!0,"mk-MK":!0,"ml-IN":!0,"mr-IN":!0,"ms-BN":!0,"nb-NO":!0,"nl-NL":!0,"pl-PL":!0,"pt-BR":!0,"pt-PT":!0,"ro-RO":!0,"ru-RU":!0,"sk-SK":!0,"sl-SI":!0,"sq-AL":!0,"sv-SE":!0,"sw-KE":!0,"ta-IN":!0,"te-IN":!0,"th-TH":!0,"tr-TR":!0,"uk-UA":!0,"vi-VN":!0,"zh-Hans-CN":!0,"zh-Hant":!0,"zh-Hant-HK":!0},"/learn/cover-letter/":{"am-ET":!0,"bg-BG":!0,"bn-BD":!1,"bs-BA":!0,"cs-CZ":!0,"da-DK":!0,"de-DE":!0,"el-GR":!0,"es-419":!0,"es-ES":!0,"et-EE":!0,"fi-FI":!0,"fil-PH":!0,"fr-CA":!0,"fr-FR":!0,"hi-IN":!0,"hr-HR":!0,"hu-HU":!0,"hy-AM":!0,"id-ID":!0,"is-IS":!0,"it-IT":!0,"ja-JP":!0,"kn-IN":!0,"ko-KR":!0,"lt-LT":!0,"lv-LV":!0,"mk-MK":!0,"ml-IN":!0,"mr-IN":!0,"ms-BN":!0,"nb-NO":!0,"nl-NL":!0,"pl-PL":!0,"pt-BR":!0,"pt-PT":!0,"ro-RO":!0,"ru-RU":!0,"sk-SK":!0,"sl-SI":!0,"sq-AL":!0,"sv-SE":!0,"sw-KE":!0,"ta-IN":!0,"te-IN":!1,"th-TH":!0,"tr-TR":!0,"uk-UA":!0,"vi-VN":!0,"zh-Hans-CN":!0,"zh-Hant":!0,"zh-Hant-HK":!0},"/merchants/":{"am-ET":!0,"bg-BG":!0,"bn-BD":!0,"bs-BA":!0,"cs-CZ":!0,"da-DK":!0,"de-DE":!0,"el-GR":!0,"es-419":!0,"es-ES":!0,"et-EE":!0,"fi-FI":!0,"fil-PH":!0,"fr-CA":!0,"fr-FR":!0,"hi-IN":!0,"hr-HR":!0,"hu-HU":!0,"hy-AM":!0,"id-ID":!0,"is-IS":!0,"it-IT":!0,"ja-JP":!0,"kn-IN":!0,"ko-KR":!0,"lt-LT":!0,"lv-LV":!0,"mk-MK":!0,"ml-IN":!0,"mr-IN":!0,"ms-BN":!0,"nb-NO":!0,"nl-NL":!0,"pl-PL":!0,"pt-BR":!0,"pt-PT":!0,"ro-RO":!0,"ru-RU":!0,"sk-SK":!0,"sl-SI":!0,"sq-AL":!0,"sv-SE":!0,"sw-KE":!0,"ta-IN":!0,"te-IN":!0,"th-TH":!0,"tr-TR":!0,"uk-UA":!0,"vi-VN":!0,"zh-Hans-CN":!0,"zh-Hant":!0,"zh-Hant-HK":!0},"/overview/":{"am-ET":!0,"bg-BG":!0,"bn-BD":!0,"bs-BA":!0,"cs-CZ":!0,"da-DK":!0,"de-DE":!0,"el-GR":!0,"es-419":!0,"es-ES":!0,"et-EE":!0,"fi-FI":!0,"fil-PH":!0,"fr-CA":!0,"fr-FR":!0,"hi-IN":!0,"hr-HR":!0,"hu-HU":!0,"hy-AM":!0,"id-ID":!0,"is-IS":!0,"it-IT":!0,"ja-JP":!0,"kn-IN":!0,"ko-KR":!0,"lt-LT":!0,"lv-LV":!0,"mk-MK":!0,"ml-IN":!0,"mr-IN":!0,"ms-BN":!0,"nb-NO":!0,"nl-NL":!0,"pl-PL":!0,"pt-BR":!0,"pt-PT":!0,"ro-RO":!0,"ru-RU":!0,"sk-SK":!0,"sl-SI":!0,"sq-AL":!0,"sv-SE":!0,"sw-KE":!0,"ta-IN":!0,"te-IN":!0,"th-TH":!0,"tr-TR":!0,"uk-UA":!0,"vi-VN":!0,"zh-Hans-CN":!0,"zh-Hant":!0,"zh-Hant-HK":!0},"/parent-resources/":{"am-ET":!0,"bg-BG":!0,"bn-BD":!1,"bs-BA":!0,"cs-CZ":!0,"da-DK":!0,"de-DE":!0,"el-GR":!0,"es-419":!0,"es-ES":!0,"et-EE":!0,"fi-FI":!0,"fil-PH":!0,"fr-CA":!0,"fr-FR":!0,"hi-IN":!0,"hr-HR":!0,"hu-HU":!0,"hy-AM":!0,"id-ID":!0,"is-IS":!0,"it-IT":!0,"ja-JP":!0,"kn-IN":!0,"ko-KR":!0,"lt-LT":!0,"lv-LV":!0,"mk-MK":!0,"ml-IN":!0,"mr-IN":!0,"ms-BN":!0,"nb-NO":!0,"nl-NL":!0,"pl-PL":!0,"pt-BR":!0,"pt-PT":!0,"ro-RO":!0,"ru-RU":!0,"sk-SK":!0,"sl-SI":!0,"sq-AL":!0,"sv-SE":!0,"sw-KE":!0,"ta-IN":!0,"te-IN":!0,"th-TH":!0,"tr-TR":!0,"uk-UA":!0,"vi-VN":!0,"zh-Hans-CN":!0,"zh-Hant":!0,"zh-Hant-HK":!0},"/plans/free/":{"am-ET":!0,"bg-BG":!0,"bn-BD":!0,"bs-BA":!0,"cs-CZ":!0,"da-DK":!0,"de-DE":!0,"el-GR":!0,"es-419":!0,"es-ES":!0,"et-EE":!0,"fi-FI":!0,"fil-PH":!0,"fr-CA":!0,"fr-FR":!0,"hi-IN":!0,"hr-HR":!0,"hu-HU":!0,"hy-AM":!0,"id-ID":!0,"is-IS":!0,"it-IT":!0,"ja-JP":!0,"kn-IN":!0,"ko-KR":!0,"lt-LT":!0,"lv-LV":!0,"mk-MK":!0,"ml-IN":!0,"mr-IN":!0,"ms-BN":!0,"nb-NO":!0,"nl-NL":!0,"pl-PL":!0,"pt-BR":!0,"pt-PT":!0,"ro-RO":!0,"ru-RU":!0,"sk-SK":!0,"sl-SI":!0,"sq-AL":!0,"sv-SE":!0,"sw-KE":!0,"ta-IN":!0,"te-IN":!0,"th-TH":!0,"tr-TR":!0,"uk-UA":!0,"vi-VN":!0,"zh-Hans-CN":!0,"zh-Hant":!0,"zh-Hant-HK":!0},"/plans/go/":{"am-ET":!0,"bg-BG":!0,"bn-BD":!0,"bs-BA":!0,"cs-CZ":!0,"da-DK":!0,"de-DE":!0,"el-GR":!0,"es-419":!0,"es-ES":!0,"et-EE":!0,"fi-FI":!0,"fil-PH":!0,"fr-CA":!0,"fr-FR":!0,"hi-IN":!0,"hr-HR":!0,"hu-HU":!0,"hy-AM":!0,"id-ID":!0,"is-IS":!0,"it-IT":!0,"ja-JP":!0,"kn-IN":!0,"ko-KR":!0,"lt-LT":!0,"lv-LV":!0,"mk-MK":!0,"ml-IN":!0,"mr-IN":!0,"ms-BN":!0,"nb-NO":!0,"nl-NL":!0,"pl-PL":!0,"pt-BR":!0,"pt-PT":!0,"ro-RO":!0,"ru-RU":!0,"sk-SK":!0,"sl-SI":!0,"sq-AL":!0,"sv-SE":!0,"sw-KE":!0,"ta-IN":!0,"te-IN":!0,"th-TH":!0,"tr-TR":!0,"uk-UA":!0,"vi-VN":!0,"zh-Hans-CN":!0,"zh-Hant":!0,"zh-Hant-HK":!0},"/plans/k12-teachers/":{"am-ET":!0,"bg-BG":!0,"bn-BD":!0,"bs-BA":!0,"cs-CZ":!0,"da-DK":!0,"de-DE":!0,"el-GR":!0,"es-419":!0,"es-ES":!0,"et-EE":!0,"fi-FI":!0,"fil-PH":!0,"fr-CA":!0,"fr-FR":!0,"hi-IN":!0,"hr-HR":!0,"hu-HU":!0,"hy-AM":!0,"id-ID":!0,"is-IS":!0,"it-IT":!0,"ja-JP":!0,"kn-IN":!0,"ko-KR":!0,"lt-LT":!0,"lv-LV":!0,"mk-MK":!0,"ml-IN":!0,"mr-IN":!0,"ms-BN":!0,"nb-NO":!0,"nl-NL":!0,"pl-PL":!0,"pt-BR":!0,"pt-PT":!0,"ro-RO":!0,"ru-RU":!0,"sk-SK":!0,"sl-SI":!0,"sq-AL":!0,"sv-SE":!0,"sw-KE":!0,"ta-IN":!0,"te-IN":!0,"th-TH":!0,"tr-TR":!0,"uk-UA":!0,"vi-VN":!0,"zh-Hans-CN":!0,"zh-Hant":!0,"zh-Hant-HK":!0},"/plans/plus/":{"am-ET":!0,"bg-BG":!0,"bn-BD":!0,"bs-BA":!0,"cs-CZ":!0,"da-DK":!0,"de-DE":!0,"el-GR":!0,"es-419":!0,"es-ES":!0,"et-EE":!0,"fi-FI":!0,"fil-PH":!0,"fr-CA":!0,"fr-FR":!0,"hi-IN":!0,"hr-HR":!0,"hu-HU":!0,"hy-AM":!0,"id-ID":!0,"is-IS":!0,"it-IT":!0,"ja-JP":!0,"kn-IN":!0,"ko-KR":!0,"lt-LT":!0,"lv-LV":!0,"mk-MK":!0,"ml-IN":!0,"mr-IN":!0,"ms-BN":!0,"nb-NO":!0,"nl-NL":!0,"pl-PL":!0,"pt-BR":!0,"pt-PT":!0,"ro-RO":!0,"ru-RU":!0,"sk-SK":!0,"sl-SI":!0,"sq-AL":!0,"sv-SE":!0,"sw-KE":!0,"ta-IN":!0,"te-IN":!0,"th-TH":!0,"tr-TR":!0,"uk-UA":!0,"vi-VN":!0,"zh-Hans-CN":!0,"zh-Hant":!0,"zh-Hant-HK":!0},"/plans/pro/":{"am-ET":!0,"bg-BG":!0,"bn-BD":!0,"bs-BA":!0,"cs-CZ":!0,"da-DK":!0,"de-DE":!0,"el-GR":!0,"es-419":!0,"es-ES":!0,"et-EE":!0,"fi-FI":!0,"fil-PH":!0,"fr-CA":!0,"fr-FR":!0,"hi-IN":!0,"hr-HR":!0,"hu-HU":!0,"hy-AM":!0,"id-ID":!0,"is-IS":!0,"it-IT":!0,"ja-JP":!0,"kn-IN":!0,"ko-KR":!0,"lt-LT":!0,"lv-LV":!0,"mk-MK":!0,"ml-IN":!0,"mr-IN":!0,"ms-BN":!0,"nb-NO":!0,"nl-NL":!0,"pl-PL":!0,"pt-BR":!0,"pt-PT":!0,"ro-RO":!0,"ru-RU":!0,"sk-SK":!0,"sl-SI":!0,"sq-AL":!0,"sv-SE":!0,"sw-KE":!0,"ta-IN":!0,"te-IN":!0,"th-TH":!0,"tr-TR":!0,"uk-UA":!0,"vi-VN":!0,"zh-Hans-CN":!0,"zh-Hant":!0,"zh-Hant-HK":!0},"/pricing/":{"am-ET":!0,"bg-BG":!0,"bn-BD":!0,"bs-BA":!0,"cs-CZ":!0,"da-DK":!0,"de-DE":!0,"el-GR":!0,"es-419":!0,"es-ES":!0,"et-EE":!0,"fi-FI":!0,"fil-PH":!0,"fr-CA":!0,"fr-FR":!0,"hi-IN":!0,"hr-HR":!0,"hu-HU":!0,"hy-AM":!0,"id-ID":!0,"is-IS":!0,"it-IT":!0,"ja-JP":!0,"kn-IN":!0,"ko-KR":!0,"lt-LT":!0,"lv-LV":!0,"mk-MK":!0,"ml-IN":!0,"mr-IN":!0,"ms-BN":!0,"nb-NO":!0,"nl-NL":!0,"pl-PL":!0,"pt-BR":!0,"pt-PT":!0,"ro-RO":!0,"ru-RU":!0,"sk-SK":!0,"sl-SI":!0,"sq-AL":!0,"sv-SE":!0,"sw-KE":!0,"ta-IN":!0,"te-IN":!0,"th-TH":!0,"tr-TR":!0,"uk-UA":!0,"vi-VN":!0,"zh-Hans-CN":!0,"zh-Hant":!0,"zh-Hant-HK":!0},"/translate/":{"am-ET":!0,"bg-BG":!0,"bn-BD":!0,"bs-BA":!0,"cs-CZ":!0,"da-DK":!0,"de-DE":!0,"el-GR":!0,"es-419":!0,"es-ES":!0,"et-EE":!0,"fi-FI":!0,"fil-PH":!0,"fr-CA":!0,"fr-FR":!0,"hi-IN":!0,"hr-HR":!0,"hu-HU":!0,"hy-AM":!0,"id-ID":!0,"is-IS":!0,"it-IT":!0,"ja-JP":!0,"kn-IN":!0,"ko-KR":!0,"lt-LT":!0,"lv-LV":!0,"mk-MK":!0,"ml-IN":!0,"mr-IN":!0,"ms-BN":!0,"nb-NO":!0,"nl-NL":!0,"pl-PL":!0,"pt-BR":!0,"pt-PT":!0,"ro-RO":!0,"ru-RU":!0,"sk-SK":!0,"sl-SI":!0,"sq-AL":!0,"sv-SE":!0,"sw-KE":!0,"ta-IN":!0,"te-IN":!0,"th-TH":!0,"tr-TR":!0,"uk-UA":!0,"vi-VN":!0,"zh-Hans-CN":!0,"zh-Hant":!0,"zh-Hant-HK":!0},"/translate/english-to-french/":{"am-ET":!0,"bg-BG":!0,"bn-BD":!0,"bs-BA":!0,"cs-CZ":!0,"da-DK":!0,"de-DE":!0,"el-GR":!0,"es-419":!0,"es-ES":!0,"et-EE":!0,"fi-FI":!0,"fil-PH":!0,"fr-CA":!0,"fr-FR":!0,"hi-IN":!0,"hr-HR":!0,"hu-HU":!0,"hy-AM":!0,"id-ID":!0,"is-IS":!0,"it-IT":!0,"ja-JP":!0,"kn-IN":!0,"ko-KR":!0,"lt-LT":!0,"lv-LV":!0,"mk-MK":!0,"ml-IN":!0,"mr-IN":!0,"ms-BN":!0,"nb-NO":!0,"nl-NL":!0,"pl-PL":!0,"pt-BR":!0,"pt-PT":!0,"ro-RO":!0,"ru-RU":!0,"sk-SK":!0,"sl-SI":!0,"sq-AL":!0,"sv-SE":!0,"sw-KE":!0,"ta-IN":!0,"te-IN":!0,"th-TH":!0,"tr-TR":!0,"uk-UA":!0,"vi-VN":!0,"zh-Hans-CN":!0,"zh-Hant":!0,"zh-Hant-HK":!0},"/translate/english-to-hindi/":{"am-ET":!0,"bg-BG":!0,"bn-BD":!0,"bs-BA":!0,"cs-CZ":!0,"da-DK":!0,"de-DE":!0,"el-GR":!0,"es-419":!0,"es-ES":!0,"et-EE":!0,"fi-FI":!0,"fil-PH":!0,"fr-CA":!0,"fr-FR":!0,"hi-IN":!0,"hr-HR":!0,"hu-HU":!0,"hy-AM":!0,"id-ID":!0,"is-IS":!0,"it-IT":!0,"ja-JP":!0,"kn-IN":!0,"ko-KR":!0,"lt-LT":!0,"lv-LV":!0,"mk-MK":!0,"ml-IN":!0,"mr-IN":!0,"ms-BN":!0,"nb-NO":!0,"nl-NL":!0,"pl-PL":!0,"pt-BR":!0,"pt-PT":!0,"ro-RO":!0,"ru-RU":!0,"sk-SK":!0,"sl-SI":!0,"sq-AL":!0,"sv-SE":!0,"sw-KE":!0,"ta-IN":!0,"te-IN":!0,"th-TH":!0,"tr-TR":!0,"uk-UA":!0,"vi-VN":!0,"zh-Hans-CN":!0,"zh-Hant":!0,"zh-Hant-HK":!0},"/translate/english-to-marathi/":{"am-ET":!0,"bg-BG":!0,"bn-BD":!0,"bs-BA":!0,"cs-CZ":!0,"da-DK":!0,"de-DE":!0,"el-GR":!0,"es-419":!0,"es-ES":!0,"et-EE":!0,"fi-FI":!0,"fil-PH":!0,"fr-CA":!0,"fr-FR":!0,"hi-IN":!0,"hr-HR":!0,"hu-HU":!0,"hy-AM":!0,"id-ID":!0,"is-IS":!0,"it-IT":!0,"ja-JP":!0,"kn-IN":!0,"ko-KR":!0,"lt-LT":!0,"lv-LV":!0,"mk-MK":!0,"ml-IN":!0,"mr-IN":!0,"ms-BN":!0,"nb-NO":!0,"nl-NL":!0,"pl-PL":!0,"pt-BR":!0,"pt-PT":!0,"ro-RO":!0,"ru-RU":!0,"sk-SK":!0,"sl-SI":!0,"sq-AL":!0,"sv-SE":!0,"sw-KE":!0,"ta-IN":!0,"te-IN":!0,"th-TH":!0,"tr-TR":!0,"uk-UA":!0,"vi-VN":!0,"zh-Hans-CN":!0,"zh-Hant":!0,"zh-Hant-HK":!0},"/translate/english-to-portuguese/":{"am-ET":!0,"bg-BG":!0,"bn-BD":!0,"bs-BA":!0,"cs-CZ":!0,"da-DK":!0,"de-DE":!0,"el-GR":!0,"es-419":!0,"es-ES":!0,"et-EE":!0,"fi-FI":!0,"fil-PH":!0,"fr-CA":!0,"fr-FR":!0,"hi-IN":!0,"hr-HR":!0,"hu-HU":!0,"hy-AM":!0,"id-ID":!0,"is-IS":!0,"it-IT":!0,"ja-JP":!0,"kn-IN":!0,"ko-KR":!0,"lt-LT":!0,"lv-LV":!0,"mk-MK":!0,"ml-IN":!0,"mr-IN":!0,"ms-BN":!0,"nb-NO":!0,"nl-NL":!0,"pl-PL":!0,"pt-BR":!0,"pt-PT":!0,"ro-RO":!0,"ru-RU":!0,"sk-SK":!0,"sl-SI":!0,"sq-AL":!0,"sv-SE":!0,"sw-KE":!0,"ta-IN":!0,"te-IN":!0,"th-TH":!0,"tr-TR":!0,"uk-UA":!0,"vi-VN":!0,"zh-Hans-CN":!0,"zh-Hant":!0,"zh-Hant-HK":!0},"/translate/english-to-tagalog/":{"am-ET":!0,"bg-BG":!0,"bn-BD":!0,"bs-BA":!0,"cs-CZ":!0,"da-DK":!0,"de-DE":!0,"el-GR":!0,"es-419":!0,"es-ES":!0,"et-EE":!0,"fi-FI":!0,"fil-PH":!0,"fr-CA":!0,"fr-FR":!0,"hi-IN":!0,"hr-HR":!0,"hu-HU":!0,"hy-AM":!0,"id-ID":!0,"is-IS":!0,"it-IT":!0,"ja-JP":!0,"kn-IN":!0,"ko-KR":!0,"lt-LT":!0,"lv-LV":!0,"mk-MK":!0,"ml-IN":!0,"mr-IN":!0,"ms-BN":!0,"nb-NO":!0,"nl-NL":!0,"pl-PL":!0,"pt-BR":!0,"pt-PT":!0,"ro-RO":!0,"ru-RU":!0,"sk-SK":!0,"sl-SI":!0,"sq-AL":!0,"sv-SE":!0,"sw-KE":!0,"ta-IN":!0,"te-IN":!0,"th-TH":!0,"tr-TR":!0,"uk-UA":!0,"vi-VN":!0,"zh-Hans-CN":!0,"zh-Hant":!0,"zh-Hant-HK":!0},"/translate/english-to-tamil/":{"am-ET":!0,"bg-BG":!0,"bn-BD":!0,"bs-BA":!0,"cs-CZ":!0,"da-DK":!0,"de-DE":!0,"el-GR":!0,"es-419":!0,"es-ES":!0,"et-EE":!0,"fi-FI":!0,"fil-PH":!0,"fr-CA":!0,"fr-FR":!0,"hi-IN":!0,"hr-HR":!0,"hu-HU":!0,"hy-AM":!0,"id-ID":!0,"is-IS":!0,"it-IT":!0,"ja-JP":!0,"kn-IN":!0,"ko-KR":!0,"lt-LT":!0,"lv-LV":!0,"mk-MK":!0,"ml-IN":!0,"mr-IN":!0,"ms-BN":!0,"nb-NO":!0,"nl-NL":!0,"pl-PL":!0,"pt-BR":!0,"pt-PT":!0,"ro-RO":!0,"ru-RU":!0,"sk-SK":!0,"sl-SI":!0,"sq-AL":!0,"sv-SE":!0,"sw-KE":!0,"ta-IN":!0,"te-IN":!0,"th-TH":!0,"tr-TR":!0,"uk-UA":!0,"vi-VN":!0,"zh-Hans-CN":!0,"zh-Hant":!0,"zh-Hant-HK":!0},"/translate/english-to-urdu/":{"am-ET":!0,"bg-BG":!0,"bn-BD":!0,"bs-BA":!0,"cs-CZ":!0,"da-DK":!0,"de-DE":!0,"el-GR":!0,"es-419":!0,"es-ES":!0,"et-EE":!0,"fi-FI":!0,"fil-PH":!0,"fr-CA":!0,"fr-FR":!0,"hi-IN":!0,"hr-HR":!0,"hu-HU":!0,"hy-AM":!0,"id-ID":!0,"is-IS":!0,"it-IT":!0,"ja-JP":!0,"kn-IN":!0,"ko-KR":!0,"lt-LT":!0,"lv-LV":!0,"mk-MK":!0,"ml-IN":!0,"mr-IN":!0,"ms-BN":!0,"nb-NO":!0,"nl-NL":!0,"pl-PL":!0,"pt-BR":!0,"pt-PT":!0,"ro-RO":!0,"ru-RU":!0,"sk-SK":!0,"sl-SI":!0,"sq-AL":!0,"sv-SE":!0,"sw-KE":!0,"ta-IN":!0,"te-IN":!0,"th-TH":!0,"tr-TR":!0,"uk-UA":!0,"vi-VN":!0,"zh-Hans-CN":!0,"zh-Hant":!0,"zh-Hant-HK":!0},"/translate/hindi-to-english/":{"am-ET":!0,"bg-BG":!0,"bn-BD":!0,"bs-BA":!0,"cs-CZ":!0,"da-DK":!0,"de-DE":!0,"el-GR":!0,"es-419":!0,"es-ES":!0,"et-EE":!0,"fi-FI":!0,"fil-PH":!0,"fr-CA":!0,"fr-FR":!0,"hi-IN":!0,"hr-HR":!0,"hu-HU":!0,"hy-AM":!0,"id-ID":!0,"is-IS":!0,"it-IT":!0,"ja-JP":!0,"kn-IN":!0,"ko-KR":!0,"lt-LT":!0,"lv-LV":!0,"mk-MK":!0,"ml-IN":!0,"mr-IN":!0,"ms-BN":!0,"nb-NO":!0,"nl-NL":!0,"pl-PL":!0,"pt-BR":!0,"pt-PT":!0,"ro-RO":!0,"ru-RU":!0,"sk-SK":!0,"sl-SI":!0,"sq-AL":!0,"sv-SE":!0,"sw-KE":!0,"ta-IN":!0,"te-IN":!0,"th-TH":!0,"tr-TR":!0,"uk-UA":!0,"vi-VN":!0,"zh-Hans-CN":!0,"zh-Hant":!0,"zh-Hant-HK":!0},"/translate/spanish-to-english/":{"am-ET":!0,"bg-BG":!0,"bn-BD":!0,"bs-BA":!0,"cs-CZ":!0,"da-DK":!0,"de-DE":!0,"el-GR":!0,"es-419":!0,"es-ES":!0,"et-EE":!0,"fi-FI":!0,"fil-PH":!0,"fr-CA":!0,"fr-FR":!0,"hi-IN":!0,"hr-HR":!0,"hu-HU":!0,"hy-AM":!0,"id-ID":!0,"is-IS":!0,"it-IT":!0,"ja-JP":!0,"kn-IN":!0,"ko-KR":!0,"lt-LT":!0,"lv-LV":!0,"mk-MK":!0,"ml-IN":!0,"mr-IN":!0,"ms-BN":!0,"nb-NO":!0,"nl-NL":!0,"pl-PL":!0,"pt-BR":!0,"pt-PT":!0,"ro-RO":!0,"ru-RU":!0,"sk-SK":!0,"sl-SI":!0,"sq-AL":!0,"sv-SE":!0,"sw-KE":!0,"ta-IN":!0,"te-IN":!0,"th-TH":!0,"tr-TR":!0,"uk-UA":!0,"vi-VN":!0,"zh-Hans-CN":!0,"zh-Hant":!0,"zh-Hant-HK":!0},"/translate/tagalog-to-english/":{"am-ET":!0,"bg-BG":!0,"bn-BD":!0,"bs-BA":!0,"cs-CZ":!0,"da-DK":!0,"de-DE":!0,"el-GR":!0,"es-419":!0,"es-ES":!0,"et-EE":!0,"fi-FI":!0,"fil-PH":!0,"fr-CA":!0,"fr-FR":!0,"hi-IN":!0,"hr-HR":!0,"hu-HU":!0,"hy-AM":!0,"id-ID":!0,"is-IS":!0,"it-IT":!0,"ja-JP":!0,"kn-IN":!0,"ko-KR":!0,"lt-LT":!0,"lv-LV":!0,"mk-MK":!0,"ml-IN":!0,"mr-IN":!0,"ms-BN":!0,"nb-NO":!0,"nl-NL":!0,"pl-PL":!0,"pt-BR":!0,"pt-PT":!0,"ro-RO":!0,"ru-RU":!0,"sk-SK":!0,"sl-SI":!0,"sq-AL":!0,"sv-SE":!0,"sw-KE":!0,"ta-IN":!0,"te-IN":!0,"th-TH":!0,"tr-TR":!0,"uk-UA":!0,"vi-VN":!0,"zh-Hans-CN":!0,"zh-Hant":!0,"zh-Hant-HK":!0},"/use-cases/chat-with-presentations/":{"am-ET":!0,"bg-BG":!0,"bn-BD":!0,"bs-BA":!0,"cs-CZ":!0,"da-DK":!0,"de-DE":!0,"el-GR":!0,"es-419":!0,"es-ES":!0,"et-EE":!0,"fi-FI":!0,"fil-PH":!0,"fr-CA":!0,"fr-FR":!0,"hi-IN":!0,"hr-HR":!0,"hu-HU":!0,"hy-AM":!0,"id-ID":!0,"is-IS":!0,"it-IT":!0,"ja-JP":!0,"kn-IN":!0,"ko-KR":!0,"lt-LT":!0,"lv-LV":!0,"mk-MK":!0,"ml-IN":!0,"mr-IN":!0,"ms-BN":!0,"nb-NO":!0,"nl-NL":!0,"pl-PL":!0,"pt-BR":!0,"pt-PT":!0,"ro-RO":!0,"ru-RU":!0,"sk-SK":!0,"sl-SI":!0,"sq-AL":!0,"sv-SE":!0,"sw-KE":!0,"ta-IN":!0,"te-IN":!0,"th-TH":!0,"tr-TR":!0,"uk-UA":!0,"vi-VN":!0,"zh-Hans-CN":!0,"zh-Hant":!0,"zh-Hant-HK":!0},"/use-cases/chat-with-spreadsheets/":{"am-ET":!0,"bg-BG":!0,"bn-BD":!0,"bs-BA":!0,"cs-CZ":!0,"da-DK":!0,"de-DE":!0,"el-GR":!0,"es-419":!0,"es-ES":!0,"et-EE":!0,"fi-FI":!0,"fil-PH":!0,"fr-CA":!0,"fr-FR":!0,"hi-IN":!0,"hr-HR":!0,"hu-HU":!0,"hy-AM":!0,"id-ID":!0,"is-IS":!0,"it-IT":!0,"ja-JP":!0,"kn-IN":!0,"ko-KR":!0,"lt-LT":!0,"lv-LV":!0,"mk-MK":!0,"ml-IN":!0,"mr-IN":!0,"ms-BN":!0,"nb-NO":!0,"nl-NL":!0,"pl-PL":!0,"pt-BR":!0,"pt-PT":!0,"ro-RO":!0,"ru-RU":!0,"sk-SK":!0,"sl-SI":!0,"sq-AL":!0,"sv-SE":!0,"sw-KE":!0,"ta-IN":!0,"te-IN":!0,"th-TH":!0,"tr-TR":!0,"uk-UA":!0,"vi-VN":!0,"zh-Hans-CN":!0,"zh-Hant":!0,"zh-Hant-HK":!0},"/use-cases/high-school-teachers/":{"am-ET":!0,"bg-BG":!0,"bn-BD":!0,"bs-BA":!0,"cs-CZ":!0,"da-DK":!0,"de-DE":!0,"el-GR":!0,"es-419":!0,"es-ES":!0,"et-EE":!0,"fi-FI":!0,"fil-PH":!0,"fr-CA":!0,"fr-FR":!0,"hi-IN":!0,"hr-HR":!0,"hu-HU":!0,"hy-AM":!0,"id-ID":!0,"is-IS":!0,"it-IT":!0,"ja-JP":!0,"kn-IN":!0,"ko-KR":!0,"lt-LT":!0,"lv-LV":!0,"mk-MK":!0,"ml-IN":!0,"mr-IN":!0,"ms-BN":!0,"nb-NO":!0,"nl-NL":!0,"pl-PL":!0,"pt-BR":!0,"pt-PT":!0,"ro-RO":!0,"ru-RU":!0,"sk-SK":!0,"sl-SI":!0,"sq-AL":!0,"sv-SE":!0,"sw-KE":!0,"ta-IN":!0,"te-IN":!0,"th-TH":!0,"tr-TR":!0,"uk-UA":!0,"vi-VN":!0,"zh-Hans-CN":!0,"zh-Hant":!0,"zh-Hant-HK":!0},"/use-cases/inspiration-image-creation/":{"am-ET":!0,"bg-BG":!0,"bn-BD":!0,"bs-BA":!0,"cs-CZ":!0,"da-DK":!0,"de-DE":!0,"el-GR":!0,"es-419":!0,"es-ES":!0,"et-EE":!0,"fi-FI":!0,"fil-PH":!0,"fr-CA":!0,"fr-FR":!0,"hi-IN":!0,"hr-HR":!0,"hu-HU":!0,"hy-AM":!0,"id-ID":!0,"is-IS":!0,"it-IT":!0,"ja-JP":!0,"kn-IN":!0,"ko-KR":!0,"lt-LT":!0,"lv-LV":!0,"mk-MK":!0,"ml-IN":!0,"mr-IN":!0,"ms-BN":!0,"nb-NO":!0,"nl-NL":!0,"pl-PL":!0,"pt-BR":!0,"pt-PT":!0,"ro-RO":!0,"ru-RU":!0,"sk-SK":!0,"sl-SI":!0,"sq-AL":!0,"sv-SE":!0,"sw-KE":!0,"ta-IN":!0,"te-IN":!0,"th-TH":!0,"tr-TR":!0,"uk-UA":!0,"vi-VN":!0,"zh-Hans-CN":!0,"zh-Hant":!0,"zh-Hant-HK":!0},"/use-cases/recipes-cooking/":{"am-ET":!0,"bg-BG":!0,"bn-BD":!0,"bs-BA":!0,"cs-CZ":!0,"da-DK":!0,"de-DE":!0,"el-GR":!0,"es-419":!0,"es-ES":!0,"et-EE":!0,"fi-FI":!0,"fil-PH":!0,"fr-CA":!0,"fr-FR":!0,"hi-IN":!0,"hr-HR":!0,"hu-HU":!0,"hy-AM":!0,"id-ID":!0,"is-IS":!0,"it-IT":!0,"ja-JP":!0,"kn-IN":!0,"ko-KR":!0,"lt-LT":!0,"lv-LV":!0,"mk-MK":!0,"ml-IN":!0,"mr-IN":!0,"ms-BN":!0,"nb-NO":!0,"nl-NL":!0,"pl-PL":!0,"pt-BR":!0,"pt-PT":!0,"ro-RO":!0,"ru-RU":!0,"sk-SK":!0,"sl-SI":!0,"sq-AL":!0,"sv-SE":!0,"sw-KE":!0,"ta-IN":!0,"te-IN":!0,"th-TH":!0,"tr-TR":!0,"uk-UA":!0,"vi-VN":!0,"zh-Hans-CN":!0,"zh-Hant":!0,"zh-Hant-HK":!0},"/use-cases/scientists/":{"am-ET":!0,"bg-BG":!0,"bn-BD":!0,"bs-BA":!0,"cs-CZ":!0,"da-DK":!0,"de-DE":!0,"el-GR":!0,"es-419":!0,"es-ES":!0,"et-EE":!0,"fi-FI":!0,"fil-PH":!0,"fr-CA":!0,"fr-FR":!0,"hi-IN":!0,"hr-HR":!0,"hu-HU":!0,"hy-AM":!0,"id-ID":!0,"is-IS":!0,"it-IT":!0,"ja-JP":!0,"kn-IN":!0,"ko-KR":!0,"lt-LT":!0,"lv-LV":!0,"mk-MK":!0,"ml-IN":!0,"mr-IN":!0,"ms-BN":!0,"nb-NO":!0,"nl-NL":!0,"pl-PL":!0,"pt-BR":!0,"pt-PT":!0,"ro-RO":!0,"ru-RU":!0,"sk-SK":!0,"sl-SI":!0,"sq-AL":!0,"sv-SE":!0,"sw-KE":!0,"ta-IN":!0,"te-IN":!0,"th-TH":!0,"tr-TR":!0,"uk-UA":!0,"vi-VN":!0,"zh-Hans-CN":!0,"zh-Hant":!0,"zh-Hant-HK":!0},"/use-cases/student-writing-guide/":{"am-ET":!0,"bg-BG":!0,"bn-BD":!0,"bs-BA":!0,"cs-CZ":!0,"da-DK":!0,"de-DE":!0,"el-GR":!0,"es-419":!0,"es-ES":!0,"et-EE":!0,"fi-FI":!0,"fil-PH":!0,"fr-CA":!0,"fr-FR":!0,"hi-IN":!0,"hr-HR":!0,"hu-HU":!0,"hy-AM":!0,"id-ID":!0,"is-IS":!0,"it-IT":!0,"ja-JP":!0,"kn-IN":!0,"ko-KR":!0,"lt-LT":!0,"lv-LV":!0,"mk-MK":!0,"ml-IN":!0,"mr-IN":!0,"ms-BN":!0,"nb-NO":!0,"nl-NL":!0,"pl-PL":!0,"pt-BR":!0,"pt-PT":!0,"ro-RO":!0,"ru-RU":!0,"sk-SK":!0,"sl-SI":!0,"sq-AL":!0,"sv-SE":!0,"sw-KE":!0,"ta-IN":!0,"te-IN":!0,"th-TH":!0,"tr-TR":!0,"uk-UA":!0,"vi-VN":!0,"zh-Hans-CN":!0,"zh-Hant":!0,"zh-Hant-HK":!0},"/use-cases/students-india/":{"am-ET":!0,"bg-BG":!0,"bn-BD":!0,"bs-BA":!0,"cs-CZ":!0,"da-DK":!0,"de-DE":!0,"el-GR":!0,"es-419":!0,"es-ES":!0,"et-EE":!0,"fi-FI":!0,"fil-PH":!0,"fr-CA":!0,"fr-FR":!0,"hi-IN":!0,"hr-HR":!0,"hu-HU":!0,"hy-AM":!0,"id-ID":!0,"is-IS":!0,"it-IT":!0,"ja-JP":!0,"kn-IN":!0,"ko-KR":!0,"lt-LT":!0,"lv-LV":!0,"mk-MK":!0,"ml-IN":!0,"mr-IN":!0,"ms-BN":!0,"nb-NO":!0,"nl-NL":!0,"pl-PL":!0,"pt-BR":!0,"pt-PT":!0,"ro-RO":!0,"ru-RU":!0,"sk-SK":!0,"sl-SI":!0,"sq-AL":!0,"sv-SE":!0,"sw-KE":!0,"ta-IN":!0,"te-IN":!0,"th-TH":!0,"tr-TR":!0,"uk-UA":!0,"vi-VN":!0,"zh-Hans-CN":!0,"zh-Hant":!0,"zh-Hant-HK":!0},"/use-cases/veterans/":{"am-ET":!0,"bg-BG":!0,"bn-BD":!0,"bs-BA":!0,"cs-CZ":!0,"da-DK":!0,"de-DE":!0,"el-GR":!0,"es-419":!0,"es-ES":!0,"et-EE":!0,"fi-FI":!0,"fil-PH":!0,"fr-CA":!0,"fr-FR":!0,"hi-IN":!0,"hr-HR":!0,"hu-HU":!0,"hy-AM":!0,"id-ID":!0,"is-IS":!0,"it-IT":!0,"ja-JP":!0,"kn-IN":!0,"ko-KR":!0,"lt-LT":!0,"lv-LV":!0,"mk-MK":!0,"ml-IN":!0,"mr-IN":!0,"ms-BN":!0,"nb-NO":!0,"nl-NL":!0,"pl-PL":!0,"pt-BR":!0,"pt-PT":!0,"ro-RO":!0,"ru-RU":!0,"sk-SK":!0,"sl-SI":!0,"sq-AL":!0,"sv-SE":!0,"sw-KE":!0,"ta-IN":!0,"te-IN":!0,"th-TH":!0,"tr-TR":!0,"uk-UA":!0,"vi-VN":!0,"zh-Hans-CN":!0,"zh-Hant":!0,"zh-Hant-HK":!0},"/youfoundme/":{"am-ET":!1,"bg-BG":!1,"bn-BD":!1,"bs-BA":!1,"cs-CZ":!1,"da-DK":!1,"de-DE":!1,"el-GR":!1,"es-419":!1,"es-ES":!1,"et-EE":!1,"fi-FI":!1,"fil-PH":!1,"fr-CA":!1,"fr-FR":!1,"hi-IN":!1,"hr-HR":!1,"hu-HU":!1,"hy-AM":!1,"id-ID":!1,"is-IS":!1,"it-IT":!1,"ja-JP":!1,"kn-IN":!1,"ko-KR":!1,"lt-LT":!1,"lv-LV":!1,"mk-MK":!1,"ml-IN":!1,"mr-IN":!1,"ms-BN":!1,"nb-NO":!1,"nl-NL":!1,"pl-PL":!1,"pt-BR":!1,"pt-PT":!1,"ro-RO":!1,"ru-RU":!1,"sk-SK":!1,"sl-SI":!1,"sq-AL":!1,"sv-SE":!1,"sw-KE":!1,"ta-IN":!1,"te-IN":!1,"th-TH":!1,"tr-TR":!1,"uk-UA":!1,"vi-VN":!1,"zh-Hans-CN":!1,"zh-Hant":!1,"zh-Hant-HK":!1}},Xq=["en-US","am-ET","bg-BG","bn-BD","bs-BA","cs-CZ","da-DK","de-DE","el-GR","es-ES","es-419","et-EE","fi-FI","fil-PH","fr-CA","fr-FR","hi-IN","hr-HR","hu-HU","hy-AM","id-ID","is-IS","it-IT","ja-JP","kn-IN","ko-KR","lt-LT","lv-LV","mk-MK","ml-IN","mr-IN","ms-BN","nb-NO","nl-NL","pl-PL","pt-BR","pt-PT","ro-RO","ru-RU","sk-SK","sl-SI","sq-AL","sv-SE","sw-KE","ta-IN","te-IN","th-TH","tr-TR","uk-UA","vi-VN","zh-Hans-CN","zh-Hant","zh-Hant-HK"],od="en-US";function zXe(t){return Xq.includes(t)}function n_t(t,e=!1){const n="https://chatgpt.com",s=t8(t),o=VXe[s];return e?[...ane.map(r=>({tagName:"link",rel:"alternate",hrefLang:r,href:r===od?"".concat(n).concat(s):"".concat(n,"/").concat(r).concat(s)})),{tagName:"link",rel:"alternate",hrefLang:"x-default",href:"".concat(n).concat(s)}]:[...Xq.filter(r=>r===od||(o==null?void 0:o[r])).map(r=>({tagName:"link",rel:"alternate",hrefLang:r,href:r===od?"".concat(n).concat(s):"".concat(n,"/").concat(r).concat(s)})),{tagName:"link",rel:"alternate",hrefLang:"x-default",href:"".concat(n).concat(s)}]}const s_t=(t,e)=>{if(!t||t.includes("use-cases/students")||t.includes("use-cases/university-educators")||t.includes("features/connectors")||t.includes("features/study-mode")||t.includes("team-sign-up")||e===od)return t;if(t.startsWith("https://openai.com")||t.startsWith("https://chatgpt.com")){const n=new URL(t),s=n.pathname.slice(1),o="/".concat(e,"/").concat(s);return n.pathname=o,n.toString()}else return t.startsWith("/")?"/".concat(e).concat(t):t};function o_t(t,e){const n=t8(t),s=n.split("/"),r=s.filter(Boolean)[0];let a="".concat(n);if(r&&zXe(r))if(e===od){const l=s.slice(2).join("/");a="/"+(l!=null?l:""),(a==="//"||a==="")&&(a="/")}else s[1]=e,a=s.join("/");else e!==od&&(a="/".concat(e).concat(n));return a=a.replace(/\/{2,}/g,"/"),a.startsWith("/")||(a="/"+a),a}async function WXe(){try{return await(await Vd()).getHost().getClientCapabilityVersion()}catch(t){return}}async function r_t(){const t=await WXe();return t!=null&&t>=2}var qXe=(t=>(t.Running="running",t.Finished="finished",t.Error="error",t))(qXe||{});const Jb=(t,e)=>"".concat(t,":").concat(e),Ej=(t,e,n)=>{var r;const s=new Map(t),o=(r=s.get(e))!=null?r:[];return s.set(e,[...o,n]),s},Tj=(t,e)=>{for(const n of t.toolStates.values())if(n.messageId===e)return n.status==="running";return!1},a_t=tn((t,e)=>({toolStates:new Map,toolStatusUpdates:new Map,toolApprovalRequests:new Map,setToolState:(n,s,o,r)=>{const a=Jb(n,s),l=e().toolStates.get(a);t(c=>{var m;const u=new Map(c.toolStates);u.set(a,{status:r,toolName:o,messageId:s,startTime:(m=l==null?void 0:l.startTime)!=null?m:Date.now()});const d=new Map(c.toolStatusUpdates),f=new Map(c.toolApprovalRequests);return r!=="running"&&(d.delete(s),f.delete(s)),{toolStates:u,toolStatusUpdates:d,toolApprovalRequests:f}})},appendToolStatusUpdate:(n,s)=>{t(o=>Tj(o,n)?{toolStatusUpdates:Ej(o.toolStatusUpdates,n,s)}:{})},appendToolApprovalRequest:(n,s)=>{t(o=>Tj(o,n)?{toolApprovalRequests:Ej(o.toolApprovalRequests,n,s)}:{})},getToolStatusUpdates:n=>e().toolStatusUpdates.get(n),getToolApprovalRequests:n=>e().toolApprovalRequests.get(n),getToolState:(n,s)=>{const o=Jb(n,s);return e().toolStates.get(o)},removeToolState:(n,s)=>{const o=Jb(n,s);t(r=>{const a=new Map(r.toolStates),l=new Map(r.toolStatusUpdates),c=new Map(r.toolApprovalRequests);return a.delete(o),l.delete(s),c.delete(s),{toolStates:a,toolStatusUpdates:l,toolApprovalRequests:c}})},getRunningToolsForThread:n=>{const s=e().toolStates,o=[];for(const[r,a]of s.entries())r.startsWith("".concat(n,":"))&&a.status==="running"&&o.push(a);return o}}));function i_t(){const t=cp();v.useEffect(()=>{as()&&t&&ine.set(!1)},[t])}const KXe=Bn(()=>st(null));Bn(t=>yt(()=>KXe(t)!=null));const l_t=we({pageTitle:{id:"Login.pageTitle",defaultMessage:"Get started"},ariaLabel:{id:"Login.ariaLabel",defaultMessage:"ChatGPT by OpenAI"},welcome:{id:"Login.welcome",defaultMessage:"Welcome to ChatGPT"},logIn:{id:"Login.logIn",defaultMessage:"Log in"},signUp:{id:"Login.signUp",defaultMessage:"Sign up"},continueWithGoogle:{id:"Login.continueWithGoogle",defaultMessage:"Continue with Google"},continueWithMicrosoft:{id:"Login.continueWithMicrosoft",defaultMessage:"Continue with Microsoft"},usesDevAuth:{id:"Login.useDevAuth",defaultMessage:"Use dev auth"},orTryAnotherWay:{id:"Login.orTryAnotherWay",defaultMessage:"Or try another way"},logInWithOpenAI:{id:"Login.logInWithOpenAI",defaultMessage:"Log in with your OpenAI account to continue"},invitedToastMessage:{id:"Login.invitedToastMessage",defaultMessage:"You have been added to the {workspace_name} workspace! Login or sign up with {email} to join the workspace."}});function c_t(t){"use forget";const e=D.c(18),{className:n,top:s,height:o,bg:r}=t,a=s===void 0?0:s,l=o===void 0?1:o,c=r===void 0?"bg-token-border-light":r,u=typeof a=="number"?"".concat(a,"px"):a,d=typeof l=="number"?"".concat(l,"px"):l;let f;e[0]!==n?(f=q("pointer-events-none sticky z-40 shrink-0",n),e[0]=n,e[1]=f):f=e[1];const m="calc(".concat(u," - ").concat(d," * 3)"),p="calc(".concat(d," * -4)"),g="calc(".concat(d," * 4)");let h;e[2]!==m||e[3]!==p||e[4]!==g?(h={top:m,marginBottom:p,height:g,maskImage:"linear-gradient(to bottom, transparent 25%, white 75%)"},e[2]=m,e[3]=p,e[4]=g,e[5]=h):h=e[5];let _;e[6]!==c?(_=q("sticky",c),e[6]=c,e[7]=_):_=e[7];let x;e[8]!==l||e[9]!==a?(x={top:a,height:l},e[8]=l,e[9]=a,e[10]=x):x=e[10];let b;e[11]!==x||e[12]!==_?(b=i.jsx("div",{className:_,style:x}),e[11]=x,e[12]=_,e[13]=b):b=e[13];let y;return e[14]!==b||e[15]!==f||e[16]!==h?(y=i.jsx("div",{className:f,style:h,children:b}),e[14]=b,e[15]=f,e[16]=h,e[17]=y):y=e[17],y}function u_t(t){"use forget";const e=D.c(18),{className:n,bottom:s,height:o,bg:r}=t,a=s===void 0?0:s,l=o===void 0?1:o,c=r===void 0?"bg-token-border-light":r,u=typeof a=="number"?"".concat(a,"px"):a,d=typeof l=="number"?"".concat(l,"px"):l;let f;e[0]!==n?(f=q("align-end pointer-events-none sticky z-40 flex shrink-0 flex-col justify-end",n),e[0]=n,e[1]=f):f=e[1];const m="calc(".concat(u," - ").concat(d," * 3)"),p="calc(".concat(d," * -4)"),g="calc(".concat(d," * 4)");let h;e[2]!==m||e[3]!==p||e[4]!==g?(h={bottom:m,marginTop:p,height:g,maskImage:"linear-gradient(to top, transparent 25%, white 75%)"},e[2]=m,e[3]=p,e[4]=g,e[5]=h):h=e[5];let _;e[6]!==c?(_=q("sticky w-full",c),e[6]=c,e[7]=_):_=e[7];let x;e[8]!==a||e[9]!==l?(x={bottom:a,height:l},e[8]=a,e[9]=l,e[10]=x):x=e[10];let b;e[11]!==x||e[12]!==_?(b=i.jsx("div",{className:_,style:x}),e[11]=x,e[12]=_,e[13]=b):b=e[13];let y;return e[14]!==b||e[15]!==f||e[16]!==h?(y=i.jsx("div",{className:f,style:h,children:b}),e[14]=b,e[15]=f,e[16]=h,e[17]=y):y=e[17],y}const d_t=t=>{"use forget";var x;const e=D.c(22);let n,s,o,r,a;e[0]!==t?(x=t,{className:s,children:n,isScrolledFromTopEdge$:r,isScrolledFromBottomEdge$:o}=x,a=De(x,["className","children","isScrolledFromTopEdge$","isScrolledFromBottomEdge$"]),e[0]=t,e[1]=n,e[2]=s,e[3]=o,e[4]=r,e[5]=a):(n=e[1],s=e[2],o=e[3],r=e[4],a=e[5]);let l;e[6]!==r?(l=()=>{var b;return(b=r==null?void 0:r())!=null?b:!1},e[6]=r,e[7]=l):l=e[7];const c=X(l);let u;e[8]!==o?(u=()=>{var b;return(b=o==null?void 0:o())!=null?b:!1},e[8]=o,e[9]=u):u=e[9];const d=X(u),f=v.useDeferredValue(c),m=v.useDeferredValue(d);let p;e[10]!==s?(p=q("group/scrollport",s),e[10]=s,e[11]=p):p=e[11];let g;e[12]!==f?(g=Dm(f),e[12]=f,e[13]=g):g=e[13];let h;e[14]!==m?(h=Dm(m),e[14]=m,e[15]=h):h=e[15];let _;return e[16]!==n||e[17]!==a||e[18]!==p||e[19]!==g||e[20]!==h?(_=i.jsx("nav",G(N({className:p},a),{"data-scrolled-from-top":g,"data-scrolled-from-end":h,children:n})),e[16]=n,e[17]=a,e[18]=p,e[19]=g,e[20]=h,e[21]=_):_=e[21],_},YXe=je(()=>Me(()=>Promise.resolve().then(()=>$F),void 0).then(t=>t.AdminInviteModal));function f_t(){"use forget";const t=D.c(10),e=Tn();let n;t[0]!==e?(n=()=>{e&&(V.logEvent("Account: Invite Member Button Clicked",{eventSource:"mouse",location:"sidebar, below user menu"}),ga("chatgpt_invite_users_to_workspace",0,{action:"OpenAdminInviteModal",location:"sidebar, below user menu",text:"AddTeammates",step:"OpenModal"}),rt(YXe,{workspace:e}))},t[0]=e,t[1]=n):n=t[1];const s=n;let o;t[2]!==s?(o=u=>{(u.key==="Enter"||u.key===" ")&&s()},t[2]=s,t[3]=o):o=t[3];let r,a,l;t[4]===Symbol.for("react.memo_cache_sentinel")?(r=q("border-token-interactive-border-secondary-default flex w-full items-center justify-center gap-1","bg-token-main-surface-primary rounded-full border px-3 py-2","text-xs font-medium","hover:bg-token-interactive-bg-secondary-hover","focus-visible:ring-2 focus-visible:ring-[#5856D6] focus-visible:ring-offset-1 focus-visible:ring-offset-transparent focus-visible:outline-hidden","motion-safe:transition-colors motion-safe:duration-150 motion-safe:ease-out"),a=i.jsx(qD,{className:"icon-sm","aria-hidden":"true"}),l=i.jsx("span",{children:i.jsx(P,{id:"inviteMemberButton.inviteMemberSidebarFooterCap",defaultMessage:"Invite team members"})}),t[4]=r,t[5]=a,t[6]=l):(r=t[4],a=t[5],l=t[6]);let c;return t[7]!==s||t[8]!==o?(c=i.jsx("div",{className:"px-3.5 pt-1 pb-3",children:i.jsxs("button",{type:"button",onClick:s,onKeyDown:o,className:r,children:[a,l]})}),t[7]=s,t[8]=o,t[9]=c):c=t[9],c}const ZXe=()=>ut({queryKey:["userSurvey"],queryFn:()=>ue.safeGet("/user_surveys/active")}),QXe=()=>{const t=Nt();return zt({mutationFn:({surveyId:e,reason:n})=>ue.safePost("/user_surveys/{survey_id}/complete",{parameters:{path:{survey_id:e}},requestBody:{reason:n}}),onSuccess:()=>{t.invalidateQueries({queryKey:["userSurvey"]})}})};function m_t(){const t=te(),[e,n]=v.useState(!1),{mutate:s}=QXe(),{data:o}=ZXe(),r=o==null?void 0:o.survey,a=c=>{n(!0),r!=null&&s({surveyId:r.id,reason:c})};return!e&&r!=null?i.jsx("div",{className:"bg-brand-blue-800 mx-1.5 rounded-lg",children:i.jsxs("div",{className:"flex flex-col gap-3 p-3 text-sm text-white",children:[i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsx("div",{className:"font-bold text-wrap",children:i.jsx(P,{id:"navigation.survey.title",defaultMessage:"We are asking a small group of people for their opinion"})}),i.jsx("button",{className:"text-white/25 hover:text-white/40",onClick:()=>a("dismissed"),"aria-label":t.formatMessage({id:"navigation.survey.dismiss",defaultMessage:"Dismiss survey"}),children:i.jsx(ms,{className:"icon"})})]}),i.jsx("div",{className:"text-wrap",children:i.jsx(P,{id:"navigation.survey.description",defaultMessage:"Could you spare few minutes to take a short survey?"})}),i.jsxs("a",{href:r.link,target:"_blank",className:"flex w-full cursor-pointer items-center justify-center gap-2 rounded-sm bg-white/25 p-2 hover:bg-white/40",rel:"noreferrer",onClick:()=>a("link_clicked"),children:[i.jsx(ka,{className:"icon-sm"}),i.jsx(P,{id:"navigation.survey.takeSurvey",defaultMessage:"Take survey"})]})]})}):null}const JXe=({onDismiss:t})=>{const e=te();v.useEffect(()=>{ft.logEvent("chatgpt_web_mobile_app_upsell_banner_shown"),V.logEvent("Mobile App Upsell Banner Shown")},[]);const n=()=>{localStorage.setItem(Ie.HasDismissedMobileAppUpsellBanner,"true"),t==null||t(),ft.logEvent("chatgpt_web_mobile_app_upsell_banner_dismissed"),V.logEvent("Mobile App Upsell Banner Dismissed")},s=()=>{window.open("https://apps.apple.com/us/app/chatgpt/id6448311069","_blank"),ft.logEvent("chatgpt_web_mobile_app_upsell_banner_clicked"),V.logEvent("Mobile App Upsell Banner Clicked")};return i.jsx(uH,{title:e.formatMessage({id:"mobileTopBanner.title",defaultMessage:"ChatGPT"}),content:e.formatMessage({id:"mobileTopBanner.content",defaultMessage:"The official app by OpenAI"}),secondaryCtaText:e.formatMessage({id:"mobileTopBanner.secondaryCtaText",defaultMessage:"Open"}),onDismiss:n,onSecondaryCtaClick:s})};function XXe(t){const e=encodeURIComponent(t);return"https://wa.me/18002428478?text=".concat(e)}function eet({onDismiss:t}){const e=te(),n=e.formatMessage({id:"moodengUpsellBanner.prefilledMessage",defaultMessage:"Hey ChatGPT, can you tell me a little bit more about what you can do?"}),s=()=>{V.logEventWithStatsig("Moodeng Upsell Banner Clicked","chatgpt_web_moodeng_upsell_banner_clicked"),window.open(XXe(n),"_blank")},o=()=>{localStorage.setItem(Ie.HasDismissedMoodengUpsellBanner,"true"),t==null||t(),V.logEventWithStatsig("Moodeng Upsell Banner Dismissed","chatgpt_web_moodeng_upsell_banner_dismissed")};return v.useEffect(()=>{V.logEventWithStatsig("Moodeng Upsell Banner Shown","chatgpt_web_moodeng_upsell_banner_shown")},[]),i.jsx(uH,{title:e.formatMessage({id:"moodengUpsellBanner.title",defaultMessage:"Chat on WhatsApp"}),content:e.formatMessage({id:"moodengUpsellBanner.content",defaultMessage:"Supported by OpenAI"}),secondaryCtaText:e.formatMessage({id:"moodengUpsellBanner.secondaryCtaText",defaultMessage:"Try Now"}),onSecondaryCtaClick:s,onDismiss:o})}function p_t(){var _;const t=jn(),e=Ko(),n=lne(),[s,o]=v.useState(!1),[r,a]=v.useState(()=>localStorage.getItem(Ie.HasDismissedMobileAppUpsellBanner)==="true"),[l,c]=v.useState(()=>localStorage.getItem(Ie.HasDismissedMoodengUpsellBanner)==="true"),u=Je("3927927759"),d=t.pathname.split("/").filter(Boolean),f=d.length===3&&d[0]==="checkout";v.useEffect(()=>{if(!(typeof window>"u"))try{const x=sessionStorage.getItem(hPe);o(!!x)}catch(x){o(!1)}},[t.search]);const m=v.useMemo(()=>(()=>{if(!t.search)return!1;try{return!!new URLSearchParams(t.search).get(YG)}catch(b){return!1}})()||s?!0:f?Je("3950229590").get("suppress_native_download_banner",!1):!1,[s,f,t.search]),g=v.useMemo(()=>[{Component:()=>i.jsx(JXe,{onDismiss:()=>{a(!0)}}),isVisible:()=>e&&n&&!r&&!m&&u.get("enable_mobile_app_upsell_banner",!1)},{Component:()=>i.jsx(eet,{onDismiss:()=>{c(!0)}}),isVisible:()=>e&&!m&&!l&&u.get("enable_moodeng_upsell_banner",!1)}],[e,n,r,l,m,u]).find(x=>x.isVisible()),h=(_=g==null?void 0:g.Component)!=null?_:(()=>null);return i.jsx(h,{})}function g_t(t){"use forget";const e=D.c(2),n=VL(t);if(xe("1377659296"))return null;if(n&&t){let s;return e[0]!==t?(s=i.jsx(GL,{threadId:t}),e[0]=t,e[1]=s):s=e[1],s}return null}function h_t(t){"use forget";const e=D.c(8),{clientThreadId:n,messageId:s}=t;let o,r;e[0]!==n||e[1]!==s?(o=()=>{As.closeSharingModal(),pt(n,u=>{if(s!=null){u.pendingDeepLinkMessageId=s==="finalAgentTurn"||s==="finalUserTurn"?void 0:s,u.scrollToMessageId=s,u.scrollToMessageIsAssistant=!0;const d=ve.resolveLeafIdForMessageTarget(u.tree,s);d!=null&&(u.currentLeafId=d)}else u.pendingDeepLinkMessageId=void 0,u.scrollToMessageId="finalAgentTurn",u.scrollToMessageIsAssistant=void 0;cne("messageId")})},r=[n,s],e[0]=n,e[1]=s,e[2]=o,e[3]=r):(o=e[2],r=e[3]),v.useEffect(o,r);const a=Nt();let l,c;e[4]!==a||e[5]!==n?(l=()=>(fc.retainThread(n),()=>{setTimeout(()=>{a.invalidateQueries(O_({clientThreadId:n}))},0),fc.releaseThread(n)}),c=[n,a],e[4]=a,e[5]=n,e[6]=l,e[7]=c):(l=e[6],c=e[7]),v.useEffect(l,c)}function __t(t,e,n,s){"use forget";var x,b;const o=D.c(12),r=e===void 0?!0:e,a=jn(),l=a_(),c=n!=null?n:l;let u;o[0]!==c?(u=c?une(c):void 0,o[0]=c,o[1]=u):u=o[1];const d=u;let f;o[2]!==d?(f=d?{kind:Bt.GizmoInteraction,gizmo_id:d}:{kind:Bt.PrimaryAssistant},o[2]=d,o[3]=f):f=o[3];const m=f,p=!!((b=(x=a.state)==null?void 0:x.newConversationConfig)!=null&&b.startDoNotRemember);let g;o[4]!==t||o[5]!==a.pathname||o[6]!==p||o[7]!==s?(g=xe("1829305865")&&a.pathname==="/"&&hi(t)&&!!(s!=null?s:p),o[4]=t,o[5]=a.pathname,o[6]=p,o[7]=s,o[8]=g):g=o[8];const h=g;let _;o[9]!==r||o[10]!==h?(_={shouldScrollToBottom:r,isDoNotRemember:h},o[9]=r,o[10]=h,o[11]=_):_=o[11],J$(t,m,_)}function x_t(t){"use forget";var b;const e=D.c(22),{clientThreadId:n}=t,s=jn(),o=bt(),[r,a]=Ze(n,tet),l=Un(n);let c;e[0]!==a?(c=a!=null&&Bs(a),e[0]=a,e[1]=c):c=e[1];const u=c,{data:d}=QR(u?a:void 0),f=d==null?void 0:d.gizmo,m=(b=Et())==null?void 0:b.normalizedAccountUserId;let p;e[2]!==s.pathname?(p=s.pathname.includes("/shared/"),e[2]=s.pathname,e[3]=p):p=e[3];const g=p;let h;e[4]!==g||e[5]!==u||e[6]!==s.pathname||e[7]!==s.search||e[8]!==o||e[9]!==f||e[10]!==l||e[11]!==r?(h=()=>{if(!u||g||!l||!f||(r==null?void 0:r.id)==null||m==null||r.id===m)return;const y=ia(l,{project:f,ownerUserId:r.id,accountUserId:m}),S="".concat(s.pathname).concat(s.search);y!==S&&o(y,{replace:!0})},e[4]=g,e[5]=u,e[6]=s.pathname,e[7]=s.search,e[8]=o,e[9]=f,e[10]=l,e[11]=r,e[12]=h):h=e[12];const _=r==null?void 0:r.id;let x;return e[13]!==g||e[14]!==u||e[15]!==s.pathname||e[16]!==s.search||e[17]!==o||e[18]!==f||e[19]!==l||e[20]!==_?(x=[m,g,u,s.pathname,s.search,o,f,l,_],e[13]=g,e[14]=u,e[15]=s.pathname,e[16]=s.search,e[17]=o,e[18]=f,e[19]=l,e[20]=_,e[21]=x):x=e[21],v.useEffect(h,x),null}function tet(t){return[t==null?void 0:t.sharedProjectConversationOwner,ve.getGizmoId(t)]}function y_t(){"use forget";const t=D.c(3);let e;t[0]===Symbol.for("react.memo_cache_sentinel")?(e=mt(),t[0]=e):e=t[0];const n=e;let s,o;t[1]===Symbol.for("react.memo_cache_sentinel")?(s=()=>{if(!n)return;const r=Xs.getCookie(eo.AuthSessionLoggingId);if(r==null)return;const{flowType:a,connectionType:l}=net();V.logStructuredEvent(dne,{authSessionLoggingId:r,flowType:a,connectionType:l}),Xs.deleteCookie(eo.AuthSessionLoggingId)},o=[n],t[1]=s,t[2]=o):(s=t[1],o=t[2]),v.useEffect(s,o)}function net(){const{isSignup:t,connectionType:e}=fne();return{flowType:t?YM.ACCESS_FLOW_TYPE_SIGNUP:YM.ACCESS_FLOW_TYPE_LOGIN,connectionType:set(e)}}function set(t){switch(t){case iu.Google:return Ol.ACCESS_FLOW_CONNECTION_TYPE_GOOGLE;case iu.Password:return Ol.ACCESS_FLOW_CONNECTION_TYPE_PASSWORD;case iu.Apple:return Ol.ACCESS_FLOW_CONNECTION_TYPE_APPLE;case iu.Microsoft:return Ol.ACCESS_FLOW_CONNECTION_TYPE_MICROSOFT;case iu.Samlp:return Ol.ACCESS_FLOW_CONNECTION_TYPE_SAMLP;case iu.Oidc:return Ol.ACCESS_FLOW_CONNECTION_TYPE_OIDC;default:return Ol.ACCESS_FLOW_CONNECTION_TYPE_UNSPECIFIED}}const oet=["recent","images","bootstrap"],ret=10,aet=25,iet=20,cet=(t,e)=>({queryKey:["recent","images",t,e],initialPageParam:null,staleTime:120*1e3,queryFn:({pageParam:n})=>{const s=xe("1057463568"),o=s?"/my/recent/v2/image_gen":"/my/recent/image_gen",r=n==null?t?ret:aet:iet,a=N({limit:r,after:n},s?{retrieve_archived:e||void 0}:{include_archived:e||void 0});return ue.safeGet(o,{parameters:{query:a}})},getNextPageParam:({cursor:n})=>n}),eK=()=>({queryKey:oet,refetchOnMount:"always",enabled:()=>mt(),queryFn:()=>ue.safeGet("/images/bootstrap",{})}),b_t=t=>t.fetchQuery(eK()),v_t=()=>{"use forget";const t=D.c(1);let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=eK(),t[0]=e):e=t[0],ut(e)};function Mj({queryClient:t,includeArchived:e,isMobile:n,imageId:s,operation:o}){t.setQueryData(["recent","images",n,e],r=>r&&G(N({},r),{pages:r.pages.map(a=>{let l=a.items.map(c=>c.id===s?G(N({},c),{is_archived:o==="archive"}):c);return o==="archive"&&!e&&(l=l.filter(c=>c.id!==s)),G(N({},a),{items:l})})}))}const S_t=()=>{"use forget";const t=D.c(5),e=!Bd();let n;t[0]===Symbol.for("react.memo_cache_sentinel")?(n=Zn(),t[0]=n):n=t[0];const s=n;let o;t[1]!==e?(o={mutationFn:uet,onMutate:async l=>{const{imageId:c,operation:u}=l;await Promise.all([s.cancelQueries({queryKey:["recent","images",e,!1]}),s.cancelQueries({queryKey:["recent","images",e,!0]})]);const d=s.getQueryData(["recent","images",e,!1]),f=s.getQueryData(["recent","images",e,!0]);return Mj({queryClient:s,includeArchived:!1,isMobile:e,imageId:c,operation:u}),Mj({queryClient:s,includeArchived:!0,isMobile:e,imageId:c,operation:u}),{recentImagesUnarchived:d,recentImagesArchived:f}},onError:(l,c,u)=>{const{recentImagesUnarchived:d,recentImagesArchived:f}=u!=null?u:{};s.setQueryData(["recent","images",e,!1],d),s.setQueryData(["recent","images",e,!0],f)},onSuccess:(l,c)=>{const{operation:u}=c;u==="unarchive"&&s.invalidateQueries({queryKey:["recent","images",e,!1]})}},t[1]=e,t[2]=o):o=t[2];const r=zt(o);let a;return t[3]!==r?(a={archiveMutation:r},t[3]=r,t[4]=a):a=t[4],a},C_t=(t,e)=>{"use forget";var b;const n=D.c(13),s=t===void 0?!1:t,o=e===void 0?"all":e,r=!Bd(),a=s||o!=="unarchived";let l;n[0]!==r||n[1]!==a?(l=cet(r,a),n[0]=r,n[1]=a,n[2]=l):l=n[2];const c=l,{data:u,refetch:d,fetchNextPage:f,hasNextPage:m,isLoading:p,isFetchingNextPage:g}=jc(c);let h;if(n[3]!==(u==null?void 0:u.pages)||n[4]!==o){e:{const y=(b=u==null?void 0:u.pages.flatMap(det).map(fet))!=null?b:[];if(o==="archived"){h=y.filter(met);break e}if(o==="unarchived"){h=y.filter(pet);break e}h=y}n[3]=u==null?void 0:u.pages,n[4]=o,n[5]=h}else h=n[5];const _=h;let x;return n[6]!==f||n[7]!==m||n[8]!==_||n[9]!==g||n[10]!==p||n[11]!==d?(x={refetch:d,images:_,isLoading:p,isFetchingNextPage:g,hasNextPage:m,fetchNextPage:f},n[6]=f,n[7]=m,n[8]=_,n[9]=g,n[10]=p,n[11]=d,n[12]=x):x=n[12],x};function uet(t){const{imageId:e,operation:n}=t;return ue.safePatch("/my/image/{gen_id}/".concat(n),{parameters:{path:{gen_id:e}}})}function det(t){return t.items}function fet(t){var e,n,s,o,r,a,l,c;return G(N({},t),{archived:(e=t.is_archived)!=null?e:!1,id:t.id,messageId:(n=t.message_id)!=null?n:null,transformationId:(s=t.transformation_id)!=null?s:null,assetPointer:(o=t.asset_pointer)!=null?o:null,createdAt:t.created_at?new Date(t.created_at*1e3):void 0,conversationId:(r=t.conversation_id)!=null?r:void 0,thumbnail:(c=(l=(a=t.encodings)==null?void 0:a.thumbnail)==null?void 0:l.path)!=null?c:null})}function met(t){return t.archived}function pet(t){return!t.archived}function w_t(t,e,n){"use no forget";return v.useMemo(()=>t?Pt(t,{urlGizmoId:e}):mne(N({urlGizmoId:e},n)),[t,e,n])}function k_t(t,e,n){var r;if(((r=t.getQueryState(e))==null?void 0:r.status)==="success")return n(),()=>{};const s=pne(e),o=t.getQueryCache().subscribe(a=>{a.query.queryHash===s&&a.query.state.status==="success"&&(n(),o())});return o}export{Kc as $,We as A,kg as A$,Yht as A0,Ght as A1,Vht as A2,v0t as A3,Oht as A4,jnt as A5,Tht as A6,Dht as A7,Cht as A8,KL as A9,wgt as AA,Egt as AB,Wgt as AC,Hgt as AD,kgt as AE,Cgt as AF,Zgt as AG,zgt as AH,Kgt as AI,$9e as AJ,s$e as AK,Ugt as AL,omt as AM,Kpe as AN,sht as AO,zpt as AP,Ggt as AQ,rht as AR,ele as AS,Vgt as AT,$gt as AU,N0t as AV,A0t as AW,rw as AX,aw as AY,xO as AZ,g1t as A_,Rht as Aa,Hdt as Ab,gft as Ac,wht as Ad,hft as Ae,Iht as Af,Pht as Ag,jht as Ah,kht as Ai,Lht as Aj,jgt as Ak,hht as Al,zKe as Am,y$e as An,cht as Ao,b$e as Ap,xW as Aq,fht as Ar,pht as As,Lgt as At,dht as Au,uht as Av,Jye as Aw,ght as Ax,pGe as Ay,Jgt as Az,Wc as B,iit as B$,p1t as B0,h1t as B1,u1t as B2,us as B3,vG as B4,zht as B5,x1t as B6,Gl as B7,cIe as B8,y1t as B9,yle as BA,mnt as BB,Wrt as BC,Ay as BD,Cle as BE,j_ as BF,jOe as BG,VOe as BH,Qft as BI,TV as BJ,tz as BK,EOe as BL,Ule as BM,Xft as BN,jh as BO,Hpt as BP,OFe as BQ,P5 as BR,Vit as BS,ro as BT,llt as BU,Yi as BV,qo as BW,ult as BX,Po as BY,Xwe as BZ,vSe as B_,m1t as Ba,f1t as Bb,yze as Bc,_1t as Bd,d1t as Be,v1t as Bf,egt as Bg,q$ as Bh,Lje as Bi,rrt as Bj,Lye as Bk,oS as Bl,gnt as Bm,pNe as Bn,Krt as Bo,xnt as Bp,hnt as Bq,_nt as Br,vnt as Bs,$p as Bt,Gst as Bu,bnt as Bv,ynt as Bw,gPe as Bx,pPe as By,mPe as Bz,lc as C,Wdt as C$,Qa as C0,uit as C1,dit as C2,zat as C3,lit as C4,cit as C5,iS as C6,Mc as C7,ilt as C8,bge as C9,$nt as CA,znt as CB,Unt as CC,Fnt as CD,kve as CE,rx as CF,wEe as CG,Qu as CH,Fqe as CI,ez as CJ,yft as CK,bft as CL,vft as CM,xOe as CN,iFe as CO,HAe as CP,I8 as CQ,J5 as CR,Hst as CS,$S as CT,ddt as CU,hPe as CV,Jp as CW,I9e as CX,N9e as CY,A9e as CZ,qdt as C_,pEe as Ca,fit as Cb,wot as Cc,Cct as Cd,mit as Ce,Cot as Cf,Wat as Cg,UU as Ch,PU as Ci,oge as Cj,Sot as Ck,Cet as Cl,Ane as Cm,wet as Cn,Ek as Co,Mne as Cp,ket as Cq,Nne as Cr,bet as Cs,Ene as Ct,vet as Cu,Tne as Cv,Gnt as Cw,Ole as Cx,af as Cy,Hnt as Cz,Ml as D,jV as D$,Zdt as D0,wI as D1,Crt as D2,cdt as D3,s0t as D4,REe as D5,jge as D6,$it as D7,y5 as D8,uct as D9,Qat as DA,Zat as DB,Lmt as DC,Ret as DD,Att as DE,AG as DF,joe as DG,tlt as DH,olt as DI,rlt as DJ,alt as DK,Kit as DL,Yit as DM,Zit as DN,Qit as DO,Jit as DP,Xit as DQ,elt as DR,Ldt as DS,Eb as DT,h2 as DU,rnt as DV,int as DW,Sz as DX,not as DY,dut as DZ,Ic as D_,DF as Da,AW as Db,L$ as Dc,TS as Dd,D$ as De,cct as Df,GCe as Dg,Sye as Dh,sA as Di,pCe as Dj,mE as Dk,Ope as Dl,_it as Dm,xCe as Dn,Qst as Do,Cit as Dp,wit as Dq,Tse as Dr,Nse as Ds,i4 as Dt,Ase as Du,Mse as Dv,wse as Dw,kse as Dx,Ese as Dy,Pet as Dz,Al as E,eot as E$,yAe as E0,ptt as E1,mtt as E2,gk as E3,eye as E4,uat as E5,Rtt as E6,Ott as E7,vO as E8,Mre as E9,fL as EA,Xut as EB,rD as EC,wst as ED,Mst as EE,Est as EF,go as EG,fD as EH,cD as EI,Fv as EJ,Tst as EK,ym as EL,Gfe as EM,kst as EN,Dfe as EO,$4 as EP,H4 as EQ,pfe as ER,EV as ES,_be as ET,xbe as EU,Wct as EV,qct as EW,Kct as EX,zct as EY,Sct as EZ,tot as E_,Dgt as Ea,Bgt as Eb,dW as Ec,uW as Ed,Kdt as Ee,Vrt as Ef,dw as Eg,_tt as Eh,koe as Ei,htt as Ej,xtt as Ek,ytt as El,e1t as Em,WD as En,s1t as Eo,aze as Ep,Yf as Eq,FW as Er,Aw as Es,o1t as Et,n1t as Eu,r1t as Ev,t1t as Ew,edt as Ex,lze as Ey,oqe as Ez,lat as F,Qht as F$,gS as F0,MJe as F1,Hht as F2,pH as F3,vx as F4,GTe as F5,sit as F6,nit as F7,ant as F8,i3e as F9,jH as FA,L0e as FB,M6 as FC,RVe as FD,kEe as FE,IGe as FF,wd as FG,h_e as FH,O0e as FI,XKe as FJ,T6 as FK,iQe as FL,zZe as FM,Fxe as FN,sqe as FO,CVe as FP,Ch as FQ,uft as FR,k_t as FS,j2 as FT,$tt as FU,$F as FV,Vlt as FW,Cut as FX,hpt as FY,q$e as FZ,Eht as F_,nlt as Fa,slt as Fb,Xst as Fc,h8 as Fd,D0e as Fe,EA as Ff,CEe as Fg,yxe as Fh,kce as Fi,wce as Fj,Cce as Fk,Sce as Fl,vce as Fm,bce as Fn,yce as Fo,xce as Fp,LWe as Fq,H7e as Fr,rqe as Fs,tbe as Ft,d6e as Fu,rYe as Fv,_j as Fw,Rk as Fx,uFe as Fy,LS as Fz,Zp as G,O1t as G0,i0t as G1,Xot as H,Oet as I,Zge as J,J_ as K,ek as L,crt as M,Bp as N,kl as O,xt as P,uL as Q,UF as R,Yp as S,qit as T,tk as U,Eet as V,art as W,Fot as X,Gp as Y,Rot as Z,W_ as _,J$ as a,qnt as a$,bot as a0,sk as a1,ert as a2,trt as a3,nrt as a4,ND as a5,yA as a6,ff as a7,Qy as a8,oA as a9,mve as aA,Wnt as aB,Dnt as aC,ont as aD,Ynt as aE,Ast as aF,Knt as aG,Kle as aH,Yce as aI,ast as aJ,Lnt as aK,lst as aL,Nst as aM,yde as aN,Jnt as aO,Vnt as aP,nst as aQ,xL as aR,ist as aS,Bnt as aT,sst as aU,zce as aV,Yle as aW,Wo as aX,yd as aY,Qnt as aZ,Ont as a_,tr as aa,S0e as ab,Lot as ac,J1e as ad,Oot as ae,q_ as af,Q_ as ag,YD as ah,P1e as ai,wc as aj,Bot as ak,Dot as al,nk as am,Qge as an,yi as ao,urt as ap,Ea as aq,Pot as ar,UD as as,l0 as at,to as au,Bat as av,Iit as aw,Fat as ax,hSe as ay,HN as az,DD as b,Zw as b$,oce as b0,Xce as b1,eue as b2,A4 as b3,Znt as b4,Xnt as b5,jle as b6,zxe as b7,iat as b8,$_ as b9,jct as bA,Pct as bB,Rct as bC,Tct as bD,Act as bE,Bct as bF,Uct as bG,Lct as bH,Dct as bI,Hct as bJ,Gct as bK,Vct as bL,y_t as bM,x_t as bN,_5e as bO,b_t as bP,pi as bQ,Ku as bR,G0t as bS,Mx as bT,Fgt as bU,Pr as bV,Ok as bW,Cl as bX,Kw as bY,Hde as bZ,nD as b_,Zxe as ba,x_e as bb,Wxe as bc,dS as bd,sn as be,pf as bf,s0 as bg,oi as bh,_xe as bi,q4 as bj,ll as bk,EE as bl,nEe as bm,sEe as bn,oEe as bo,kE as bp,kk as bq,RU as br,Iot as bs,sCe as bt,Yc as bu,V1 as bv,VD as bw,w_t as bx,FF as by,Nct as bz,kot as c,KG as c$,Xct as c0,Au as c1,xw as c2,sD as c3,eht as c4,bl as c5,nx as c6,Zme as c7,zrt as c8,n7e as c9,hn as cA,rRe as cB,I0t as cC,Yet as cD,eV as cE,jk as cF,Uet as cG,Fet as cH,F_e as cI,udt as cJ,CUe as cK,da as cL,xs as cM,XI as cN,Ir as cO,Itt as cP,JO as cQ,Sie as cR,xl as cS,fgt as cT,dgt as cU,mgt as cV,PJe as cW,Ltt as cX,yl as cY,Vp as cZ,ik as c_,OH as ca,fNe as cb,brt as cc,eze as cd,dg as ce,Ict as cf,Mct as cg,Fct as ch,Oct as ci,$ct as cj,nr as ck,ng as cl,L6e as cm,vrt as cn,D4e as co,Klt as cp,Zlt as cq,$o as cr,B_e as cs,wrt as ct,Qlt as cu,Ylt as cv,Ye as cw,Gn as cx,od as cy,Wut as cz,oat as d,IV as d$,qG as d0,w_ as d1,Vot as d2,ka as d3,_L as d4,rse as d5,P0t as d6,Cr as d7,jit as d8,rH as d9,snt as dA,Vst as dB,zst as dC,n8 as dD,knt as dE,Wst as dF,Lme as dG,Rne as dH,Ine as dI,Pne as dJ,NNe as dK,Cne as dL,Ove as dM,BXe as dN,s0e as dO,vf as dP,vi as dQ,Ipt as dR,Rr as dS,E6e as dT,Wa as dU,nW as dV,ize as dW,Qpe as dX,fot as dY,MD as dZ,ege as d_,wl as da,O$e as db,lw as dc,Ax as dd,n0t as de,Gwe as df,wk as dg,gU as dh,Qet as di,Zet as dj,Jet as dk,vc as dl,Wne as dm,zne as dn,qne as dp,Iet as dq,jet as dr,nC as ds,Xet as dt,Q8 as du,but as dv,WL as dw,X3 as dx,MH as dy,Uft as dz,PNe as e,Mit as e$,dx as e0,_Ze as e1,pTe as e2,q3 as e3,kc as e4,Ws as e5,JF as e6,ys as e7,zn as e8,xg as e9,nct as eA,Uut as eB,ix as eC,Flt as eD,Llt as eE,Ult as eF,tct as eG,Jlt as eH,gT as eI,oz as eJ,OS as eK,aut as eL,Rat as eM,KXe as eN,hZe as eO,hS as eP,Uxe as eQ,hF as eR,oo as eS,Uq as eT,ace as eU,D0t as eV,hE as eW,ME as eX,LH as eY,OEe as eZ,vN as e_,HJe as ea,SF as eb,bE as ec,mi as ed,LA as ee,EEe as ef,B1t as eg,gn as eh,xE as ei,_f as ej,jr as ek,_D as el,Sme as em,LCe as en,Ns as eo,_ze as ep,_k as eq,Z_ as er,bSe as es,fs as et,mct as eu,fct as ev,dct as ew,tAe as ex,JW as ey,OI as ez,est as f,itt as f$,GEe as f0,a0t as f1,zUe as f2,Mgt as f3,Ngt as f4,UW as f5,rS as f6,bit as f7,eq as f8,Xmt as f9,kG as fA,mut as fB,kIe as fC,_ut as fD,IIe as fE,DRe as fF,z4e as fG,iT as fH,mBe as fI,kpt as fJ,SVe as fK,BW as fL,DW as fM,OVe as fN,w6 as fO,Jht as fP,xq as fQ,yo as fR,qwe as fS,srt as fT,Kut as fU,s_t as fV,WU as fW,pg as fX,JHe as fY,uye as fZ,Y8 as f_,ept as fa,Tgt as fb,cEe as fc,uEe as fd,hlt as fe,iH as ff,v9e as fg,WFe as fh,U7e as fi,Vc as fj,xF as fk,DE as fl,zmt as fm,Vmt as fn,Wmt as fo,Qm as fp,Exe as fq,y_e as fr,lBe as fs,YWe as ft,Get as fu,iE as fv,Yne as fw,Tft as fx,Ht as fy,fut as fz,O_ as g,Snt as g$,soe as g0,Xse as g1,z$ as g2,Ytt as g3,L1 as g4,_Pe as g5,E_ as g6,T_ as g7,_O as g8,ttt as g9,jw as gA,J1 as gB,o0t as gC,V4e as gD,zE as gE,yG as gF,WE as gG,VE as gH,kle as gI,att as gJ,wnt as gK,ltt as gL,Kst as gM,Zst as gN,Yst as gO,fse as gP,Ent as gQ,Hie as gR,Xie as gS,qst as gT,unt as gU,nnt as gV,Ztt as gW,Gtt as gX,ztt as gY,qtt as gZ,btt as g_,stt as ga,ett as gb,d8 as gc,Fp as gd,Ny as ge,M_ as gf,cH as gg,gq as gh,cq as gi,S_t as gj,C_t as gk,Kht as gl,nut as gm,Urt as gn,uxe as go,GS as gp,on as gq,NPe as gr,f2 as gs,Frt as gt,Brt as gu,ict as gv,WT as gw,zT as gx,Ddt as gy,H1 as gz,Ptt as h,cat as h$,ott as h0,ent as h1,rtt as h2,Xtt as h3,Jtt as h4,Qtt as h5,tnt as h6,dtt as h7,gtt as h8,dnt as h9,cxe as hA,oot as hB,_F as hC,_rt as hD,Zrt as hE,rot as hF,rk as hG,grt as hH,Srt as hI,aL as hJ,Ik as hK,xrt as hL,Yrt as hM,g_e as hN,Grt as hO,sot as hP,X_ as hQ,qD as hR,prt as hS,__e as hT,yrt as hU,hrt as hV,qrt as hW,pxe as hX,Jxe as hY,zc as hZ,HF as h_,Tnt as ha,ctt as hb,Wtt as hc,Vtt as hd,vtt as he,Ktt as hf,Cnt as hg,Wme as hh,Ice as hi,ede as hj,Ew as hk,jst as hl,Fst as hm,yD as hn,Dst as ho,Nme as hp,Za as hq,Pst as hr,um as hs,Ple as ht,vme as hu,Cde as hv,Ust as hw,Pnt as hx,Rnt as hy,krt as hz,sl as i,e_t as i$,J2e as i0,X2e as i1,g2e as i2,D2e as i3,aat as i4,rat as i5,ox as i6,b_e as i7,oE as i8,$at as i9,Olt as iA,lrt as iB,sF as iC,cDe as iD,c1t as iE,Oat as iF,B0t as iG,H0t as iH,U0t as iI,Sk as iJ,C_ as iK,u_t as iL,d_t as iM,Q2e as iN,m_t as iO,f_t as iP,l_t as iQ,Hp as iR,oht as iS,Q0t as iT,w0t as iU,X0t as iV,Wot as iW,Y0t as iX,t_t as iY,K0t as iZ,Z0t as i_,Gat as ia,Vat as ib,Wm as ic,Bv as id,QF as ie,Xye as ig,zk as ih,ts as ii,WF as ij,zp as ik,fat as il,Mlt as im,Ilt as io,jlt as ip,bi as iq,Nlt as ir,Alt as is,dF as it,Wit as iu,d0 as iv,YN as iw,DN as ix,Ait as iy,lct as iz,n_t as j,Drt as j$,uXe as j0,Not as j1,Sht as j2,J0t as j3,H1t as j4,cgt as j5,sut as j6,y5e as j7,b5e as j8,tut as j9,aft as jA,ift as jB,fw as jC,Zie as jD,xk as jE,zot as jF,Opt as jG,Dpt as jH,oC as jI,o8e as jJ,Rpt as jK,jtt as jL,Ppt as jM,hDe as jN,xi as jO,Lpt as jP,Got as jQ,Tpt as jR,EG as jS,Npt as jT,bO as jU,x1e as jV,TL as jW,nft as jX,MPe as jY,Rrt as jZ,Ort as j_,ugt as ja,oW as jb,Fa as jc,g5e as jd,Jct as je,pgt as jf,kat as jg,Tat as jh,Eat as ji,ML as jj,Y5e as jk,K5e as jl,xat as jm,bat as jn,out as jo,Qrt as jp,jo as jq,vut as jr,Sut as js,W9e as jt,lft as ju,cft as jv,hst as jw,e7e as jx,oU as jy,dft as jz,gne as k,Tit as k$,jrt as k0,Prt as k1,gxe as k2,Lrt as k3,Hrt as k4,$rt as k5,xI as k6,Pmt as k7,Lle as k8,pbe as k9,Mat as kA,mrt as kB,D1 as kC,YG as kD,gw as kE,rz as kF,n8e as kG,ZDe as kH,kAe as kI,iAe as kJ,ice as kK,Soe as kL,voe as kM,Stt as kN,sdt as kO,Jot as kP,Tc as kQ,qk as kR,eM as kS,tU as kT,f2e as kU,LJe as kV,_H as kW,Bit as kX,Dit as kY,UCe as kZ,Lit as k_,utt as ka,ftt as kb,q5e as kc,OF as kd,Tl as ke,hf as kf,z1t as kg,kGe as kh,Qc as ki,GW as kj,Zi as kk,V5 as kl,Wwe as km,Ygt as kn,sft as ko,Qt as kp,ntt as kq,tS as kr,X1 as ks,K_e as kt,Y_e as ku,Ert as kv,Irt as kw,vA as kx,u0e as ky,j2e as kz,Ct as l,Cf as l$,V$ as l0,yE as l1,$Ee as l2,hw as l3,Kk as l4,il as l5,eg as l6,s1e as l7,Hot as l8,Q7e as l9,Dtt as lA,Ftt as lB,Btt as lC,wT as lD,bpt as lE,ET as lF,LLe as lG,Fft as lH,NLe as lI,aDe as lJ,Rft as lK,fC as lL,Fie as lM,X7e as lN,ABe as lO,Wde as lP,wpt as lQ,Ame as lR,YPe as lS,WPe as lT,XPe as lU,tRe as lV,nRe as lW,uRe as lX,FSe as lY,Xpt as lZ,wg as l_,Zk as la,o$ as lb,h3e as lc,bIe as ld,uut as le,cut as lf,iut as lg,lut as lh,Xat as li,oq as lj,sq as lk,NJe as ll,ZJe as lm,Mi as ln,oSe as lo,F$ as lp,iVe as lq,NT as lr,QO as ls,oO as lt,$E as lu,JE as lv,qot as lw,zm as lx,dk as ly,QU as lz,eL as m,MT as m$,pw as m0,_le as m1,hle as m2,zwe as m3,KT as m4,Mb as m5,HLe as m6,$Le as m7,$1e as m8,K_ as m9,z0t as mA,Nmt as mB,Amt as mC,Mmt as mD,kmt as mE,wmt as mF,WI as mG,Cmt as mH,bLe as mI,vLe as mJ,Smt as mK,Imt as mL,jmt as mM,Emt as mN,Tmt as mO,OU as mP,tit as mQ,Igt as mR,Jst as mS,NEe as mT,Xlt as mU,Hlt as mV,Blt as mW,Dlt as mX,Wlt as mY,ss as mZ,G1t as m_,Int as ma,iot as mb,Xrt as mc,nat as md,sat as me,Ec as mf,$xe as mg,tat as mh,eat as mi,BF as mj,_ie as mk,Uit as ml,jot as mm,Aot as mn,_ot as mo,frt as mp,drt as mq,Tot as mr,Wge as ms,Tet as mt,Met as mu,Q$ as mv,Wv as mw,V0t as mx,Oa as my,W0t as mz,$st as n,pC as n$,Cg as n0,RA as n1,nxe as n2,Trt as n3,pnt as n4,z_e as n5,x5 as n6,Nrt as n7,Mrt as n8,J_e as n9,got as nA,pot as nB,ba as nC,Xv as nD,Cd as nE,M3e as nF,Zct as nG,rG as nH,aE as nI,sge as nJ,Yct as nK,k5e as nL,A5e as nM,E5e as nN,M5e as nO,Qct as nP,Clt as nQ,SEe as nR,blt as nS,JEe as nT,qEe as nU,kd as nV,oLe as nW,ymt as nX,xmt as nY,iz as nZ,_mt as n_,lE as na,wD as nb,Ii as nc,ow as nd,zlt as ne,ect as nf,H4e as ng,rF as nh,qGe as ni,NUe as nj,ort as nk,mB as nl,$ot as nm,bk as nn,lk as no,Nw as np,cB as nq,Hoe as nr,Uoe as ns,she as nt,Xp as nu,tg as nv,mft as nw,J7e as nx,O$ as ny,rQe as nz,kt as o,ZSe as o$,Ja as o0,Rqe as o1,Eqe as o2,Nnt as o3,r_t as o4,Mnt as o5,Ant as o6,dst as o7,a_t as o8,qXe as o9,v_t as oA,Wt as oB,FCe as oC,vUe as oD,e0t as oE,D_e as oF,D1t as oG,L1t as oH,yge as oI,hT as oJ,bve as oK,QW as oL,Ntt as oM,zu as oN,hOe as oO,BFe as oP,Xm as oQ,Gz as oR,Vz as oS,$Oe as oT,IT as oU,dl as oV,RXe as oW,VAe as oX,Owe as oY,aC as oZ,cS as o_,ust as oa,bde as ob,wct as oc,F2e as od,q0t as oe,Gpt as of,p_t as og,$0t as oh,__t as oi,h_t as oj,g_t as ok,i_t as ol,sct as om,mbe as on,w3e as oo,fg as op,QL as oq,gut as or,cl as os,_E as ot,aot as ou,NE as ov,put as ow,ret as ox,aet as oy,mU as oz,hne as p,Ghe as p$,zU as p0,Hat as p1,OCe as p2,ube as p3,eit as p4,qat as p5,Jat as p6,xit as p7,vit as p8,pit as p9,qft as pA,Kft as pB,zft as pC,B_ as pD,Wf as pE,gV as pF,Yft as pG,mmt as pH,pmt as pI,rmt as pJ,Bft as pK,Tx as pL,yF as pM,Zft as pN,vmt as pO,Bmt as pP,Fmt as pQ,X0e as pR,clt as pS,ew as pT,k_ as pU,ost as pV,ww as pW,ZD as pX,oa as pY,ak as pZ,fk as p_,kit as pa,VU as pb,Eit as pc,Nit as pd,gve as pe,oit as pf,yit as pg,git as ph,hit as pi,Yat as pj,ait as pk,Sit as pl,XSe as pm,nAe as pn,ggt as po,O0t as pp,j0t as pq,R0t as pr,Hft as ps,$ft as pt,Gft as pu,P_ as pv,Vft as pw,Hv as px,D6e as py,Wft as pz,kpe as q,ktt as q$,Whe as q0,v0e as q1,Nut as q2,irt as q3,Apt as q4,Ist as q5,o6e as q6,QEe as q7,xWe as q8,VL as q9,sAe as qA,mS as qB,kH as qC,rs as qD,jt as qE,rge as qF,qc as qG,rut as qH,Qw as qI,b5 as qJ,Eot as qK,ID as qL,wF as qM,pL as qN,nV as qO,V1t as qP,V_ as qQ,CNe as qR,Rdt as qS,t0t as qT,Pu as qU,ok as qV,bz as qW,opt as qX,zoe as qY,$oe as qZ,ipt as q_,Mot as qa,eF as qb,wlt as qc,r0t as qd,wq as qe,ul as qf,qut as qg,i_e as qh,Ak as qi,qlt as qj,L0t as qk,OZe as ql,Aet as qm,Pre as qn,Rre as qo,Htt as qp,Utt as qq,jre as qr,mle as qs,bH as qt,al as qu,ux as qv,vge as qw,Jve as qx,gg as qy,vot as qz,Ect as r,Zot as r$,Ctt as r0,spt as r1,q9e as r2,Net as r3,tD as r4,xx as r5,_Ne as r6,EI as r7,BE as r8,g8 as r9,mlt as rA,Slt as rB,klt as rC,xct as rD,vct as rE,bct as rF,Tlt as rG,Rlt as rH,Plt as rI,yct as rJ,rit as rK,$ke as rL,mot as rM,xot as rN,yot as rO,ed as rP,Qxe as rQ,Ypt as rR,amt as rS,imt as rT,s6 as rU,AH as rV,Nx as rW,Omt as rX,dT as rY,Z1e as rZ,ag as r_,Jne as ra,tse as rb,Sm as rc,Ost as rd,Q4e as re,Bst as rf,Q1 as rg,cqe as rh,YEe as ri,DEe as rj,bq as rk,NWe as rl,Lst as rm,glt as rn,Hit as ro,Vwe as rp,Elt as rq,oct as rr,act as rs,pct as rt,plt as ru,Fit as rv,_lt as rw,_ct as rx,gct as ry,hct as rz,cc as s,Kue as s$,Kot as s0,hQe as s1,j6 as s2,$T as s3,rft as s4,Uie as s5,kct as s6,hke as s7,_ve as s8,o_t as s9,ylt as sA,df as sB,BH as sC,IEe as sD,HEe as sE,Pq as sF,jFe as sG,eC as sH,emt as sI,Jft as sJ,IOe as sK,PFe as sL,IFe as sM,ju as sN,FI as sO,OOe as sP,LOe as sQ,smt as sR,ol as sS,tst as sT,COe as sU,ngt as sV,Dmt as sW,Rmt as sX,Dk as sY,KSe as sZ,uw as s_,Xq as sa,fi as sb,lTe as sc,apt as sd,Ett as se,Ttt as sf,rO as sg,wtt as sh,Mtt as si,jpt as sj,rpt as sk,lpt as sl,npt as sm,dlt as sn,dBe as so,GT as sp,gE as sq,v5 as sr,JCe as ss,NAe as st,ZN as su,Spt as sv,c_t as sw,C9e as sx,TEe as sy,xlt as sz,zde as t,ydt as t$,_m as t0,Ket as t1,Det as t2,Let as t3,Bet as t4,qet as t5,Wet as t6,f8 as t7,Het as t8,$et as t9,kut as tA,wut as tB,yIe as tC,km as tD,TF as tE,fft as tF,Sft as tG,bw as tH,Adt as tI,Sw as tJ,Txe as tK,xft as tL,pft as tM,_ft as tN,_st as tO,xst as tP,vd as tQ,jdt as tR,Qut as tS,Pdt as tT,Mxe as tU,Jut as tV,Gdt as tW,Zut as tX,zdt as tY,bdt as tZ,jPe as t_,Dz as ta,tmt as tb,nmt as tc,MOe as td,tgt as te,tht as tf,nht as tg,DZe as th,zw as ti,mb as tj,L9e as tk,tft as tl,kI as tm,lnt as tn,cnt as to,Pv as tp,ri as tq,BSe as tr,Yot as ts,Qot as tt,JB as tu,h0 as tv,Qgt as tw,n6e as tx,s6e as ty,vat as tz,LD as u,vDe as u$,_dt as u0,Cdt as u1,oft as u2,Ydt as u3,Jdt as u4,eft as u5,kdt as u6,wdt as u7,mdt as u8,ndt as u9,bI as uA,Xdt as uB,Qdt as uC,Ift as uD,jft as uE,Sdt as uF,xdt as uG,Edt as uH,vdt as uI,Oje as uJ,$dt as uK,Yut as uL,Vdt as uM,i1 as uN,Aft as uO,hI as uP,Kie as uQ,mpt as uR,dpt as uS,cpt as uT,fpt as uU,tpt as uV,_z as uW,H9e as uX,qOe as uY,umt as uZ,_pt as u_,kft as ua,Pit as ub,Dut as uc,b3e as ud,ldt as ue,adt as uf,tdt as ug,Mdt as uh,Ndt as ui,Tdt as uj,pdt as uk,gdt as ul,Fdt as um,Ym as un,Nft as uo,Idt as up,idt as uq,Rit as ur,O6e as us,Oit as ut,wft as uu,Cft as uv,rdt as uw,Mft as ux,Eft as uy,fdt as uz,ED as v,fbe as v$,lmt as v0,upt as v1,YLe as v2,cmt as v3,xpt as v4,gpt as v5,ppt as v6,dmt as v7,Cpt as v8,Ece as v9,Yz as vA,Hce as vB,Kmt as vC,Put as vD,Iut as vE,jut as vF,Aut as vG,Oft as vH,qmt as vI,bmt as vJ,T1e as vK,But as vL,odt as vM,$ge as vN,Jmt as vO,Kat as vP,vst as vQ,gz as vR,Lft as vS,Pft as vT,Cst as vU,$ut as vV,TLe as vW,Umt as vX,Out as vY,Lut as vZ,YOe as v_,jat as va,yut as vb,zit as vc,Upt as vd,eW as ve,Qpt as vf,hut as vg,Kpt as vh,Jz as vi,Fpt as vj,Ept as vk,Mpt as vl,Qz as vm,Bpt as vn,ogt as vo,qpt as vp,rgt as vq,Aat as vr,xut as vs,Kz as vt,Jpt as vu,Zpt as vv,tW as vw,vpt as vx,Zz as vy,sgt as vz,Vet as w,Lpe as w$,Lat as w0,Dat as w1,fmt as w2,Fut as w3,ypt as w4,hmt as w5,XEe as w6,Hut as w7,p6e as w8,ug as w9,eut as wA,A2e as wB,dU as wC,M0t as wD,Nht as wE,Sat as wF,sx as wG,F0t as wH,wQe as wI,iqe as wJ,Hmt as wK,$mt as wL,MLe as wM,ALe as wN,Dq as wO,Q1e as wP,ii as wQ,U9e as wR,wPe as wS,yB as wT,yet as wU,kne as wV,AD as wW,TD as wX,qme as wY,Git as wZ,eke as w_,rst as wa,yst as wb,VLe as wc,Eut as wd,Tut as we,Mut as wf,xf as wg,Vut as wh,zut as wi,Gut as wj,Sst as wk,bst as wl,Dft as wm,gmt as wn,Rut as wo,rct as wp,f6e as wq,igt as wr,agt as ws,lgt as wt,GIe as wu,Nat as wv,wat as ww,P2e as wx,Z5e as wy,yat as wz,zet as x,C1t as x$,hot as x0,LF as x1,dot as x2,uot as x3,cot as x4,tge as x5,lot as x6,Jpe as x7,Xpe as x8,aQe as x9,g0t as xA,p0t as xB,Rst as xC,ua as xD,pKe as xE,mKe as xF,cm as xG,p1 as xH,ac as xI,qgt as xJ,qHe as xK,Agt as xL,r3e as xM,_0t as xN,Vi as xO,flt as xP,x0t as xQ,y0t as xR,b0t as xS,J1t as xT,Wpt as xU,Vpt as xV,Ymt as xW,Zmt as xX,Qmt as xY,tq as xZ,S1t as x_,_U as xa,VTe as xb,wVe as xc,ZIe as xd,b1t as xe,Ize as xf,Bdt as xg,k1t as xh,T1t as xi,M1t as xj,A1t as xk,N1t as xl,I1t as xm,j1t as xn,P1t as xo,E1t as xp,rce as xq,R1t as xr,Hwe as xs,Bze as xt,$we as xu,Y1t as xv,MWe as xw,Z1t as xx,Q1t as xy,Z4e as xz,Kh as y,Iw as y$,w1t as y0,Zht as y1,XGe as y2,W1t as y3,m0t as y4,F1t as y5,q1t as y6,U1t as y7,d0t as y8,nq as y9,k0t as yA,T0t as yB,C0t as yC,gst as yD,Uht as yE,S0t as yF,Jrt as yG,xet as yH,wne as yI,QFe as yJ,OA as yK,hdt as yL,Sle as yM,pat as yN,e0 as yO,gat as yP,Hm as yQ,cT as yR,YKe as yS,hat as yT,eU as yU,fst as yV,cf as yW,_at as yX,eYe as yY,EHe as yZ,lg as y_,l0t as ya,u0t as yb,c0t as yc,vlt as yd,f0t as ye,Xht as yf,h0t as yg,a1t as yh,K1t as yi,i1t as yj,l1t as yk,Uat as yl,X1t as ym,VCe as yn,Lz as yo,$pt as yp,_w as yq,Odt as yr,Fht as ys,$1t as yt,Bht as yu,qht as yv,YFe as yw,kf as yx,it as yy,E0t as yz,xd as z,mht as z$,pst as z0,cg as z1,lB as z2,Uot as z3,mk as z4,iB as z5,tx as z6,Td as z7,dat as z8,sU as z9,va as zA,Sgt as zB,hgt as zC,Ogt as zD,Pgt as zE,Rgt as zF,gme as zG,cst as zH,Dv as zI,Mw as zJ,Xgt as zK,iht as zL,lht as zM,aht as zN,vht as zO,bht as zP,Cn as zQ,yht as zR,_ht as zS,W$e as zT,xht as zU,Aht as zV,Cat as zW,Pat as zX,Mht as zY,$ht as zZ,Wht as z_,QS as za,Zc as zb,Yye as zc,hV as zd,mat as ze,mst as zf,_V as zg,Udt as zh,Ede as zi,nU as zj,ZA as zk,VT as zl,bL as zm,Iat as zn,Art as zo,vF as zp,ble as zq,fnt as zr,tEe as zs,xve as zt,_gt as zu,bgt as zv,xgt as zw,vgt as zx,ygt as zy,Gmt as zz};
//# sourceMappingURL=1a7ebd5f-ihenykhpblfwilpu.js.map
