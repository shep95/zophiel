var T=Object.defineProperty,_=Object.defineProperties;var b=Object.getOwnPropertyDescriptors;var P=Object.getOwnPropertySymbols;var k=Object.prototype.hasOwnProperty,O=Object.prototype.propertyIsEnumerable;var d=(e,t,s)=>t in e?T(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,p=(e,t)=>{for(var s in t||(t={}))k.call(t,s)&&d(e,s,t[s]);if(P)for(var s of P(t))O.call(t,s)&&d(e,s,t[s]);return e},$=(e,t)=>_(e,b(t));var n=(e,t,s)=>d(e,typeof t!="symbol"?t+"":t,s);import{hZ as y,jf as q,aO as o,rT as L,R as g,f as u,l1 as S}from"./4813494d-di0bpg5zidu9s57f.js";import{q as f}from"./2340486e-n0khdanno9uzbccp.js";import"./b9ebfa06-o5t8gt8380co00ia.js";import{c4 as w}from"./1a7ebd5f-ihenykhpblfwilpu.js";function m(){return f({queryKey:["personalityOnboarding"],queryFn:()=>g.safeGet("/personality_onboarding")})}y(m);class F{constructor(t,s,r,a={}){n(this,"selectedPersonality$");n(this,"selectedTraits$");n(this,"serverData$");n(this,"logging");n(this,"mode");n(this,"mockData$");n(this,"serverDataPromise");n(this,"intervalSec$",o(()=>{var s,r;return(r=(s=this.serverData$().data)==null?void 0:s.interval_sec)!=null?r:4}));n(this,"personalities$",o(()=>{var l,c,h;let t=[],s=this.selectedPersonality$();const r=this.mockData$(),a=r?{data:r}:null,i=a!=null?a:this.serverData$();return(l=i.data)!=null&&l.default_personality_key&&(s=i.data.default_personality_key),t=(h=(c=i.data)==null?void 0:c.personalities)!=null?h:[],t.map(D=>$(p({},D),{selected$:u(s===D.key)}))}));n(this,"traits$",o(()=>{const t=this.mockData$(),s=t?{data:t}:null,r=s!=null?s:this.serverData$();return!r||!r.data||!r.data.traits?[]:r.data.traits.map(a=>$(p({},a),{selected$:u(this.selectedTraits$().includes(a.key))}))}));var i,l,c;this.ctx=t,this.flow=s,this.selectedPersonality$=u((i=a.selectedPersonality$)!=null?i:null),this.selectedTraits$=u((l=a.selectedTraits$)!=null?l:[]),this.mode=r,this.logging=w(r),this.mockData$=u((c=a.mockData$)!=null?c:null),this.serverData$=y(()=>m()),this.serverDataPromise=this.watchServerData()}watchServerData(){let t,s;const r=new Promise((a,i)=>{t=a,s=i});return S(()=>{const a=this.serverData$();a.status==="success"?t(a.data):a.status==="error"&&s(a.error)}),r}}function K(e,t,s,r){return new F(e,t,s,r)}const E=q(K),Q=y(m),G=o(()=>{const e=Q();return e.status==="success"?e.data:null},{getServerFallback(){return null}});function j(){return f({queryKey:["personalityTypeList"],queryFn:()=>g.safeGet("/personality_types")})}function x(){return f({queryKey:["traitsList"],queryFn:()=>g.safeGet("/personality_trait_types")})}const v=y(j),V=y(x);o(()=>{var t;const e=G();return e?(t=e==null?void 0:e.can_close_onboarding)!=null?t:!0:null});const H=o(()=>{var s;const e=V(),t=[];return!e||!e.data||!e.data.trait_types?t:(s=e.data)==null?void 0:s.trait_types}),I=o(()=>{var t;const e=v();return e?(t=e.data)!=null?t:[]:[]}),J=o(()=>{var r;const e=v();if(!e)return null;const t=L();return(r=e.data)==null?void 0:r.find(a=>a.key===t)});export{I as a,v as b,J as c,V as d,E as g,G as p,H as t};
//# sourceMappingURL=52878ea3-ioe7kiws6mdf258w.js.map
