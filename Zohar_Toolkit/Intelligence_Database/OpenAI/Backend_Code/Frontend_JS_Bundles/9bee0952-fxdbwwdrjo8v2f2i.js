var Pe=Object.freeze,Te=Object.defineProperty,it=Object.defineProperties;var nt=Object.getOwnPropertyDescriptors;var Fe=Object.getOwnPropertySymbols;var rt=Object.prototype.hasOwnProperty,ct=Object.prototype.propertyIsEnumerable;var we=(t,e,a)=>e in t?Te(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a,T=(t,e)=>{for(var a in e||(e={}))rt.call(e,a)&&we(t,a,e[a]);if(Fe)for(var a of Fe(e))ct.call(e,a)&&we(t,a,e[a]);return t},ge=(t,e)=>it(t,nt(e));var Ce=(t,e)=>Pe(Te(t,"raw",{value:Pe(e||t.slice())}));import{b as I,r as X,j as s,c as D,M as E,d as ne,h as re}from"./2340486e-n0khdanno9uzbccp.js";import{an as q,hW as Ge,aW as _e,ao as dt,v as ce,ej as ze,cS as V,dq as He,P as ee,hL as pt,kL as ut,T as We,au as ft,mq as ae,y as me,am as le,cT as te,cW as Ve,cV as be,cU as gt,b as Q,n6 as mt,m8 as ht,cO as de,aA as xt,l as qe,fa as S,ft as _t,hE as bt,h as kt,cB as vt,wz as Ke,F as Mt,ar as Ye,j as Ze,lP as yt,lW as Xe,wA as jt,wB as Pt,bf as Ft,kR as wt,jj as Qe,nZ as Tt,wC as Ct,lQ as Et,be as Nt,kS as Ee,kX as St,wD as At,wE as Rt,uj as It,ab as Ut,vt as Bt,kW as Lt,wF as Ot,jn as Dt,wG as $t,ji as Ne,jh as he,wH as Gt}from"./4813494d-di0bpg5zidu9s57f.js";import{P as Je,ps as zt,pt as Ht,pu as Wt,pv as Vt,dz as qt,eP as Kt,bl as Yt,pw as Zt,A as Se,kf as Xt,px as Qt,py as O,iR as Jt,pz as es,pA as ts,pB as Ae,pC as ss,pD as os,cM as et,pE as as,pF as tt,cw as ls,pG as is,pH as Re,pI as Ie,jJ as ns,c6 as rs,pJ as st,lH as ke,n0 as cs,pK as ds,pL as ps,pM as us,pN as fs,d$ as gs,pO as Ue,pP as ms,pQ as hs,pR as xs,jW as _s,k7 as bs}from"./1a7ebd5f-ihenykhpblfwilpu.js";import{u as ks}from"./1bc04b52-h3moqxxwumotj8ui.js";import{b as ot,m as J,h as at}from"./84e8f385-egf9uxe7ipj6bm36.js";function vs({usage:t}){const e={work:{icon:Zt,color:"#35AE47"},school:{icon:Yt,color:"#E937D1"},personalTasks:{icon:Kt,color:"#EA8444"},funAndEntertainment:{icon:qt,color:"#6C71FF"},justCurious:{icon:Vt,color:"#FFCC00"}},a=e[t].icon,n=e[t].color;return s.jsx(a,{className:"icon",style:{color:n}})}function to({clientThreadId:t}){const e=I(),a=ot({clientThreadId:t});return X.useEffect(()=>{q.logEvent("chatgpt_convo_onboarding_usage_chips_shown")},[]),s.jsx(Ge,{mode:"wait",children:s.jsx(_e.div,{className:"-mx-6 mt-2 flex flex-wrap gap-2 px-6",initial:{opacity:0},animate:{opacity:1,transition:{delay:.2,ease:"easeInOut"}},exit:{opacity:0,transition:{ease:"easeInOut"}},children:["school","work","personalTasks","funAndEntertainment","justCurious"].map(n=>s.jsxs("button",{className:"border-token-border-default bg-token-main-surface-primary hover:bg-token-main-surface-secondary inline-flex h-[42px] items-center justify-start gap-2 rounded-[25px] border px-4 py-3",onClick:l=>{a({sourceEvent:l,stepPrompt:e.formatMessage(J["".concat(n,"Prompt")]),messageMetadata:{onboarding:{main_usages:[{usage:n}]},is_starter_prompt:!0,suggestion_type:Je.Starter}}),q.logEvent("chatgpt_convo_onboarding_usage_chip_clicked",null,{usage:n})},children:[s.jsx("div",{"data-svg-wrapper":!0,className:"relative",children:s.jsx(vs,{usage:n})}),s.jsx("div",{className:"font-['SF Pro'] text-token-text-primary text-[13px] leading-[18px] font-normal opacity-90",children:e.formatMessage(J[n])})]},n))})})}function so({clientThreadId:t,examples:e}){const a=ot({clientThreadId:t}),n=[zt,Ht,Wt],l=I();return X.useEffect(()=>{q.logEvent("chatgpt_convo_onboarding_examples_shown")},[]),s.jsx(Ge,{mode:"wait",children:s.jsxs("div",{children:[s.jsx(_e.p,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3,ease:"easeInOut"},className:"text-token-text-primary text-base",children:l.formatMessage(J.tryAnExample)}),s.jsx("ul",{className:"-mx-6 flex list-none flex-nowrap gap-6 overflow-auto px-6 py-4",children:e.map((i,r)=>s.jsx(_e.li,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:(r+1)*.2,duration:.3},children:s.jsxs("button",{className:"bg-token-main-surface-primary outline-token-border-xlight hover:shadow-token-border-default inline-flex h-60 w-[222px] flex-col items-center justify-start overflow-hidden rounded-2xl outline transition-all duration-300 hover:shadow-lg",onClick:c=>{a({sourceEvent:c,stepPrompt:i.example,messageMetadata:{onboarding:{triggered_tools:[i.feature]},is_starter_prompt:!0,suggestion_type:Je.Starter}}),q.logEvent("chatgpt_convo_onboarding_example_clicked",null,{tool:i.feature})},children:[s.jsx("img",{src:n[r%n.length].src,className:"h-[160px] w-full object-cover",alt:l.formatMessage({id:"chatgpt.new-onboarding.example-prompt",defaultMessage:"Example prompt"})}),s.jsx("div",{className:"inline-flex h-20 w-full gap-1 p-4",children:s.jsx("div",{className:"text-token-text-primary line-clamp-2 shrink grow basis-0 text-start text-base leading-normal",title:i.title,children:i.title})})]})},i.feature))})]})})}function Ms({clientThreadId:t,children:e}){const{isEligible:a,markAsViewed:n}=at(t),l=I();return X.useEffect(()=>{a&&dt.showAnnouncementTooltipExclusively(Se.hasSeenFilePickerNuxTooltip,!0)},[a]),a?s.jsx(Xt,{announcementKey:Se.hasSeenFilePickerNuxTooltip,show:!0,side:"top",align:"start",theme:"bright",dismissOnOutsideClick:!0,badge:"none",title:l.formatMessage(J.tryUploadingAFile),description:l.formatMessage(J.uploadFileExample),onDismiss:n,sideOffset:0,children:e}):e}const Be=t=>{"use forget";const e=D.c(30),{clientThreadId:a,rateLimitPopup:n,children:l,disabled:i,highlightTooltip:r,disabledReason:c,currentModelName:o,label:p,secondaryLabel:d,onTooltipOpenChange:m}=t,x=r===void 0?!1:r,k=I(),u=ze(a,He.getIsNewConversation);let _;e[0]===Symbol.for("react.memo_cache_sentinel")?(_=ce(),e[0]=_):_=e[0];const b=_;let h;e[1]!==m||e[2]!==n?(h=y=>{var P;if(m==null||m(y),n!=null&&y){const w={type:"rate_limit",location:"file_upload",plan_type:(P=b==null?void 0:b.planType)!=null?P:"unknown"};ee.logEvent("Popover Hover",w),q.logEvent("chatgpt_popover_hover",null,w)}},e[1]=m,e[2]=n,e[3]=h):h=e[3];const v=h;let g;e[4]===Symbol.for("react.memo_cache_sentinel")?(g=Jt(V.signUpButtonText),e[4]=g):g=e[4];const M=g,{isEligible:f}=at(a),R=!!n,A=!i&&f;if(R){let y;e[5]!==l?(y=s.jsx(es,{asChild:!0,children:l}),e[5]=l,e[6]=y):y=e[6];let P;e[7]!==u||e[8]!==n?(P=s.jsx(ts,{children:s.jsx(pt,{children:s.jsx(Ae,{role:"dialog","aria-labelledby":"rate-limit-popover-title",children:s.jsx(ut,{$as:Ae,side:"bottom",sideOffset:6,align:"start",alignOffset:-6,className:"max-w-[300px]",children:s.jsx(ys,{isNewConversation:u,rateLimitPopup:n,signUpButtonText:M})})})})}),e[7]=u,e[8]=n,e[9]=P):P=e[9];let w;return e[10]!==v||e[11]!==y||e[12]!==P?(w=s.jsxs(ss,{openDelay:0,onOpenChange:v,children:[y,P]}),e[10]=v,e[11]=y,e[12]=P,e[13]=w):w=e[13],w}if(A){let y;return e[14]!==l||e[15]!==a?(y=s.jsx(Ms,{clientThreadId:a,children:l}),e[14]=l,e[15]=a,e[16]=y):y=e[16],y}let j;e[17]!==o||e[18]!==i||e[19]!==c||e[20]!==k||e[21]!==p?(j=!i&&p?p:pe(k,i,c,o),e[17]=o,e[18]=i,e[19]=c,e[20]=k,e[21]=p,e[22]=j):j=e[22];const C=x?void 0:"touch:hidden",N=x?!0:void 0;let F;return e[23]!==l||e[24]!==m||e[25]!==d||e[26]!==j||e[27]!==C||e[28]!==N?(F=s.jsx(We,{label:j,secondaryLabel:d,labelOrientation:"horizontal",className:"flex",contentClassName:C,open:N,side:"bottom",onOpenChange:m,children:l}),e[23]=l,e[24]=m,e[25]=d,e[26]=j,e[27]=C,e[28]=N,e[29]=F):F=e[29],F};function pe(t,e,a,n){const l=ce(),i=l!=null,r=Qt(),c=l==null?void 0:l.isFreeWorkspace();return e?a===O.ModelNotSupported&&n!=null?t.formatMessage({id:"xPEzDr",defaultMessage:"Add files disabled for {modelName}"},{modelName:n}):a===O.HasReachedMaxFiles?i?t.formatMessage({id:"TEBczg",defaultMessage:"Cannot add more files"}):t.formatMessage({id:"Y6o+nN",defaultMessage:"Cannot add more photos"}):a===O.RateLimitReached?i?l.hasPaidSubscription()?t.formatMessage({id:"W/ug8Z",defaultMessage:"Upload limit reached"}):r?t.formatMessage({id:"j6nN5P",defaultMessage:"Upgrade to Go for more uploads"}):c?t.formatMessage({id:"y1qZZ9",defaultMessage:"Get Business for more uploads"}):t.formatMessage({id:"GXsPqr",defaultMessage:"Get Plus for more uploads"}):t.formatMessage({id:"RHdQBI",defaultMessage:"Log in to add more photos"}):a===O.SteeringAsyncTaskPending?t.formatMessage({id:"composer.addFiles.disabled.stopRequest",defaultMessage:"Menu actions are disabled for follow ups"}):i?t.formatMessage({id:"MeW0HZ",defaultMessage:"Add files is unavailable"}):t.formatMessage({id:"bvbDsP",defaultMessage:"Add photos is unavailable"}):i?t.formatMessage({id:"composer.add.label",defaultMessage:"Add photos & files"}):t.formatMessage({id:"wNvwwm",defaultMessage:"Add photos"})}const ys=t=>{"use forget";var F,y,P,w;const e=D.c(35),{isNewConversation:a,rateLimitPopup:n,signUpButtonText:l}=t,i=a===void 0?!1:a,r=ft();if(n==null)return null;const{call_to_action:c,description:o}=n;let p;e[0]!==c?(p=(F=c==null?void 0:c.includes(ae.UPGRADE_TO_GO))!=null?F:!1,e[0]=c,e[1]=p):p=e[1];const d=p;let m;e[2]!==c?(m=(y=c==null?void 0:c.includes(ae.GET_PLUS))!=null?y:!1,e[2]=c,e[3]=m):m=e[3];const x=m;let k;e[4]!==c?(k=(P=c==null?void 0:c.includes(ae.GET_BUSINESS))!=null?P:!1,e[4]=c,e[5]=k):k=e[5];const u=k;let _;e[6]!==c?(_=(w=c==null?void 0:c.includes(ae.AUTHENTICATE))!=null?w:!1,e[6]=c,e[7]=_):_=e[7];const b=_;let h;e[8]!==o||e[9]!==u||e[10]!==d?(h=o!=null?o:s.jsx(E,ge(T({},js.defaultDescription),{values:{upgradePlanType:u?"Business":d?"Go":"Plus"}})),e[8]=o,e[9]=u,e[10]=d,e[11]=h):h=e[11];const v=h,g=b&&r;let M;e[12]!==v?(M=s.jsx("div",{className:"mb-3",id:"rate-limit-popover-title",children:v}),e[12]=v,e[13]=M):M=e[13];let f;e[14]!==i||e[15]!==d?(f=d?s.jsx(xe,{isNewConversation:i,message:V.upgradeToGo,upgradePlanType:me.GO}):null,e[14]=i,e[15]=d,e[16]=f):f=e[16];let R;e[17]!==i||e[18]!==u?(R=u?s.jsx(xe,{isNewConversation:i,message:V.getBusiness,upgradePlanType:me.SELF_SERVE_BUSINESS}):null,e[17]=i,e[18]=u,e[19]=R):R=e[19];let A;e[20]!==i||e[21]!==x?(A=x?s.jsx(xe,{isNewConversation:i,message:os(),upgradePlanType:me.PLUS}):null,e[20]=i,e[21]=x,e[22]=A):A=e[22];let j;e[23]!==b?(j=b?s.jsx(le,{color:"primary",onClick:Fs,children:s.jsx(E,T({},V.logInButtonText))}):null,e[23]=b,e[24]=j):j=e[24];let C;e[25]!==g||e[26]!==l?(C=g?s.jsx(le,{color:"secondary",className:"ms-2",onClick:Ts,children:s.jsx(E,T({},l))}):null,e[25]=g,e[26]=l,e[27]=C):C=e[27];let N;return e[28]!==A||e[29]!==j||e[30]!==C||e[31]!==M||e[32]!==f||e[33]!==R?(N=s.jsxs("div",{className:"text-token-text-primary p-2 text-sm",children:[M,f,R,A,j,C]}),e[28]=A,e[29]=j,e[30]=C,e[31]=M,e[32]=f,e[33]=R,e[34]=N):N=e[34],N},xe=t=>{"use forget";const e=D.c(10),{isNewConversation:a,message:n,upgradePlanType:l}=t;let i;e[0]===Symbol.for("react.memo_cache_sentinel")?(i=ce(),e[0]=i):i=e[0];const r=i,c=re();let o;e[1]!==a||e[2]!==c||e[3]!==l?(o=()=>{var m,x;et(c,"Rate limited file upload popover"),as({hard_block_reason:"",is_hard_block:!1,is_new_conversation:a,location:"popover",plan_type:(m=r==null?void 0:r.planType)!=null?m:"unknown",type:"file_upload",upgrade_plan_tye:l}),tt({type:"file_upload",location:"popover",plan_type:(x=r==null?void 0:r.planType)!=null?x:"unknown",is_hard_block:!1,is_new_conversation:a,hard_block_reason:""})},e[1]=a,e[2]=c,e[3]=l,e[4]=o):o=e[4];let p;e[5]!==n?(p=s.jsx(E,T({},n)),e[5]=n,e[6]=p):p=e[6];let d;return e[7]!==o||e[8]!==p?(d=s.jsx(le,{size:"small",color:"secondary",onClick:o,children:p}),e[7]=o,e[8]=p,e[9]=d):d=e[9],d},js=ne({defaultDescription:{id:"mMIVYZ",defaultMessage:"You've reached your daily upload limit. Get ChatGPT {upgradePlanType} to unlock more."}});function Ps(t){Ve({location:"File picker rate limit tooltip",provider:t},be.ACCESS_FLOW_ENTRY_POINT_FILE_PICKER_RATE_LIMIT_TOOLTIP)}function Fs(){te({fallbackScreenHint:"login",callback:Ps,skipLoginModal:!1})}function ws(t){gt({location:"File picker rate limit tooltip",provider:t},be.ACCESS_FLOW_ENTRY_POINT_FILE_PICKER_RATE_LIMIT_TOOLTIP)}function Ts(){te({fallbackScreenHint:"signup",callback:ws,skipLoginModal:!1})}const Cs=[ls.Mod,"u"];function ve(t,e="en"){if(!t)return"";const a=new Date(t);if(isNaN(a.getTime()))return"";const n=new Date,l=Math.max(0,a.getTime()-n.getTime()),i=Math.floor(l/(1e3*60)),r=Math.floor(l/(1e3*60*60)),c=Math.floor(l/(1e3*60*60*24));let o,p;return c>0?(o=c,p="day"):r>0?(o=r,p="hour"):(o=i,p="minute"),new Intl.RelativeTimeFormat(e,{numeric:"always"}).format(o,p).replace(/^in\s+/i,"").replace(/\s+ago$/i,"")}function Es({openFileDialog:t,showMenuForNoAuth:e,mode:a,modelSupportsImages:n,isDisabled:l,disabledReason:i,rateLimitInfo:r,currentModelName:c,clientThreadId:o,onTakePhotoSave:p}){const d=ce(),{attachfileRateLimitMessageVariant:m,attachfileRateLimitMessageShowIcon:x}=Q(()=>mt()),k=n&&!l&&ht(),u=n&&!l&&de()&&xt(),_=Q(()=>n&&!l&&!k&&qe("3814343233")&&is()),b=l&&i===O.RateLimitReached,h=ze(o,He.getIsNewConversation),v=X.useRef(!1);X.useEffect(()=>{var M;b&&!v.current&&(ee.logEventWithStatsig("Rate Limit: Show Info","chatgpt_rate_limit_tooltip_shown",{location:"file_upload",type:"rate_limit",plan_type:(M=d==null?void 0:d.planType)!=null?M:"unknown",is_new_conversation:h}),v.current=!0)},[b,h,d==null?void 0:d.planType]);let g;if(l&&i===O.RateLimitReached)if(d!=null&&d.hasPaidSubscription())g=s.jsx(Le,{account:d,forSheet:a==="sheet",rateLimitInfo:r!=null?r:null,currentModelName:c});else switch(a==="sheet"?"title_and_description":m){case"linked_text":g=s.jsx(As,{account:d,rateLimitInfo:r!=null?r:null,showIcon:x});break;case"title_and_description":g=s.jsx(Le,{account:d,forSheet:a==="sheet",rateLimitInfo:r!=null?r:null,currentModelName:c});break;case"upgrade_button":g=s.jsx(Rs,{account:d,rateLimitInfo:r!=null?r:null});break}else g=s.jsxs(s.Fragment,{children:[s.jsx(Ns,{mode:a,rateLimitInfo:r!=null?r:null,hasAddPhotosItem:u,currentModelName:c,openFileDialog:t,disabled:l,disabledReason:i}),_&&p&&s.jsx(Ss,{onPhotoSave:p})]});return e?s.jsx(Is,{onClickUploadImages:t,redirectToAuth:()=>te({fallbackScreenHint:"login",skipLoginModal:!1})}):a==="sheet"?s.jsxs(s.Fragment,{children:[k&&s.jsx(Re,{forMobileSheet:!0}),u&&s.jsx(Ie,{forMobileSheet:!0}),g]}):s.jsxs(s.Fragment,{children:[u&&s.jsx(Ie,{}),k&&s.jsx(Re,{}),g]})}function Ns(t){"use forget";const e=D.c(27),{hasAddPhotosItem:a,currentModelName:n,mode:l,openFileDialog:i,disabled:r,disabledReason:c}=t,o=I(),p=Q(bt),{file_uploads:d,image_uploads:m}=st(),x=a?"android":l==="sheet"&&de()?"ios":"default";let k;e:{if(m==="allowed"&&d==="allowed"){let f;e[0]!==o?(f=o.formatMessage({id:"LocalFileDropdownItem.uploadPhotosAndFiles",defaultMessage:"Photos & files"}),e[0]=o,e[1]=f):f=e[1],k=f;break e}else if(m==="allowed"&&d!=="allowed"){let f;e[2]!==o?(f=o.formatMessage({id:"LocalFileDropdownItem.uploadImagesOnly",defaultMessage:"Add photos"}),e[2]=o,e[3]=f):f=e[3],k=f;break e}switch(x){case"android":{let f;e[4]!==o?(f=o.formatMessage({id:"LocalFileDropdownItem.uploadFilesOnly",defaultMessage:"Add files"}),e[4]=o,e[5]=f):f=e[5],k=f;break e}case"ios":{let f;e[6]!==o?(f=o.formatMessage({id:"LocalFileDropdownItem.uploadPhotosAndFiles",defaultMessage:"Photos & files"}),e[6]=o,e[7]=f):f=e[7],k=f;break e}case"default":{let f;e[8]!==n||e[9]!==r||e[10]!==c||e[11]!==o?(f=pe(o,r,c,n),e[8]=n,e[9]=r,e[10]=c,e[11]=o,e[12]=f):f=e[12],k=f;break e}}k=void 0}const u=k,_=l==="sheet"?S.HeaderItem:S.Item,b=l==="sheet"?"large":void 0;let h;e[13]!==l||e[14]!==i?(h=()=>{l==="sheet"?(ps().keepSheetOpen$.set(!0),Promise.resolve().then(()=>{i()})):i()},e[13]=l,e[14]=i,e[15]=h):h=e[15];let v;e[16]===Symbol.for("react.memo_cache_sentinel")?(v=s.jsx(ke,{className:"icon"}),e[16]=v):v=e[16];let g;e[17]!==l?(g=l!=="sheet"&&s.jsx(us,{binding:Cs,className:"touch:hidden"}),e[17]=l,e[18]=g):g=e[18];let M;return e[19]!==_||e[20]!==r||e[21]!==p||e[22]!==u||e[23]!==b||e[24]!==h||e[25]!==g?(M=s.jsx(_,{size:b,onClick:h,icon:v,label:u,disabled:r,highlightTrailing:g,showHighlightTrailing:p},"upload"),e[19]=_,e[20]=r,e[21]=p,e[22]=u,e[23]=b,e[24]=h,e[25]=g,e[26]=M):M=e[26],M}function Ss(t){"use forget";const e=D.c(9),{mode:a,onPhotoSave:n}=t,l=I(),i=a==="sheet"?S.HeaderItem:S.Item;let r;e[0]!==n?(r=()=>{vt(fs,{onPhotoSave:n})},e[0]=n,e[1]=r):r=e[1];const c=a==="sheet"?"large":void 0;let o;e[2]!==l?(o=l.formatMessage({id:"cfxsRv",defaultMessage:"Take photo"}),e[2]=l,e[3]=o):o=e[3];let p;return e[4]!==i||e[5]!==r||e[6]!==c||e[7]!==o?(p=s.jsx(i,{icon:gs,onClick:r,size:c,label:o}),e[4]=i,e[5]=r,e[6]=c,e[7]=o,e[8]=p):p=e[8],p}function Le({account:t,forSheet:e,rateLimitInfo:a,currentModelName:n}){const l=I(),i=re(),r=ve(a==null?void 0:a.resets_after);let c=s.jsx(ke,{className:"icon"}),o;t!=null&&t.hasPaidSubscription()?o=l.formatMessage({id:"ZBhfvX",defaultMessage:"Wait {time} to upload again"},{time:r}):(c=s.jsx(ds,{className:"icon"}),o=l.formatMessage({id:"ba5pHI",defaultMessage:"Or wait {time} to upload again"},{time:r}));const p=e?S.HeaderItemRow:S.Item;return s.jsx(p,{onClick:()=>{t?ie(i,t):te({fallbackScreenHint:"login_or_signup",callback:d=>{Ve({provider:d,location:"File picker rate limit tooltip"},be.ACCESS_FLOW_ENTRY_POINT_FILE_PICKER_RATE_LIMIT_TOOLTIP)},skipLoginModal:!1})},icon:!e&&c,disabled:(t==null?void 0:t.hasPaidSubscription())&&!e,label:pe(l,!0,O.RateLimitReached,n),trailing:e&&!(t!=null&&t.hasPaidSubscription())&&s.jsx(le,{className:kt(e&&"min-h-9"),onClick:()=>{ie(i,t)},children:s.jsx(E,T({},V.upgrade))}),secondary:o},"upload")}function As({account:t,rateLimitInfo:e,showIcon:a}){const n=I(),l=re(),i=ve(e==null?void 0:e.resets_after);return s.jsxs("div",{className:"group flex min-w-0 items-center py-2 ".concat(a?"px-2.5":"px-5"),children:[a&&s.jsx("div",{className:"flex h-8 w-8 shrink-0 items-center justify-center",children:s.jsx(ke,{className:"text-token-text-tertiary"})}),s.jsx("div",{className:"text-token-text-tertiary line-clamp-2 block max-w-[212px] min-w-0 flex-1 text-start text-sm font-light",children:n.formatMessage({id:"egGG9V",defaultMessage:"<link>Upgrade to Plus</link> to attach more files or try again in {time}"},{time:i,link:r=>s.jsx("button",{type:"button",className:"text-token-text-secondary underline",onClick:()=>{ie(l,t)},children:r})})})]},"upload")}function Rs({account:t,rateLimitInfo:e}){const a=I(),n=re(),l=ve(e==null?void 0:e.resets_after);return s.jsxs("div",{className:"flex flex-col gap-2 px-5 py-2",children:[s.jsx("div",{className:"text-token-text-tertiary max-w-[212px] text-start text-sm font-light",children:a.formatMessage({id:"/zL/ev",defaultMessage:"Upgrade to Plus to attach more files or try again in {time}"},{time:l})}),s.jsxs("button",{type:"button",className:"flex w-full items-center justify-center gap-1 rounded-full bg-[#F1F1FB] px-4 py-2 text-sm font-medium text-[#AF52DE] hover:bg-[#E4E4F6] dark:bg-[#373669] dark:text-[#DCDBF6] dark:hover:bg-[#414071]",onClick:()=>{ie(n,t)},children:[s.jsx(cs,{className:"icon-sm text-[#5D5BD0] dark:text-[#DCDBF6]"}),s.jsx(E,T({},V.upgrade))]})]},"upload")}function ie(t,e){var a;et(t,"Rate limited file upload inline-text",void 0,void 0,void 0,{isStorageUpsellActive:!0}),tt({type:"file_upload",location:"inline-text",plan_type:(a=e==null?void 0:e.planType)!=null?a:"unknown",is_hard_block:!1,hard_block_reason:""})}function Is({onClickUploadImages:t,redirectToAuth:e}){return s.jsxs(s.Fragment,{children:[s.jsx(S.Item,{icon:ns,onClick:e,children:s.jsxs("div",{className:"flex flex-col",children:[s.jsx(E,T({},Z.connectApps)),s.jsx("span",{className:"text-token-text-secondary text-[13px]",children:s.jsx(E,T({},Z.loginRequired))})]})},"connect-apps-no-auth"),s.jsx(S.Item,{icon:_t,onClick:e,children:s.jsxs("div",{className:"flex flex-col",children:[s.jsx(E,T({},Z.uploadDocuments)),s.jsx("span",{className:"text-token-text-secondary text-[13px]",children:s.jsx(E,T({},Z.loginRequired))})]})},"upload-documents-no-auth"),s.jsx(S.Item,{icon:rs,onClick:t,children:s.jsx(E,T({},Z.uploadImages))},"upload-images-no-auth")]})}const Z=ne({connectApps:{id:"Rna6u2",defaultMessage:"Connect apps"},uploadDocuments:{id:"0BxpM7",defaultMessage:"Documents"},uploadImages:{id:"rdMuNJ",defaultMessage:"Images"},loginRequired:{id:"/1XNys",defaultMessage:"Login required"}});function oo({clientThreadId:t,openFileDialog:e,icon:a,isDisabled:n=!1,isSmall:l=!1,showLabel:i=!1,showUpsell:r=!1,hideBorder:c=!1,highlightTooltip:o=!1,disabledReason:p,currentModelName:d,visualTreatment:m,showMenuForNoAuth:x,modelSupportsImages:k}){const u=I(),_=Ke();n=(n||!!_)&&!r;const b=s.jsxs(ms,{disabled:n,$showLabel:i,$hideBorder:c,$isSmall:l,$visualTreatment:m,onClick:v=>{if(v.preventDefault(),x||r){const g={location:x?"No auth file upload":"No auth upsell"};ee.logEvent("No Auth Attach Button Clicked",g),q.logEvent("chatgpt_web_no_auth_attach_button_clicked",null,g);return}e()},"aria-label":pe(u,n,p,d),children:[a,i&&s.jsx(hs,{})]}),h=s.jsx("div",{className:"flex",children:b});if(x||r){const v=x?s.jsx(Es,{openFileDialog:e,showMenuForNoAuth:!0,modelSupportsImages:k,clientThreadId:t}):s.jsx(xs,{location:"attach",statsig_login_event:"chatgpt_composer_upsell_login_button_clicked",statsig_signup_event:"chatgpt_composer_upsell_signup_button_clicked"}),g=s.jsx(S.BasicTrigger,{asChild:!0,children:h});return s.jsxs(S.Root,{children:[x?s.jsx(Be,{clientThreadId:t,rateLimitPopup:_,highlightTooltip:o,disabled:n,children:g}):s.jsx(We,{label:s.jsx(E,{id:"wkpQmi",defaultMessage:"Upload files and more"}),side:"bottom",open:o||void 0,children:g}),s.jsx(S.Portal,{children:s.jsx(S.Content,{alignOffset:-8,side:"bottom",size:"small",className:"radix-side-bottom:flex-col-reverse flex flex-col",children:v})})]})}return s.jsx(Be,{disabled:n,clientThreadId:t,rateLimitPopup:_,highlightTooltip:o,children:h})}function Us({code:t,message:e}){switch(t){case Ue.FileTooLarge:return Oe.errorFileTooLarge;case Ue.TooManyFiles:return ee.logEvent("Uploaded Max Files Error"),Oe.errorTooManyFiles;default:return e}}const Oe=ne({attachImages:{id:"PromptFilePicker.attachImages",defaultMessage:"Attach images"},attachFiles:{id:"PromptFilePicker.attachFiles",defaultMessage:"Upload files and more"},errorFileTooLarge:{id:"PromptFilePicker.errorFileTooLarge",defaultMessage:"Your file is too large. The maximum file size is {size}MB."},errorTooManyFiles:{id:"PromptFilePicker.errorTooManyFiles",defaultMessage:"You may only upload {maxNum} files at a time."},defaultFileUploadRateLimited:{id:"U5qAWP",defaultMessage:"You've reached your daily upload limit. Get ChatGPT Plus to unlock more."}}),De=ne({dragInstructions:{id:"FileDropZone.dragInstructions",defaultMessage:"Add anything"},dragAllAccepted:{id:"FileDropZone.dragAllAccepted",defaultMessage:"Drop any file here to add it to the conversation"}});function Bs(t){if(!t.accept||Object.keys(t.accept).length===0)return[];const e=[];return Object.values(t.accept).forEach(a=>e.push(...a)),e.sort()}function ao(t){"use forget";var je;const e=D.c(49),{className:a,children:n,clientThreadId:l,currentModelConfig:i,noKeyboard:r}=t,c=I(),o=Ze(),p=Nt();let d;e[0]===Symbol.for("react.memo_cache_sentinel")?(d=de(),e[0]=d):d=e[0];const m=d,x=Ye().flags,k=x==null?void 0:x.includes(Xe.NoAuthEnableFileUploads),u=_s(l),_=Ft();let b;e[1]!==_||e[2]!==u||e[3]!==i?(b=wt(i,u,_),e[1]=_,e[2]=u,e[3]=i,e[4]=b):b=e[4];const h=b,v=h!==Qe.None,g=Tt(Ls),M=Ct(h),f=Math.max(0,M-g.length),R=f<=0,{getGizmoId:A}=Et();let j;e[5]!==l||e[6]!==p?(j=Bt(p,l),e[5]=l,e[6]=p,e[7]=j):j=e[7];const C=Q(j),N=Array.isArray(C)&&C.length>0;let F;e[8]!==l?(F=Lt(l),e[8]=l,e[9]=F):F=e[9];const y=Q(F);let P;e[10]!==u||e[11]!==i?(P=Ee(i,u),e[10]=u,e[11]=i,e[12]=P):P=e[12];let w;e[13]!==u||e[14]!==i?(w=(je=St(i,u))==null?void 0:je.attachments,e[13]=u,e[14]=i,e[15]=w):w=e[15];const{handleFileAccepted:$}=$s(c,h,P,"drag",A,w,N?C:void 0,y),lt=Ke(),{file_uploads:Me,image_uploads:ye}=st();let K;e:{if(ye==="allowed"&&Me!=="allowed"){K=Ot;break e}else if(ye==="blocked"&&Me==="blocked"){let B;e[16]===Symbol.for("react.memo_cache_sentinel")?(B=[],e[16]=B):B=e[16],K=B;break e}else if(!m&&k){let B;e[17]!==u||e[18]!==i?(B=Ee(i,u),e[17]=u,e[18]=i,e[19]=B):B=e[19],K=B;break e}let U;e[20]!==u||e[21]!==i?(U=At(i,u),e[20]=u,e[21]=i,e[22]=U):U=e[22],K=U}const G=Rt(K),ue=!v||R||lt!=null;let z;e[23]!==c||e[24]!==o||e[25]!==h?(z=U=>Os(U,c,o,h,m),e[23]=c,e[24]=o,e[25]=h,e[26]=z):z=e[26];let se;e[27]!==G||e[28]!==$||e[29]!==r||e[30]!==f||e[31]!==ue||e[32]!==z?(se=T({maxFiles:f,disabled:ue,noClick:!0,noKeyboard:r,onDropAccepted:$,onDropRejected:z,multiple:!0,maxSize:It},G),e[27]=G,e[28]=$,e[29]=r,e[30]=f,e[31]=ue,e[32]=z,e[33]=se):se=e[33];const{getRootProps:Y,isDragActive:fe}=ks(se);let L,H,W;if(e[34]!==n||e[35]!==a||e[36]!==G||e[37]!==Y||e[38]!==fe){const U=Bs(G);e[42]!==a||e[43]!==Y?(L=Y({className:a}),e[42]=a,e[43]=Y,e[44]=L):L=e[44],H=n,W=fe&&s.jsx(Ut,{asChild:!0,children:s.jsxs(qs,{className:"fixed inset-0",inert:!0,children:[s.jsx(bs,{}),s.jsx("h3",{children:s.jsx(E,T({},De.dragInstructions))}),s.jsx("h4",{className:"w-2/3 text-center",children:U.length>0?U.join(", "):s.jsx(E,T({},De.dragAllAccepted))})]})}),e[34]=n,e[35]=a,e[36]=G,e[37]=Y,e[38]=fe,e[39]=L,e[40]=H,e[41]=W}else L=e[39],H=e[40],W=e[41];let oe;return e[45]!==L||e[46]!==H||e[47]!==W?(oe=s.jsxs("div",ge(T({},L),{children:[H,W]})),e[45]=L,e[46]=H,e[47]=W,e[48]=oe):oe=e[48],oe}function Ls(t){return t.files}function Os(t,e,a,n,l){const{file:i}=t[0];if(!l&&i&&!(i.type.startsWith("image/")||Dt(i.name))){te({fallbackScreenHint:"login",skipLoginModal:!1});return}Ds(t,e,a,n)}function Ds(t,e,a,n){const{errors:l}=t[0],i=jt(n);l.forEach(r=>{const c=Us(r);typeof c=="string"?a.danger(c,{hasCloseButton:!0,loggingTitle:"File upload error",loggingDescription:c,toastId:"file_upload_error"}):a.danger(e.formatMessage(c,{size:Pt,maxNum:i}),{hasCloseButton:!0,loggingTitle:c.defaultMessage||"File upload error",loggingDescription:c.defaultMessage||"File upload error",toastId:"file_upload_error"})})}function $s(t,e,a,n,l,i,r,c){"use forget";const o=D.c(16),p=Ye().flags,d=Ze(),m=yt();let x;o[0]===Symbol.for("react.memo_cache_sentinel")?(x=de(),o[0]=x):x=o[0];const k=!x,u=r!=null?r:void 0,_=p==null?void 0:p.includes(Xe.NoAuthEnableFileUploads);let b;o[1]===Symbol.for("react.memo_cache_sentinel")?(b=qe("3602298601"),o[1]=b):b=o[1];const h=b;let v;o[2]!==i||o[3]!==u||o[4]!==l||o[5]!==t||o[6]!==a||o[7]!==_||o[8]!==m||o[9]!==d||o[10]!==n||o[11]!==c||o[12]!==e?(v=async(f,R)=>{ee.logEvent("Upload File",{client:"web",eventSource:n,intent:e.toString()});const A=l!=null?await l():void 0,j=await Promise.all(f.map(Vs)),C=new Set(j.map(Ws).filter(Hs)),N=j.map(zs).filter(Gs);C.forEach(F=>$t(F,t,d)),N.length>0&&N.forEach(F=>{const y=T(T({gizmoId:A,uploadSource:c},_&&{isUnauthenticated:k}),u&&u.length>0?{contextScopes:u}:{}),P=[m,Ne(F),F,e,a,t,d,y,i];if(e===Qe.Retrieval){let w=Promise.resolve(),$=Promise.resolve();h?$=he.uploadFile(m,"".concat(Ne(F),":lib"),F,e,a,t,d,y,i,void 0,!0,!0):w=he.uploadFile(...P,void 0,!1,h,!1),Promise.all([w,$])}else he.uploadFile(...P)})},o[2]=i,o[3]=u,o[4]=l,o[5]=t,o[6]=a,o[7]=_,o[8]=m,o[9]=d,o[10]=n,o[11]=c,o[12]=e,o[13]=v):v=o[13];const g=v;let M;return o[14]!==g?(M={handleFileAccepted:g},o[14]=g,o[15]=M):M=o[15],M}function Gs(t){return t!==void 0}function zs(t){const{file:e}=t;return e}function Hs(t){return t!==void 0}function Ws(t){return"failureReason"in t?t.failureReason:void 0}function Vs(t){return Gt(t)}var $e;const qs=Mt.div($e||($e=Ce(['pointer-events-none absolute z-50 inset-0 flex gap-2 flex-col justify-center items-center after:contents-[""] after:absolute after:opacity-80 after:z-[-1] after:bg-token-main-surface-primary after:inset-0'])));export{qs as D,Be as F,to as M,so as O,oo as P,Bs as a,Es as b,Cs as c,ao as d,pe as g,Ds as h,$s as u};
//# sourceMappingURL=9bee0952-fxdbwwdrjo8v2f2i.js.map
