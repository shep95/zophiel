var X=Object.defineProperty,G=Object.defineProperties;var J=Object.getOwnPropertyDescriptors;var R=Object.getOwnPropertySymbols;var Q=Object.prototype.hasOwnProperty,U=Object.prototype.propertyIsEnumerable;var M=(t,e,r)=>e in t?X(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,V=(t,e)=>{for(var r in e||(e={}))Q.call(e,r)&&M(t,r,e[r]);if(R)for(var r of R(e))U.call(e,r)&&M(t,r,e[r]);return t},N=(t,e)=>G(t,J(e));import{c as H,j as o,r as L,b as Y}from"./2340486e-n0khdanno9uzbccp.js";import{b as v,dm as z,i4 as q,vT as K,aD as Z,J as w,vU as S,ow as ee,ov as se}from"./4813494d-di0bpg5zidu9s57f.js";import{kR as te,ig as re,kT as ne,mx as D,e6 as oe,e7 as ae,kS as le,dh as ce,my as y,mz as ie,mA as de,e5 as E,e8 as ue,bS as fe}from"./1a7ebd5f-ihenykhpblfwilpu.js";import{T as O}from"./5373c7f8-l2w8wwucxovdtok0.js";const pe=t=>{"use forget";const e=H.c(9),{cardId:r}=t;let n;e[0]!==r?(n=()=>ne().find(P=>P.id===r),e[0]=r,e[1]=n):n=e[1];const a=v(n),s=v(me),{data:c}=te(a?null:r),u=a!=null?a:c;if(!u&&!s)return null;const f=u!=null&&u.conversation_id?u.conversation_id:s||void 0;if(!f)return null;let i;e[2]!==f?(i=z(f),e[2]=f,e[3]=i):i=e[3];let d;e[4]!==i?(d=o.jsx(O,{conversation:i,className:"min-h-0! flex-1",hideDisclaimer:!0}),e[4]=i,e[5]=d):d=e[5];let p;return e[6]!==f||e[7]!==d?(p=o.jsx(D,{clientThreadId:f,threadContent:d}),e[6]=f,e[7]=d,e[8]=p):p=e[8],p};function me(){return re()}const be=()=>{"use forget";const t=H.c(10),e=v(xe);let r,n;if(t[0]!==e?(r=()=>{ae().logEventWithStatsig("(Web) FYP Feedback Conversation Shown","chatgpt_web_fyp_feedback_conversation_shown",{feedback_conversation_id:e})},n=[e],t[0]=e,t[1]=r,t[2]=n):(r=t[1],n=t[2]),L.useEffect(r,n),!e)return null;let a;t[3]!==e?(a=z(e),t[3]=e,t[4]=a):a=t[4];let s;t[5]!==a?(s=o.jsx(O,{conversation:a,className:"min-h-0! flex-1",hideDisclaimer:!0,withCustomCompletionParams:ke}),t[5]=a,t[6]=s):s=t[6];let c;return t[7]!==e||t[8]!==s?(c=o.jsx(D,{clientThreadId:e,shouldScrollToBottom:!0,threadContent:s}),t[7]=e,t[8]=s,t[9]=c):c=t[9],c};function xe(){return oe()}function ke(t){var e;return N(V({},t),{extraStreamParams:N(V({},t.extraStreamParams),{pulseCompletionParams:N(V({},(e=t.extraStreamParams)==null?void 0:e.pulseCompletionParams),{type:"feedback-conversation"})})})}function Ie(t){"use forget";const e=H.c(36),{type:r,setWidth:n}=t,a=r===void 0?"sidebar":r,s=v(ye),{closeView:c}=le(),u=Y(),f=L.useRef(null),{goBack:i,canGoBack:d}=ce();let p;e[0]!==i?(p=()=>{E().openFeedbackView({type:ue.Preview}),i()},e[0]=i,e[1]=p):p=e[1];const P=p,W=he;let g;e[2]!==c||e[3]!==(s==null?void 0:s.type)?(g=()=>{(s==null?void 0:s.type)===y.Card?c():(s==null?void 0:s.type)===y.Feedback&&E().closeFeedbackView()},e[2]=c,e[3]=s==null?void 0:s.type,e[4]=g):g=e[4];const m=g;let j,_;e[5]!==n?(j=()=>q(()=>W(),l=>n==null?void 0:n(l),{fireImmediately:!0}),_=[n],e[5]=n,e[6]=j,e[7]=_):(j=e[6],_=e[7]),L.useEffect(j,_);let $;e[8]!==(s==null?void 0:s.cardId)||e[9]!==(s==null?void 0:s.type)?($=(s==null?void 0:s.type)===y.Card?o.jsx(pe,{cardId:s==null?void 0:s.cardId}):(s==null?void 0:s.type)===y.Feedback?o.jsx(be,{}):null,e[8]=s==null?void 0:s.cardId,e[9]=s==null?void 0:s.type,e[10]=$):$=e[10];const A=$;let I;e[11]!==s?(I=(s==null?void 0:s.type)===y.Feedback?o.jsx(ie,{feedbackState:s.feedbackState,className:"backdrop-blur-xl backdrop-filter"}):(s==null?void 0:s.type)===y.Card?o.jsx(de,{className:"backdrop-blur-xl backdrop-filter"}):null,e[11]=s,e[12]=I):I=e[12];const B=I;let b;e[13]!==d||e[14]!==P?(b=d&&o.jsx(K,{onClick:P,className:"pointer-events-auto"}),e[13]=d,e[14]=P,e[15]=b):b=e[15];let x;e[16]!==m?(x=o.jsx(Z,{className:"backdrop-blur-xl backdrop-filter",onClick:m}),e[16]=m,e[17]=x):x=e[17];let k;e[18]!==B||e[19]!==x?(k=o.jsxs("div",{className:"pointer-events-auto ms-auto flex items-center gap-1",children:[B,x]}),e[18]=B,e[19]=x,e[20]=k):k=e[20];let C;e[21]!==k||e[22]!==b?(C=o.jsxs("div",{className:"sticky top-0 z-50 flex items-center p-2",children:[b,k]}),e[21]=k,e[22]=b,e[23]=C):C=e[23];let F;e[24]!==A||e[25]!==C?(F=o.jsxs("div",{className:"relative flex h-full flex-col overflow-auto",children:[C,A]}),e[24]=A,e[25]=C,e[26]=F):F=e[26];const h=F;switch(a){case"sidebar":{let l;e[27]!==u?(l=u.formatMessage({id:"pulse.sidebar.title",defaultMessage:"Pulse"}),e[27]=u,e[28]=l):l=e[28];let T;return e[29]!==h||e[30]!==m||e[31]!==l?(T=o.jsx(fe,{handleClose:m,renderLeading:Ce,ariaLabel:l,scrollMode:"content-only",children:h},"pulse-sidebar"),e[29]=h,e[30]=m,e[31]=l,e[32]=T):T=e[32],T}case"modal":{let l;return e[33]!==h||e[34]!==m?(l=o.jsx(w,{testId:"modal-chat-screen-pulse-flyout",className:"relative max-w-[500px]",size:"custom",type:"success",position:"end",noPadding:!0,contentRef:f,visuallyHiddenHeader:!0,showCloseButton:!0,isOpen:!0,onClose:m,children:h},"pulse-modal"),e[33]=h,e[34]=m,e[35]=l):l=e[35],l}}}function Ce(){return null}function he(){return S()?"700px":ee()?"500px":(se(),"400px")}function ye(){return E().viewState$()}export{Ie as P};
//# sourceMappingURL=de6c4a91-hmoz2bxnei4jc02o.js.map
