var R=Object.defineProperty,B=Object.defineProperties;var F=Object.getOwnPropertyDescriptors;var C=Object.getOwnPropertySymbols;var G=Object.prototype.hasOwnProperty,O=Object.prototype.propertyIsEnumerable;var I=(t,s,a)=>s in t?R(t,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[s]=a,c=(t,s)=>{for(var a in s||(s={}))G.call(s,a)&&I(t,a,s[a]);if(C)for(var a of C(s))O.call(s,a)&&I(t,a,s[a]);return t},w=(t,s)=>B(t,F(s));import{b as U,H as T,j as e,M as l,d as V}from"./2340486e-n0khdanno9uzbccp.js";import{u as Y}from"./ac5dd3e8-pe3gotr981ye4uf4.js";import{w as z,x as K,I as Q,y as X,z as J}from"./1a7ebd5f-ihenykhpblfwilpu.js";import{de as Z,dd as $,bo as L,hM as ee,h as ae}from"./4813494d-di0bpg5zidu9s57f.js";const se=128,te="workspace-discoverability-display-name";function de({workspaceId:t}){var D,M;const s=U(),{data:a,isPending:S}=Z(t),{mutateAsync:y,isPending:n}=z(t),{mutateAsync:P,isPending:f}=K(t),b=$(),N=(D=b==null?void 0:b.email)==null?void 0:D.split("@")[1],p=!!(a!=null&&a.workspace_discoverable),W=(a==null?void 0:a.auto_accept_requests)===!0,d=(a==null?void 0:a.use_workspace_name_for_discovery)===!0,r=d?"":(M=a==null?void 0:a.public_display_name)!=null?M:"",_=Y(),[k,j]=T.useState(""),[x,u]=T.useState(!1);if((a==null?void 0:a.support_workspace_discovery)===!1)return null;const q=x?k:r,v=k.trim(),g=!x||v===r.trim(),h=S,A=h||n||f,E=h||f,H=!n&&!d&&(x?k.trim()!=="":r.trim()!=="");return e.jsx(Q,{title:e.jsx(l,c({},i.discoveryTitle)),body:N?e.jsx(l,w(c({},i.discoveryBodyWithDomain),{values:{domain:N}})):e.jsx(l,c({},i.discoveryBodyGeneric)),toggle:e.jsx(L,{disabled:A,checked:p,onCheckedChange:async o=>{await y({value:o,public_display_name:r===""?null:r,use_workspace_name_for_discovery:d,action:"toggle"}),o||u(!1)},"aria-label":s.formatMessage(i.discoveryToggleLabel)}),disabled:h,children:p&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"text-token-text-primary text-base font-semibold",children:e.jsx(l,c({},i.autoAcceptLabel))}),e.jsx(L,{disabled:E,checked:W,onCheckedChange:async o=>{await P({autoAcceptRequests:o})},"aria-label":s.formatMessage(i.autoAcceptToggleLabel)})]}),e.jsx("div",{className:"text-token-text-secondary mb-4 text-xs",children:e.jsx(l,c({},i.autoAcceptHelp))}),e.jsxs("div",{className:"w-full",children:[e.jsx("label",{htmlFor:"public_display_name",id:te,className:"text-token-text-primary mb-1 block scroll-mt-24 text-base font-semibold",children:e.jsx(l,c({},i.publicDisplayNameLabel))}),e.jsx("div",{className:"text-token-text-secondary mb-2 text-xs",children:e.jsx(l,w(c({},i.publicDisplayNameHelp),{values:{workspaceName:_}}))}),e.jsx("div",{className:"mb-2",children:e.jsx(X,{id:"use-workspace-name-for-discovery",checked:d,disabled:A,onChange:async o=>{const m=o.currentTarget.checked;await y({value:p,public_display_name:m?null:r||null,use_workspace_name_for_discovery:m,action:"name"}),m&&u(!1)},label:e.jsx("span",{className:"text-sm",children:e.jsx(l,c({},i.workspaceNameSameAsCheckbox))})})}),!d&&e.jsxs(e.Fragment,{children:[e.jsx(J,{name:"public_display_name",ariaLabel:!1,placeholder:_,maxLength:se,value:q,onChange:o=>{j(o.target.value),u(!0)},insideContainerChildren:H?e.jsx("button",{type:"button",className:"text-token-text-tertiary hover:text-token-text-secondary absolute end-0 top-1/2 -translate-y-1/2 pe-1","aria-label":s.formatMessage(i.clearToWorkspaceNameAria),onClick:()=>{j(""),u(!0)},children:e.jsx(ee,{className:"icon-sm"})}):null}),e.jsx("div",{className:"mt-2 flex justify-end",children:e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("button",{className:ae("disabled:pointer-events-none disabled:cursor-auto disabled:hover:bg-transparent",n||g?"btn btn-secondary":"btn btn-primary"),disabled:n||g,"aria-busy":n||void 0,onClick:async()=>{if(n||g)return;const o=v===""?null:v;await y({value:p,public_display_name:o,use_workspace_name_for_discovery:o==null,action:"name"}),u(!1)},children:e.jsx(l,c({},i.saveDisplayNameCta))})})})]})]})]})})}const i=V({discoveryTitle:{id:"workspaceIdentity.discoveryTitle",defaultMessage:"Enable workspace discovery"},discoveryBodyGeneric:{id:"workspaceIdentity.discoveryBodyGeneric",defaultMessage:"Allow users with your email domain and your workspace verified domains to find and request to join this workspace."},discoveryBodyWithDomain:{id:"workspaceIdentity.discoveryBodyWithDomain",defaultMessage:"Allow users with the email domain {domain} and your workspace verified domains to find and request to join this workspace."},discoveryToggleLabel:{id:"workspaceIdentity.discoveryToggleLabel",defaultMessage:"Enable workspace discovery"},publicDisplayNameLabel:{id:"workspaceIdentity.publicDisplayNameLabel",defaultMessage:"Discoverable name"},autoAcceptLabel:{id:"workspaceIdentity.autoAcceptLabel",defaultMessage:"Automatically accept join requests"},autoAcceptToggleLabel:{id:"workspaceIdentity.autoAcceptToggleLabel",defaultMessage:"Toggle automatic acceptance of join requests"},autoAcceptHelp:{id:"workspaceIdentity.autoAcceptHelp",defaultMessage:"When on, users who request to join your workspace are added automatically. Each new member is billed as a seat."},saveDisplayNameCta:{id:"workspaceIdentity.saveDisplayNameCta",defaultMessage:"Save"},publicDisplayNameHelp:{id:"workspaceIdentity.publicDisplayNameHelp",defaultMessage:"This is what users will see when they request access to this workspace."},clearToWorkspaceNameAria:{id:"workspaceIdentity.clearToWorkspaceNameAria",defaultMessage:"Clear and use workspace name"},workspaceNameSameAsCheckbox:{id:"workspaceIdentity.workspaceNameSameAsCheckbox",defaultMessage:"Same as workspace name"}});export{de as D,te as W};
//# sourceMappingURL=ff3e4ba2-c0xq100jmjeb1o5i.js.map
