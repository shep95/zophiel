const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/df4a2937-nsmatvmw5ipx6za1.js","assets/2340486e-n0khdanno9uzbccp.js","assets/4813494d-di0bpg5zidu9s57f.js","assets/root-jvstnck2.css","assets/1a7ebd5f-ihenykhpblfwilpu.js","assets/conversation-small-dnpfu486.css","assets/16d1c905-dr9kvinvs53n9t17.js","assets/4b303e9e-j4t54vnx5tc5zz5q.js","assets/7bce51e5-d3urq6cpyoxry80a.js","assets/7ea2afc2-pek00uda3j1mubqf.js","assets/64696494-o6c5oajkrzkue30b.js","assets/a78f4c52-cw7jzavtuf7x7wvs.js","assets/6ed44741-mr6xaahv9wxsjwsm.js"])))=>i.map(i=>d[i]);
var Rt=Object.defineProperty,Dt=Object.defineProperties;var Ht=Object.getOwnPropertyDescriptors;var Oe=Object.getOwnPropertySymbols;var jt=Object.prototype.hasOwnProperty,bt=Object.prototype.propertyIsEnumerable;var St=(r,e,a)=>e in r?Rt(r,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):r[e]=a,N=(r,e)=>{for(var a in e||(e={}))jt.call(e,a)&&St(r,a,e[a]);if(Oe)for(var a of Oe(e))bt.call(e,a)&&St(r,a,e[a]);return r},xt=(r,e)=>Dt(r,Ht(e));var Ct=(r,e)=>{var a={};for(var t in r)jt.call(r,t)&&e.indexOf(t)<0&&(a[t]=r[t]);if(r!=null&&Oe)for(var t of Oe(r))e.indexOf(t)<0&&bt.call(r,t)&&(a[t]=r[t]);return a};import{c as V,r as Ce,j as o,M as O,d as yt,_ as Qe,b as De,h as $t,m as Ft}from"./2340486e-n0khdanno9uzbccp.js";import{u as Ut,s as zt}from"./6fd89734-d6icu94x1k3basy7.js";import{h as Ze,P as Gt,rq as Vt,rr as Wt,bD as qt,fa as F,bp as Xe,pq as Ve,be as At,ej as We,b as H,gw as Kt,ol as Jt,gv as qe,hO as Yt,l as Re,aC as Qt,fL as G,g6 as Zt,vN as Xt,vO as es,qK as ts,vP as ss,vQ as os,cB as ue,aS as Fe,aT as Ue,l8 as ns,e8 as as,e$ as is,gr as Ie,lT as rs,qN as ls,vR as cs,am as _e,fV as ds,v as wt,dc as us,cO as Be,cV as ms,tT as Tt,dm as fs,gp as hs,dd as gs,eH as ps,dp as Ss,gK as js,kA as bs,e as xs,n4 as Cs,hk as _s,ak as vs,qo as Ps,hp as ks,n$ as Ms,e5 as ys,H as As,bf as ws,li as Ts,bh as Is,g4 as _t,eg as Ns,ov as Es,vS as Ls,T as It,dq as ze,hm as Os,cT as Ge,cW as Bs,cU as Rs,nc as Ds}from"./4813494d-di0bpg5zidu9s57f.js";import{mb as Hs,kP as $s,mc as Fs,md as vt,ar as Nt,me as Et,mf as et,mg as Us,mh as zs,fq as Gs,_ as Vs,dZ as Ws,mi as qs,mj as Lt,mk as Ks,kB as Ot,l as Js,A as Ke,$ as Je,kf as Ys,o as Qs,cL as Pt,ml as Zs,iR as Xs,g3 as eo,K as to,a0 as so,mm as oo,mn as no,b9 as Bt,mo as ao,mp as io,j1 as ro,mq as kt,mr as lo,ms as co,L as uo,as as mo,iJ as fo,N as ho}from"./1a7ebd5f-ihenykhpblfwilpu.js";import{buildConversationResponse as go,GizmoConversationOptionsDropdown as po}from"./0edf3897-hr7yxyvq54jqn6lw.js";import{P as So}from"./e9c129e0-o7eduxghnyt7lxhc.js";import{u as jo}from"./b81d67c1-g85xaexv7seu9n1r.js";import{b as bo}from"./1e924491-ntzhugqpgk0spyau.js";import{P as xo}from"./97587f90-ob9hx1q3ilf6g3xt.js";function Co(r){"use forget";const e=V.c(38),{conversationMode:a}=r;let t;e[0]!==a?(t={conversationMode:a},e[0]=a,e[1]=t):t=e[1];const{isAdultSearchEnabled:l,handleToggleSetting:i,isLoading:n}=Ut(t),u=Ce.useRef(!1);let j,m;e[2]!==l?(j=()=>{u.current||(u.current=!0,Gt.logStructuredEvent(Vt,{step:Wt.ATLAS_SAFE_SEARCH_TOGGLE_ACTION_STEP_SHOW,fromEnabled:!l}))},m=[l],e[2]=l,e[3]=j,e[4]=m):(j=e[3],m=e[4]),Ce.useEffect(j,m);let p;e[5]===Symbol.for("react.memo_cache_sentinel")?(p=Ze("flex min-w-[155px] items-center justify-between rounded-full p-3 whitespace-nowrap","hover:bg-token-text-secondary text-token-bg-primary bg-token-text-primary focus-visible:bg-token-text-secondary!","dark:bg-token-text-secondary! dark:hover:bg-token-text-primary! dark:focus-visible:bg-token-text-primary!"),e[5]=p):p=e[5];let f;e[6]===Symbol.for("react.memo_cache_sentinel")?(f=o.jsx(O,N({},de.matureContent)),e[6]=f):f=e[6];let x;e[7]!==l||e[8]!==n?(x=!n&&o.jsxs("span",{className:"text-token-text-tertiary dark:text-token-bg-primary/60 whitespace-pre",children:[" ",l?o.jsx(O,N({},de.off)):o.jsx(O,N({},de.on))]}),e[7]=l,e[8]=n,e[9]=x):x=e[9];let w;e[10]!==x?(w=o.jsxs("span",{className:"flex",children:[f,x]}),e[10]=x,e[11]=w):w=e[11];let _;e[12]!==n?(_=o.jsx("div",{className:"text-token-text-tertiary dark:text-token-bg-primary/60 min-w-[16px]",children:n?o.jsx(qt,{className:"icon-sm"}):o.jsx(Hs,{className:"icon-md"})}),e[12]=n,e[13]=_):_=e[13];let s;e[14]!==w||e[15]!==_?(s=o.jsxs(F.Trigger,{color:"primary",className:p,children:[w,_]}),e[14]=w,e[15]=_,e[16]=s):s=e[16];const S=l?"off":"on",h=l?"default":"selected";let v,T;e[17]===Symbol.for("react.memo_cache_sentinel")?(v=o.jsx(O,N({},de.on)),T=o.jsx(O,N({},de.onDescription)),e[17]=v,e[18]=T):(v=e[17],T=e[18]);let P;e[19]!==i?(P=()=>i(!1),e[19]=i,e[20]=P):P=e[20];let C;e[21]!==h||e[22]!==P?(C=o.jsx(F.RadioItem,{color:h,value:"on",label:v,secondary:T,onClick:P}),e[21]=h,e[22]=P,e[23]=C):C=e[23];const y=l?"selected":"default";let k,I;e[24]===Symbol.for("react.memo_cache_sentinel")?(k=o.jsx(O,N({},de.off)),I=o.jsx(O,N({},de.offDescription)),e[24]=k,e[25]=I):(k=e[24],I=e[25]);let M;e[26]!==i?(M=()=>i(!0),e[26]=i,e[27]=M):M=e[27];let b;e[28]!==y||e[29]!==M?(b=o.jsx(F.RadioItem,{color:y,value:"off",label:k,secondary:I,onClick:M}),e[28]=y,e[29]=M,e[30]=b):b=e[30];let A;e[31]!==S||e[32]!==C||e[33]!==b?(A=o.jsx(F.Portal,{children:o.jsx(F.Content,{size:"auto",children:o.jsxs(F.RadioGroup,{value:S,children:[C,b]})})}),e[31]=S,e[32]=C,e[33]=b,e[34]=A):A=e[34];let E;return e[35]!==A||e[36]!==s?(E=o.jsxs(F.Root,{children:[s,A]}),e[35]=A,e[36]=s,e[37]=E):E=e[37],E}const de=yt({matureContent:{id:"GICB3y",defaultMessage:"Safe search"},on:{id:"mC2XW7",defaultMessage:"On"},onDescription:{id:"+P7pkx",defaultMessage:"Attempt to hide explicit content"},off:{id:"HnMYit",defaultMessage:"Off"},offDescription:{id:"P/OfYZ",defaultMessage:"Allow explicit links"}}),_o=Xe(()=>Qe(()=>import("./df4a2937-nsmatvmw5ipx6za1.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8]))),Mt=Xe(()=>Qe(()=>import("./7ea2afc2-pek00uda3j1mubqf.js"),__vite__mapDeps([9,1,2,3,4,5,10,6,11,7])).then(r=>r.PotionMemoriesModal)),vo=Xe(()=>Qe(()=>import("./6ed44741-mr6xaahv9wxsjwsm.js"),__vite__mapDeps([12,1,2,3])).then(r=>r.PotionProjectInstructionsModal)),Po=null;function ko(r){"use forget";var b;const e=V.c(25);let a,t;e[0]!==r?(b=r,{className:t}=b,a=Ct(b,["className"]),e[0]=r,e[1]=a,e[2]=t):(a=e[1],t=e[2]);const l=De(),i=wt(),{eligible:n}=Js(Ke.hasSeenSharedProjectsTooltip),u=Ys,j=Ke,m="bottom",p="end",f="w-full",x=0,w="z-100",_="w-full",s="bright",S=!0,h="new";let v;e[3]!==l?(v=l.formatMessage({id:"YJ1BcI",defaultMessage:"Invite others to projects"}),e[3]=l,e[4]=v):v=e[4];const T=i!=null&&i.isWorkspaceAccount()?l.formatMessage({id:"7i6HBq",defaultMessage:"Build reports, plan client work, or do research — together."}):l.formatMessage({id:"CO0hjY",defaultMessage:"Plan adventures, campaigns, workouts, and more — together."});let P;e[5]!==t?(P=Ze("mx-2",t),e[5]=t,e[6]=P):P=e[6];let C;e[7]!==l?(C=l.formatMessage(G.projectShareButton),e[7]=l,e[8]=C):C=e[8];let y;e[9]!==l?(y=l.formatMessage(G.projectShareButton),e[9]=l,e[10]=y):y=e[10];let k;e[11]!==y?(k=o.jsx("span",{className:"max-md:hidden",children:y}),e[11]=y,e[12]=k):k=e[12];let I;e[13]!==a||e[14]!==P||e[15]!==C||e[16]!==k?(I=o.jsx(_e,xt(N({className:P,color:"ghost",icon:Je,label:C},a),{children:k})),e[13]=a,e[14]=P,e[15]=C,e[16]=k,e[17]=I):I=e[17];let M;return e[18]!==u||e[19]!==n||e[20]!==j.hasSeenSharedProjectsTooltip||e[21]!==v||e[22]!==T||e[23]!==I?(M=o.jsx(u,{announcementKey:j.hasSeenSharedProjectsTooltip,show:n,side:m,align:p,className:f,sideOffset:x,contentClassName:w,childrenWrapperClassName:_,theme:s,dismissOnOutsideClick:S,badge:h,title:v,description:T,onDismiss:Mo,children:I}),e[18]=u,e[19]=n,e[20]=j.hasSeenSharedProjectsTooltip,e[21]=v,e[22]=T,e[23]=I,e[24]=M):M=e[24],M}function Mo(){return Qs(Ke.hasSeenSharedProjectsTooltip)}function yo(r){"use forget";var Te,Le,tt,st,ot,nt,at,it,rt,lt,ct,dt,ut,mt,ft,ht,gt,pt;const e=V.c(124),{clientThreadId:a,gizmoId:t,serverThreadId:l}=r,i=De(),n=$t(),u=At();let j;e[0]!==u||e[1]!==t?(j=Ve(u,t),e[0]=u,e[1]=t,e[2]=j):j=e[2];const m=j;let p;e[3]!==t?(p=c=>Nt(c==null?void 0:c.mode,t),e[3]=t,e[4]=p):p=e[4];const f=We(a,p),x=jo(a),w=H(Eo);let _;e[5]!==m?(_=()=>m.gizmo$(),e[5]=m,e[6]=_):_=e[6];const s=H(_);let S;e[7]!==m?(S=()=>Xt(m)(),e[7]=m,e[8]=S):S=e[8];const h=H(S),v=!l;let T;e[9]!==m?(T=()=>es(m)(),e[9]=m,e[10]=T):T=e[10];const P=H(T);let C;e[11]!==m?(C=()=>ts(m)(),e[11]=m,e[12]=C):C=e[12];const y=H(C);let k;e[13]!==m?(k=()=>ss(m)(),e[13]=m,e[14]=k):k=e[14];const I=H(k);let M;e[15]!==m?(M=()=>os(m)(),e[15]=m,e[16]=M):M=e[16];const b=H(M),{canEdit:A}=$s(s!=null?s:void 0);let E;if(e[17]!==((Le=(Te=s==null?void 0:s.gizmo)==null?void 0:Te.author)==null?void 0:Le.user_id)||e[18]!==((st=(tt=s==null?void 0:s.gizmo)==null?void 0:tt.sharing)==null?void 0:st.subjects)){E=new Set;const c=(nt=(ot=s==null?void 0:s.gizmo)==null?void 0:ot.author)==null?void 0:nt.user_id;c&&E.add(c);for(const g of(rt=(it=(at=s==null?void 0:s.gizmo)==null?void 0:at.sharing)==null?void 0:it.subjects)!=null?rt:[])g.type===Kt.USER&&g.user_id&&E.add(g.user_id);e[17]=(ct=(lt=s==null?void 0:s.gizmo)==null?void 0:lt.author)==null?void 0:ct.user_id,e[18]=(ut=(dt=s==null?void 0:s.gizmo)==null?void 0:dt.sharing)==null?void 0:ut.subjects,e[19]=E}else E=e[19];const W=E,B=y&&v;let L;e[20]!==s?(L=s?Jt(s):!1,e[20]=s,e[21]=L):L=e[21];const He=L;let me;e[22]!==s?(me=qe(s),e[22]=s,e[23]=me):me=e[23];const R=me;let q;e[24]!==s?(q=Yt(s),e[24]=s,e[25]=q):q=e[25];const Y=q;let D;e[26]!==s?(D=!1,e[26]=s,e[27]=D):D=e[27];const Q=D,ve=Fs(s);let $;e[28]!==i?($=i.formatMessage(vt.connectPrompt),e[28]=i,e[29]=$):$=e[29];const Pe=$;let ke;e[30]===Symbol.for("react.memo_cache_sentinel")?(ke=Re("3871256114"),e[30]=ke):ke=e[30];const $e=!1,fe=((ft=(mt=s==null?void 0:s.gizmo)==null?void 0:mt.author)==null?void 0:ft.user_id)===(w==null?void 0:w.normalizedAccountUserId),Me=He&&v;let he;e[31]!==R?(he=!1,e[31]=R,e[32]=he):he=e[32];const Ne=he;let z;e[33]!==s?(z=()=>{s&&ue(Et,{projectId:s.gizmo.id,projectName:s.gizmo.display.name,onClose:No})},e[33]=s,e[34]=z):z=e[34];const se=z;let ge;e[35]!==s||e[36]!==i?(ge=()=>{s&&ue(et,{submitButtonTitle:i.formatMessage(G.projectSettingsSubmitButton),gizmo:s,onClose:Io,onSuccess:To})},e[35]=s,e[36]=i,e[37]=ge):ge=e[37];const Z=ge;let pe;e[38]!==f||e[39]!==Pe||e[40]!==x?(pe=c=>{c.preventDefault(),Fe.count(Ue.POTION,"medical_records.metrics.request_completion",{source:"project_settings_dropdown",type:"connect_medical_records"});const g=ns(Ks);x({sourceEvent:c,promptMessage:is(Pe,{system_hints:[g]}),completionMetadata:{conversationMode:f!=null?f:{kind:as.PrimaryAssistant},systemHints:[g]}})},e[38]=f,e[39]=Pe,e[40]=x,e[41]=pe):pe=e[41];const X=pe;let ee;e[42]!==a?(ee=c=>{c.preventDefault()},e[42]=a,e[43]=ee):ee=e[43];const Ee=ee;let Se;e[44]!==s||e[45]!==Q||e[46]!==Y?(Se=()=>{if(!s)return;let c=null;Y?c=vo:Q&&(c=Po),c&&ue(c,{gizmo:s,onClose:()=>Ie(c)})},e[44]=s,e[45]=Q,e[46]=Y,e[47]=Se):Se=e[47];const oe=Qt(Se);let ne;e[48]!==s||e[49]!==t||e[50]!==n?(ne=()=>{if(!s)return;const c=()=>n("/",{replace:!0});ue(Us,{gizmoId:t,projectName:s.gizmo.display.name,handleLeaveComplete:c})},e[48]=s,e[49]=t,e[50]=n,e[51]=ne):ne=e[51];const te=ne,ae=wo;let je;e[52]!==t?(je=()=>{ue(_o,{initialGizmoId:t,exclusiveToGizmo:!0,showResetMemoriesButton:!1})},e[52]=t,e[53]=je):je=e[53];const ye=je,ie=((pt=(gt=(ht=s==null?void 0:s.gizmo)==null?void 0:ht.instructions)==null?void 0:gt.length)!=null?pt:0)>0,re=A?ie?G.editInstructionsDropdownLabel:G.addInstructionsDropdownLabel:G.viewOnlyInstructionsDropdownLabel;let U;if(e[54]!==A||e[55]!==re||e[56]!==s||e[57]!==oe||e[58]!==X||e[59]!==Z||e[60]!==ye||e[61]!==te||e[62]!==Ee||e[63]!==se||e[64]!==ie||e[65]!==R||e[66]!==Q||e[67]!==fe||e[68]!==Y||e[69]!==ve||e[70]!==$e||e[71]!==Ne||e[72]!==Me){if(U=[],Y){let c;e[74]===Symbol.for("react.memo_cache_sentinel")?(c=o.jsx(F.Item,{onClick:ae,icon:zs,children:o.jsx(O,{id:"snorlax.header.actions.health-memories",defaultMessage:"View Health memories"})},"saved-memories"),e[74]=c):c=e[74],U.push(c)}if(fe&&!qe(s)){let c;e[78]===Symbol.for("react.memo_cache_sentinel")?(c=o.jsx(O,N({},G.projectSettings)),e[78]=c):c=e[78];let g;e[79]!==Z?(g=o.jsx(F.Item,{onClick:Z,icon:rs,children:c},"edit"),e[79]=Z,e[80]=g):g=e[80],U.push(g)}if((A||ie)&&R){let c;e[83]!==re?(c=o.jsx(O,N({},re)),e[83]=re,e[84]=c):c=e[84];let g;e[85]!==oe||e[86]!==c?(g=o.jsx(F.Item,{onClick:oe,icon:Gs,children:c},"instructions"),e[85]=oe,e[86]=c,e[87]=g):g=e[87],U.push(g)}if(Me){let c;e[88]===Symbol.for("react.memo_cache_sentinel")?(c=o.jsx(O,N({},G.reportProjectButtonLabel)),e[88]=c):c=e[88];let g;e[89]!==se?(g=o.jsx(F.Item,{onClick:se,icon:Vs,children:c},"report"),e[89]=se,e[90]=g):g=e[90],U.push(g)}if(!fe&&!R){let c;e[91]===Symbol.for("react.memo_cache_sentinel")?(c=o.jsx(O,N({},G.leaveProjectDropdownButton)),e[91]=c):c=e[91];let g;e[92]!==te?(g=o.jsx(F.Item,{color:"danger",onClick:te,icon:Ws,children:c},"leave"),e[92]=te,e[93]=g):g=e[93],U.push(g)}if(ve){let c;e[94]===Symbol.for("react.memo_cache_sentinel")?(c=o.jsx(O,N({},vt.connectDropdownLabel)),e[94]=c):c=e[94];let g;e[95]!==X?(g=o.jsx(F.Item,{onClick:X,icon:qs,children:c},"connect-medical-records"),e[95]=X,e[96]=g):g=e[96],U.push(g)}e[54]=A,e[55]=re,e[56]=s,e[57]=oe,e[58]=X,e[59]=Z,e[60]=ye,e[61]=te,e[62]=Ee,e[63]=se,e[64]=ie,e[65]=R,e[66]=Q,e[67]=fe,e[68]=Y,e[69]=ve,e[70]=$e,e[71]=Ne,e[72]=Me,e[73]=U}else U=e[73];const Ae=U;let be;e[100]!==s?(be=()=>{s&&ue(Lt,{gizmo:ls(s),publishedGizmo:s,onClose:Ao})},e[100]=s,e[101]=be):be=e[101];const xe=be;let le,ce;e[102]!==h||e[103]!==y||e[104]!==B||e[105]!==P?(le=()=>{h&&(Fe.count(Ue.PROJECTS,"snorlax_header_actions_shown",{in_shared_projects_gate:Re("773249106")?"true":"false",workspace_allows_sharing:P?"true":"false",is_shared_projects_enabled:y?"true":"false"}),B&&Fe.count(Ue.PROJECTS,"snorlax_header_actions_share_button_shown"))},ce=[h,B,P,y],e[102]=h,e[103]=y,e[104]=B,e[105]=P,e[106]=le,e[107]=ce):(le=e[106],ce=e[107]),Ce.useEffect(le,ce);let K;e[108]!==i?(K=i.formatMessage(G.showProjectDetailsDropdown),e[108]=i,e[109]=K):K=e[109];let d;e[110]!==i?(d=i.formatMessage(G.projectShareButton),e[110]=i,e[111]=d):d=e[111];const J=!s;let we;return e[112]!==Ae||e[113]!==xe||e[114]!==R||e[115]!==W||e[116]!==b||e[117]!==v||e[118]!==I||e[119]!==B||e[120]!==K||e[121]!==d||e[122]!==J?(we={dropdownAriaLabel:K,dropdownOptions:Ae,handleClickShare:xe,isFirstPartyProjectValue:R,memberAccountUserIds:W,monograms:b,onProjectHomePage:v,projectShareLabel:d,shareButtonDisabled:J,shouldShowMonograms:I,showShareProjectButton:B},e[112]=Ae,e[113]=xe,e[114]=R,e[115]=W,e[116]=b,e[117]=v,e[118]=I,e[119]=B,e[120]=K,e[121]=d,e[122]=J,e[123]=we):we=e[123],we}function Ao(){return Ie(Lt)}function wo(){Mt&&ue(Mt,{isOpen:!0,initialContextScope:"HEALTH"})}function To(){Ie(et)}function Io(){return Ie(et)}function No(){return Ie(Et)}function Eo(){return Zt()}function Lo(r){"use forget";const e=V.c(7),{state:a}=r,{handleClickShare:t,memberAccountUserIds:l,monograms:i,projectShareLabel:n,shouldShowMonograms:u}=a;if(!u)return null;let j;e[0]!==l||e[1]!==i?(j=o.jsx(cs,{monograms:i,userAccountUserIds:l}),e[0]=l,e[1]=i,e[2]=j):j=e[2];let m;return e[3]!==t||e[4]!==n||e[5]!==j?(m=o.jsx(_e,{"aria-label":n,className:"bg-transparent! px-0! hover:opacity-90",color:"ghost",onClick:t,children:j}),e[3]=t,e[4]=n,e[5]=j,e[6]=m):m=e[6],m}function Oo(r){"use forget";const e=V.c(3),{state:a}=r,{handleClickShare:t,isFirstPartyProjectValue:l,shareButtonDisabled:i,showShareProjectButton:n}=a;if(!n||l)return null;let u;return e[0]!==t||e[1]!==i?(u=o.jsx(ko,{disabled:i,onClick:t}),e[0]=t,e[1]=i,e[2]=u):u=e[2],u}function Bo(r){"use forget";const e=V.c(5),{state:a}=r,{dropdownAriaLabel:t,dropdownOptions:l,onProjectHomePage:i}=a;if(!i||l.length===0)return null;let n;e[0]!==t?(n=o.jsx(Ot,{"aria-label":t,className:"shrink-0"}),e[0]=t,e[1]=n):n=e[1];let u;return e[2]!==l||e[3]!==n?(u=o.jsx(ds,{side:"top",contentAlign:"end",sideOffset:0,triggerButton:n,size:"auto",children:l}),e[2]=l,e[3]=n,e[4]=u):u=e[4],u}function Ro(r){"use forget";const e=V.c(2),a=yo(r);let t;return e[0]!==a?(t=o.jsxs(o.Fragment,{children:[o.jsx(Lo,{state:a}),o.jsx(Oo,{state:a}),o.jsx(Bo,{state:a})]}),e[0]=a,e[1]=t):t=e[1],t}function Zo({showShareButton:r,showProfileDropdown:e,showConversationPrivacyIndicator:a,clientThreadId:t}){var xe,le,ce,K;const l=At(),i=fs(t),n=hs(t),u=De(),j=gs(),m=Ft();ps.useStoreWithInit({});const[p,f,x,w,_,s,S,h,v]=We(t,d=>{const J=ze.getGizmoId(d);return[ze.hasUserMessage(d),J,Nt(d==null?void 0:d.mode,J),d==null?void 0:d.title,d==null?void 0:d.is_do_not_remember,d==null?void 0:d.isStarred,d==null?void 0:d.continuingFromSharedProjectConversationId,d==null?void 0:d.sharedProjectConversationOwner,mo(d)]}),T=H(()=>{var d;return(d=Ss(i))==null?void 0:d.value}),P=Ce.useMemo(()=>go({clientThreadId:h!=null&&h.id&&S?S:n!=null?n:t,gizmoId:f,conversationTitle:w,conversationAsyncStatus:T,isDoNotRemember:_,isStarred:s,owner:h!=null&&h.id?{user_id:h.id}:null}),[h==null?void 0:h.id,S,n,t,f,w,T,_,s]),C=H(js),y=Tt(),k=bs(t),M=Ce.use(xo)!=null,b=xs(),A=Cs(),E=!b&&C,W=u.formatMessage({id:"GizmoInformation.shareChat",defaultMessage:"Share"}),B=_s(f),L=B?Ve(l,f):null,He=H(()=>{var d;return(d=L==null?void 0:L.gizmo$())==null?void 0:d.gizmo.memory_scope}),me=L&&Ls(He),R=vs(),q=wt(),Y=(le=(xe=q==null?void 0:q.isWorkspaceAccount)==null?void 0:xe.call(q))!=null?le:!1,D=!Be(),{onShare:Q}=to({clientThreadId:t,gizmoId:f,serverThreadId:n!=null?n:void 0}),ve=Ps(),$=H(()=>ks()),Pe=Re("2322626856"),ke=Ms(n),fe=We(t,d=>{var Te;const J=ze.getConversationTurns(d);return Os(J,{title:(Te=d==null?void 0:d.title)!=null?Te:null,threadUpdateTimeMs:(d==null?void 0:d.update_time)!=null?d.update_time*1e3:void 0}).filter(Le=>!Le.isTurnEnded).length})>0,Me=Re("3018147683"),he=ys(f),Ne=so(),z=he?Ve(l,f):null,se=H(()=>{var d;return(d=z==null?void 0:z.isShared$())!=null?d:!1}),ge=H(()=>z==null?void 0:z.serverState$().data),Z=se&&Ne&&n!=null&&!qe(ge),pe=f==null&&S==null,X=n!=null?n:S,ee=X!=null&&(!Y||R!=null),Ee=Ce.useMemo(()=>!D&&r&&!$?As("2874358162").get("open_personalization_button_enabled",!1):!1,[D,r,$]),Se=ws(),oe=Ts(),ne=Se===Is.Research||_t!=null&&oe.has(_t),te=ve.hasAccess&&!D&&r&&!$&&!ne&&!A&&!M&&!b&&(pe||Z)&&!v;let ae=null;te?n!=null?ae=Z?"from-shared-project":"from-conversation":k&&!p&&(ae="new-chat"):ae=null;const[je,ye,ie]=H(()=>[Ns(),Es(),zt(i)]),re=!!((K=(ce=m.state)==null?void 0:ce.newConversationConfig)!=null&&K.startDoNotRemember),U=!!_||re,Ae=!!p,be=!!(U&&p);return o.jsxs(o.Fragment,{children:[!k&&y&&!b&&o.jsx(Ye,{location:"Atlas header"}),ie&&j&&ye&&o.jsx(Co,{conversationMode:x}),Be()?o.jsx(oo,{}):null,Be()&&(R==null?void 0:R.includes("caterpillar"))&&o.jsx(no,{}),f&&B&&o.jsx(Ro,{clientThreadId:t,gizmoId:f,serverThreadId:n!=null?n:S}),!D&&me&&!b&&!$&&!A&&ee&&null,!D&&!f&&!b&&!$&&!A&&Ae&&ee&&null,!D&&!f&&!b&&!$&&!A&&be&&ee&&null,r&&X&&o.jsx(o.Fragment,{children:E?o.jsx(_e,{onClick:Q,icon:Je,label:W,"data-testid":"share-chat-button",color:"ghost",className:"text-token-text-primary hover:bg-token-surface-hover keyboard-focused:bg-token-surface-hover rounded-lg max-sm:hidden",style:{viewTransitionName:"var(--vt_share_chat_wide_button)"},children:W}):o.jsx(It,{label:u.formatMessage({id:"CPEfES",defaultMessage:"Share chat"}),children:o.jsx(Bt,{"data-testid":"share-chat-button",className:"max-sm:hidden",onClick:Q,icon:Je,style:{viewTransitionName:"var(--vt_share_chat_compact_button)"}})})}),o.jsxs("div",{className:"flex items-center",children:[te&&ae==="new-chat"?o.jsx(ao,{type:ae,variant:"default"}):null,!D&&!f&&k&&!M&&!p&&!b&&!A&&!ne&&o.jsx(o.Fragment,{children:o.jsx(io,{clientThreadId:t})}),!D&&!f&&!b&&!$&&!A&&!p&&null,a&&o.jsx("div",{className:"me-2",children:o.jsx(ro,{clientThreadId:t,gizmoId:f})}),Ee?n?o.jsx(kt,{variant:C?"default":"icon"}):p?null:o.jsx(kt,{variant:"icon"}):null,o.jsx(lo,{}),(n!=null||S!=null||$&&Pe&&n!=null)&&!D&&o.jsx(po,{conversation:P,inMainScreen:!0,isActiveConversation:!0,inChatWindow:!0,shouldShowAdultSearchToggle:ie&&!ye,children:o.jsxs("div",{className:"relative overflow-hidden",children:[o.jsx(Ot,{"aria-label":u.formatMessage({id:"9Mk/E3",defaultMessage:"Open conversation options"}),"data-testid":"conversation-options-button"}),(ke.length>0&&Me||fe)&&o.jsx("div",{className:"pointer-events-none absolute inset-0 grid place-items-center",children:o.jsx(co,{size:28,backgroundStrokeClassName:"stroke-black/10 dark:stroke-white/10"})})]})}),je&&(n!=null||S!=null)&&o.jsx(Ye,{location:"Atlas header"}),e&&o.jsx(Do,{clientThreadId:t})]})]})}const Do=r=>{"use forget";const e=V.c(8),{clientThreadId:a}=r,t=us();Pt.markStart("LoginOrProfileMenu"),Pt.markRendered("LoginOrProfileMenu");let l;e[0]!==t?(l=!t&&!Be()&&o.jsx(Ho,{}),e[0]=t,e[1]=l):l=e[1];let i;e[2]!==a||e[3]!==t?(i=!t&&o.jsx(So,{clientThreadId:a}),e[2]=a,e[3]=t,e[4]=i):i=e[4];let n;return e[5]!==l||e[6]!==i?(n=o.jsxs(o.Fragment,{children:[l,i]}),e[5]=l,e[6]=i,e[7]=n):n=e[7],n};function Ye(r){"use forget";const e=V.c(18),{location:a,className:t,testId:l,to:i,state:n}=r,u=De(),j=uo();let m;e[0]!==u?(m=u.formatMessage({id:"OFyxqj",defaultMessage:"New chat"}),e[0]=u,e[1]=m):m=e[1];const p=m;let f;e[2]!==t?(f=Ze("flex",t),e[2]=t,e[3]=f):f=e[3];let x;e[4]!==a?(x=v=>{fo(v,{location:a})},e[4]=a,e[5]=x):x=e[5];const w=i!=null?i:"/",_=n!=null?n:j;let s;e[6]!==w||e[7]!==_?(s={to:w,state:_},e[6]=w,e[7]=_,e[8]=s):s=e[8];let S;e[9]!==p||e[10]!==x||e[11]!==s||e[12]!==l?(S=o.jsx(Bt,{onClick:x,icon:ho,"aria-label":p,"data-testid":l,as:"link",linkProps:s}),e[9]=p,e[10]=x,e[11]=s,e[12]=l,e[13]=S):S=e[13];let h;return e[14]!==p||e[15]!==f||e[16]!==S?(h=o.jsx(It,{label:p,className:f,children:S}),e[14]=p,e[15]=f,e[16]=S,e[17]=h):h=e[17],h}function Xo(r){"use forget";const e=V.c(5),{hideNewChat:a}=r,t=a===void 0?!1:a;if(!Tt())return null;let i;e[0]===Symbol.for("react.memo_cache_sentinel")?(i=o.jsx(bo,{}),e[0]=i):i=e[0];let n;e[1]!==t?(n=!t&&o.jsx(Ye,{location:"Navigation actions"}),e[1]=t,e[2]=n):n=e[2];let u;return e[3]!==n?(u=o.jsxs("div",{className:"flex items-center",children:[i,n]}),e[3]=n,e[4]=u):u=e[4],u}function Ho(r){"use forget";const e=V.c(30);let a;e[0]!==r?(a=r===void 0?{}:r,e[0]=r,e[1]=a):a=e[1];const{callbackUrl:t,skipLoginModal:l,location:i}=a,n=l===void 0?!1:l,u=i===void 0?"Chat header":i;let j;e[2]===Symbol.for("react.memo_cache_sentinel")?(j=Zs(),e[2]=j):j=e[2];const m=j;let p;e[3]===Symbol.for("react.memo_cache_sentinel")?(p=Xs($o.signUpCta),e[3]=p):p=e[3];const f=p;let x;e[4]===Symbol.for("react.memo_cache_sentinel")?(x=eo(),e[4]=x):x=e[4];const w=x,_=ms.ACCESS_FLOW_ENTRY_POINT_CHAT_HEADER;let s;e[5]!==t||e[6]!==u||e[7]!==n?(s=()=>{Ge(N({fallbackScreenHint:"login",callback:L=>{Bs({location:u,provider:L},_)},skipLoginModal:n!=null?n:!1},t?{callbackUrl:t}:{}))},e[5]=t,e[6]=u,e[7]=n,e[8]=s):s=e[8];const S=s;let h;e[9]!==t||e[10]!==u||e[11]!==n?(h=()=>{Ge(N({fallbackScreenHint:"signup",callback:L=>{Rs({location:u,provider:L},_)},skipLoginModal:n!=null?n:!1},t?{callbackUrl:t}:{}))},e[9]=t,e[10]=u,e[11]=n,e[12]=h):h=e[12];const v=h;let T;e[13]!==t||e[14]!==u||e[15]!==n?(T=()=>{Ge(N({fallbackScreenHint:"login_or_signup",callback:L=>{Ds({location:u,provider:L},_)},skipLoginModal:n!=null?n:!1},t?{callbackUrl:t}:{}))},e[13]=t,e[14]=u,e[15]=n,e[16]=T):T=e[16];const P=T;let C;e[17]===Symbol.for("react.memo_cache_sentinel")?(C=o.jsx(O,{id:"B1SN7b",defaultMessage:"Log in"}),e[17]=C):C=e[17];let y;e[18]!==S?(y=o.jsx(_e,{onClick:S,color:"primary","data-testid":"login-button",children:C},"login"),e[18]=S,e[19]=y):y=e[19];const k=y;let I;e[20]===Symbol.for("react.memo_cache_sentinel")?(I=o.jsx(O,N({},f)),e[20]=I):I=e[20];let M;e[21]!==v?(M=o.jsx(_e,{color:"secondary",onClick:v,"data-testid":"signup-button",className:"screen-arch:hidden md:screen-arch:flex max-xs:hidden",children:I},"signup"),e[21]=v,e[22]=M):M=e[22];const b=M;let A;e[23]===Symbol.for("react.memo_cache_sentinel")?(A=o.jsx(O,N({},w)),e[23]=A):A=e[23];let E;e[24]!==P?(E=o.jsx(_e,{color:"primary",onClick:P,"data-testid":"login-or-signup-button",className:"screen-arch:hidden md:screen-arch:flex",children:A},"signup"),e[24]=P,e[25]=E):E=e[25];const W=E;let B;if(e[26]!==k||e[27]!==W||e[28]!==b){const L=m?[W]:[k,b];B=o.jsx("div",{className:"flex items-center justify-center gap-2",children:L}),e[26]=k,e[27]=W,e[28]=b,e[29]=B}else B=e[29];return B}const $o=yt({signUpCta:{id:"P6cySK",defaultMessage:"Sign up"}});export{Zo as C,Do as L,Xo as N,Ho as a};
//# sourceMappingURL=d70d5a79-dclbvm9m6cqvo0bj.js.map
