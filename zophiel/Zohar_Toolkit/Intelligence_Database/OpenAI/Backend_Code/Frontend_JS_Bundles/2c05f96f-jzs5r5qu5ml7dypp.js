var Ke=Object.defineProperty,Oe=Object.defineProperties;var Re=Object.getOwnPropertyDescriptors;var Ae=Object.getOwnPropertySymbols;var Ge=Object.prototype.hasOwnProperty,We=Object.prototype.propertyIsEnumerable;var Ee=(t,e,r)=>e in t?Ke(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,pe=(t,e)=>{for(var r in e||(e={}))Ge.call(e,r)&&Ee(t,r,e[r]);if(Ae)for(var r of Ae(e))We.call(e,r)&&Ee(t,r,e[r]);return t},ue=(t,e)=>Oe(t,Re(e));import{b as fe,h as z,lw as ze,i6 as he,aC as Z,aW as ke,m0 as Ve,pF as He,oM as Qe,P as qe,H as ve,rP as Be,v as ee,de as Ye,gt as _e,l as ye,cO as Ne,mn as Xe,ak as Je,ej as Ie,h2 as Ze,e8 as et,lQ as tt,bh as st,lY as rt,az as ot,dd as nt}from"./4813494d-di0bpg5zidu9s57f.js";import{jt as at,ju as Le,jv as lt,P as k,jw as it,jx as Me,jy as ct,bX as pt,jz as ut,cL as me,jA as mt,jB as dt,t as ft,jC as ht,jD as yt}from"./1a7ebd5f-ihenykhpblfwilpu.js";import{c as Ue,j as f,b as De,r as Y,d as xt,e as St}from"./2340486e-n0khdanno9uzbccp.js";import{u as bt}from"./4b9386ba-i47pf4ceaol018kk.js";const de=4;function $t(t){"use forget";const e=Ue.c(13),{canShowAutocomplete$:r,layoutMode:n,composerController:s,clientThreadId:i}=t,p=fe(r);let l;e[0]===Symbol.for("react.memo_cache_sentinel")?(l=at(),e[0]=l):l=e[0];const a=fe(l.supportsVirtualKeyboardApi$);let w;e[1]!==s?(w=(F,j,M)=>{j&&ze(he(s),M?"".concat(M.title).concat(M.body):"")},e[1]=s,e[2]=w):w=e[2];const m=w;if(!p)return null;const v=n==="center"?"top-full":"bottom-full",P=a&&"keyboard-open:fixed keyboard-open:bottom-[calc(var(--screen-keyboard-height,0px)+var(--composer-height,100px)+12px)] keyboard-open:px-4";let c;e[3]!==v||e[4]!==P?(c=z("absolute start-0 z-[-1] box-border w-full ps-0",v,P),e[3]=v,e[4]=P,e[5]=c):c=e[5];let h;e[6]!==i||e[7]!==s||e[8]!==m?(h=f.jsx(wt,{composerController:s,onChange:m,clientThreadId:i}),e[6]=i,e[7]=s,e[8]=m,e[9]=h):h=e[9];let b;return e[10]!==c||e[11]!==h?(b=f.jsx("div",{className:c,children:h}),e[10]=c,e[11]=h,e[12]=b):b=e[12],b}const Ce=(t,e,r)=>{var p,l,x,a,w,m;const n=(x=(l=(p=t.oneliner)!=null?p:t.body)!=null?l:t.prompt)!=null?x:t.title;if(!n)return null;const s=n,i=ue(pe({},t),{type:k.Autocomplete,title:(a=t.title)!=null?a:s,body:(m=(w=t.body)!=null?w:t.oneliner)!=null?m:"",autocompletionChunks:$e(ct(e),s)});return ve("4031588851").get("personalized_prompts_auto_send",!0)||(i.onSelectOverride=(v,P,c,h)=>r(v,P,c,h)),i};function wt(t){"use forget";const e=Ue.c(82),{composerController:r,onSelect:n,onChange:s,clientThreadId:i}=t;let p;e[0]!==r?(p=Le(r),e[0]=r,e[1]=p):p=e[1];const l=p;let x;e[2]!==l?(x=()=>l.autocompletions$(),e[2]=l,e[3]=x):x=e[3];const a=fe(x);let w;e[4]!==l?(w=()=>l.personalizedAutocompletePool$(),e[4]=l,e[5]=w):w=e[5];const m=fe(w),v=bt(),P=De(),[c,h]=Y.useState(-1),b=lt();let F,j;e[6]!==i||e[7]!==a?(F=()=>{a.length>0&&a.every(Mt)&&it(a,i)},j=[a,i],e[6]=i,e[7]=a,e[8]=F,e[9]=j):(F=e[8],j=e[9]),Y.useEffect(F,j);const M=kt;let _;e[10]!==l.autocompletions$||e[11]!==r||e[12]!==b||e[13]!==s||e[14]!==m||e[15]!==a?(_=o=>{const u=a.filter(Et),E=m.length>0?m:u;if(E.length===0)return;const y=Me(E),T=o===void 0?y:y.filter(Pe=>M(Pe)!==o),I=(T.length>0?T:y).slice(0,de).map(Pe=>Ce(Pe,r,b)).filter(Boolean);l.autocompletions$.set(()=>I),h(-1),s==null||s(-1,!1)},e[10]=l.autocompletions$,e[11]=r,e[12]=b,e[13]=s,e[14]=m,e[15]=a,e[16]=_):_=e[16];const K=Z(_);let N;e[17]!==v||e[18]!==n||e[19]!==K?(N=(o,u,E,y)=>{var T,$;if(u.onSelectOverride)return u.onSelectOverride(o,u,E,y);if(u.type===k.Templated){const I={id:(T=u.id)!=null?T:"dyn-".concat(Date.now()),name:u.title,prompt:u.prompt,description:($=u.title)!=null?$:null};He({prompt:I,referer:"autocomplete-suggestion"}),n==null||n(u,E,y);return}n==null||n(u,E,y),v(o,u,E,y),u.category==="personalized"&&K(M(u))},e[17]=v,e[18]=n,e[19]=K,e[20]=N):N=e[20];const L=N,X=a.length>0,[C,J]=Y.useState(!1);let d;e[21]!==m.length||e[22]!==a?(d=m.length>de&&a.some(At),e[21]=m.length,e[22]=a,e[23]=d):d=e[23];const S=d;let g;e[24]!==s||e[25]!==c||e[26]!==a?(g=()=>{const o=c===a.length-1?0:c+1;return h(o),s==null||s(o,!0,a[o]),!0},e[24]=s,e[25]=c,e[26]=a,e[27]=g):g=e[27];const G=Z(g);let U;e[28]!==s||e[29]!==c||e[30]!==a?(U=()=>{const o=c<=0?a.length-1:c-1;return h(o),s==null||s(o,!0,a[o]),!0},e[28]=s,e[29]=c,e[30]=a,e[31]=U):U=e[31];const O=Z(U);let W;e[32]!==L||e[33]!==c||e[34]!==a?(W=o=>a[c]?(L(o,a[c],a,c),!0):!1,e[32]=L,e[33]=c,e[34]=a,e[35]=W):W=e[35];const A=Z(W);let D,R;e[36]!==r||e[37]!==G||e[38]!==O||e[39]!==A?(D=()=>Qe(he(r),{ArrowDown:G,ArrowUp:O,Enter:A}),R=[r,G,O,A],e[36]=r,e[37]=G,e[38]=O,e[39]=A,e[40]=D,e[41]=R):(D=e[40],R=e[41]),Y.useEffect(D,R);let te,se;e[42]!==C?(te=()=>{if(!C){const o=()=>{J(!0),window.removeEventListener("mousemove",o)};return window.addEventListener("mousemove",o),()=>{window.removeEventListener("mousemove",o)}}},se=[C],e[42]=C,e[43]=te,e[44]=se):(te=e[43],se=e[44]),Y.useEffect(te,se);let re;e[45]!==s?(re=()=>{h(-1),s==null||s(-1,!1),J(!1)},e[45]=s,e[46]=re):re=e[46];let oe;e[47]!==s||e[48]!==a?(oe=[a,s],e[47]=s,e[48]=a,e[49]=oe):oe=e[49],Y.useEffect(re,oe);let ne;e[50]!==l.autocompletions$||e[51]!==r||e[52]!==b||e[53]!==s||e[54]!==m||e[55]!==a?(ne=()=>{const o=a.filter(jt),u=m.length>0?m:o;if(u.length===0)return;qe.logEventWithStatsig("Click Prompt More Ideas Button","chatgpt_prompt_more_ideas_clicked");const E=new Set(o.map(I=>M(I))),y=Me(u),T=y.filter(I=>!E.has(M(I))),$=T.length>=de?T:y;l.autocompletions$.set(()=>$.slice(0,de).map(I=>Ce(I,r,b)).filter(Boolean)),h(-1),s==null||s(-1,!1)},e[50]=l.autocompletions$,e[51]=r,e[52]=b,e[53]=s,e[54]=m,e[55]=a,e[56]=ne):ne=e[56];const Se=Z(ne),be=X?"block":"hidden";let V;e[57]!==be?(V=z("bg-token-bg-primary w-full",be),e[57]=be,e[58]=V):V=e[58];let H;e[59]!==Se||e[60]!==P||e[61]!==S?(H=S&&f.jsxs("div",{className:"flex items-center justify-between px-2.5 pt-6 pb-1",children:[f.jsx("span",{className:"text-token-text-secondary text-sm font-medium",children:P.formatMessage(ge.needInspiration)}),f.jsx("button",{type:"button",onClick:Se,onMouseDown:vt,className:"text-sm font-medium text-blue-400 hover:text-blue-500",children:P.formatMessage(ge.moreIdeas)})]}),e[59]=Se,e[60]=P,e[61]=S,e[62]=H):H=e[62];let ae,le,ie;e[63]===Symbol.for("react.memo_cache_sentinel")?(ae={opacity:0},le={opacity:1},ie={opacity:0},e[63]=ae,e[64]=le,e[65]=ie):(ae=e[63],le=e[64],ie=e[65]);const we=X?"flex":"hidden";let Q;e[66]!==we?(Q=z("divide-token-border-light w-full flex-col divide-y p-2.5 max-sm:px-0",we),e[66]=we,e[67]=Q):Q=e[67];let q;e[68]!==C||e[69]!==r||e[70]!==L||e[71]!==s||e[72]!==c||e[73]!==a?(q=a.map((o,u)=>{var E;return f.jsx(ke.li,{initial:{opacity:0,translateY:4},animate:{opacity:1,translateY:0},transition:{delay:u*.03},exit:{opacity:0,translateY:4},className:"w-full",children:f.jsxs("button",{className:z("flex w-full cursor-pointer items-center justify-start rounded-lg px-2.5 py-3 text-start whitespace-pre-wrap",c===u?"bg-token-main-surface-secondary":"bg-token-main-surface-primary"),onClick:y=>{y.preventDefault(),L(y,o,a,u),Ve()&&he(r).dom.blur()},onMouseDown:Pt,onMouseEnter:()=>{C&&(h(u),s==null||s(u,!1,o))},onMouseLeave:()=>{h(-1),s==null||s(-1,!1,o)},children:[o.source==="CURATED"&&(o.iconThumbnailUrl||o.coverThumbnailImageUrl)?f.jsx("img",{className:z("me-2 flex-none rounded-md object-cover",o.coverThumbnailImageUrl?"h-7 w-7":"h-8 w-8"),src:o.iconThumbnailUrl||o.coverThumbnailImageUrl,alt:""}):o.emoji?f.jsx("span",{"aria-hidden":"true",className:z("bg-primary text-token-text-primary text-md me-4 flex flex-none items-center justify-center"),children:o.emoji}):o.icon?f.jsx("span",{className:"text-token-text-secondary icon me-2 flex-none",children:o.icon}):null,f.jsx("span",{className:z(o.category==="personalized"?"text-md":"text-sm","whitespace-pre-wrap"),children:o.autocompletionChunks&&o.autocompletionChunks.length>0?f.jsx(f.Fragment,{children:o.autocompletionChunks.map((y,T)=>{var $;return f.jsx("span",{className:z(($=y.className)!=null?$:y.isMatched?"text-token-text-tertiary":o.category==="personalized"?"text-token-text-secondary":"text-token-text-primary"),children:y.text},T)})}):o.source==="CURATED"?f.jsx("span",{className:z("text-pretty",o.type===k.Starter||o.type===k.Trending?"text-token-text-secondary":"text-token-text-tertiary"),children:o.title}):f.jsxs(f.Fragment,{children:[f.jsx("span",{className:z("text-pretty",o.type===k.Starter||o.type===k.Trending?"text-token-text-secondary":"text-token-text-tertiary"),children:o.title}),f.jsx("span",{className:"text-token-text-primary text-pretty",children:o.body})]})}),o.trailing?o.trailing:null]})},(E=o.id)!=null?E:u)}),e[68]=C,e[69]=r,e[70]=L,e[71]=s,e[72]=c,e[73]=a,e[74]=q):q=e[74];let B;e[75]!==Q||e[76]!==q?(B=f.jsx(ke.ul,{initial:ae,animate:le,exit:ie,className:Q,children:q}),e[75]=Q,e[76]=q,e[77]=B):B=e[77];let ce;return e[78]!==V||e[79]!==H||e[80]!==B?(ce=f.jsxs("div",{className:V,children:[H,B]}),e[78]=V,e[79]=H,e[80]=B,e[81]=ce):ce=e[81],ce}function Pt(t){t.preventDefault()}function vt(t){return t.preventDefault()}function jt(t){return t.category==="personalized"}function At(t){return t.category==="personalized"}function Et(t){return t.category==="personalized"}function kt(t){var e,r,n;return(n=(r=(e=t.id)!=null?e:t.prompt)!=null?r:t.oneliner)!=null?n:t.title}function Mt(t){return t.type===k.Autocomplete||t.type===k.Trending}function $e(t,e){t=t.toLocaleLowerCase();const r=e;e=e.toLocaleLowerCase();const n=[];let s=0;for(let l=0;l<e.length&&(s<t.length&&t[s]===e[l]&&(n.push(l),s++),s!==t.length);l++);const i=[];let p=0;if(n.forEach(l=>{if(l>p){const x=r.slice(p,l);x&&i.push({text:x,isMatched:!1})}i.push({text:r[l],isMatched:!0}),p=l+1}),p<e.length){const l=r.slice(p);l&&i.push({text:l,isMatched:!1})}return Ct(i)}function Ct(t){if(t.length===0)return t;const e=[t[0]];for(let n=1;n<t.length;n++){const s=e[e.length-1],i=t[n];s.isMatched===i.isMatched?s.text+=i.text:e.push(i)}const r=e.filter(n=>n.isMatched).reduce((n,s)=>n+s.text.trim().length,0);return e.length<=4&&r>=2?e:[{text:e.map(n=>n.text).join(""),isMatched:!1}]}const ge=xt({moreIdeas:{id:"AutocompleteSuggestions.moreIdeas",defaultMessage:"More ideas"},needInspiration:{id:"AutocompleteSuggestions.needInspiration",defaultMessage:"Need a little inspiration?"}});function Te(t){var e;return(e=Be(t)?t.promptStarters:t.gizmo.display.prompt_starters)==null?void 0:e.map(r=>({type:k.Starter,title:"",body:r,prompt:r}))}function gt(){const t=nt(),e=ht(yt),r=Ne(),n=xe(!1);return!r&&e<n.get("new-user-message-count",20)||r&&t&&Date.now()/1e3-t.created<n.get("new-user-age-seconds",336*60*60)}function Tt(){var n;const t=ee(),{data:e}=Ye(t==null?void 0:t.getWorkspaceId()),r=!!((n=e==null?void 0:e.permissions)!=null&&n.includes(_e.EnhancedCitations));return ye("4233029563")||r}function je(){ee();const t=!1,e=Tt();return t||e}const zt=()=>{const t=xe(!0),e=gt(),r=ee(),n=ye("4100765009"),s=je();return r!=null&&r.isK12()||n||s?()=>!0:()=>e&&t.get("web-enable-for-new-users",!1)||!e&&t.get("web_enable_for_existing_users",!1)};function Fe({shouldBeEnabledForDefaultAssistant:t,clientThreadId:e}){const r=zt(),n=ee(),s=Ie(e,a=>a==null?void 0:a.mode),i=mt(s);let p=!(n!=null&&n.isEnterprisey());const l=ye("4100765009"),x=je();return(n!=null&&n.isK12()||l||x)&&(p=!0),t&&!i&&p&&r()}function Ft({shouldBeEnabledForDefaultAssistant:t,clientThreadId:e}){const r=xe(!1);let s=r.get("homepage_prompt_style","chips");const i=ee(),p=ye("4100765009"),l=je();return(i&&(i.isK12()||p)||l)&&(s="tiles"),r.get("use_case_prompts_enabled",!1)&&(s="use-case-styles"),Fe({shouldBeEnabledForDefaultAssistant:t,clientThreadId:e})?s:"chips"}const Kt=({clientThreadId:t,limit:e,shouldBeEnabledForDefaultAssistant:r,modelSlug:n,surface:s="chips"})=>{var C,J;const i=Xe(),{autocompletions$:p}=Le(i),l=Je(),x=De(),{clearAllSystemHintModeTriggers:a,setThreadSystemHintMode:w}=pt(),m=Ie(t,d=>d==null?void 0:d.mode),v=Ze((m==null?void 0:m.kind)===et.GizmoInteraction?m.gizmo_id:void 0).data,{gizmoEditorData:P,mode:c}=tt(),h=Fe({shouldBeEnabledForDefaultAssistant:r,clientThreadId:t}),{data:b,isSuccess:F}=St(ue(pe({},ut(e,n)),{enabled:h}));if(l==null)return{promptStarters:[],isLoading:!0,isSuccess:!1};if(c==="test"&&P)return{promptStarters:(C=Te(P))!=null?C:[],isLoading:!1,isSuccess:!0};if(v!=null)return{promptStarters:Te(v),isLoading:!1,isSuccess:!0};if(!h)return{promptStarters:[],isLoading:!1,isSuccess:!0};const j=(J=b==null?void 0:b.items.map(d=>({type:k.Starter,id:d.id,title:d.title,body:d.description,prompt:d.prompt,category:d.category,oneliner:d.oneliner,theme:d.theme,requires_file_upload:d.requires_file_upload,emoji:d.emoji})))!=null?J:[],M=(d,S,g,G)=>{const U=he(i);if(S.type===k.Starter&&S.category==="dalle"){requestAnimationFrame(()=>{a(),w(st.PictureV2,!0,{}),rt(U)}),p.set(dt(x));return}const O=S.title;p.set([]),U.focus(),ze(U,O),requestAnimationFrame(()=>{const W=j.filter(A=>A.theme===S.theme).map(A=>{const D=ot(A.oneliner),R=D.startsWith(A.title);return ue(pe({},A),{title:R?"".concat(A.title," "):"",body:R?A.body:D,autocompletionChunks:$e(O,D),type:k.Autocomplete})});p.set(W),ft(S,G,t)})},K=xe(!1).get("prompt_source","");let N=[];if(s==="tiles"&&(K==="curated"||K===""||K==="personalized"))N=j;else{const d=j==null?void 0:j.reduce((S,g)=>(g.theme&&!S[g.theme]&&(S[g.theme]=g),S),{});if(d)for(const S in d)S!=="For you"&&N.push(d[S])}const L=N.length>0,X=r&&F&&L;return r&&(me.markStart("StarterPromptChips",me.NS_COMPOSER),X&&me.markRendered("StarterPromptChips",me.NS_COMPOSER)),{onSelectStarterPrompt:M,shouldShowStarterPrompts:X,promptStarters:N}};function xe(t=!1){return Ne()?ve("4031588851",{disableExposureLog:!t}):ve("3533083032",{disableExposureLog:!t})}export{$t as A,de as N,xe as a,Kt as b,Ft as c,Fe as d,zt as e,Te as g,Ce as t,Tt as u};
//# sourceMappingURL=2c05f96f-jzs5r5qu5ml7dypp.js.map
