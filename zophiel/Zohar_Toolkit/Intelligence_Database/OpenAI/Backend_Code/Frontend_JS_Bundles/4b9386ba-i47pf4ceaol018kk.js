var he=Object.defineProperty;var ae=Object.getOwnPropertySymbols;var fe=Object.prototype.hasOwnProperty,ye=Object.prototype.propertyIsEnumerable;var se=(e,s,a)=>s in e?he(e,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[s]=a,H=(e,s)=>{for(var a in s||(s={}))fe.call(s,a)&&se(e,a,s[a]);if(ae)for(var a of ae(s))ye.call(s,a)&&se(e,a,s[a]);return e};import{c as _e}from"./2340486e-n0khdanno9uzbccp.js";import{bW as Te,bX as xe,bY as be,bZ as ve,P as _,b_ as He,b$ as Me,c0 as Pe,c1 as Ae,c2 as Ce,t as ge,c3 as Ie}from"./1a7ebd5f-ihenykhpblfwilpu.js";import{r as ze}from"./b81d67c1-g85xaexv7seu9n1r.js";import{v as Ee,bf as ke,lP as Oe,dm as Fe,ao as Ge,bh as i,ds as Re,dA as Ue,g9 as we,e$ as Le,j$ as $e,oR as qe,rS as Ne,dq as Be,P as De,m0 as Ke,gg as Qe,eZ as We}from"./4813494d-di0bpg5zidu9s57f.js";function at(){"use forget";const e=_e.c(8),{store:s}=Te();let a;e[0]===Symbol.for("react.memo_cache_sentinel")?(a=Ee(),e[0]=a):a=e[0];const c=a,d=ke(),{clearSystemHintModeTrigger:T,getSystemHintModeTrigger:x}=xe(),b=!be.useDisabledGlobally(),v=Oe();let m;return e[1]!==d||e[2]!==T||e[3]!==v||e[4]!==x||e[5]!==b||e[6]!==s?(m=(re,t,oe,M)=>{var U,w,L,$,q,N,B,D,K,Q,W,Z,j,X,Y,J,V;const P=s.getSharedProps();if(!P)return;const{clientThreadId:l,onResetState:ne,conversationMode:u}=P,A=Fe(l);Ge.hideThreadHeader();const C=d===i.Search,g=C?x(i.Search):void 0,r=Re(l),S=ve(t),I=r!=null&&r.selectedHazelnuts?Array.from(r.selectedHazelnuts):[],z=S.length>0?Array.from(new Set([...I,...S])):I;S.length>0&&Ue(l,o=>{var te;const ee=new Set((te=o.selectedHazelnuts)!=null?te:[]);for(const pe of S)ee.add(pe);o.selectedHazelnuts=Array.from(ee)});let p;(t.type===_.Starter||t.type===_.Templated)&&(p=(U=t.data)==null?void 0:U.system_hint);const h=p!=null?p:d,ce=(L=(w=r==null?void 0:r.selectedSources)==null?void 0:w.get(h))!=null?L:new Set;let n,f;if(He(t))n=t.categoryId!=="ask"?[t.categoryId]:[],f=t.modelOverride?{model:t.modelOverride}:{};else{const o=Me(h?[h]:[]);n=($=o.systemHints)!=null?$:[],f=(q=o.extraStreamParams)!=null?q:{}}b&&(f.enableMessageFollowups=!0);const E=we(A),{content:le,attachments:k}=Pe(v,Ae(t),E,u,h),ie=n.includes(i.Slurm),de=n.includes(i.Glaux),O=Ce(),y=H(H({suggestion_type:t.type,starter_prompt_id:"id"in t?t.id:void 0,selected_sources:ie||de?Array.from(ce.values()).map(je).filter(Boolean):void 0},n.length>0&&{system_hints:n}),z.length>0&&{selected_hazelnuts:z});if(O&&(y.__internal={search_settings:O}),k.length>0&&(y.attachments=k),t.type===_.Starter&&((N=t.data)!=null&&N.kaur1br5)){const o=(B=t.data)==null?void 0:B.kaur1br5;y.kaur1br5=o}const me=Le(le,y),F=[];(r==null?void 0:r.startedWithByoMcp)===!0&&F.push($e("",{disable_tool_ids:["gmail","gcal","gcontacts"]}));let G;if(n!=null&&n.some(Ze)&&qe()){const o=Ne(E.id);o&&(G=o)}ze({conversation:A,requestedModelId:G,promptMessage:me,prependMessages:F,sourceEvent:re,extraStreamParams:f,completionMetadata:{suggestions:oe,suggestion:t,suggestionIndex:M,conversationMode:u!=null?u:r==null?void 0:r.mode,systemHints:n,searchSource:g}});const R=Be.getCurrentNode(r).message.id;ne();const ue=(D=c==null?void 0:c.isK12)!=null&&D.call(c)?"K12 Use Starter Prompt":void 0,Se=t.type===_.Starter&&((K=t.data)==null?void 0:K.quorumHealth)===!0;if(ge(t,M,l,R,ue),Se){const o=(j=(Z=(W=(Q=t.data)==null?void 0:Q.health_use_case)!=null?W:t.category)!=null?Z:t.theme)!=null?j:"unknown";De.logEvent("Use Quorum Starter Prompt",{id:t.id,client_thread_id:l,message_id:R,use_case:o,role:(X=t.data)==null?void 0:X.health_role,department:(Y=t.data)==null?void 0:Y.health_department,context_id:(J=t.data)==null?void 0:J.health_context_id,context_label:(V=t.data)==null?void 0:V.health_context_label})}Ke()||Ie(),g&&C&&T(i.Search)},e[1]=d,e[2]=T,e[3]=v,e[4]=x,e[5]=b,e[6]=s,e[7]=m):m=e[7],m}function Ze(e){return Qe(e)}function je(e){return We[e]}export{at as u};
//# sourceMappingURL=4b9386ba-i47pf4ceaol018kk.js.map
