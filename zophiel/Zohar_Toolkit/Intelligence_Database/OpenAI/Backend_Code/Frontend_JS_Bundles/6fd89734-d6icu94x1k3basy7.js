var U=Object.defineProperty;var M=Object.getOwnPropertySymbols;var N=Object.prototype.hasOwnProperty,q=Object.prototype.propertyIsEnumerable;var P=(n,e,o)=>e in n?U(n,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):n[e]=o,_=(n,e)=>{for(var o in e||(e={}))N.call(e,o)&&P(n,o,e[o]);if(M)for(var o of M(e))q.call(e,o)&&P(n,o,e[o]);return n};import{c as x,r as T}from"./2340486e-n0khdanno9uzbccp.js";import{e9 as w,f as G,fC as y,b as k,rp as O,eg as F,P as H,rq as z,rr as h,dF as j,ef as B}from"./4813494d-di0bpg5zidu9s57f.js";import{r as D}from"./b81d67c1-g85xaexv7seu9n1r.js";import{G as J}from"./1a7ebd5f-ihenykhpblfwilpu.js";const $=w(()=>G(new Set)),R=w(()=>G(null));function Y(n){const e=O(),o=e==null?void 0:e.canUserEnable,a=R(n);return F()&&o&&a!=null}function Z(n){"use forget";var L;const e=x.c(21),{conversationMode:o}=n,a=y(),[v,I]=T.useState(!1),s=k(O),E=(L=a==null?void 0:a.id)!=null?L:void 0;let r;e[0]!==a?(r=a?l=>D(_({conversation:a},l)):void 0,e[0]=a,e[1]=r):r=e[1];let i;e[2]!==o||e[3]!==E||e[4]!==r?(i={clientThreadId:E,conversationMode:o,onRequestCompletion:r},e[2]=o,e[3]=E,e[4]=r,e[5]=i):i=e[5];const m=J(i);let c;e[6]!==(s==null?void 0:s.canUserEnable)||e[7]!==(s==null?void 0:s.isAdultSearchEnabled)?(c=async l=>{var t;l===(s==null?void 0:s.isAdultSearchEnabled)||(s==null?void 0:s.canUserEnable)===!1||(H.logStructuredEvent(z,{step:h.ATLAS_SAFE_SEARCH_TOGGLE_ACTION_STEP_TOGGLE,fromEnabled:!(s!=null&&s.isAdultSearchEnabled),toEnabled:!l}),I(!0),await((t=j())==null?void 0:t.updateAdultSearchSetting({isAdultSearchEnabled:l,canUserEnable:!0})),I(!1))},e[6]=s==null?void 0:s.canUserEnable,e[7]=s==null?void 0:s.isAdultSearchEnabled,e[8]=c):c=e[8];const b=c;let d;e[9]!==a||e[10]!==m?(d=()=>{if(!a)return;const[l,t]=B(()=>[R(a),$(a)]);l&&!l.safeSearchOff&&!t.has(l.messageId)&&($.set(a,t.add(l.messageId)),m({sourceEvent:new Event("click"),nodeId:l.messageId}))},e[9]=a,e[10]=m,e[11]=d):d=e[11];const g=T.useEffectEvent(d);let f;e[12]!==(s==null?void 0:s.isAdultSearchEnabled)||e[13]!==g?(f=()=>{s!=null&&s.isAdultSearchEnabled&&g()},e[12]=s==null?void 0:s.isAdultSearchEnabled,e[13]=g,e[14]=f):f=e[14];let u;e[15]!==s?(u=[s],e[15]=s,e[16]=u):u=e[16],T.useEffect(f,u);const p=s==null?void 0:s.isAdultSearchEnabled,C=v||!s;let A;return e[17]!==b||e[18]!==p||e[19]!==C?(A={isAdultSearchEnabled:p,handleToggleSetting:b,isLoading:C},e[17]=b,e[18]=p,e[19]=C,e[20]=A):A=e[20],A}export{R as l,Y as s,Z as u};
//# sourceMappingURL=6fd89734-d6icu94x1k3basy7.js.map
