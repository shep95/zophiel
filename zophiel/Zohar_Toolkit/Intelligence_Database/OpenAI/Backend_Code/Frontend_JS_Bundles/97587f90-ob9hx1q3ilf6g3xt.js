var S=Object.defineProperty,T=Object.defineProperties;var E=Object.getOwnPropertyDescriptors;var g=Object.getOwnPropertySymbols;var P=Object.prototype.hasOwnProperty,w=Object.prototype.propertyIsEnumerable;var h=(e,s,n)=>s in e?S(e,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[s]=n,c=(e,s)=>{for(var n in s||(s={}))P.call(s,n)&&h(e,n,s[n]);if(g)for(var n of g(s))w.call(s,n)&&h(e,n,s[n]);return e},x=(e,s)=>T(e,E(s));import{r as l,j as a}from"./2340486e-n0khdanno9uzbccp.js";import{l as A,ej as G,dq as I,dW as M,k6 as p,jL as N}from"./4813494d-di0bpg5zidu9s57f.js";import{at as _,au as v,av as j,aw as b,ax as k,ay as y,az as R,aA as L}from"./1a7ebd5f-ihenykhpblfwilpu.js";import{g as U}from"./089c718c-clpuzb1fnoaty06o.js";const O=l.createContext(void 0);function F(e){var o;const s=I.getConversationTurns(e),n=s.findIndex(t=>t.role===M.Assistant);if(n===-1)return;const r=s[n];for(let t=0;t<r.messageGroups.length;t++)if(r.messageGroups[t].type===p.SearchGPTQuery){const u=r.messageGroups.slice(t+1).find(({type:d})=>d===p.Text);if(u==null)return;const m=N(u.messages[0]);if(((o=m==null?void 0:m[0])==null?void 0:o.type)==="navigation")return{turnIndex:n,navigationCitation:m[0],message:u.messages[0]}}}function K(e,s){var r,o;if(s==null||e==null)return e;const n=new Set(e.domains.map(t=>t.url));return x(c({},e),{domains:[...e.domains,...s.domains.filter(t=>!n.has(t.url))],safe_urls:[...(r=e.safe_urls)!=null?r:[],...(o=s.safe_urls)!=null?o:[]]})}function Q({query:e}){return a.jsx(_,{horizontalPadding:"standard",children:a.jsx(v,{className:j({isUserTurn:!0}),children:a.jsx("div",{className:U(!0),children:a.jsx(b,{containsImagesOrAttachments:!1,children:a.jsx(k,{text:e})})})})})}function B({clientThreadId:e,prefetchNavlink:s,clearPrefetchNavlink:n}){var m;const r=l.use(s),o=A("1032814809");l.useEffect(()=>{window.__oai_SSR_NAVLINK&&y.logEvent("Search Tool Page Load Time To Fast Nav SSR",{server_timing:r==null?void 0:r.timing},window.__oai_SSR_NAVLINK)},[]),l.useEffect(()=>{r==null&&n()},[r,n]);const t=l.useMemo(()=>r==null?null:x(c({},r.navlink),{domains:r.navlink.domains.map(d=>{var f;return x(c({},d),{subtitle:(f=d.subtitle)!=null?f:d.domain})})}),[r]),i=G(e,F),u=l.useMemo(()=>K(t,i==null?void 0:i.navigationCitation),[i,t]);return r==null||u==null?null:a.jsxs("div",{children:[a.jsx("div",{className:"mt-10",children:a.jsx(_,{horizontalPadding:"standard",children:a.jsxs(v,{className:j({isUserTurn:!1}),children:[a.jsx(R,{clientThreadId:e,turnIndex:(m=i==null?void 0:i.turnIndex)!=null?m:2,nextMessage:i==null?void 0:i.message,navigationCitation:u}),o?a.jsxs("div",{className:"text-token-text-secondary relative -top-2 flex justify-end gap-2 font-mono text-xs",children:[a.jsxs("div",{elementtiming:"navlink",children:["server: ",r.timing,"ms"]}),a.jsx(V,{})]}):null]})})}),a.jsx(L,{scriptSrc:"requestAnimationFrame(()=>window.__oai_SSR_NAVLINK=window.__oai_SSR_NAVLINK||performance.now());"})]})}function V(){const[e,s]=l.useState(null);return l.useEffect(()=>{const n=new PerformanceObserver(r=>{r.getEntries().forEach(o=>{if(o.identifier==="navlink"){const t=o.renderTime;s(i=>i==null?t:i)}})});return n.observe({type:"element",buffered:!0}),()=>n.disconnect()},[]),e==null?null:a.jsxs("span",{children:["render: ",e,"ms"]})}export{O as P,Q as a,B as b};
//# sourceMappingURL=97587f90-ob9hx1q3ilf6g3xt.js.map
